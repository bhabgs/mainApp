!function(p){"use strict";var w="ht",H=p[w],I=Math,n=I.max,C=I.min,q=I.abs,d=I.atan2,u=(I.cos,I.sin,I.ceil),X=H.Default,e=X.getInternal(),z=H.List,V=e.Mat,y=e.getNodeRect,f=e.intersectionLineRect,x=X.getDistance,K=X.setEdgeType,m="left",l="right",O="top",D="bottom",L="edge.type",i="edge.gap",A="edge.center",r="edge.extend",P=function(D,A){return y(D,A).width},J=function(Z,q){return y(Z,q).height},M=function(_,c){return e.getEdgeHostPosition(_,c,"source")},t=function(O,E){return e.getEdgeHostPosition(O,E,"target")},o=function(l,$){var q=l.s(L),p=l.getEdgeGroup();if(p){var f=0;if(p.eachSiblingEdge(function(I){$.isVisible(I)&&I.s(L)==q&&f++}),f>1)return l.s(i)*(f-1)/2}return 0},Q=function(x,Y){var Z=x.s(L),G=x.isLooped();if(!x.getEdgeGroup())return G?x.s(i):0;var X,e=0,n=0,r=0;return x.getEdgeGroup().getSiblings().each(function(w){w.each(function(S){if(S._40I===x._40I&&S.s(L)==Z&&Y.isVisible(S)){var J=S.s(i);X?(n+=r/2+J/2,r=J):(X=S,r=J),S===x&&(e=n)}})}),G?n-e+r:e-n/2},$=function(A,D){var $=D.s("edge.corner.radius");return X.toRoundedCorner(A,$)};e.addMethod(H.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),K("boundary",function(e,B,K,Q){Q||(B=-B);var u,q=M(K,e),m=t(K,e),w=y(K,e._40I),R=y(K,e._41I),F=new V(d(m.y-q.y,m.x-q.x)),$=x(q,m),W=q.x,b=q.y;return u=F.tf(0,B),q={x:u.x+W,y:u.y+b},u=F.tf($,B),m={x:u.x+W,y:u.y+b},u=f(q,m,w),u&&(q={x:u[0],y:u[1]}),u=f(q,m,R),u&&(m={x:u[0],y:u[1]}),{points:new z([q,m])}}),K("ripple",function(G,y,i,m){m||(y=-y);var $=M(i,G),J=t(i,G),E=x($,J),I=C(G.s("edge.offset"),E/2),q=G.s("edge.ripple.size"),a=G.s("edge.ripple.length"),g=G.s("edge.ripple.both"),O=G.s(A),p=G.s("edge.ripple.elevation"),e=new z,v=G.s("edge.ripple.straight")?null:new z,j=new V(d(J.y-$.y,J.x-$.x));m||(p=-p),E-=2*I,a>0&&(q=u(E/a));var H=E/q;v&&v.add(1);for(var Q=0;q>Q;Q++)v&&v.add(3),0===Q?e.add({x:I+H*Q,y:O?0:y}):e.add({x:I+H*Q,y:y}),e.add({x:I+H*Q+H/2,y:p+y}),g&&(p=-p);for(e.add({x:I+E,y:O?0:y}),Q=0;Q<e.size();Q++){var r=j.tf(e.get(Q));r.x+=$.x,r.y+=$.y,e.set(Q,r)}return{points:e,segments:v}}),K("h.v",function(d,j,s){j=Q(d,s);var h=new z,o=d.s(A),e=M(s,d),V=e.x,u=e.y,X=t(s,d),D=X.x,W=X.y,N=d._40I instanceof H.Edge,n=d._41I instanceof H.Edge,x=0,f=0,C=D-V,Z=W-u;return o||(x=N?0:P(s,d._40I)/2,f=n?0:J(s,d._41I)/2),C>=0&&0>=Z?(h.add({x:V+x,y:u+j}),h.add({x:D+j,y:u+j}),h.add({x:D+j,y:W+f})):0>=C&&Z>=0?(h.add({x:V-x,y:u+j}),h.add({x:D+j,y:u+j}),h.add({x:D+j,y:W-f})):C>=0&&Z>=0?(h.add({x:V+x,y:u+j}),h.add({x:D-j,y:u+j}),h.add({x:D-j,y:W-f})):(h.add({x:V-x,y:u+j}),h.add({x:D-j,y:u+j}),h.add({x:D-j,y:W+f})),$(h,d)}),K("v.h",function(B,X,S){X=Q(B,S);var u=new z,g=B.s(A),o=M(S,B),I=o.x,W=o.y,r=t(S,B),s=r.x,D=r.y,l=B._40I instanceof H.Edge,e=B._41I instanceof H.Edge,b=0,k=0,v=s-I,F=D-W;return g||(b=e?0:P(S,B._41I)/2,k=l?0:J(S,B._40I)/2),v>=0&&0>=F?(u.add({x:I+X,y:W-k}),u.add({x:I+X,y:D+X}),u.add({x:s-b,y:D+X})):0>=v&&F>=0?(u.add({x:I+X,y:W+k}),u.add({x:I+X,y:D+X}),u.add({x:s+b,y:D+X})):v>=0&&F>=0?(u.add({x:I-X,y:W+k}),u.add({x:I-X,y:D+X}),u.add({x:s-b,y:D+X})):(u.add({x:I-X,y:W-k}),u.add({x:I-X,y:D+X}),u.add({x:s+b,y:D+X})),$(u,B)}),K("ortho",function(r,U,O){var i=new z,G=r.s(A),D=r.s("edge.ortho"),V=r._40I,v=r._41I,Y=M(O,r),x=Y.x,f=Y.y,n=t(O,r),j=n.x,F=n.y,l=j-x,X=F-f,g=V instanceof H.Edge,k=v instanceof H.Edge,C=G||g?0:P(O,V)/2,b=G||g?0:J(O,V)/2,K=G||k?0:P(O,v)/2,Z=G||k?0:J(O,v)/2,Q=(l-(C+K)*(l>0?1:-1))*D,s=(X-(b+Z)*(X>0?1:-1))*D;return q(l)<q(X)?l>=0&&0>=X?(i.add({x:x+U,y:f-b}),i.add({x:x+U,y:f+s+U-b}),i.add({x:j+U,y:f+s+U-b}),i.add({x:j+U,y:F+Z})):0>=l&&X>=0?(i.add({x:x+U,y:f+b}),i.add({x:x+U,y:f+s+U+b}),i.add({x:j+U,y:f+s+U+b}),i.add({x:j+U,y:F-Z})):l>=0&&X>=0?(i.add({x:x+U,y:f+b}),i.add({x:x+U,y:f+s-U+b}),i.add({x:j+U,y:f+s-U+b}),i.add({x:j+U,y:F-Z})):(i.add({x:x+U,y:f-b}),i.add({x:x+U,y:f+s-U-b}),i.add({x:j+U,y:f+s-U-b}),i.add({x:j+U,y:F+Z})):l>=0&&0>=X?(i.add({x:x+C,y:f+U}),i.add({x:x+Q+U+C,y:f+U}),i.add({x:x+Q+U+C,y:F+U}),i.add({x:j-K,y:F+U})):0>=l&&X>=0?(i.add({x:x-C,y:f+U}),i.add({x:x+Q+U-C,y:f+U}),i.add({x:x+Q+U-C,y:F+U}),i.add({x:j+K,y:F+U})):l>=0&&X>=0?(i.add({x:x+C,y:f+U}),i.add({x:x+Q-U+C,y:f+U}),i.add({x:x+Q-U+C,y:F+U}),i.add({x:j-K,y:F+U})):(i.add({x:x-C,y:f+U}),i.add({x:x+Q-U-C,y:f+U}),i.add({x:x+Q-U-C,y:F+U}),i.add({x:j+K,y:F+U})),$(i,r)}),K("flex",function(R,r,Y){var K=new z,w=R.s("edge.flex")+o(R,Y),n=R.s(A),l=R._40I,j=R._41I,u=M(Y,R),h=u.x,m=u.y,v=t(Y,R),x=v.x,p=v.y,_=l instanceof H.Edge,d=j instanceof H.Edge,L=x-h,G=p-m,W=n||_?0:P(Y,l)/2,B=n||_?0:J(Y,l)/2,y=n||d?0:P(Y,j)/2,X=n||d?0:J(Y,j)/2,b=L>0?w:-w,D=G>0?w:-w;return q(L)<q(G)?L>=0&&0>=G?(K.add({x:h+r,y:m-B}),K.add({x:h+r,y:m+D+r-B}),K.add({x:x+r,y:p-D+r+X}),K.add({x:x+r,y:p+X})):0>=L&&G>=0?(K.add({x:h+r,y:m+B}),K.add({x:h+r,y:m+D+r+B}),K.add({x:x+r,y:p-D+r-X}),K.add({x:x+r,y:p-X})):L>=0&&G>=0?(K.add({x:h+r,y:m+B}),K.add({x:h+r,y:m+D-r+B}),K.add({x:x+r,y:p-D-r-X}),K.add({x:x+r,y:p-X})):(K.add({x:h+r,y:m-B}),K.add({x:h+r,y:m+D-r-B}),K.add({x:x+r,y:p-D-r+X}),K.add({x:x+r,y:p+X})):L>=0&&0>=G?(K.add({x:h+W,y:m+r}),K.add({x:h+b+r+W,y:m+r}),K.add({x:x-b+r-y,y:p+r}),K.add({x:x-y,y:p+r})):0>=L&&G>=0?(K.add({x:h-W,y:m+r}),K.add({x:h+b+r-W,y:m+r}),K.add({x:x-b+r+y,y:p+r}),K.add({x:x+y,y:p+r})):L>=0&&G>=0?(K.add({x:h+W,y:m+r}),K.add({x:h+b-r+W,y:m+r}),K.add({x:x-b-r-y,y:p+r}),K.add({x:x-y,y:p+r})):(K.add({x:h-W,y:m+r}),K.add({x:h+b-r-W,y:m+r}),K.add({x:x-b-r+y,y:p+r}),K.add({x:x+y,y:p+r})),$(K,R)}),K("extend.east",function(I,O,C){var W=new z,Z=I.s(r)+o(I,C),R=I.s(A),U=M(C,I),V=I._40I instanceof H.Edge,T=I._41I instanceof H.Edge,j=U.x+(R||V?0:P(C,I._40I)/2),s=U.y,i=t(C,I),k=i.x+(R||T?0:P(C,I._41I)/2),D=i.y,q=n(j,k)+Z;return s>D?(W.add({x:j,y:s+O}),W.add({x:q+O,y:s+O}),W.add({x:q+O,y:D-O}),W.add({x:k,y:D-O})):(W.add({x:j,y:s-O}),W.add({x:q+O,y:s-O}),W.add({x:q+O,y:D+O}),W.add({x:k,y:D+O})),$(W,I)}),K("extend.west",function(l,i,w){var E=new z,f=l.s(r)+o(l,w),k=l.s(A),B=l._40I instanceof H.Edge,V=l._41I instanceof H.Edge,b=M(w,l),L=b.x-(k||B?0:P(w,l._40I)/2),v=b.y,g=t(w,l),D=g.x-(k||V?0:P(w,l._41I)/2),j=g.y,d=C(L,D)-f;return v>j?(E.add({x:L,y:v+i}),E.add({x:d-i,y:v+i}),E.add({x:d-i,y:j-i}),E.add({x:D,y:j-i})):(E.add({x:L,y:v-i}),E.add({x:d-i,y:v-i}),E.add({x:d-i,y:j+i}),E.add({x:D,y:j+i})),$(E,l)}),K("extend.north",function(f,p,b){var e=new z,D=f.s(r)+o(f,b),c=f.s(A),N=f._40I instanceof H.Edge,I=f._41I instanceof H.Edge,s=M(b,f),v=s.x,Q=s.y-(c||N?0:J(b,f._40I)/2),G=t(b,f),K=G.x,L=G.y-(c||I?0:J(b,f._41I)/2),X=C(Q,L)-D;return v>K?(e.add({y:Q,x:v+p}),e.add({y:X-p,x:v+p}),e.add({y:X-p,x:K-p}),e.add({y:L,x:K-p})):(e.add({y:Q,x:v-p}),e.add({y:X-p,x:v-p}),e.add({y:X-p,x:K+p}),e.add({y:L,x:K+p})),$(e,f)}),K("extend.south",function(l,B,f){var I=new z,V=l.s(r)+o(l,f),c=l.s(A),y=l._40I instanceof H.Edge,m=l._41I instanceof H.Edge,e=M(f,l),h=e.x,g=e.y+(c||y?0:J(f,l._40I)/2),R=t(f,l),N=R.x,j=R.y+(c||m?0:J(f,l._41I)/2),E=n(g,j)+V;return h>N?(I.add({y:g,x:h+B}),I.add({y:E+B,x:h+B}),I.add({y:E+B,x:N-B}),I.add({y:j,x:N-B})):(I.add({y:g,x:h-B}),I.add({y:E+B,x:h-B}),I.add({y:E+B,x:N+B}),I.add({y:j,x:N+B})),$(I,l)});var g=function(H,g,j,D,K){if(D.sort(function(v,h){var K=v.getSourceAgent()===g?v.getTargetAgent():v.getSourceAgent(),$=h.getSourceAgent()===g?h.getTargetAgent():h.getSourceAgent(),r=K.p(),T=$.p();if(j===m||j===l){if(r.y>T.y)return 1;if(r.y<T.y)return-1}else{if(r.x>T.x)return 1;if(r.x<T.x)return-1}return X.sortFunc(v.getId(),h.getId())}),K){for(var A,T,x,k=H.getSourceAgent(),a=H.getTargetAgent(),c=0;c<D.size();c++){var J=D.get(c);J.getSourceAgent()===k&&J.getTargetAgent()===a||J.getTargetAgent()===k&&J.getSourceAgent()===a?(T||(T=new z),T.add(J,0)):T?(x||(x=new z),x.add(J)):(A||(A=new z),A.add(J))}D.clear(),A&&D.addAll(A),T&&D.addAll(T),x&&D.addAll(x)}var W=D.indexOf(H),Z=D.size(),P=H.s(i);return{side:j,index:W,size:Z,offset:-P*(Z-1)/2+P*W}},h=function($,t,q,u,o){var D=t.s(L);return g(t,q,u,q.getAgentEdges().toList(function(k){return $.isVisible(k)&&k.s(L)===D}),o)},W=function(b,y){var V=b.getSourceAgent()===y?b.getTargetAgent():b.getSourceAgent(),u=y.p(),C=V.p(),W=C.x-u.x,Z=C.y-u.y;return W>0&&q(Z)<=W?l:0>W&&q(Z)<=-W?m:Z>0&&q(W)<=Z?D:O},b=function(D,x,R){var $=x.s(L),O=W(x,R);return g(x,R,O,R.getAgentEdges().toList(function(A){return D.isVisible(A)&&A.s(L)===$&&W(A,R)===O}))},G=function(W,x){var v=W.getSourceAgent()===x,u=v?W.getTargetAgent():W.getSourceAgent(),S=x.p(),Q=u.p();return v?S.y>Q.y?O:D:S.x<Q.x?l:m},_=function(c,b,N){var $=b.s(L),W=G(b,N);return g(b,N,W,N.getAgentEdges().toList(function(t){return c.isVisible(t)&&t.s(L)===$&&G(t,N)===W}),W===l||W===D)},B=function(K,x){var Q=K.getSourceAgent()===x,Y=Q?K.getTargetAgent():K.getSourceAgent(),V=x.p(),e=Y.p();return Q?V.x<e.x?l:m:V.y>e.y?O:D},R=function(p,z,Q){var G=z.s(L),f=B(z,Q);return g(z,Q,f,Q.getAgentEdges().toList(function(C){return p.isVisible(C)&&C.s(L)===G&&B(C,Q)===f}),f===l||f===D)},T=function(M,u,y){var a=M.getSourceAgent(),E=M.getTargetAgent(),V=a.getId()>E.getId(),k=V?E:a,h=V?a:E,c=k.p(),H=h.p(),j=y(u,M,k),Y=y(u,M,h),w=M.s(A),_=w?0:P(u,k)/2,G=w?0:P(u,h)/2,K=w?0:J(u,k)/2,C=w?0:J(u,h)/2,d=j.offset,s=Y.offset,e=j.side,i=Y.side,S=new z;return e===O?(S.add({x:c.x+d,y:c.y-K}),S.add({x:c.x+d,y:H.y+s}),i===m?S.add({x:H.x-G,y:H.y+s}):S.add({x:H.x+G,y:H.y+s})):e===D?(S.add({x:c.x+d,y:c.y+K}),S.add({x:c.x+d,y:H.y+s}),i===m?S.add({x:H.x-G,y:H.y+s}):S.add({x:H.x+G,y:H.y+s})):e===m?(S.add({x:c.x-_,y:c.y+d}),S.add({x:H.x+s,y:c.y+d}),i===D?S.add({x:H.x+s,y:H.y+C}):S.add({x:H.x+s,y:H.y-C})):e===l&&(S.add({x:c.x+_,y:c.y+d}),S.add({x:H.x+s,y:c.y+d}),i===D?S.add({x:H.x+s,y:H.y+C}):S.add({x:H.x+s,y:H.y-C})),V&&S.reverse(),$(S,M)};K("ortho2",function(n,Y,H){var U,y,v=n.s(A),o=n.s("edge.ortho"),B=n.getSourceAgent(),w=n.getTargetAgent(),W=B.getId()>w.getId(),a=W?w:B,q=W?B:w,C=a.p(),X=q.p(),G=b(H,n,a),s=b(H,n,q),T=v?0:P(H,a)/2,d=v?0:J(H,a)/2,c=v?0:P(H,q)/2,x=v?0:J(H,q)/2,F=new z,k=G.offset,i=s.offset,N=G.side;return N===l?(U=X.y>C.y?-k:k,y=C.x+T+(X.x-c-C.x-T)*o,F.add({x:C.x+T,y:C.y+k}),F.add({x:y+U,y:C.y+k}),F.add({x:y+U,y:X.y+i}),F.add({x:X.x-c,y:X.y+i})):N===m?(U=X.y>C.y?-k:k,y=C.x-T-(C.x-T-X.x-c)*o,F.add({x:C.x-T,y:C.y+k}),F.add({x:y-U,y:C.y+k}),F.add({x:y-U,y:X.y+i}),F.add({x:X.x+c,y:X.y+i})):N===D?(U=X.x>C.x?-k:k,y=C.y+d+(X.y-x-C.y-d)*o,F.add({x:C.x+k,y:C.y+d}),F.add({x:C.x+k,y:y+U}),F.add({x:X.x+i,y:y+U}),F.add({x:X.x+i,y:X.y-x})):N===O&&(U=X.x>C.x?-k:k,y=C.y-d-(C.y-d-X.y-x)*o,F.add({x:C.x+k,y:C.y-d}),F.add({x:C.x+k,y:y-U}),F.add({x:X.x+i,y:y-U}),F.add({x:X.x+i,y:X.y+x})),W&&F.reverse(),$(F,n)},!0),K("flex2",function(c,W,X){var v,K=c.getSourceAgent(),G=c.getTargetAgent(),k=K.getId()>G.getId(),R=k?G:K,M=k?K:G,F=R.p(),Y=M.p(),d=b(X,c,R),y=b(X,c,M),H=c.s(A),T=c.s("edge.flex")+(d.size-1)/2*c.s(i),f=H?0:P(X,R)/2,p=H?0:J(X,R)/2,r=H?0:P(X,M)/2,E=H?0:J(X,M)/2,a=new z,I=d.offset,w=y.offset,V=d.side;return V===l?(v=Y.y>F.y?-I:I,a.add({x:F.x+f,y:F.y+I}),a.add({x:F.x+f+T+v,y:F.y+I}),a.add({x:Y.x-r-T+v,y:Y.y+w}),a.add({x:Y.x-r,y:Y.y+w})):V===m?(v=Y.y>F.y?-I:I,a.add({x:F.x-f,y:F.y+I}),a.add({x:F.x-f-T-v,y:F.y+I}),a.add({x:Y.x+r+T-v,y:Y.y+w}),a.add({x:Y.x+r,y:Y.y+w})):V===D?(v=Y.x>F.x?-I:I,a.add({x:F.x+I,y:F.y+p}),a.add({x:F.x+I,y:F.y+p+T+v}),a.add({x:Y.x+w,y:Y.y-E-T+v}),a.add({x:Y.x+w,y:Y.y-E})):V===O&&(v=Y.x>F.x?-I:I,a.add({x:F.x+I,y:F.y-p}),a.add({x:F.x+I,y:F.y-p-T-v}),a.add({x:Y.x+w,y:Y.y+E+T-v}),a.add({x:Y.x+w,y:Y.y+E})),k&&a.reverse(),$(a,c)},!0),K("extend.north2",function(D,_,H){var L=D.getSourceAgent(),g=D.getTargetAgent(),F=L.getId()>g.getId(),S=F?g:L,n=F?L:g,e=S.p(),m=n.p(),a=h(H,D,S,O),Q=h(H,D,n,O,!0),M=D.s(A),l=M?0:J(H,S)/2,d=M?0:J(H,n)/2,k=a.offset,q=Q.offset,R=D.s(r)+(a.size-1)/2*D.s(i),N=C(e.y-l,m.y-d)-R+(e.x<m.x?k:-k),s=new z;return s.add({x:e.x+k,y:e.y-l}),s.add({x:e.x+k,y:N}),s.add({x:m.x+q,y:N}),s.add({x:m.x+q,y:m.y-d}),F&&s.reverse(),$(s,D)},!0),K("extend.south2",function(U,t,o){var e=U.getSourceAgent(),N=U.getTargetAgent(),q=e.getId()>N.getId(),g=q?N:e,f=q?e:N,v=g.p(),V=f.p(),k=h(o,U,g,D),F=h(o,U,f,D,!0),y=U.s(A),P=y?0:J(o,g)/2,B=y?0:J(o,f)/2,R=k.offset,L=F.offset,W=U.s(r)+(k.size-1)/2*U.s(i),S=n(v.y+P,V.y+B)+W+(v.x>V.x?R:-R),u=new z;return u.add({x:v.x+R,y:v.y+P}),u.add({x:v.x+R,y:S}),u.add({x:V.x+L,y:S}),u.add({x:V.x+L,y:V.y+B}),q&&u.reverse(),$(u,U)},!0),K("extend.west2",function(p,R,x){var k=p.getSourceAgent(),S=p.getTargetAgent(),m=k.getId()>S.getId(),F=m?S:k,s=m?k:S,L=F.p(),_=s.p(),U=h(x,p,F,O),w=h(x,p,s,O,!0),B=p.s(A),y=B?0:P(x,F)/2,M=B?0:P(x,s)/2,d=U.offset,X=w.offset,j=p.s(r)+(U.size-1)/2*p.s(i),e=C(L.x-y,_.x-M)-j+(L.y<_.y?d:-d),b=new z;return b.add({x:L.x-y,y:L.y+d}),b.add({x:e,y:L.y+d}),b.add({x:e,y:_.y+X}),b.add({x:_.x-M,y:_.y+X}),m&&b.reverse(),$(b,p)},!0),K("extend.east2",function(a,g,U){var F=a.getSourceAgent(),K=a.getTargetAgent(),_=F.getId()>K.getId(),y=_?K:F,H=_?F:K,d=y.p(),L=H.p(),D=h(U,a,y,O),S=h(U,a,H,O,!0),J=a.s(A),T=J?0:P(U,y)/2,m=J?0:P(U,H)/2,v=D.offset,X=S.offset,N=a.s(r)+(D.size-1)/2*a.s(i),G=n(d.x+T,L.x+m)+N+(d.y>L.y?v:-v),l=new z;return l.add({x:d.x+T,y:d.y+v}),l.add({x:G,y:d.y+v}),l.add({x:G,y:L.y+X}),l.add({x:L.x+m,y:L.y+X}),_&&l.reverse(),$(l,a)},!0),K("v.h2",function(Y,J,t){return T(Y,t,_)},!0),K("h.v2",function(t,m,Y){return T(t,Y,R)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);