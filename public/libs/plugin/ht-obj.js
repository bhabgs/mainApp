!function(E,m,d){"use strict";function V(){var M=[],f=[];return function(){return 0===arguments.length?f.join("")+F.apply(String,M):(M.length+arguments.length>1024&&(f.push(F.apply(String,M)),M.length=0),Array.prototype.push.apply(M,arguments),void 0)}}function e(P,_,s,l,B){var H,r,W=8*B-l-1,X=(1<<W)-1,L=X>>1,C=-7,o=s?B-1:0,f=s?-1:1,c=P[_+o];for(o+=f,H=c&(1<<-C)-1,c>>=-C,C+=W;C>0;H=256*H+P[_+o],o+=f,C-=8);for(r=H&(1<<-C)-1,H>>=-C,C+=l;C>0;r=256*r+P[_+o],o+=f,C-=8);if(0===H)H=1-L;else{if(H===X)return r?0/0:1/0*(c?-1:1);r+=Math.pow(2,l),H-=L}return(c?-1:1)*r*Math.pow(2,H-l)}var O="ht",x=E[O],c=null,Q=Math,N=Q.abs,U=Q.max,g=Number.MAX_VALUE,v=x.Default,L=v.getInternal(),u=v.clone,Y=L.vec3TransformMat4,S=[0,0],K=L.appendArray,j=function(){function j(_,P,Q,z){if(_){var y=_[z];if(y){Q.ignoreColor||(P.color=y.kd),!Q.ignoreTransparent&&y.d>0&&y.d<1&&(P.transparent=!0,P.opacity=y.d);var d;if(!Q.ignoreImage&&(d=y.map_kd)){d=d.split(" ");for(var J=-1,m=0;m<d.length;m++)"-o"===d[m]?(P.uvOffset=[parseFloat(d[m+1]),parseFloat(d[m+2])],m+=3,J=m):"-s"===d[m]&&(P.uvScale=[parseFloat(d[m+1]),parseFloat(d[m+2])],m+=3,J=m);P.image=(Q.prefix||"")+d.splice(J+1).join(" ")}}}}var l=/v( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,t=/vt( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,G=/vn( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,W=/^[og]\s*(.+)?/,b=function(a,C){return C=parseInt(C),C>=0?a[C-1]:a[C+a.length]},I=function(R,$,S,v,x){if(R.lvs){var q=b($,v),l=b($,x),F=S.matrix,n=R.lvs;F?(K(n,Y(u(q),F)),K(n,Y(u(l),F))):(K(n,q),K(n,l))}},$=function(C,e,N,y,P,U){if(C.vs){var g=b(e,y),X=b(e,P),W=b(e,U),E=N.matrix,M=C.vs;if(N.flipFace){var i=X;X=W,W=i}E?(K(M,Y(u(g),E)),K(M,Y(u(X),E)),K(M,Y(u(W),E))):(K(M,g),K(M,X),K(M,W))}},w=function(D,Q,i,t,W,n){if(D.vs){var o=i.flipY,$=t===d?S:b(Q,t),u=W===d?S:b(Q,W),F=n===d?S:b(Q,n);if(i.flipFace){var w=u;u=F,F=w}D.uv.push($[0],o?1-$[1]:$[1],u[0],o?1-u[1]:u[1],F[0],o?1-F[1]:F[1])}},z=function(j,J,$,c,N,_){if(j.vs){var S=b(J,c),a=b(J,N),B=b(J,_),I=$.normalMatrix,e=j.ns;if($.flipFace){var Q=a;a=B,B=Q}I?(K(e,Y(u(S),I)),K(e,Y(u(a),I)),K(e,Y(u(B),I))):(K(e,S),K(e,a),K(e,B))}},B=function(p,G,y,P){for(var K=P.length-1,A=0;K>A;++A)I(p,G,y,P[A],P[A+1]);I(p,G,y,P[K],P[0])},f=function(s,F,G,V,o,f,Z,E){var t=V&&V.length&&E;f[3]===d?($(s,F,o,f[0],f[1],f[2]),Z?w(s,G,o,Z[0],Z[1],Z[2]):s.uv&&s.uv.length&&w(s,G,o),t&&z(s,V,o,E[0],E[1],E[2])):($(s,F,o,f[0],f[1],f[3]),$(s,F,o,f[1],f[2],f[3]),Z?(w(s,G,o,Z[0],Z[1],Z[3]),w(s,G,o,Z[1],Z[2],Z[3])):s.uv&&s.uv.length&&(w(s,G,o),w(s,G,o)),t&&(z(s,V,o,E[0],E[1],E[3]),z(s,V,o,E[1],E[2],E[3])))},R=function(I,k,c,D){var u,q,P,Z,e,K,F,R,p=g,A=g,J=g,$=-g,t=-g,C=-g;for(u in I)for(K=I[u].vs,R=K.length,q=0;R>q;q+=3)P=K[q+0],Z=K[q+1],e=K[q+2],p>P&&(p=P),A>Z&&(A=Z),J>e&&(J=e),P>$&&($=P),Z>t&&(t=Z),e>C&&(C=e);var v;if(c){var E=p+($-p)/2,d=A+(t-A)/2,s=J+(C-J)/2;for(u in I){for(K=I[u].vs,R=K.length,q=0;R>q;q+=3)K[q+0]-=E,K[q+1]-=d,K[q+2]-=s;if(F=I[u].lvs)for(R=F.length,q=0;R>q;q+=3)F[q+0]-=E,F[q+1]-=d,F[q+2]-=s}v=[E,d,s]}var y,G,B;c?(y=$-p,G=t-A,B=C-J):(y=2*U(N(p),N($)),G=2*U(N(A),N(t)),B=2*U(N(J),N(C))),0===y&&(y=Math.min(G,B)/1e3||.001),0===G&&(G=Math.min(y,B)/1e3||.001),0===B&&(B=Math.min(y,G)/1e3||.001),D.rawS3=[y,G,B];for(u in I){if(K=I[u].vs,F=I[u].lvs,k){for(R=K.length,q=0;R>q;q+=3)y&&(K[q+0]/=y),G&&(K[q+1]/=G),B&&(K[q+2]/=B);if(F)for(R=F.length,q=0;R>q;q+=3)y&&(F[q+0]/=y),G&&(F[q+1]/=G),B&&(F[q+2]/=B);var z=I[u].ns;if(z){R=z.length;var j=new x.Math.Vector3;for(q=0;R>q;q+=3)j.set(z[q+0]*y,z[q+1]*G,z[q+2]*B).normalize(),z[q+0]=j.x,z[q+1]=j.y,z[q+2]=j.z}}I[u].rawS3=D.rawS3,v&&(I[u].center=v)}};return function(P,J,e){if(!P)return c;(L.isString(J)||J instanceof ArrayBuffer)&&(J=T(J)),e||(e={}),e.flipY==c&&(e.flipY=!0),(e.s3||e.r3||e.t3||e.mat)&&(e.matrix=L.createWorldMatrix(e.mat,e.s3,e.r3,e.rotationMode,e.t3));var d,K,g,X,M=x.Style["wf.loadQuadWireframe"],_=[],o=[],k=e.ignoreNormal?c:[],I=e.reverseFlipMtls,E={vs:[],uv:[],ns:k?[]:c},V={htdefault:E},y=new C(P),p="",D="";for(k&&e.matrix&&(e.normalMatrix=L.createNormalMatrix(e.matrix));null!=(K=y.stepNext());)if(K=K.trim(),0!==K.length&&"#"!==K.charAt(0))if(K.indexOf("\\")!==K.length-1){if(p&&(K=p+K,p=""),K.indexOf("#QNAN0")>=0&&(K=K.replace(/#QNAN0/gi,"0")),g=l.exec(K))_.push([parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3])]);else if(g=t.exec(K))o.push([parseFloat(g[1]),parseFloat(g[2])]);else if(k&&(g=G.exec(K)))e.flipFace?k.push([parseFloat(-g[1]),parseFloat(-g[2]),parseFloat(-g[3])]):k.push([parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3])]);else if("f"===K[0]){var s=K.split(/\s+/);if(s.length<4)continue;var O,d,r,S=[],q=[],Z=[];for(d=1,r=s.length;r>d;d++)O=s[d].split("/"),S.push(parseInt(O[0],10)),O.length>1&&O[1].length>0&&Z.push(parseInt(O[1],10)),O.length>2&&O[2].length>0&&q.push(parseInt(O[2],10));for(d=0,r=S.length-2;r>d;d++)f(E,_,o,k,e,[S[0],S[d+1],S[d+2]],Z.length?[Z[0],Z[d+1],Z[d+2]]:c,q.length?[q[0],q[d+1],q[d+2]]:c);M&&B(E,_,e,S)}else if(e.part&&null!==(g=W.exec(K)))D=(" "+g[0].substr(1).trim()).substr(1);else if(/^usemtl /.test(K)){var $=K.substring(7).trim();$.split(" ").forEach(function(P){var y=e.part?D+"_"+P:P;(E=V[y])||(E=V[y]={name:y,vs:[],uv:[],ns:k?[]:c,lvs:M?[]:c},e.ignoreMtls&&e.ignoreMtls.indexOf(P)>=0&&delete E.vs,(e.reverseFlip||"*"===I||I&&I.indexOf(P)>=0)&&(E.reverseFlip=!0),j(J,E,e,P))})}}else p+=K.substring(0,K.length-1);var Q=[];for(var Y in V){var m=V[Y].vs;if(m&&0!==m.length){var h=V[Y].uv;if(h)for(var u=2*m.length/3-h.length;u-->0;)h.push(0)}else Q.push(Y)}Q.forEach(function(T){delete V[T]}),R(V,e.cube,e.center,e);var w=e.shape3d;if(w){var a=[];for(var X in V){var E=V[X];a.rawS3=E.rawS3,E.center&&(a.center=E.center),a.push(E)}v.setShape3dModel(w,a)}return V}}(),T=function(k){var s={};if(k)for(var x,h,l,R,H,_,F=new C(k),V=/\s+/;null!=(h=F.stepNext());)h=h.trim(),0!==h.length&&"#"!==h.charAt(0)&&(l=h.indexOf(" "),R=(l?h.substring(0,l):h).toLowerCase(),H=(l?h.substring(l+1):"").trim(),"newmtl"===R?s[H]=x={name:H}:x&&("ka"===R||"kd"===R||"ks"===R?(_=H.split(V,3),x[R]=[parseFloat(_[0]),parseFloat(_[1]),parseFloat(_[2]),1]):x[R]="ns"===R||"d"===R?parseFloat(H):H));return s},C=function(G){var Z=this;if(G instanceof ArrayBuffer){Z.isBuffer=!0;var L=0,S=new Uint8Array(G),N=S.length,h=S.length;Z.stepNext=function(){for(var K,Z,D=L;N>L;)if(K=S[L],Z=K>>4,12===Z||13==Z)L+=2;else if(14===Z)L+=3;else if(L++,10===K)return String.fromCharCode.apply(null,S.subarray(D,L));return L>D?String.fromCharCode.apply(null,S.subarray(D,L)):null}}else{Z.isBuffer=!1;var M=G.split("\n"),v=0,h=M.length;Z.stepNext=function(){return h>v?M[v++]:null}}};C.prototype={},C.prototype.constructor=C,L.addMethod(v,{loadObj:function(V,l,f){f=f||{};var h=!1;/(MSIE |Trident\/|Edge\/)/.test(E.navigator.userAgent)&&(h=!0);var I=function(q){var t,T=f.finishFunc,m=f.shape3d,k=q?j(q[0],q[1],f):null;if(k){if(m)t=v.getShape3dModel(m);else{t=[];for(var Y in k){var h=k[Y];t.rawS3=h.rawS3,t.push(h)}}T&&T(k,t,t.rawS3)}else T&&T(null)};if(h){f.responseType="arraybuffer";var W=function(z){v.xhrLoad(V,function(Q){I([Q,z])},f)};l?v.xhrLoad(l,function(r){W(r)},f):W()}else v.xhrLoad(l?[V,l]:[V],I,f)},parseObj:function(A,L,t){return j(A,L,t)}});var z=x.ByteBuffer=function(w,N,j){if("undefined"==typeof w&&(w=z.DEFAULT_CAPACITY),"undefined"==typeof N&&(N=z.DEFAULT_ENDIAN),"undefined"==typeof j&&(j=z.DEFAULT_NOASSERT),!j){if(w=0|w,0>w)throw RangeError("Illegal capacity");N=!!N,j=!!j}this.buffer=0===w?n:new ArrayBuffer(w),this.view=0===w?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=w,this.littleEndian=N,this.noAssert=j},n=new ArrayBuffer(0);z.LITTLE_ENDIAN=!0,z.BIG_ENDIAN=!1,z.DEFAULT_CAPACITY=16,z.DEFAULT_ENDIAN=z.BIG_ENDIAN,z.DEFAULT_NOASSERT=!1,z.METRICS_BYTES="b";var F=String.fromCharCode,$=z.prototype;$.readUint8=function(u){var _="undefined"==typeof u;if(_&&(u=this.offset),!this.noAssert){if("number"!=typeof u||0!==u%1)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+"+1+") <= "+this.buffer.byteLength)}var H=this.view[u];return _&&(this.offset+=1),H},$.readUint16=function($){var J="undefined"==typeof $;if(J&&($=this.offset),!this.noAssert){if("number"!=typeof $||0!==$%1)throw TypeError("Illegal offset: "+$+" (not an integer)");if($>>>=0,0>$||$+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+$+" (+"+2+") <= "+this.buffer.byteLength)}var o=0;return this.littleEndian?(o=this.view[$],o|=this.view[$+1]<<8):(o=this.view[$]<<8,o|=this.view[$+1]),J&&(this.offset+=2),o},$.readUint24=function(u){var z="undefined"==typeof u;if(z&&(u=this.offset),!this.noAssert){if("number"!=typeof u||0!==u%1)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+"+4+") <= "+this.buffer.byteLength)}var Q=0;return this.littleEndian?(Q=this.view[u+2]<<16,Q|=this.view[u+1]<<8,Q|=this.view[u]):(Q=this.view[u+1]<<8,Q|=this.view[u+2],Q+=this.view[u]<<16>>>0),Q|=0,z&&(this.offset+=3),Q},$.readUint32=function(h){var c="undefined"==typeof h;if(c&&(h=this.offset),!this.noAssert){if("number"!=typeof h||0!==h%1)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,0>h||h+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+"+4+") <= "+this.buffer.byteLength)}var z=0;return this.littleEndian?(z=this.view[h+2]<<16,z|=this.view[h+1]<<8,z|=this.view[h],z+=this.view[h+3]<<24>>>0):(z=this.view[h+1]<<16,z|=this.view[h+2]<<8,z|=this.view[h+3],z+=this.view[h]<<24>>>0),c&&(this.offset+=4),z},$.readFloat32=function(C){var H="undefined"==typeof C;if(H&&(C=this.offset),!this.noAssert){if("number"!=typeof C||0!==C%1)throw TypeError("Illegal offset: "+C+" (not an integer)");if(C>>>=0,0>C||C+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+C+" (+"+4+") <= "+this.buffer.byteLength)}var g=e(this.view,C,this.littleEndian,23,4);return H&&(this.offset+=4),g};var X=function(){var w={};return w.MAX_CODEPOINT=1114111,w.decodeUTF8=function(Z,U){for(var o,E,C,m,W=function(T){T=T.slice(0,T.indexOf(null));var n=Error(T.toString());throw n.name="TruncatedError",n.bytes=T,n};null!==(o=Z());)if(0===(128&o))U(o);else if(192===(224&o))null===(E=Z())&&W([o,E]),U((31&o)<<6|63&E);else if(224===(240&o))(null===(E=Z())||null===(C=Z()))&&W([o,E,C]),U((15&o)<<12|(63&E)<<6|63&C);else{if(240!==(248&o))throw RangeError("Illegal starting byte: "+o);(null===(E=Z())||null===(C=Z())||null===(m=Z()))&&W([o,E,C,m]),U((7&o)<<18|(63&E)<<12|(63&C)<<6|63&m)}},w.UTF16toUTF8=function(z,o){for(var j,Y=null;;){if(null===(j=null!==Y?Y:z()))break;j>=55296&&57343>=j&&null!==(Y=z())&&Y>=56320&&57343>=Y?(o(1024*(j-55296)+Y-56320+65536),Y=null):o(j)}null!==Y&&o(Y)},w.UTF8toUTF16=function(T,j){var g=null;for("number"==typeof T&&(g=T,T=function(){return null});null!==g||null!==(g=T());)65535>=g?j(g):(g-=65536,j((g>>10)+55296),j(g%1024+56320)),g=null},w.decodeUTF8toUTF16=function(l,c){w.decodeUTF8(l,function(_){w.UTF8toUTF16(_,c)})},w.calculateCodePoint=function(p){return 128>p?1:2048>p?2:65536>p?3:4},w.calculateUTF8=function(G){for(var V,P=0;null!==(V=G());)P+=128>V?1:2048>V?2:65536>V?3:4;return P},w.calculateUTF16asUTF8=function(f){var c=0,P=0;return w.UTF16toUTF8(f,function(m){++c,P+=128>m?1:2048>m?2:65536>m?3:4}),[c,P]},w}();$.readString=function(o,F,D){"number"==typeof F&&(D=F,F=d);var v="undefined"==typeof D;if(v&&(D=this.offset),"undefined"==typeof F&&(F=z.METRICS_CHARS),!this.noAssert){if("number"!=typeof o||0!==o%1)throw TypeError("Illegal length: "+o+" (not an integer)");if(o|=0,"number"!=typeof D||0!==D%1)throw TypeError("Illegal offset: "+D+" (not an integer)");if(D>>>=0,0>D||D+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+D+" (+"+0+") <= "+this.buffer.byteLength)}var n,u=0,e=D;if(F===z.METRICS_CHARS){if(n=V(),X.decodeUTF8(function(){return o>u&&D<this.limit?this.view[D++]:null}.bind(this),function(B){++u,X.UTF8toUTF16(B,n)}),u!==o)throw RangeError("Illegal range: Truncated data, "+u+" == "+o);return v?(this.offset=D,n()):{string:n(),length:D-e}}if(F===z.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof D||0!==D%1)throw TypeError("Illegal offset: "+D+" (not an integer)");if(D>>>=0,0>D||D+o>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+D+" (+"+o+") <= "+this.buffer.byteLength)}var x=D+o;if(X.decodeUTF8toUTF16(function(){return x>D?this.view[D++]:null}.bind(this),n=V(),this.noAssert),D!==x)throw RangeError("Illegal range: Truncated data, "+D+" == "+x);return v?(this.offset=D,n()):{string:n(),length:D-e}}throw TypeError("Unsupported metrics: "+F)};var H=function(B){if(B){var u=new z(0);u.buffer=B,u.limit=B.byteLength,u.view=B.byteLength>0?new Uint8Array(B):null;var q=[];return p(q,u),A(q,u),P(q,u),q}},p=function(w,H){H.offset+=19},A=function(t,p){var b=p.readUint8();1&b&&(t.center=k(p)),2&b&&(t.rawS3=k(p))},D=function(P){return[P.readFloat32(),P.readFloat32()]},k=function(k){return[k.readFloat32(),k.readFloat32(),k.readFloat32()]},b=function(w){var e=w.readUint32();return w.readString(e,z.METRICS_BYTES)},P=function(I,n){for(var S=n.readUint8(),R=0;S>R;R++)I.push(G(n))},G=function(f){var M={},A=f.readUint32(),t=0,H=A&1<<t++,Y=A&1<<t++,V=A&1<<t++,m=A&1<<t++,X=A&1<<t++,I=A&1<<t++,v=A&1<<t++,c=A&1<<t++,N=A&1<<t++,S=A&1<<t++,Q=A&1<<t++,n=A&1<<t++;return(H||Y)&&W(M,f,3,"vs","lvs"),V&&W(M,f,2,"uv"),m&&W(M,f,3,"ns"),X&&(M.name=b(f)),I&&(M.color=k(f)),v&&(M.transparent=!!f.readUint8()),c&&(M.opacity=f.readFloat32()),N&&(M.uvoffset=D(f)),S&&(M.uvScale=k(f)),Q&&(M.image=b(f)),n&&(M.reverseFlip=!!f.readUint8()),M},q=16383,o=function(_){var h=_.readUint16(),T=16384&h,y=32768&h,Z=(h&q)/q,E=0;return y&&(E=_.readUint16()),(T?1:-1)*(E+Z)},y=function(H){var x=H.readUint32(),l=x&1<<30,X=x&1<<29,I=x&1<<28,P=16383,Z=(16383&x>>14)/P,_=(16383&x)/P,J=Math.sqrt(1-Z*Z-_*_)||0;return[Z*(l?1:-1),_*(X?1:-1),J*(I?1:-1)]},W=function(v,b,l,V,F){var t=b.readUint32();b.readUint8();var J,z,W,O=b.readUint32(),X=b.readUint32(),m=[];if("uv"===V)for(J=0;t>J;J++)z=o(b),W=o(b),m.push([z,W]);else if("ns"===V)for(J=0;t>J;J++)m.push(y(b));else for(var J=0;t>J;J++)m.push(k(b));var r;r=256>t?"readUint8":65536>t?"readUint16":16777216>t?"readUint24":"readUint32";var I,P,A;if(O)for(I=v[V]=[],J=0;O>J;J++)P=b[r](),A=m[P],"uv"===V?I.push(A[0],A[1]):I.push(A[0],A[1],A[2]);if(X)for(I=v[F]=[],J=0;X>J;J++)P=b[r](),A=m[P],I.push(A[0],A[1],A[2])};v.getInternal().addMethod(v,{loadBin:function(R,f){f=f||{};var r=function(u){var l,S=f.finishFunc,a=f.shape3d,p=u?H(u):null;if(p){if(a)l=v.getShape3dModel(a);else{l=[];for(var i in p){var e=p[i];l.rawS3=e.rawS3,l.push(e)}}S&&S(p,l,l.rawS3)}else S&&S(null)};f.responseType="arraybuffer",v.xhrLoad(R,function(A){r(A)},f)},parseBin:function(L){return H(L)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);