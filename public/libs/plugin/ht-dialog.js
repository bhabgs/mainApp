!function(j,L){"use strict";var y="ht",H=j[y],f="px",B="left",E="top",z="bottom",P="right",U="innerHTML",_="className",q="",k="width",g="height",e="string",V="position",d="absolute",W="0",b="opacity",t="background",i=H.Default,s=i.getInternal(),N=H.Color,Y=i.animate,r=i.isTouchable,F=i.isTouchEvent,u=null,o=(Math.sqrt,j.parseInt),n=j.setTimeout,X=(Math.round,N.titleIconBackground),w=function(u){return typeof u===e||u instanceof String},c=function(){return document},G=function(m){return c().createElement(m)},Q=function(){var F=G("div");return F.tabIndex=-1,F.style.outline="none",F},K=function(){return G("canvas")},M=function(z,j){x(z,"-webkit-transform",j),x(z,"-ms-transform",j),x(z,"transform",j)},x=function(f,E,M){f.style.setProperty(E,M,u)},p=function(_,O,U){i.def(H.widget[_],O,U)},I=function(z,D){z.appendChild(D)},A=function(){return c().documentElement},T=function(){return A().clientWidth},O=function(){return A().clientHeight},R=s.addEventListener,h=s.removeEventListener,C=function(u){var o=u.touches[0];return o?o:u.changedTouches[0]};s.addMethod(i,{dialogCloseIcon:{width:100,height:100,comps:[{type:"shape",points:[10,10,90,90],segments:[1,2],borderWidth:8,borderColor:X},{type:"shape",points:[90,10,10,90],segments:[1,2],borderWidth:8,borderColor:X}]},dialogMaximizeIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,15,80,75],borderWidth:6,borderColor:X},{type:"rect",rect:[10,10,80,20],background:X}]},dialogRestoreIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,34,56,56],borderWidth:8,borderColor:X},{type:"rect",rect:[10,34,56,14],background:X},{type:"rect",rect:[34,10,56,14],background:X},{type:"rect",rect:[82,10,8,56],background:X},{type:"rect",rect:[66,62,24,8],background:X}]},dialogTitleLabelColor:i.labelSelectColor,dialogTitleLabelFont:(r?"18":"14")+"px arial, sans-serif",dialogContentLabelFont:i.labelFont,dialogTitleBackground:N.titleBackground,dialogHeaderBackground:N.headerBackground,dialogButtonBackground:"#1ABC9C",dialogButtonSelectBackground:"#16A085",dialogButtonLabelColor:"#fff"},!0);var J=function(w){var S=this;S.$1d=w,S.addListeners()};i.def(J,L,{ms_listener:1,getView:function(){return this.$1d.getView()},clear:function(){delete this.$2d,delete this.$3d,delete this.$4d,delete this.$5d},handle_touchstart:function(y){var K=this,M=K.$1d,E=M.$6d,U=M._config,c=M.$7d,d=y,P=y.target;if(c.contains(P)||i.preventDefault(y),i.isLeftButton(y)){F(y)&&(d=C(y));var O=K.$8d={x:d.pageX,y:d.pageY};K.$9d={x:O.x,y:O.y},!U.maximized&&U.draggable&&E.contains(P)&&(K.$4d=!0,i.startDragging(K,y)),K.handle_mousemove(y)&&(K.$2d=!0,i.startDragging(K,y)),c.contains(y.target)||M.$41d.focus()}},handle_mousedown:function($){this.handle_touchstart($)},handle_touchend:function(w){if(i.isLeftButton(w)&&!this.$5d&&!this.$3d){var n=this,R=n.$1d,Q=w.target,k=R._config,y=R.$18d,F=R.$16d;for(k.closable&&y.contains(Q)&&R.hide(),k.maximizable&&F.contains(Q)&&(k.maximized?R.restore():R.maximize());Q&&(Q.className||"").indexOf("dialog-button")<0;)Q=Q.parentNode;Q&&Q.buttonItem&&R.action&&R.action(Q.buttonItem,w),delete n.$8d,delete n.$9d}},handle_mouseup:function(K){this.handle_touchend(K)},handleWindowTouchEnd:function(w){var Q=this,c=Q.$1d,d=c.$10d;Q.$2d&&Q.$3d?d.fire({kind:"endResize",target:c,originEvent:w}):Q.$4d&&Q.$5d&&d.fire({kind:"endMove",target:c,originEvent:w}),this.clear()},handleWindowMouseUp:function(h){this.handleWindowTouchEnd(h)},handle_mousemove:function(m){var r=this.$1d._config;if(r.maximized)return!1;if("w"!==r.resizeMode&&"h"!==r.resizeMode&&"wh"!==r.resizeMode)return!1;var S=this,I=S.getView(),Q=I.querySelector(".resize-area"),d=Q.getBoundingClientRect(),b={x:d.left,y:d.top,width:d.width,height:d.height};m=F(m)?C(m):m;var v=m.clientX,p=m.clientY,s={x:v,y:p};return i.containsPoint(b,s)?(x(I,"cursor","nwse-resize"),!0):(x(I,"cursor",q),void 0)},handleWindowTouchMove:function(v){v.preventDefault();var k=v;F(v)&&(k=C(v));var t=this,G=t.$8d,W=t.$9d;if(!(W.x==G.x&&W.y==G.y&&i.getDistance(W,{x:k.pageX,y:k.pageY})<=1)){var h=t.$1d,I=h._config,X=h.$21d,r=I.resizeMode||"wh",N=k.pageX-G.x,z=k.pageY-G.y;if(t.$2d){var _=X.offsetWidth,d=X.offsetHeight,J=_+N,c=d+z;if(J=Math.max(J,50),c=Math.max(c,50),"center"===I.position||I.position==u){var g={},S=X.getBoundingClientRect();g.x=S.left,g.y=S.top,I.position=g}"w"===r?(h.setSize(J,d),G.x+=J-_):"h"===r?(h.setSize(_,c),G.y+=c-d):"wh"===r&&(h.setSize(J,c),G.x+=J-_,G.y+=c-d),t.$3d?h.$10d.fire({kind:"betweenResize",target:h,originEvent:v}):(t.$3d=!0,h.$10d.fire({kind:"beginResize",target:h,originEvent:v}))}else if(t.$4d){var H=X.getBoundingClientRect(),U=H.width,V=H.height,b=T(),A=O(),R=o(X.style.left)||0,l=o(X.style.top)||0,D=R+N,K=l+z,p=h.adjustPosition({x:D,y:K},{width:U,height:V},{width:b,height:A});p&&(D=p.x,K=p.y);var w=D-R,P=K-l;x(X,B,D+f),x(X,E,K+f),G.x+=w,G.y+=P,I.position={x:D,y:K},t.$5d?h.$10d.fire({kind:"betweenMove",target:h,originEvent:v}):(t.$5d=!0,h.$10d.fire({kind:"beginMove",target:h,originEvent:v}))}}},handleWindowMouseMove:function(S){this.handleWindowTouchMove(S)},handleWindowResize:function(){var D=this,N=D,d=N._config,o=N.$21d,P=T(),I=O(),A=d.width,b=d.height,q=d.position||"center";d.maximized?(x(o,k,P+f),x(o,g,I+f),x(o,E,W),x(o,B,W)):(x(o,k,A+f),x(o,g,b+f),"center"===q?(x(o,B,(P-A)/2+f),x(o,E,(I-b)/2+f)):(x(o,B,q.x+f),x(o,E,q.y+f))),N.iv()},handle_mousewheel:function(v){v.stopPropagation()},handle_DOMMouseScroll:function(D){D.stopPropagation()}}),H.widget.Dialog=function(S){var m=this,w=m._view=s.createView(null,m);w[_]="ht-widget-dialog",x(w,V,d),x(w,E,W),x(w,z,W),x(w,B,W),x(w,P,W),x(w,k,"auto"),x(w,g,"auto"),i.baseZIndex!=u&&x(w,"z-index",i.baseZIndex+"");var v=m.$11d=new J(m);m.bindingHandleWindowResize=v.handleWindowResize.bind(m),m.$10d=new H.Notifier,S&&m.setConfig(S)},p("Dialog",L,{ms_v:1,ms_fire:1,_modal:!0,setTitle:function(m){this._config.title=m,this.getView().querySelector(".dialog-container-title span").innerHTML=m},clearNodes:function(L){if(L)for(;L.firstChild;)L.removeChild(L.firstChild)},$31d:function(){var c=this,q=c.$6d=Q(),z=c._config,l=c.$12d=c.$13d();q[_]="dialog-container-title",x(q,"cursor","default"),x(q,"white-space","nowrap"),x(q,"overflow","hidden"),x(q,"font",i.dialogTitleLabelFont),x(q,t,z.titleBackground||i.dialogTitleBackground),x(q,"color",z.titleColor||i.dialogTitleLabelColor);var $=G("span"),Y=c.$25d();if(z.titleAlign&&x(q,"text-align",z.titleAlign),z.titleIcon){var L=c.$14d=c.$15d();I(q,L)}if(z.title&&z.title.trim&&(z.title=z.title.trim()),$[U]=z.title||"&nbsp;",I(q,$),z.maximizable){var H=c.$16d=c.$17d();I(l,H)}if(z.closable){var b=c.$18d=c.$19d();I(l,b)}return I(q,l),x(q,"display","block"),x(q,"line-height",Y+f),q},$13d:function(){var o=Q();return x(o,V,d),x(o,B,W),x(o,P,5+f),x(o,E,W),x(o,z,W),x(o,"text-align",P),x(o,"white-space","nowrap"),o[_]="dialog-title-controls",o},$20d:function(){var Z=this.$21d=Q(),e=this._config,j=e.borderWidth;return x(Z,V,"fixed"),x(Z,"box-shadow","rgba(0, 0, 0, 0.2) 0px 5px 10px 0px"),x(Z,"padding",W+" "+j+f+" "+j+f+" "+j+f),x(Z,"box-sizing","border-box"),x(Z,"-moz-box-sizing","border-box"),Z[_]="dialog-container",x(Z,t,e.titleBackground||i.dialogTitleBackground),Z},$22d:function(){var b,G=this,j=G._config,c=G.$7d=Q(),L=j.content,J=0,s=j.contentPadding||0;j.buttons!=u&&j.buttons.length>0&&(J=32),w(L)?c[U]=L:L.getView?(b=L.getView(),I(c,b)):(b=L,I(c,b)),x(c,V,d),x(c,"font",i.dialogContentLabelFont),H.Default.appendToScreen(c);var a=c.offsetWidth+1,F=c.offsetHeight,O=G.$25d();return j.width==u&&(j.width=a+10+2*s),j.height==u&&(j.height=F+O+J+5+2*s),H.Default.removeHTML(c),b&&(x(b,"box-sizing","border-box"),x(b,"-moz-box-sizing","border-box"),x(b,k,"100%"),x(b,g,"100%")),c[_]="dialog-content",x(c,E,O+s+f),x(c,z,J+s+f),x(c,B,s+f),x(c,P,s+f),x(c,"overflow","hidden"),c},getOverlayDiv:function(){return this.$41d},$23d:function(){if(this.$41d)return this.$41d;var v=this.$41d=Q();return v[_]="dialog-overlay",x(v,V,d),x(v,E,W),x(v,z,W),x(v,B,W),x(v,P,W),x(v,t,"rgba(235, 235, 235, 0.7)"),v},_config:u,setSize:function(C,b){var _=this,v=_._config;v&&(v.width=C,v.height=b,_.isShowing()&&(_.bindingHandleWindowResize(),_.iv()))},getConfig:function(){return this._config},$24d:function(){var w=this._config,Y=w.titleIconSize||16;return r&&(Y*=1.2),Y},$25d:function(){var N=this._config,P=N.titleHeight||i.widgetTitleHeight;return P},$26d:function(X){x(X,"cursor","pointer"),x(X,"display","inline-block"),x(X,"margin-right",(r?8:4)+f),x(X,"vertical-align",E)},$27d:function(){var y=this.$30d=Q(),S=10;return r&&(S=20),x(y,k,S+f),x(y,g,S+f),x(y,V,d),x(y,z,W),x(y,P,W),y[_]="resize-area",y},$15d:function(){var M=this,Y=K();Y[_]="dialog-title-control dialog-title-control-icon";var N=M.$25d(),T=M.$24d();return M.$26d(Y),s.setCanvas(Y,T,N),Y},$17d:function(){var v=K();v[_]="dialog-title-control dialog-title-control-maximize";var e=this.$25d(),G=this.$24d();return this.$26d(v),s.setCanvas(v,G,e),v},$19d:function(){var L=K();L[_]="dialog-title-control dialog-title-control-close";var G=this.$25d(),m=this.$24d();return this.$26d(L),s.setCanvas(L,m,G),L},$28d:function(){var l=Q();return x(l,t,i.dialogContentBackground||"white"),x(l,k,"100%"),x(l,g,"100%"),x(l,V,"relative"),l},$29d:function(){var c=this,M=Q();x(M,"line-height",32+f),x(M,V,d),x(M,z,W),x(M,B,W),x(M,"white-space","nowrap"),x(M,"overflow","hidden"),x(M,P,W),x(M,t,i.dialogHeaderBackground),M[_]="dialog-container-buttons";var q=this._config,Y=q.buttonsAlign||P,N=0;return x(M,"text-align",Y),c.$42d=[],q.buttons.forEach(function(w){var R={};for(var X in w)R[X]=w[X];w.background||(R.background=i.dialogButtonBackground),w.selectBackground||(R.selectBackground=i.dialogButtonSelectBackground),w.labelColor||(R.labelColor=i.dialogButtonLabelColor);var j=i.createObject(H.widget.Button,R),u=j.getView();u[_]="dialog-button "+w.className,u.buttonItem=w,c.$42d.push(j),x(u,V,"relative"),x(u,"display","inline-block"),x(u,"text-align",B),x(u,"height",24+f);var J=r?10:5;Y===B||Y===P?x(u,"margin-"+Y,J+f):0===N||x(u,"margin-"+B,J+f),x(u,"vertical-align","middle");var m=i.getTextSize(j.getLabelFont(),w.label).width+10;j.onClicked=function(Z){w.action&&w.action.call(c,w,Z)},x(u,k,m+f),I(M,j.getView()),N++}),M},setConfig:function(j){if(j){var g=this,P=g._view;g._config=j,g.action=j.action,g.clearNodes(P),j.borderWidth==u&&(j.borderWidth=5);var r=g.$23d(),i=g.$28d(),L=g.$31d(),H=g.$22d(),S=g.$20d(),Y=g.$30d=g.$27d();if(I(P,r),I(P,S),I(S,i),I(i,L),I(i,H),j.buttons!=u&&j.buttons.length>0){var y=g.$29d();I(i,y)}I(S,Y),j.maximized?(j.maximized=!1,g.bindingHandleWindowResize(),g.maximize(!0)):g.bindingHandleWindowResize(),g.isShowing()&&g.iv()}},hide:function(){var i=this,p=i.$21d,k=i.$41d,r=i._view;r[_]="ht-widget-dialog",Y(p).duration(200).scale(.7).set(b,W).end(function(){i.onHidden&&i.onHidden(),H.Default.removeHTML(r),i.$10d.fire({kind:"hide",target:i})}),Y(k).duration(200).set(b,W).end(),h(j,"resize",i.bindingHandleWindowResize)},isShowing:function(){return!!this._view.parentNode},setModal:function(N){this._modal=N;var S=this.$23d();S.style.display=N?"block":"none";var t=this._view;x(t,k,N?"auto":W),x(t,g,N?"auto":W)},isModal:function(){return this._modal},$32d:function(){var U=this,P=U._config,d=U.$21d;M(d,q),U.iv(),P.maximized?U.$10d.fire({kind:"maximize",target:U}):U.$10d.fire({kind:"restore",target:U})},maximize:function(D){var I=this,w=I.$21d,T=I._config;if(!T.maximized){T.maximized=!0,I.$33d(),I.$16d[_]="dialog-title-control dialog-title-control-minimize";var b=T.width,J=T.height,$=o(w.style.left)||0,Z=o(w.style.top)||0;I.$36d=b,I.$37d=J,I.$34d=$,I.$35d=Z;var a,p=D?0:200,A=this._view.parentNode;a=A&&A!==document.body?this._view.parentNode.getBoundingClientRect():i.getWindowInfo(),Y(w).duration(p).set(B,a.left+f).set(E,a.top+f).set(k,a.width+f).set(g,a.height+f).end(function(){I.$32d()})}},restore:function(){var q=this,n=q.$34d,U=q.$35d,R=q.$36d,y=q.$37d,b=q._config;if(b.maximized&&(b.maximized=!1,q.$33d(),q.$16d[_]="dialog-title-control dialog-title-control-maximize",q.isShowing()&&n!=u&&U!=u&&R!=u&&y!=u)){var K=q.$21d;Y(K).duration(200).set(B,n+f).set(E,U+f).set(k,R+f).set(g,y+f).end(function(){q.$32d()})}delete q.$34d,delete q.$35d,delete q.$36d,delete q.$37d},show:function(I){var t=this,G=t._view,s=t._config,V=t.$21d,Z=t.$41d;I=I||s.parentDOM,s&&s.zIndex!=u&&x(G,"z-index",s.zIndex+q),I?H.Default.appendChild(I,G):H.Default.appendToScreen(G),M(V,"scale(0.7)"),x(V,b,W),t.iv(),t.validate(),t._view[_]+=" dialog-show",n(function(){Y(V).duration(200).scale(1).set(b,"1").end(function(){x(V,k,V.clientWidth+f),x(V,g,V.clientHeight+f),t.onShown&&t.onShown(),t.$10d.fire({kind:"show",target:t});var W=s&&s.content;W&&W.iv&&W.iv()}),Y(Z).duration(200).set(b,"1").end(),R(j,"resize",t.bindingHandleWindowResize)},30)},setPosition:function(K){var y=this.$21d;y.style.left=K.x+"px",y.style.top=K.y+"px"},addEventListener:function(S,t,L){this.$10d.add(S,t,L)},removeEventListener:function(V,R){this.$10d.remove(V,R)},$38d:function(N,Y,W,t){var P=s.initContext(N);s.translateAndScale(P,0,0,1),P.clearRect(0,0,W,W);var A=(W-t)/2;i.drawStretchImage(P,i.getImage(Y),"fill",0,A,t,t),P.restore()},$33d:function(){var $=this,A=$._config,y=$.$16d,V=A.maximized?i.dialogRestoreIcon:i.dialogMaximizeIcon;if(y&&V){var l=$.$25d(),s=$.$24d();$.$38d(y,i.getImage(V),l,s)}},$39d:function(){var H=this,K=H._config,$=H.$14d,B=K.titleIcon;if($&&B){var k=H.$25d(),E=H.$24d();H.$38d($,i.getImage(B),k,E)}},$40d:function(){var b=this,f=b.$18d,d=i.dialogCloseIcon;if(f&&d){var H=b.$25d(),U=b.$24d();b.$38d(f,i.getImage(d),H,U)}},invalidate:function(L){var B=this,E=B.$42d;B._68I||(B._68I=1,i.callLater(B.validate,B,u,L),B.onInvalidated&&B.onInvalidated(),B.fireViewEvent("invalidate"));var O=B._config.content;O.invalidate&&O.invalidate(),E&&E.forEach(function(v){v.iv()})},validateImpl:function(){var G=this;G.$40d(),G.$33d(),G.$39d();var l=G._config.content;l.initView&&(l.setX(0),l.setY(0),l.setWidth(G.$7d.clientWidth),l.setHeight(G.$7d.clientHeight))},adjustPosition:function(E,t,P){var W=t.width,F=t.height,I=P.width,V=P.height,X=E.x,u=E.y,H=this._config,Y=H.minDragSize||20;return"inside"===H.dragMode?(X+W>I&&(X=I-W),u+F>V&&(u=V-F),0>X&&(X=0),0>u&&(u=0)):(null==H.dragMode||"none"===H.dragMode)&&(-W+Y>X&&(X=-W+Y),X>I-Y&&(X=I-Y),u>V-Y&&(u=V-Y),0>u&&(u=0)),{x:X,y:u}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);