!function(S,B){"use strict";var Z="ht",g=S[Z],C="position",q="absolute",w="px",o="left",p="top",f="innerHTML",U="className",t="width",x="height",K="0",c="display",k="none",$="visibility",P="user-select",H="margin",T="padding",y=null,W=g.Color,A=g.Default,z=A.getInternal(),l=S.setTimeout,O=S.setInterval,h=S.clearTimeout,r=S.clearInterval,b=S.parseInt,d=A.isLeftButton,u=A.isDragging,N=A.startDragging,I=A.getDistance,F=A.isTouchable,E=A.isTouchEvent,D=A.getPagePoint,V=A.isRightButton,j=W.widgetIconHighlight,_=W.widgetIconBorder,n=W.widgetIconGradient,e=function(){return document},s=function(m,F){return m.querySelectorAll(F)},v=function(h){var v=e().createElement(h);return"ul"===h&&(i(v,C,"relative"),i(v,H,K),i(v,T,K),i(v,"list-style",k),i(v,"box-sizing","border-box"),i(v,"-moz-box-sizing","border-box"),i(v,c,"inline-block"),i(v,"vertical-align","text-bottom"),i(v,"border","1px solid "+A.contextMenuBorderColor),i(v,"box-shadow","0 0 16px 1px "+A.contextMenuShadowColor),i(v,"overflow","hidden"),A.contextMenuBorderRadius&&i(v,"border-radius",A.contextMenuBorderRadius+w)),v},J=function(W){var X=W.touches[0];return X?X:W.changedTouches[0]},R=function(){return v("div")},Q=function(){return v("canvas")},i=function(F,Z,W){F.style.setProperty(Z,W,y)},M=function(p,Y,$){A.def(g.widget[p],Y,$)},m=function(w,g){w.appendChild(g)},L=function(o,F){o.removeChild(F)},G=z.addEventListener,X=z.removeEventListener;z.addMethod(A,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:_},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:j}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:_},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:j,gradient:A.imageGradient,gradientColor:n,background:j}]},contextMenuLabelFont:(F?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var Y=function(f){var D=this,d=f._view;D.$11b=f,D.addListeners(),G(d,"contextmenu",function(B){B.preventDefault()});var s=D.$37b=D.$36b.bind(D);G(d,"mouseover",s),G(d,"mouseout",s)};A.def(Y,B,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function($){if(A.preventDefault($),d($)){for(var v=this,g=v.$11b,f=v.getView(),S=f.children,H=0;H<S.length;H++){var M=S[H],r=M.$24b,t=M.$25b;if(r&&r.contains($.target))return g.scrollUp(M),v.$28b=l(function(){v.$29b=O(function(){g.scrollUp(M)},100)},500),N(v,$),void 0;if(t&&t.contains($.target))return g.scrollDown(M),v.$28b=l(function(){v.$29b=O(function(){g.scrollDown(M)},100)},500),N(v,$),void 0}v.$30b=D($)}},handle_mousedown:function(u){this.handle_touchstart(u)},handle_touchend:function(g){if(d(g)){var Z=this,n=Z.$30b,p=E(g)?{x:J(g).pageX,y:J(g).pageY}:{x:g.pageX,y:g.pageY};if(!n||I(n,p)>1)return delete Z.$30b,void 0;for(var e=Z.getView(),_=Z.$11b,b=g.target,A=y,x=y,r=_._items,s=e.$26b,h=0;h<s.length;h++)if(x=s[h],x.contains(b)){A=x.getAttribute("data-id");break}if(A&&r){var f=_.$17b(r,function(_){return _._id===A});if(f){var z=!1;f.disabled instanceof Function?z=f.disabled.call(_,f):f.disabled===!0&&(z=!0),z||(f.items?E(g)&&Z.$36b(x,!0):_.$1b(f,g))}}delete Z.$30b}},$36b:function(f,m){if(!u()){var _,Q=this,R=Q.$11b,K=Q.getView(),B=R.$20b||K.children[0],s=R.$19b,x=K.$26b,l=K.children,t=f.target,q=K.getBoundingClientRect(),c=A.getWindowInfo(),j=c.width,O=c.height,v=function(S){for(var Z=0;Z<l.length;Z++){var _=l[Z],s=new RegExp(S+"$"),J=_[U];if(J&&(s.test(J)||J.indexOf(S+" ")>=0))return _}},W=function(o){for(var R=0;R<x.length;R++){var k=x[R],L=new RegExp(o+"$"),i=k[U];if(i&&(L.test(i)||i.indexOf(o+" ")>=0))return k}},S=function(Q){var t=W("menu-item"+Q.$45b),U=t.getBoundingClientRect(),S=U.top-q.top,h=U.left-q.left;i(Q,p,S+w),i(Q,o,h+U.width+w);var N=Q.getBoundingClientRect(),A=N.top,k=N.left,C=N.height,s=N.width,d=A+C+2,z=k+s+2;d>O&&i(Q,p,S+O-d+w),z>j&&i(Q,o,h-s+w)};if(m)_=f;else{if("mouseover"===f.type){for(var V=0;V<x.length;V++){var n=x[V];if(n.contains(t)){_=n;break}}if(!_&&s){var L=s.parentNode,b=v("submenu"+s.getAttribute("data-id"));(b&&b.contains(t)||L&&L.contains(t))&&(_=s)}}else if("mouseout"===f.type){for(var G=!1,X=f.relatedTarget,V=0;V<l.length;V++){var D=l[V];if("hidden"!==D.style.visibility&&D.contains(X)){G=!0;break}}if(G)return}!_&&B&&(_=W("menu-item"+(B.$45b||"NaN")))}if(_!=s){if(s)for(var P=s;P;){if(P[U]=P[U].replace(" menu-item-hover",""),P[U].indexOf("disabled")<0){var H=R.getItemByProperty("_id",P.getAttribute("data-id"));null!=H.background?H.background instanceof Function?i(P,"background-color",H.background.call(R,H)):i(P,"background-color",H.background):i(P,"background-color",A.contextMenuBackground),i(P,"color",A.contextMenuLabelColor)}var F=v("submenu"+P.getAttribute("data-id"));F&&i(F,$,"hidden");var d=P.parentNode;P=W("menu-item"+(d.$45b||"NaN"))}if(_){for(var r=_,N=[];r;){r[U]+=" menu-item-hover",r[U].indexOf("disabled")<0&&(i(r,"background-color",A.contextMenuHoverBackground),i(r,"color",A.contextMenuHoverLabelColor));var z=v("submenu"+r.getAttribute("data-id"));z&&(i(z,$,"visible"),N.push(z));var d=r.parentNode;r=W("menu-item"+(d.$45b||"NaN"))}N.reverse(),N.forEach(function(R){S(R)})}}R.$19b=_,R.$20b=_?_.parentNode:K.children[0]}},handle_mouseup:function(c){this.handle_touchend(c)},handleWindowTouchEnd:function(){var H=this;H.$28b!=y&&(h(H.$28b),delete H.$28b),H.$29b!=y&&(r(H.$29b),delete H.$29b),delete H.$34b,delete H.$30b,delete H.$35b},handleWindowMouseUp:function(V){this.handleWindowTouchEnd(V)},handle_mousemove:function(w){this.handle_touchmove(w)},handle_touchmove:function(s){if(!u()&&d(s)){for(var A=this,_=A.getView().children,c=y,l=0;l<_.length;l++){var o=_[l];if(o.contains(s.target)){c=o;break}}var h=A.$30b,m=E(s)?{x:J(s).pageX,y:J(s).pageY}:{x:s.pageX,y:s.pageY};c&&h&&I(h,m)>2&&(N(A,s),A.$34b=c,A.$35b=c.$18b)}},handleWindowTouchMove:function(Z){Z.preventDefault();var K=this,s=K.$11b,j=K.$34b,c=K.$35b,U=K.$30b;if(U&&j){var p=E(Z)?{x:J(Z).pageX,y:J(Z).pageY}:{x:Z.pageX,y:Z.pageY},e=p.y-U.y;e>0?s.scrollUp(j,j.$18b-(c-e)):s.scrollDown(j,c-e-j.$18b)}},handleWindowMouseMove:function(Z){this.handleWindowTouchMove(Z)},$10b:function(l,V){l.preventDefault();for(var A=this,q=A.getView().children,z=y,Z=0;Z<q.length;Z++){var h=q[Z];if(h.contains(l.target)){z=h;break}}if(z){var K=this.$11b,m=K.getRowHeight();Math.abs(V)>.05&&(V>0?K.scrollUp(z,V*m):0>V&&K.scrollDown(z,-V*m))}},handle_mousewheel:function(r){this.$10b(r,r.wheelDelta/40)},handle_DOMMouseScroll:function(D){this.$10b(D,-D.detail)},$44b:function(Z){this.getView().contains(Z.target)||this.$11b.hide()},$41b:function(t){A.preventDefault(t)},$4b:function(l,d){var m=this.$11b;if(d=d||m._items,d&&d.length&&l.keyCode){var e=[l.keyCode];l.shiftKey&&e.push(16),l.ctrlKey&&e.push(17),l.altKey&&e.push(18),/mac/.test(S.navigator?S.navigator.userAgent.toLowerCase():"")?l.metaKey&&e.push(17):l.metaKey&&e.push(91),e.sort();var b=e.join(),_=m.$17b(d,function($){if($.key){var c=$.key.slice(0);return c.sort(),b===c.join()}});if(_){_.preventDefault!==!1&&l.preventDefault();var o=!1;_.disabled instanceof Function?o=_.disabled.call(m,_):_.disabled===!0&&(o=!0),o||m.$1b(_,l)}}},$39b:function(J){this.$32b=D(J)},$38b:function(u){if(A.preventDefault(u),!d(u)){var O=this;O._showContextMenu=V(u),O._showContextMenu||(O.$31b=D(u),O.$33b=l(function(){O._showContextMenu=!0,delete O.$33b},600))}},$40b:function(C){var A=this;A._showContextMenu&&(V(C)?A.$11b.show(C):A.$31b&&(A.$32b?I(A.$31b,A.$32b)<10&&A.$11b.show(C):A.$11b.show(C))),A.$33b!=y&&(h(A.$33b),delete A.$33b),delete A.$31b,delete A.$32b}}),g.widget.ContextMenu=function(E){var w=this,o=w._view=z.createView(null,w);o[U]="ht-widget-contextmenu",w.setItems(E),w.$13b=new Y(w),i(o,"font",A.contextMenuLabelFont),i(o,C,q),i(o,"cursor","default"),i(o,"-webkit-"+P,k),i(o,"-moz-"+P,k),i(o,"-ms-"+P,k),i(o,P,k),i(o,"box-sizing","border-box"),i(o,"-moz-box-sizing","border-box"),A.baseZIndex!=y&&i(o,"z-index",b(A.baseZIndex)+2+""),w.$3b=function(f){w.$13b.$4b(f)}},M("ContextMenu",B,{$16b:y,$5b:0,_items:y,$21b:y,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var T=this,B=T._enableGlobalKey;B===!1&&(G(e(),"keydown",T.$3b),T._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,X(e(),"keydown",this.$3b)},setItems:function(r){this._items=r},getItems:function(){return this._items},getVisibleFunc:function(){return this.$16b},setVisibleFunc:function(n){this.$16b=n},setLabelMaxWidth:function(U){this.$43b=U},$1b:function(B,G){var y=this;if("check"===B.type)B.selected=!B.selected;else if("radio"===B.type){var E=B.groupId;y.$17b(y._items,function(W){W.groupId===E&&(W.selected=!1)}),B.selected=!0}if(y.hide(),B.action)B.action.apply(B.scope||y,[B,G]);else if(B.href){var W=B.linkTarget||"_self";S.open(B.href,W)}},getItemById:function(w){return this.getItemByProperty("id",w)},setItemVisible:function(D,l){var $=this.getItemById(D);$&&($.visible=l)},getItemByProperty:function(H,g,V){var j=this;if(V=V||j._items,!V||0===V.length)return y;var $=j.$17b(V,function(b){return b[H]===g});return $||y},scrollUp:function(Y,z){var x=this;if(z=z==y?20:z,z=b(z),0!==z){var q=0;Y.$18b>z&&(q=Y.$18b-z),x.$42b(Y,q),Y.scrollTop=q,Y.$18b=q}},scrollDown:function(s,D){var z=this;if(D=D==y?20:D,D=b(D),0!==D){var x=s.$22b,E=s.$23b,L=x-E;E+s.$18b+D<x&&(L=s.$18b+D),z.$42b(s,L),s.scrollTop=L,s.$18b=L}},$42b:function(I,E){E=E==y?I.$18b:E;var j=I.$24b,x=I.$25b;j&&(i(j,"top",E+w),0==E?i(j,c,k):i(j,c,"block")),x&&(i(x,"bottom",-E+w),E==I.$22b-I.$23b?i(x,c,k):i(x,c,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(N,e){for(var W=0;W<N.length;W++){var u=N[W];if(e(u))return u;if(u.items){var i=this.$17b(u.items,e);if(i)return i}}},$2b:function(X,I){for(var K=this,p=0;p<X.length;p++){K.$5b++;var V=X[p];if(V.visible!==!1)if(A.isFunction(V.visible)&&V.visible()===!1)this._clearItemId(V);else if(!K.$16b||K.$16b.call(K,V)){var y=v("li"),W=K.$5b+"";if(i(y,"white-space","nowrap"),i(y,c,"block"),"separator"===V||V.separator===!0){var D=R();D[U]="separator",i(D,x,A.contextMenuSeparatorWidth+w),i(D,"background",A.contextMenuSeparatorColor),m(y,D)}else{V._id=W,y.setAttribute("data-id",W);var S=v("span"),n=v("span"),a=Q(),u=R();if(i(S,c,"inline-block"),i(S,x,"1.2em"),i(n,c,"inline-block"),i(n,x,"1.2em"),i(n,"line-height","1.2em"),a[U]="prefix",i(a,c,"inline-block"),i(a,t,"1em"),i(a,x,"1em"),i(a,"vertical-align","middle"),i(a,H,"0 0.2em"),"check"===V.type&&V.selected?a[U]+=" check-prefix":"radio"===V.type&&V.selected&&(a[U]+=" radio-prefix"),m(y,a),V.icon){var M=Q();M[U]="contextmenu-item-icon",i(M,c,"inline-block"),i(M,x,"1.2em"),i(M,t,"1.2em"),i(M,"margin-right","0.2em"),i(M,"float","left"),M.$50b=V.icon,M._item=V,m(S,M)}if(n[f]=V.label,m(S,n),m(y,S),u[U]="suffix",i(u,c,"inline-block"),i(u,"margin-left","1em"),i(u,"margin-right","0.4em"),i(u,"text-align","right"),i(u,"font-size","75%"),V.items&&(u[f]=A.contextMenuSubmenuMark),V.suffix&&(u[f]=V.suffix),m(y,u),y[U]="menu-item menu-item"+W,null!=V.background?V.background instanceof Function?i(y,"background-color",V.background.call(K,V)):i(y,"background-color",V.background):i(y,"background-color",A.contextMenuBackground),i(y,"color",A.contextMenuLabelColor),i(y,T,"3px 0"),V.disabled instanceof Function){var z=V.disabled.call(K,V);z&&(y[U]+=" disabled",i(y,"color",A.contextMenuDisabledLabelColor))}else V.disabled&&(y[U]+=" disabled",i(y,"color",A.contextMenuDisabledLabelColor));if(V.items){K.$21b||(K.$21b=new g.List);var O=v("ul");O[U]="submenu"+W,O.$45b=W,i(O,$,"hidden"),i(O,C,q),m(K._view,O),K.$21b.add(O),K.$2b(V.items,O)}}m(I,y)}else this._clearItemId(V);else this._clearItemId(V)}},rebuild:function(){var P=this,F=P._items,x=P._view;if(x&&(x[f]="",P.$21b=y,P.$5b=0,P.$19b=y,P.$20b=y,x.$26b=y,F&&0!==F.length)){var i=v("ul",P._r);m(x,i),P.$2b(F,i)}},addTo:function(S){if(S){var z=this,T=z.$13b;z.$12b=S,z.$9b=function(B){T.$44b(B)};var L=z.$6b=function(i){T.$38b(i)},Z=z.$7b=function(G){T.$39b(G)},W=z.$8b=function(X){T.$40b(X)};A.mockTouch&&(G(S,"touchstart",L,!0),G(S,"touchmove",Z),G(S,"touchend",W)),G(S,"mousedown",L,!0),G(S,"mousemove",Z),G(S,"mouseup",W),z.$27b=function(s){T.$41b(s)},G(S,"contextmenu",z.$27b)}},showOnView:function(d,R,r){d=d.getView?d.getView():d;var C=A.getWindowInfo(),q=d.getBoundingClientRect();this.show(q.left+C.left+R,q.top+C.top+r)},show:function(L,r,l){var k=this,l=l==y?!0:!1,B=k._view;if(B){if(k.invalidate(),1===arguments.length){var I=L;if(E(I)){var _=J(I);L=_.pageX,r=_.pageY}else L=I.pageX,r=I.pageY}var W=A.getWindowInfo(),Z=W.width,a=W.height,F=W.left,n=W.top,N={pageX:L,pageY:r,clientX:L-F,clientY:r-n,target:1,originEvent:I},X=N.clientX,O=N.clientY,h=function(D){D.style.height=a-6+w;var W=R(),e=R(),s=function(T){i(T,C,q),i(T,"text-align","center"),i(T,t,"100%"),i(T,"font-size",10+w),i(T,"padding","2px 0"),i(T,"border","0px solid "+A.contextMenuScrollerBorderColor),i(T,"background-color",A.contextMenuScrollerColor1),T.style.backgroundImage="-webkit-linear-gradient(top, "+A.contextMenuScrollerColor1+", "+A.contextMenuScrollerColor2+")",T.style.backgroundImage="linear-gradient(to bottom, "+A.contextMenuScrollerColor1+", "+A.contextMenuScrollerColor2+")"};W[U]="menu-arrow-item menu-arrow-item-top",e[U]="menu-arrow-item menu-arrow-item-bottom",s(W),i(W,"top",K),i(W,"left",K),i(W,"border-bottom-width",1+w),W[f]="▲",s(e),i(e,"bottom",K),i(e,"left",K),i(e,"border-top-width",1+w),e[f]="▼",D.$24b=W,D.$25b=e,D.$18b=D.scrollTop,D.$22b=D.scrollHeight,D.$23b=D.clientHeight,m(D,W),m(D,e),k.$42b(D)};k.beforeShow&&k.beforeShow(N);var b=k._items;if(b&&(I&&I.preventDefault(),b.length)){k.rebuild();var S=B.$26b=s(B,".menu-item");if(S.length){A.appendToScreen(B);var z=B.children[0];z.offsetHeight>a&&h(z);var Q=O+(l?1:0),j=X+(l?1:0),P=function(E){for(var Z=0,v=0,K=0,O=k.$43b;K<E.children.length;K++){var j=E.children[K];if(j.getAttribute("data-id")){var _=j.children[1],V=j.children[2],q=_.children;if(O){var x=q[0];q.length>1&&(x=q[1]),x.offsetWidth>O&&(x[f]="<marquee scrollamount='3'>"+x[f]+"</marquee>",x.children[0].style.verticalAlign="text-bottom",i(x,t,O+w),i(x,c,"inline-block"))}var l=_.offsetWidth,Q=V.offsetWidth;l>Z&&(Z=l),Q>v&&(v=Q)}}for(K=0;K<E.children.length;K++){var j=E.children[K];if(j.getAttribute("data-id")){var _=j.children[1],V=j.children[2],m=_.children[0],W=_.children[1];!W&&m.style.width&&i(m,t,Z+w),i(_,t,Z+w),i(V,t,v+w)}}};P(z);var d=O+3+B.offsetHeight,u=X+3+B.offsetWidth;d>a?i(B,p,Q-(d-a)+n+w):i(B,p,Q+n+w),u>Z?i(B,o,j-(u-Z)+F+w):i(B,o,j+F+w);var T=k.$21b;T&&T.each(function(Y){P(Y),Y.offsetHeight>a&&h(Y)}),k.$9b&&(A.mockTouch&&G(e(),"touchstart",k.$9b,!0),G(e(),"mousedown",k.$9b,!0)),k.afterShow&&k.afterShow(N),k.$47b()}}}},isShowing:function(){return this._view?this._view.parentNode!=y:!1},getRelatedView:function(){return this.$12b},hide:function(){var H=this,N=H._view;N&&N.parentNode&&(L(N.parentNode,N),A.mockTouch&&X(e(),"touchstart",H.$9b,!0),X(e(),"mousedown",H.$9b,!0),H.afterHide&&H.afterHide())},dispose:function(){var J=this,Q=J.$12b,S=J._view;S&&(this.hide(),J.disableGlobalKey(),Q&&(A.mockTouch&&(X(Q,"touchstart",J.$6b,!0),X(Q,"touchmove",J.$7b),X(Q,"touchend",J.$8b)),X(Q,"mousedown",J.$6b,!0),X(Q,"mousemove",J.$7b),X(Q,"mouseup",J.$8b),X(Q,"contextmenu",J.$27b)),J._view=J._items=J.$21b=J.$19b=J.$12b=J.beforeShow=J.afterShow=J.afterHide=J.$9b=J.$3b=J.$6b=J.$7b=J.$8b=J.$27b=y)},$46b:function(K,i,D,Y,s){var r=z.initContext(K);z.translateAndScale(r,0,0,1),r.clearRect(0,0,D,Y),A.drawStretchImage(r,A.getImage(i),"fill",0,0,D,Y,s,this),r.restore()},$47b:function(){var N,A,h,t=this,_=t._view;if(t.isShowing()){var g=s(_,".check-prefix");for(h=0;h<g.length;h++){var e=g[h];N=e.clientWidth,A=e.clientHeight,e.$48b=N,e.$49b=A,z.setCanvas(e,N,A)}var b=s(_,".radio-prefix");for(h=0;h<b.length;h++){var T=b[h];N=T.clientWidth,A=T.clientHeight,T.$48b=N,T.$49b=A,z.setCanvas(T,N,A)}var V=s(_,".contextmenu-item-icon");for(h=0;h<V.length;h++){var r=V[h];N=r.clientWidth,A=r.clientHeight,r.$48b=N,r.$49b=A,z.setCanvas(r,N,A)}}},validateImpl:function(){var J,q,V,E=this,C=E._view;if(E.isShowing()){var W=s(C,".check-prefix");for(V=0;V<W.length;V++){var l=W[V];J=l.$48b,q=l.$49b,J&&q&&E.$46b(l,A.contextMenuCheckIcon,J,q)}var O=s(C,".radio-prefix");for(V=0;V<O.length;V++){var r=O[V];J=r.$48b,q=r.$49b,J&&q&&E.$46b(r,A.contextMenuRadioIcon,J,q)}var S=s(C,".contextmenu-item-icon");for(V=0;V<S.length;V++){var x=S[V];J=x.$48b,q=x.$49b,J&&q&&E.$46b(x,A.getImage(x.$50b),J,q,x._item)}}},_clearItemId:function(n){var e=this;delete n._id,n.items&&n.items.forEach(function(T){e._clearItemId(T)})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);