/*
 * client.js - v0.3.9
 * Compiled Mon Jun 07 2021 16:36:36 GMT+0800 (中国标准时间)
 * Copyright (c) 2021 www.hightopo.com
 */

var hteditor=function(){"use strict";function S(S,q,W){W.style.cursor="ew-resize";var Z=W.innerHTML.charAt(0),z=q.querySelector("input.color_"+Z),k=function(q){q.preventDefault();var W=("A"===Z?parseFloat(z.value):parseInt(z.value))||0,k=ht.Default.getClientPoint(q).x,Q=function(q){q.preventDefault();var Q=ht.Default.getClientPoint(q).x-k,U=void 0;"A"===Z?(U=W+.01*Q,U>1&&(U=1),U<0&&(U=0),z.value=U.toFixed(2)):(U=W+1*Q,U>255&&(U=255),U<0&&(U=0),z.value=U),S.updateInputChange()};window.addEventListener("mousemove",Q,!1),window.addEventListener("touchmove",Q,!1);var U=function(S){S.preventDefault(),window.removeEventListener("mousemove",Q,!1),window.removeEventListener("touchmove",Q,!1),window.removeEventListener("mouseup",U,!1),window.removeEventListener("touchend",U,!1)};window.addEventListener("mouseup",U,!1),window.addEventListener("touchend",U,!1)};W.addEventListener("mousedown",k,!1),W.addEventListener("touchstart",k,!1)}function q(S){if(S){return new Function("return "+S.trim())()}}function W(S){var q=new RegExp("(^|&)"+S+"=([^&]*)(&|$)"),W=window.location.search.substr(1).match(q);return null!=W?decodeURIComponent(W[2]):null}function Z(S){return ht.Default.clone(S)}function z(S){return parseFloat(S.toFixed(ht.Default.numberDigits))}function k(S,q){if(null!=S)return q||!jW.config.traceMissingI18n||jW.customStrings[S]||jW.strings[S]||console.log("i18n missing:["+S+"]"),q?jW.customStrings[S]||jW.strings[S]:jW.customStrings[S]||jW.strings[S]||S}function Q(S,q){return S&&S.rowHeight?S.rowHeight:q&&q.rowHeight?q.rowHeight:void 0}function U(S,q){return S&&S.widths?S.widths:q&&q.widths?q.widths:void 0}function u(S,q){return q?q.map(function(S){return k(S)}):S}function D(S,q){var W=S.indexOf(q);W>=0&&S.splice(W,1)}function G(S){return ht.Default.isEmptyObject(S)}function b(S){return S?NS(S)?S:S.__ht__||S.toString():""}function v(S){var q=b(S),W=q.indexOf("{")+1,Z=q.lastIndexOf("}");for(q=q.substring(W,Z);q.startsWith("\n");)q=q.substr(1);for(;q.endsWith("\n");)q=q.substring(0,q.length-1);return q}function j(S){var q=S.indexOf("function");if(S&&!(q<0)){var W=void 0,Z=S.indexOf("{")+1,z=S.lastIndexOf("}"),k=S.indexOf("(")+1,Q=S.indexOf(")");return Z&&z&&k&&Q&&(W=new Function(S.substring(k,Q),S.substring(Z,z)),W.__ht__=S.substr(q)),W}}function i(S,q,W){if(W)return W;if("s"===S)return function(S){return S.s(q)};if("a"===S)return function(S){return S.a(q)};if("p"===S){var Z=ht.Default.getter(q);return function(S){if(S[Z])return S[Z]()}}}function n(S,q,W){if(void 0!==W)return W;if("s"===S)return function(S,W){return S.s(q,W)};if("a"===S)return function(S,W){return S.a(q,W)};if("p"===S){var Z=ht.Default.setter(q);return function(S,q){if(S[Z])return S[Z](q)}}}function P(S){return 37===S.keyCode}function R(S){return 38===S.keyCode}function _(S){return 39===S.keyCode}function x(S){return 40===S.keyCode}function K(S){return 13===S.keyCode}function d(S){return 27===S.keyCode}function N(S){return ht.Default.isDelete(S)}function m(S){return ht.Default.isLeftButton(S)}function t(S){return ht.Default.isDoubleClick(S)}function V(S,q){ht.Default.startDragging(S,q)}function C(S){return ht.Default.getClientPoint(S)}function O(S){return ht.Default.getTargetElement(S)}function e(S){return ht.Default.getPagePoint(S)}function L(){return ht.Default.getWindowInfo()}function y(S,q){return ht.Default.getDistance.apply(this,arguments)}function c(){return ht.Default.unionPoint.apply(this,arguments)}function X(S){return ht.Default.getImageMap()[S]?(delete ht.Default.getImageMap()[S],!0):ht.Default.getCompTypeMap()[S]?(delete ht.Default.getCompTypeMap()[S],!0):!!ht.Default.getShape3dModelMap()[S]&&(delete ht.Default.getShape3dModelMap()[S],!0)}function f(S,q,W){return ht.Default.getPosition(S,q,W)}function J(S,q){var W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hq.encodeJSON;return ht.Default.stringify(S,q,W)}function g(S,q){return ht.Default.parse(S,q)}function T(S){if(!S)return"";var q=S.lastIndexOf(".");return-1===q?S:S.substr(0,q)}function a(S){return S=S.replace(/^.*[\\\/]/,""),T(S)}function r(S){if(!S)return"";var q=S.lastIndexOf(".");return-1===q?"":S.substr(q,S.length)}function o(S,q,W,Z,z){ht.Default.layout(S,q,W,Z,z)}function B(S,q,W,Z){ht.Default.setCanvas(S,q,W,Z)}function M(S){ht.Default.removeHTML(S)}function Y(S,q,W){ht.Default.xhrLoad(S,q,W)}function A(S){return ht.Default.isShiftDown(S)}function l(S){return ht.Default.isCtrlDown(S)}function w(S,q){return ht.Default.createView(S,q)}function s(S){return ht.Default.createCanvas(S)}function F(S,q){return ht.Default.createDiv(q,S)}function p(S,q){return ht.Default.unionRect(S,q)}function H(S,q,W,Z,z,k,Q,U,u,D){return ht.Default.drawText(S,q,W,Z,z,k,Q,U,u,D)}function E(S,q,W,Z,z,k,Q,U,u,D){ht.Default.drawStretchImage(S,q,W,Z,z,k,Q,U,u,D)}function h(S,q,W,Z,z,k,Q){ht.Default.drawBorder(S,q,W,Z,z,k,Q)}function I(S,q,W,Z,z,k){var Q=S.getContext("2d");return Q.save(),q=q||0,W=W||0,Z=Z||1,k=k||ht.Default.devicePixelRatio,Q.translate(q*k,W*k),Z*=k,1!==Z&&Q.scale(Z,Z),z&&(Q.beginPath(),Q.rect(z.x,z.y,z.width,z.height),Q.clip(),Q.clearRect(z.x,z.y,z.width,z.height)),Q}function SS(S,q){ht.Default.extendClass(S,q)}function qS(S,q){q[S._id]=S,S.eachChild(function(S){q[S._id]=S,qS(S,q)})}function WS(S){ht.Default.preventDefault(S)}function ZS(S){return/^displays/.test(S)}function zS(S){return/^symbols/.test(S)}function kS(S){return/^components/.test(S)}function QS(S){return/^scenes/.test(S)}function US(S){return/^models/.test(S)}function uS(S){return/^uis/.test(S)}function DS(S){return/^assets/.test(S)}function GS(S){return/\.(png|jpg|gif|jpeg|bmp|svg)$/i.test(S)}function bS(S){return/\.json$/i.test(S)}function vS(S){return/\.mp3$/i.test(S)}function jS(S){return/\.mp4$/i.test(S)}function iS(S){return/\.svg$/i.test(S)}function nS(S){return/\.dxf$/i.test(S)}function PS(S){return/\.obj$/i.test(S)}function RS(S){return/\.mtl$/i.test(S)}function _S(S){return/\.ttf$/i.test(S)}function xS(S){return/\.otf$/i.test(S)}function KS(S){return/\.js$/i.test(S)}function dS(S){return S.substring(0,S.length-5)+".png"}function NS(S){return"string"==typeof S||S instanceof String}function mS(S){return"number"==typeof S}function tS(S){return S&&"object"==typeof S}function VS(S){return"function"==typeof S}function CS(S){return S instanceof Array}function OS(S,q){var W=S.getPosition().x,Z=S.getPosition().y,z=S.getWidth(),k=S.getHeight(),Q=[W-z*S.getAnchor().x,Z-k*S.getAnchor().y,z,k];gS(q,"rect",S.a("rect"),Q,void 0)}function eS(S,q){var W=S.getRotation();gS(q,"rotation",S.a("rotation"),W,0)}function LS(S,q){var W=S.getAnchor().x,Z=S.a("anchorX");gS(q,"anchorX",Z,W,.5),W=S.getAnchor().y,Z=S.a("anchorY"),gS(q,"anchorY",Z,W,.5)}function $S(S,q){var W=S.getScale().x,Z=S.a("scaleX");gS(q,"scaleX",Z,W,1),W=S.getScale().y,Z=S.a("scaleY"),gS(q,"scaleY",Z,W,1)}function yS(S,q){var W=S.isClosePath();gS(q,"closePath",S.a("closePath"),W,!1)}function cS(S,q,W,z,k){4===arguments.length&&(k=ht.Style[W]);var Q=Z(S.s(W)),U=S.getAttrObject();gS(q,z,U&&U[W],Q,k)}function XS(S,q){var W=S.getDisplayName();gS(q,"displayName",S.a("displayName"),W,void 0)}function fS(S,q){if(CS(S)&&CS(q)){if(S.length===q.length){for(var W=0;W<S.length;W++)if(!fS(S[W],q[W]))return!1;return!0}return!1}if(tS(S)&&tS(q)){var Z=Object.keys(S);if(Z.length===Object.keys(q).length){for(var z=0;z<Z.length;z++){var k=Z[z];if(!fS(S[k],q[k]))return!1}return!0}return!1}return S===q}function JS(S){return S instanceof ht.DataModel?eW+S.serialize(0):S}function gS(S,q,W,Z,z){var k=fS(Z,z);if(W){var Q=S[q]={func:W};k||(Q.value=JS(Z))}else k||void 0===Z||(S[q]=JS(Z))}function TS(S,q,W,Z){rS(S,"2d.visible",q.visible),rS(S,"2d.selectable",q.selectable),rS(S,"2d.movable",q.movable),rS(S,"2d.editable",q.editable),rS(S,"pixelPerfect",q.pixelPerfect,!1),rS(S,"opacity",q.opacity,1),rS(S,"clip.percentage",q.clipPercentage,1),rS(S,"clip.direction",q.clipDirection,"top"),rS(S,"layout.h",q.layoutH),rS(S,"layout.v",q.layoutV),rS(S,"prefix",q.prefix),rS(S,"state",q.state),S instanceof ht.Text||(rS(S,"shadow",q.shadow,!1),rS(S,"select.color",q.shadowColor,ht.Color.highlight),rS(S,"shadow.blur",q.shadowBlur,6),rS(S,"shadow.offset.x",q.shadowOffsetX,3),rS(S,"shadow.offset.y",q.shadowOffsetY,3)),oS(S,q),MS(S,q),YS(S,q),BS(S,q),S instanceof ht.Shape&&!q.rect||lS(S,q,W,Z);var z=hq.customProperties.comp;z&&z.length&&z.forEach(function(W){rS(S,W.property,q[W.property],W.defaultValue)}),iW.forEach(function(W){S.a(W,q[W])}),S.a("renderHTML",q.renderHTML)}function aS(S,q){cS(S,q,"2d.visible","visible"),cS(S,q,"2d.selectable","selectable"),cS(S,q,"2d.movable","movable"),cS(S,q,"2d.editable","editable"),cS(S,q,"pixelPerfect","pixelPerfect",!1),cS(S,q,"opacity","opacity",1),cS(S,q,"clip.percentage","clipPercentage",1),cS(S,q,"clip.direction","clipDirection","top"),cS(S,q,"layout.h","layoutH"),cS(S,q,"layout.v","layoutV"),cS(S,q,"prefix","prefix"),cS(S,q,"state","state"),S instanceof ht.Text||(cS(S,q,"shadow","shadow",!1),cS(S,q,"select.color","shadowColor",ht.Color.highlight),cS(S,q,"shadow.blur","shadowBlur",6),cS(S,q,"shadow.offset.x","shadowOffsetX",3),cS(S,q,"shadow.offset.y","shadowOffsetY",3)),XS(S,q),LS(S,q),$S(S,q),eS(S,q),S instanceof ht.Shape&&!S.a("rect")||OS(S,q);var W=hq.customProperties.comp,Z=!!hq.saveCompCustomPropertyDefaultValue;W&&W.length&&W.forEach(function(W){Z?cS(S,q,W.property,W.property):cS(S,q,W.property,W.property,W.defaultValue)}),iW.forEach(function(W){S.a(W)&&(q[W]=S.a(W))}),S.a("renderHTML")&&(q.renderHTML=S.a("renderHTML"))}function rS(S,q,W,z){3===arguments.length&&(z=ht.Style[q]);var k=wS(W,z);if(NS(k)&&k.substring(0,15)===eW){var Q=new ht.DataModel;Q.deserialize(g(k.substr(15))),k=Q}S.s(q,Z(k)),S.a(q,sS(W))}function oS(S,q){S.setDisplayName(wS(q.displayName),void 0),S.a("displayName",sS(q.displayName))}function BS(S,q){S.setRotation(wS(q.rotation,0)),S.a("rotation",sS(q.rotation))}function MS(S,q){var W=wS(q.anchorX,.5),Z=wS(q.anchorY,.5);.5===W&&.5===Z||S.setAnchor(W,Z),S.a("anchorX",sS(q.anchorX)),S.a("anchorY",sS(q.anchorY))}function YS(S,q){var W=wS(q.scaleX,1),Z=wS(q.scaleY,1);S.setScale(W,Z),S.a("scaleX",sS(q.scaleX)),S.a("scaleY",sS(q.scaleY))}function AS(S,q){S.setClosePath(wS(q.closePath,!1)),S.a("closePath",sS(q.closePath))}function lS(S,q,W,Z){var z=wS(q.rect),k=wS(q.relative);z||(z=[0,0,W,Z],k=!1);var Q=z.length;if(4===Q)z={x:z[0],y:z[1],width:z[2],height:z[3]},k&&(z.x*=W,z.y*=Z,z.width*=W,z.height*=Z);else if(3===Q){var U=z[0];z={width:z[1],height:z[2]},k&&(z.width*=W,z.height*=Z),"object"==typeof U?U.length&&(U={x:U[0],y:U[1]}):U=f(U,{x:0,y:0,width:W,height:Z},z),z.x=U.x-z.width*S.getAnchor().x,z.y=U.y-z.height*S.getAnchor().y}var u=wS(q.offsetX);u&&(z.x+=u),u=wS(q.offsetY),u&&(z.y+=u),z.width<0||z.height<0?S.p(z.x,z.y):S.setRect(z),S.a("rect",sS(q.rect))}function wS(S,q){var W=void 0;return W=tS(S)&&S.func?S.value:S,void 0===W&&(W=q),W}function sS(S){if(tS(S)&&S.func)return S.func}function FS(S){if(CS(S)){for(var q=new ht.List,W=S.length,Z=0;Z<W;Z+=2)q.add({x:S[Z],y:S[Z+1]});S=q}return S}function pS(S){if(S instanceof ht.List&&(S=S.toArray()),CS(S)){for(var q=[],W=0;W<S.length;W++){var Z=S[W];q.push(Z.x,Z.y)}S=q}return S}function HS(S){return{width:16,height:16,comps:[{type:function(q,W,Z,z,k){var Q=ht.Default.getImage(S.graphView.getImage(z));if(Q&&Q.snapshotURL)(Q=ht.Default.getImage(Q.snapshotURL))&&E(q,Q,"uniform",W.x,W.y,W.width,W.height,z,k);else{var U=Q&&Q.boundExtend?z.getRect():S.graphView.getDataUIBounds(z);if(U&&U.width&&U.height){q.save();var u=Math.min(1,16/Math.max(U.width,U.height));q.translate(-U.x*u+(16-U.width*u)/2,-U.y*u+(16-U.height*u)/2),q.scale(u,u),S.graphView.drawData(q,z),q.restore()}}}}]}}function ES(S,q){var W=S.graphView.getEdgeInfo(q);if(!W)return cW;var Z=W.edgeTypeInfo,z=void 0,k=void 0;if(!W.type||W.points){W.sourcePoint.x,W.sourcePoint.y,W.targetPoint.x,W.targetPoint.y;W.type?(z=new ht.List(W.sourcePoint),z.addAll(W.points),z.add(W.targetPoint),k=W.segments):W.looped?(z=fW,k=JW):z=W.center?[W.c1,W.sourcePoint,W.targetPoint,W.c2]:[W.sourcePoint,W.targetPoint]}else Z&&(z=Z.points,k=Z.segments);var Q=c(z);if(Q&&(Q.width||Q.height)){var U=Math.max(1,Math.max(Q.width,Q.height)/16),u=[],D=(16-Q.width/U)/2,G=(16-Q.height/U)/2;z instanceof ht.List&&(z=z.toArray()),z.forEach(function(S){u.push((S.x-Q.x)/U+D,(S.y-Q.y)/U+G)});var b=k?k.toArray():null;return{width:16,height:16,comps:[{type:"shape",points:u,segments:b,borderWidth:1,borderColor:W.color,borderCap:W.cap,borderJoin:W.join}]}}return cW}function hS(S){var q=c(S.getPoints());if(q&&(q.width||q.height)){var W=Math.max(1,Math.max(q.width,q.height)/16),Z=[],z=(16-q.width/W)/2,k=(16-q.height/W)/2;S.getPoints().each(function(S){Z.push((S.x-q.x)/W+z,(S.y-q.y)/W+k)});var Q=S.getSegments()?S.getSegments().toArray():null;return{width:16,height:16,comps:[{type:"shape",points:Z,segments:Q,rotation:S.getRotation(),background:S.s("shape.background"),repeatImage:S.s("shape.repeat.image"),borderWidth:S.s("shape.border.width")?1:0,borderColor:S.s("shape.border.color"),borderCap:S.s("shape.border.cap"),borderJoin:S.s("shape.border.join"),gradient:S.s("shape.gradient"),gradientColor:S.s("shape.gradient.color"),closePath:S.isClosePath()}]}}return cW}function IS(S){return ht.Default.isInput(S)}function Sq(S,q){var W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Z=W.nullable,z=void 0===Z||Z,Q=W.trim,U=void 0!==Q&&Q,u=W.cancellable,D=void 0===u||u,G=W.width,b=void 0===G?300:G,v=W.height,j=void 0===v?120:v,i=W.maxLength,n=void 0===i?-1:i,P=W.checkFunc,R=void 0===P?void 0:P,_=W.$38$,x=void 0===_?void 0:_,K=arguments[3],d=new bW;d.addRow([{id:"input",textField:{text:q}}],[.1]);var N=new GW,m=[],t=null,V=null;t=function(){var S=d.v("input");return U&&S&&S.trim(),!1!==z||S?n>0&&S&&S.length>n?void qq(null,k("editor.inputmax"),function(){}):R&&!(S=R(S))?void qq(null,k("editor.invalidinput"),function(){}):(K(S,"ok"),void N.hide()):void qq(null,k("editor.inputempty"),function(){})},m.push({label:k("editor.ok"),action:t}),D&&(V=function(){K(q,"cancel"),N.hide()},m.push({label:k("editor.cancel"),action:V})),N.setConfig({title:S,draggable:!0,width:b,height:j,contentPadding:10,content:d,buttons:m,buttonsAlign:"right"}),N.$48$=V,N.$47$=t,N.show(x),d.getViewById("input").getElement()._ignore=!0,d.getViewById("input").setFocus()}function qq(S,q,W,Z){var z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:300,Q=[],U=void 0,u=void 0;W&&(U=function(){G.hide(),W()},Q.push({label:k("editor.ok"),action:U})),Z&&(u=function(){G.hide(),Z()},Q.push({label:k("editor.cancel"),action:u}));var D=document.createElement("p");D.style.color=ht.Default.labelColor,D.innerText=q;var G=new GW({title:S||k("editor.prompt"),contentPadding:20,width:z,draggable:!0,content:D,buttons:Q});G.$48$=u||U,G.$47$=U,G.setModal(!0),G.show()}function Wq(S,q,W,Z){var z={unfocusable:!0,id:S,toolTip:q},k=ht.Default.getImage(W),Q=k?k.width:16,U=k?k.height:16;return z.icon={width:Q+8,height:U+8,fitSize:!!k&&k.fitSize,comps:[{type:"rect",background:{func:function(S,q){return q.getCurrentItem()===z?jW.config.color_hover:null}},rect:[0,0,Q+8,U+8]},{type:"image",name:W,color:{func:function(S,q){return Z&&Z()?jW.config.color_select:jW.config.color_dark}},rect:[4,4,Q,U]}]},z}function Zq(S,q,W){W||(W=ht.Default.labelFont);var Z=ht.Default.createDiv(!0);return Z.style.font=W,Z.style.color=ht.Default.labelColor,Z.style.paddingLeft="4px",Z.style.whiteSpace="nowrap",Z.style.verticalAlign="middle",Z.innerHTML=S,q&&(Z.style.textAlign=q),Z.onLayouted=function(S,q,W,z){Z.style.lineHeight=z+"px"},Z}function zq(S,q,W,Z){var z=new ht.widget.Button;return z.setLabel(S),z.setLabelColor(ht.Default.labelColor),z.setLabelSelectColor(jW.config.color_select),z.setIcon(W),z.setBackground(null),z.setBorderColor(null),Z&&(z.onClicked=Z),q&&(z.setToolTip(q),z.enableToolTip()),z.getCurrentBackground=function(){return this._hover||this.isPressed()?jW.config.color_hover:null},z.getCurrentBorderColor=function(){return this.isSelected()?jW.config.color_select:null},z.getView().addEventListener("mouseenter",function(){z.isDisabled()||(z._hover=!0,z.iv())},!1),z.getView().addEventListener("mouseleave",function(){z.isDisabled()||(z._hover=!1,z.iv())},!1),z}function kq(S,q){var W=ht.Default.getImage(S);if(!W)throw S;var Z={width:W.width,height:W.height,fitSize:W.fitSize,comps:[{type:"image",name:S,color:{func:function(){return q&&q()?jW.config.color_select:jW.config.color_dark}}}]},z=S+".state";return ht.Default.setImage(z,Z),z}function Qq(S,q,W){var Z=new FileReader;Z.onloadend=function(S){q(S.target.result)},W?Z.readAsDataURL(S):Z.readAsText(S)}function Uq(S,q){if(q){q===document.body&&(document.title=k("editor.title"),document.body.style.overflow="hidden"),q.appendChild(S.getView());var W=S.getView().style;W.left="0px",W.top="0px",setInterval(function(){if(S.getView()!==(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)){var Z=void 0,z=void 0;q===document.body?(Z=document.documentElement.clientWidth,window.innerWidth&&window.innerWidth<Z&&(Z=window.innerWidth),z=document.documentElement.clientHeight,window.innerHeight&&window.innerHeight<z&&(z=window.innerHeight)):(Z=q.clientWidth,z=q.clientHeight),Z===S._oldWidth&&z===S._oldHeight||(S._oldWidth=Z,S._oldHeight=z,W.width=Z+"px",W.height=z+"px",S.iv())}},500)}}function uq(S){if(S)for(var q=0;q<S.length;q++)null==S[q]&&(S[q]=0)}function Dq(S){if(S)for(var q=ht.Color.chart,W=0;W<S.length;W++)null==S[W]&&(S[W]=q[W%q.length])}function Gq(S,q){q=void 0===q?S?S.length:0:q;for(var W=new Array(q),Z=0;Z<q;Z++)W[Z]=S?S[Z]:void 0;return W}function bq(S){if(S instanceof ht.graph.GraphView){var q=S.getContentRect(),W=Math.max(q.width,q.height),Z=Math.min(q.width,q.height),z=Math.max(1/Z,jW.config.imageSize/W);return S.toDataURL(void 0,void 0,z)}if(S instanceof ht.graph3d.Graph3dView){var k=S.getWidth(),Q=S.getHeight(),U=Math.max(k,Q),u=Math.min(1,jW.config.imageSize/U);U<3&&(u=jW.config.imageSize/U),k=Math.floor(k*u),Q=Math.floor(Q*u);return S.toCanvas(S.dm().getBackground(),k,Q).toDataURL("image/png",1)}if(ht.ui&&S instanceof ht.ui.View){var D=S.getWidth(),G=S.getHeight(),b=D,v=G,j=Math.max(b,v),i=Math.min(1,jW.config.imageSize/j);j<3&&(i=jW.config.imageSize/j),b=Math.floor(b*i),v=Math.floor(v*i);var n=S.getRootCanvas(),P=(n||S.getView()).getBoundingClientRect(),R=document.createElement("canvas");R.width=b,R.height=v;var _=R.getContext("2d"),x=function(q){for(var W=0;W<q.size();W++){var Z=q.get(W);if(Z===S)n&&_.drawImage(n,0,0,D,G,0,0,b,v);else{var z=Z.getRootCanvas();if(z){var k=z.getBoundingClientRect();_.drawImage(z,0,0,z.width,z.height,(k.left-P.left)/D*b,(k.top-P.top)/G*v,z.width/D*b,z.height/G*v)}}if(Z instanceof ht.ui.UIGraphView||Z instanceof ht.ui.UIGraph3dView){var Q=Z.getContent(),U=Q.toCanvas();if(U){var u=Q._canvas.getBoundingClientRect();_.drawImage(U,0,0,U.width,U.height,(u.left-P.left)/D*b,(u.top-P.top)/G*v,U.width/D*b,U.height/G*v)}}Z.getChildren&&Z.getChildren().size()>0&&x(Z.getChildren())}},K=new ht.List;return K.add(S),x(K),R.toDataURL("image/png",1)}var d=ht.Default.getImage(S),N=Math.max(d.width,d.height),m=Math.min(1,jW.config.imageSize/N);return ht.Default.toCanvas(S,d.width*m,d.height*m).toDataURL("image/png",1)}function vq(S,q,W){if(S instanceof Array)for(var Z=0,z=S.length;Z<z;Z++)vq(S[Z],q,W);else if(S instanceof Object&&!(S instanceof ht.DataModel))for(var k in S)if(S.hasOwnProperty(k)){var Q=S[k];if(!tS(Q))continue;if(NS(Q.func)&&LW.test(Q.func)){var U=Q.func.slice(5);q&&void 0===q[U]&&(q[U]=k),W&&void 0===W[U]&&(W[U]=Q.value)}else vq(Q,q,W)}}function jq(S){return new(ht.Default.getClass(jW.config.codeEditorClass)||vW)(S)}function iq(){var S=arguments[0];if(!S)return"";for(var q=1;q<arguments.length;q++)S=S.replace("{"+(q-1)+"}",arguments[q]);return S}function nq(S,q,W){var Z=new ht.Math.Matrix2d,z=S.getPosition(),k=S.getScale(),Q=S.getRotation();return Z.translate(-z.x,-z.y).scale(k.x,k.y).rotate(Q).translate(z.x,z.y),Z.apply({x:q,y:W})}function Pq(S){S.forEach(function(S){S.getPoints().reverse();var q=S.getSegments();if(q){var W=q.size(),Z=q.get(W-1);5===Z&&q.pop(),q.shift(),q.reverse(),q.unshift(1),5===Z&&q.push(Z)}})}function Rq(S){var q=void 0,W=void 0,z=void 0,k=void 0,Q=void 0,U=void 0,u=[],D=[],G=void 0;if(S.forEach(function(S){G||(G=S.getClass());var b=S.getPoints().toArray().map(function(q){return nq(S,q.x,q.y)});u=u.concat(b);var v=S.getSegments();if(v)v=v.toArray();else{v=[1];for(var j=1,i=S.getPoints().size();j<i;j++)v.push(2)}S.isClosePath()&&v.push(5),D.push.apply(D,v),q||(q=S.dm(),W=S.getThickness(),z=S.getElevation(),k=S.getTall(),Q=Z(S.getStyleMap()),U=Z(S.getAnchor3d())),S.removeFromDataModel()}),G){var b=new G;b.setPoints(u),b.setSegments(D),b.setThickness(W),b.setElevation(z),b.setTall(k),b.setAnchor3d(U),b.s(Q),q.add(b),q.sm().ss(b)}}function _q(S){var q=S.dm(),W=S.getSegments();if(W){var z=[],k=S.getPoints(),Q=void 0,U=void 0,u=0;W.forEach(function(S){switch(S){case 1:Q=[S],U=[Z(k.get(u++))],z.push({segments:Q,points:U});break;case 2:Q.push(S),U.push(Z(k.get(u++)));break;case 3:Q.push(S),U.push(Z(k.get(u++))),U.push(Z(k.get(u++)));break;case 4:Q.push(S),U.push(Z(k.get(u++))),U.push(Z(k.get(u++))),U.push(Z(k.get(u++)));break;case 5:Q.push(S)}});var D=S.getThickness(),G=S.getElevation(),b=S.getTall(),v=Z(S.getStyleMap()),j=Z(S.getAnchor3d()),i=[];z.forEach(function(W){var Z=new(S.getClass());Z.setPoints(W.points),Z.setSegments(W.segments),Z.setThickness(D),Z.setElevation(G),Z.setTall(b),Z.setAnchor3d(j),Z.s(v),q.add(Z),i.push(Z)}),q.sm().ss(i),S.removeFromDataModel()}}function xq(S,q){for(var W=0,Z=S.length;W<Z;W++){var z=S.get(W);if(!(z instanceof ht.Shape))return!1;if(!q&&z instanceof ht.CSGShape)return!1}return!0}function Kq(S,q,W,Z){var z=S.getRowIndex(q),k=S.tx(),Q=S.ty(),U=S.getRowHeight(),u={x:k,y:U*z+Q,width:W.getWidth(),height:U};S.beginEditing({column:W,data:q,view:S,editorRect:u,value:Z})}function dq(S,q){S.vectorDataBindingDisabled=!0,S.enableToolTip(),S.getToolTip=function(){var S=ht.Default.getImage(this.getIcon()),q=ht.Default.getInternal().getImageWidth(S),W=ht.Default.getInternal().getImageHeight(S);return q&&W?q+", "+W:void 0},S.setExtraInfo=function(q){var W=q&&q.url||q;S.actionURL=q&&q.actionURL||q,S.setIconColor(q&&q.iconColor||void 0);var Z=ht.Default.getImage(W);Z&&Z.snapshotURL?S.setIcon(Z.snapshotURL):S.setIcon(W)};var W=S.getView();W.style.cursor="pointer";var Z=function(W){W.preventDefault(),t(W)?q.open(S.actionURL):q.selectFileNode(S.actionURL)};W.addEventListener("mousedown",Z,!1),W.addEventListener("touchstart",Z,!1)}function Nq(S,q,W){var Z=S.getElement?S.getElement():S.getView?S.getView():S,z=void 0;S.isDroppable=q,S.handleCrossDrag=function(q,k,Q){"enter"===k?(z=Z.style.border,Z.style.border="solid "+jW.config.color_select_dark+" 2px"):"exit"===k||"cancel"===k?Z.style.border=z:"over"===k||"drop"===k&&(W(Q.view.draggingData),Z.style.border=z,S.setFocus&&S.setFocus())}}function mq(S,q){for(var W=q.getParent();W;)q=W,W=q.getParent();return S.getRoots().indexOf(q)}function tq(S){var q={clazz:this.getClass(),name:this.getName(),displayName:this.getDisplayName(),toolTip:this.getToolTip(),tag:this.getTag(),icon:this.getIcon(),layer:this.getLayer(),parent:S.$57$(this.getParent()),a:{},s:{},dataBindings:this.getDataBindings()?J(this.getDataBindings(),null,!1):null},W=this.getStyleMap();for(var z in W)q.s[z]=Z(this.s(z));var k=this.getAttrObject();for(var Q in k)q.a[Q]=Z(this.a(Q));return q}function Vq(S,q){var W=new S.clazz,z=q.dm();if(jW.config.cloneName&&W.setName(S.name),jW.config.cloneDisplayName&&W.setDisplayName(S.displayName),jW.config.cloneToolTip&&W.setToolTip(S.toolTip),jW.config.cloneTag&&!z.getDataByTag(S.tag)&&W.setTag(S.tag),jW.config.cloneIcon&&W.setIcon(S.icon),jW.config.cloneLayer&&W.setLayer(S.layer),jW.config.cloneStyle)for(var k in S.s)W.s(k,Z(S.s[k]));if(jW.config.cloneAttr)for(var Q in S.a)W.a(Q,Z(S.a[Q]));return jW.config.cloneDataBindings&&S.dataBindings&&W.setDataBindings(g(S.dataBindings)),W}function Cq(S,q,W){var Z=jW.config.cloneParent?q.$49$(S.parent,W):void 0;this.setParent(Z||q.getCurrentSubGraph())}function Oq(S){var q=tq.call(this,S);return q.r3=this.r3(),q.rotationMode=this.getRotationMode(),q.p3=this.p3(),q.s3=this.s3(),q.scale3d=this.getScale3d(),q.anchor3d=this.getAnchor3d(),q.image=this.getImage(),q.host=S.$57$(this.getHost()),q.renderLayer=this.getRenderLayer(),q}function eq(S,q){var W=Vq(S,q);return W.setRenderLayer(S.renderLayer),jW.config.cloneRotation&&(W.r3(S.r3),W.setRotationMode(S.rotationMode)),jW.config.clonePosition&&W.p3(S.p3),jW.config.cloneSize&&W.s3(S.s3),jW.config.cloneScale&&W.setScale3d(S.scale3d),jW.config.cloneAnchor&&W.setAnchor3d(S.anchor3d),jW.config.cloneImage&&W.setImage(S.image),W}function Lq(S,q,W){Cq.call(this,S,q,W),jW.config.cloneHost&&this.setHost(q.$49$(S.host,W))}function $q(S){var q=tq.call(this,S);return q.source=S.$57$(this.getSource()),q.target=S.$57$(this.getTarget()),q}function yq(S,q){return Vq(S,q)}function cq(S,q,W){Cq.call(this,S,q,W),jW.config.cloneSource&&this.setSource(q.$49$(S.source,W)),jW.config.cloneTarget&&this.setTarget(q.$49$(S.target,W))}function Xq(S){var q=Oq.call(this,S);return q.expanded=this.isExpanded(),q}function fq(S,q){var W=eq(S,q);return jW.config.cloneExpanded&&W.setExpanded(S.expanded),W}function Jq(S){var q=Oq.call(this,S);return q.points=Z(this.getPoints()),q.segments=Z(this.getSegments()),q.thickness=this.getThickness(),q.closePath=this.isClosePath(),q}function gq(S,q){var W=eq(S,q);return jW.config.clonePoints&&W.setPoints(Z(S.points)),jW.config.cloneSegments&&W.setSegments(Z(S.segments)),jW.config.cloneThickness&&W.setThickness(S.thickness),jW.config.cloneClosePath&&W.setClosePath(S.closePath),W}function Tq(S){var q=Oq.call(this,S);return q.clickThroughEnabled=this.isClickThroughEnabled(),q.syncSize=this.isSyncSize(),q}function aq(S,q){var W=eq(S,q);return jW.config.cloneClickThroughEnabled&&W.setClickThroughEnabled(S.clickThroughEnabled),jW.config.cloneSyncSize&&W.setSyncSize(S.syncSize),W}function rq(S){var q=Tq.call(this,S);return q.ref=this.getRef(),q}function oq(S,q){var W=aq(S,q);return jW.config.cloneRef&&W.setRef(S.ref),W}function Bq(S){var q=Oq.call(this,S);return q.points=Z(this.getPoints()),q.colors=Z(this.getColors()),q.sizes=Z(this.getSizes()),q.uvoffsets=Z(this.getUvoffsets()),q}function Mq(S,q){var W=eq(S,q);if(W instanceof ht.Points)S.points&&W.setPoints(Z(S.points)),S.colors&&W.setColors(Z(S.colors)),S.sizes&&W.setSizes(Z(S.sizes)),S.uvoffsets&&W.setUvoffsets(Z(S.uvoffsets));else{var z=W.getStyleMap();for(var k in z)0===k.indexOf("points")&&W.s(k,void 0)}return W}function Yq(S){if(!(S instanceof ht.Node))return null;if(S instanceof ht.Group||S instanceof ht.Grid||S instanceof ht.Block)return null;var q=void 0;if(S instanceof BW)q={type:"clip",points:Z(S.getPoints()),segments:Z(S.getSegments()),closePath:S.isClosePath()};else if(S instanceof MW)q={type:"restore"};else if(S instanceof ht.Shape)q={type:"shape",points:Z(S.getPoints()),segments:Z(S.getSegments()),closePath:S.isClosePath()};else if(S instanceof ht.Text)q={type:"text",text:S.s("text"),align:S.s("text.align"),vAlign:S.s("text.vAlign"),color:S.s("text.color"),gradientPack:S.s("text.gradient.pack"),font:S.s("text.font"),shadow:S.s("text.shadow"),shadowColor:S.s("text.shadow.color"),shadowBlur:S.s("text.shadow.blur"),shadowOffsetX:S.s("text.shadow.offset.x"),shadowOffsetY:S.s("text.shadow.offset.y")};else if(S instanceof ht.Node){var W=S.s("shape");W?(q={type:"node_shape",shape:S.s("shape")},"rect"===W?q.depth=S.s("shape.depth"):"roundRect"===W?q.polygonSide=S.s("shape.corner.radius"):"polygon"===W?q.polygonSide=S.s("shape.polygon.side"):"arc"===W&&(q.arcFrom=S.s("shape.arc.from"),q.arcTo=S.s("shape.arc.to"),q.arcClose=S.s("shape.arc.close"),q.arcOval=S.s("shape.arc.oval"))):S.getImage()&&(q={type:"node_image",image:S.getImage(),stretch:S.s("image.stretch"),color:S.s("body.color")})}return q&&(q.visible=S.s("2d.visible"),q.displayName=S.getDisplayName(),q.x=S.getPosition().x,q.y=S.getPosition().y,q.anchorX=S.getAnchor().x,q.anchorY=S.getAnchor().y,q.scaleX=S.getScale().x,q.scaleY=S.getScale().y,q.rotation=S.getRotation(),q.width=S._width,q.height=S._height,q.opacity=S.s("opacity"),q.renderLayer=S.getRenderLayer(),"shape"!==q.type&&"node_shape"!==q.type||(q.background=S.s("shape.background"),q.repeatImage=S.s("shape.repeat.image"),q.borderWidth=S.s("shape.border.width"),q.borderColor=S.s("shape.border.color"),q.border3d=S.s("shape.border.3d"),q.border3dColor=S.s("shape.border.3d.color"),q.border3dAccuracy=S.s("shape.border.3d.accuracy"),q.borderCap=S.s("shape.border.cap"),q.borderJoin=S.s("shape.border.join"),q.borderPattern=S.s("shape.border.pattern"),q.gradient=S.s("shape.gradient"),q.gradientColor=S.s("shape.gradient.color"),q.dash=S.s("shape.dash"),q.dashPattern=S.s("shape.dash.pattern"),q.dashOffset=S.s("shape.dash.offset"),q.dashColor=S.s("shape.dash.color"),q.dashWidth=S.s("shape.dash.width"),q.dash3d=S.s("shape.dash.3d"),q.dash3dColor=S.s("shape.dash.3d.color"),q.dash3dAccuracy=S.s("shape.dash.3d.accuracy"),q.fillRule=S.s("shape.fill.rule"),q.fillClipDirection=S.s("shape.fill.clip.direction"),q.fillClipPercentage=S.s("shape.fill.clip.percentage"),q.gradientPack=Z(S.s("shape.gradient.pack")),q.borderWidthAbsolute=S.s("shape.border.width.absolute"))),q}function Aq(S,q){var W=void 0;if("clip"===S.type)q&&(W=new BW,W.s("type","clip"),W.setPoints(S.points),W.setSegments(S.segments));else if("restore"===S.type)q&&(W=new MW,W.s("type","restore"));else if("shape"===S.type)W=q?new aW:new ht.Shape,W.s("type","shape"),W.setPoints(S.points),W.setSegments(S.segments),W.setClosePath(S.closePath);else if("node_shape"===S.type){W=q?new TW:new ht.Node;var z=S.shape;W.s("shape",z),"rect"===z?W.s("shape.depth",S.depth):"roundRect"===z?W.s("shape.corner.radius",S.polygonSide):"polygon"===z?W.s("shape.polygon.side",S.polygonSide):"arc"===z&&(W.s("shape.arc.from",S.arcFrom),W.s("shape.arc.to",S.arcTo),W.s("shape.arc.close",S.arcClose),W.s("shape.arc.oval",S.arcOval))}else"node_image"===S.type?(q?(W=new rW,W.s("type","image"),W.s("image",S.image)):(W=new ht.Node,W.setImage(S.image)),W.s("body.color",S.color)):"text"===S.type&&(W=q?new oW:new ht.Text,W.s("type","text"),W.s("text",S.text),W.s("text.align",S.align),W.s("text.vAlign",S.vAlign),W.s("text.color",S.color),W.s("text.gradient.pack",S.gradientPack),W.s("text.font",S.font),W.s("text.shadow",S.shadow),W.s("text.shadow.color",S.shadowColor),W.s("text.shadow.blur",S.shadowBlur),W.s("text.shadow.offset.x",S.shadowOffsetX),W.s("text.shadow.offset.y",S.shadowOffsetY),W.s("text.decoration",S.decoration),W.s("text.vertical",S.vertical));return W?(W.s("2d.visible",S.visible),W.setDisplayName(S.displayName),W.setPosition(S.x,S.y),.5===S.anchorX&&.5===S.anchorY||W.setAnchor(S.anchorX,S.anchorY),W.setScale(S.scaleX,S.scaleY),W.setRotation(S.rotation),W.setSize(S.width,S.height),W.s("opacity",S.opacity),W.setRenderLayer(S.renderLayer),"shape"!==S.type&&"node_shape"!==S.type||(W.s("shape.background",S.background),W.s("shape.repeat.image",S.repeatImage),W.s("shape.border.width",S.borderWidth),W.s("shape.border.color",S.borderColor),W.s("shape.border.3d",S.border3d),W.s("shape.border.3d.color",S.border3dColor),W.s("shape.border.3d.accuracy",S.border3dAccuracy),W.s("shape.border.cap",S.borderCap),W.s("shape.border.join",S.borderJoin),W.s("shape.border.pattern",S.borderPattern),W.s("shape.gradient",S.gradient),W.s("shape.gradient.color",S.gradientColor),W.s("shape.dash",S.dash),W.s("shape.dash.pattern",S.dashPattern),W.s("shape.dash.offset",S.dashOffset),W.s("shape.dash.color",S.dashColor),W.s("shape.dash.width",S.dashWidth),W.s("shape.dash.3d",S.dash3d),W.s("shape.dash.3d.color",S.dash3dColor),W.s("shape.dash.3d.accuracy",S.dash3dAccuracy),W.s("shape.fill.rule",S.fillRule),W.s("shape.fill.clip.direction",S.fillClipDirection),W.s("shape.fill.clip.percentage",S.fillClipPercentage),W.s("shape.gradient.pack",Z(S.gradientPack)),W.s("shape.border.width.absolute",S.borderWidthAbsolute)),W):null}function lq(S,q){
var W=void 0,Z=q?q.dm:null,z=Z?Z.a("width"):100,k=Z?Z.a("height"):100,Q=wS(S.type);if(NS(Q)){var U=BZ[Q];U?W=new U(S,z,k):bS(Q)&&(W=new gZ(S,z,k))}else W=new JZ(S,z,k);return W&&q&&q.addData(W,!0),W}function wq(S,q){S.s("chart.series")||S.s("chart.series",[]);var W=S.s("chart.series");W[0]||(W[0]={});var Z=W[0];return Z.values||(Z.values=[]),Z.colors||(Z.colors=[]),Z[q]}function sq(S,q){return wS(wq(S,q))}function Fq(S,q){return sS(wq(S,q))}function pq(){var S=jW.config.customProperties.display;S&&S.length&&S.forEach(function(S){var q=(S.accessType||"a")+":"+S.property;XW.display[q]=!0}),S=jW.config.customProperties.data,S&&S.length&&S.forEach(function(S){var q=(S.accessType||"a")+":"+S.property;XW.data[q]=!0}),S=jW.config.customProperties.symbol,S&&S.length&&S.forEach(function(S){XW.symbol[S.property]=!0}),S=jW.config.customProperties.comp,S&&S.length&&S.forEach(function(S){XW.comp[S.property]=!0}),S=jW.config.customProperties.scene,S&&S.length&&S.forEach(function(S){var q=(S.accessType||"a")+":"+S.property;XW.scene[q]=!0}),(S=jW.config.customProperties.data3d)&&S.length&&S.forEach(function(S){var q=(S.accessType||"a")+":"+S.property;XW.data3d[q]=!0})}function Hq(){var S=jW.config,q=jW.consts,W=function(q,W){void 0===S.valueTypes[q]&&(W.name="editor.valuetype."+q.toLowerCase(),S.valueTypes[q]=W)};W("String",{type:"string"}),W("Image",{type:"image"}),W("URL",{type:"url"}),W("Multiline",{type:"multiline"}),W("Font",{type:"font"}),W("Angle",{type:"number",angle:!0}),W("Int",{type:"int",step:1}),W("PositiveNumber",{type:"number",step:1,min:0}),W("Number",{type:"number",step:1}),W("Color",{type:"color"}),W("Boolean",{type:"boolean"}),W("Function",{type:"function"}),W("Object",{type:"object"}),W("ObjectArray",{type:"objectArray",rowHeight:60}),W("StringArray",{type:"stringArray",rowHeight:60}),W("NumberArray",{type:"numberArray",rowHeight:60}),W("ColorArray",{type:"colorArray",rowHeight:60}),W("Opacity",{type:"number",min:0,max:1,step:.01}),W("Percentage",{type:"number",min:0,max:1,step:.01}),W("Gradient",{type:"enum",values:S.gradients,icons:S.gradientIcons,dropDownWidth:140}),W("FillRule",{type:"enum",values:q.fillRules,labels:q.fillRuleLabels}),W("ClipDirection",{type:"enum",values:q.clipDirections,labels:q.clipDirectionLabels}),W("CapStyle",{type:"enum",values:q.caps,labels:q.capLabels}),W("JoinStyle",{type:"enum",values:q.joins,labels:q.joinLabels}),W("Align",{type:"enum",values:q.aligns,labels:q.alignLabels}),W("VAlign",{type:"enum",values:q.vAligns,labels:q.vAlignLabels}),W("Stretch",{type:"enum",values:q.stretchs,labels:q.stretchLabels}),W("Direction",{type:"enum",values:q.directions,labels:q.directionLabels}),W("Orientation",{type:"enum",values:q.orientations,labels:q.orientationLabels}),W("ColumnChart",{type:"enum",values:q.columnChartTypes,labels:q.columnChartTypeLabels}),W("DataModel",{type:"dataModel"}),q.valueTypes=[],q.valueTypeLabels=[];for(var Z in jW.config.valueTypes)!function(S){var W=jW.config.valueTypes[S];W.type&&(q.valueTypes.push(S),q.valueTypeLabels.push(k(W.name)||k(S)),"enum"===W.type&&W.i18nLabels&&!W.labels&&(W.labels=[],W.i18nLabels.forEach(function(S){W.labels.push(k(S))})))}(Z)}function Eq(){var S=jW.consts={};S.edgeTypes=jW.config.edgeTypes,S.edgeTypeLabels=jW.config.edgeTypes.map(function(S){var q=k("edgeType."+S,!0);return q||S}),S.aligns=["left","center","right"],S.alignLabels=[k("editor.align.left"),k("editor.align.center"),k("editor.align.right")],S.vAligns=["top","middle","bottom"],S.vAlignLabels=[k("editor.valign.top"),k("editor.valign.middle"),k("editor.valign.bottom")],S.stretchs=["fill","uniform","centerUniform"],S.stretchLabels=[k("editor.stretch.fill"),k("editor.stretch.uniform"),k("editor.stretch.centeruniform")],S.fillRules=["nonzero","evenodd"],S.fillRuleLabels=[k("editor.nonzero"),k("editor.evenodd")],S.clipDirections=["top","bottom","left","right"],S.clipDirectionLabels=[k("editor.clipdirection.top"),k("editor.clipdirection.bottom"),k("editor.clipdirection.left"),k("editor.clipdirection.right")],S.caps=["butt","round","square"],S.capLabels=[k("editor.cap.butt"),k("editor.cap.round"),k("editor.cap.square")],S.joins=["bevel","round","miter"],S.joinLabels=[k("editor.join.bevel"),k("editor.join.round"),k("editor.join.miter")],S.directions=["h","v"],S.directionLabels=[k("editor.direction.h"),k("editor.direction.v")],S.orientations=["top","right","bottom","left"],S.orientationLabels=[k("editor.orientation.top"),k("editor.orientation.right"),k("editor.orientation.bottom"),k("editor.orientation.left")],S.columnChartTypes=["columnChart","stackedColumnChart","percentageColumnChart"],S.columnChartTypeLabels=[k("editor.columncharttype.columnchart"),k("editor.columncharttype.stackedcolumnchart"),k("editor.columncharttype.percentagecolumnchart")],S.gradients=jW.config.gradients,S.shapes=[void 0,"rect","circle","oval","roundRect","star","pentagram","triangle","hexagon","pentagon","diamond","rightTriangle","parallelogram","trapezoid","polygon","arc"],S.shapeLabels=[],S.shapeIcons=[],S.shapes.forEach(function(q){q?(S.shapeLabels.push(k("editor.comptype."+q.toLowerCase())),S.shapeIcons.push({width:16,height:16,comps:[{type:q,rect:[2,4,12,8],borderWidth:1,borderColor:jW.config.color_dark}]})):(S.shapeLabels.push(""),S.shapeIcons.push({width:16,height:16,comps:[]}))}),S.selectTypes=["shadow","rect","circle","oval","roundRect"],S.selectTypeLabels=[],S.selectTypeIcons=[],S.selectTypes.forEach(function(q){"shadow"===q?(S.selectTypeLabels.push(k("editor.shadow")),S.selectTypeIcons.push({width:16,height:16,comps:[]})):(S.selectTypeLabels.push(k("editor.comptype."+q.toLowerCase())),S.selectTypeIcons.push({width:16,height:16,comps:[{type:q,rect:[2,4,12,8],borderWidth:1,borderColor:jW.config.color_dark}]}))}),S.displayConnectActionTypes=jW.config.displayConnectActionTypes,S.displayConnectActionTypeLabels=[],S.displayConnectActionTypes.forEach(function(q){var W=q?q.toLowerCase():"none";S.displayConnectActionTypeLabels.push(k("editor.connectactiontype."+W,!0)||k(q))}),S.symbolConnectActionTypes=jW.config.symbolConnectActionTypes,S.symbolConnectActionTypeLabels=[],S.symbolConnectActionTypes.forEach(function(q){var W=q?q.toLowerCase():"none";S.symbolConnectActionTypeLabels.push(k("editor.connectactiontype."+W,!0)||k(q))}),S.vLayoutValues=[void 0,"top","bottom","topbottom","center","scale"],S.vLayoutLabels=[k("editor.layout.none"),k("editor.layout.top"),k("editor.layout.bottom"),k("editor.layout.topbottom"),k("editor.layout.center"),k("editor.layout.scale")],S.hLayoutValues=[void 0,"left","right","leftright","center","scale"],S.hLayoutLabels=[k("editor.layout.none"),k("editor.layout.left"),k("editor.layout.right"),k("editor.layout.leftright"),k("editor.layout.center"),k("editor.layout.scale")],S.fullscreenValues=[void 0,"fill","uniform"],S.fullscreenLabels=[k("editor.layout.none"),k("editor.stretch.fill"),k("editor.stretch.uniform")],S.fullscreenLockValues=[!1,"h","v"],S.fullscreenLockLabels=[k("editor.layout.none"),k("editor.direction.h"),k("editor.direction.v")]}String.prototype.startsWith||(String.prototype.startsWith=function(S,q){return q=q||0,this.substr(q,S.length)===S}),String.prototype.endsWith||(String.prototype.endsWith=function(S,q){var W=this.toString();("number"!=typeof q||!isFinite(q)||Math.floor(q)!==q||q>W.length)&&(q=W.length),q-=S.length;var Z=W.lastIndexOf(S,q);return-1!==Z&&Z===q});var hq=window.hteditor_config||{},Iq=function(S,q){void 0===hq[S]&&(hq[S]=q)};Iq("color_select","#45C4F9"),Iq("color_select_dark","#39B0E4"),Iq("color_pane","#FFFFFF"),Iq("color_pane_dark","#F7F7F7"),Iq("color_line","#E4E4E4"),Iq("color_dark","#2C2C2C"),Iq("color_light","white"),Iq("color_data_border","#979797"),Iq("color_data_background","#D8D8D8"),Iq("color_transparent","rgba(156,156,156,0.4)"),Iq("color_disabled","#8C8C8C"),Iq("color_guide","red"),Iq("color_hover","rgba(184,184,184,0.18)"),Iq("color_mask","rgba(84,110,125,0.30)");var SW=function(){var S=navigator.userAgent;return S.indexOf("compatible")>-1&&S.indexOf("MSIE")>-1||S.indexOf("Trident")>-1&&S.indexOf("rv:11.0")>-1}();if(Iq("logEditorInfo",!0),Iq("host",window.location.hostname),Iq("port",window.location.port),Iq("locale","en"),Iq("serviceClass",void 0),Iq("maxUndoRedoSteps",200),Iq("inspectorTitleHeight",void 0),Iq("inspectorTitleBackground",void 0),Iq("smallFont","10px arial, sans-serif"),Iq("boldFont","bold 12px arial, sans-serif"),Iq("leftSplitViewPosition",240),Iq("rightSplitViewPosition",-300),Iq("mainSplitViewPosition",-360),Iq("explorerSplitViewPosition",.4),Iq("requestDelay",100),Iq("imageSize",256),Iq("fileSize",50),Iq("maxFileSize",200),Iq("dragImageSize",50),Iq("dragImageOpacity",.7),Iq("animate",!0),Iq("fitPadding",20),Iq("fitContentForDisplayView",!0),Iq("fitContentForSymbolView",!0),Iq("rulerSize",16),Iq("edgeLoop",!0),Iq("pasteOffset",0),Iq("pasteToLastSelectedIndex",!1),Iq("continuousLayout",!0),Iq("maxZoom",50),Iq("minZoom",.01),Iq("detailFilter",{}),Iq("compactFilter",{}),Iq("customProperties",{}),Iq("displayRulerEnabled",!0),Iq("displayGridEnabled",!1),Iq("displayGridBlockSize",40),Iq("displayGridThickLinesEvery",10),Iq("displayGridThickColor","rgb(191, 191, 191)"),Iq("displayGridLightColor","rgba(191, 191, 191, 0.4)"),Iq("displayGridAngle",Math.PI/2),Iq("displayGridRotation",0),Iq("displayGridZoomThreshold",.25),Iq("displayGridAlignmentGuideColor",hq.color_guide),Iq("displayGridAlignmentGuideEnabled",!0),Iq("displayAnchorEnabled",!0),Iq("displayGuideLineEnabled",!0),Iq("displayHighlightEnabled",!0),Iq("displayHighlightColor",hq.color_select),Iq("displayHighlightBorderWidth",1),Iq("displayHighlightBorderPattern",[1,4]),Iq("symbolRulerEnabled",!0),Iq("symbolGridEnabled",!1),Iq("symbolGridBlockSize",1),Iq("symbolGridThickLinesEvery",20),Iq("symbolGridThickColor","rgb(191, 191, 191)"),Iq("symbolGridLightColor","rgba(191, 191, 191, 0.2)"),Iq("symbolGridAngle",Math.PI/2),Iq("symbolGridRotation",0),Iq("symbolGridZoomThreshold",.25),Iq("symbolGridAlignmentGuideColor",hq.color_guide),Iq("symbolGridAlignmentGuideEnabled",!0),Iq("symbolAnchorEnabled",!0),Iq("symbolGuideLineEnabled",!0),Iq("symbolHighlightEnabled",!0),Iq("symbolHighlightColor",hq.color_select),Iq("symbolHighlightBorderWidth",1),Iq("symbolHighlightBorderPattern",[1,4]),Iq("maxStringLength",1e6),Iq("maxFileNameLength",100),Iq("traceMissingI18n",!1),Iq("container",void 0),Iq("continuousCreating",!1),Iq("valueTypes",{}),Iq("indent",94),Iq("indent2",68),Iq("clearDataBindingsBeforeImporting",!0),Iq("insertDisplayViewAsRefGraph",!1),Iq("displayPreviewURL","display.html"),Iq("symbolPreviewURL","symbol.html"),Iq("removeFileByKeyboardEnabled",!1),Iq("locateFileEnabled",!0),Iq("promptBeforeClosing",!0),Iq("displaysVisible",!0),Iq("symbolsVisible",!0),Iq("componentsVisible",!0),Iq("scenesVisible",!1),Iq("modelsVisible",!1),Iq("uisVisible",!1),Iq("assetsVisible",!0),Iq("displaysEditable",!0),Iq("symbolsEditable",!0),Iq("componentsEditable",!0),Iq("scenesEditable",!0),Iq("modelsEditable",!0),Iq("assetsEditable",!0),Iq("settingDefaultValueBeforeSaving",!1),Iq("svgSegments",20),Iq("svgMinimumFontSize",12),Iq("svgWaitingTime",600),Iq("importConfirm",!0),Iq("newIfFailToOpen",!0),Iq("dataBindings",{}),Iq("dataBindingsForSymbol",{}),Iq("useCodeEditor",!SW),Iq("codeEditorClass",void 0),Iq("convertCodeEditorOption",void 0),Iq("fontPreview","Hightopo"),Iq("checkForFileChanges",!0),Iq("checkForFileChangesInterval",3e3),Iq("cloneAttr",!0),Iq("cloneStyle",!0),Iq("cloneName",!0),Iq("cloneDisplayName",!0),Iq("cloneToolTip",!0),Iq("cloneTag",!0),Iq("cloneIcon",!0),Iq("cloneLayer",!0),Iq("cloneParent",!0),Iq("cloneDataBindings",!0),Iq("cloneSource",!0),Iq("cloneTarget",!0),Iq("cloneExpanded",!0),Iq("cloneClickThroughEnabled",!0),Iq("cloneSyncSize",!0),Iq("cloneRef",!0),Iq("clonePoints",!0),Iq("cloneSegments",!0),Iq("cloneThickness",!0),Iq("cloneClosePath",!0),Iq("cloneRotation",!0),Iq("clonePosition",!0),Iq("cloneSize",!0),Iq("cloneScale",!0),Iq("cloneAnchor",!0),Iq("cloneImage",!0),Iq("cloneHost",!0),Iq("isOpenable",null),Iq("dialogTitleBackground",null),Iq("componentViewSize",{width:900,height:600}),Iq("eventViewSize",{width:600,height:600}),Iq("fontViewSize",{width:500,height:400}),Iq("functionViewSize",{width:700,height:600}),Iq("objectViewSize",{width:500,height:400}),Iq("textViewSize",{width:500,height:400}),Iq("attachPointsViewSize",{width:700,height:500}),Iq("drawAccordionTitle",null),Iq("accordionMutex",!1),Iq("importDataBindingsButtonVisible",!0),Iq("saveSymbolCustomPropertyDefaultValue",!1),Iq("saveCompCustomPropertyDefaultValue",!1),Iq("deleteFileConfirm",!0),Iq("mixMaskAndBackground",!0),Iq("moveDummyThreshold",32),Iq("smartGuideThreshold",8),Iq("cadToDisplayBoundingType","Standard"),Iq("cadToSymbolBoundingType","Reset"),Iq("promptForMovingFile",!1),Iq("displayTreeVisibleFunc",null),Iq("symbolListVisibleFunc",null),Iq("onElementCreated",null),Iq("commonAndAdvancedFilterMode",!1),Iq("edgeTypes",[void 0,"points","boundary","flex2","ortho2","h.v2","v.h2","extend.north2","extend.south2","extend.west2","extend.east2"]),Iq("fileOpeners",{}),Iq("paramHandlers",{}),Iq("getToolTip",function(S,q){return null}),Iq("createFileTreeSortFunc",function(S){var q=S.explorer.rootDir,W=q+"/ht",Z=q+"/htdesign";return function(q,z){var k=q.url,Q=z.url;return k===Q?0:k===W?-1:Q===W?1:k===Z?-1:Q===Z?1:ht.Default.sortFunc(S.getLabel(q),S.getLabel(z))}}),Iq("explorerMode","treeList"),Iq("filterDisplayViewEnabled",!1),Iq("filterSymbolViewEnabled",!1),Iq("customAttachPointsColumns",null),Iq("isCopyCompsWhenNewState",!0),Iq("codeEditorTheme",null),Iq("accordionListIndent",0),Iq("copyFileByServer",!0),Iq("isDataBound",function(S,q,W){var Z=S.getDataBindings();return Z&&Z[q]&&Z[q][W]}),Iq("checkFileName",function(S,q){return!!S&&(!!(S=S.trim())&&(!/[!@?#$%^&*/]/.test(S)&&S))}),Iq("handleDefaultVauleColumnEdit",null),Iq("paletteColors",[["rgb(51,153,255)","#60ACFC","#32D3EB","rgb(93,217,174)","rgb(125,195,125)","rgb(255,235,195)","rgb(226,250,87)"],["#FEB64D","#FF7C7C","rgb(241,125,164)","rgb(204,104,166)","rgb(135,144,204)","rgb(145,115,205)","rgb(124,145,155)"],["rgb(48,242,120)","rgb(0,199,7)","rgb(242,83,75)","rgb(212,0,0)","rgb(240,225,19)","rgb(247,247,247)","rgb(61,61,61)"]]),Iq("gradients",[null,"linear.southwest","linear.southeast","linear.northwest","linear.northeast","linear.north","linear.south","linear.west","linear.east","radial.center","radial.southwest","radial.southeast","radial.northwest","radial.northeast","radial.north","radial.south","radial.west","radial.east","spread.horizontal","spread.vertical","spread.diagonal","spread.antidiagonal","spread.north","spread.south","spread.west","spread.east"]),hq.gradientIcons||(hq.gradientIcons=[],hq.gradients.forEach(function(S){S?hq.gradientIcons.push({width:20,height:14,comps:[{type:"rect",rect:[0,0,20,14],gradient:S,gradientColor:hq.color_line,background:hq.color_dark}]}):hq.gradientIcons.push({width:20,height:14,comps:[]})})),Iq("fontList",["SimSun","NSimSun","FangSong","KaiTi","FangSong_GB2312","Microsoft YaHei","cursive","monospace","serif","sans-serif","fantasy","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Bookman Old Style","Bradley Hand ITC","Century","Century Gothic","Comic Sans MS","Courier","Courier New","Georgia","Gentium","Impact","King","Lucida Console","Lalit","Modena","Monotype Corsiva","Papyrus","Tahoma","TeX","Times","Times New Roman","Trebuchet MS","Verdana","Verona","PingFangSC-Thin"]),Iq("ignoreFontDetection",!1),Iq("symbolStateEnabled",!1),Iq("layerEnabled",!0),Iq("layoutEnabled",!0),Iq("overviewEnabled",!0),Iq("dataViewEnabled",!0),Iq("gridAlignmentGuideEnabled",!1),Iq("expandedTitles",{}),["TitleBasic","TitleCustom","TitleBackground","TitleBorder","TitleText","TitleImage","TitleGroupBasic","TitleEdgeBasic","TitleArc","TitleDataBinding","TitleComponent","TitleShapeBackground","TitleShapeBorder","TitleGroupTitle","TitleEditingPoint","TitleChart"].forEach(function(S){null==hq.expandedTitles[S]&&(hq.expandedTitles[S]=!0)}),ht.Default.handleUnfoundImage=function(S,q){return ht.Default.getImage("editor.unknown")},Iq("displayConnectActionType",null),Iq("symbolConnectActionType",null),Iq("displayConnectActionTypes",[null,"copyStyle","host","parent"]),Iq("symbolConnectActionTypes",[null,"copyStyle"]),Iq("appendDisplayConnectActionTypes",null),Iq("appendSymbolConnectActionTypes",null),Iq("appendConnectActions",null),Iq("connectActions",{copyStyle:{action:function(S,q,W){if(W){var z=W.getStyleMap();for(var k in z)"shape"!==k&&"label"!==k&&"label2"!==k&&"note"!==k&&"note2"!==k&&"text"!==k&&q.s(k,Z(z[k]))}},extraInfo:{visible:function(S){return!0}}},host:{action:function(S,q,W){q instanceof ht.Node&&W instanceof ht.Node&&!q.s("fullscreen")&&q.setHost(W)},extraInfo:{delete:{visible:function(S){return S.sm().ld()instanceof ht.Node&&S.sm().ld().getHost()},action:function(S,q){q instanceof ht.Node&&q.setHost(void 0)}},visible:function(S){return S.sm().ld()instanceof ht.Node}}},parent:{action:function(S,q,W){W&&q.setParent(W)},extraInfo:{delete:{visible:function(S){return S.sm().ld().getParent()},action:function(S,q){q.setParent(void 0)}},visible:function(S){return!0}}}}),hq.appendDisplayConnectActionTypes&&hq.appendDisplayConnectActionTypes.forEach(function(S){hq.displayConnectActionTypes.push(S)}),hq.appendSymbolConnectActionTypes&&hq.appendSymbolConnectActionTypes.forEach(function(S){hq.symbolConnectActionTypes.push(S)}),hq.appendConnectActions)for(var qW in hq.appendConnectActions)hq.connectActions[qW]=hq.appendConnectActions[qW];for(var WW in hq.connectActions){var ZW=hq.connectActions[WW];ht.Default.setConnectAction(WW,ZW.action,ZW.extraInfo)}var zW=ht.Default.getToolTipDiv();zW.style.color=hq.color_dark,zW.style.background=hq.color_pane,ht.widget.ColorPicker.prototype._paletteColors=hq.paletteColors,ht.graph.GraphView.prototype._scrollBarColor=hq.color_transparent,ht.graph.GraphView.prototype._rectSelectBackground=hq.color_transparent,ht.graph.GraphView.prototype._rectSelectBorderColor=hq.color_select,ht.graph.GraphView.prototype.isLabelVisible=function(){return!0},ht.widget.ListView.prototype._scrollBarColor=hq.color_transparent,ht.widget.TreeView.prototype._scrollBarColor=hq.color_transparent,ht.widget.TableView.prototype._scrollBarColor=hq.color_transparent,ht.widget.TreeTableView.prototype._scrollBarColor=hq.color_transparent,ht.widget.PropertyView.prototype._scrollBarColor=hq.color_transparent,ht.widget.FormPane.prototype._scrollBarColor=hq.color_transparent,ht.widget.SplitView.prototype._dividerBackground=hq.color_line,ht.widget.SplitView.prototype._continuousLayout=hq.continuousLayout,ht.widget.ListView.prototype._selectBackground=hq.color_select,ht.widget.TreeView.prototype._selectBackground=hq.color_select,ht.widget.TableView.prototype._selectBackground=hq.color_select,ht.widget.TreeTableView.prototype._selectBackground=hq.color_select,ht.widget.TableHeader.prototype._columnLineColor=hq.color_line,ht.widget.TableHeader.prototype._insertColor=hq.color_select_dark,ht.widget.TableView.prototype._columnLineColor=hq.color_line,ht.widget.Toolbar.prototype._separatorColor=hq.color_line,ht.widget.Toolbar.prototype._itemGap=4,ht.widget.Button.prototype._labelColor=hq.color_light,ht.widget.Button.prototype._borderColor=null,ht.widget.Button.prototype._background=hq.color_select,ht.widget.Button.prototype._selectBackground=hq.color_select_dark,ht.widget.CheckBox.prototype._pressBackground=hq.color_pane_dark,ht.widget.ComboBox.prototype._selectBackground=hq.color_select,ht.widget.TabView.prototype._insertColor=hq.color_select_dark,ht.widget.TabView.prototype._selectWidth=0,ht.widget.TabView.prototype._selectBackground=hq.color_select,ht.widget.TabView.prototype._tabBackground=hq.color_dark,ht.widget.TabView.prototype.getTabBackground=function(S){return S==this.getCurrentTab()?hq.color_select:hq.color_dark},ht.widget.FormPane.prototype._hPadding=4,ht.widget.FormPane.prototype._vPadding=4,ht.widget.FormPane.prototype._hGap=4,ht.widget.FormPane.prototype._vGap=4,ht.widget.Slider.prototype._background=hq.color_dark,ht.widget.Slider.prototype._leftBackground=hq.color_select,ht.widget.Slider.prototype._button={width:14,height:14,comps:[{type:"circle",rect:[0,0,14,14],borderWidth:1,borderColor:hq.color_dark,background:hq.color_pane_dark}]},ht.widget.ComboBox.prototype._dropDownIcon=ht.widget.MultiComboBox.prototype._dropDownIcon={width:16,height:16,comps:[{type:"shape",points:[13,6,8,12,3,6],segments:[1,2,2],borderWidth:1,borderColor:hq.color_dark}]},ht.Default.comboBoxBorderColor=hq.color_line,ht.Default.textFieldBorderColor=hq.color_line,ht.Default.contextMenuHoverBackground=hq.color_select,ht.Default.contextMenuSeparatorColor=hq.color_line,ht.Default.dialogTitleBackground=hq.dialogTitleBackground||hq.color_dark,ht.Default.dialogButtonBackground=hq.color_select,ht.Default.dialogButtonSelectBackground=hq.color_select_dark,ht.Default.dialogHeaderBackground=hq.color_pane_dark,ht.Default.toolbarBackground=hq.color_pane_dark,ht.Default.tableHeaderBackground=hq.color_pane_dark,ht.Default.contextMenuLabelFont=ht.Default.labelFont,ht.Default.contextMenuBorderRadius=0,ht.Default.contextMenuBorderColor=hq.color_line,ht.Default.contextMenuSubmenuMark=">&nbsp;",ht.Default.contextMenuCheckIcon={width:16,height:16,comps:[{type:"shape",points:[13,3,7,12,4,8],borderWidth:1,borderColor:hq.color_dark}]},ht.Default.setImage("radioOn",{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:ht.Color.widgetIconBorder,background:"#FFF"},{type:"circle",rect:[4,4,8,8],background:hq.color_select}]}),ht.Default.setImage("expandIcon",{width:16,height:16,comps:[{type:"shape",points:[13,6,8,12,3,6],segments:[1,2,2],borderWidth:1,borderColor:hq.color_dark}]}),ht.Default.setImage("collapseIcon",{width:16,height:16,comps:[{type:"shape",points:[6,3,12,8,6,13],segments:[1,2,2],borderWidth:1,borderColor:hq.color_dark}]}),ht.widget.TreeView.prototype._expandIcon="expandIcon",ht.widget.TreeView.prototype._collapseIcon="collapseIcon",ht.widget.TreeTableView.prototype._expandIcon="expandIcon",ht.widget.TreeTableView.prototype._collapseIcon="collapseIcon";var kW=ht.widget.TextArea.prototype.setEditable;ht.widget.TextField.prototype.setEditable=ht.widget.TextArea.prototype.setEditable=function(S){kW.call(this,S);var q=this._element;q.style.color=S?ht.Default.labelColor:hq.color_disabled},ht.Default.onElementCreated=function(S){("INPUT"===S.tagName&&"button"!==S.type||"TEXTAREA"===S.tagName)&&(S.style.border=hq.color_line+" solid 1px",S.style.outline=0,S.style.padding="2px","TEXTAREA"===S.tagName&&(S.style.whiteSpace="pre",S.setAttribute("spellcheck","false")),S.addEventListener("focus",function(q){S.oldBorder=S.style.border,S.style.border=hq.color_select+" solid 1px","INPUT"===S.tagName&&requestAnimationFrame(function(){S.select()}),"TEXTAREA"===S.tagName&&(S.style.zIndex="1")},!1),S.addEventListener("blur",function(q){S.style.border=S.oldBorder,"TEXTAREA"===S.tagName&&(S.style.zIndex="")},!1),hq.onElementCreated&&hq.onElementCreated(S))},ht.Default.onWidgetColorPickerCreated=function(q){for(var W=hq.color_line+" solid 1px",Z=q.getView(),z=Z.querySelectorAll(".colorPalette"),k=0;k<z.length;k++)z[k].style.border=W;Z.querySelector(".satval").style.border=W,Z.querySelector(".hue_image").style.border=W,Z.querySelector(".preview").style.border=W,z=Z.querySelectorAll('input[type="button"]');for(var Q=0;Q<z.length;Q++){var U=z[Q];U.style.border=W,U.style.background="none",U.style.outline="none",U.style.width="30px",U.addEventListener("mouseover",function(S){S.target.style.background=hq.color_hover},!1),U.addEventListener("mouseout",function(S){S.target.style.background="none"},!1)}z=Z.querySelectorAll("span");for(var u=0;u<z.length;u++)S(q,Z,z[u])},ht.Default.handleUnfoundImage=function(S,q){return ht.Default.getImage("editor.unknown")},hq.configStudio&&hq.configStudio();var QW=(function(){function S(S){this.value=S}function q(q){function W(S,q){return new Promise(function(W,z){var U={key:S,arg:q,resolve:W,reject:z,next:null};Q?Q=Q.next=U:(k=Q=U,Z(S,q))})}function Z(W,k){try{var Q=q[W](k),U=Q.value;U instanceof S?Promise.resolve(U.value).then(function(S){Z("next",S)},function(S){Z("throw",S)}):z(Q.done?"return":"normal",Q.value)}catch(S){z("throw",S)}}function z(S,q){switch(S){case"return":k.resolve({value:q,done:!0});break;case"throw":k.reject(q);break;default:k.resolve({value:q,done:!1})}k=k.next,k?Z(k.key,k.arg):Q=null}var k,Q;this._invoke=W,"function"!=typeof q.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(q.prototype[Symbol.asyncIterator]=function(){return this}),q.prototype.next=function(S){return this._invoke("next",S)},q.prototype.throw=function(S){return this._invoke("throw",S)},q.prototype.return=function(S){return this._invoke("return",S)}}(),function(S,q){if(!(S instanceof q))throw new TypeError("Cannot call a class as a function")}),UW=function(){function S(S,q){for(var W=0;W<q.length;W++){var Z=q[W];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(S,Z.key,Z)}}return function(q,W,Z){return W&&S(q.prototype,W),Z&&S(q,Z),q}}(),uW=function(S,q){if("function"!=typeof q&&null!==q)throw new TypeError("Super expression must either be null or a function, not "+typeof q);S.prototype=Object.create(q&&q.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(S,q):S.__proto__=q)},DW=function(S,q){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!q||"object"!=typeof q&&"function"!=typeof q?S:q},GW=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this,W));return Z.callback=void 0,Z}return uW(q,S),q.prototype.onShown=function(){yW.indexOf(this)>=0||yW.push(this)},q.prototype.onHidden=function(){D(yW,this)},q.prototype.hide=function(){S.prototype.hide.call(this),this.callback&&this.callback()},q}(ht.widget.Dialog),bW=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this,W));return Z.getView().style.background=jW.config.color_pane,Z}return uW(q,S),q.prototype.addLine=function(){this.addRow([],[.1],1.01,{background:jW.config.color_line})},q.prototype.addTitle=function(S){var q=[{element:S,font:jW.config.boldFont}],W={background:jW.config.color_pane_dark};this.addRow(q,[.1],null,W)},q.prototype.getRowIndex=function(S){return this.getRows().indexOf(S)},q}(ht.widget.FormPane),vW=function(){function S(q){if(QW(this,S),this.config=q,this._editable=!0,jW.config.useCodeEditor){(this._view=document.createElement("div")).style.position="absolute"}else this._monacoEditor=new ht.widget.TextArea,this._view=this._monacoEditor.getView(),q&&q.value&&this._monacoEditor.setValue(q.value)}return S.prototype.getView=function(){return this._view},S.prototype.setValue=function(S){void 0!==S&&null!==S||(S=""),this.monacoEditor&&this.monacoEditor.setValue(S)},S.prototype.getValue=function(){return this.monacoEditor&&this.monacoEditor.getValue()},S.prototype.layout=function(){this.monacoEditor&&(this.monacoEditor.layout(),this.isEditable()||this._monacoEditor instanceof ht.widget.TextArea||this.getView().appendChild(this._editableLayer))},S.prototype.invalidate=function(){this.layoutLater()},S.prototype.iv=function(){this.invalidate()},S.prototype.layoutLater=function(S){var q=this;setTimeout(function(){q.layout()},S||300)},S.prototype.setEditable=function(S){var q=this;if(this._monacoEditor instanceof ht.widget.TextArea)return void this._monacoEditor.setEditable(S);if(this._editable!==S){this._timer&&(clearTimeout(this._timer),delete this._timer);var W=this._editableLayer;S?W.parentNode&&W.parentNode.removeChild(W):this._timer=setTimeout(function(){delete q._timer,q.getView().appendChild(W)},10),this._editable=S,this._monacoEditor&&this._monacoEditor.updateOptions({readOnly:!S})}},S.prototype.isEditable=function(){return this._monacoEditor instanceof ht.widget.TextArea?this._monacoEditor.isEditable():this._editable},UW(S,[{key:"monacoEditor",get:function(){if(!this._monacoEditor&&window.monaco){var S=jW.config.convertCodeEditorOption,q=this.config||{value:"",language:"javascript",theme:jW.config.codeEditorTheme,readOnly:!this._editable,minimap:{enabled:!1}};S&&S(q),this._monacoEditor=monaco.editor.create(this._view,q)}return this._monacoEditor}},{key:"_editableLayer",get:function(){if(this.__editableLayer)return this.__editableLayer;var S=this.__editableLayer=document.createElement("div"),q=S.style;return q.backgroundColor=ht.Default.disabledBackground||"rgba( 255, 255, 255, 0.3)",q.position="absolute",q.cursor="not-allow",q.top=0,q.right=0,q.bottom=0,q.left=0,q.pointerEvents="none",S}}]),S}(),jW={strings:{},customStrings:{},config:hq},iW=["onClick","onDoubleClick","onContextMenu","onDown","onUp","onMove","onEnter","onHover","onLeave","onBeginDrag","onDrag","onEndDrag","onScroll"],nW="unknow",PW="root",RW="dir",_W="asset",xW="symbol",KW="display",dW="component",NW="model",mW="scene",tW="ui",VW="tile",CW="list",OW="accordion",eW="__ht__dataModel",LW=/^attr@/,$W=/firefox/.test(window.navigator.userAgent.toLowerCase()),yW=[],cW={width:16,height:16,comps:[]},XW={display:{},symbol:{},data:{},comp:{},scene:{},data3d:{}},fW=new ht.List([{x:50,y:75},{x:25,y:75},{x:25,y:25},{x:75,y:25},{x:75,y:75},{x:65,y:60},{x:75,y:75},{x:85,y:60}]),JW=new ht.List([1,2,2,2,2,2,1,2]);ht.Default.setImage("check",{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:jW.config.color_line},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:{func:function(S,q){if(S&&q&&q.getRowSize&&q.isSelected){var W=q.isSelected(S);if(q.isCheckMode&&q.getFocusData){var Z=q.isCheckMode();W=W&&!Z||S===q.getFocusData()&&Z}if(W)return jW.config.color_line}return jW.config.color_select}}}]}),ht.Default.setImage("uncheck",{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:jW.config.color_line}]}),ht.Default.setImage("text_icon",{width:16,height:16,comps:[{type:"shape",points:[3,14,8,2,13,14,5,9,11,9],segments:[1,2,2,1,2],borderColor:jW.config.color_dark,borderWidth:1}]}),ht.Default.setImage("refGraph_icon",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:jW.config.color_dark,rotation:.7854,points:[12.90381,7.59615,12.90381,7.59615,12.90381,4.61619,12.90381,3.59619,12.90381,2.57619,11.72047,1.59619,10.40381,1.59619,9.08714,1.59619,7.90381,2.61619,7.90381,3.59619,7.90381,4.35799,7.90381,7.59615,7.90381,7.59615,7.90381,7.59615,7.90381,9.59619,10.40381,9.59619],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:jW.config.color_dark,rotation:-2.35619,points:[8.21091,12.28904,8.21091,12.28904,8.21091,9.30909,8.21091,8.28909,8.21091,7.26909,7.02758,6.28909,5.71091,6.28909,4.39425,6.28909,3.21091,7.30909,3.21091,8.28909,3.21091,9.05088,3.21091,12.28904,3.21091,12.28904,3.21091,12.28904,3.21091,14.28909,5.71091,14.28909],segments:[1,4,4,4,4,4]}]}),ht.Default.setImage("editor.unknown",{width:200,height:200,textureCache:!0,comps:[{type:"roundRect",background:"rgb(247,247,247)",borderColor:"#979797",cornerRadius:20,selectable:!1,rect:[0,0,200,200]},{type:"shape",background:"rgba(255,170,79,0.63)",borderColor:"rgb(124,145,155)",points:[35.92101,125.8927,70.22338,97.87611,96.05685,117.16025,108.79166,106.08902,115.70485,111.45559,92.40971,145.02116,35.92101,145.02116,35.92101,130.19911]},{type:"shape",background:"rgba(255,170,79,0.63)",borderColor:"rgb(124,145,155)",points:[143.94195,74.95345,121.52647,95.32915,136.08054,112.06633,115.341,146.63224,166.86461,146.63224,166.86461,103.69774]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",displayName:"\u4e0d\u89c4\u5219\u56fe\u5f62",closePath:!0,points:[86.52393,81.40417,110.5868,43.51795,35.32634,43.51795,35.32634,146.93709,93.17962,146.93709,117.24248,111.09877,86.52393,81.40417]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",closePath:!0,points:[105.77896,81.40417,129.84183,43.51795,168.08039,43.51795,168.08039,146.93709,112.43465,146.93709,136.49752,111.09877,105.77896,81.40417]},{type:"shape",borderWidth:4,
borderColor:"rgb(124,145,155)",points:[35.92101,126.00861,70.52846,96.60621,95.13328,116.95012,108.45973,104.311]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",points:[122.25418,94.2376,144.08528,74.22575,168.32002,106.08902]},{type:"oval",background:"#FF7C7C",borderWidth:4,borderColor:"rgb(124,145,155)",rect:[56.57448,66.67972,14,14]}]}),ht.Default.setImage("editor.root",{width:30,height:30,fitSize:!0,comps:[{type:"shape",points:[23,8,8,23],segments:[1,2],borderWidth:1,borderColor:"white"}]}),ht.Default.setImage("editor.display",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:jW.config.color_light,rect:[6,1,4,4.00837]},{type:"circle",borderWidth:1,borderColor:jW.config.color_light,rect:[11,10.99163,4,4.00837]},{type:"shape",borderWidth:1,borderColor:jW.config.color_light,points:[2.98235,11.0795,2.98235,8,7.89475,8,7.89475,5.00837,7.89475,8,13,8,13,11]},{type:"circle",borderWidth:1,borderColor:jW.config.color_light,rect:[1,10.99163,4,4.00837]}]}),ht.Default.setImage("editor.symbol",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:jW.config.color_light,rect:[0,2,10,8]},{type:"rect",borderWidth:1,borderColor:jW.config.color_light,rect:[5,6,10,8]}]}),ht.Default.setImage("editor.filter",{background:"rgb(130,130,130)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",closePath:!0,points:[2,1.5,14,1.5,9.50949,5.5,9.50949,9.5,13,9.5,9.50949,9.5,9.50949,11.5,12,11.5,9.50949,11.5,9.50949,14.5,6.5335,12.5,6.5335,5.5,2,1.5]}]}),ht.Default.setImage("editor.bind",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:"white",borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}]}),ht.Default.setImage("editor.unbind",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:.7854,points:[13.49999,7.03553,13.49999,7.03553,13.49999,5.05554,13.49999,4.03553,13.49999,3.01553,12.31666,2.03553,10.99999,2.03553,9.68333,2.03553,8.49999,3.05553,8.49999,4.03553,8.49999,5.01553,8.49999,7.03553,8.49999,7.03553],segments:[1,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.92699,points:[7.28554,13.25761,7.28554,13.25761,7.28554,11.27761,7.28554,10.2576,7.28554,9.23761,6.1022,8.25761,4.78554,8.25761,3.46887,8.25761,2.28554,9.2776,2.28554,10.2576,2.28554,11.2376,2.28554,13.25761,2.28554,13.25761],segments:[1,4,4,4,4]}]}),ht.Default.setImage("editor.dircollapsed",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,204,153)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[14.5,14.5,.5,14.5,.5,1.50001,6.5,1.50001,7.5,3.50001,14.5,3.50001,14.5,14.5]},{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[.5,5.50001,14.5,5.50001,14.5,14.50001,.5,14.50001,.5,5.50001]}]}),ht.Default.setImage("editor.direxpanded",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(51,153,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[2.35891,10.47175,3.3125,6.30284,15.5,6.30284,13.625,14.5,.5,14.5,.5,1.5,6.125,1.5,7.0625,3.2289,12.6875,3.2289,12.6875,6.30284]}]}),ht.Default.setImage("editor.dir",{background:"rgb(227,227,227)",width:20,height:20,fitSize:!0,cacheRule:!0,comps:[{type:"shape",background:"#FFCC99",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[19,4,19,18,1,18,1,2,8.71429,2,10,4,19,4]},{type:"rect",shadow:!0,shadowColor:"rgba(0,0,0,0.4)",shadowBlur:2,shadowOffsetX:0,shadowOffsetY:1,background:"rgb(255,255,255)",borderColor:"#979797",rotation:6.28319,rect:[2.98273,5.998,13.98346,9.99004]},{type:"shape",background:"rgba(255,255,153,0.3)",borderColor:"rgb(255,255,255)",borderCap:"round",points:[18,9,18,17,2,17,2,9,18,9]},{type:"rect",shadowColor:"rgb(0,0,0)",shadowBlur:2,shadowOffsetX:0,shadowOffsetY:1,background:"rgb(232,230,230)",borderColor:"#979797",rotation:6.28319,rect:[4,7,11.98532,1.06039]}]}),ht.Default.setImage("editor.dxf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[25.13334,60.62742,20.38001,60.62742,20.11302,60.62742,19.89504,60.41688,19.89504,60.15453,19.89504,43.31796,19.89504,43.05561,20.11302,42.84507,20.38001,42.84507,25.13334,42.84507,30.66329,42.84507,33.35167,45.67873,33.35167,51.50916,33.35167,57.47593,30.51009,60.62742,25.13334,60.62742,25.13334,60.62742,23.32783,57.5939,25.03463,57.5939,28.43349,57.5939,29.82018,55.90554,29.82018,51.77117,29.82018,47.64415,28.35946,45.88193,24.93627,45.88193,23.32783,45.88193,23.32783,57.5939,23.32783,57.5939],segments:[1,2,4,2,4,2,4,4,2,1,2,4,4,2,2,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[48.10416,60.62742,45.1488,60.62742,44.97846,60.62742,44.82286,60.54254,44.73581,60.40217,40.95446,54.3465,37.26771,60.39482,37.1786,60.53886,37.01957,60.62776,36.84889,60.62776,34.01657,60.62776,33.84041,60.62776,33.67761,60.53552,33.59227,60.38379,33.50693,60.2324,33.51275,60.04759,33.60735,59.89987,39.05608,51.53522,33.90312,43.56961,33.80853,43.42557,33.8027,43.24076,33.88804,43.08937,33.97338,42.93797,34.13618,42.8454,34.31235,42.8454,37.31706,42.8454,37.4874,42.8454,37.64677,42.93396,37.73382,43.078,41.14399,48.68284,44.48219,43.08168,44.56924,42.93396,44.72861,42.84507,44.90272,42.84507,47.73299,42.84507,47.91121,42.84507,48.074,42.93731,48.15729,43.08903,48.24434,43.24042,48.2368,43.42524,48.14221,43.56928,43.03826,51.48342,48.51339,59.89987,48.60798,60.04759,48.61552,60.2324,48.52847,60.38379,48.44518,60.53485,48.28238,60.62742,48.10416,60.62742,48.10416,60.62742],segments:[1,2,4,2,2,4,2,4,4,2,2,4,4,2,4,2,2,4,2,4,4,2,2,4,4,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]}]}),ht.Default.setImage("editor.obj",{width:64,height:64,fitSize:!0,attachStyle:"close",comps:[{type:"shape",background:"rgb(0,0,0)",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[31.21904,47.49025,32.38182,48.81914,33.04627,50.64637,33.04627,52.80583,33.04627,54.96528,32.38182,56.79251,31.21904,58.12141,29.89014,59.4503,28.22903,60.28086,26.06957,60.28086,23.91012,60.28086,22.249,59.61642,20.9201,58.12141,19.75732,56.79251,19.09287,54.96528,19.09287,52.80583,19.09287,50.64637,19.59121,48.81914,20.9201,47.49025,22.08289,45.99524,23.91012,45.33079,26.06957,45.33079,28.22903,45.33079,30.05626,45.99524,31.21904,47.49025,22.58122,48.81914,21.75066,49.81582,21.41844,51.14471,21.41844,52.80583,21.41844,54.46695,21.75066,55.79584,22.58122,56.79251,23.41178,57.78919,24.57456,58.28752,26.06957,58.28752,27.56458,58.28752,28.72736,57.78919,29.55792,56.79251,30.38848,55.79584,30.7207,54.46695,30.7207,52.80583,30.7207,51.14471,30.22237,49.81582,29.55792,48.81914,28.72736,47.82247,27.56458,47.32414,26.06957,47.32414,24.57456,47.32414,23.41178,47.82247,22.58122,48.81914],segments:[1,4,4,4,4,4,4,4,4,5,1,4,4,4,4,4,4,4,4,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[41.68409,45.66302,43.01298,45.66302,44.17577,45.99524,45.00633,46.65969,45.83689,47.32414,46.16911,48.1547,46.16911,49.31748,46.16911,50.14804,46.003,50.81249,45.50466,51.31082,45.17244,51.80916,44.50799,52.30749,43.84354,52.47361,44.84021,52.63972,45.50466,52.97194,46.003,53.63639,46.50133,54.13472,46.66745,54.96528,46.66745,55.96195,46.66745,57.45696,46.16911,58.45363,45.17244,59.11808,44.34188,59.61642,43.1791,59.94864,41.68409,59.94864,35.20573,59.94864,35.20573,45.66302,41.68409,45.66302,37.36518,51.64305,41.18575,51.64305,42.18242,51.64305,42.84687,51.47693,43.34521,51.14471,43.84354,50.81249,44.00966,50.14804,44.00966,49.48359,44.00966,48.81914,43.84354,48.32081,43.34521,47.98858,42.84687,47.65636,42.18242,47.49025,41.18575,47.49025,37.36518,47.49025,37.36518,51.64305,37.36518,58.12141,41.35186,58.12141,42.34854,58.12141,43.01298,57.9553,43.51132,57.62307,44.17577,57.29085,44.50799,56.6264,44.50799,55.79584,44.50799,54.96528,44.17577,54.30084,43.67743,53.96861,43.1791,53.63639,42.34854,53.47028,41.35186,53.47028,37.19907,53.47028,37.19907,58.12141],segments:[1,4,4,4,4,4,4,4,4,2,2,2,5,1,2,4,4,4,4,2,2,5,1,2,4,4,4,4,2,2,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[56.80027,45.66302,56.80027,55.29751,56.80027,56.95863,56.46805,58.12141,55.8036,58.95197,54.97304,59.78253,53.81026,60.28086,52.14914,60.28086,50.65413,60.28086,49.65746,59.94864,48.99301,59.11808,48.16245,58.28752,47.83023,57.29085,47.83023,55.79584,47.83023,55.29751,49.98968,55.29751,49.98968,55.79584,49.98968,57.45696,50.65413,58.28752,52.14914,58.28752,52.9797,58.28752,53.64414,57.9553,53.97637,57.62307,54.30859,57.12474,54.4747,56.46029,54.4747,55.29751,54.4747,45.66302,56.80027,45.66302],segments:[1,2,4,4,4,4,2,2,2,4,4,4,2,2,5]}]}),ht.Default.setImage("editor.mtl",{width:64,height:64,fitSize:!0,attachStyle:"close",comps:[{type:"shape",background:"rgb(0,0,0)",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[21.55794,45.99697,26.66087,57.7337,26.66087,57.7337,31.7638,45.99697,34.31526,45.99697,34.31526,60.62536,32.10399,60.62536,32.10399,50.24941,32.10399,50.24941,27.68146,60.62536,25.81038,60.62536,21.38785,50.24941,21.38785,50.24941,21.38785,60.62536,19.00648,60.62536,19.00648,45.99697,21.55794,45.99697],segments:[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[48.09317,45.99697,48.09317,47.86804,43.16034,47.86804,43.16034,60.45527,40.94907,60.45527,40.94907,47.86804,36.01624,47.86804,36.01624,45.99697,48.09317,45.99697],segments:[1,2,2,2,2,2,2,2,2,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[52.00541,45.99697,52.00541,58.58419,60,58.58419,60,60.45527,49.79414,60.45527,49.79414,45.82687,52.00541,45.82687],segments:[1,2,2,2,2,2,2,5]}]}),ht.Default.setImage("editor.ui",{modified:"Thu Jun 04 2020 09:40:36 GMT+0800 (China Standard Time)",width:16,height:16,fitSize:!0,attachStyle:"close",comps:[{type:"shape",background:"rgb(0,0,0)",points:[14.84148,4.57262,10.64058,.11253,10.54173,.0064,10.39999,0,10.25216,0,1.90035,0,1.61181,0,1.35184,.11591,1.35184,.39404,1.35184,15.48836,1.35184,15.76649,1.6119,16,1.90035,16,6.28421,16,6.57276,16,7.02587,15.76649,7.02587,15.48836,7.02587,15.21023,6.57267,15.02222,6.28421,15.02222,2.36615,15.02222,2.36615,.97787,9.19027,.97787,9.19027,5.3048,9.19027,5.58293,9.47642,5.77787,9.76488,5.77787,13.89338,5.77787,13.89338,8.94755,13.89338,9.22569,14.15814,9.45067,14.44669,9.45067,14.73524,9.45067,15,9.2256,15,8.94755,15,4.88356,15,4.75973,14.92706,4.66507,14.84148,4.57262,14.84148,4.57262,10.29689,1.26427,13.62485,4.80009,10.29689,4.80009,10.29689,1.26427,10.29689,1.26427],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",borderWidth:.2,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[10.74059,12.112,10.74059,14.67455,10.74059,15.11636,10.6512,15.42564,10.47242,15.64655,10.24894,15.86746,9.93607,16,9.48912,16,9.08686,16,8.81868,15.91164,8.6399,15.69073,8.41643,15.46982,8.32704,15.20473,8.32704,14.80709,8.32704,12.112,8.90807,12.112,8.90807,14.80709,8.90807,15.24891,9.08686,15.46982,9.48912,15.46982,9.71259,15.46982,9.89137,15.38146,9.98077,15.29309,10.07016,15.16055,10.11485,14.98382,10.11485,14.67455,10.11485,12.112,10.74059,12.112,10.74059,12.112],segments:[1,2,4,4,4,4,2,2,2,4,4,4,2,2,2]},{type:"rect",background:"rgb(0,0,0)",borderColor:"#979797",rect:[11.65679,12.112,.82321,3.888]}]}),ht.Default.setImage("editor.ui-tab",{modified:"Thu Jun 04 2020 09:40:36 GMT+0800 (China Standard Time)",width:16,height:16,fitSize:!0,attachStyle:"close",comps:[{type:"shape",background:"rgb(255,255,255)",points:[14.84148,4.57262,10.64058,.11253,10.54173,.0064,10.39999,0,10.25216,0,1.90035,0,1.61181,0,1.35184,.11591,1.35184,.39404,1.35184,15.48836,1.35184,15.76649,1.6119,16,1.90035,16,6.28421,16,6.57276,16,7.02587,15.76649,7.02587,15.48836,7.02587,15.21023,6.57267,15.02222,6.28421,15.02222,2.36615,15.02222,2.36615,.97787,9.19027,.97787,9.19027,5.3048,9.19027,5.58293,9.47642,5.77787,9.76488,5.77787,13.89338,5.77787,13.89338,8.94755,13.89338,9.22569,14.15814,9.45067,14.44669,9.45067,14.73524,9.45067,15,9.2256,15,8.94755,15,4.88356,15,4.75973,14.92706,4.66507,14.84148,4.57262,14.84148,4.57262,10.29689,1.26427,13.62485,4.80009,10.29689,4.80009,10.29689,1.26427,10.29689,1.26427],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"rgb(255,255,255)",borderWidth:.2,borderColor:"rgb(255,255,255)",pixelPerfect:!0,points:[10.74059,12.112,10.74059,14.67455,10.74059,15.11636,10.6512,15.42564,10.47242,15.64655,10.24894,15.86746,9.93607,16,9.48912,16,9.08686,16,8.81868,15.91164,8.6399,15.69073,8.41643,15.46982,8.32704,15.20473,8.32704,14.80709,8.32704,12.112,8.90807,12.112,8.90807,14.80709,8.90807,15.24891,9.08686,15.46982,9.48912,15.46982,9.71259,15.46982,9.89137,15.38146,9.98077,15.29309,10.07016,15.16055,10.11485,14.98382,10.11485,14.67455,10.11485,12.112,10.74059,12.112,10.74059,12.112],segments:[1,2,4,4,4,4,2,2,2,4,4,4,2,2,2]},{type:"rect",background:"rgb(255,255,255)",rect:[11.65679,12.112,.82321,3.888]}]}),ht.Default.setImage("editor.ttf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",points:[41.52931,60.62742,39.04006,60.62742,38.77102,60.62742,38.5551,60.41688,38.5551,60.15453,38.5551,42.84507,46.88507,42.84507,47.15411,42.84507,47.37003,43.05561,47.37003,43.31796,47.37003,45.40904,47.37003,45.67138,47.15411,45.88193,46.88507,45.88193,42.01462,45.88193,42.01462,60.1542,42.01462,60.41688,41.79836,60.62742,41.52931,60.62742,41.52931,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[33.91988,42.84507,39.07014,42.84507,39.33918,42.84507,39.5551,43.05561,39.5551,43.31796,39.5551,45.40904,39.5551,45.67138,39.33918,45.88193,39.07014,45.88193,33.91988,45.88193],segments:[1,2,4,2,4,2]},{type:"shape",background:"#000000",points:[25.11617,60.62742,22.62692,60.62742,22.35788,60.62742,22.14196,60.41688,22.14196,60.15453,22.14196,42.84507,30.47192,42.84507,30.74096,42.84507,30.95688,43.05561,30.95688,43.31796,30.95688,45.40904,30.95688,45.67138,30.74096,45.88193,30.47192,45.88193,25.60148,45.88193,25.60148,60.1542,25.60148,60.41688,25.38522,60.62742,25.11617,60.62742,25.11617,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[17.50673,42.84507,22.657,42.84507,22.92604,42.84507,23.14196,43.05561,23.14196,43.31796,23.14196,45.40904,23.14196,45.67138,22.92604,45.88193,22.657,45.88193,17.50673,45.88193],segments:[1,2,4,2,4,2]}]}),ht.Default.setImage("editor.otf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",points:[41.52931,60.62742,39.04006,60.62742,38.77102,60.62742,38.5551,60.41688,38.5551,60.15453,38.5551,42.84507,46.88507,42.84507,47.15411,42.84507,47.37003,43.05561,47.37003,43.31796,47.37003,45.40904,47.37003,45.67138,47.15411,45.88193,46.88507,45.88193,42.01462,45.88193,42.01462,60.1542,42.01462,60.41688,41.79836,60.62742,41.52931,60.62742,41.52931,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[33.91988,42.84507,39.07014,42.84507,39.33918,42.84507,39.5551,43.05561,39.5551,43.31796,39.5551,45.40904,39.5551,45.67138,39.33918,45.88193,39.07014,45.88193,33.91988,45.88193],segments:[1,2,4,2,4,2]},{type:"oval",borderWidth:3.3,borderColor:"rgb(0,0,0)",rect:[18.97543,44.76232,11.82189,13.94784]}]}),ht.Default.setImage("editor.js",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"text",text:{func:"attr@name",value:"JS"},align:"center",font:"bold 24px Arial Rounded MT Bold",rect:[17.50673,40.58187,46.49327,23.41813]}]}),ht.Default.setImage("editor.sound",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#231815",points:[29.93506,40.65719,29.93506,52.11129,29.99768,52.17391,38.01482,58.31199,38.01482,53.06642,38.01482,39.70982,38.01482,34.45641,29.93506,40.65719,29.93506,40.65719,29.93506,40.65719,29.93506,40.65719,44.44257,36.03797,44.44257,36.03797,43.87107,35.70912,43.69881,34.9732,44.02766,34.40163,44.37211,33.84573,45.10803,33.65787,45.66393,33.99448,47.80131,35.26287,49.59417,37.09491,50.81553,39.2714,52.01338,41.37743,52.71019,43.80448,52.71019,46.38028,52.71019,48.95608,52.01338,51.38313,50.81553,53.48924,49.59417,55.65789,47.80131,57.49777,45.66393,58.77392,45.10803,59.1262,44.37211,58.93834,44.02766,58.35901,43.69881,57.79528,43.87107,57.05152,44.44257,56.7305,46.24326,55.65789,47.71518,54.13119,48.7486,52.32266,49.73508,50.57675,50.30665,48.55685,50.30665,46.38812,50.30665,44.23514,49.72724,42.19948,48.7486,40.46141,47.71518,38.63721,46.23542,37.10275,44.44257,36.03797,44.44257,36.03797,44.44257,36.03797,28.49449,40.89991,28.49449,40.89991,23.62472,40.89991,23.62472,51.86073,28.49449,51.86073,28.49449,40.89991,28.49449,40.89991,28.49449,40.89991,28.80767,38.51197,28.80767,38.51197,38.42189,31.14469,38.64118,30.96459,38.91517,30.86286,39.21267,30.86286,39.88597,30.86286,40.41052,31.38741,40.41052,32.05287,40.41052,39.70982,40.41052,39.97605,41.53008,40.43014,42.47745,41.16606,43.21337,42.09776,44.14506,43.28777,44.7088,44.76753,44.7088,46.38812,44.7088,48.00879,44.1529,49.50414,43.21337,50.67856,42.50096,51.61017,41.53008,52.33834,40.41052,52.80027,40.41052,53.07426,40.41052,60.72336,40.41052,60.99743,40.32439,61.24015,40.1678,61.45936,39.76073,61.97607,39.01698,62.07788,38.50019,61.67073,28.82334,54.25651,22.46606,54.25651,22.43471,54.25651,21.77708,54.25651,21.23686,53.72412,21.23686,53.06642,21.23686,39.73333,21.23686,39.70982,21.23686,39.04435,21.76924,38.51197,22.43471,38.51197,28.80767,38.51197,28.80767,38.51197,28.80767,38.51197,40.40269,41.5497,40.40269,41.5497,40.40269,51.21878,41.06823,50.85858,41.62405,50.37322,42.08598,49.79381,42.8219,48.86219,43.26039,47.6721,43.26039,46.38812,43.26039,45.11197,42.81414,43.92196,42.08598,42.98243,41.62405,42.39526,41.06039,41.90982,40.40269,41.5497,40.40269,41.5497,40.40269,41.5497],segments:[1,2,2,2,2,2,2,2,2,2,2,1,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,1,2,2,2,2,2,2,2,1,2,2,4,4,2,2,4,4,4,4,2,2,4,4,2,2,2,4,2,2,4,2,2,2,1,2,2,4,4,4,4,2,2]}]}),ht.Default.setImage("editor.video",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#231815",
points:[34.79567,39.50193,35.8771,39.50193,36.86394,39.06777,37.56645,38.36518,38.28485,37.63888,38.7269,36.65212,38.7269,35.57851,38.7269,34.497,38.28485,33.51024,37.56645,32.80765,36.86394,32.08933,35.86927,31.6472,34.79567,31.6472,33.70626,31.6472,32.7274,32.08933,32.0169,32.80765,31.30641,33.51024,30.86435,34.497,30.86435,35.57851,30.86435,36.65212,31.30641,37.63888,32.0169,38.36518,32.7274,39.05987,33.71416,39.50193,34.79567,39.50193,34.79567,39.50193,34.79567,39.50193,33.03527,33.81021,33.03527,33.81021,33.47733,33.36816,34.10098,33.08399,34.79567,33.08399,35.48246,33.08399,36.0982,33.36816,36.54816,33.81021,36.99022,34.26807,37.27438,34.88382,37.27438,35.57061,37.27438,36.2574,36.99022,36.87315,36.54816,37.33101,36.0982,37.76524,35.48246,38.0494,34.79567,38.0494,34.10098,38.0494,33.47733,37.76524,33.03527,37.33101,32.59314,36.87315,32.31687,36.2574,32.31687,35.57061,32.31687,34.88382,32.59314,34.27598,33.03527,33.81021,33.03527,33.81021,33.03527,33.81021,38.719,42.35963,38.719,42.35963,39.05848,43.38583,39.77688,44.19107,40.6768,44.64103,42.60298,45.61989,44.97913,44.84625,45.95008,42.92007,46.40794,42.02015,46.53422,40.94655,46.17901,39.92027,45.86323,38.89408,45.14484,38.08884,44.23702,37.63888,43.33711,37.18892,42.2714,37.06264,41.24513,37.40995,40.21894,37.74943,39.39789,38.46775,38.95583,39.35984,38.49007,40.25185,38.3796,41.32546,38.719,42.35963,38.719,42.35963,38.719,42.35963,40.24257,40.02292,40.24257,40.02292,40.53471,39.44669,41.04781,38.99665,41.68726,38.77563,42.33454,38.5704,43.02923,38.64144,43.58184,38.93351,44.15808,39.22558,44.60803,39.72295,44.82124,40.38604,45.03436,41.03339,44.96332,41.70438,44.67907,42.28851,44.06341,43.50428,42.55557,43.98577,41.33198,43.3543,40.77937,43.07005,40.30578,42.56486,40.10048,41.9175,39.87945,41.25442,39.9663,40.58343,40.24257,40.02292,40.24257,40.02292,40.24257,40.02292,40.13209,46.26716,40.13209,46.26716,39.16114,46.10935,38.09543,46.33828,37.21915,46.96976,36.34286,47.61711,35.80606,48.54073,35.65607,49.5354,35.65607,49.5354,35.50608,50.53006,35.71929,51.57996,36.35076,52.46415,36.98231,53.33245,37.89803,53.86926,38.89269,54.02714,38.9243,54.02714,41.04781,54.38235,43.08447,52.8904,43.42395,50.76689,43.42395,50.75899,43.56604,49.76433,43.34501,48.71435,42.71346,47.84604,42.06618,46.96976,41.14256,46.42505,40.13209,46.26716,40.13209,46.26716,40.13209,46.26716,39.14533,52.60623,39.14533,52.60623,39.12953,52.59833,38.49797,52.49568,37.91384,52.1641,37.51912,51.61157,37.1244,51.05896,36.97441,50.38798,37.07706,49.75642,37.17181,49.13278,37.51912,48.54073,38.07172,48.13021,38.62433,47.73549,39.30322,47.60131,39.93469,47.69606,40.55044,47.79081,41.15046,48.13021,41.5451,48.69072,41.94772,49.24333,42.08981,49.91431,41.98724,50.53796,41.77403,51.87993,40.4794,52.81936,39.14533,52.60623,39.14533,52.60623,39.14533,52.60623,49.24984,57.84791,49.24984,57.84791,41.37939,57.84791,46.82629,55.31388,50.46553,49.76433,50.46553,43.63056,50.46553,39.30453,48.70514,35.38909,45.86323,32.54719,43.03714,29.72109,39.12162,27.9607,34.79567,27.9607,26.1594,27.9607,19.12572,34.99437,19.12572,43.63056,19.12572,47.94079,20.88612,51.87993,23.71222,54.69813,26.54622,57.54003,30.46963,59.30043,34.79567,59.30043,35.20611,59.30043,35.29296,59.30043,49.24984,59.30043,49.64456,59.30043,49.96816,58.96893,49.96816,58.57421,49.96816,58.17158,49.64456,57.84791,49.24984,57.84791,49.24984,57.84791,49.24984,57.84791,34.79567,56.88485,34.79567,56.88485,31.13271,56.88485,27.81723,55.39282,25.42528,53.00087,23.01761,50.5853,21.54138,47.28553,21.54138,43.62266,21.54138,36.34425,27.51725,30.36837,34.79567,30.36837,38.45064,30.36837,41.77403,31.8525,44.15808,34.25227,46.56583,36.64422,48.04206,39.96769,48.04206,43.62266,48.04206,47.28553,46.55793,50.6011,44.16598,53.00087,41.68726,55.48757,38.30856,56.88485,34.79567,56.88485,34.79567,56.88485,34.79567,56.88485,28.91446,44.64103,28.91446,44.64103,29.80655,44.18317,30.54067,43.38583,30.86435,42.35173,31.19593,41.32546,31.08538,40.25976,30.63542,39.35984,29.67237,37.44156,27.25672,36.66002,25.35424,37.63888,23.42015,38.62564,22.64651,41.00178,23.62545,42.92007,24.07541,43.81998,24.88057,44.53838,25.90684,44.86206,26.94884,45.20146,28.02245,45.09889,28.91446,44.64103,28.91446,44.64103,28.91446,44.64103,26.3647,43.51211,26.3647,43.51211,25.71735,43.29108,25.20425,42.82532,24.91218,42.28069,24.29643,41.0492,24.79373,39.54136,26.00942,38.92561,27.22519,38.30986,28.73294,38.79143,29.34869,40.02292,29.63286,40.59134,29.7118,41.25442,29.50658,41.90178,29.28555,42.54905,28.81979,43.06215,28.27509,43.34639,27.69877,43.63056,27.01198,43.71741,26.3647,43.51211,26.3647,43.51211,26.3647,43.51211,29.44344,46.26716,29.44344,46.26716,27.31195,46.59874,25.85153,48.61178,26.17521,50.72738,26.17521,50.75899,26.33309,51.75365,26.8778,52.69308,27.73828,53.32455,28.59876,53.9561,29.66447,54.17713,30.62752,54.02714,30.66703,54.01924,32.80634,53.67194,34.25886,51.66681,33.92728,49.52749,33.60361,47.39609,31.58275,45.94356,29.44344,46.26716,29.44344,46.26716,29.44344,46.26716,32.50637,49.75642,32.50637,49.75642,32.7274,51.1063,31.80378,52.39303,30.44593,52.60623,30.4223,52.61413,29.79865,52.7009,29.13557,52.55091,28.59086,52.14837,28.04616,51.75365,27.69877,51.15371,27.5962,50.53006,27.5962,50.50635,27.3909,49.17229,28.33032,47.90128,29.66447,47.69606,31.00644,47.48293,32.29317,48.40655,32.50637,49.75642,32.50637,49.75642,32.50637,49.75642,32.50637,49.75642,37.44808,43.63056,37.44808,43.63056,37.44808,42.89644,37.1481,42.22537,36.67444,41.75171,36.18497,41.27022,35.52189,40.96235,34.79567,40.96235,34.06147,40.96235,33.39048,41.27022,32.90891,41.75171,32.43525,42.23328,32.14318,42.89644,32.14318,43.63056,32.14318,44.36469,32.43525,45.02785,32.90891,45.50933,33.39838,45.983,34.06147,46.28297,34.79567,46.28297,36.25609,46.28297,37.44808,45.08308,37.44808,43.63056,37.44808,43.63056,37.44808,43.63056,34.79567,44.83835,34.79567,44.83835,34.45619,44.83835,34.14831,44.71207,33.93519,44.49104,33.71416,44.28574,33.5878,43.96997,33.5878,43.63846,33.5878,43.31479,33.71416,42.99901,33.93519,42.77798,34.14831,42.56486,34.45619,42.42277,34.79567,42.42277,35.11927,42.42277,35.42714,42.55695,35.64817,42.77798,35.86927,42.99901,36.01136,43.31479,36.01136,43.63846,36.01136,44.30155,35.46665,44.83835,34.79567,44.83835,34.79567,44.83835,34.79567,44.83835],segments:[1,4,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,2,4,4,2,4,2,4,4,2,2,1,2,2,4,4,4,4,4,4,4,2,2,1,2,2,4,4,4,4,4,4,2,2,2,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,2,2,1,2,4,2,4,4,2,4,4,2,2,1,2,4,2,4,4,2,4,4,2,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2]}]}),ht.Default.setImage("editor.flipx",{width:16,height:16,comps:[{type:"shape",points:[8,1,8,14],segments:[1,2],borderWidth:1,borderColor:jW.config.color_dark},{type:"shape",points:[6,3,6,13,2,13],background:jW.config.color_dark},{type:"shape",points:[10,3,10,13,14,13],background:jW.config.color_select}]}),ht.Default.setImage("editor.flipy",{width:16,height:16,comps:[{type:"shape",points:[2,8,15,8],segments:[1,2],borderWidth:1,borderColor:jW.config.color_dark},{type:"shape",points:[3,6,13,6,3,2],background:jW.config.color_dark},{type:"shape",points:[3,10,13,10,3,14],background:jW.config.color_select}]}),ht.Default.setImage("editor.resetsize",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[8,1,8,6,6,3,8,1,10,3,8,10,8,15,6,13,8,15,10,13,1,8,6,8,3,6,1,8,3,10,10,8,15,8,13,6,15,8,13,10],segments:[1,2,1,2,2,1,2,1,2,2,1,2,1,2,2,1,2,1,2,2]}]}),ht.Default.setImage("editor.func",{width:16,height:16,comps:[{type:"border",rect:[0,0,16,16],width:1,color:"#E4E4E4"},{type:"text",rect:[0,0,16,16],text:"F",align:"center",color:"black"}]}),ht.Default.setImage("editor.comp",{fitSize:!0,comps:[{type:{func:function(S){return S.compType},isSafeFunc:!0}}]}),ht.Default.setImage("editor.oops",{width:128,height:128,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",rect:[21.53429,22.96531,88.8981,74.69064]},{type:"shape",background:"rgb(237,237,237)",borderColor:"#979797",points:[34.08079,87.52544,34.08079,87.52544,59.57908,97.75645,77.79215,90.58303,96.00522,83.40961,106.8249,68.87436,109.71641,51.69689,109.71641,51.69689,117.89865,74.48774,101.34821,87.52544,84.79777,100.56314,59.50721,102.27801,46.42474,94.29524],segments:[1,4,4,4,4]},{type:"arc",background:"rgb(196,185,185)",borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[32.3979,36.49467,28.49791,18.12387]},{type:"arc",background:"rgb(196,185,185)",borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[68.95508,36.49467,28.49791,18.12387]},{type:"shape",background:"rgb(149,224,245)",borderColor:"#979797",points:[39.9814,51.13901,39.9814,51.13901,32.00842,57.90113,30.56723,66.4088,29.12604,74.91647,34.21664,85.16969,34.21664,85.16969,39.0516,89.44677,39.0516,89.44677,36.05169,79.68945,37.3999,70.48443,38.74811,61.27941,44.44444,52.62669,44.44444,52.62669,39.9814,51.13901,39.9814,51.13901],segments:[1,4,4,2,4,4,2,2]},{type:"shape",background:"rgb(149,224,245)",borderColor:"#979797",scaleX:-1,points:[97.67259,49.56003,97.67259,49.56003,89.6996,57.90113,88.25841,66.4088,86.81722,74.91647,91.8398,85.99598,91.8398,85.99598,96.74279,89.44677,96.74279,89.44677,93.74288,79.68945,95.09109,70.48443,96.4393,61.27941,102.44264,50.50641,102.44264,50.50641,97.67259,49.56003],segments:[1,4,4,2,4,4,2]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[59.61377,32.055,59.61377,32.055,61.61221,36.91182,59.19747,38.71578,56.78274,40.51974,34.08079,42.18493,34.08079,42.18493],segments:[1,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",scaleX:-1,points:[94.48806,32.055,94.48806,32.055,96.4865,36.91182,94.07177,38.71578,91.65703,40.51974,68.95508,42.18493,68.95508,42.18493],segments:[1,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[67.02409,33.58143,67.02409,33.58143,64.9426,37.74441,67.02409,39.68714],segments:[1,4]},{type:"arc",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[68.95508,40.07324,28.49791,11.89121]},{type:"arc",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[32.3979,40.07323,28.49791,11.89121]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[60.89581,46.6003,56.70566,57.66949,39.6779,55.58118,39.6779,55.58118],segments:[1,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",scaleX:-1,points:[90.173,46.6003,85.98284,57.66949,68.95508,55.58118,68.95508,55.58118],segments:[1,4]},{type:"shape",background:"rgb(61,61,61)",borderColor:"#979797",points:[40.88134,45.66533,40.88134,50.44931,49.68823,51.31913,49.03586,45.66533,40.99007,45.5566]},{type:"shape",background:"rgb(61,61,61)",borderColor:"#979797",points:[78.31735,45.66533,78.31735,50.44931,87.12423,51.31913,86.47187,45.66533,78.42607,45.5566]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[36.81151,80.08117,46.71402,84.60188,54.03326,76.42155,61.35251,85.46297,73.83828,76.20628,86.96987,83.95607,93.85858,76.85209,99.24038,80.08117]},{type:"shape",background:"rgb(237,237,237)",borderColor:"rgb(61,61,61)",borderCap:"round",points:[95.58345,31.98512,95.58345,31.98512,104.33563,25.53184,105.97087,18.7394,107.6061,11.94695,113.65647,33.63444,105.97087,42.39888],segments:[1,4,4]},{type:"shape",background:"rgb(237,237,237)",borderColor:"rgb(61,61,61)",borderCap:"round",rotation:.2618,points:[44.41276,23.77714,38.68944,23.77714,33.30496,20.23699,28.88983,14.5401,24.47469,8.84321,22.55729,35.68983,32.04166,40.72938],segments:[1,4,4]},{type:"oval",borderWidth:2,borderColor:"rgb(61,61,61)",rect:[21.53429,22.96531,88.8981,74.69064]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[93.19422,30.5138,93.19422,30.5138,96.32695,28.82985,99.04364,25.51534,100.63358,23.57553,102.08422,21.24706,102.68792,18.7394,104.32316,11.94695,112.13179,31.92062,104.44618,40.68506],segments:[1,4,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",rotation:.2618,points:[40.62881,26.14647,34.90549,26.14647,32.31798,22.75803,27.90285,17.06114,23.48771,11.36426,18.41848,35.24736,27.90285,40.28692],segments:[1,4,4]},{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",anchorX:.41176,anchorY:.88889,rect:[91.52207,49.98659,1.67215,3.35736]},{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",anchorX:.41176,anchorY:.88889,rect:[39.44815,49.46033,2.86639,3.35736]}]}),ht.Default.setImage("editor.block",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15,14.5,1,14.5,1,1.50001,7,1.50001,8,3.50001,15,3.50001,15,14.5]},{type:"rect",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[5.5,7.22625,6,5]},{type:"circle",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[2.5,4.72625,6,5]}]}),ht.Default.setImage("editor.group",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8.00001,2.80769,15.5,2.80769,15.5,15.5]},{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[2.82964,11.54111,13.17036,11.54111,13.17036,13.12467,13.17036,5.20688,2.82964,5.20688,2.82964,13.12467,13.17036,13.12467,7.26137,13.12467,5.78413,15.5,10.21588,15.5,8.84426,13.12467,13.17036,13.12467,13.17036,11.54111]}]}),ht.Default.setImage("editor.subgraph",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8.00001,2.80769,15.5,2.80769,15.5,15.5]},{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",closePath:!0,points:[4.90316,8.05737,4.90316,8.05737,4.30121,6.50546,5.25104,5.82166,6.20086,5.13787,7.09165,5.82166,7.09165,5.82166,7.09165,5.82166,7.76857,4.36921,9.6391,4.91013,11.50964,5.45106,11.09684,8.05737,11.09684,8.05737,11.09684,8.05737,12.482,8.53031,12.482,9.79106,12.482,10.86629,11.67411,11.63079,11.09684,11.63079,4.90316,11.63079,4.31315,11.63079,3.518,10.84732,3.518,9.79106,3.518,8.56402,4.90316,8.05737,4.90316,8.05737],segments:[1,4,4,4,4,4,4,2,4,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderJoin:"miter",points:[13,13.5,8.02409,13.5,8,9,8.02409,13.5,3,13.5]}]}),ht.Default.setImage("editor.restore",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,shadowColor:"#1ABC9C",rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.add",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",rotation:3.14159,points:[9.47991,2.5,13.48953,7.4,9.47991,7.4,9.47991,2.5,2.48953,2.5,2.48953,13.5,13.48953,13.5,13.48953,7.4]}]}),ht.Default.setImage("editor.delete",{background:"rgb(89,89,89)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[5.5,5.57173,5.5,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[8.05685,5.57173,8.05685,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[10.5,5.57173,10.5,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,3.18902,15,3.16996,5.32652,3.16021,6.32652,1.16021,9.32652,1.16021,10.32652,3.16021]},{type:"rect",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[3.33333,3.18902,9.33334,11.65078]}]}),ht.Default.setImage("editor.import",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"triangle",borderColor:"rgb(255,255,255)",borderWidth:1,rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.top",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:2.35619,rect:[3.86035,6.44002,8.20153,8.2581]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.14159,points:[2.14176,4.58061,13.85824,4.51881]}]}),ht.Default.setImage("editor.up",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:2.35619,rect:[3.89924,6.05159,8.20153,8.2581]}]}),ht.Default.setImage("editor.down",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:5.49779,rect:[3.89924,.69031,8.20153,8.2581]}]}),ht.Default.setImage("editor.bottom",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:5.49779,rect:[3.93812,.69031,8.20153,8.2581]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.14159,points:[2.14176,10.85024,13.85824,10.78844]}]}),ht.Default.setImage("editor.menu",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[.93729,4,14.93729,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.06271,8,15.06271,8]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.06271,12,15.06271,12]}]}),ht.Default.setImage("editor.undo",{background:"rgb(191,191,191)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",points:[9.9945,5.006,6.0345,5.006,6.0345,3.527,6.0345,3.336,5.9255,3.162,5.7545,3.078,5.5825,2.994,5.3785,3.015,5.2275,3.132,2.4795,5.264,2.3575,5.359,2.2865,5.505,2.2865,5.659,2.2865,5.813,2.3575,5.959,2.4795,6.054,5.2275,8.186,5.3175,8.256,5.4255,8.292,5.5345,8.292,5.6095,8.292,5.6845,8.275,5.7545,8.241,5.9255,8.157,6.0345,7.983,6.0345,7.792,6.0345,6.006,9.9945,6.006,11.5445,6.006,12.7135,7.296,12.7135,9.006,12.7135,10.689,11.4815,12.006,9.9085,12.006,5.0345,12.006,4.7585,12.006,4.5345,12.23,4.5345,12.506,4.5345,12.782,4.7585,13.006,5.0345,13.006,9.9085,13.006,12.0425,13.006,13.7135,11.249,13.7135,9.006,13.7135,6.763,12.0795,5.006,9.9945,5.006,9.9945,5.006],segments:[1,2,2,4,4,2,4,4,2,4,4,4,2,2,4,4,2,4,4,2,4,4,2]}]}),ht.Default.setImage("editor.redo",{background:"rgb(191,191,191)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",shadowColor:"#1ABC9C",scaleX:-1,points:[9.9945,5.006,6.0345,5.006,6.0345,3.527,6.0345,3.336,5.9255,3.162,5.7545,3.078,5.5825,2.994,5.3785,3.015,5.2275,3.132,2.4795,5.264,2.3575,5.359,2.2865,5.505,2.2865,5.659,2.2865,5.813,2.3575,5.959,2.4795,6.054,5.2275,8.186,5.3175,8.256,5.4255,8.292,5.5345,8.292,5.6095,8.292,5.6845,8.275,5.7545,8.241,5.9255,8.157,6.0345,7.983,6.0345,7.792,6.0345,6.006,9.9945,6.006,11.5445,6.006,12.7135,7.296,12.7135,9.006,12.7135,10.689,11.4815,12.006,9.9085,12.006,5.0345,12.006,4.7585,12.006,4.5345,12.23,4.5345,12.506,4.5345,12.782,4.7585,13.006,5.0345,13.006,9.9085,13.006,12.0425,13.006,13.7135,11.249,13.7135,9.006,13.7135,6.763,12.0795,5.006,9.9945,5.006,9.9945,5.006],segments:[1,2,2,4,4,2,4,4,2,4,4,4,2,2,4,4,2,4,4,2,4,4,2]}]}),ht.Default.setImage("editor.edit",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(51,153,255)",shadowColor:"#1ABC9C",rotation:5.49779,closePath:!0,points:[6,-.83884,.5,13.16116,6.04966,10.58206,11.5,13.16116,6,-.83884]}]}),ht.Default.setImage("editor.rulers",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:1.5708,points:[1.50517,1.5,1.5,4.49799,2.47337,4.49798,1.5,4.49799,1.50003,14.5,11.23413,14.48019,11.23413,13.48171,11.23413,14.47896,14.5,14.47897,4.00002,14.47899,4.00001,12.00001,1.50521,12.00002]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[14,6,14,14,6,14]}]}),ht.Default.setImage("editor.grid",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.49468,1.49999,4.5,14.49999,4.49468,11.53541,1.5,11.51432,14.5,11.51432,11.52105,11.53541,11.52105,14.49999,11.52105,1.49999,11.5,4.50429,14.5,4.50429,1.5,4.50429]}]}),ht.Default.setImage("editor.save",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",points:[3.66183,14.5,14.5,14.5,14.5,4.83454,10.71984,1.5,3.66183,1.5,3.66183,6.18654,10.71984,6.18654,10.71984,1.5,1.5,1.5,1.5,14.5,3.66183,14.5,3.66183,9.03168,12.17213,9.03168,12.17213,14.5]}]}),ht.Default.setImage("editor.preview",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",points:[1.9869,6.489,2,2,14,8,1.9869,14,2,9.555]}]}),ht.Default.setImage("editor.reload",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,shadowColor:"#1ABC9C",rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.zoomout",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[2,8,14,8]}]}),ht.Default.setImage("editor.zoomin",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[2,8,14,8,8,2,8,14],segments:[1,2,1,2]}]}),ht.Default.setImage("editor.zoomtofit",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[8.00001,11.91764,8.00001,15]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-1.5708,rect:[9.75,7.24608,2,1.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-1.5708,points:[13.516,6.484,13.516,9.51599]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-3.14159,points:[8.00001,.99999,8.00001,4.08236]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:1.5708,points:[2.516,6.4801,2.516,9.51209]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[4.25,7.24608,2,1.5]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:3.14159,rect:[7.00001,4.5,2,1.5]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:6.28319,rect:[7,10,2,1.5]}]}),ht.Default.setImage("editor.toggleleft",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.50002,1.00002,10.99995,13.99996]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[3.49001,5.50001,3.51001,10.49999]}]}),ht.Default.setImage("editor.toggleboth",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.toggleright",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.50002,1.00002,10.99995,13.99996]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[12.49999,5.50001,12.51999,10.49999]}]}),ht.Default.setImage("editor.layout.helper",ht.Default.parse(JSON.stringify({modified:"Mon Oct 29 2018 09:55:40 GMT+0800 (\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4)",dataBindings:[{attr:"selectColor",valueType:"Color",defaultValue:"#60ACFC"},{attr:"layout.h",valueType:"String"},{attr:"layout.v",valueType:"String"}],width:100,height:100,interactive:!0,disableSelectedBorder:!0,pixelPerfect:!1,comps:[{type:"rect",borderColor:"#979797",displayName:"\u5de6\u4fa7\u4ea4\u4e92",rect:[5.51795,27.5,20.9641,44.5],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.h', 'leftright');\n}\nelse {\n    data.a('layout.h', 'left');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u53f3\u4fa7\u4ea4\u4e92",rect:[74.0359,27.5,20.9641,45],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.h', 'leftright');\n}\nelse {\n    data.a('layout.h', 'right');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u4e0a\u4fa7\u4ea4\u4e92",rect:[27.5,6,45,20],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.v', 'topbottom');\n}\nelse {\n    data.a('layout.v', 'top');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u4e0b\u4fa7\u4ea4\u4e92",rect:[27.5,74,45,20],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.v', 'topbottom');\n}\nelse {\n    data.a('layout.v', 'bottom');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u6a2a\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[28.22051,44,16,12],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u6a2a\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[55.77949,44,16,12],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u7eb5\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[44.22051,28,11.55897,16],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u7eb5\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[44.22051,56,11.55897,16],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",borderWidth:1,borderColor:"#d4d4d4",rect:[5,5,90,90]},{type:"rect",borderWidth:1,borderColor:"#d4d4d4",borderPattern:[6,6],rect:[27.5,27.5,45,45]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'left' || layoutH === 'leftright') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D4D4D4"},borderColor:"#979797",rect:[8,48,16,4]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'right' || layoutH === 'leftright') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[76,48,16,4]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[34,48,32,4],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'bottom' || layoutV === 'topbottom') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,76,4,16]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'top' || layoutV === 'topbottom') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,8,4,16]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,34,4,32],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",background:{func:"__ht__function(data, view) {\nif (data.a('layout.h') === 'center' || data.a('layout.v')  === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,48,4,4]}]}))),ht.Default.setImage("editor.attachPoint",{width:10,height:10,boundExtend:1,comps:[{type:"shape",borderWidth:1,background:{func:"attr@selectColor",value:"rgb(51,153,255)"},borderColor:{func:"attr@selectColor",value:"rgb(51,153,255)"},closePath:!0,points:[5,0,0,5,5,10,10,5]}]}),ht.Default.setImage("editor.debug",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",pixelPerfect:!0,points:[7.94786,14.04023,7.94786,14.04023,5.74115,14.04023,3.96501,12.19542,3.96501,9.90337,3.96501,5.76652,11.98452,5.76652,11.98452,9.90337,11.9307,12.19542,10.15457,14.04023,7.94786,14.04023,12.60426,13.98532,12.60426,13.11086,12.16217,12.33113,11.46956,11.86165,11.95932,6.90006,12.73466,6.45216,13.26319,5.60927,13.26319,4.65313,13.26319,4.65313,3.34528,13.98532,3.34528,13.13137,3.76687,12.36776,4.43165,11.8952,1.94907,9.37134,3.96309,9.37134,3.93694,6.8475,3.19558,6.38817,2.74126,5.57307,2.74126,4.65313,2.74126,4.65313,10.93997,4.92497,5.00957,4.92497,5.00957,3.27764,6.32743,1.95977,7.97477,1.95977,9.6221,1.95977,10.93997,3.27764,10.93997,4.92497,10.93997,4.92497,7.97477,13.98532,7.97477,7.94509,12.03691,9.37134,14.05093,9.37134],segments:[1,2,4,2,2,2,4,5,1,4,1,4,2,1,4,1,2,1,4,2,1,2,4,4,2,5,1,2,1,2]}]}),ht.Default.setImage("editor.display.rect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[2.5,1.5,11,13]}]}),ht.Default.setImage("editor.display.oval",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[1,1,14,14]}]}),ht.Default.setImage("editor.display.roundrect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"roundRect",borderWidth:1,borderColor:"rgb(138,138,138)",cornerRadius:2.5,shadowColor:"#1ABC9C",rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.display.triangle",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,
borderColor:"rgb(138,138,138)",borderCap:"round",rotation:4.71239,points:[1.00872,1,14.99345,8,.99345,15,1.00872,1]}]}),ht.Default.setImage("editor.display.polygon",{width:16,height:16,comps:[{type:"polygon",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.star",{width:16,height:16,comps:[{type:"star",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.arc",{width:16,height:16,comps:[{type:"arc",rect:[1,1,14,14],arcFrom:0,arcTo:4.1888,borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.shape",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[6.45666,.50222,10,8]},{type:"oval",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[4.92983,8.48004,2.48323,2.47136]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-2.35619,points:[.71918,15.84031,-.26373,13.78,4.61411,6.85806,4.66212,13.2497,4.61411,6.85806,9.56535,13.77996,8.58245,15.84028]}]}),ht.Default.setImage("editor.display.node",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.5,9.38462,14.5,9.38462,14.5,11.23077,14.5,2,1.5,2,1.5,11.23077,14.5,11.23077,7.07143,11.23077,5,15,11,15,8.92857,11.23077]}]}),ht.Default.setImage("editor.display.group",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[13,12.5,13,10.54,3,10.54,13,10.54,13,5.5,3,5.5,3,12.5,13,12.5,7,12.5,5.85714,15.5,10.14287,15.5,9,12.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8,2.19286,15.5,2.19286,15.5,15.5]}]}),ht.Default.setImage("editor.display.edge",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[.69044,.97071,4,4.00837]},{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[11.27696,10.99163,4,4.00837]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",points:[4.35933,3.02819,7.84441,2.9749,7.84441,12.99581,11.64067,12.99581]}]}),ht.Default.setImage("editor.display.text",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,15,8.06501,1,15,15,12.38059,9.8,4.10171,9.8]}]}),ht.Default.setImage("editor.display.subgraph",{gridThickColor:"rgb(191,191,191)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(207,207,207)",visible:!1,closePath:!0,points:[2.81788,9.09381,2.81788,9.09381,1.38027,6.92868,3.20223,5.43826,5.02418,3.94784,6.51488,5.43826,6.51488,5.43826,6.51488,5.43826,7.61273,3.06338,10.74281,3.94784,13.87289,4.8323,13.18212,9.09381,13.18212,9.09381,13.18212,9.09381,15.5,9.8671,15.5,11.92851,15.5,13.6866,14.14811,14.93662,13.18212,14.93662,2.81788,14.93662,1.83057,14.93662,.5,13.65558,.5,11.92851,.5,9.92221,2.81788,9.09381,2.81788,9.09381],segments:[1,4,4,4,4,4,4,2,4,4]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[4.99379,5.52777,6,4.47223]},{type:"circle",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",visible:!1,shadowColor:"#1ABC9C",rect:[4,6.43826,2,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:3.15905,arcTo:5.5676,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[2.5,3.11794,5,5]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:3.57792,arcTo:6.6497,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[5.63862,1.53868,9.36138,7.15852]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:1.5708,arcTo:3.87463,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[-1,6.56338,8.99379,5.93662]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:5.00909,arcTo:1.5708,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[8.00621,6.56338,8.99379,5.93662]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",visible:!1,points:[3.4969,12.5,12.5031,12.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",points:[9.72,12.5,8,10,6.34,12.5]},{type:"circle",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",displayName:"\u5706\u5f62",rect:[0,0,2,2]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderJoin:"miter",points:[15,15.5,8.02409,15.5,8.02409,14,8.02409,15.5,1,15.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",closePath:!0,points:[2.81167,6.59481,2.81167,6.59481,1.80439,4.03022,3.39379,2.90023,4.98319,1.77025,6.47379,2.90023,6.47379,2.90023,6.47379,2.90023,7.60652,.5,10.7366,1.3939,13.86668,2.28781,13.17591,6.59481,13.17591,6.59481,13.17591,6.59481,15.49379,7.37636,15.49379,9.45978,15.49379,11.23663,14.1419,12.5,13.17591,12.5,2.81167,12.5,1.82436,12.5,.49379,11.20528,.49379,9.45978,.49379,7.43206,2.81167,6.59481,2.81167,6.59481],segments:[1,4,4,4,4,4,4,2,4,4]}]}),ht.Default.setImage("editor.symbol.rect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[2.5,1.5,11,13]}]}),ht.Default.setImage("editor.symbol.oval",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[1,1,14,14]}]}),ht.Default.setImage("editor.symbol.roundrect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"roundRect",borderWidth:1,borderColor:"rgb(138,138,138)",cornerRadius:2.5,shadowColor:"#1ABC9C",rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.symbol.triangle",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",rotation:4.71239,points:[1.00872,1,14.99345,8,.99345,15,1.00872,1]}]}),ht.Default.setImage("editor.symbol.polygon",{width:16,height:16,comps:[{type:"polygon",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.star",{width:16,height:16,comps:[{type:"star",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.arc",{width:16,height:16,comps:[{type:"arc",rect:[1,1,14,14],arcFrom:0,arcTo:4.1888,borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.image",{background:"rgb(156,156,156)",width:16,height:16,comps:[{type:"rect",borderWidth:1,borderColor:"rgb(255,255,255)",rect:[.5,1.96,15,12]},{type:"circle",background:"rgb(255,255,255)",borderColor:"rgb(255,255,255)",rect:[3.32103,4.48721,1.5,1.5]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[2.18757,9.112,6.11684,9.112,7.77072,10.39241,9.50807,13.68975,9.69338,14.04145,9.04982,12.34611,7.45717,10.69236,7.45717,10.69236,8.72728,5.98721,14.05092,5.98721],segments:[1,4,4,4]}]}),ht.Default.setImage("editor.symbol.shape",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[6.45666,.50222,10,8]},{type:"oval",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[4.92983,8.48004,2.48323,2.47136]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-2.35619,points:[.71918,15.84031,-.26373,13.78,4.61411,6.85806,4.66212,13.2497,4.61411,6.85806,9.56535,13.77996,8.58245,15.84028]}]}),ht.Default.setImage("editor.symbol.border",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",points:[.5,6.01503,.5,2,15.48868,2,15.5,14,.5,14,.5,10]}]}),ht.Default.setImage("editor.symbol.text",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,15,8.06501,1,15,15,12.38059,9.8,4.10171,9.8]}]}),ht.Default.setImage("editor.symbol.piechart",{background:"rgb(97,97,97)",width:16,height:16,comps:[{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",arcFrom:.5236,arcTo:4.71239,rect:[.53628,2.06928,13.08634,13.08634]},{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",arcFrom:4.71239,arcTo:.5236,rect:[2.37737,1,13.08634,13.08634]}]}),ht.Default.setImage("editor.symbol.onedimensionalcolumnchart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[3.42625,5.95042,3,9.04958]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[10.00543,1,3,14]}]}),ht.Default.setImage("editor.symbol.columnchart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[1,9,3,6]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[4,5.95042,3,9.04958]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[9,1,3,14]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[12,10.93747,3,4.06253]}]}),ht.Default.setImage("editor.symbol.linechart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",points:[1,14,5,7,11,8,15,2]}]}),ht.Default.setImage("editor.point.mirrored",{width:30,height:30,fitSize:!1,comps:[{type:"arc",background:"rgb(202,235,248)",borderWidth:2,borderColor:"rgb(17,158,216)",arcClose:!1,rect:[3.5,10.30081203536023,23,25.3726296254234]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12,7.300812035360231,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[17.842265898626422,9.310233818119592,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[24.713262902082427,8.310233818119592,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.4018068742542837,9.30081203536023,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.286737097917573,8.310233818119592,3,4]}]}),ht.Default.setImage("editor.point.straight",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[26.974999999999998,23.185840967335317,15.133692185007973,10.275109094255685,3.0250000000000004,23.185840967335317]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12,7.561327956066684,6,6]}]}),ht.Default.setImage("editor.point.disconnected",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[3.1940148593724587,22.95774078992803,3.1940148593724587,18.139874123261343,7.6015038461565965,10.497740789928038,14.542032480517832,10.497740789928038,26.80598514062754,22.95774078992803],segments:[1,4,2]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12.093814401372779,7.5391087731804305,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rotation:.7853981633974483,rect:[16.36973009802768,14.555043156001322,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rotation:.7853981633974483,rect:[22.831111406474626,16.51363217953681,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.2671011430070465,9.53910877318043,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.152031366670336,8.548530555939791,3,4]}]}),ht.Default.setImage("editor.point.asymmetric",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[3.5000000000000027,22.974997694265234,3.5000000000000027,17.50768540873153,5.131816608669447,11.637417102180905,12.400695544362113,11.637417102180905,22.516641067164265,11.637417102180905,26.5,22.974997694265234,26.5,22.974997694265234],segments:[1,4,4]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[9.324670579660944,7.637417102180905,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[3.405482351035767,9.637417102180905,6.540642002660807,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.7221578598514142,8.637417102180905,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[15.278596259040164,9.637417102180905,11.965262549245955,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[24.731262324024406,8.637417102180905,3,4]}]}),ht.Default.setImage("editor.layout.circular",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,2,7,4,9,4,9,2,2,7,2,9,4,9,4,7,12,7,12,9,14,9,14,7,4,12,4,14,6,14,6,12,10,12,10,14,12,14,12,12],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[8,3,3,8,5,13,11,13,13,8],segments:[1,2,2,2,2,5]}]}),ht.Default.setImage("editor.layout.symmetric",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,2,7,4,9,4,9,2,2,7,2,9,4,9,4,7,12,7,12,9,14,9,14,7,4,12,4,14,6,14,6,12,10,12,10,14,12,14,12,12],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderWidth:1,borderColor:"white",points:[8,8,8,3,8,8,3,8,8,8,5,13,8,8,11,13,8,8,13,8],segments:[1,2,1,2,1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.hierarchical",{width:16,height:16,comps:[{type:"shape",background:"white",points:[4,3,4,5,6,5,6,3,10,3,10,5,12,5,12,3,1,11,1,13,3,13,3,11,7,11,7,13,9,13,9,11,13,11,13,13,15,13,15,11],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[5,4,2,12,5,4,8,12,5,4,14,12,11,4,2,12,11,4,8,12,11,4,14,12],segments:[1,2,1,2,1,2,1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.towardnorth",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardsouth",rotation:Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.layout.towardsouth",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,3,7,5,9,5,9,3,1,11,1,13,3,13,3,11,7,11,7,13,9,13,9,11,13,11,13,13,15,13,15,11],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[8,4,2,12,8,4,8,12,8,4,14,12],segments:[1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.towardeast",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardsouth",rotation:.5*-Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.layout.towardwest",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardsouth",rotation:.5*Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.align.distributehorizontal",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,2,14,14,2,14,14],segments:[1,2,1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return jW.config.color_dark}}},{type:"shape",points:[8,5,8,11],borderWidth:3,borderCap:"round",borderColor:{func:function(){return jW.config.color_select}}}]}),ht.Default.setImage("editor.align.distributevertical",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,14,2,2,14,14,14],segments:[1,2,1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return jW.config.color_dark}}},{type:"shape",points:[5,8,11,8],borderWidth:3,borderCap:"round",borderColor:{func:function(){return jW.config.color_select}}}]}),ht.Default.setImage("editor.align.alignleft",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,2,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return jW.config.color_dark}}},{type:"shape",points:[5,5,13,5,5,11,8,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return jW.config.color_select}}}]}),ht.Default.setImage("editor.align.alignhorizontal",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[8,2,8,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return jW.config.color_dark}}},{type:"shape",points:[3,5,13,5,6,11,10,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return jW.config.color_select}}}]}),ht.Default.setImage("editor.align.alignright",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[14,2,14,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return jW.config.color_dark}}},{type:"shape",points:[3,5,11,5,11,11,8,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return jW.config.color_select}}}]}),ht.Default.setImage("editor.align.aligntop",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,14,2],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return jW.config.color_dark}}},{type:"shape",points:[5,5,5,13,11,5,11,8],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return jW.config.color_select}}}]}),ht.Default.setImage("editor.align.alignvertical",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,8,14,8],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return jW.config.color_dark}}},{type:"shape",points:[5,3,5,13,11,6,11,10],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return jW.config.color_select}}}]}),ht.Default.setImage("editor.align.alignbottom",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,14,14,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return jW.config.color_dark}}},{type:"shape",points:[5,3,5,11,11,11,11,8],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return jW.config.color_select}}}]});var gW=function(){return!0};kq("editor.layout.circular"),kq("editor.layout.symmetric"),kq("editor.layout.hierarchical"),kq("editor.layout.towardnorth"),kq("editor.layout.towardsouth"),kq("editor.layout.towardeast"),kq("editor.layout.towardwest"),kq("editor.root"),kq("editor.bind",gW),kq("editor.unbind"),kq("editor.dir"),kq("editor.dxf"),kq("editor.obj"),kq("editor.mtl"),kq("editor.ui-tab"),kq("editor.ttf"),kq("editor.otf"),kq("editor.sound"),kq("editor.video"),kq("editor.resetsize"),kq("editor.restore"),kq("editor.js"),ht.Data.prototype.$49$=Cq,ht.Data.prototype.$50$=function(S){return this._refGraph?[]:[tq.call(this,S),Vq]},ht.Node.prototype.$49$=Lq,ht.Node.prototype.$50$=function(S){return this._refGraph?[]:[Oq.call(this,S),eq]},ht.Edge.prototype.$49$=cq,ht.Edge.prototype.$50$=function(S){return this._refGraph?[]:[$q.call(this,S),yq]},ht.Group.prototype.$50$=function(S){return this._refGraph?[]:[Xq.call(this,S),fq]},ht.Shape.prototype.$50$=function(S){return this._refGraph?[]:[Jq.call(this,S),gq]},ht.Block.prototype.$50$=function(S){return this._refGraph?[]:[Tq.call(this,S),aq]},ht.RefGraph.prototype.$50$=function(S){return this._refGraph?[]:[rq.call(this,S),oq]},ht.Points.prototype.$50$=function(S){return this._refGraph?[]:[Bq.call(this,S),Mq]};var TW=function(S){function q(W,Z,z){QW(this,q);var k=DW(this,S.call(this));return k.parse(W,Z,z),k}return uW(q,S),q.prototype.getClass=function(){return q},q.prototype.toLabel=function(){return this.getDisplayName()||k("editor.comptype."+this.s("shape").toLowerCase())},q.prototype.parse=function(S,q,W){S&&(rS(this,"shape",S.type,"rect"),rS(this,"shape.background",S.background,null),rS(this,"shape.repeat.image",S.repeatImage),rS(this,"shape.border.width",S.borderWidth),rS(this,"shape.border.color",S.borderColor,null),rS(this,"shape.border.3d",S.border3d),rS(this,"shape.border.3d.color",S.border3dColor),rS(this,"shape.border.3d.accuracy",S.border3dAccuracy),rS(this,"shape.border.cap",S.borderCap),rS(this,"shape.border.join",S.borderJoin),rS(this,"shape.border.pattern",S.borderPattern),rS(this,"shape.gradient",S.gradient),rS(this,"shape.gradient.color",S.gradientColor),rS(this,"shape.dash",S.dash),rS(this,"shape.dash.pattern",S.dashPattern),rS(this,"shape.dash.offset",S.dashOffset),rS(this,"shape.dash.color",S.dashColor),rS(this,"shape.dash.width",S.dashWidth),rS(this,"shape.dash.3d",S.dash3d),rS(this,"shape.dash.3d.color",S.dash3dColor),rS(this,"shape.dash.3d.accuracy",S.dash3dAccuracy),rS(this,"shape.border.width.absolute",S.borderWidthAbsolute),rS(this,"shape.fill.clip.direction",S.fillClipDirection),rS(this,"shape.fill.clip.percentage",S.fillClipPercentage),"rect"===this.compType?rS(this,"shape.depth",S.depth):"roundRect"===this.compType?rS(this,"shape.corner.radius",S.cornerRadius):"polygon"===this.compType?rS(this,"shape.polygon.side",S.polygonSide):"arc"===this.compType&&(rS(this,"shape.arc.from",S.arcFrom),rS(this,"shape.arc.to",S.arcTo),rS(this,"shape.arc.close",S.arcClose),rS(this,"shape.arc.oval",S.arcOval)),TS(this,S,q,W))},q.prototype.toJSON=function(){var S={};return cS(this,S,"shape","type",void 0),cS(this,S,"shape.background","background",null),cS(this,S,"shape.repeat.image","repeatImage"),cS(this,S,"shape.border.width","borderWidth"),cS(this,S,"shape.border.color","borderColor",null),cS(this,S,"shape.border.3d","border3d"),cS(this,S,"shape.border.3d.color","border3dColor"),cS(this,S,"shape.border.3d.accuracy","border3dAccuracy"),cS(this,S,"shape.border.cap","borderCap"),cS(this,S,"shape.border.join","borderJoin"),cS(this,S,"shape.border.pattern","borderPattern"),cS(this,S,"shape.gradient","gradient"),cS(this,S,"shape.gradient.color","gradientColor"),cS(this,S,"shape.dash","dash"),cS(this,S,"shape.dash.pattern","dashPattern"),cS(this,S,"shape.dash.offset","dashOffset"),cS(this,S,"shape.dash.color","dashColor"),cS(this,S,"shape.dash.width","dashWidth"),cS(this,S,"shape.dash.3d","dash3d"),cS(this,S,"shape.dash.3d.color","dash3dColor"),cS(this,S,"shape.dash.3d.accuracy","dash3dAccuracy"),cS(this,S,"shape.border.width.absolute","borderWidthAbsolute"),cS(this,S,"shape.fill.clip.direction","fillClipDirection"),cS(this,S,"shape.fill.clip.percentage","fillClipPercentage"),"rect"===this.compType?cS(this,S,"shape.depth","depth"):"roundRect"===this.compType?cS(this,S,"shape.corner.radius","cornerRadius"):"polygon"===this.compType?cS(this,S,"shape.polygon.side","polygonSide"):"arc"===this.compType&&(cS(this,S,"shape.arc.from","arcFrom"),cS(this,S,"shape.arc.to","arcTo"),cS(this,S,"shape.arc.close","arcClose"),cS(this,S,"shape.arc.oval","arcOval")),aS(this,S),S},UW(q,[{key:"compType",get:function(){return this.s("shape")}}]),q}(ht.Node),aW=function(S){function q(W,Z,z){QW(this,q);var k=DW(this,S.call(this));return k.parse(W,Z,z),k}return uW(q,S),q.prototype.getClass=function(){return q},q.prototype.toLabel=function(){return this.getDisplayName()||k("editor.comptype.shape")},q.prototype.parse=function(S,q,W){S&&(rS(this,"type",S.type,"shape"),rS(this,"shape.background",S.background,null),rS(this,"shape.repeat.image",S.repeatImage),rS(this,"shape.border.width",S.borderWidth),rS(this,"shape.border.color",S.borderColor,null),rS(this,"shape.border.3d",S.border3d),rS(this,"shape.border.3d.color",S.border3dColor),rS(this,"shape.border.3d.accuracy",S.border3dAccuracy),rS(this,"shape.border.cap",S.borderCap),rS(this,"shape.border.join",S.borderJoin),rS(this,"shape.border.pattern",S.borderPattern),rS(this,"shape.gradient",S.gradient),rS(this,"shape.gradient.color",S.gradientColor),rS(this,"shape.dash",S.dash),rS(this,"shape.dash.pattern",S.dashPattern),rS(this,"shape.dash.offset",S.dashOffset),rS(this,"shape.dash.color",S.dashColor),rS(this,"shape.dash.width",S.dashWidth),rS(this,"shape.dash.3d",S.dash3d),rS(this,"shape.dash.3d.color",S.dash3dColor),rS(this,"shape.dash.3d.accuracy",S.dash3dAccuracy),rS(this,"shape.fill.rule",S.fillRule),rS(this,"shape.fill.clip.direction",S.fillClipDirection),rS(this,"shape.fill.clip.percentage",S.fillClipPercentage),rS(this,"shape.gradient.pack",S.gradientPack),rS(this,"shape.border.width.absolute",S.borderWidthAbsolute),TS(this,S,q,W),AS(this,S),this.setPoints(FS(wS(S.points))),this.setSegments(wS(S.segments)))},q.prototype.toJSON=function(){var S={};if(cS(this,S,"type","type",void 0),cS(this,S,"shape.background","background",null),cS(this,S,"shape.repeat.image","repeatImage"),cS(this,S,"shape.border.width","borderWidth"),cS(this,S,"shape.border.color","borderColor",null),cS(this,S,"shape.border.3d","border3d"),cS(this,S,"shape.border.3d.color","border3dColor"),cS(this,S,"shape.border.3d.accuracy","border3dAccuracy"),cS(this,S,"shape.border.cap","borderCap"),cS(this,S,"shape.border.join","borderJoin"),cS(this,S,"shape.border.pattern","borderPattern"),cS(this,S,"shape.gradient","gradient"),cS(this,S,"shape.gradient.color","gradientColor"),cS(this,S,"shape.dash","dash"),cS(this,S,"shape.dash.pattern","dashPattern"),cS(this,S,"shape.dash.offset","dashOffset"),cS(this,S,"shape.dash.color","dashColor"),cS(this,S,"shape.dash.width","dashWidth"),cS(this,S,"shape.dash.3d","dash3d"),cS(this,S,"shape.dash.3d.color","dash3dColor"),cS(this,S,"shape.dash.3d.accuracy","dash3dAccuracy"),cS(this,S,"shape.fill.rule","fillRule"),cS(this,S,"shape.fill.clip.direction","fillClipDirection"),cS(this,S,"shape.fill.clip.percentage","fillClipPercentage"),cS(this,S,"shape.gradient.pack","gradientPack"),cS(this,S,"shape.border.width.absolute","borderWidthAbsolute"),aS(this,S),yS(this,S),gS(S,"points",this.a("points"),pS(this.getPoints())),this.getSegments()){var q=this.getSegments().toArray();if(q.length){var W=1===q[0];if(W)for(var Z=1;Z<q.length;Z++)if(2!==q[Z]){W=!1;break}W||gS(S,"segments",this.a("segments"),q)}}return S},UW(q,[{key:"compType",get:function(){return this.s("type")}}]),q}(ht.Shape),rW=function(S){function q(W,Z,z){QW(this,q);var k=DW(this,S.call(this));return k.parse(W,Z,z),k}return uW(q,S),q.prototype.getClass=function(){return q},q.prototype.toLabel=function(){if(this.getDisplayName())return this.getDisplayName();var S=this.s("image");return S&&S.length<100?S:k("editor.comptype.image")},q.prototype.onStyleChanged=function(q,W,Z){S.prototype.onStyleChanged.call(this,q,W,Z),"image"===q&&this.setImage(Z)},q.prototype.parse=function(S,q,W){S&&(rS(this,"type",S.type,"image"),rS(this,"body.color",S.color),rS(this,"image.stretch",S.stretch),rS(this,"image",S.name,"node_image"),TS(this,S,q,W))},q.prototype.toJSON=function(){var S={};return cS(this,S,"type","type",void 0),cS(this,S,"body.color","color"),cS(this,S,"image.stretch","stretch"),cS(this,S,"image","name"),aS(this,S),S},UW(q,[{key:"compType",get:function(){return this.s("type")}}]),q}(ht.Node),oW=function(S){function q(W,Z,z){QW(this,q);var k=DW(this,S.call(this));return k.parse(W,Z,z),k}return uW(q,S),q.prototype.getClass=function(){return q},q.prototype.toLabel=function(){return this.getDisplayName()||this.s("text")||k("editor.comptype.text")},q.prototype.parse=function(S,q,W){S&&(rS(this,"type",S.type,"text"),rS(this,"text",S.text),rS(this,"text.align",S.align),rS(this,"text.vAlign",S.vAlign),rS(this,"text.color",S.color),rS(this,"text.gradient",S.gradient),rS(this,"text.gradient.color",S.gradientColor),rS(this,"text.gradient.pack",S.gradientPack),rS(this,"text.font",S.font),rS(this,"text.shadow",S.shadow),rS(this,"text.shadow.color",S.shadowColor),rS(this,"text.shadow.blur",S.shadowBlur),rS(this,"text.shadow.offset.x",S.shadowOffsetX),rS(this,"text.shadow.offset.y",S.shadowOffsetY),TS(this,S,q,W))},q.prototype.toJSON=function(){var S={};return cS(this,S,"type","type",void 0),cS(this,S,"text","text"),cS(this,S,"text.align","align"),cS(this,S,"text.vAlign","vAlign"),cS(this,S,"text.color","color"),cS(this,S,"text.gradient","gradient"),cS(this,S,"text.gradient.color","gradientColor"),cS(this,S,"text.gradient.pack","gradientPack"),cS(this,S,"text.font","font"),cS(this,S,"text.shadow","shadow"),cS(this,S,"text.shadow.color","shadowColor"),cS(this,S,"text.shadow.blur","shadowBlur"),cS(this,S,"text.shadow.offset.x","shadowOffsetX"),cS(this,S,"text.shadow.offset.y","shadowOffsetY"),aS(this,S),S},UW(q,[{key:"compType",get:function(){return this.s("type")}}]),q}(ht.Text),BW=function(S){function q(W,Z,z){QW(this,q);var k=DW(this,S.call(this));return k.s({"shape.border.color":"red","shape.border.width":1,"shape.background":null}),k.parse(W,Z,z),k.setClosePath(!0),k}return uW(q,S),q.prototype.getClass=function(){return q},q.prototype.toLabel=function(){return this.getDisplayName()||k("editor.comptype.clip")},q.prototype.parse=function(S,q,W){S&&(rS(this,"type",S.type,"clip"),TS(this,S,q,W),this.setPoints(FS(wS(S.points))),this.setSegments(wS(S.segments)))},q.prototype.toJSON=function(){var S={};if(cS(this,S,"type","type",void 0),aS(this,S),gS(S,"points",this.a("points"),pS(this.getPoints())),this.getSegments()){var q=this.getSegments().toArray();if(q.length){var W=1===q[0];if(W)for(var Z=1;Z<q.length;Z++)if(2!==q[Z]){W=!1;break}W||gS(S,"segments",this.a("segments"),q)}}return S},UW(q,[{key:"compType",get:function(){return this.s("type")}}]),q}(ht.Shape),MW=function(S){function q(W,Z,z){QW(this,q);var k=DW(this,S.call(this));return k.parse(W,Z,z),k}return uW(q,S),q.prototype.getClass=function(){return q},q.prototype.toLabel=function(){return this.getDisplayName()||k("editor.comptype.restore")},q.prototype.parse=function(S,q,W){S&&rS(this,"type",S.type,"restore")},q.prototype.toJSON=function(){var S={};return cS(this,S,"type","type",void 0),S},UW(q,[{key:"compType",get:function(){return this.s("type")}}]),q}(ht.Node),YW=function(S){function q(){return QW(this,q),DW(this,S.call(this))}return uW(q,S),q}(ht.widget.BorderPane),AW=function(S){function q(W){return QW(this,q),DW(this,S.call(this,W))}return uW(q,S),q}(ht.widget.ContextMenu),lW=function(S){function q(W){return QW(this,q),DW(this,S.call(this,W))}return uW(q,S),q.prototype.adjustZoom=function(S){return S>jW.config.maxZoom?jW.config.maxZoom:S<jW.config.minZoom?jW.config.minZoom:S},q.prototype.getUnionNodeRect=function(S){var q=this,W=void 0;return S=S._as||S,S.forEach(function(S){S instanceof ht.Node&&(W=p(W,q.getNodeRect(S)))}),W},q.prototype.$63$=function(S){this.validate();var q=this.getViewRect(),W=this.getUnionNodeRect(S);if(!q||!W||ht.Default.intersectsRect(q,W))return null;var Z=q.x+q.width/2-W.x-W.width/2,z=q.y+q.height/2-W.y-W.height/2;return this.moveDatas(S,Z,z),{x:Z,y:z}},q.prototype.getFullscreenDatas=function(){return null},q}(ht.graph.GraphView),wW=function(S){function q(W){return QW(this,q),DW(this,S.call(this,W))}return uW(q,S),q}(ht.widget.ListView),sW=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this,W));return Z.getView().style.background=jW.config.color_pane_dark,Z.setMaskBackground(null),Z.setContentBorderColor(null),Z.setContentBackground("white"),Z.getMask().style.border=jW.config.color_select+" solid 1px",Z}return uW(q,S),q}(ht.graph.Overview),FW=function(S){function q(W,Z,z,k){QW(this,q);var Q=DW(this,S.call(this,W,Z,z,k));return Q.setTogglable(!1),Q}return uW(q,S),q}(ht.widget.SplitView),pW=function(S){function q(W){return QW(this,q),DW(this,S.call(this,W))}return uW(q,S),q}(ht.widget.TablePane),HW=function(S){function q(){return QW(this,q),DW(this,S.call(this))}return uW(q,S),q.prototype.add=function(q,W,Z){var z=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],k=S.prototype.add.call(this,q,W,Z);return k.setVisible(z),k},q}(ht.widget.TabView),EW=function(S){function q(W){
return QW(this,q),DW(this,S.call(this,W))}return uW(q,S),q}(ht.widget.Toolbar),hW=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this,W));return Z.setDoubleClickToToggle(!1),Z}return uW(q,S),q.prototype.getToggleIcon=function(S){if(this._loader&&!this._loader.isLoaded(S))return this._collapseIcon;var q=S.getChildren(),W=q.size();if(W){for(var Z=!1,z=0;z<W;z++)if(this.isVisible(q.get(z))){Z=!0;break}if(Z)return this.isExpanded(S)?this._expandIcon:this._collapseIcon}},q.prototype.hasExpandedChild=function(S){if(!this.isExpanded(S))return!1;var q=S.getChildren(),W=q.size();if(W)for(var Z=0;Z<W;Z++)if(this.isVisible(q.get(Z)))return!0;return!1},UW(q,[{key:"expandIds",get:function(){return Object.keys(this._expandMap)},set:function(S){var q=this;S.forEach(function(S){var W=q.dm().getDataById(S);W&&q.expand(W)})}},{key:"selectionIds",get:function(){var S=[];return this.sm().each(function(q){S.push(q.$33$||q._id)}),S},set:function(S){var q=this,W=[];S.forEach(function(S){var Z=q.dm().getDataById(S);Z&&W.push(Z)}),this.sm().ss(W)}}]),q}(ht.widget.TreeView),IW=function(S){8===S.keyCode&&S.preventDefault()},SZ=ht.widget.TextField.prototype.setEditable;ht.widget.TextField.prototype.setEditable=ht.widget.TextArea.prototype.setEditable=function(S){SZ.call(this,S);var q=this._element;S?q.removeEventListener("keydown",IW):q.addEventListener("keydown",IW)},function(S,q,W){var Z=S.ht,z=Z.Default,k=z.getInternal();Z.Default.textExtraWidth=0,k.addMethod(z,{svgToShape:function(S,q){var W=new Z.SvgConverter(q);return{converter:W,output:W.toShape(S)}}});var Q=Z.Context2dProxy=function(S,q,W){var Z=this;Z.ctx=S,Z.writer=q,Z.$1A={a:1,b:0,c:0,d:1,tx:0,ty:0},Z.$2A(),Z.$3A=!0,Z._splitToBezier=W.splitToBezier,Z.$4A=W.segments,Z._minimumFontSize=W.minimumFontSize,Z.$5A=[];for(var z in CanvasRenderingContext2D.prototype)if("webkitImageSmoothingEnabled"!==z){var k=S[z];"function"==typeof k&&(S[z]=function(q,W){return function(){try{var z=W.apply(S,arguments);return Z.handleFunc(q,z,arguments),z}catch(S){}}}(z,k))}};Q.prototype={},Q.prototype.constructor=Q,Q.prototype.handleFunc=function(S,q,W){var Z=this;switch(S){case"save":Z.$7A();break;case"restore":Z.$8A();break;case"translate":Z.$9A.apply(Z,W);break;case"rotate":Z.$AA.apply(Z,W);break;case"scale":Z.$BA.apply(Z,W);break;case"setTransform":Z.$CA.apply(Z,W);break;case"transform":Z.$DA.apply(Z,W);break;case"fillText":case"strokeText":Z.$EA(W[0],W[1],W[2],"fillText"===S,W[3]);break;case"rect":Z.$FA.apply(Z,W);break;case"fill":Z._ctxFill(W[0]);break;case"fillRect":Z.$FA.apply(Z,W),Z.$10A("fill");break;case"stroke":Z.$10A("stroke");break;case"moveTo":Z.$11A(W[0],W[1]);break;case"lineTo":Z.$12A(W[0],W[1]);break;case"beginPath":Z.$13A();break;case"closePath":Z.$14A();break;case"arc":Z.$15A.apply(Z,W);break;case"ellipse":Z.$16A.apply(Z,W);break;case"quadraticCurveTo":Z.$17A([{x:W[0],y:W[1]}],W[2],W[3]);break;case"bezierCurveTo":Z.$17A([{x:W[0],y:W[1]},{x:W[2],y:W[3]}],W[4],W[5]);break;case"createLinearGradient":Z._ctxCreateGradient(q,!0,W);break;case"createRadialGradient":Z._ctxCreateGradient(q,!1,W);break;case"createPattern":Z._ctxCreatePattern(q,W[0],W[1]);break;case"drawImage":Z._ctxDrawImage.apply(Z,W);break;case"clip":Z._ctxClip()}},Q.prototype.handleSetter=function(S,q){},Q.prototype.$7A=function(){var S=this,q={},W=S.$1A;for(var Z in W)q[Z]=W[Z],"clip"===Z&&W[Z]&&delete W[Z];S.$5A.push(q)},Q.prototype.$8A=function(){var S=this;S.$1A.clip&&S.writer.addRestore(),S.$1A=S.$5A.pop(),S._transformUpdated()},Q.prototype.$9A=function(S,q){if(S=S||0,q=q||0,0!==S||0!==q){var W=this,Z=W.$1A,z=Z.a,k=Z.b,Q=Z.c,U=Z.d;Z.tx=z*S+Q*q+Z.tx,Z.ty=k*S+U*q+Z.ty,W._transformUpdated()}},Q.prototype.$BA=function(S,q){if(S=S||1,q=q||1,1!==S||1!==q){var W=this,Z=W.$1A;Z.a*=S,Z.b*=S,Z.c*=q,Z.d*=q,W._transformUpdated()}},Q.prototype.$AA=function(S){var q=Math.cos(S),W=Math.sin(S),Z=this,z=Z.$1A,k=z.a,Q=z.b,U=z.c,u=z.d;z.a=k*q+U*W,z.b=Q*q+u*W,z.c=-k*W+U*q,z.d=-Q*W+u*q,Z._transformUpdated()},Q.prototype.$CA=function(S,q,W,Z,z,k){var Q=this,U=Q.$1A;U.a=S,U.b=q,U.c=W,U.d=Z,U.tx=z,U.ty=k,Q._transformUpdated()},Q.prototype.$DA=function(S,q,W,Z,z,k){var Q=this,U=Q.$1A,u=U.a,D=U.b,G=U.c,b=U.d;U.a=u*S+G*q,U.b=D*S+b*q,U.c=u*W+G*Z,U.d=D*W+b*Z,U.tx=u*z+G*k+U.tx,U.ty=D*z+b*k+U.ty,Q._transformUpdated()},Q.prototype._transformUpdated=function(){},Q.prototype.$18A=function(){var S=this.$1A;return 0===S.b&&0===S.c?0:Math.atan2(S.b,S.a)},Q.prototype.$19A=function(){var S=this.$1A;return{x:Math.sqrt(S.a*S.a+S.c*S.c),y:Math.sqrt(S.b*S.b+S.d*S.d)}},Q.prototype.$20A=function(S){var q=this.$1A,W=S.x,Z=S.y;return{x:q.a*W+q.c*Z+q.tx,y:q.b*W+q.d*Z+q.ty}},Q.prototype.$21A=function(S){for(var q=this,W=new Array(S.length),Z=0,z=S.length;Z<z;Z++)W[Z]=q.$20A(S[Z]);return W},Q.prototype.$22A=function(S){var q=this.$1A;return S*Math.max(Math.sqrt(q.c*q.c+q.d*q.d),Math.sqrt(q.a*q.a+q.b*q.b))},Q.prototype.$23A=function(S,q){var W=S-q;return W>-1e-5&&W<1e-5},Q.prototype._getTextFirstPixelLine=function(S,q){var W,Z=this._measureTextCanvas;Z?W=this._measureTextContext:(Z=this._measureTextCanvas=document.createElement("canvas"),W=this._measureTextContext=Z.getContext("2d")),W.font=S;var z=Math.ceil(W.measureText("H").width),k=4*z;if(Z.width=z,Z.height=k,W.fillStyle="#f00",W.fillRect(0,0,z,k),W.textBaseline=q,W.fillStyle="#000",W.font=S,W.fillText("H",0,k/2),!W.getImageData(0,0,z,k))return 0;var Q,U,u=W.getImageData(0,0,z,k).data,D=4*z;for(Q=0;Q<k;Q++)for(U=0;U<D;U+=4)if(255!==u[D*Q+U])return Q;return 0},Q.prototype._calcShift=function(S,q,W){var Z=this._fontBaselineShiftCache;Z||(Z=this._fontBaselineShiftCache={});var z=S+q+W,k=Z[z];if(k)return k;var Q=this._getTextFirstPixelLine(S,q),U=this._getTextFirstPixelLine(S,W);return Z[z]=Q-U},Q.prototype.$EA=function(S,q,W,Z,z){var k=this,Q=k.ctx;if(S.trim().length){var U=Q.font,u=Z?Q.fillStyle:Q.strokeStyle,D=Q.textAlign,G=Q.textBaseline;"middle"!==G&&"top"!==G&&"bottom"!==G&&(W-=k._calcShift(U,"middle",G),G="middle");var b,v,j=1,i=k._minimumFontSize;if("string"==typeof U){v=U.match(/[\d\.]+/);var n=1;if(U.indexOf("bold")>=0&&(n=.9566),v){b=v[0]*n;var P=k.$22A(b);P<i&&(j=P/i,P=i),U=U.replace(v[0],P)}}var R=k.$18A();"string"==typeof u&&"rgba(0,0,0,0)"===u.replace(/ /g,"")||(u={color:u},k._tryConvertAndRecordGradient(u),z.underline&&(u.decoration="underline"),z.vertical&&(u.vertical=!0),k.writer.svgId=k.ctx._svgId,k.writer.$2AA(S,k.$20A({x:q,y:W}),U,R,D,G,u,j))}},Q.prototype._ctxDrawImage=function(S,q,Z,z,k,Q,U,u,D){if(S.width&&S.height){z===W&&k===W?(Q=q,U=Z,q=0,Z=0,z=u=S.width,k=D=S.height):Q===W&&U===W&&(Q=q,U=Z,u=z,D=k,q=0,Z=0,z=S.width,k=S.height);var G=this,b=G.$1A,v=u/z,j=D/k,i=Q-v*q,n=U-j*Z,P=b.a,R=b.b,_=b.c,x=b.d;b.tx,b.ty}},Q.prototype._ctxClip=function(){var S=this;S.$1A.clip=!0,S.$10A("clip")},Q.prototype._ctxCreateGradient=function(S,q,W){S.isLinear=q,S.points=q?[W[0],W[1],W[2],W[3]]:[W[0],W[1],W[2],W[3],W[4],W[5]];var Z=this.$1A;S.trans=[Z.a,Z.b,Z.c,Z.d,Z.tx,Z.ty];var z=S.addColorStop;S.addColorStop=function(q,W){z.apply(this,arguments),S.colorStops||(S.colorStops=[]),S.colorStops.push(q,W)}},Q.prototype._ctxCreatePattern=function(S,q,W){},Q.prototype.$FA=function(S,q,W,Z){var z=this,k=z.$21A([{x:S,y:q},{x:S+W,y:q},{x:S+W,y:q+Z},{x:S,y:q+Z}]);z._path.push({type:"rect",points:k})},Q.prototype.$11A=function(S,q){var W=this,Z=W.$20A({x:S,y:q});W._headPoint=Z,W._path.push({type:"moveTo",x:Z.x,y:Z.y})},Q.prototype.$12A=function(S,q){var W=this,Z=W.$20A({x:S,y:q});W._path.push({type:"lineTo",x:Z.x,y:Z.y})},Q.prototype.$15A=function(S,q,W,Z,z,k){Z=Z||0,z=z||2*Math.PI,W&&this.$16A(S,q,W,W,0,Z,z,k)},Q.prototype.$16A=function(S,q,W,Z,z,k,Q,U){var u,D,G,b,v,j,i,n,P,R,_,x,K,d,N=this,m=N.$19A(),t=N.$20A({x:S,y:q});v=Math.sin(z),j=Math.cos(z);var V=function(S){return C(Math.cos(-S),Math.sin(-S))},C=function(z,k){var Q=W*z,U=Z*k;return{x:S+(j*Q-v*U),y:q+(v*Q+j*U)}},O=[],e=Q;if(U)for(;e>=k;)e-=2*Math.PI;else for(;e<=k;)e+=2*Math.PI;for(P=(e-k)/N.$4A,_=0;_<=N.$4A;_++)R=k+P*_,x=N.$20A(V(-R)),O.push(x);var L=k,$=e;if(O[0],b=O[O.length-1],u=N.$24A(k,Q,U),k=u.start,Q=u.end,i=N.$23A(m.x,m.y),n=N.$23A(W,Z),!N.$3A&&i&&n&&N.$23A(Math.abs(k-Q),2*Math.PI))N._path.push({type:"circle",x:t.x,y:t.y,end:b,keyPoints:O,radius:W*m.x});else if(!N.$3A&&i&&n)D=N.$18A(),G=Math.cos(D),K=N.$1A.a*G<0,d=N.$1A.d*G<0,u=N.$25A(k,Q,K,d),k=u.start-D,Q=u.end-D,N._path.push({type:"arc",x:t.x,y:t.y,end:b,radius:W*m.x,startAngle:k,endAngle:Q,keyPoints:O});else{if(N.$3A||!i){if(N._path.length||N._path.push({type:"moveTo",x:O[0].x,y:O[0].y}),N._splitToBezier){var y,c,X,f=$-L,J=Math.max(Math.ceil(Math.abs(f)/Math.PI*2),1),g=f/J,T=Math.tan(.5*g),a=Math.sin(g)*(Math.sqrt(4+3*T*T)-1)/3,r=Math.cos(L),o=Math.sin(L);for(_=0;_<J;_++){X=L+(_+1)*g,y=Math.cos(X),c=Math.sin(X);var B=C(y,c);N.$17A([C(r-o*a,o+r*a),C(y+c*a,c-y*a)],B.x,B.y),r=y,o=c,X}return}for(_=1;_<=N.$4A;_++)x=O[_],N._path.push({type:"lineTo",x:x.x,y:x.y});return}var M,Y,A=N.$20A(V(0)),l=N.$20A(V(Math.PI/2)),w=function(S,q){var W=S.x-q.x,Z=S.y-q.y;return Math.sqrt(W*W+Z*Z)},s=w(A,t),F=w(l,t);F>s?(Y=s,s=F,F=Y,M=l):M=A,D=N.$18A(),G=Math.cos(D),K=N.$1A.a*G<0,d=N.$1A.d*G<0,u=N.$25A(k-Math.PI/2,Q-Math.PI/2,K,d),k=u.start,Q=u.end,N._path.push({type:"ellipse",x:t.x,y:t.y,end:b,major:{x:M.x-t.x,y:M.y-t.y},ratio:F/s,startAngle:k,endAngle:Q,keyPoints:O})}},Q.prototype.$17A=function(S,q,W){var Z=this,z=Z.$20A({x:q,y:W});this._path.push({type:"bezier",x:z.x,y:z.y,ctrl:Z.$21A(S)})},Q.prototype.$13A=function(){this.$2A()},Q.prototype.$14A=function(){var S=this,q=S._headPoint;q&&(S._path.push({type:"lineTo",x:q.x,y:q.y,subType:"closePath"}),S._headPoint=null,S._lastPoint=null)},Q.prototype.$24A=function(S,q,W){S=-S,q=-q;var Z,z=S%(2*Math.PI),k=q%(2*Math.PI);for(z<0&&(z+=2*Math.PI),k<0&&(k+=2*Math.PI),W||(Z=z,z=k,k=Z);k<=z;)k+=2*Math.PI;return{start:z,end:k}},Q.prototype.$25A=function(S,q,W,Z){var z;return(Z||W)&&(W&&Z?(S=Math.PI+S,q=Math.PI+q):(z=Math.PI*(W?1:2)-q,q=Math.PI*(W?1:2)-S,S=z)),{start:S,end:q}},Q.prototype._ctxFill=function(S){var q=this;return q._fillRule=S||"nonzero",q.$10A("fill")},Q.prototype._tryConvertAndRecordGradient=function(S){if("string"!=typeof S.color){var q=this;if(S.color instanceof CanvasGradient){var W=S.color,Z=[W.isLinear?"L":"R"];Z=Z.concat(W.points);var z=q.$1A;Z=Z.concat([z.a,z.b,z.c,z.d,z.tx,z.ty]),Z=Z.concat(W.colorStops),S.gradientPack=Z}else if(S.color instanceof CanvasPattern&&S.color.gradient){var k=S.color,W=k.gradient,Z=[W.isLinear?"L":"R"];Z=Z.concat(W.points);var Q=k.trans,z=q.$1A,U=z.a,u=z.b,D=z.c,G=z.d,b=z.tx,v=z.ty,j=Q[0],i=Q[1],n=Q[2],P=Q[3],R=Q[4],_=Q[5];Z=Z.concat([U*j+D*i,u*j+G*i,U*n+D*P,u*n+G*P,U*R+D*_+b,u*R+G*_+v]),Z=Z.concat(W.colorStops),S.gradientPack=Z}else S.trans=[q.$1A.a,q.$1A.b,q.$1A.c,q.$1A.d,q.$1A.tx,q.$1A.ty],S.color=S.color.image?S.color.image:S.color,S.isPattern=!0}},Q.prototype.$10A=function(S){var q=this,W=q._path;if(W.length){var Z,z,k,Q,U,u=[],D=[];if("clip"===S)U={clip:!0};else{if("stroke"===S){U={stroke:!0,lineWidth:q.$22A(q.ctx.lineWidth),color:q.ctx.strokeStyle};var G=q.ctx.lineCap;"butt"!==G&&(U.lineCap=G);var b=q.ctx.getLineDash();if(b&&b.length){U.dash=!0;for(var v=0,j=b.length;v<j;v++)b[v]=q.$22A(b[v]);U.dashPattern=b,U.dashOffset=q.$22A(q.ctx.lineDashOffset)}}else U={stroke:!1,color:q.ctx.fillStyle},"nonzero"!==q._fillRule&&(U.fillRule=q._fillRule);if(q.ctx.globalAlpha<1&&(U.opacity=q.ctx.globalAlpha),q._tryConvertAndRecordGradient(U),"string"==typeof U.color&&"rgba(0,0,0,0)"===U.color.replace(/ /g,""))return}for(z=0,Z=W.length;z<Z;z++)switch(k=W[z],k.type){case"moveTo":q._lastPoint={x:k.x,y:k.y},u.push(q._lastPoint),D.push(1);break;case"lineTo":"closePath"===k.subType?D.push(5):(u.push({x:k.x,y:k.y}),D.push(2)),q._lastPoint={x:k.x,y:k.y};break;case"rect":Q=k.points,u.push({x:Q[0].x,y:Q[0].y},{x:Q[1].x,y:Q[1].y},{x:Q[2].x,y:Q[2].y},{x:Q[3].x,y:Q[3].y},{x:Q[0].x,y:Q[0].y}),D.push(2,2,2,2,2),q._lastPoint=k.points[0];break;case"circle":case"arc":case"ellipse":console.log("split to line",k.type);break;case"arcBegin":q.writer.svgId=q.ctx._svgId,u.length&&D.length&&q.writer.$2BA(u,D,U),u=[],D=[];break;case"arcClose":q.writer.svgId=q.ctx._svgId,q.writer.$2BA(u,D,U),u=[],D=[];break;case"bezier":if(!q._lastPoint)break;1===k.ctrl.length?(u.push({x:k.ctrl[0].x,y:k.ctrl[0].y},{x:k.x,y:k.y}),D.push(3)):(u.push({x:k.ctrl[0].x,y:k.ctrl[0].y},{x:k.ctrl[1].x,y:k.ctrl[1].y},{x:k.x,y:k.y}),D.push(4)),q._lastPoint={x:k.x,y:k.y};break;default:u.push({x:k.x,y:k.y}),D.push(2)}q.writer.svgId=q.ctx._svgId,q.writer.$2BA(u,D,U)}},Q.prototype.$2A=function(){var S=this;S._path=[],S._lastPoint=null,S._headPoint=null};var U=Z.SvgConverter=function(S){var q=this;q.$26A(S||{}),q.$27A()};U.prototype={},U.prototype.constructor=U,U.prototype.$26A=function(S){var q,Z=this;q=Z.options={},q.size=S.size||512,q.segments=S.segments||16,q.splitToBezier=S.splitToBezier===W||S.splitToBezier,q.minimumFontSize=S.minimumFontSize==W?8:S.minimumFontSize},U.prototype.$27A=function(){var S=this,q=document.createElement("canvas");q.width=q.height=S.options.size,q.style.width=q.style.height=S.options.size;var W=q.getContext;q.getContext=function(q){return function(W){var Z=q.apply(this,arguments);return"2d"===W&&S.$28A(Z),Z}}(W),S._canvas=q,S._segments=[]},U.prototype.toShape=function(S){var q=this;q._canvas;return q._segments=[],canvg(q._canvas,S,{ignoreMouse:!0,ignoreAnimation:!0}),q.write()},U.prototype.$28A=function(S){var q=this;return new Z.Context2dProxy(S,q,q.options)},U.prototype.write=function(){var S=this;return{width:S._canvas.width,height:S._canvas.height,comps:S._segments}},U.prototype.$29A=function(S){var q=this;S.svgId=this.svgId,q._segments.push(S)},U.prototype.$2AA=function(S,q,W,Z,z,k,Q,U){z=z||"left","start"===z?z="left":"end"===z&&(z="right");var u=this,D={type:"text",text:S,rotation:Z,rect:[q.x,q.y,.01,.01],align:z,vAlign:k,font:W};Q.decoration&&(D.decoration=Q.decoration),Q.vertical&&(D.vertical=Q.vertical),Q.gradientPack?D.gradientPack=u._fixGraidentPack(Q.gradientPack):D.color=Q.color,U&&1!==U&&(D.scaleX=U,D.scaleY=U),u.$29A(D)},U.prototype._fixGraidentPack=function(S){var q="L"===S[0]?[S[5],S[6],S[7],S[8],S[9],S[10]]:[S[7],S[8],S[9],S[10],S[11],S[12]];if(Math.abs(q[4])>1e8||Math.abs(q[5])>1e8){var W=q[0],Z=q[1],z=q[2],k=q[3],Q=q[4],U=q[5],u=Math.floor((Q*k-U*z)/(W*k-Z*z)),D=Math.floor((Q*Z-U*W)/(z*Z-W*k));Q=-(W*u+z*D),U=-(Z*u+k*D),"L"===S[0]?(S[9]+=Q,S[10]+=U,S[1]+=u,S[2]+=D,S[3]+=u,S[4]+=D):(S[11]+=Q,S[12]+=U,S[1]+=u,S[2]+=D,S[4]+=u,S[5]+=D)}return S},U.prototype.$2BA=function(S,q,Z){for(var z=this,k=[],Q=0,U=S.length;Q<U;Q++){var u=S[Q];k.push(u.x,u.y)}if(Z.clip)return void z.$29A({type:"clip",points:k,segments:q});var D={type:"shape",points:k,segments:q};Z.opacity!=W&&(D.opacity=Z.opacity),Z.stroke?(Z.dash?(D.dash=Z.dash,D.dashPattern=Z.dashPattern,D.dashOffset=Z.dashOffset,D.dashColor=Z.color,D.dashWidth=Z.lineWidth,D.borderColor=null,D.borderWidth=0,D.background=null):(D.borderColor=Z.color,D.borderWidth=Z.lineWidth,D.background=null),Z.lineCap&&(D.borderCap=Z.lineCap)):(D.borderColor=null,D.borderWidth=0,Z.isPattern?(D.repeatImage=Z.color,D.trans=Z.trans,D.background=null):Z.gradientPack?(D.gradientPack=z._fixGraidentPack(Z.gradientPack),D.background=null):D.background=Z.color,Z.gradient&&(D.gradient=Z.gradient,D.gradientColor=Z.gradientColor),Z.fillRule&&(D.fillRule=Z.fillRule)),z.$29A(D)},U.prototype.addRestore=function(){this.$29A({type:"restore"})},function(S){function q(S){this.ok=!1,"#"==S.charAt(0)&&(S=S.substr(1,6)),S=S.replace(/ /g,""),S=S.toLowerCase();var W={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var Z in W)S==Z&&(S=W[Z]);for(var z=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(S){return[parseInt(S[1]),parseInt(S[2]),parseInt(S[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(S){return[parseInt(S[1],16),parseInt(S[2],16),parseInt(S[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(S){return[parseInt(S[1]+S[1],16),parseInt(S[2]+S[2],16),parseInt(S[3]+S[3],16)]}}],k=0;k<z.length;k++){var Q=z[k].re,U=z[k].process,u=Q.exec(S);if(u){var D=U(u);this.r=D[0],this.g=D[1],this.b=D[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var S=this.r.toString(16),q=this.g.toString(16),W=this.b.toString(16);return 1==S.length&&(S="0"+S),1==q.length&&(q="0"+q),1==W.length&&(W="0"+W),"#"+S+q+W},this.getHelpXML=function(){for(var S=new Array,Z=0;Z<z.length;Z++)for(var k=z[Z].example,Q=0;Q<k.length;Q++)S[S.length]=k[Q];for(var U in W)S[S.length]=U;var u=document.createElement("ul");u.setAttribute("id","rgbcolor-examples");for(var Z=0;Z<S.length;Z++)try{var D=document.createElement("li"),G=new q(S[Z]),b=document.createElement("div");b.style.cssText="margin: 3px; border: 1px solid black; background:"+G.toHex()+"; color:"+G.toHex(),b.appendChild(document.createTextNode("test"));var v=document.createTextNode(" "+S[Z]+" -> "+G.toRGB()+" -> "+G.toHex());D.appendChild(b),D.appendChild(v),u.appendChild(D)}catch(S){}return u}}S.RGBColor=q}(void 0!==S?S:this),function(S){function q(S){for(var q=S.data,W=S.width*S.height*4,Z=0;Z<W;Z+=4){var z=q[Z+3]/255;q[Z]*=z,q[Z+1]*=z,q[Z+2]*=z}}function W(S){for(var q=S.data,W=S.width*S.height*4,Z=0;Z<W;Z+=4){var z=q[Z+3];0!=z&&(z=255/z,q[Z]*=z,q[Z+1]*=z,q[Z+2]*=z)}}function Z(S,q,W,Z){var Q=document.getElementById(S),U=Q.naturalWidth,u=Q.naturalHeight,D=document.getElementById(q);D.style.width=U+"px",D.style.height=u+"px",D.width=U,D.height=u;var G=D.getContext("2d");G.clearRect(0,0,U,u),G.drawImage(Q,0,0),isNaN(W)||W<1||(Z?z(q,0,0,U,u,W):k(q,0,0,U,u,W))}function z(S,Z,z,k,D,G){if(!(isNaN(G)||G<1)){G|=0;var b,v=document.getElementById(S),j=v.getContext("2d");try{try{b=j.getImageData(Z,z,k,D)}catch(S){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),b=j.getImageData(Z,z,k,D)}catch(S){throw alert("Cannot access local image"),new Error("unable to access local image data: "+S)}}}catch(S){throw alert("Cannot access image"),new Error("unable to access image data: "+S)}q(b);var i,n,P,R,_,x,K,d,N,m,t,V,C,O,e,L,$,y,c,X,f,J,g,T,a=b.data,r=G+G+1,o=k-1,B=D-1,M=G+1,Y=M*(M+1)/2,A=new Q,l=A;for(P=1;P<r;P++)if(l=l.next=new Q,P==M)var w=l;l.next=A;var s=null,F=null;K=x=0;var p=U[G],H=u[G];for(n=0;n<D;n++){for(L=$=y=c=d=N=m=t=0,V=M*(X=a[x]),C=M*(f=a[x+1]),O=M*(J=a[x+2]),e=M*(g=a[x+3]),d+=Y*X,N+=Y*f,m+=Y*J,t+=Y*g,l=A,P=0;P<M;P++)l.r=X,l.g=f,l.b=J,l.a=g,l=l.next;for(P=1;P<M;P++)R=x+((o<P?o:P)<<2),d+=(l.r=X=a[R])*(T=M-P),N+=(l.g=f=a[R+1])*T,m+=(l.b=J=a[R+2])*T,t+=(l.a=g=a[R+3])*T,L+=X,$+=f,y+=J,c+=g,l=l.next;for(s=A,F=w,i=0;i<k;i++)a[x]=d*p>>H,a[x+1]=N*p>>H,a[x+2]=m*p>>H,a[x+3]=t*p>>H,d-=V,N-=C,m-=O,t-=e,V-=s.r,C-=s.g,O-=s.b,e-=s.a,R=K+((R=i+G+1)<o?R:o)<<2,L+=s.r=a[R],$+=s.g=a[R+1],y+=s.b=a[R+2],c+=s.a=a[R+3],d+=L,N+=$,m+=y,t+=c,s=s.next,V+=X=F.r,C+=f=F.g,O+=J=F.b,e+=g=F.a,L-=X,$-=f,y-=J,c-=g,F=F.next,x+=4;K+=k}for(i=0;i<k;i++){for($=y=c=L=N=m=t=d=0,x=i<<2,V=M*(X=a[x]),C=M*(f=a[x+1]),O=M*(J=a[x+2]),e=M*(g=a[x+3]),d+=Y*X,N+=Y*f,m+=Y*J,t+=Y*g,l=A,P=0;P<M;P++)l.r=X,l.g=f,l.b=J,l.a=g,l=l.next;for(_=k,P=1;P<=G;P++)x=_+i<<2,d+=(l.r=X=a[x])*(T=M-P),N+=(l.g=f=a[x+1])*T,m+=(l.b=J=a[x+2])*T,t+=(l.a=g=a[x+3])*T,L+=X,$+=f,y+=J,c+=g,l=l.next,P<B&&(_+=k);for(x=i,s=A,F=w,n=0;n<D;n++)R=x<<2,a[R]=d*p>>H,a[R+1]=N*p>>H,a[R+2]=m*p>>H,a[R+3]=t*p>>H,d-=V,N-=C,m-=O,t-=e,V-=s.r,C-=s.g,O-=s.b,e-=s.a,R=i+((R=n+M)<B?R:B)*k<<2,d+=L+=s.r=a[R],N+=$+=s.g=a[R+1],m+=y+=s.b=a[R+2],t+=c+=s.a=a[R+3],s=s.next,V+=X=F.r,C+=f=F.g,O+=J=F.b,e+=g=F.a,L-=X,$-=f,y-=J,c-=g,F=F.next,x+=k}W(b),j.putImageData(b,Z,z)}}function k(S,q,W,Z,z,k){if(!(isNaN(k)||k<1)){k|=0;var D,G=document.getElementById(S),b=G.getContext("2d");try{try{D=b.getImageData(q,W,Z,z)}catch(S){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),D=b.getImageData(q,W,Z,z)}catch(S){throw alert("Cannot access local image"),new Error("unable to access local image data: "+S)}}}catch(S){throw alert("Cannot access image"),new Error("unable to access image data: "+S)}var v,j,i,n,P,R,_,x,K,d,N,m,t,V,C,O,e,L,$,y,c=D.data,X=k+k+1,f=Z-1,J=z-1,g=k+1,T=g*(g+1)/2,a=new Q,r=a;for(i=1;i<X;i++)if(r=r.next=new Q,i==g)var o=r;r.next=a;var B=null,M=null;_=R=0;var Y=U[k],A=u[k];for(j=0;j<z;j++){for(V=C=O=x=K=d=0,N=g*(e=c[R]),m=g*(L=c[R+1]),t=g*($=c[R+2]),x+=T*e,K+=T*L,d+=T*$,r=a,i=0;i<g;i++)r.r=e,r.g=L,r.b=$,r=r.next;for(i=1;i<g;i++)n=R+((f<i?f:i)<<2),x+=(r.r=e=c[n])*(y=g-i),K+=(r.g=L=c[n+1])*y,d+=(r.b=$=c[n+2])*y,V+=e,C+=L,O+=$,r=r.next;for(B=a,M=o,v=0;v<Z;v++)c[R]=x*Y>>A,c[R+1]=K*Y>>A,c[R+2]=d*Y>>A,x-=N,K-=m,d-=t,N-=B.r,m-=B.g,t-=B.b,n=_+((n=v+k+1)<f?n:f)<<2,V+=B.r=c[n],C+=B.g=c[n+1],O+=B.b=c[n+2],x+=V,K+=C,d+=O,B=B.next,N+=e=M.r,m+=L=M.g,t+=$=M.b,V-=e,C-=L,O-=$,M=M.next,R+=4;_+=Z}for(v=0;v<Z;v++){for(C=O=V=K=d=x=0,R=v<<2,N=g*(e=c[R]),m=g*(L=c[R+1]),t=g*($=c[R+2]),x+=T*e,K+=T*L,d+=T*$,r=a,i=0;i<g;i++)r.r=e,r.g=L,r.b=$,r=r.next;for(P=Z,i=1;i<=k;i++)R=P+v<<2,x+=(r.r=e=c[R])*(y=g-i),K+=(r.g=L=c[R+1])*y,d+=(r.b=$=c[R+2])*y,V+=e,C+=L,O+=$,r=r.next,i<J&&(P+=Z);for(R=v,B=a,M=o,j=0;j<z;j++)n=R<<2,c[n]=x*Y>>A,c[n+1]=K*Y>>A,c[n+2]=d*Y>>A,x-=N,K-=m,d-=t,N-=B.r,m-=B.g,t-=B.b,n=v+((n=j+g)<J?n:J)*Z<<2,x+=V+=B.r=c[n],K+=C+=B.g=c[n+1],d+=O+=B.b=c[n+2],B=B.next,N+=e=M.r,m+=L=M.g,t+=$=M.b,V-=e,C-=L,O-=$,M=M.next,R+=Z}b.putImageData(D,q,W)}}function Q(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var U=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],u=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],D={image:Z,canvasRGBA:z,canvasRGB:k};S.stackBlur=D}(void 0!==S?S:this),function(z,k){z.canvg=function(z,k){function Q(S){var q=[0,0,0],W=function(W,Z){var z=S.match(W);null!=z&&(q[Z]+=z.length,S=S.replace(W," "))};return S=S.replace(/:not\(([^\)]*)\)/g,"     $1 "),S=S.replace(/{[\s\S]*/gm," "),W(G,1),W(b,0),W(v,1),W(j,2),W(i,1),W(n,1),S=S.replace(/[\*\s\+>~]/g," "),S=S.replace(/[#\.]/g," "),W(P,2),q.join("")}function U(U){var D={opts:U};D.FRAMERATE=30,D.MAX_VIRTUAL_PIXELS=3e4,D.log=function(S){},1==D.opts.log&&"undefined"!=typeof console&&(D.log=function(S){console.log(S)}),D.init=function(S){var q=0;D.UniqueId=function(){return"canvg"+ ++q},D.Definitions={},D.Styles={},D.StylesSpecificity={},D.Animations=[],D.Images=[],D.ctx=S,D.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(S,q){this.viewPorts.push({width:S,height:q})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){var S,q=this.Current();return q&&(S=q.width)?S:100},this.height=function(){var S,q=this.Current();return q&&(S=q.height)?S:100},this.ComputeSize=function(S){return null!=S&&"number"==typeof S?S:"x"==S?this.width():"y"==S?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},D.init(),D.ImagesLoaded=function(){for(var S=0;S<D.Images.length;S++)if(!D.Images[S].loaded)return!1;return!0},D.trim=function(S){return S.replace(/^\s+|\s+$/g,"")},D.compressSpaces=function(S){return S.replace(/[\s\r\t\n]+/gm," ")},D.ajax=function(S){S=Z.Default.beforeLoadURL(S);var q=new Z.Request,W={};return W.url=encodeURI(S),W.sync=!0,q.send(W),q.getResponseText()},D.parseXml=function(q){if("undefined"!=typeof Windows&&void 0!==Windows.Data&&void 0!==Windows.Data.Xml){var W=new Windows.Data.Xml.Dom.XmlDocument,Z=new Windows.Data.Xml.Dom.XmlLoadSettings;return Z.prohibitDtd=!1,W.loadXml(q,Z),W}if(S.DOMParser){return(new DOMParser).parseFromString(q,"text/xml")}q=q.replace(/<!DOCTYPE svg[^>]*>/,"");var W=new ActiveXObject("Microsoft.XMLDOM");return W.async="false",W.loadXML(q),W},D.Property=function(S,q){this.name=S,this.value=q},D.Property.prototype.getValue=function(){return this.value},D.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},D.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var S=parseFloat(this.value);return(this.value+"").match(/%$/)&&(S/=100),S},D.Property.prototype.valueOrDefault=function(S){return this.hasValue()?this.value:S},D.Property.prototype.numValueOrDefault=function(S){return this.hasValue()?this.numValue():S},D.Property.prototype.addOpacity=function(S){var q=this.value;if(null!=S.value&&""!=S.value&&"string"==typeof this.value){var W=new z(this.value);W.ok&&(q="rgba("+W.r+", "+W.g+", "+W.b+", "+S.numValue()+")")}return new D.Property(this.name,q)},D.Property.prototype.getDefinition=function(){var S=this.value.match(/#([^\)'"]+)/);return S&&(S=S[1]),S||(S=this.value),D.Definitions[S]},D.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},D.Property.prototype.getFillStyleDefinition=function(S,q){var W=this.getDefinition();if(null!=W&&W.createGradient)return W.createGradient(D.ctx,S,q);if(null!=W&&W.createPattern){if(W.getHrefAttribute().hasValue()){var Z=W.attribute("patternTransform");W=W.getHrefAttribute().getDefinition(),Z.hasValue()&&(W.attribute("patternTransform",!0).value=Z.value)}return W.createPattern(D.ctx,S)}return null},D.Property.prototype.getDPI=function(S){return 96},D.Property.prototype.getEM=function(S){var q=12,W=new D.Property("fontSize",D.Font.Parse(D.ctx.font).fontSize);return W.hasValue()&&(q=W.toPixels(S)),q},D.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")},D.Property.prototype.toPixels=function(S,q){if(!this.hasValue())return 0;var W=this.value+"";if(W.match(/em$/))return this.numValue()*this.getEM(S);if(W.match(/ex$/))return this.numValue()*this.getEM(S)/2;if(W.match(/px$/))return this.numValue();if(W.match(/pt$/))return this.numValue()*this.getDPI(S)*(1/72);if(W.match(/pc$/))return 15*this.numValue();if(W.match(/cm$/))return this.numValue()*this.getDPI(S)/2.54;if(W.match(/mm$/))return this.numValue()*this.getDPI(S)/25.4;if(W.match(/in$/))return this.numValue()*this.getDPI(S);if(W.match(/%$/))return this.numValue()*D.ViewPort.ComputeSize(S);var Z=this.numValue();return q&&Z<1?Z*D.ViewPort.ComputeSize(S):Z},D.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var S=this.value+"";return S.match(/s$/)?1e3*this.numValue():(S.match(/ms$/),this.numValue())},D.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var S=this.value+"";return S.match(/deg$/)?this.numValue()*(Math.PI/180):S.match(/grad$/)?this.numValue()*(Math.PI/200):S.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var G={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return D.Property.prototype.toTextBaseline=function(){return this.hasValue()?G[this.value]:null},D.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(S,q,W,Z,z,k){var Q=null!=k?this.Parse(k):this.CreateFont("","","","","",D.ctx.font);return{fontFamily:z||Q.fontFamily,fontSize:Z||Q.fontSize,fontStyle:S||Q.fontStyle,fontWeight:W||Q.fontWeight,fontVariant:q||Q.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var S=this;this.Parse=function(q){for(var W={},Z=D.trim(D.compressSpaces(q||"")).split(" "),z={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1
},k="",Q=0;Q<Z.length;Q++)z.fontStyle||-1==S.Styles.indexOf(Z[Q])?z.fontVariant||-1==S.Variants.indexOf(Z[Q])?z.fontWeight||-1==S.Weights.indexOf(Z[Q])?z.fontSize?"inherit"!=Z[Q]&&(k+=Z[Q]):("inherit"!=Z[Q]&&(W.fontSize=Z[Q].split("/")[0]),z.fontStyle=z.fontVariant=z.fontWeight=z.fontSize=!0):("inherit"!=Z[Q]&&(W.fontWeight=Z[Q]),z.fontStyle=z.fontVariant=z.fontWeight=!0):("inherit"!=Z[Q]&&(W.fontVariant=Z[Q]),z.fontStyle=z.fontVariant=!0):("inherit"!=Z[Q]&&(W.fontStyle=Z[Q]),z.fontStyle=!0);return""!=k&&(W.fontFamily=k),W}},D.ToNumberArray=function(S){for(var q=D.trim(D.compressSpaces((S||"").replace(/,/g," "))).split(" "),W=0;W<q.length;W++)q[W]=parseFloat(q[W]);return q},D.Point=function(S,q){this.x=S,this.y=q},D.Point.prototype.angleTo=function(S){return Math.atan2(S.y-this.y,S.x-this.x)},D.Point.prototype.applyTransform=function(S){var q=this.x*S[0]+this.y*S[2]+S[4],W=this.x*S[1]+this.y*S[3]+S[5];this.x=q,this.y=W},D.CreatePoint=function(S){var q=D.ToNumberArray(S);return new D.Point(q[0],q[1])},D.CreatePath=function(S){for(var q=D.ToNumberArray(S),W=[],Z=0;Z<q.length;Z+=2)W.push(new D.Point(q[Z],q[Z+1]));return W},D.BoundingBox=function(S,q,W,Z){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(S,q){null!=S&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=S,this.x2=S),S<this.x1&&(this.x1=S),S>this.x2&&(this.x2=S)),null!=q&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=q,this.y2=q),q<this.y1&&(this.y1=q),q>this.y2&&(this.y2=q))},this.addX=function(S){this.addPoint(S,null)},this.addY=function(S){this.addPoint(null,S)},this.addBoundingBox=function(S){this.addPoint(S.x1,S.y1),this.addPoint(S.x2,S.y2)},this.addQuadraticCurve=function(S,q,W,Z,z,k){var Q=S+2/3*(W-S),U=q+2/3*(Z-q),u=Q+1/3*(z-S),D=U+1/3*(k-q);this.addBezierCurve(S,q,Q,u,U,D,z,k)},this.addBezierCurve=function(S,q,W,Z,z,k,Q,U){var u=[S,q],D=[W,Z],G=[z,k],b=[Q,U];this.addPoint(u[0],u[1]),this.addPoint(b[0],b[1]);for(var v=0;v<=1;v++){var j=function(S){return Math.pow(1-S,3)*u[v]+3*Math.pow(1-S,2)*S*D[v]+3*(1-S)*Math.pow(S,2)*G[v]+Math.pow(S,3)*b[v]},i=6*u[v]-12*D[v]+6*G[v],n=-3*u[v]+9*D[v]-9*G[v]+3*b[v],P=3*D[v]-3*u[v];if(0!=n){var R=Math.pow(i,2)-4*P*n;if(!(R<0)){var _=(-i+Math.sqrt(R))/(2*n);0<_&&_<1&&(0==v&&this.addX(j(_)),1==v&&this.addY(j(_)));var x=(-i-Math.sqrt(R))/(2*n);0<x&&x<1&&(0==v&&this.addX(j(x)),1==v&&this.addY(j(x)))}}else{if(0==i)continue;var K=-P/i;0<K&&K<1&&(0==v&&this.addX(j(K)),1==v&&this.addY(j(K)))}}},this.isPointInBox=function(S,q){return this.x1<=S&&S<=this.x2&&this.y1<=q&&q<=this.y2},this.addPoint(S,q),this.addPoint(W,Z)},D.Transform=function(S){var q=this;this.Type={},this.Type.translate=function(S){this.p=D.CreatePoint(S),this.getMatrix=function(){return[1,0,0,1,this.p.x||0,this.p.y||0]},this.apply=function(S){S.translate(this.p.x||0,this.p.y||0)},this.unapply=function(S){S.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(S){S.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(S){var q=D.ToNumberArray(S);this.angle=new D.Property("angle",q[0]),this.cx=q[1]||0,this.cy=q[2]||0,this.apply=function(S){S.translate(this.cx,this.cy),S.rotate(this.angle.toRadians()),S.translate(-this.cx,-this.cy)},this.getMatrix=function(){var S=this.angle.toRadians(),q=Math.sin(S),W=Math.cos(S),Z=this.cx,z=this.cy;return[W,q,-q,W,W*-Z+q*z+Z,q*-Z-W*z+z]},this.unapply=function(S){S.translate(this.cx,this.cy),S.rotate(-1*this.angle.toRadians()),S.translate(-this.cx,-this.cy)},this.applyToPoint=function(S){var q=this.angle.toRadians();S.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),S.applyTransform([Math.cos(q),Math.sin(q),-Math.sin(q),Math.cos(q),0,0]),S.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(S){this.p=D.CreatePoint(S),this.getMatrix=function(){return[this.p.x||1,0,0,this.p.y||this.p.x||1,0,0]},this.apply=function(S){S.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(S){S.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(S){S.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(S){this.m=D.ToNumberArray(S),this.getMatrix=function(){return this.m},this.apply=function(S){S.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(S){var q=this.m[0],W=this.m[2],Z=this.m[4],z=this.m[1],k=this.m[3],Q=this.m[5],U=1/(q*(1*k-0*Q)-W*(1*z-0*Q)+Z*(0*z-0*k));S.transform(U*(1*k-0*Q),U*(0*Q-1*z),U*(0*Z-1*W),U*(1*q-0*Z),U*(W*Q-Z*k),U*(Z*z-q*Q))},this.applyToPoint=function(S){S.applyTransform(this.m)}},this.Type.SkewBase=function(S){this.base=q.Type.matrix,this.base(S),this.angle=new D.Property("angle",S)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(S){this.base=q.Type.SkewBase,this.base(S),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(S){this.base=q.Type.SkewBase,this.base(S),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.getMatrix=function(){for(var S=1,q=0,W=0,Z=1,z=0,k=0,Q=0;Q<this.transforms.length;Q++){var U=this.transforms[Q].getMatrix(),u=S,D=q,G=W,b=Z,v=z,j=k;S=u*U[0]+G*U[1],q=D*U[0]+b*U[1],W=u*U[2]+G*U[3],Z=D*U[2]+b*U[3],z=u*U[4]+G*U[5]+v,k=D*U[4]+b*U[5]+j}return[S,q,W,Z,z,k]},this.apply=function(S){for(var q=0;q<this.transforms.length;q++)this.transforms[q].apply(S)},this.unapply=function(S){for(var q=this.transforms.length-1;q>=0;q--)this.transforms[q].unapply(S)},this.applyToPoint=function(S){for(var q=0;q<this.transforms.length;q++)this.transforms[q].applyToPoint(S)};for(var W=D.trim(D.compressSpaces(S)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),Z=0;Z<W.length;Z++){var z=D.trim(W[Z].split("(")[0]),k=W[Z].split("(")[1].replace(")",""),Q=this.Type[z];if(void 0!==Q){var U=new Q(k);U.type=z,this.transforms.push(U)}}},D.AspectRatio=function(S,q,W,Z,z,k,Q,U,u,G){q=D.compressSpaces(q),q=q.replace(/^defer\s/,"");var b=q.split(" ")[0]||"xMidYMid",v=q.split(" ")[1]||"meet",j=W/Z,i=z/k,n=Math.min(j,i),P=Math.max(j,i);"meet"==v&&(Z*=n,k*=n),"slice"==v&&(Z*=P,k*=P),u=new D.Property("refX",u),G=new D.Property("refY",G),u.hasValue()&&G.hasValue()?S.translate(-n*u.toPixels("x"),-n*G.toPixels("y")):(b.match(/^xMid/)&&("meet"==v&&n==i||"slice"==v&&P==i)&&S.translate(W/2-Z/2,0),b.match(/YMid$/)&&("meet"==v&&n==j||"slice"==v&&P==j)&&S.translate(0,z/2-k/2),b.match(/^xMax/)&&("meet"==v&&n==i||"slice"==v&&P==i)&&S.translate(W-Z,0),b.match(/YMax$/)&&("meet"==v&&n==j||"slice"==v&&P==j)&&S.translate(0,z-k)),"none"==b?S.scale(j,i):"meet"==v?S.scale(n,n):"slice"==v&&S.scale(P,P),S.translate(null==Q?0:-Q,null==U?0:-U)},D.Element={},D.EmptyProperty=new D.Property("EMPTY",""),D.Element.ElementBase=function(S){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(S,q){var W=this.attributes[S];return null!=W?W:(1==q&&(W=new D.Property(S,""),this.attributes[S]=W),W||D.EmptyProperty)},this.getHrefAttribute=function(){for(var S in this.attributes)if("href"==S||S.match(/:href$/))return this.attributes[S];return D.EmptyProperty},this.style=function(S,q,W){var Z=this.styles[S];if(null!=Z)return Z;var z=this.attribute(S);if(null!=z&&z.hasValue())return this.styles[S]=z,z;if(1!=W){var k=this.parent;if(null!=k){var Q=k.style(S);if(null!=Q&&Q.hasValue())return Q}}return 1==q&&(Z=new D.Property(S,""),this.styles[S]=Z),Z||D.EmptyProperty},this.render=function(S){if("g"==this.type&&(S._svgId=this.attribute("id").value),"none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(S.save(),this.style("mask").hasValue()){var q=this.style("mask").getDefinition();null!=q&&q.apply(S,this)}else this.setContext(S),this.renderChildren(S),this.clearContext(S);S.restore()}},this.setContext=function(S){},this.clearContext=function(S){},this.renderChildren=function(S){for(var q=0;q<this.children.length;q++)this.children[q].render(S)},this.addChild=function(S,q){var W=S;q&&(W=D.CreateElement(S)),W.parent=this,"title"!=W.type&&this.children.push(W)},this.addStylesFromStyleDefinition=function(){for(var q in D.Styles)if("@"!=q[0]&&u(S,q)){var W=D.Styles[q],Z=D.StylesSpecificity[q];if(null!=W)for(var z in W){var k=this.stylesSpecificity[z];void 0===k&&(k="000"),Z>k&&(this.styles[z]=W[z],this.stylesSpecificity[z]=Z)}}};var q=new RegExp("^[A-Z-]+$");if(null!=S&&1==S.nodeType){for(var W=0;W<S.attributes.length;W++){var Z=S.attributes[W],z=function(S){return q.test(S)?S.toLowerCase():S}(Z.nodeName);this.attributes[z]=new D.Property(z,Z.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var k=this.attribute("style").value.split(";"),W=0;W<k.length;W++)if(""!=D.trim(k[W])){var Q=k[W].split(":"),U=D.trim(Q[0]),G=D.trim(Q[1]);this.styles[U]=new D.Property(U,G)}this.attribute("id").hasValue()&&null==D.Definitions[this.attribute("id").value]&&(D.Definitions[this.attribute("id").value]=this);for(var W=0;W<S.childNodes.length;W++){var b=S.childNodes[W];if(1==b.nodeType&&this.addChild(b,!0),this.captureTextNodes&&(3==b.nodeType||4==b.nodeType)){var v=b.value||b.text||b.textContent||"";""!=D.compressSpaces(v)&&this.addChild(new D.Element.tspan(b),!1)}}}},D.Element.RenderedElementBase=function(S){this.base=D.Element.ElementBase,this.base(S),this.setContext=function(S,q){if(!q){if(this.style("fill").isUrlDefinition()){var W=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=W&&(S.fillStyle=W)}else if(this.style("fill").hasValue()){var Z=this.style("fill");"currentColor"==Z.value&&(Z.value=this.style("color").value),"inherit"!=Z.value&&(S.fillStyle="none"==Z.value?"rgba(0,0,0,0)":Z.value)}if(this.style("fill-opacity").hasValue()){var Z=new D.Property("fill",S.fillStyle);Z=Z.addOpacity(this.style("fill-opacity")),S.fillStyle=Z.value}if(this.style("stroke").isUrlDefinition()){var W=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=W&&(S.strokeStyle=W)}else if(this.style("stroke").hasValue()){var z=this.style("stroke");"currentColor"==z.value&&(z.value=this.style("color").value),"inherit"!=z.value&&(S.strokeStyle="none"==z.value?"rgba(0,0,0,0)":z.value)}if(this.style("stroke-opacity").hasValue()){var z=new D.Property("stroke",S.strokeStyle);z=z.addOpacity(this.style("stroke-opacity")),S.strokeStyle=z.value}if(this.style("stroke-width").hasValue()){var k=this.style("stroke-width").toPixels();S.lineWidth=0==k?.001:k}if(this.style("stroke-linecap").hasValue()&&(S.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(S.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(S.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var Q=D.ToNumberArray(this.style("stroke-dasharray").value);void 0!==S.setLineDash?S.setLineDash(Q):void 0!==S.webkitLineDash?S.webkitLineDash=Q:void 0===S.mozDash||1==Q.length&&0==Q[0]||(S.mozDash=Q);var U=this.style("stroke-dashoffset").numValueOrDefault(1);void 0!==S.lineDashOffset?S.lineDashOffset=U:void 0!==S.webkitLineDashOffset?S.webkitLineDashOffset=U:void 0!==S.mozDashOffset&&(S.mozDashOffset=U)}if(void 0!==S.font){var u=this.style("font-size"),G=D.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,u.hasValue()?u.toPixels()+"px":"",this.style("font-family").value);u!==D.EmptyProperty&&u.value!=G.fontSize&&(this.styles["font-size"]=new D.Property("font-size",G.fontSize)),S.font=G.toString()}this.style("text-align").hasValue()?S.textAlign=this.style("text-align").value:S.textAlign="start"}if(this.style("transform",!1,!0).hasValue()){new D.Transform(this.style("transform",!1,!0).value).apply(S)}if(this.style("clip-path",!1,!0).hasValue()){var b=this.style("clip-path",!1,!0).getDefinition();null!=b&&b.apply(S)}this.style("opacity").hasValue()&&(S.globalAlpha=this.style("opacity").numValue())}},D.Element.RenderedElementBase.prototype=new D.Element.ElementBase,D.Element.PathElementBase=function(S){this.base=D.Element.RenderedElementBase,this.base(S),this.path=function(S){return null!=S&&S.beginPath(),new D.BoundingBox},this.renderChildren=function(S){this.path(S),D.Mouse.checkPath(this,S),""!=S.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?S.fill(this.style("fill-rule").value):S.fill()),""!=S.strokeStyle&&S.stroke();var q=this.getMarkers();if(null!=q){if(this.style("marker-start").isUrlDefinition()){var W=this.style("marker-start").getDefinition();if(!W)return;W.render(S,q[0][0],q[0][1],"start")}if(this.style("marker-mid").isUrlDefinition()){var W=this.style("marker-mid").getDefinition();if(!W)return;for(var Z=1;Z<q.length-1;Z++)W.render(S,q[Z][0],q[Z][1],"mid",q[Z-1][1])}if(this.style("marker-end").isUrlDefinition()){var W=this.style("marker-end").getDefinition();if(!W)return;W.render(S,q[q.length-1][0],q[q.length-1][1],"end")}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},D.Element.PathElementBase.prototype=new D.Element.RenderedElementBase,D.Element.svg=function(q){this.base=D.Element.RenderedElementBase,this.base(q),this.baseClearContext=this.clearContext,this.clearContext=function(S){this.baseClearContext(S),D.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(q){q.strokeStyle="rgba(0,0,0,0)",q.lineCap="butt",q.lineJoin="miter",q.miterLimit=4,void 0!==q.font&&void 0!==S.getComputedStyle&&(q.font=S.getComputedStyle(q.canvas).getPropertyValue("font")),this.baseSetContext(q),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),q.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var W=D.ViewPort.width(),Z=D.ViewPort.height(),z=0,k=0;if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),void 0===this.root&&(W=this.attribute("width").toPixels("x"),Z=this.attribute("height").toPixels("y"),this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(z=-this.attribute("refX").toPixels("x"),k=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(q.beginPath(),q.moveTo(z,k),q.lineTo(W,k),q.lineTo(W,Z),q.lineTo(z,Z),q.closePath(),q.clip())),D.ViewPort.SetCurrent(W,Z),this.attribute("viewBox").hasValue()){var Q=D.ToNumberArray(this.attribute("viewBox").value),U=Q[0],u=Q[1];W=Q[2],Z=Q[3],D.AspectRatio(q,this.attribute("preserveAspectRatio").value,D.ViewPort.width(),W,D.ViewPort.height(),Z,U,u,this.attribute("refX").value,this.attribute("refY").value),D.ViewPort.RemoveCurrent(),D.ViewPort.SetCurrent(Q[2],Q[3])}else 0===z&&0===k||q.translate(z,k)}},D.Element.svg.prototype=new D.Element.RenderedElementBase,D.Element.rect=function(S){this.base=D.Element.PathElementBase,this.base(S),this.path=function(S){var q=this.attribute("x").toPixels("x"),W=this.attribute("y").toPixels("y"),Z=this.attribute("width").toPixels("x"),z=this.attribute("height").toPixels("y"),k=this.attribute("rx").toPixels("x"),Q=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(Q=k),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(k=Q),k=Math.min(k,Z/2),Q=Math.min(Q,z/2),null!=S&&(S.beginPath(),S.moveTo(q+k,W),S.lineTo(q+Z-k,W),S.quadraticCurveTo(q+Z,W,q+Z,W+Q),S.lineTo(q+Z,W+z-Q),S.quadraticCurveTo(q+Z,W+z,q+Z-k,W+z),S.lineTo(q+k,W+z),S.quadraticCurveTo(q,W+z,q,W+z-Q),S.lineTo(q,W+Q),S.quadraticCurveTo(q,W,q+k,W),S.closePath()),new D.BoundingBox(q,W,q+Z,W+z)}},D.Element.rect.prototype=new D.Element.PathElementBase,D.Element.circle=function(S){this.base=D.Element.PathElementBase,this.base(S),this.path=function(S){var q=this.attribute("cx").toPixels("x"),W=this.attribute("cy").toPixels("y"),Z=this.attribute("r").toPixels();return null!=S&&(S.beginPath(),S.arc(q,W,Z,0,2*Math.PI,!0),S.closePath()),new D.BoundingBox(q-Z,W-Z,q+Z,W+Z)}},D.Element.circle.prototype=new D.Element.PathElementBase,D.Element.ellipse=function(S){this.base=D.Element.PathElementBase,this.base(S),this.path=function(S){var q=(Math.sqrt(2)-1)/3*4,W=this.attribute("rx").toPixels("x"),Z=this.attribute("ry").toPixels("y"),z=this.attribute("cx").toPixels("x"),k=this.attribute("cy").toPixels("y");return null!=S&&(S.beginPath(),S.moveTo(z,k-Z),S.bezierCurveTo(z+q*W,k-Z,z+W,k-q*Z,z+W,k),S.bezierCurveTo(z+W,k+q*Z,z+q*W,k+Z,z,k+Z),S.bezierCurveTo(z-q*W,k+Z,z-W,k+q*Z,z-W,k),S.bezierCurveTo(z-W,k-q*Z,z-q*W,k-Z,z,k-Z),S.closePath()),new D.BoundingBox(z-W,k-Z,z+W,k+Z)}},D.Element.ellipse.prototype=new D.Element.PathElementBase,D.Element.line=function(S){this.base=D.Element.PathElementBase,this.base(S),this.getPoints=function(){return[new D.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new D.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(S){var q=this.getPoints();return null!=S&&(S.beginPath(),S.moveTo(q[0].x,q[0].y),S.lineTo(q[1].x,q[1].y)),new D.BoundingBox(q[0].x,q[0].y,q[1].x,q[1].y)},this.getMarkers=function(){var S=this.getPoints(),q=S[0].angleTo(S[1]);return[[S[0],q],[S[1],q]]}},D.Element.line.prototype=new D.Element.PathElementBase,D.Element.polyline=function(S){this.base=D.Element.PathElementBase,this.base(S),this.points=D.CreatePath(this.attribute("points").value),this.path=function(S){var q=new D.BoundingBox(this.points[0].x,this.points[0].y);null!=S&&(S.beginPath(),S.moveTo(this.points[0].x,this.points[0].y));for(var W=1;W<this.points.length;W++)q.addPoint(this.points[W].x,this.points[W].y),null!=S&&S.lineTo(this.points[W].x,this.points[W].y);return q},this.getMarkers=function(){for(var S=[],q=0;q<this.points.length-1;q++)S.push([this.points[q],this.points[q].angleTo(this.points[q+1])]);return S.length>0&&S.push([this.points[this.points.length-1],S[S.length-1][1]]),S}},D.Element.polyline.prototype=new D.Element.PathElementBase,D.Element.polygon=function(S){this.base=D.Element.polyline,this.base(S),this.basePath=this.path,this.path=function(S){var q=this.basePath(S);return null!=S&&(S.lineTo(this.points[0].x,this.points[0].y),S.closePath()),q}},D.Element.polygon.prototype=new D.Element.polyline,D.Element.path=function(S){this.base=D.Element.PathElementBase,this.base(S);var q=this.attribute("d").value;q=q.replace(/,/gm," ");for(var W=0;W<2;W++)q=q.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");q=q.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),q=q.replace(/([0-9])([+\-])/gm,"$1 $2");for(var W=0;W<2;W++)q=q.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");q=q.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),q=D.compressSpaces(q),q=D.trim(q),this.PathParser=new function(S){this.tokens=S.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new D.Point(0,0),this.control=new D.Point(0,0),this.current=new D.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var S=new D.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(S)},this.getAsControlPoint=function(){var S=this.getPoint();return this.control=S,S},this.getAsCurrentPoint=function(){var S=this.getPoint();return this.current=S,S},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new D.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(S){return this.isRelativeCommand()&&(S.x+=this.current.x,S.y+=this.current.y),S},this.addMarker=function(S,q,W){null!=W&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(W)),this.addMarkerAngle(S,null==q?null:q.angleTo(S))},this.addMarkerAngle=function(S,q){this.points.push(S),this.angles.push(q)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var S=0;S<this.angles.length;S++)if(null==this.angles[S])for(var q=S+1;q<this.angles.length;q++)if(null!=this.angles[q]){this.angles[S]=this.angles[q];break}return this.angles}}(q),this.path=function(S){var q=this.PathParser;q.reset();var W=new D.BoundingBox;for(null!=S&&S.beginPath();!q.isEnd();)switch(q.nextCommand(),q.command){case"M":case"m":var Z=q.getAsCurrentPoint();for(q.addMarker(Z),W.addPoint(Z.x,Z.y),null!=S&&S.moveTo(Z.x,Z.y),q.start=q.current;!q.isCommandOrEnd();){var Z=q.getAsCurrentPoint();q.addMarker(Z,q.start),W.addPoint(Z.x,Z.y),null!=S&&S.lineTo(Z.x,Z.y)}break;case"L":case"l":for(;!q.isCommandOrEnd();){var z=q.current,Z=q.getAsCurrentPoint();q.addMarker(Z,z),W.addPoint(Z.x,Z.y),null!=S&&S.lineTo(Z.x,Z.y)}break;case"H":case"h":for(;!q.isCommandOrEnd();){var k=new D.Point((q.isRelativeCommand()?q.current.x:0)+q.getScalar(),q.current.y);q.addMarker(k,q.current),q.current=k,W.addPoint(q.current.x,q.current.y),null!=S&&S.lineTo(q.current.x,q.current.y)}break;case"V":case"v":for(;!q.isCommandOrEnd();){var k=new D.Point(q.current.x,(q.isRelativeCommand()?q.current.y:0)+q.getScalar());q.addMarker(k,q.current),q.current=k,W.addPoint(q.current.x,q.current.y),null!=S&&S.lineTo(q.current.x,q.current.y)}break;case"C":case"c":for(;!q.isCommandOrEnd();){var Q=q.current,U=q.getPoint(),u=q.getAsControlPoint(),G=q.getAsCurrentPoint();q.addMarker(G,u,U),W.addBezierCurve(Q.x,Q.y,U.x,U.y,u.x,u.y,G.x,G.y),null!=S&&S.bezierCurveTo(U.x,U.y,u.x,u.y,G.x,G.y)}break;case"S":case"s":for(;!q.isCommandOrEnd();){var Q=q.current,U=q.getReflectedControlPoint(),u=q.getAsControlPoint(),G=q.getAsCurrentPoint();q.addMarker(G,u,U),W.addBezierCurve(Q.x,Q.y,U.x,U.y,u.x,u.y,G.x,G.y),null!=S&&S.bezierCurveTo(U.x,U.y,u.x,u.y,G.x,G.y),q.previousCommand=q.command}break;case"Q":case"q":for(;!q.isCommandOrEnd();){var Q=q.current,u=q.getAsControlPoint(),G=q.getAsCurrentPoint();q.addMarker(G,u,u),W.addQuadraticCurve(Q.x,Q.y,u.x,u.y,G.x,G.y),null!=S&&S.quadraticCurveTo(u.x,u.y,G.x,G.y)}break;case"T":case"t":for(;!q.isCommandOrEnd();){var Q=q.current,u=q.getReflectedControlPoint();q.control=u;var G=q.getAsCurrentPoint();q.addMarker(G,u,u),W.addQuadraticCurve(Q.x,Q.y,u.x,u.y,G.x,G.y),null!=S&&S.quadraticCurveTo(u.x,u.y,G.x,G.y),q.previousCommand=q.command}break;case"A":case"a":for(;!q.isCommandOrEnd();){var Q=q.current,b=q.getScalar(),v=q.getScalar(),j=q.getScalar()*(Math.PI/180),i=q.getScalar(),n=q.getScalar(),G=q.getAsCurrentPoint(),P=new D.Point(Math.cos(j)*(Q.x-G.x)/2+Math.sin(j)*(Q.y-G.y)/2,-Math.sin(j)*(Q.x-G.x)/2+Math.cos(j)*(Q.y-G.y)/2),R=Math.pow(P.x,2)/Math.pow(b,2)+Math.pow(P.y,2)/Math.pow(v,2);if(R<1e-6)q.addMarker(G,Q),W.addPoint(G.x,G.y),null!=S&&S.lineTo(G.x,G.y);else{R>1&&(b*=Math.sqrt(R),v*=Math.sqrt(R));var _=(i==n?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(v,2)-Math.pow(b,2)*Math.pow(P.y,2)-Math.pow(v,2)*Math.pow(P.x,2))/(Math.pow(b,2)*Math.pow(P.y,2)+Math.pow(v,2)*Math.pow(P.x,2)));isNaN(_)&&(_=0);var x=new D.Point(_*b*P.y/v,_*-v*P.x/b),K=new D.Point((Q.x+G.x)/2+Math.cos(j)*x.x-Math.sin(j)*x.y,(Q.y+G.y)/2+Math.sin(j)*x.x+Math.cos(j)*x.y),d=function(S){return Math.sqrt(Math.pow(S[0],2)+Math.pow(S[1],2))},N=function(S,q){return(S[0]*q[0]+S[1]*q[1])/(d(S)*d(q))},m=function(S,q){return(S[0]*q[1]<S[1]*q[0]?-1:1)*Math.acos(N(S,q))},t=m([1,0],[(P.x-x.x)/b,(P.y-x.y)/v]),V=[(P.x-x.x)/b,(P.y-x.y)/v],C=[(-P.x-x.x)/b,(-P.y-x.y)/v],O=m(V,C);N(V,C)<=-1&&(O=Math.PI),N(V,C)>=1&&(O=0);var e=1-n?1:-1,L=t+e*(O/2),$=new D.Point(K.x+b*Math.cos(L),K.y+v*Math.sin(L));if(q.addMarkerAngle($,L-e*Math.PI/2),q.addMarkerAngle(G,L-e*Math.PI),W.addPoint(G.x,G.y),null!=S){var N=b>v?b:v,y=b>v?1:b/v,c=b>v?v/b:1;S.translate(K.x,K.y),S.rotate(j),S.scale(y,c),S.arc(0,0,N,t,t+O,1-n),S.scale(1/y,1/c),S.rotate(-j),S.translate(-K.x,-K.y)}}}break;case"Z":case"z":null!=S&&S.closePath(),q.current=q.start}return W},this.getMarkers=function(){for(var S=this.PathParser.getMarkerPoints(),q=this.PathParser.getMarkerAngles(),W=[],Z=0;Z<S.length;Z++)W.push([S[Z],q[Z]]);return W}},D.Element.path.prototype=new D.Element.PathElementBase,D.Element.pattern=function(S){this.base=D.Element.ElementBase,this.base(S),this.createPattern=function(S,q){var W=this.attribute("width").toPixels("x",!0),Z=this.attribute("height").toPixels("y",!0),z=new D.Element.svg;z.attributes.viewBox=new D.Property("viewBox",this.attribute("viewBox").value),z.attributes.width=new D.Property("width",W+"px"),z.attributes.height=new D.Property("height",Z+"px"),z.attributes.transform=new D.Property("transform",this.attribute("patternTransform").value),z.children=this.children;var k=document.createElement("canvas");k.width=W,k.height=Z;var Q=k.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&Q.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var U=-1;U<=1;U++)for(var u=-1;u<=1;u++)Q.save(),z.attributes.x=new D.Property("x",U*k.width),z.attributes.y=new D.Property("y",u*k.height),z.render(Q),Q.restore();return S.createPattern(k,"repeat")}},D.Element.pattern.prototype=new D.Element.ElementBase,D.Element.marker=function(S){this.base=D.Element.ElementBase,this.base(S),this.baseRender=this.render,this.render=function(S,q,Z,z,k){if(k!==W){Z=(Z+k)/2;var Q=(Z-k)%(2*Math.PI);Math.abs(Q)>Math.PI&&(Z+=Math.PI)}if(q){S.save(),S.translate(q.x,q.y);var U=this.attribute("orient").valueOrDefault("auto")||"";"auto"===U?S.rotate(Z):"auto-start-reverse"===U?S.rotate("start"===z?Z+Math.PI:Z):U&&S.rotate(new D.Property("angle",U).toRadians()),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&S.scale(S.lineWidth,S.lineWidth);var u=new D.Element.svg;u.attributes.viewBox=new D.Property("viewBox",this.attribute("viewBox").value),u.attributes.refX=new D.Property("refX",this.attribute("refX").value),u.attributes.refY=new D.Property("refY",this.attribute("refY").value),u.attributes.width=new D.Property("width",this.attribute("markerWidth").value),u.attributes.height=new D.Property("height",this.attribute("markerHeight").value),u.attributes.fill=new D.Property("fill",this.attribute("fill").valueOrDefault("black")),u.attributes.stroke=new D.Property("stroke",this.attribute("stroke").valueOrDefault("none")),u.children=this.children,u.render(S),S.restore()}}},D.Element.marker.prototype=new D.Element.ElementBase,D.Element.defs=function(S){this.base=D.Element.ElementBase,this.base(S),this.render=function(S){}},D.Element.defs.prototype=new D.Element.ElementBase,D.Element.GradientBase=function(S){this.base=D.Element.ElementBase,this.base(S),this.stops=[];for(var q=0;q<this.children.length;q++){var W=this.children[q];"stop"==W.type&&this.stops.push(W)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(S){for(var q=0;q<this.attributesToInherit.length;q++){var W=this.attributesToInherit[q];!this.attribute(W).hasValue()&&S.attribute(W).hasValue()&&(this.attribute(W,!0).value=S.attribute(W).value)}},this.createGradient=function(S,q,W){var Z=this;this.getHrefAttribute().hasValue()&&(Z=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(Z));var z=function(S){if(W.hasValue()){return new D.Property("color",S).addOpacity(W).value}return S},k=this.getGradient(S,q);if(null==k)return z(Z.stops[Z.stops.length-1].color);for(var Q=0;Q<Z.stops.length;Q++)k.addColorStop(Z.stops[Q].offset,z(Z.stops[Q].color));if(this.attribute("gradientTransform").hasValue()){var U=D.ViewPort.viewPorts[0],u=new D.Element.rect;u.attributes.x=new D.Property("x",-D.MAX_VIRTUAL_PIXELS/3),u.attributes.y=new D.Property("y",-D.MAX_VIRTUAL_PIXELS/3),u.attributes.width=new D.Property("width",D.MAX_VIRTUAL_PIXELS),u.attributes.height=new D.Property("height",D.MAX_VIRTUAL_PIXELS);var G=new D.Element.g;G.attributes.transform=new D.Property("transform",this.attribute("gradientTransform").value),G.children=[u];var b=new D.Element.svg;b.attributes.x=new D.Property("x",0),b.attributes.y=new D.Property("y",0),b.attributes.width=new D.Property("width",U.width),b.attributes.height=new D.Property("height",U.height),b.children=[G];var v=document.createElement("canvas");v.width=U.width,v.height=U.height;var j=v.getContext("2d");j.fillStyle=k,b.render(j);var i=j.createPattern(v,"no-repeat");return i.gradient=k,i.gradientTransform=this.attribute("gradientTransform").value,i.trans=new D.Transform(this.attribute("gradientTransform").value).getMatrix(),i}return k}},D.Element.GradientBase.prototype=new D.Element.ElementBase,D.Element.linearGradient=function(S){this.base=D.Element.GradientBase,this.base(S),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(S,q){var W="objectBoundingBox"==this.gradientUnits()?q.getBoundingBox(S):null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var Z="objectBoundingBox"==this.gradientUnits()?W.x()+W.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),z="objectBoundingBox"==this.gradientUnits()?W.y()+W.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),k="objectBoundingBox"==this.gradientUnits()?W.x()+W.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),Q="objectBoundingBox"==this.gradientUnits()?W.y()+W.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return Z==k&&z==Q?null:S.createLinearGradient(Z,z,k,Q)}},D.Element.linearGradient.prototype=new D.Element.GradientBase,D.Element.radialGradient=function(S){this.base=D.Element.GradientBase,this.base(S),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(S,q){var W=q.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var Z="objectBoundingBox"==this.gradientUnits()?W.x()+W.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),z="objectBoundingBox"==this.gradientUnits()?W.y()+W.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),k=Z,Q=z;this.attribute("fx").hasValue()&&(k="objectBoundingBox"==this.gradientUnits()?W.x()+W.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(Q="objectBoundingBox"==this.gradientUnits()?W.y()+W.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var U="objectBoundingBox"==this.gradientUnits()?(W.width()+W.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return S.createRadialGradient(k,Q,0,Z,z,U)}},
D.Element.radialGradient.prototype=new D.Element.GradientBase,D.Element.stop=function(S){this.base=D.Element.ElementBase,this.base(S),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var q=this.style("stop-color",!0);""===q.value&&(q.value="#000"),this.style("stop-opacity").hasValue()&&(q=q.addOpacity(this.style("stop-opacity"))),this.color=q.value},D.Element.stop.prototype=new D.Element.ElementBase,D.Element.AnimateBase=function(S){this.base=D.Element.ElementBase,this.base(S),D.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var S=this.attribute("attributeType").value,q=this.attribute("attributeName").value;return"CSS"==S?this.parent.style(q,!0):this.parent.attribute(q,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(S){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+S;var q=!1;if(this.begin<this.duration){var W=this.calcValue();if(this.attribute("type").hasValue()){W=this.attribute("type").value+"("+W+")"}this.getProperty().value=W,q=!0}return q},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var S={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var q=S.progress*(this.values.value.length-1),W=Math.floor(q),Z=Math.ceil(q);S.from=new D.Property("from",parseFloat(this.values.value[W])),S.to=new D.Property("to",parseFloat(this.values.value[Z])),S.progress=(q-W)/(Z-W)}else S.from=this.from,S.to=this.to;return S}},D.Element.AnimateBase.prototype=new D.Element.ElementBase,D.Element.animate=function(S){this.base=D.Element.AnimateBase,this.base(S),this.calcValue=function(){var S=this.progress();return S.from.numValue()+(S.to.numValue()-S.from.numValue())*S.progress+this.initialUnits}},D.Element.animate.prototype=new D.Element.AnimateBase,D.Element.animateColor=function(S){this.base=D.Element.AnimateBase,this.base(S),this.calcValue=function(){var S=this.progress(),q=new z(S.from.value),W=new z(S.to.value);if(q.ok&&W.ok){var Z=q.r+(W.r-q.r)*S.progress,k=q.g+(W.g-q.g)*S.progress,Q=q.b+(W.b-q.b)*S.progress;return"rgb("+parseInt(Z,10)+","+parseInt(k,10)+","+parseInt(Q,10)+")"}return this.attribute("from").value}},D.Element.animateColor.prototype=new D.Element.AnimateBase,D.Element.animateTransform=function(S){this.base=D.Element.AnimateBase,this.base(S),this.calcValue=function(){for(var S=this.progress(),q=D.ToNumberArray(S.from.value),W=D.ToNumberArray(S.to.value),Z="",z=0;z<q.length;z++)Z+=q[z]+(W[z]-q[z])*S.progress+" ";return Z}},D.Element.animateTransform.prototype=new D.Element.animate,D.Element.font=function(S){this.base=D.Element.ElementBase,this.base(S),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var q=0;q<this.children.length;q++){var W=this.children[q];"font-face"==W.type?(this.fontFace=W,W.style("font-family").hasValue()&&(D.Definitions[W.style("font-family").value]=this)):"missing-glyph"==W.type?this.missingGlyph=W:"glyph"==W.type&&(""!=W.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[W.unicode]&&(this.glyphs[W.unicode]=[]),this.glyphs[W.unicode][W.arabicForm]=W):this.glyphs[W.unicode]=W)}},D.Element.font.prototype=new D.Element.ElementBase,D.Element.fontface=function(S){this.base=D.Element.ElementBase,this.base(S),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},D.Element.fontface.prototype=new D.Element.ElementBase,D.Element.missingglyph=function(S){this.base=D.Element.path,this.base(S),this.horizAdvX=0},D.Element.missingglyph.prototype=new D.Element.path,D.Element.glyph=function(S){this.base=D.Element.path,this.base(S),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},D.Element.glyph.prototype=new D.Element.path,D.Element.text=function(S){this.captureTextNodes=!0,this.base=D.Element.RenderedElementBase,this.base(S),this.baseSetContext=this.setContext,this.setContext=function(S){this.baseSetContext(S);var q=this.style("dominant-baseline").toTextBaseline();null==q&&(q=this.style("alignment-baseline").toTextBaseline()),null!=q&&(S.textBaseline=q)},this.getBoundingBox=function(){var S=this.attribute("x").toPixels("x"),q=this.attribute("y").toPixels("y"),W=this.parent.style("font-size").numValueOrDefault(D.Font.Parse(D.ctx.font).fontSize);return new D.BoundingBox(S,q-W,S+Math.floor(2*W/3)*this.children[0].getText().length,q)},this.renderChildren=function(S){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(S,this,0);for(var q=0;q<this.children.length;q++)this.renderChild(S,this,this,q)},this.getAnchorDelta=function(S,q,W){var Z=this.style("text-anchor").valueOrDefault("start");if("start"!=Z){for(var z=0,k=W;k<q.children.length;k++){var Q=q.children[k];if(k>W&&Q.attribute("x").hasValue())break;Q.measureTextRecursive&&(z+=Q.measureTextRecursive(S))}return-1*("end"==Z?z:z/2)}return 0},this.renderChild=function(S,q,W,Z){var z=W.children[Z];z.attribute("x").hasValue()?(z.x=z.attribute("x").toPixels("x")+q.getAnchorDelta(S,W,Z),z.attribute("dx").hasValue()&&(z.x+=z.attribute("dx").toPixels("x"))):(z.attribute("dx").hasValue()&&(q.x+=z.attribute("dx").toPixels("x")),z.x=q.x),q.x=z.x+(z.measureText?z.measureText(S):0),z.attribute("y").hasValue()?(z.y=z.attribute("y").toPixels("y"),z.attribute("dy").hasValue()&&(z.y+=z.attribute("dy").toPixels("y"))):(z.attribute("dy").hasValue()&&(q.y+=z.attribute("dy").toPixels("y")),z.y=q.y),q.y=z.y,z.render(S);for(var Z=0;Z<z.children.length;Z++)q.renderChild(S,q,z,Z)}},D.Element.text.prototype=new D.Element.RenderedElementBase,D.Element.TextElementBase=function(q){this.base=D.Element.RenderedElementBase,this.base(q),this.getGlyph=function(S,q,W){var Z=q[W],z=null;if(S.isArabic){var k="isolated";(0==W||" "==q[W-1])&&W<q.length-2&&" "!=q[W+1]&&(k="terminal"),W>0&&" "!=q[W-1]&&W<q.length-2&&" "!=q[W+1]&&(k="medial"),W>0&&" "!=q[W-1]&&(W==q.length-1||" "==q[W+1])&&(k="initial"),void 0!==S.glyphs[Z]&&null==(z=S.glyphs[Z][k])&&"glyph"==S.glyphs[Z].type&&(z=S.glyphs[Z])}else z=S.glyphs[Z];return null==z&&(z=S.missingGlyph),z},this.renderChildren=function(q){var W=this.parent.style("font-family").getDefinition();if(null==W){"\u5168\u666f\u76d1\u63a7"==this.getText()&&(S.ttt=this,S.aaa=D);var Z={};if(this.parent.styles){if(this.parent.styles["text-decoration"]&&"underline"==this.parent.styles["text-decoration"].value&&(Z.underline=!0),this.parent.styles["writing-mode"]){var z=this.parent.styles["writing-mode"].value;"tb-rl"!=z&&"tb"!=z||(Z.vertical=!0)}if(this.parent.parent.styles["writing-mode"]){var k=this.parent.parent.styles["writing-mode"].value;"tb-rl"!=k&&"tb"!=k||(Z.vertical=!0)}}""!=q.fillStyle&&q.fillText(D.compressSpaces(this.getText()),this.x,this.y,Z),""!=q.strokeStyle&&q.strokeText(D.compressSpaces(this.getText()),this.x,this.y,Z)}else{var Q=this.parent.style("font-size").numValueOrDefault(D.Font.Parse(D.ctx.font).fontSize),U=this.parent.style("font-style").valueOrDefault(D.Font.Parse(D.ctx.font).fontStyle),u=this.getText();W.isRTL&&(u=u.split("").reverse().join(""));for(var G=D.ToNumberArray(this.parent.attribute("dx").value),b=0;b<u.length;b++){var v=this.getGlyph(W,u,b),j=Q/W.fontFace.unitsPerEm;q.translate(this.x,this.y),q.scale(j,-j);var i=q.lineWidth;q.lineWidth=q.lineWidth*W.fontFace.unitsPerEm/Q,"italic"==U&&q.transform(1,0,.4,1,0,0),v.render(q),"italic"==U&&q.transform(1,0,-.4,1,0,0),q.lineWidth=i,q.scale(1/j,-1/j),q.translate(-this.x,-this.y),this.x+=Q*(v.horizAdvX||W.horizAdvX)/W.fontFace.unitsPerEm,void 0===G[b]||isNaN(G[b])||(this.x+=G[b])}}},this.getText=function(){},this.measureTextRecursive=function(S){for(var q=this.measureText(S),W=0;W<this.children.length;W++)q+=this.children[W].measureTextRecursive(S);return q},this.measureText=function(S){var q=this.parent.style("font-family").getDefinition();if(null!=q){var W=this.parent.style("font-size").numValueOrDefault(D.Font.Parse(D.ctx.font).fontSize),Z=0,z=this.getText();q.isRTL&&(z=z.split("").reverse().join(""));for(var k=D.ToNumberArray(this.parent.attribute("dx").value),Q=0;Q<z.length;Q++){Z+=(this.getGlyph(q,z,Q).horizAdvX||q.horizAdvX)*W/q.fontFace.unitsPerEm,void 0===k[Q]||isNaN(k[Q])||(Z+=k[Q])}return Z}var U=D.compressSpaces(this.getText());if(!S.measureText)return 10*U.length;S.save(),this.setContext(S,!0);var u=S.measureText(U).width;return S.restore(),u},this.getBoundingBox=function(S){var q=this.parent.style("font-size").numValueOrDefault(D.Font.Parse(D.ctx.font).fontSize);return new D.BoundingBox(this.x,this.y-q,this.x+this.measureText(S),this.y)}},D.Element.TextElementBase.prototype=new D.Element.RenderedElementBase,D.Element.tspan=function(S){this.captureTextNodes=!0,this.base=D.Element.TextElementBase,this.base(S),this.text=D.compressSpaces(S.value||S.text||S.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},D.Element.tspan.prototype=new D.Element.TextElementBase,D.Element.tref=function(S){this.base=D.Element.TextElementBase,this.base(S),this.getText=function(){var S=this.getHrefAttribute().getDefinition();if(null!=S)return S.children[0].getText()}},D.Element.tref.prototype=new D.Element.TextElementBase,D.Element.a=function(q){this.base=D.Element.TextElementBase,this.base(q),this.hasText=q.childNodes.length>0;for(var W=0;W<q.childNodes.length;W++)3!=q.childNodes[W].nodeType&&(this.hasText=!1);this.text=this.hasText?q.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(S){if(this.hasText){this.baseRenderChildren(S);var q=new D.Property("fontSize",D.Font.Parse(D.ctx.font).fontSize);D.Mouse.checkBoundingBox(this,new D.BoundingBox(this.x,this.y-q.toPixels("y"),this.x+this.measureText(S),this.y))}else if(this.children.length>0){var W=new D.Element.g;W.children=this.children,W.parent=this,W.render(S)}},this.onclick=function(){S.open(this.getHrefAttribute().value)},this.onmousemove=function(){D.ctx.canvas.style.cursor="pointer"}},D.Element.a.prototype=new D.Element.TextElementBase,D.Element.image=function(S){this.base=D.Element.RenderedElementBase,this.base(S);var q=this.getHrefAttribute().value;if(""!=q){var W=q.match(/\.svg$/);if(D.Images.push(this),this.loaded=!1,W)this.img=D.ajax(q),this.loaded=!0;else{this.img=document.createElement("img"),1==D.opts.useCORS&&(this.img.crossOrigin="Anonymous");var Z=this;this.img.onload=function(){Z.loaded=!0},this.img.onerror=function(){D.log('ERROR: image "'+q+'" not found'),Z.loaded=!0},this.img.src=q}this.renderChildren=function(S){var q=this.attribute("x").toPixels("x"),Z=this.attribute("y").toPixels("y"),z=this.attribute("width").toPixels("x"),k=this.attribute("height").toPixels("y");0!=z&&0!=k&&(S.save(),W?S.drawSvg(this.img,q,Z,z,k):(S.translate(q,Z),D.AspectRatio(S,this.attribute("preserveAspectRatio").value,z,this.img.width,k,this.img.height,0,0),S.drawImage(this.img,0,0)),S.restore())},this.getBoundingBox=function(){var S=this.attribute("x").toPixels("x"),q=this.attribute("y").toPixels("y"),W=this.attribute("width").toPixels("x"),Z=this.attribute("height").toPixels("y");return new D.BoundingBox(S,q,S+W,q+Z)}}},D.Element.image.prototype=new D.Element.RenderedElementBase,D.Element.g=function(S){this.base=D.Element.RenderedElementBase,this.base(S),this.getBoundingBox=function(){for(var S=new D.BoundingBox,q=0;q<this.children.length;q++)S.addBoundingBox(this.children[q].getBoundingBox());return S}},D.Element.g.prototype=new D.Element.RenderedElementBase,D.Element.symbol=function(S){this.base=D.Element.RenderedElementBase,this.base(S),this.render=function(S){}},D.Element.symbol.prototype=new D.Element.RenderedElementBase,D.Element.switch=function(S){this.base=D.Element.RenderedElementBase,this.base(S)},D.Element.switch.prototype=new D.Element.symbol,D.Element.style=function(S){this.base=D.Element.ElementBase,this.base(S);for(var q="",W=0;W<S.childNodes.length;W++)q+=S.childNodes[W].data;q=q.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),q=D.compressSpaces(q);for(var Z=q.split("}"),W=0;W<Z.length;W++)if(""!=D.trim(Z[W]))for(var z=Z[W].split("{"),k=z[0].split(","),U=z[1].split(";"),u=0;u<k.length;u++){var G=D.trim(k[u]);if(""!=G){for(var b=D.Styles[G]||{},v=0;v<U.length;v++){var j=U[v].indexOf(":"),i=U[v].substr(0,j),n=U[v].substr(j+1,U[v].length-j);null!=i&&null!=n&&(b[D.trim(i)]=new D.Property(D.trim(i),D.trim(n)))}if(D.Styles[G]=b,D.StylesSpecificity[G]=Q(G),"@font-face"==G)for(var P=b["font-family"].value.replace(/"/g,""),R=b.src.value.split(","),_=0;_<R.length;_++)if(R[_].indexOf('format("svg")')>0)for(var x=R[_].indexOf("url"),K=R[_].indexOf(")",x),d=R[_].substr(x+5,K-x-6),N=D.parseXml(D.ajax(d)),m=N.getElementsByTagName("font"),t=0;t<m.length;t++){var V=D.CreateElement(m[t]);D.Definitions[P]=V}}}},D.Element.style.prototype=new D.Element.ElementBase,D.Element.use=function(S){this.base=D.Element.RenderedElementBase,this.base(S),this.baseSetContext=this.setContext,this.setContext=function(S){this.baseSetContext(S),this.attribute("x").hasValue()&&S.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&S.translate(0,this.attribute("y").toPixels("y"))};var q=this.getHrefAttribute().getDefinition();this.path=function(S){null!=q&&q.path(S)},this.getBoundingBox=function(){if(null!=q)return q.getBoundingBox()},this.renderChildren=function(S){if(null!=q){var W=q;"symbol"==q.type&&(W=new D.Element.svg,W.type="svg",W.attributes.viewBox=new D.Property("viewBox",q.attribute("viewBox").value),W.attributes.preserveAspectRatio=new D.Property("preserveAspectRatio",q.attribute("preserveAspectRatio").value),W.attributes.overflow=new D.Property("overflow",q.attribute("overflow").value),W.children=q.children),"svg"==W.type&&(this.attribute("width").hasValue()&&(W.attributes.width=new D.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(W.attributes.height=new D.Property("height",this.attribute("height").value)));var Z=W.parent;W.parent=null,W.render(S),W.parent=Z}}},D.Element.use.prototype=new D.Element.RenderedElementBase,D.Element.mask=function(S){this.base=D.Element.ElementBase,this.base(S),this.apply=function(S,q){var W=this.attribute("x").toPixels("x"),Z=this.attribute("y").toPixels("y"),z=this.attribute("width").toPixels("x"),k=this.attribute("height").toPixels("y"),Q=1;if(0==z&&0==k){for(var U=new D.BoundingBox,u=0;u<this.children.length;u++)this.children[u].getBoundingBox&&U.addBoundingBox(this.children[u].getBoundingBox());W=Math.floor(U.x1),Z=Math.floor(U.y1),z=Math.floor(U.width()),k=Math.floor(U.height())}if(z&&k){var G=W+z,b=Z+k;(G>2048||b>2048)&&(Q=Math.min(2048/G,2048/b),G*=Q,b*=Q);var v=q.style("mask").value;q.style("mask").value="";var j=document.createElement("canvas");j.width=G,j.height=b;var i=j.getContext("2d");if(i.save(),1!==Q&&i.scale(Q,Q),this.renderChildren(i),i.restore(),j.width&&j.height){var n=document.createElement("canvas");n.width=G,n.height=b;var P=n.getContext("2d");P.save(),1!==Q&&P.scale(Q,Q),q.render(P),P.restore(),P.globalCompositeOperation="destination-in",P.fillStyle=i.createPattern(j,"no-repeat"),P.fillRect(0,0,G,b),S.save(),1!==Q&&S.scale(1/Q,1/Q),S.fillStyle=P.createPattern(n,"no-repeat"),S.fillRect(0,0,G,b),S.restore(),q.style("mask").value=v}}},this.render=function(S){}},D.Element.mask.prototype=new D.Element.ElementBase,D.Element.clipPath=function(S){this.base=D.Element.ElementBase,this.base(S),this.apply=function(S){var q=S.beginPath;S.beginPath=function(){};var W=S.closePath;S.closePath=function(){};var Z;this.style("transform",!1,!0).hasValue()&&(Z=new D.Transform(this.style("transform",!1,!0).value),Z.apply(S)),q.call(S);for(var z=0;z<this.children.length;z++){var k=this.children[z];if(void 0!==k.path){var Q=null;k.style("transform",!1,!0).hasValue()&&(Q=new D.Transform(k.style("transform",!1,!0).value),Q.apply(S)),k.path(S),S.closePath=W,Q&&Q.unapply(S)}}W.call(S),S.clip(),Z&&Z.unapply(S),S.beginPath=q,S.closePath=W},this.render=function(S){}},D.Element.clipPath.prototype=new D.Element.ElementBase,D.Element.filter=function(S){this.base=D.Element.ElementBase,this.base(S),this.apply=function(S,q){return},this.render=function(S){}},D.Element.filter.prototype=new D.Element.ElementBase,D.Element.feMorphology=function(S){this.base=D.Element.ElementBase,this.base(S),this.apply=function(S,q,W,Z,z){}},D.Element.feMorphology.prototype=new D.Element.ElementBase,D.Element.feComposite=function(S){this.base=D.Element.ElementBase,this.base(S),this.apply=function(S,q,W,Z,z){}},D.Element.feComposite.prototype=new D.Element.ElementBase,D.Element.feColorMatrix=function(S){function q(S,q,W,Z,z,k){return S[W*Z*4+4*q+k]}function W(S,q,W,Z,z,k,Q){S[W*Z*4+4*q+k]=Q}function Z(S,q){var W=z[S];return W*(W<0?q-255:q)}this.base=D.Element.ElementBase,this.base(S);var z=D.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var k=z[0];z=[.213+.787*k,.715-.715*k,.072-.072*k,0,0,.213-.213*k,.715+.285*k,.072-.072*k,0,0,.213-.213*k,.715-.715*k,.072+.928*k,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var Q=z[0]*Math.PI/180,U=function(S,q,W){return S+Math.cos(Q)*q+Math.sin(Q)*W};z=[U(.213,.787,-.213),U(.715,-.715,-.715),U(.072,-.072,.928),0,0,U(.213,-.213,.143),U(.715,.285,.14),U(.072,-.072,-.283),0,0,U(.213,-.213,-.787),U(.715,-.715,.715),U(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(S,z,k,Q,U){if(Q&&U){for(var u=S.getImageData(0,0,Q,U),k=0;k<U;k++)for(var z=0;z<Q;z++){var D=q(u.data,z,k,Q,U,0),G=q(u.data,z,k,Q,U,1),b=q(u.data,z,k,Q,U,2),v=q(u.data,z,k,Q,U,3);W(u.data,z,k,Q,U,0,Z(0,D)+Z(1,G)+Z(2,b)+Z(3,v)+Z(4,1)),W(u.data,z,k,Q,U,1,Z(5,D)+Z(6,G)+Z(7,b)+Z(8,v)+Z(9,1)),W(u.data,z,k,Q,U,2,Z(10,D)+Z(11,G)+Z(12,b)+Z(13,v)+Z(14,1)),W(u.data,z,k,Q,U,3,Z(15,D)+Z(16,G)+Z(17,b)+Z(18,v)+Z(19,1))}S.clearRect(0,0,Q,U),S.putImageData(u,0,0)}}},D.Element.feColorMatrix.prototype=new D.Element.ElementBase,D.Element.feGaussianBlur=function(S){this.base=D.Element.ElementBase,this.base(S),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(S,q,W,Z,z){if(void 0===k.canvasRGBA)return void D.log("ERROR: StackBlur.js must be included for blur to work");S.canvas.id=D.UniqueId(),S.canvas.style.display="none",document.body.appendChild(S.canvas),k.canvasRGBA(S.canvas.id,q,W,Z,z,this.blurRadius),document.body.removeChild(S.canvas)}},D.Element.feGaussianBlur.prototype=new D.Element.ElementBase,D.Element.title=function(S){},D.Element.title.prototype=new D.Element.ElementBase,D.Element.desc=function(S){},D.Element.desc.prototype=new D.Element.ElementBase,D.Element.MISSING=function(S){D.log("ERROR: Element '"+S.nodeName+"' not yet implemented.")},D.Element.MISSING.prototype=new D.Element.ElementBase,D.CreateElement=function(S){var q=S.nodeName.replace(/^[^:]+:/,"");q=q.replace(/\-/g,"");var W=null;return W=void 0!==D.Element[q]?new D.Element[q](S):new D.Element.MISSING(S),W.type=S.nodeName,W},D.load=function(S,q){D.loadXml(S,D.ajax(q))},D.loadXml=function(S,q){D.loadXmlDoc(S,D.parseXml(q))},D.loadXmlDoc=function(q,W){D.prepareDOM(W),D.init(q);var Z=function(W){for(var Z=q.canvas;Z;)W.x-=Z.offsetLeft,W.y-=Z.offsetTop,Z=Z.offsetParent;return S.scrollX&&(W.x+=S.scrollX),S.scrollY&&(W.y+=S.scrollY),W};1!=D.opts.ignoreMouse&&(q.canvas.onclick=function(S){var q=Z(new D.Point(null!=S?S.clientX:event.clientX,null!=S?S.clientY:event.clientY));D.Mouse.onclick(q.x,q.y)},q.canvas.onmousemove=function(S){var q=Z(new D.Point(null!=S?S.clientX:event.clientX,null!=S?S.clientY:event.clientY));D.Mouse.onmousemove(q.x,q.y)});var z=D.CreateElement(W.documentElement);z.root=!0,z.addStylesFromStyleDefinition();var k=!0,Q=function(){var S=!1;q.canvas.parentElement||(S=!0,document.body.appendChild(q.canvas)),D.ViewPort.Clear(),q.canvas.parentNode&&D.ViewPort.SetCurrent(q.canvas.parentNode.clientWidth,q.canvas.parentNode.clientHeight),1!=D.opts.ignoreDimensions&&(z.style("width").hasValue()&&(q.canvas.width=z.style("width").toPixels("x"),q.canvas.style.width=q.canvas.width+"px"),z.style("height").hasValue()&&(q.canvas.height=z.style("height").toPixels("y"),q.canvas.style.height=q.canvas.height+"px"));var Z=q.canvas.clientWidth||q.canvas.width,Q=q.canvas.clientHeight||q.canvas.height;if(1==D.opts.ignoreDimensions&&z.style("width").hasValue()&&z.style("height").hasValue()&&(Z=z.style("width").toPixels("x"),Q=z.style("height").toPixels("y")),D.ViewPort.SetCurrent(Z,Q),null!=D.opts.offsetX&&(z.attribute("x",!0).value=D.opts.offsetX),null!=D.opts.offsetY&&(z.attribute("y",!0).value=D.opts.offsetY),null!=D.opts.scaleWidth||null!=D.opts.scaleHeight){var U=null,u=null,G=D.ToNumberArray(z.attribute("viewBox").value);null!=D.opts.scaleWidth&&(z.attribute("width").hasValue()?U=z.attribute("width").toPixels("x")/D.opts.scaleWidth:isNaN(G[2])||(U=G[2]/D.opts.scaleWidth)),null!=D.opts.scaleHeight&&(z.attribute("height").hasValue()?u=z.attribute("height").toPixels("y")/D.opts.scaleHeight:isNaN(G[3])||(u=G[3]/D.opts.scaleHeight)),null==U&&(U=u),null==u&&(u=U),z.attribute("width",!0).value=D.opts.scaleWidth,z.attribute("height",!0).value=D.opts.scaleHeight,z.style("transform",!0,!0).value+=" scale("+1/U+","+1/u+")"}1!=D.opts.ignoreClear&&q.clearRect(0,0,Z,Q),z.render(q),k&&(k=!1,"function"==typeof D.opts.renderCallback&&D.opts.renderCallback(W)),S&&q.canvas.parentElement&&q.canvas.parentElement.removeChild(q.canvas)},U=!0;D.ImagesLoaded()&&(U=!1,Q()),D.intervalID=setInterval(function(){var S=!1;if(U&&D.ImagesLoaded()&&(U=!1,S=!0),1!=D.opts.ignoreMouse&&(S|=D.Mouse.hasEvents()),1!=D.opts.ignoreAnimation)for(var q=0;q<D.Animations.length;q++)S|=D.Animations[q].update(1e3/D.FRAMERATE);"function"==typeof D.opts.forceRedraw&&1==D.opts.forceRedraw()&&(S=!0),S&&(Q(),D.Mouse.runEvents())},1e3/D.FRAMERATE)},D.stop=function(){D.intervalID&&clearInterval(D.intervalID)},D.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(S,q){this.events.push({type:"onclick",x:S,y:q,run:function(S){S.onclick&&S.onclick()}})},this.onmousemove=function(S,q){this.events.push({type:"onmousemove",x:S,y:q,run:function(S){S.onmousemove&&S.onmousemove()}})},this.eventElements=[],this.checkPath=function(S,q){for(var W=0;W<this.events.length;W++){var Z=this.events[W];q.isPointInPath&&q.isPointInPath(Z.x,Z.y)&&(this.eventElements[W]=S)}},this.checkBoundingBox=function(S,q){for(var W=0;W<this.events.length;W++){var Z=this.events[W];q.isPointInBox(Z.x,Z.y)&&(this.eventElements[W]=S)}},this.runEvents=function(){D.ctx.canvas.style.cursor="";for(var S=0;S<this.events.length;S++)for(var q=this.events[S],W=this.eventElements[S];W;)q.run(W),W=W.parent;this.events=[],this.eventElements=[]},D.prepareDOM=function(S){function W(S,W){if(0!=W.length){var Z={};W.forEach(function(S){if(!S.getAttribute("transform")){var q=S.getAttribute("class");Z[q]||(Z[q]=[]),Z[q].push(S)}}),q.keys(Z).forEach(function(q){var W=[];Z[q].forEach(function(z,k){W.push(z.getAttribute("d")),k>0&&S.removeChild(Z[q][k])}),Z[q][0].setAttribute("d",W.join(" "))})}}function Z(S){for(var q=S.length,W=q-1;W>0;W--)if(null==S[W].node){var Z=S[W-1].text+S[W].text;S[W].combined=!0,S[W-1].text=Z,null!=S[W-1].node&&(S[W-1].node.textContent=Z)}else{var z=void 0,k=void 0,Q=void 0,U=void 0,u=void 0,D=void 0;if(null==S[W-1].node)continue;if(u=S[W].node,D=S[W-1].node,z=u.getAttribute("x"),Q=u.getAttribute("dx"),k=u.getAttribute("y"),U=u.getAttribute("dy"),null!=z||null!=k||null!=Q||null!=U)continue;if(u.getAttribute("class")!=D.getAttribute("class"))continue;var G=S[W-1].text+S[W].text;S[W-1].node.textContent=G,S[W-1].text=G,S[W].combined=!0}var b=[];return S.forEach(function(S){S.combined||b.push(S)}),b}function z(S,q){var W=Z(q);return Z(W),S.textContent="",W.forEach(function(q){q.combined||(q.node?S.appendChild(q.node):S.append(q.text))}),W}function k(S){if("tb-rl"==S.getAttribute("writing-mode")){var q=S.getAttribute("x")-1.5,W=S.getAttribute("y")-1.5;S.removeAttribute("writing-mode");var Z=S.getAttribute("transform"),z="rotate(90,"+q+","+W+")";Z=Z?Z+" "+z:z,S.setAttribute("transform",Z)}}function Q(S){for(var q=S.length,W=0;W<q;W++)if(S.charCodeAt(W)>255)return!0;return!1}function U(S,q){var W=S.getAttribute("y");S.getAttribute("x");W&&(W=parseFloat(W)+3,S.setAttribute("y",W));var Z=0,z=0;q.forEach(function(S){if(null==S.node)return Z+=S.text.length,void(z+=S.text.length);var q=S.node.getAttribute("x"),W=S.node.getAttribute("y"),k=S.node.getAttribute("dx"),Q=S.node.getAttribute("dy");null==q&&null==k&&S.node.setAttribute("x",q),null!=k&&(k=parseFloat(k.substring(0,k.length-2))-z+"em",S.node.setAttribute("dx",k)),z+=S.text.length,null==W&&(null==Q&&(Q="0em"),0!=(Z+=parseFloat(Q.substring(0,Q.length-2)))&&(S.node.setAttribute("dy",Z+"em"),Z+=S.text.length))})}function u(S){for(var q=S.textContent,W=[],Z=S.childElementCount,z=0;z<Z;z++){var k=S.children[z].textContent;if(k){var Q=q.indexOf(k);Q>0&&(W.push({text:q.substring(0,Q),node:null}),q=q.substring(Q)),W.push({text:k,node:S.children[z]}),q=q.substring(k.length)}}return q.length>0&&W.push({text:q,node:null}),W}function D(S){for(var q=[],W=S.childElementCount,Z=0;Z<W;Z++)"v:"==S.children[Z].tagName.slice(0,2)&&q.push(S.children[Z]);q.forEach(function(q){S.removeChild(q)})}function G(S){for(var q=[],Z=0;Z<S.childElementCount;Z++){var b=S.children[Z],v=b.tagName,j=S.getAttribute("transform"),i=!1;switch(j&&j.indexOf("rotate")>=0&&!0,"tb-rl"==b.getAttribute("writing-mode")&&(i=!0),v){case"g":G(b);break;case"text":D(b);var n=u(b);n=z(b,n),Q(b.textContent)?i&&U(b,n):k(b);break;case"path":q.push(b)}}W(S,q)}for(var b=S.children[0],v=0;v<b.childElementCount;v++)if("g"==b.children[v].tagName){G(b.children[v]);break}}},D}var u,D=function(S,q,W){if(null!=S||null!=q||null!=W){"string"==typeof S&&(S=document.getElementById(S)),null!=S.svg&&S.svg.stop();var Z=U(W||{});1==S.childNodes.length&&"OBJECT"==S.childNodes[0].nodeName||(S.svg=Z);var z=S.getContext("2d");void 0!==q.documentElement?Z.loadXmlDoc(z,q):"<"==q.substr(0,1)?Z.loadXml(z,q):Z.load(z,q)}else for(var k=document.querySelectorAll("svg"),Q=0;Q<k.length;Q++){var u=k[Q],G=document.createElement("canvas");G.width=u.clientWidth,G.height=u.clientHeight,u.parentNode.insertBefore(G,u),u.parentNode.removeChild(u);var b=document.createElement("div");b.appendChild(u),D(G,b.innerHTML)}};void 0!==Element.prototype.matches?u=function(S,q){var W;try{W=S.matches(q)}catch(S){W=!1}return W}:void 0!==Element.prototype.webkitMatchesSelector?u=function(S,q){return S.webkitMatchesSelector(q)}:void 0!==Element.prototype.mozMatchesSelector?u=function(S,q){return S.mozMatchesSelector(q)}:void 0!==Element.prototype.msMatchesSelector?u=function(S,q){return S.msMatchesSelector(q)}:void 0!==Element.prototype.oMatchesSelector?u=function(S,q){return S.oMatchesSelector(q)}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(u=function(S,q){return $(S).is(q)}),void 0===u&&(u=Sizzle.matchesSelector));var G=/(\[[^\]]+\])/g,b=/(#[^\s\+>~\.\[:]+)/g,v=/(\.[^\s\+>~\.\[:]+)/g,j=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,i=/(:[\w-]+\([^\)]*\))/gi,n=/(:[^\s\+>~\.\[:]+)/g,P=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(S,q,W,Z,z,k){var Q={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:q,offsetY:W,scaleWidth:Z,scaleHeight:z};for(var U in k)k.hasOwnProperty(U)&&(Q[U]=k[U]);D(this.canvas,S,Q)}),D}(z.RGBColor,z.stackBlur)}(void 0!==S?S:this)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object),function(S,q,W){function Z(S){this._pointer=0,this._data=S,this._eof=!1}function z(S,q){return S<=9?q:S>=10&&S<=59?parseFloat(q):S>=60&&S<=99?parseInt(q):S>=100&&S<=109?q:S>=110&&S<=149?parseFloat(q):S>=160&&S<=179?parseInt(q):S>=210&&S<=239?parseFloat(q):S>=270&&S<=289?parseInt(q):S>=290&&S<=299?k(q):S>=300&&S<=369?q:S>=370&&S<=389?parseInt(q):S>=390&&S<=399?q:S>=400&&S<=409?parseInt(q):S>=410&&S<=419?q:S>=420&&S<=429?parseInt(q):S>=430&&S<=439?q:S>=440&&S<=459?parseInt(q):S>=460&&S<=469?parseFloat(q):S>=470&&S<=481?q:999===S?q:S>=1e3&&S<=1009?q:S>=1010&&S<=1059?parseFloat(q):S>=1060&&S<=1071?parseInt(q):(console.log("WARNING: Group code does not have a defined type: %j",{code:S,value:q}),q)}function k(S){if("0"===S)return!1;if("1"===S)return!0;throw TypeError("String '"+S+"' cannot be cast to Boolean type")}function Q(S){S&&S.sanitize!==W&&(this.sanitize=S.sanitize)}function U(S){j.debug("unhandled group "+u(S))}function u(S){return S.code+":"+S.value}function D(S){return i[S]}var G=S.ht,b=G.Default;b.getInternal().addMethod(b,{cadToShape:function(S,q){return new G.DxfViewer(q).toShape(S)},shapeToCad:function(S,q,W){return new G.DxfWriter(W).toDxf(S,q)}});var v=function(){},j={debug:v,warn:v,error:v
},i=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];Z.prototype.next=function(S){var q;if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);return q={code:parseInt(this._data[this._pointer])},this._pointer++,q.value=z(q.code,this._data[this._pointer].trim()),this._pointer++,S||0!==q.code||"EOF"!==q.value||(this._eof=!0),q},Z.prototype.hasNext=function(){return!this._eof&&!(this._pointer>this._data.length-2)},Z.prototype.isEOF=function(){return this._eof},Q.prototype.parse=function(S,q){throw new Error("read() not implemented. Use readSync()")},Q.prototype.parseSync=function(S){return"string"==typeof S?this._parse(S):(console.error("Cannot read dxf source of type `"+typeof S),null)},Q.prototype.parseStream=function(S,q){function W(S){k+=S}function Z(){try{var S=Q._parse(k)}catch(S){return q(S)}q(null,S)}function z(S){q(S)}var k="",Q=this;S.on("data",W),S.on("end",Z),S.on("error",z)},Q.prototype.sanitizeFileName=function(){var S=/[\/\?<>\\:\*\|":]/g,q=/[\x00-\x1f\x80-\x9f]/g,W=/^\.+$/,Z=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,z=/[\. ]+$/;return function(k){var Q=this.sanitize;return null==Q?k:k.replace(S,Q).replace(q,Q).replace(W,Q).replace(Z,Q).replace(z,Q)}}(),Q.prototype._parse=function(S){var z,k,Q=this,G={},b=0,v=S.split(/\r\n|\r|\n/g);if(z=new Z(v),!z.hasNext())throw Error("Empty file");var i=function(S,q){return k.code===S&&k.value===q},n=function(){var S=null,q=null,W={};for(k=z.next();;){if(i(0,"ENDSEC")){S&&(W[S]=q);break}9===k.code?(S&&(W[S]=q),S=k.value):10===k.code?q={x:k.value}:20===k.code?q.y=k.value:30===k.code?q.z=k.value:q=k.value,k=z.next()}return k=z.next(),W},P=function(){var S,q={};for(k=z.next();"EOF"!==k.value&&!i(0,"ENDSEC");)i(0,"BLOCK")?(j.debug("block {"),S=R(),j.debug("}"),s(S),S.name?q[S.name]=S:j.error('block with handle "'+S.handle+'" is missing a name.')):(U(k),k=z.next());return q},R=function(){var S={};for(k=z.next();"EOF"!==k.value;){switch(k.code){case 1:S.xrefPath=k.value,k=z.next();break;case 2:S.name=Q.sanitizeFileName(k.value),k=z.next();break;case 3:S.name2=Q.sanitizeFileName(k.value),k=z.next();break;case 5:S.handle=k.value,k=z.next();break;case 8:S.layer=k.value,k=z.next();break;case 10:S.position=e();break;case 67:S.paperSpace=!(!k.value||1!=k.value),k=z.next();break;case 70:0!=k.value&&(S.type=k.value),k=z.next();break;case 100:k=z.next();break;case 330:S.ownerHandle=k.value,k=z.next();break;case 0:if("ENDBLK"==k.value)break;z._pointer-=2,S.entities=t(!0);break;default:U(k),k=z.next()}if(i(0,"ENDBLK")){k=z.next();break}}return S},_=function(){var S={};for(k=z.next();"EOF"!==k.value&&!i(0,"ENDSEC");)if(i(0,"TABLE")){k=z.next();var q=m[k.value];q?(j.debug(k.value+" Table {"),S[m[k.value].tableName]=x(),j.debug("}")):j.debug("Unhandled Table "+k.value)}else k=z.next();return k=z.next(),S},x=function(){var S,W=m[k.value],Z={},Q=0;for(k=z.next();!i(0,"ENDTAB");)switch(k.code){case 5:Z.handle=k.value,k=z.next();break;case 330:Z.ownerHandle=k.value,k=z.next();break;case 100:"AcDbSymbolTable"===k.value?k=z.next():(U(k),k=z.next());break;case 70:Q=k.value,k=z.next();break;case 0:k.value===W.dxfSymbolName?Z[W.tableRecordsProperty]=W.parseTableRecords():(U(k),k=z.next());break;default:U(k),k=z.next()}var u=Z[W.tableRecordsProperty];return u&&(u.constructor===Array?S=u.length:"object"==typeof u&&(S=q.keys(u).length),Q!==S&&j.warn("Parsed "+S+" "+W.dxfSymbolName+"'s but expected "+Q)),k=z.next(),Z},K=function(){var S=[],q={};for(j.debug("ViewPort {"),k=z.next();!i(0,"ENDTAB");)switch(k.code){case 2:q.name=k.value,k=z.next();break;case 10:q.lowerLeftCorner=e();break;case 11:q.upperRightCorner=e();break;case 12:q.center=e();break;case 13:q.snapBasePoint=e();break;case 14:q.snapSpacing=e();break;case 15:q.gridSpacing=e();break;case 16:q.viewDirectionFromTarget=e();break;case 17:q.viewTarget=e();break;case 40:q.viewHeight=k.value,q.aspectRatio!==W&&(q.viewWidth=k.value*q.aspectRatio),k=z.next();break;case 41:q.aspectRatio=k.value,q.viewHeight!==W&&(q.viewWidth=k.value*q.viewHeight),k=z.next();break;case 42:q.lensLength=k.value,k=z.next();break;case 43:q.frontClippingPlane=k.value,k=z.next();break;case 44:q.backClippingPlane=k.value,k=z.next();break;case 45:q.viewHeight=k.value,k=z.next();break;case 50:q.snapRotationAngle=k.value,k=z.next();break;case 51:q.viewTwistAngle=k.value,k=z.next();break;case 79:q.orthographicType=k.value,k=z.next();break;case 110:q.ucsOrigin=e();break;case 111:q.ucsXAxis=e();break;case 112:q.ucsYAxis=e();break;case 110:q.ucsOrigin=e();break;case 281:q.renderMode=k.value,k=z.next();break;case 281:q.defaultLightingType=k.value,k=z.next();break;case 292:q.defaultLightingOn=k.value,k=z.next();break;case 330:q.ownerHandle=k.value,k=z.next();break;case 63:case 421:case 431:q.ambientColor=k.value,k=z.next();break;case 0:"VPORT"===k.value&&(j.debug("}"),S.push(q),j.debug("ViewPort {"),q={},k=z.next());break;default:U(k),k=z.next()}return j.debug("}"),S.push(q),S},d=function(){var S,q,W={},Z={};for(j.debug("LType {"),k=z.next();!i(0,"ENDTAB");)switch(k.code){case 2:Z.name=k.value,S=k.value,k=z.next();break;case 3:Z.description=k.value,k=z.next();break;case 73:q=k.value,q>0&&(Z.pattern=[]),k=z.next();break;case 40:Z.patternLength=k.value,k=z.next();break;case 49:Z.pattern.push(k.value),k=z.next();break;case 0:j.debug("}"),q>0&&q!==Z.pattern.length&&j.warn("lengths do not match on LTYPE pattern"),W[S]=Z,Z={},j.debug("LType {"),k=z.next();break;default:k=z.next()}return j.debug("}"),W[S]=Z,W},N=function(){var S,q={},Z={};for(j.debug("Layer {"),k=z.next();!i(0,"ENDTAB");)switch(k.code){case 2:Z.name=k.value,S=k.value,k=z.next();break;case 62:Z.visible=k.value>=0,Z.color=D(Math.abs(k.value)),k=z.next();break;case 6:Z.lineType=k.value,k=z.next();break;case 0:"LAYER"===k.value&&(j.debug("}"),q[S]=Z,j.debug("Layer {"),Z={},S=W,k=z.next());break;default:U(k),k=z.next()}return j.debug("}"),q[S]=Z,q},m={VPORT:{tableRecordsProperty:"viewPorts",tableName:"viewPort",dxfSymbolName:"VPORT",parseTableRecords:K},LTYPE:{tableRecordsProperty:"lineTypes",tableName:"lineType",dxfSymbolName:"LTYPE",parseTableRecords:d},LAYER:{tableRecordsProperty:"layers",tableName:"layer",dxfSymbolName:"LAYER",parseTableRecords:N}},t=function(S){var q=[],W=S?"ENDBLK":"ENDSEC";for(k=z.next();;)if(0===k.code){if(k.value===W)break;var Z;if("LWPOLYLINE"===k.value)j.debug("LWPOLYLINE {"),Z=f(),j.debug("}");else if("POLYLINE"===k.value)j.debug("POLYLINE {"),Z=J(),j.debug("}");else if("LINE"===k.value)j.debug("LINE {"),Z=g(),j.debug("}");else if("CIRCLE"===k.value)j.debug("CIRCLE {"),Z=T(),j.debug("}");else if("ARC"===k.value)j.debug("ARC {"),Z=T(),j.debug("}");else if("ELLIPSE"===k.value)j.debug("ELLIPSE {"),Z=a(),j.debug("}");else if("SPLINE"===k.value)j.debug("SPLINE {"),Z=B(),j.debug("}");else if("TEXT"===k.value)j.debug("TEXT {"),Z=M(),j.debug("}");else if("ATTRIB"===k.value)j.debug("ATTRIB {"),Z=Y(),j.debug("}");else if("DIMENSION"===k.value)j.debug("DIMENSION {"),Z=A(),j.debug("}");else if("INSERT"===k.value)j.debug("INSERT {"),Z=r(),j.debug("}");else if("HATCH"===k.value)j.debug("HATCH {"),Z=o(),j.debug("}");else if("SOLID"===k.value)j.debug("SOLID {"),Z=l(),j.debug("}");else if("POINT"===k.value)j.debug("POINT {"),Z=w(),j.debug("}");else if("MTEXT"===k.value)j.debug("MTEXT {"),Z=c(),j.debug("}");else{if("ATTDEF"!==k.value){j.warn("Unhandled entity "+k.value),k=z.next();continue}j.debug("ATTDEF {"),Z=X(),j.debug("}")}s(Z),q.push(Z)}else k=z.next();return"ENDSEC"==W&&(k=z.next()),q},V=function(S){switch(k.code){case 0:S.type=k.value,k=z.next();break;case 5:S.handle=k.value,k=z.next();break;case 6:S.lineType=k.value,k=z.next();break;case 8:S.layer=k.value,k=z.next();break;case 48:S.lineTypeScale=k.value,k=z.next();break;case 60:S.visible=0===k.value,k=z.next();break;case 62:S.colorIndex=k.value,S.color=D(Math.abs(k.value)),k=z.next();break;case 67:S.inPaperSpace=0!==k.value,k=z.next();break;case 210:S.extrusionDirection=e();break;case 230:S.extrusionDirection={x:0,y:0,z:k.value},k=z.next();break;case 330:S.ownerHandle=k.value,k=z.next();break;case 347:S.materialObjectHandle=k.value,k=z.next();break;case 370:S.lineweight=k.value,k=z.next();break;case 420:S.color=k.value,k=z.next();break;case 100:if("AcDbEntity"==k.value){k=z.next();break}default:U(k),k=z.next()}},C=function(){var S={type:k.value};for(k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 10:S.x=k.value,k=z.next();break;case 20:S.y=k.value,k=z.next();break;case 30:S.z=k.value,k=z.next();break;case 40:case 41:case 42:k=z.next();break;case 70:S.curveFittingVertex=0!=(1|k.value),S.curveFitTangent=0!=(2|k.value),S.splineVertex=0!=(8|k.value),S.splineControlPoint=0!=(16|k.value),S.ThreeDPolylineVertex=0!=(32|k.value),S.ThreeDPolylineMesh=0!=(64|k.value),S.polyfaceMeshVertex=0!=(128|k.value),k=z.next();break;case 50:case 71:case 72:case 73:case 74:k=z.next();break;default:V(S)}return S},O=function(){var S={type:k.value};for(k=z.next();"EOF"!=k&&0!=k.code;)V(S);return S},e=function(){var S={},q=k.code;if(S.x=k.value,q+=10,k=z.next(),k.code!=q)throw new Error("Expected code for point value to be "+q+" but got "+k.code+".");return S.y=k.value,q+=10,k=z.next(),k.code!=q?S:(S.z=k.value,k=z.next(),S)},L=function(){var S={},q=k.code;return S.x=k.value,q+=1,k=z.next(),k.code!=q?(z._pointer-=2,S.y=1):S.y=k.value,q+=1,k=z.next(),k.code!=q?(z._pointer-=2,S.z=1):S.z=k.value,k=z.next(),S},$=function(S){if(!S||S<=0)throw Error("n must be greater than 0 verticies");var q,W=[],Z=!1,Q=!1;for(q=0;q<S;q++){for(var U={};"EOF"!==k&&0!==k.code&&!Q;){switch(k.code){case 10:if(Z){Q=!0;continue}U.x=k.value,Z=!0;break;case 20:U.y=k.value;break;case 30:U.z=k.value;break;case 40:U.startWidth=k.value;break;case 41:U.endWidth=k.value;break;case 42:0!=k.value&&(U.bulge=k.value);break;default:if(Z){Q=!0;continue}}k=z.next()}W.push(U),Z=!1,Q=!1}return W},y=function(){for(var S=[];"EOF"!==k;)if(0===k.code)if("VERTEX"===k.value)S.push(C());else if("SEQEND"===k.value){O();break}return S},c=function(){var S={type:k.value};for(k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 1:S.text=k.value,k=z.next();break;case 3:S.text+=k.value,k=z.next();break;case 10:S.position=e();break;case 40:S.height=k.value,k=z.next();break;case 41:S.width=k.value,k=z.next();break;case 71:S.attachmentPoint=k.value,k=z.next();break;case 72:S.drawingDirection=k.value,k=z.next();break;case 50:S.angle=2*k.value*Math.PI/360,k=z.next();break;case 11:S.directionX=k.value,k=z.next();break;case 21:S.directionY=k.value,k=z.next();break;case 60:S.hidden=1===k.value,k=z.next();break;default:V(S)}return S},X=function(){var S={type:k.value,scale:1,textStyle:"STANDARD",halign:0,valign:0};for(k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 1:S.text=k.value,k=z.next();break;case 2:S.tag=k.value,k=z.next();break;case 3:S.prompt=k.value,k=z.next();break;case 7:S.textStyle=k.value,k=z.next();break;case 10:S.startPoint=e();break;case 11:S.endPoint=e();break;case 39:S.thickness=k.value,k=z.next();break;case 40:S.textHeight=k.value,k=z.next();break;case 41:S.scale=k.value,k=z.next();break;case 50:S.rotation=k.value,k=z.next();break;case 51:S.obliqueAngle=k.value,k=z.next();break;case 70:S.invisible=!!(1&k.value),S.constant=!!(2&k.value),S.verificationRequired=!!(4&k.value),S.preset=!!(8&k.value),k=z.next();break;case 71:S.backwards=!!(2&k.value),S.mirrored=!!(4&k.value),k=z.next();break;case 72:S.halign=k.value,k=z.next();break;case 73:S.fieldLength=k.value,k=z.next();break;case 74:S.valign=k.value,k=z.next();break;case 100:k=z.next();break;case 210:S.extrusionDirectionX=k.value,k=z.next();break;case 220:S.extrusionDirectionY=k.value,k=z.next();break;case 230:S.extrusionDirectionZ=k.value,k=z.next();break;default:V(S)}return S},f=function(){var S={type:k.value,vertices:[]},q=0;for(k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 38:S.elevation=k.value,k=z.next();break;case 39:S.depth=k.value,k=z.next();break;case 70:S.shape=1===k.value,k=z.next();break;case 90:q=k.value,k=z.next();break;case 10:S.vertices=$(q);break;case 40:0!==k.value&&(S.startWidth=k.value),k=z.next();break;case 41:0!==k.value&&(S.endWidth=k.value),k=z.next();break;case 43:0!==k.value&&(S.width=k.value),k=z.next();break;default:V(S)}return S},J=function(){var S={type:k.value,vertices:[]};for(k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 10:case 20:case 30:case 39:k=z.next();break;case 40:0!==k.value&&(S.startWidth=k.value),k=z.next();break;case 41:0!==k.value&&(S.endWidth=k.value),k=z.next();break;case 70:S.shape=1===k.value,k=z.next();break;case 71:case 72:case 73:case 74:case 75:case 100:k=z.next();break;default:V(S)}return S.vertices=y(),S},g=function(){var S={type:k.value,vertices:[]};for(k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 10:S.vertices.unshift(e());break;case 11:S.vertices.push(e());break;case 100:if("AcDbLine"==k.value){k=z.next();break}default:V(S)}return S},T=function(){var S,q;for(S={type:k.value},k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 10:S.center=e();break;case 40:S.radius=k.value,k=z.next();break;case 50:S.startAngle=Math.PI/180*k.value,k=z.next();break;case 51:q=Math.PI/180*k.value,q<S.startAngle?S.angleLength=q+2*Math.PI-S.startAngle:S.angleLength=q-S.startAngle,S.endAngle=q,k=z.next();break;default:V(S)}return S},a=function(){var S,q;for(S={type:k.value},k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 10:S.center=e();break;case 11:S.major=e();break;case 40:S.ratio=k.value,k=z.next();break;case 41:S.startAngle=k.value,k=z.next();break;case 42:q=k.value,q<S.startAngle?S.angleLength=q+2*Math.PI-S.startAngle:S.angleLength=q-S.startAngle,S.endAngle=q,k=z.next();break;default:V(S)}return S},r=function(){var S,q,W=[];for(S={type:k.value,attribs:W},k=z.next();"EOF"!==k;){if(0===k.code){if(q&&"ATTRIB"===k.value){W.push(Y());continue}if(q&&"SEQEND"===k.value){O();continue}break}switch(k.code){case 2:S.block=Q.sanitizeFileName(k.value),k=z.next();break;case 10:S.center=e();break;case 41:S.scale=L();break;case 50:S.deg=k.value,k=z.next();break;case 66:q=1===k.value,k=z.next();break;default:V(S)}}var Z=S.center;return W.forEach(function(S){var q=S.startPoint;q&&(q.x-=Z.x,q.y=Z.y-q.y),(q=S.endPoint)&&(q.x-=Z.x,q.y=Z.y-q.y)}),S},o=function(){var S;for(S={type:k.value},k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 2:S.block=Q.sanitizeFileName(k.value),k=z.next();break;case 10:S.center=e();break;case 41:S.scale=L();break;case 50:S.deg=k.value,k=z.next();break;default:V(S)}return S},B=function(){var S,q;for(S={type:k.value},k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 10:S.center=e();break;case 11:S.major=e();break;case 40:S.ratio=k.value,k=z.next();break;case 41:S.startAngle=k.value,k=z.next();break;case 42:q=k.value,q<S.startAngle?S.angleLength=q+2*Math.PI-S.startAngle:S.angleLength=q-S.startAngle,S.endAngle=q,k=z.next();break;default:V(S)}return S},M=function(){var S;for(S={type:k.value},k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 10:S.startPoint=e();break;case 11:S.endPoint=e();break;case 40:S.textHeight=k.value,k=z.next();break;case 41:S.xScale=k.value,k=z.next();break;case 1:S.text=k.value,k=z.next();break;case 7:S.font=k.value,k=z.next();break;case 71:S.generationFlags=k.value,k=z.next();break;case 72:S.halign=k.value,k=z.next();break;case 73:S.valign=k.value,k=z.next();break;case 50:S.rotation=2*k.value*Math.PI/360,k=z.next();break;case 60:S.hidden=1===k.value,k=z.next();break;default:V(S)}return S},Y=function(){var S;for(S={type:k.value},k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 10:S.startPoint=e();break;case 11:S.endPoint=e();break;case 40:S.textHeight=k.value,k=z.next();break;case 41:S.xScale=k.value,k=z.next();break;case 1:S.text=k.value,k=z.next();break;case 7:S.font=k.value,k=z.next();break;case 71:S.generationFlags=k.value,k=z.next();break;case 72:S.halign=k.value,k=z.next();break;case 74:S.valign=k.value,k=z.next();break;case 50:S.rotation=2*k.value*Math.PI/360,k=z.next();break;case 70:S.hidden=1===k.value,k=z.next();break;case 2:S.attr=k.value,k=z.next();break;default:V(S)}return S},A=function(){var S;for(S={type:k.value},k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 2:S.block=Q.sanitizeFileName(k.value),k=z.next();break;case 10:S.anchorPoint=e();break;case 11:S.middleOfText=e();break;case 71:S.attachmentPoint=k.value,k=z.next();break;case 42:S.actualMeasurement=k.value,k=z.next();break;case 1:S.text=k.value,k=z.next();break;case 50:S.angle=k.value,k=z.next();break;default:V(S)}return S},l=function(){var S;for(S={type:k.value},S.points=[],k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 10:S.points[0]=e();break;case 11:S.points[1]=e();break;case 12:S.points[2]=e();break;case 13:S.points[3]=e();break;default:V(S)}return S},w=function(){var S;for(S={type:k.value},k=z.next();"EOF"!==k&&0!==k.code;)switch(k.code){case 10:S.position=e();break;case 39:S.thickness=k.value,k=z.next();break;case 100:if("AcDbPoint"==k.value){k=z.next();break}default:V(S)}return S},s=function(S){if(!S)throw new TypeError("entity cannot be undefined or null");S.handle||(S.handle=b++)};return function(){for(k=z.next();!z.isEOF();)if(0===k.code&&"SECTION"===k.value){if(k=z.next(),2!==k.code){console.error("Unexpected code %s after 0:SECTION",u(k)),k=z.next();continue}"HEADER"===k.value?(j.debug("> HEADER"),G.header=n(),j.debug("<")):"BLOCKS"===k.value?(j.debug("> BLOCKS"),G.blocks=P(),j.debug("<")):"ENTITIES"===k.value?(j.debug("> ENTITIES"),G.entities=t(!1),j.debug("<")):"TABLES"===k.value?(j.debug("> TABLES"),G.tables=_(),j.debug("<")):"EOF"===k.value?j.debug("EOF"):j.warn("Skipping section '%s'",k.value)}else k=z.next()}(),G};var n=G.DxfViewer=function(S){this.$16w(S)};n.prototype={},n.prototype.constructor=n;var P={LINE:["LINE","POLYLINE"],LWLINE:["LWPOLYLINE"],CIRCLE:["CIRCLE","ARC"],ELLIPSE:["ELLIPSE"],TEXT:["TEXT","MTEXT"],SOLID:["SOLID"],POINT:["POINT"],ATTDEF:["ATTDEF"]};q.defineProperties(n.prototype,{dxf:{get:function(){return this._dxf}}}),n.prototype.$16w=function(S){var q=this,Z=q.options={};S=S||{},Z.font=S.font||"Standard",Z.textScaleRatio=S.textScaleRatio||1,Z.size=S.size,Z.scale=S.scale,Z.blockSize=S.blockSize||256,Z.filter=S.filter,Z.defaultColor=S.defaultColor||0,Z.edgeLayer=S.edgeLayer,S.showText===W&&(S.showText=!0),Z.showText=S.showText,Z.mapColor=S.mapColor,Z.circleSegments=S.circleSegments||72,Z.browserMinFontSize=S.browserMinFontSize||12,Z.useTextCompScale=S.useTextCompScale===W||S.useTextCompScale,Z.boundingType=S.boundingType||"Reset",Z.convertArcToBezier=S.convertArcToBezier,!1!==S.sanitize&&(Z.sanitize=S.sanitize||"_")},n.prototype.toShape=function(q){var Z=this;Z.parseFile(q),console.info("=== toShape ===",S.wyl=Z._dxf);var z,k,Q,U=Z._dxf.blocks,u=Z.sortBlocks(U);Z._blockDef={};for(var D=u.length-1;D>=0;D--)k=u[D],Q=U[k],Q.entities&&(Z._blockDef[k]||(z=Z.entitiesToShape(Q.entities,Q.position,null,!1,W,!0))&&(z.flag=Q.type,Z._blockDef[k]=z));return z=Z.entitiesToShape(Z._dxf.entities,null,Z.options.size,!0,Z.options.scale),z.sortedBlockName=u,z.blockDef=Z._blockDef,z.layers=Z._dxf.tables.layer.layers,z},n.prototype.entitiesToShape=function(S,q,W,Z,z,k){var Q=this;Q._minFontSize=12,Q._bound={xMin:1/0,yMin:1/0,xMax:-1/0,yMax:-1/0},q=q||{x:0,y:0,z:0};var U,u,D,G=Q._models={},b=Q._dxf;for(U=0,u=S.length;U<u;U++)D=S[U],Q.$4w(G,D,b);if(Z)switch(Q.options.boundingType){case"Viewport":var v=Q.$19w;!v||isNaN(v.x)||isNaN(v.y)||isNaN(v.width)||isNaN(v.height)||(Q._bound={xMin:v.x-v.width/2,xMax:v.x+v.width/2,yMin:v.y-v.height/2,yMax:v.y+v.height/2});break;case"Standard":Q._bound={xMin:0,xMax:1,yMin:0,yMax:1}}Q._shiftX=Q._bound.xMin,Q._shiftY=Q._bound.yMax;var j=Q._bound.xMax-Q._bound.xMin,i=Q._bound.yMax-Q._bound.yMin;if(!(j<0||i<0)){if(j=j||1,i=i||1,Q._bound.pos=q,z)Q._scale=z;else{if(W){var n=W/j,P=W/i;Q._scale=Math.min(n,P)}else Q._scale=1;Q.options.useTextCompScale||(Q._scale*=Math.max(1,Math.ceil(Q.options.browserMinFontSize/Q._minFontSize)))}var R={};return Q.shapeComps=[],Q.$12w(),Q.drawLWLine(),Q.$11w(),Q.$9w(),Q.$7w(),Q.options.showText&&Q.$8w(),R.dataBindings=Q.drawAttrDef(),Q.drawBlock(),R.width=j*Q._scale,R.height=i*Q._scale,R.comps=Q.shapeComps,R.scale=Q._scale,R.anchorX=-(Q._bound.xMin-q.x)/j,R.anchorY=(Q._bound.yMax-q.y)/i,R.bound=Q._bound,Q._calcBoundExtend(R),R}},n.prototype._calcBoundExtend=function(S){var q=1,W=!1;S.comps.forEach(function(S){q=Math.max(q,S.borderWidth||0),S.borderWidthAbsolute&&(W=!0)}),S.boundExtend=q,W&&(S.boundExtendAbsolute=!0)},n.prototype._bulgesAt=function(S,q){return S[q].bulge},n.prototype._isStraightLine=function(S){return!S||Math.abs(S)<1e-6},n.prototype._getDistance=function(S,q){var W=S.x-q.x,Z=S.y-q.y;return Math.sqrt(W*W+Z*Z)},n.prototype._getBulgeSegment=function(S,q,W){var Z=this,z=W<0,k=4*Math.atan(W);if(Math.abs(k)>2*Math.PI-1e-6)return[q];var Q={x:(S.x+q.x)/2,y:(S.y+q.y)/2},U=Z._getDistance(S,q)/2,u=Math.atan2(q.y-S.y,q.x-S.x),D=Math.abs(U/Math.sin(k/2)),G=Math.abs(D*D-U*U),b=Math.sqrt(G);W>0?u+=Math.PI/2:u-=Math.PI/2,Math.abs(k)>Math.PI&&(b*=-1);var v,u,j=b*Math.cos(u)+Q.x,i=b*Math.sin(u)+Q.y,n=Math.atan2(S.y-i,S.x-j),P=Math.atan2(q.y-i,q.x-j),R=[];if(v=2*Math.PI/Z.options.circleSegments,u=n,z){for(;P>n;)P-=2*Math.PI;for(;u>P;)u-=v,u<P&&(u=P),R.push({x:j+D*Math.cos(u),y:i+D*Math.sin(u)})}else{for(;P<n;)P+=2*Math.PI;for(;u<P;)u+=v,u>P&&(u=P),R.push({x:j+D*Math.cos(u),y:i+D*Math.sin(u)})}return R},n.prototype.$12w=function(){var S,q,Z,z,k,Q,U,u,D,G,b,v,j,i,n,R,_,x,K,d,N=this,m=N._models;for(S=P.LINE,z=0,k=S.length;z<k;z++){q=S[z],Z=m[q];for(u in Z)for(D=Z[u],Q=0,U=D.length;Q<U;Q++)if(G=D[Q],(b=G.vertices)&&b.length){for(n=N.$3w(b[0].x,1),R=N.$3w(b[0].y,2),x={type:"shape",cadType:q,cadLayer:G.layer,maybeEdge:G.layer===N.options.edgeLayer,borderColor:u,borderCap:"round",points:[n,R],segments:[1]},d=W,G.startWidth?d=(G.startWidth+(G.endWidth?G.endWidth:G.startWidth))/2:G.width&&(d=G.width),d?x.borderWidth=N.$3w(d):(x.borderWidthAbsolute=!0,x.borderWidth=1),j=1,i=b.length;j<i;j++)v=b[j],_=N._bulgesAt(b,j-1),N._isStraightLine(_)?(x.points.push(N.$3w(v.x,1),N.$3w(v.y,2)),x.segments.push(2)):(K=N._getBulgeSegment(b[j-1],v,_),K.forEach(function(S){x.points.push(N.$3w(S.x,1),N.$3w(S.y,2)),x.segments.push(2)}));if(G.shape&&(_=N._bulgesAt(b,b.length-1),N._isStraightLine(_)?x.segments.push(5):(K=N._getBulgeSegment(b[b.length-1],b[0],_),K.forEach(function(S){x.points.push(N.$3w(S.x,1),N.$3w(S.y,2)),x.segments.push(2)}))),x.dash=["DASHED","HIDDEN"].indexOf(G.lineType)>=0){x.dashColor=u,x.borderColor="rgba(0, 0, 0, 0)";var t=N.$3w(G.lineTypeScale||1);t&&(x.dashPattern=[10*t,5*t])}G.lineweight&&(x.borderWidth=N.$3w(G.lineweight)/10),x.handle=G.handle,N.shapeComps.push(x)}}},n.prototype.drawLWLine=function(){var S,q,Z,z,k,Q,U,u,D,b,v,j,i,n,R,_,x,K,d,N,m=this,t=m._models;for(S=P.LWLINE,z=0,k=S.length;z<k;z++){q=S[z],Z=t[q];for(u in Z){D=Z[u];var V=[];for(Q=0,U=D.length;Q<U;Q++)if(b=D[Q],(v=b.vertices)&&v.length){R=m.$3w(v[0].x,1),_=m.$3w(v[0].y,2),K={type:"shape",cadType:q,cadLayer:b.layer,maybeEdge:b.layer===m.options.edgeLayer,borderColor:u,borderCap:"round",points:[R,_],segments:[1]},N=W,b.startWidth?N=(b.startWidth+(b.endWidth?b.endWidth:b.startWidth))/2:b.width&&(N=b.width),N?K.borderWidth=m.$3w(N):(K.borderWidthAbsolute=!0,K.borderWidth=1);var C=v[0];for(i=1,n=v.length;i<n;i++)j=v[i],x=m._bulgesAt(v,i-1),m._isStraightLine(x)?(K.points.push(m.$3w(j.x,1),m.$3w(j.y,2)),C.startWidth!==C.endWidth?(V.push({from:C,to:j}),K.segments.push(1)):K.segments.push(2)):(d=m._getBulgeSegment(v[i-1],j,x),d.forEach(function(S){K.points.push(m.$3w(S.x,1),m.$3w(S.y,2)),K.segments.push(2)})),C=j;if(b.shape&&(x=m._bulgesAt(v,v.length-1),m._isStraightLine(x)?K.segments.push(5):(d=m._getBulgeSegment(v[v.length-1],v[0],x),d.forEach(function(S){K.points.push(m.$3w(S.x,1),m.$3w(S.y,2)),K.segments.push(2)}))),K.dash=["DASHED","HIDDEN"].indexOf(b.lineType)>=0){K.dashColor=u,K.borderColor="rgba(0, 0, 0, 0)";var O=m.$3w(b.lineTypeScale||1);O&&(K.dashPattern=[10*O,5*O])}b.lineweight&&(K.borderWidth=m.$3w(b.lineweight)/10),K.handle=b.handle,m.shapeComps.push(K)}V.forEach(function(S){var q=S.from,W=S.to,Z={x:m.$3w(q.x,1),y:m.$3w(q.y,2)},z={x:m.$3w(W.x,1),y:m.$3w(W.y,2)},k=Math.atan2(z.y-Z.y,z.x-Z.x)+Math.PI/2;if(q.startWidth<q.endWidth){var Q=z;z=Z,Z=Q,k+=Math.PI}var U=Math.max(q.startWidth,q.endWidth);U=m.$3w(U);var D=G.Default.getDistance(Z,z);m.shapeComps.push({type:"triangle",rect:[Z.x-U/2,Z.y-D,U,D],anchorX:.5,anchorY:1,rotation:k,background:u})})}}},n.prototype.drawBlock=function(){var S,q,W,Z,z,k,Q,U,u,D,G,b,v=this,j=v._models.BLOCK;if(j)for(S=0,q=j.length;S<q;S++)W=j[S],Z=W.block,z=v._blockDef[Z],G=W.transform,k=Math.atan2(G.b,G.a),Math.abs(k-Math.PI)<1e-5||Math.abs(k)<1e-5||Math.abs(k+Math.PI)<1e-5?(u=Math.cos(k),Q=G.a/u,U=G.d/u):(D=Math.sin(k),Q=G.b/D,U=-G.c/D),b={type:"image",cadType:"block",cadLayer:W.layer,handle:W.handle,name:Z,rect:[[v.$3w(G.tx,1),v.$3w(G.ty,2)],v.$3w(z.width/z.scale),v.$3w(z.height/z.scale)],rotation:k,attribs:W.attribs,color:W.color},1===Q&&1===U||(b.scaleX=Q,b.scaleY=U),v.shapeComps.push(b)},n.prototype.$11w=function(){var S,q,W,Z,z,k,Q,U,u,D,G,b=this,v=b._models;for(S=P.SOLID,Z=0,z=S.length;Z<z;Z++){q=S[Z],W=v[q];for(U in W)for(u=W[U],k=0,Q=u.length;k<Q;k++)D=u[k],G=D.points,b.shapeComps.push({type:"shape",cadType:q,cadLayer:D.layer,handle:D.handle,background:U,points:[b.$3w(G[0].x,1),b.$3w(G[0].y,2),b.$3w(G[1].x,1),b.$3w(G[1].y,2),b.$3w(G[3].x,1),b.$3w(G[3].y,2),b.$3w(G[2].x,1),b.$3w(G[2].y,2)],segments:[1,2,2,2,5]})}},n.prototype.extrusionZNagative=function(S){var q=S.extrusionDirection;return!!q&&Math.abs(q.z+1)<1e-5},n.prototype.$9w=function(){var S,q,W,Z,z,k,Q,U,u,D,G,b,v,j,i,n,R,_,x,K,d=this,N=d._models;for(S=P.CIRCLE,Z=0,z=S.length;Z<z;Z++){q=S[Z],W=N[q];for(U in W)for(u=W[U],k=0,Q=u.length;k<Q;k++){if(D=u[k],G=D.startAngle||0,b=D.angleLength||2*Math.PI,v=G+b,j=d.$3w(D.radius),i=D.addonAngle||0,n=d.$3w(D.center.x,1),R=d.$3w(D.center.y,2),K=D.xInvert^d.extrusionZNagative(D),x=D.yInvert,x||K?K&&x?(G=Math.PI+G,v=Math.PI+v,_=!1):(G=Math.PI*(K?1:2)-G,v=Math.PI*(K?1:2)-v,_=!0):_=!1,_=!_,G=2*Math.PI-G-i,v=2*Math.PI-v-i,_){var m=G;G=v,v=m}var t={type:"arc",cadType:q,cadLayer:D.layer,handle:D.handle,borderColor:U,borderWidth:1,borderWidthAbsolute:!0,rect:[n-j,R-j,2*j,2*j],arcFrom:G,arcTo:v,arcClose:!1};d.options.convertArcToBezier?d.shapeComps.push(d._convertArcToBezier(t)):d.shapeComps.push(t)}}},n.prototype.$8w=function(){var S,q,W,Z,z,k,Q,U,u,D,G,b,v,j,i,n,R,_,x,K,d,N,m,t,V,C=this,O=C._models;S=P.TEXT,V=C.options.textScaleRatio;var e=C.options.useTextCompScale?C.options.browserMinFontSize:0;for(Z=0,z=S.length;Z<z;Z++){q=S[Z],W=O[q];for(U in W)for(u=W[U],k=0,Q=u.length;k<Q;k++)if(D=u[k],(G=D.text||D.tag)&&G.length){if("MTEXT"===q)b=C.$3w(D.height||12),v=C.$3w(D.position.x,1),j=C.$3w(D.position.y,2),d=D.angle?D.angle:D.directionX?Math.atan2(D.directionY,D.directionX):0,d+=D.addonAngle||0,t=1,K=D.attachmentPoint||1,_=K%3,x=Math.floor(K/3),x=1===x?"middle":0===x?"top":"bottom",n=0===_?"right":2===_?"center":"left";else{b=C.$3w(D.textHeight||12),d=D.rotation||0,t=D.xScale||1,2===D.generationFlags?d=2*Math.PI-d:4===D.generationFlags?d=Math.PI-d:6===D.generationFlags&&(d=Math.PI+d),_=D.halign,x=D.valign;var L=D.startPoint;(!L||_||x)&&(L=D.endPoint),v=C.$3w(L.x,1),j=C.$3w(L.y,2),4===_&&(_=1,x=2),n=2===_||5===_?"right":1===_||4===_?"center":"left",x=3===x?"top":2===x?"middle":"bottom"}j+=b/6,d=2*Math.PI-d;var $=b*V,y=1;if($<e&&(y=$/e,$=e),5===_){var c=D.startPoint,X=D.endPoint;if(c&&X){var f=X.x-c.x;t=f/G.length/b}}if(T=G.match(/\\H([0-9\.]+)x;/)){var J=parseFloat(T[1]);$*=J,b*=J}var g=1;if((T=G.match(/\\W([0-9\.]+)[x;]/))&&(g=parseFloat(T[1])),i=$+"px "+(D.font||C.options.font),G=G.replace(/%%%/g,"%"),G=G.replace(/%%P/g,"\xb1"),G=G.replace(/%%C/g,"\u0444"),"MTEXT"===q){G=G.replace(/\\{/g,"#@#"),G=G.replace(/\\}/g,"#@@"),G=G.replace(/({|})/g,""),G=G.replace(/#@#/g,"{"),G=G.replace(/#@@/g,"}");var T;for(G=G.replace(/\\[FfLIOoKkNXQHWSACT~][^;]*;/g,""),N=G.split("\\P"),m=0;m<N.length;m++)R={type:"text",cadType:q,cadLayer:D.layer,handle:D.handle,color:U,text:N[m],rotation:d,rect:[v,j+m*b*1.5,0,0],align:n,vAlign:x,font:i,visible:!D.hidden},1!==y&&(R.scaleX=R.scaleY=y),R.scaleX=g*y,C.shapeComps.push(R)}else R={type:"text",cadType:q,cadLayer:D.layer,handle:D.handle,color:U,text:G,scaleX:t,rotation:d,rect:[v,j,1e-5,1e-5],align:n,vAlign:x,font:i,visible:!D.hidden},1!==y&&(R.scaleX*=y,R.scaleY=y),C.shapeComps.push(R)}}},n.prototype.drawAttrDef=function(){var S,q,W,Z,z,k,Q,U,u,D,G,b,v,j,i,n,P,R,_,x=this,K=x._models;_=x.options.textScaleRatio;var d=x.options.useTextCompScale?x.options.browserMinFontSize:0,N=K.ATTDEF,m=[],t={};for(W in N)for(Z=N[W],S=0,q=Z.length;S<q;S++){z=Z[S],Q=x.$3w(z.textHeight||12),P=z.rotation||0,2===z.generationFlags?P=2*Math.PI-P:4===z.generationFlags?P=Math.PI-P:6===z.generationFlags&&(P=Math.PI+P),P=2*Math.PI-P,i=z.halign,n=z.valign;var V=z.startPoint;(!V||i||n)&&(V=z.endPoint),U=x.$3w(V.x,1),u=x.$3w(V.y,2),b=z.tag,k=z.text||b||"";var C=t[b]||0;t[b]=C+1,C>0&&(b=b+"_"+C),v=[U,u,1e-5,1e-5],b&&(v={func:new Function("data","view",["return [",'    (data.ca("x") || 0) + '+(U-V.x)+",",'    (data.ca("y") || 0) + '+(u+V.y)+",","    1e-5, 1e-5","];"].join("\n")),value:v},m.push({attr:b+".text",valueType:"String"},{attr:b+".x",valueType:"Number"},{attr:b+".y",valueType:"Number"})),4===i&&(i=1,n=2),G=2===i||5===i?"right":1===i||4===i?"center":"left",n=3===n?"top":2===n?"middle":"bottom";var O=Q*_,e=1;O<d&&(e=O/d,O=d),D=O+"px "+(z.font||x.options.font),R=z.scale||1,j={type:"text",cadType:"ATTDEF",cadLayer:z.layer,handle:z.handle,color:W,text:k,scaleX:R,scaleY:R,rotation:P,rect:v,align:G,vAlign:n,font:D,visible:!z.invisible,prefix:b},1!==e&&(j.scaleX*=e,j.scaleY=e),x.shapeComps.push(j)}return m},n.prototype.$7w=function(){var S,q,W,Z,z,k,Q,U,u,D,G,b,v,j,i,n,R,_,x,K,d,N,m=this,t=m._models;for(S=P.ELLIPSE,Z=0,z=S.length;Z<z;Z++){q=S[Z],W=t[q];for(U in W)for(u=W[U],k=0,Q=u.length;k<Q;k++){if(D=u[k],G=D.major,b=Math.atan2(G.y,G.x),v=m.$3w(Math.sqrt(G.x*G.x+G.y*G.y)),j=v*D.ratio,i=D.startAngle||0,
n=D.angleLength||2*Math.PI,R=i+n,_=m.$3w(D.center.x,1),x=m.$3w(D.center.y,2),K=D.xInvert,d=D.yInvert^m.extrusionZNagative(D),d^=1,d||K?K&&d?(i=Math.PI+i,R=Math.PI+R,N=!1):(i=Math.PI*(K?1:2)-i,R=Math.PI*(K?1:2)-R,N=!0):N=!1,N){var V=i;i=R,R=V}b=2*Math.PI-b;var C={type:"arc",cadType:q,cadLayer:D.layer,handle:D.handle,borderColor:U,borderWidth:1,borderWidthAbsolute:!0,rotation:b,rect:[_-v,x-j,2*v,2*j],arcFrom:i,arcTo:R,arcClose:!1,arcOval:!0};m.options.convertArcToBezier?m.shapeComps.push(m._convertArcToBezier(C)):m.shapeComps.push(C)}}},n.prototype._convertArcToBezier=function(S){var q=S.arcFrom,W=S.arcTo;if(q===W)return S;q>W&&(W+=2*Math.PI);var Z={type:"shape"},z=S.rect,k="type,rect,arcFrom,arcTo,arcClose,arcOval,rotation".split(",");for(var Q in S)k.indexOf(Q)>=0||(Z[Q]=S[Q]);var U,u,D,G,b,v=Z.points=[],j=Z.segments=[1],i=W-q,n=Math.max(Math.ceil(Math.abs(i)/Math.PI*2),1),P=i/n,R=Math.tan(.5*P),_=Math.sin(P)*(Math.sqrt(4+3*R*R)-1)/3,x=Math.cos(q),K=Math.sin(q),d=z[2]/2,N=z[3]/2,m=z[0]+d,t=z[1]+N,V=Math.sin(S.rotation||0),C=Math.cos(S.rotation||0),O=function(S,q){var W=d*S,Z=N*q;return{x:m+(C*W-V*Z),y:t+(V*W+C*Z)}},e=O(x,K);v.push(e.x,e.y);for(var L=0;L<n;L++)D=q+(L+1)*P,U=Math.cos(D),u=Math.sin(D),e=O(x-K*_,K+x*_),G=O(U+u*_,u-U*_),b=O(U,u),x=U,K=u,v.push(e.x,e.y,G.x,G.y,b.x,b.y),j.push(4);return Z},n.prototype.$2cw=function(S,q,W){if(S){var Z=S.x,z=S.y;return W=W||1,{x:Z*W*q.a+z*q.c+q.tx,y:Z*W*q.b+z*q.d+q.ty}}},n.prototype.$4w=function(S,q,W,Z,z){var k=this,Q=k.$2w(q,W);if(Q&&(!k.options.filter||!k.options.filter(q,z))){var U,u,D,G=k.$2cw,b=q.type;if("DIMENSION"===b||"INSERT"===b){if(!q.block)return;var v=W.blocks[q.block];if(!v||!v.entities)return;if(!(D=k._blockDef[q.block]))return void console.log("no entity ",q.block);var j=Z||{a:1,b:0,c:0,d:1,tx:0,ty:0};if("INSERT"===b){var i=q.scale?q.scale.x:1,n=q.scale?q.scale.y:1,P=0,R=1,_=0;if(q.deg&&(P=q.deg*Math.PI/180,P=2*Math.PI-P,R=Math.cos(P),_=Math.sin(P)),Z){var x=i*R,K=i*_,d=-n*_,N=n*R,m=q.center.x,t=q.center.y;j={a:Z.a*x+Z.c*K,b:Z.b*x+Z.d*K,c:Z.a*d+Z.c*N,d:Z.b*d+Z.d*N,tx:Z.a*m+Z.c*t+Z.tx,ty:Z.b*m+Z.d*t+Z.ty}}else j={a:i*R,b:i*_,c:-n*_,d:n*R,tx:q.center.x,ty:q.center.y}}k.extrusionZNagative(q)&&(j.a*=-1,j.c*=-1,j.tx*=-1);var V=D.bound,C=(V.pos.x,V.pos.y,G({x:V.xMin,y:V.yMin},j)),O=G({x:V.xMax,y:V.yMax},j),e=G({x:V.xMin,y:V.yMax},j),L=G({x:V.xMax,y:V.yMin},j),$=k._bound;$.xMin=Math.min($.xMin,C.x,O.x,e.x,L.x),$.yMin=Math.min($.yMin,C.y,O.y,e.y,L.y),$.xMax=Math.max($.xMax,C.x,O.x,e.x,L.x),$.yMax=Math.max($.yMax,C.y,O.y,e.y,L.y);var y;return(y=k._models.BLOCK)||(k._models.BLOCK=y=[]),void y.push({handle:q.handle,block:q.block,transform:j,attribs:q.attribs,color:Q})}(U=S[b])||(U=S[b]={}),(u=U[Q])||(u=U[Q]=[]);var c=k.extrusionZNagative(q)&&["POINT","LINE","ELLIPSE"].indexOf(b)<0;if(Z||c){Z||(Z={a:1,b:0,c:0,d:1,tx:0,ty:0});var X={};for(var f in q)X[f]=q[f];X.radius&&(X.radius*=Math.sqrt(Z.a*Z.a+Z.b*Z.b)),X.textHeight&&(X.textHeight*=Math.sqrt(Z.a*Z.a+Z.b*Z.b));var J=c?-1:1;if(X.position=G(X.position,Z,J),X.startPoint=G(X.startPoint,Z,J),X.center=G(X.center,Z,J),"ELLIPSE"===b){var g;g=G({x:q.major.x+q.center.x,y:q.major.y+q.center.y},Z,J),X.major={x:g.x-X.center.x,y:g.y-X.center.y},k.extrusionZNagative(q)&&(X.major.x*=-1)}var T;X.vertices&&(T=[],X.vertices.forEach(function(S){var q=G(S,Z,J);S.bulge&&(q.bulge=S.bulge),T.push(q)}),X.vertices=T),X.points&&(T=[],X.points.forEach(function(S){var q=G(S,Z,J);S.bulge&&(q.bulge=S.bulge),T.push(q)}),X.points=T);var a=Math.atan2(Z.b,Z.a),r=Math.cos(a);X.yInvert=Z.d*r<0,X.xInvert=Z.a*r<0,0!==a&&(X.addonAngle=a),q=X}k.$8dw(q),u.push(q)}},n.prototype.$8cw=function(S){for(var q=1/0,W=1/0,Z=-1/0,z=-1/0,k=0,Q=S.length;k<Q;k++){var U=S[k];q=Math.min(q,U.x),W=Math.min(W,U.y),Z=Math.max(Z,U.x),z=Math.max(z,U.y)}return{xMin:q,yMin:W,xMax:Z,yMax:z}},n.prototype.$8dw=function(S){var q,Z,z=this;Z=S.type;for(q in P){if(P[q].indexOf(Z)>=0)break;q=W}if(q){var k,Q,U,u,D,G,b,v,j,i,n,R,_,x,K,d,N,m,t,V,C,O=z.$8cw;switch(q){case"LINE":case"LWLINE":for(k=O(S.vertices),V=S.vertices.length,m=0;m<V;m++)t=S.vertices[m],z._isStraightLine(t.bulge)||(m!==V-1||S.shape)&&(C=O(z._getBulgeSegment(t,S.vertices[(m+1)%V],t.bulge)),k.xMin=Math.min(k.xMin,C.xMin),k.yMin=Math.min(k.yMin,C.yMin),k.xMax=Math.max(k.xMax,C.xMax),k.yMax=Math.max(k.yMax,C.yMax));break;case"SOLID":k=O(S.points);break;case"POINT":if(!S.position)return;Q=S.position.x,U=S.position.y,k={xMin:Q,yMin:U,xMax:Q,yMax:U};break;case"TEXT":case"ATTDEF":var e=S.text||"";if("TEXT"===q&&!e)return;Q=S.position?S.position.x:S.startPoint.x,U=S.position?S.position.y:S.startPoint.y,N=S.height||S.textHeight||12,z._minFontSize=Math.min(z._minFontSize,N),k={xMin:Q,yMin:U,xMax:Q+N*e.length,yMax:U+N};break;case"CIRCLE":for(Q=S.center.x,U=S.center.y,u=S.radius,D=[],G=S.startAngle||0,b=G+(S.angleLength||2*Math.PI),v=S.xInvert^z.extrusionZNagative(S),j=S.yInvert,i=v?-1:1,n=j?-1:1,R=G;R<b+Math.PI/30;R+=Math.PI/30)R=Math.min(R,b),D.push({x:Q+i*u*Math.cos(R),y:U+n*u*Math.sin(R)});k=O(D);break;case"ELLIPSE":for(Q=S.center.x,U=S.center.y,D=[],_=Math.sqrt(S.major.x*S.major.x+S.major.y*S.major.y),x=_*S.ratio,u=Math.atan2(S.major.y,S.major.x),K=Math.sin(u),d=Math.cos(u),G=S.startAngle||0,b=G+(S.angleLength||2*Math.PI),v=S.xInvert,j=S.yInvert^z.extrusionZNagative(S),i=v?-1:1,n=j?-1:1,R=G;R<b+Math.PI/30;R+=Math.PI/30){R=Math.min(R,b);var L=i*_*Math.cos(R),$=n*x*Math.sin(R);D.push({x:Q+(d*L-K*$),y:U+(K*L+d*$)})}k=O(D);break;default:return}var y=z._bound;y.xMin=Math.min(y.xMin,k.xMin),y.yMin=Math.min(y.yMin,k.yMin),y.xMax=Math.max(y.xMax,k.xMax),y.yMax=Math.max(y.yMax,k.yMax)}},n.prototype.parseFile=function(S){var q=this,W="string"==typeof q.options.sanitize?{sanitize:q.options.sanitize}:null,Z=new Q(W),z=Z.parseSync(S);q._dxf=z,q._isAc2015="AC1015"===z.header.$ACADVER,q.$19w=q.$1w(z)},n.prototype.$3w=function(S,q){var W=this;return(2===q?-(S-W._shiftY):1===q?S-W._shiftX:S)*W._scale},n.prototype.$1w=function(S){var q,W,Z,z,k,Q,U,u,D,G,b,v;if(!q&&S.tables&&S.tables.viewPort){G=S.tables.viewPort.viewPorts;for(D in G)if(b=G[D],v=b.viewDirectionFromTarget,b.center&&(0===b.renderMode||v&&0===v.x&&0===v.y&&1===v.z)){Z=b.center,z=b.upperRightCorner,k=b.lowerLeftCorner,q={x:z.x,y:z.y},W={x:k.x,y:k.y},Q=b.viewWidth||0,U=b.viewHeight||0,b.viewTarget&&(Z={x:Z.x+b.viewTarget.x,y:Z.y+b.viewTarget.y});break}}return!q&&S.header&&(u=S.header,u.$EXTMIN&&u.$EXTMAX&&(q=u.$EXTMAX,W=u.$EXTMIN)),Q=Math.max(Q,q.x-W.x),U=Math.max(U,q.y-W.y),Z=Z||{x:Q/2+W.x,y:U/2+W.y},{width:Q,height:U,x:Z.x,y:Z.y}},n.prototype.$2w=function(S,q){var Z,z=this;if(S||console.log("no entity",S),q.tables&&q.tables.layer&&(Z=q.tables.layer.layers[S.layer]),!Z||Z.visible){var k;S.color!==W?0===(k=S.color)&&(k=z.options.defaultColor):Z&&(k=Z.color),k&&16777215!==k||(k=z.options.defaultColor);var k="#"+((1<<24)+k).toString(16).slice(1);return z.options.mapColor&&(k=z.options.mapColor(k)),k}},n.prototype.sortBlocks=function(S){var W,Z,z,k,Q=q.keys(S),U={};for(W in S)if(Z=S[W],Z.entities)for(var u=0,D=Z.entities.length;u<D;u++)z=Z.entities[u],"DIMENSION"!==(k=z.type)&&"INSERT"!==k||z.block&&(U[W]||(U[W]=[]),U[W].push(z.block));for(var G=Q.length,b=G,v={},j=new Array(G),i=!1,n=function(S,q,W){if(W.indexOf(S)>=0)return void(i=!0);if(!v[q]){v[q]=!0;var Z=U[S],z=Z?Z.length:0;if(z){var k=W.concat(S);do{var u=Z[--z];if(n(u,Q.indexOf(u),k),i)break}while(z)}j[--G]=S}};b--;)v[b]||n(Q[b],b,[]);return i?[]:j};var R=[0,5,9,13,15,18,20,25,30,35,40,50,53,60,70,80,90,100,106,120,140,158,200,211],_=function(S){for(var q,W,Z,z,k=R.length,Q=1;Q<k;Q++)if(q=R[Q-1],W=R[Q],Z=q-S,z=W-S,Z<=0&&z>=0)return Math.abs(Z)<Math.abs(z)?q:W;return W},x=G.DxfWriter=function(S){this.$16w(S)};x.prototype={},x.prototype.constructor=x,q.defineProperties(x.prototype,{}),x.prototype.$16w=function(S){var W=this,Z=G.DxfWriter.template;Z.converted||(q.keys(Z).forEach(function(S){Z[S]=Z[S].join("\n")}),Z.converted=!0),W._transformFunc=S.transformFunc||function(S){return S},W._drawingScale=S.scale||1,W._matchFunc=S.matchFunc||function(){return!0},W._maxHandleId=262128},x.prototype.toDxf=function(S,q){var W=this;return W.dxfContent=S,W.gv=q,W.outputEntityLines=["ENTITIES","  0","ENDSEC"],W._fetchEntityContent(),W._collectGvEntity(),W._insertEntities(),W._write()},x.prototype._collectGvEntity=function(){var S=this;S.gv.dm().toDatas(S._matchFunc).each(function(q){var W=q.a("handle");W&&S._recordMaxHandleId(W)})},x.prototype._fetchEntityContent=function(){var S=this,q=S.dxfContent,W=S.entitiesStartIndex=q.indexOf("ENTITIES"),Z=S.entitiesEndIndex=q.indexOf("ENDSEC",W)+"ENDSEC".length;S.entitiesContent=q.slice(W,Z),S.dxfEntityLines=S.entitiesContent.split(/\r\n|\n/)},x.prototype._updateEntities=function(){var S=this,q=S.outputEntityLines,Z=S.dxfEntityLines,z=S.gvEntities;q.push(Z[0]);for(var k,Q,U,u,D,G,b,v,j,i,n,P,R,_,x=1,K=1e5,d=S._findCode,N=S._toFloat;K--;){if("ENDSEC"===(u=Z[x+1].trim())){q.push(Z[x]),q.push(Z[x+1]);break}for(k=x+2;K--&&"0"!==Z[k].trim();)k+=2;if(D=Z[d("5",Z,x,k)],S._recordMaxHandleId(D),G=z[D]){for(Q=q.length,n=x;n<k;n++)q.push(Z[n]);if(U=q.length,x=k,"edge"!==G.a("shapeType")){if("image"===G.a("shapeType")){for(b=S._getNodeRealScale(G),j=2*Math.PI-G.getRotation();j>=2*Math.PI;)j-=2*Math.PI;for(;j<0;)j+=2*Math.PI;v=S._transformFunc(G.getPosition()),Math.abs(b.x-1)<1e-5&&Math.abs(b.y+1)<1e-5&&(b.x=-1,b.y=1,j=2*Math.PI-j);var m={};[{key:"10",value:v.x},{key:"20",value:v.y},{key:"42",value:b.y,default:1,before:["50"]},{key:"41",value:b.x,default:1,dependOn:"42",before:["42","50"]},{key:"50",value:180*j/Math.PI,default:0}].forEach(function(S){if(P=S.key,R=S.value,_=S.default!==W&&Math.abs(R-S.default)<1e-5,R=N(R,"10"===P||"20"===P||"50"===P),i=d(P,q,Q,U))R!==q[i].trim()&&(q[i]=R);else{if(_&&(!S.dependOn||m[S.dependOn]))return void(m[P]=!0);var Z=!1;do{if(!S.before)break;if(i=W,S.before.forEach(function(S){var W=d(S,q,Q,U);W&&(!i||W<i)&&(i=W)}),!i)break;q.splice(i-1,0," "+P,R),Z=!0}while(!1);Z||(q.push(" "+P),q.push(R)),U+=2}})}}else S._tryUpdateEdge(q,Q,U,u,G)}else console.log("have no entity with handle "+D+" "+u),x=k}},x.prototype._recordMaxHandleId=function(S){var q=parseInt("0x"+S),W=this;W._maxHandleId=Math.max(W._maxHandleId,q)},x.prototype._nextHandleId=function(){return(++this._maxHandleId).toString(16).toUpperCase()},x.prototype._getNodeRealScale=function(S){var q=this,W=S.getScale(),Z=S.getSize(),z=G.Default.getImage(S.getImage());return{x:W.x*Z.width*z.scale/(z.width*q._drawingScale),y:W.y*Z.height*z.scale/(z.height*q._drawingScale)}},x.template={INSERT:["  0","INSERT","  5","$HANDLE","330","1F","100","AcDbEntity","  8","0","100","AcDbBlockReference","  2","$BLOCK"," 10","$POSITION.X"," 20","$POSITION.Y"," 30","0.0"," 41","$SCALE.X"," 42","$SCALE.Y"," 50","$ROTATION"]},x.prototype._insertEntities=function(){var S,q=this;q.gv.dm().toDatas(q._matchFunc).each(function(W){if(S=null,W.a("addonBlock"))S=q._addonBlock(W);else if(W.a("addonText"))S=q._addonText(W);else if(W.a("addonARC")&&!W.s("shape.arc.oval")){var Z=W.s("shape.arc.to"),z=W.s("shape.arc.from")||0;S=!Z||Math.abs(Z-z)>=2*Math.PI?q._addonCircle(W):q._addonARC(W)}else W.a("addonARC")&&W.s("shape.arc.oval")?S=q._addonEllipse(W):W.a("addonLine")?S=q._addonLine(W):W.a("addonRect")&&(S=q._addonRect(W));if(S){var k=S.length,Q=q.outputEntityLines.length,U=Q+k;q.outputEntityLines.length=U,q.outputEntityLines[U-1]=q.outputEntityLines[Q-1],q.outputEntityLines[U-2]=q.outputEntityLines[Q-2];for(var u=0,D=Q-2;u<k;++u,++D)q.outputEntityLines[D]=S[u]}})};var K=function(S){if(S instanceof G.Shape){var q=new G.Matrix,W=S.getPosition();return q.translate(-W.x,-W.y).scale(S.getScaleX(),S.getScaleY()).rotate(S.getRotation()).translate(W.x,W.y),q}return S.getMatrix?S.getMatrix():new G.Matrix};x.prototype._addonRect=function(S){var q=this,W=S.getPoints(),Z=S.getSegments(),z=!0;Z&&(z=5===Z.get(Z.size()-1));var k=S.s("shape.dash"),Q=S.s("shape.dash.pattern"),U=k?Q[0]/10:1,u=10*(S.s("shape.border.width")||0);u=_(u);var D,b=S.s("shape.border.color");k&&(b=S.s("shape.dash.color")),b&&(b=G.Default.toColorData(b),parseFloat((b[3]/255).toFixed(2)),b=(b[0]<<16)+(b[1]<<8)+b[2],D=i.indexOf(b));var v=["  0","LWPOLYLINE","  5",S.a("handle")||q._nextHandleId(),"330","1F","100","AcDbEntity","  8","0"];k&&v.push.apply(v,["  6","DASHED"]),b&&(D>=0?v.push.apply(v,[" 62",D]):v.push.apply(v,["420",b])),1!==U&&v.push.apply(v,[" 48",U]),G.Default.isNumber(u)&&v.push.apply(v,["370",u]),v.push.apply(v,["100","AcDbPolyline"," 90","        "+W.size()," 70","     "+(z?1:0)," 43","0.0"]);var j,n=q._toFloat,P=K(S);return W.each(function(S){j=q._transformFunc(P.tf(S)),v.push.apply(v,[" 10",n(j.x,!0)," 20",n(j.y,!0)])}),v},x.prototype._addonCircle=function(S){var q=this,W=["  0","CIRCLE","  5",S.a("handle")||q._nextHandleId(),"330","1F","100","AcDbEntity","  8","0","100","AcDbCircle"],Z=q._toFloat,z=q._transformFunc(S.getPosition());W.push.apply(W,[" 10",Z(z.x,!0)," 20",Z(z.y,!0)," 30","0.0"]);var k=S.getScale(),Q=S.getWidth()*k.x,U=S.getHeight()*k.y;return W.push.apply(W,[" 40",.5*Math.min(Q,U)/q._drawingScale]),W},x.prototype._addonLine=function(S){var q,W=this,Z=[],z=W._toFloat,k=S.getPoints(),Q=K(S),U=W._transformFunc(Q.tf(k.get(0))),u=S.a("handle")||W._nextHandleId(),D=S.s("shape.dash"),b=S.s("shape.dash.pattern"),v=D?b[0]/10:1,j=10*(S.s("shape.border.width")||0);j=_(j);var n,P=S.s("shape.border.color");return D&&(P=S.s("shape.dash.color")),P&&(P=G.Default.toColorData(P),parseFloat((P[3]/255).toFixed(2)),P=(P[0]<<16)+(P[1]<<8)+P[2],n=i.indexOf(P)),k.each(function(S,k){0!==k&&(Z.push.apply(Z,["  0","LINE","  5",u,"330","1F","100","AcDbEntity","  8","0"]),D&&Z.push.apply(Z,["  6","DASHED"]),P&&(n>=0?Z.push.apply(Z,[" 62",n]):Z.push.apply(Z,["420",P])),1!==v&&Z.push.apply(Z,[" 48",v]),G.Default.isNumber(j)&&Z.push.apply(Z,["370",j]),Z.push.apply(Z,["100","AcDbLine"]),Z.push.apply(Z,[" 10",z(U.x,!0)," 20",z(U.y,!0)," 30","0.0"]),q=W._transformFunc(Q.tf(S)),Z.push.apply(Z,[" 11",z(q.x,!0)," 21",z(q.y,!0)," 31","0.0"]),U=q,u=W._nextHandleId())}),Z},x.prototype._addonEllipse=function(S){var q=this,W=["  0","ELLIPSE","  5",S.a("handle")||q._nextHandleId()];W.push.apply(W,["330","1F","100","AcDbEntity","  8","0","100","AcDbEllipse"]);var Z=q._toFloat,z=q._transformFunc(S.getPosition());W.push(" 10");W.push(Z(z.x,!0));W.push(" 20");W.push(Z(z.y,!0)),W.push.apply(W,[" 30","0.0"]);var k,Q=S.getScale(),U=S.getWidth()*Q.x/q._drawingScale,u=S.getHeight()*Q.y/q._drawingScale,D=.5*Math.max(U,u),G=0;U>u?k={x:D,y:0}:(k={x:0,y:D},G=.5*-Math.PI);var b=-S.getRotation(),v=Math.sin(b),j=Math.cos(b),i=j*k.x-v*k.y,n=v*k.x+j*k.y;W.push.apply(W,[" 11",Z(i,!0)," 21",Z(n,!0)," 31","0.0"]),W.push.apply(W,["210","0.0","220","0.0","230","1.0"]);var P=U/u;P>1&&(P=1/P),W.push.apply(W,[" 40",Z(P,!0)]);var R=S.s("shape.arc.from"),_=S.s("shape.arc.to"),x=2*Math.PI-_+G,K=(x+_-R)%(2*Math.PI);return W.push.apply(W,[" 41",x," 42",K||2*Math.PI]),W},x.prototype._addonARC=function(S){var q=this,W=["  0","ARC","  5",S.a("handle")||q._nextHandleId()];W.push.apply(W,["330","1F","100","AcDbEntity","  8","0","100","AcDbCircle"]);var Z=q._toFloat,z=q._transformFunc(S.getPosition());W.push(" 10");W.push(Z(z.x,!0));W.push(" 20");W.push(Z(z.y,!0)),W.push.apply(W,[" 30","0.0"]);var k=S.getScale(),Q=S.getWidth()*k.x,U=S.getHeight()*k.y,u=.5*Math.min(Q,U);W.push.apply(W,[" 40",Z(u/q._drawingScale,!0)]),W.push.apply(W,["100","AcDbArc"]);var D=S.getRotation(),G=S.s("shape.arc.from"),b=S.s("shape.arc.to"),v=2*Math.PI,j=(v-b-D)%v,i=(j+b-G)%v;return i=i||2*Math.PI,W.push.apply(W,[" 50",Z(180*j/Math.PI,!0)," 51",Z(180*i/Math.PI,!0)]),W};var d={left:0,center:1,right:2},N={top:3,middle:2,bottom:1};x.prototype._addonText=function(S){var q=this,W=["  0","TEXT","  5",S.a("handle")||q._nextHandleId()];W.push.apply(W,["330","1F","100","AcDbEntity","  8","0","100","AcDbText"]);var Z=S.s("text.font")||"16px Standard",z=S.s("text"),k=G.Default.getTextSize(Z,z),Q=S.getScale(),U=parseFloat(Z)/q._drawingScale*Q.y,u=U/k.height*k.width,D=q._toFloat,b=q._transformFunc(S.getPosition());b.y+=U/4;var v=W.push(" 10");W.push(D(b.x,!0));var j=W.push(" 20");W.push(D(b.y,!0)),W.push.apply(W,[" 30","0.0"]),W.push(" 40"),W.push(U),W.push("  1"),W.push(z);var i=2*Math.PI-S.getRotation();W.push(" 50"),W.push(D(180*i/Math.PI%360,!0)),W.push(" 41"),W.push(Q.x/Q.y),Z=Z.substr(Z.indexOf("px")+3).split(","),W.push("  7"),W.push(Z[0]);var n=S.s("text.align")||"left",P=S.s("text.vAlign")||"bottom";if("left"!==n&&(W.push(" 72"),W.push("     "+d[n])),"bottom"!==P||"left"!==n){W.push(" 11"),W.push(D(b.x,!0)),W.push(" 21"),W.push(D(b.y,!0)),W.push.apply(W,[" 31","0.0"]);var R=0,_=0;"center"===n?R=.5*u:"right"===n&&(R=u),R*=Q.x,"top"===P?_=U:"middle"===P&&(_=.5*U),_*=Q.y;var x=Math.cos(i+Math.PI),K=Math.sin(i+Math.PI);W[v]=x*R-K*_+b.x,W[j]=K*R+x*_+b.y}return W.push.apply(W,["100","AcDbText"]),"bottom"!==P&&(W.push(" 73"),W.push("     "+N[P])),W},x.prototype._addonBlock=function(S){var q=this,W=G.DxfWriter.template.INSERT;W=W.replace("$HANDLE",S.a("handle")||q._nextHandleId()),W=W.replace("$BLOCK",S.getImage());for(var Z=q._getNodeRealScale(S),z=2*Math.PI-S.getRotation();z>=2*Math.PI;)z-=2*Math.PI;for(;z<0;)z+=2*Math.PI;var k=q._transformFunc(S.getPosition());Math.abs(Z.x-1)<1e-5&&Math.abs(Z.y+1)<1e-5&&(Z.x=-1,Z.y=1,z=2*Math.PI-z);var Q=q._toFloat;return W=W.replace("$POSITION.X",Q(k.x,!0)),W=W.replace("$POSITION.Y",Q(k.y,!0)),W=W.replace("$SCALE.X",Q(Z.x)),W=W.replace("$SCALE.Y",Q(Z.y)),W=W.replace("$ROTATION",Q(180*z/Math.PI,!0)),W.split(/\r\n|\n/)},x.prototype._tryUpdateEdge=function(S,q,W,Z,z){var k=this,Q=G.Default.getInternal(),U=Q.getEdgeAgentPosition(k.gv,z.getSourceAgent(),z.s("edge.source.position"),z.s("edge.source.offset.x"),z.s("edge.source.offset.y"),z.s("edge.source.anchor.x"),z.s("edge.source.anchor.y")),u=Q.getEdgeAgentPosition(k.gv,z.getTargetAgent(),z.s("edge.target.position"),z.s("edge.target.offset.x"),z.s("edge.target.offset.y"),z.s("edge.target.anchor.x"),z.s("edge.target.anchor.y"));U=k._transformFunc(U),u=k._transformFunc(u);var D=k._findCode;if("LINE"===Z)S[D("10",S,q,W)]=U.x,S[D("20",S,q,W)]=U.y,S[D("11",S,q,W)]=u.x,S[D("21",S,q,W)]=u.y;else if("LWPOLYLINE"===Z){for(var b,v=D("10",S,q,W),j=v;b=D("10",S,j+1,W);)j=b;j=(b=D("30",S,j+1,W))?b:D("20",S,j+1,W),S.splice(v-1,j-v+2);var i=[U];z.s("edge.points").each(function(S){i.push(k._transformFunc(S))}),i.push(u);var n=v-1;i.forEach(function(q){S.splice(n,0,"10",q.x,"20",q.y),n+=4})}},x.prototype._findCode=function(S,q,W,Z){for(var z=W,k=!1;z<Z;){if(S===q[z].trim()){k=!0;break}z+=2}if(k)return z+1},x.prototype._toFloat=function(S,q){return q||(S=Math.round(1e8*S)/1e8),S=""+S,S.indexOf(".")<0&&(S+=".0"),S},x.prototype._write=function(){var S=this,q=S.dxfContent,W=S.outputEntityLines.join("\n"),Z=S.entitiesStartIndex,z=S.entitiesEndIndex;return q.slice(0,Z)+W+q.slice(z)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);var qZ=function(){function S(q,W){QW(this,S),this.editor=W,this.handler=q,this.cookie=0,this.callbacks={},this.cmds={};var Z=jW.config.host||window.location.hostname,z=jW.config.port||window.location.port,k=this.url=window.location.protocol+"//"+Z+":"+z;this.socket=io.connect(k),this.initEventListener()}return S.prototype.request=function(S,q,W){var Z=++this.cookie;this.callbacks[Z]=W,this.cmds[Z]=S;var z=this.editor.sid;this.socket.emit(S,Z,q,z?{sid:z}:null);var k=S;q&&(NS(q)?k=S+": "+q:q.path&&(k=S+": "+q.path)),this.handler({type:"request",message:k,cmd:S,data:q})},S.prototype.handleRespone=function(S,q){var W=this.callbacks[S],Z=this.cmds[S];delete this.callbacks[S],delete this.cmds[S],this.handler({type:"response",message:Z,cmd:Z,data:q}),W&&W(q)},S.prototype.initEventListener=function(){var S=this;this.socket.on("connect",function(){S.handler({type:"connected",message:S.url})}),this.socket.on("disconnect",function(){S.handler({type:"disconnected",message:S.url})}),this.socket.on("fileChanged",function(q){S.handler({type:"fileChanged",path:q.path,event:q.event})}),this.socket.on("operationDone",function(q,W){S.handleRespone(q,W)}),this.socket.on("download",function(q){S.handler({type:"download",path:q})}),this.socket.on("confirm",function(q,W){S.handler({type:"confirm",path:q,datas:W})})},S}(),WZ=function(S){function q(W,Z){var z=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];QW(this,q);var k=DW(this,S.call(this,Z));return k.editor=W,k.editable=z,k.dragToIndexEnabled=!0,k.dragToChildEnabled=!0,k.addTopPainter(k.drawDNDState.bind(k)),k}return uW(q,S),q.prototype.getLabelColor=function(q){return q!==this.draggingData||this.isSelected(q)?q.s("2d.visible")&&q.s("3d.visible")?S.prototype.getLabelColor.call(this,q):jW.config.color_disabled:jW.config.color_select},q.prototype.handleDelete=function(){this.editable&&this.removeSelection()},q.prototype.isDroppable=function(S,q){return!1},q.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},q.prototype._endDrag=function(S,q){},q.prototype._endCrossDrag=function(S,q){},q.prototype.drawDNDState=function(S){jW.config.drawDNDState?S.drawDNDState=!0:(jW.config.texureImage3D&&(S.texureImage3D=!0),S.texureImage2D=!0);var q=void 0;if(this._dragInfo&&this._dragInfo.inView?q=this._dragInfo:this._crossDragInfo&&(q=this._crossDragInfo),q){var W=this.getWidth(),Z=this.getRowHeight(),z=q.type,k=q.parent,Q=k?this.getRowDatas().indexOf(k):-1,U=jW.config.color_select_dark;if(q.refData){if(this.dragToChildEnabled&&h(S,U,0,Q*Z,W,Z,2),"up"===z||"down"===z){var u=q.x,D=q.y;S.beginPath(),S.arc(u-3,D,3,0,2*Math.PI,!0),S.moveTo(u,D),S.lineTo(W,D),S.lineWidth=2,S.strokeStyle=U,S.stroke()}}else{var G=this.getViewRect();h(S,U,G.x,G.y,G.width,G.height,2)}}},q.prototype._dragging=function(S,q){var W=this.getRowHeight(),Z=this.lp(S),z=Z.y/W,k=Math.floor(z);if(k>this.getRowSize()-1||k<0)q.refData=null,q.type="parent",q.parent=null;else{var Q=Z.y-k*W,U=this.dragToChildEnabled?.25:.5,u=this.dragToChildEnabled?.75:.5;this.dragToIndexEnabled?q.type=Q<W*U?"up":Q>W*u?"down":"parent":q.type="parent";var D=q.refData=this.getRowDatas().get(k);"up"===q.type?(q.parent=D.getParent(),q.x=(this.getLevel(D)+1)*this.getIndent(),q.y=k*W):"down"===q.type?(this.getToggleIcon(D)===this.getExpandIcon()?(q.parent=D,q.x=(this.getLevel(D)+2)*this.getIndent()):(q.parent=D.getParent(),q.x=(this.getLevel(D)+1)*this.getIndent()),q.y=(k+1)*W):q.parent=D}this.autoScroll(S),this.redraw()},q.prototype.$1$=function(){var S="";if(this.draggingData&&(S=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var q=this.sm().size();S+=q>1?" (+"+q+") ":""}return S},q.prototype.handleDragAndDrop=function(S,q){if(this.editable){if("prepare"===q)return void this._clearDragInfo();"begin"===q&&(this._dragInfo={tip:this.$1$(),view:this});var W=this._dragInfo;if(W){var Z=this.editor.dnd;if("begin"===q||"between"===q){return this.getView().contains(O(S))?(W.inView=!0,this._dragging(S,W),Z.clearDropView(S,W)):(W.inView&&this.redraw(),W.inView=!1,Z.crossDrag(S,W)),void Z.showTip(W.tip,S)}return"end"===q?(W.inView?this._endDrag(S,W):Z.crossDrop(S,W),void this._clearDragInfo()):"cancel"===q?(W.inView||Z.crossCancel(S,W),void this._clearDragInfo()):void 0}}},q.prototype.handleCrossDrag=function(S,q,W){if("exit"===q||"cancel"===q)return this._crossDragInfo=null,void this.redraw();if("enter"===q||"over"===q)return this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(S,this._crossDragInfo);if("drop"===q){if(this.explorer){var Z=this._crossDragInfo.parent?this._crossDragInfo.parent.url:this.explorer.currentDir,z={url:Z,event:S};this.editor.fireEvent("explorerCrossDrop",z),z.preventDefault||this._endCrossDrag(S,W)}else this._endCrossDrag(S,W);return this._crossDragInfo=null,void this.redraw()}},q.prototype.isEditable=function(S){return this.editable},q.prototype.rename=function(S,q){S.setName(q)},q.prototype.handleDataDoubleSelect=function(S,q){if(this.isEditable(q)){var W=this.getLevel(q);W+=this.getIcon(q)?2:1,this.lp(S).x>W*this.getIndent()&&this.beginEditing(q)}},q.prototype.getEditingLabel=function(S){return this.getLabel(S)},q.prototype.beginEditing=function(S){var q=this;this.cancelEditing(),this.makeVisible(S),this.validate();var W=this.getLevel(S);W+=this.getIcon(S)?2:1;var Z=this.getIndent()*W,z=this.ty()+this.getRowIndex(S)*this.getRowHeight(),k=Math.max(1,this.getWidth()-Z),Q=this.getRowHeight();this._currentEditor=new ht.widget.TextField,this._currentEditor.data=S;var U=this._currentEditor.getElement(),u=this.getEditingLabel(S);U.value=null==u?"":u,U.onblur=function(S){q.endEditing()},U.onkeydown=function(S){K(S)?q.endEditing():d(S)&&q.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),o(this._currentEditor,Z,z,k,Q),this._currentEditor.setFocus(),ht.Default.callLater(U.select,U)},q.prototype.endEditing=function(){var S=this._currentEditor;S&&(this.rename(S.data,S.getValue()),delete this._currentEditor,M(S.getView()),this.redraw())},q.prototype.cancelEditing=function(){var S=this._currentEditor;S&&(delete this._currentEditor,M(S.getView()),this.redraw())},q.prototype.addBlockItems=function(S){var q=this,W=function(){return q.sm().size()>0},Z=function(){for(var S=q.sm(),W=S.getSelection(),Z=0,z=S.size();Z<z;Z++){var k=W.get(Z);if(k instanceof ht.Block&&!(k instanceof ht.RefGraph))return!0}return!1};S.push({separator:!0,visible:function(){return q.editable&&(W()||Z())}}),S.push({id:"block",label:k("editor.block"),action:function(){q.editor.block()},visible:function(){return q.editable&&W()}}),S.push({id:"unblock",label:k("editor.unblock"),action:function(){q.editor.unblock()},visible:function(){return q.editable&&Z()}})},q.prototype.addSelectDescendantItems=function(S){var q=this;S.push({id:"selectDescendant",label:k("editor.selectdescendant"),action:function(){var S=q.sm(),W=S.getSelection().toArray(),Z=[];W.forEach(function(S){q.dm().eachByDepthFirst(function(S){W.indexOf(S)>=0||Z.push(S)},S)}),S.as(Z)},visible:function(){return!!q.sm().size()}})},q}(hW),ZZ=function(S){function q(W){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];QW(this,q);var z=DW(this,S.call(this,W.editor,W.dataModel,Z));return z.explorer=W,z.dragToIndexEnabled=!1,z.setSortFunc(jW.config.createFileTreeSortFunc(z)),z}return uW(q,S),q.prototype.isVisible=function(S){return!1!==S.a("visible")&&((!this._visibleFunc||!1!==this._visibleFunc(S))&&(S.fileType===RW||S.fileType===PW))},q.prototype.getLabel=function(S){return k("url:"+S.url,!0)||this.getEditingLabel(S)},q.prototype.getEditingLabel=function(S){return S.getName()},q.prototype.handleBackgroundClick=function(S){},q.prototype.handleDelete=function(){this.editable&&jW.config.removeFileByKeyboardEnabled&&this.explorer.deleteSelection(this)},q.prototype.isDroppable=function(S,q){return!(!this.editable||q.view!==this.explorer.list)||q.view===this.editor.dndFromOutside},q.prototype._endCrossDrag=function(S,q){var W=this;if(this._crossDragInfo){var Z=q.view,z=this._crossDragInfo.parent;if(z||(z=this.explorer.rootNode),Z===this.explorer.list){var Q=Z.draggingData,U=function(){Z.isSelected(Q)?Z.sm().toSelection().each(function(S){W.editor.moveFile(S,z)}):W.editor.moveFile(Q,z)};jW.config.promptForMovingFile?qq(k("editor.move"),k("editor.confirmmovefile"),U,function(){}):U()}else Z===this.editor.dndFromOutside&&this.editor.dropLocalFileOnDir(S,z)}},q.prototype._endDrag=function(S,q){var W=this,Z=q.parent;Z||(Z=this.explorer.rootNode);var z=this.draggingData,Q=function(){if(W.isSelected(z)){W.getTopRowOrderSelection().each(function(S){W.editor.moveFile(S,Z)})}else W.editor.moveFile(z,Z),W.sm().ss(z);Z&&W.expand(Z)};jW.config.promptForMovingFile?qq(k("editor.move"),k("editor.confirmmovefile"),Q,function(){}):Q()},q.prototype.isEditable=function(S){return this.editable&&S&&!1!==S.a("editable")},q.prototype.beginEditing=function(q){var W={data:q,url:q.url};this.editor.fireEvent("fileRenaming",W),W.preventDefault||S.prototype.beginEditing.call(this,q)},q.prototype.rename=function(S,q){this.editor.renameFile(S,q,function(){S.s("label")?S.s("label",q):S.setName(q)})},q.prototype.getIcon=function(S){return void 0!==S.getIcon()?S.getIcon():S.fileType===RW?this.hasExpandedChild(S)?"editor.direxpanded":"editor.dircollapsed":S.fileType===PW?"editor.root.state":null},q}(WZ),zZ=function(S){function q(W){return QW(this,q),DW(this,S.call(this,W))}return uW(q,S),q.prototype.isVScrollable=function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},q.prototype.isV=function(S){var q=this.gv.getViewRect();return this.isVScrollable()&&(q.x+q.width-this.gv.lp(S).x)*this.gv.getZoom()<ht.Default.scrollBarInteractiveSize},q.prototype.clear=function(S){S&&this._dragging&&!this._dragCancel&&this.gv.handleDragAndDrop(S,"end"),this.gv.draggingData&&(this.gv.draggingData.iv(),this.gv.draggingData=null,this.gv.redraw()),this._dragging=this._dragCancel=this._clientPoint=null},q.prototype.handle_mousedown=function(S){this.handle_touchstart(S)},q.prototype.handle_touchstart=function(S){if(!this.isV(S)&&!IS(S.target)){WS(S),this.clear(S),this._clientPoint=C(S);var q=this.gv.getDataAt(S);m(S)?q?(this.gv.draggingData=q,q.iv(),this.gv.redraw(),this.gv.handleDragAndDrop(S,"prepare"),V(this,S)):this.gv.sm().cs():(q?this.handleSelection(S,q):this._cancelDataDoubleSelect(),this.clear(S))}},q.prototype.handle_mouseup=function(S){this.handle_touchend(S)},q.prototype.handle_touchend=function(S){if(this._clientPoint&&!this._dragging){var q=this.gv.getDataAt(S);q?this.handleSelection(S,q):this._cancelDataDoubleSelect()}this.gv._justDoubleClickData=!1,this.gv._levelChanged=!1,this.clear(S)},q.prototype.handleWindowMouseMove=function(S){this.handleWindowTouchMove(S)},q.prototype.handleWindowMouseUp=function(S){this.handleWindowTouchEnd(S)},q.prototype.handleWindowTouchMove=function(S){WS(S),this._dragging?this._dragCancel||this.gv.handleDragAndDrop(S,"between"):this._clientPoint&&this.gv.draggingData&&y(C(S),this._clientPoint)>2&&(this._dragging=!0,this.gv.handleDragAndDrop(S,"begin"))},q.prototype.handleWindowTouchEnd=function(S){WS(S),this.clear(S)},q.prototype.handleSelection=function(S,q){var W=this.gv.sm();if(l(S))this.gv.isSelected(q)?W.removeSelection(q):W.appendSelection(q);else if(A(S)){var Z=W.ld();if(Z)for(var z=this.gv.nodes,k=z.indexOf(Z),Q=z.indexOf(q);k!==Q;)k+=Q>k?1:-1,W.as(z[k]);else W.ss(q)}else m(S)?W.contains(q)?(this._handleDataDoubleSelect(S,q),t(S)&&this._cancelDataDoubleSelect()):(this._cancelDataDoubleSelect(),!0!==this.gv._levelChanged&&W.ss(q)):W.contains(q)||W.ss(q)},q.prototype.handle_keydown=function(S){if(!IS(S.target))if(d(S))this._dragging&&!this._dragCancel&&(this.gv.handleDragAndDrop(S,"cancel"),this._dragCancel=!0);else if(R(S)||x(S)||P(S)||_(S)){var q=this.gv.sm(),W=this.gv.nodes,Z=q.ld();if(W.length){var z=void 0;if(Z){var k=W.indexOf(Z);R(S)||P(S)?0!==k&&(z=W[k-1]):k!==W.length-1&&(z=W[k+1])}else z=W[0];z&&(A(S)?q.as(z):q.ss(z))}}},q.prototype._handleDataDoubleSelect=function(S,q){var W=this;this._cancelDataDoubleSelect(),this._doubleSelectTimer=setTimeout(function(){W.gv.handleDataDoubleSelect(S,q),W._doubleSelectTimer=void 0},ht.Default.doubleClickSpeed)},q.prototype._cancelDataDoubleSelect=function(){this._doubleSelectTimer&&(clearTimeout(this._doubleSelectTimer),this._doubleSelectTimer)},q}(ht.graph.Interactor),kZ=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this,W.editor,W.dm));return Z.displayView=W,Z.graphView=W.graphView,Z.nodeIcon=HS(Z),Z.initMenu(),Z.initStudio&&Z.initStudio(),W.dm.addDataPropertyChangeListener(function(S){var q=S.data;(q instanceof ht.Shape||q instanceof ht.Edge)&&(q.editorIcon=null)}),jW.SceneView&&Z.enableToolTip(),Z}return uW(q,S),q.prototype.getToolTip=function(S){return jW.config.getToolTip(S,this)},q.prototype.getBorderColor=function(S){return null},q.prototype.onDataDoubleClicked=function(S,q){this.editor.fitSelection()},q.prototype.onPropertyChanged=function(q){"filter"===q.property&&(this.visibleMap=null,this.ivm()),S.prototype.onPropertyChanged.call(this,q)},q.prototype.handleDataPropertyChange=function(q){
!this._filter||"name"!==q.property&&"displayName"!==q.property?S.prototype.handleDataPropertyChange.call(this,q):(this.visibleMap=null,this.ivm())},q.prototype.checkVisible=function(S){if(!this._filter)return!0;if(jW.config.displayTreeVisibleFunc)return jW.config.displayTreeVisibleFunc(S,this._filter);var q=this.getLabel(S),W=(this._filter+"").toLowerCase();return null!=q&&(q=(q+"").toLowerCase(),q.indexOf(W)>=0)},q.prototype.validateModel=function(){var q=this;this._filter&&!this.visibleMap&&(this.visibleMap={},this.getDataModel().each(function(S){if(q.checkVisible(S)){q.visibleMap[S._id]=!0;for(var W=S.getParent();W&&!q.visibleMap[W._id];)q.visibleMap[W._id]=!0,W=W.getParent()}})),S.prototype.validateModel.call(this),jW.config.filterDisplayViewEnabled&&this.graphView.setVisibleFunc(function(S){return q.isVisible(S,!0)})},q.prototype.isVisible=function(S,q){if(!q&&S._refGraph)return!1;var W=this.getVisibleFunc();return!(W&&!W(S))&&(!this._filter||this.visibleMap&&this.visibleMap[S._id])},q.prototype.validate=function(){this.graphView.validate(),S.prototype.validate.call(this)},q.prototype.getLabel=function(S){return null==S.toLabel()&&S.s("editor.folder")?k("ht.Folder"):S.toLabel()||S.s("label")||k(S.getClassName())},q.prototype.getIcon=function(S){return S instanceof ht.SubGraph?"editor.subgraph":S instanceof ht.Group?"editor.group":S instanceof ht.RefGraph||S instanceof ht.Text?S.getIcon():S instanceof ht.Block?"editor.block":S instanceof ht.Shape?(S.editorIcon||(S.editorIcon=hS(S)),S.editorIcon):S instanceof ht.Edge?(S.editorIcon||(S.editorIcon=ES(this,S)),S.editorIcon):S instanceof ht.Node?this.nodeIcon:S.s("editor.folder")?this.hasExpandedChild(S)?"editor.direxpanded":"editor.dircollapsed":null},q.prototype.isDroppable=function(S,q){return!!this.editor.editable&&(q.view===this.editor.symbols.getFileListView()||(q.view===this.editor.assets.getFileListView()||q.view===this.editor.displays.getFileListView()))},q.prototype._endCrossDrag=function(S,q){var W=this;if(this.editor.editable&&this._crossDragInfo){this.editor.beginTransaction();var Z=[],z=q.view,k=this._crossDragInfo.type,Q=this._crossDragInfo.parent,U=this._crossDragInfo.refData;z!==this.editor.symbols.getFileListView()&&z!==this.editor.assets.getFileListView()||z.toDraggingDatas("down"===k).forEach(function(S){var q=new ht.Node;q.setImage(S.getFileUUID()),q.setDisplayName(T(S.getName())),Z.push(q),W.displayView.addData(q,!0),W.editor.gv.$63$([q]),W._dropData(q,k,Q,U)}),z===this.editor.displays.getFileListView()&&z.toDraggingDatas("down"===k).forEach(function(S){if(S.url!==W.editor.url){var q=new ht.RefGraph;q.setRef(S.getFileUUID()),q.setDisplayName(T(S.getName())),Z.push(q),W.displayView.addData(q,!0),W._dropData(q,k,Q,U)}}),Z.length&&this.sm().ss(Z),this.editor.endTransaction()}},q.prototype._endDrag=function(S,q){var W=this;if(this.editor.editable){this.editor.beginTransaction();var Z=q.type,z=q.parent,k=q.refData;if(this.isSelected(this.draggingData)){var Q=this.getTopRowOrderSelection();"down"===Z&&Q.reverse(),Q.each(function(S){W._dropData(S,Z,z,k)})}else this._dropData(this.draggingData,Z,z,k),this.sm().ss(this.draggingData);z&&this.expand(z),this.editor.endTransaction()}},q.prototype._dropData=function(S,q,W,Z){if(this.editor.editable)if(S.setParent(W),"down"===q||"up"===q){var z=W?W.getChildren():this.dm().getRoots(),k=z.indexOf(Z);"down"===q&&k++,z.indexOf(S)<k&&k--,this.dm().moveTo(S,k)}else W||this.dm().moveToBottom(S)},q.prototype.rename=function(S,q){S.setDisplayName(q)},q.prototype.initMenu=function(){this.menu=new AW;var S=[];this.initMenuItems(S),this.menu.setItems(S),this.menu.addTo(this.getView()),this.editor.menus.push(this.menu)},q.prototype.onClosed=function(){D(this.editor.menus,this.menu)},q.prototype.initMenuItems=function(S){var q=this,W=function(){for(var S=q.editor.selection,W=0;W<S.length;W++)if(S[W].s("editor.folder"))return!0;return!1};S.push.apply(S,[{id:"folder",label:k("editor.folder"),action:function(){q.editor.folder()},visible:function(){return q.editable&&!!q.editor.ld}},{id:"unfolder",label:k("editor.unfolder"),action:function(){q.editor.unfolder()},visible:function(){return q.editable&&W()}},{separator:!0,visible:function(){return q.editable&&!!q.editor.ld}},{id:"copy",label:k("editor.copy"),action:function(){q.editor.copy()},visible:function(){return q.editable&&!!q.editor.ld}},{id:"paste",label:k("editor.paste"),action:function(){q.editor.paste()},visible:function(){return q.editable&&q.editor.hasCopyInfo()}},{id:"delete",label:k("editor.delete"),action:function(){q.editor.delete()},visible:function(){return q.editable&&!!q.editor.ld}},{separator:!0,visible:function(){return q.editable&&!!q.editor.ld}},{id:"bringToFront",label:k("editor.bringtofront"),action:function(){q.editor.bringToFront()},visible:function(){return q.editable&&!!q.editor.ld}},{id:"bringForward",label:k("editor.bringforward"),action:function(){q.editor.bringForward()},visible:function(){return q.editable&&!!q.editor.ld}},{id:"sendBackward",label:k("editor.sendbackward"),action:function(){q.editor.sendBackward()},visible:function(){return q.editable&&!!q.editor.ld}},{id:"sendToBack",label:k("editor.sendtoback"),action:function(){q.editor.sendToBack()},visible:function(){return q.editable&&!!q.editor.ld}},{separator:!0,visible:function(){return q.editable&&!!q.editor.ld}},{id:"expandAll",label:k("editor.expandall"),action:function(){q.expandAll()}},{id:"collapseAll",label:k("editor.collapseall"),action:function(){q.collapseAll()}}]),this.addSelectDescendantItems(S),this.addBlockItems(S)},UW(q,[{key:"editable",get:function(){return this.editor.editable},set:function(S){}}]),q}(WZ);SS(kZ,{ms_ac:["filter"]});var QZ=function(S){function q(W){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];QW(this,q);var z=DW(this,S.call(this,W.dataModel));return z.explorer=W,z.editable=Z,z.editor=W.editor,z.getHScrollBar().style.display="none",z.setMaxFileSize(jW.config.imageSize),z.enableToolTip(),z.setPannable(!1),z.setInteractors([new ht.graph.ScrollBarInteractor(z),new zZ(z),new ht.graph.DefaultInteractor(z),new ht.graph.TouchInteractor(z,{editable:!1})]),z.mi(function(S){var q=S.kind;"beginScroll"===q?z.disableToolTip():"endScroll"===q&&z.enableToolTip()}),z}return uW(q,S),q.prototype.getToolTip=function(S){var q=this.getDataAt(S);return q?this._filter?q.url:this.getLabel(q):null},q.prototype.getLabel=function(S){return k("url:"+S.url,!0)||this.getEditingLabel(S)},q.prototype.isEditable=function(S){return this.editable&&S&&!1!==S.a("editable")},q.prototype.getEditingLabel=function(S){return S.s("label")||S.getName()},q.prototype.rename=function(S,q){this.editor.renameFile(S,q,function(){S.s("label")?S.s("label",q):S.setName(q)})},q.prototype.handleDelete=function(){this.editable&&jW.config.removeFileByKeyboardEnabled&&this.explorer.deleteSelection(this)},q.prototype.beginEditing=function(S){var q=this,W={data:S,url:S.url};if(this.editor.fireEvent("fileRenaming",W),!W.preventDefault){this.cancelEditing(),this.makeVisible(S),this.validate();var Z=this.getDataUI(S),z=!1,k=void 0;if(this.explorer.isAccordionMode()&&S.fileType===RW?(k=S.getRect(),z=!0):Z&&Z.labelInfo&&(k=Z.labelInfo.rect),k){var Q=void 0,U=void 0,u=void 0,D=void 0;if(z)Q=k.x,U=k.y,u=k.width,D=k.height;else if(this._layoutType===CW)Q=this._rowHeight,U=S.p().y-this._rowHeight/2,u=this.getWidth()-Q,D=this._rowHeight;else{var G=Z.labelInfo.rect||S.getRect();Q=S.p().x-S.getWidth()/2,U=G.y,u=S.getWidth(),D=G.height}U+=this.ty(),this._currentEditor=new ht.widget.TextField,this._currentEditor.data=S;var b=this._currentEditor.getElement(),v=this.getEditingLabel(S);S.fileType===_W&&(this._editingExtension=r(v),v=T(v)),b.value=null==v?"":v,b.onblur=function(S){q.endEditing()},b.onkeydown=function(S){K(S)?q.endEditing():d(S)&&q.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),o(this._currentEditor,Q,U,u,D),this._currentEditor.setFocus(),ht.Default.callLater(b.select,b)}}},q.prototype.endEditing=function(){var S=this._currentEditor;S&&(this.rename(S.data,S.getValue()+(this._editingExtension||"")),delete this._currentEditor,delete this._editingExtension,M(S.getView()),this.redraw())},q.prototype.cancelEditing=function(){var S=this._currentEditor;S&&(delete this._currentEditor,M(S.getView()),this.redraw())},q.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},q.prototype.handleDragAndDrop=function(S,q){if("prepare"===q)return void this._clearDragInfo();if("begin"===q){var W=this.draggingData;W.fileType===KW?ht.ui&&ht.ui.DragHelper.doDrag(this,{"a:clazz":"ht.ui.UIGraphView","a:initProps":{disableInit:!0,url:W.url}},{width:10,height:0,comps:[]},0,0):W.fileType===mW?ht.ui&&ht.ui.DragHelper.doDrag(this,{"a:clazz":"ht.ui.UIGraph3dView","a:initProps":{disableInit:!0,url:W.url}},{width:10,height:0,comps:[]},0,0):W.fileType===tW&&ht.ui&&ht.ui.DragHelper.doDrag(this,{"a:clazz":W.url},{width:10,height:0,comps:[]},0,0),this._dragInfo={tip:this.$1$(),view:this}}var Z=this._dragInfo;if(Z){var z=this.editor.dnd;if("begin"===q||"between"===q){return this.getView().contains(O(S))?(Z.inView=!0,this._dragging(S,Z),z.clearDropView(S,Z)):(Z.inView&&this.redraw(),Z.inView=!1,z.crossDrag(S,Z)),void z.showTip(Z.tip,S)}return"end"===q?(Z.inView?this._endDrag(S,Z):z.crossDrop(S,Z),void this._clearDragInfo()):"cancel"===q?(Z.inView||z.crossCancel(S,Z),void this._clearDragInfo()):void 0}},q.prototype._dragging=function(S,q){if(this.editable){var W=this.getDataAt(S);W&&W.fileType===RW?q.targetData=W:q.targetData=null,this.autoScroll(S),this.redraw()}},q.prototype.$1$=function(){var S="";if(this.draggingData&&(S=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var q=this.sm().size();S+=q>1?" (+"+q+") ":""}return S},q.prototype._endDrag=function(S,q){},q.prototype.handleSelectionChange=function(q){S.prototype.handleSelectionChange.call(this,q),this.redraw()},q.prototype.handleCrossDrag=function(S,q,W){if(this.editable){if("exit"===q||"cancel"===q)return this._crossDragInfo=null,void this.redraw();if("enter"===q||"over"===q)return this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(S,this._crossDragInfo);if("drop"===q){var Z=this._crossDragInfo.targetData?this._crossDragInfo.targetData.url:this.explorer.currentDir,z={url:Z,event:S};return this.editor.fireEvent("explorerCrossDrop",z),z.preventDefault||this._endCrossDrag(S,W),this._crossDragInfo=null,void this.redraw()}}},q.prototype._endCrossDrag=function(S,q){if(this.editable&&this._crossDragInfo){var W=this._crossDragInfo.targetData;if(W&&W.fileType===RW||(W=this.dm().sm().ld()),W){var Z=q.view;"displays"===this.explorer.rootDir&&Z instanceof kZ&&this.handleDisplayTreeDrop(Z,W),Z===this.editor.dndFromOutside&&this.editor.dropLocalFileOnDir(S,W)}}},q.prototype.validateImpl=function(){document.body.contains(this.getView())&&S.prototype.validateImpl.call(this)},q}(lW);SS(QZ,{ms_ac:["layoutType","fileSize","fileGap","rowHeight","maxFileSize","filter"],_fileRect:{x:0,y:0,width:0,height:0},_layoutType:VW,_fileSize:50,_fileGap:6,_rowHeight:21,_maxFileSize:200});var UZ={filter:!0,layoutType:!0,fileSize:!0,fileGap:!0,rowHeight:!0,visibleFunc:!0},uZ=function(S){function q(W){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];QW(this,q);var z=DW(this,S.call(this,W,Z));return z.nodes=[],z.doLayoutBind=z.doLayout.bind(z),z.dm().sm().ms(function(S){z.sm().cs(),z.doLayoutLater()}),z.dm().mm(function(){z.doLayoutLater()}),z.addInteractorListener(z.handleInteraction.bind(z)),z.addBottomPainter(z.paintBottom.bind(z)),z.addTopPainter(z.paintTop.bind(z)),z.getCoreInteractor().disabled=!0,z}return uW(q,S),q.prototype.getDataAt=function(q){if(this._layoutType===CW){var W=Math.floor(this.lp(q).y/this._rowHeight);return this.nodes[W]}return S.prototype.getDataAt.call(this,q)},q.prototype.paintBottom=function(S){var q=this,W=this._rowHeight,Z=this.getWidth();this.nodes.forEach(function(z){if(q.isSelected(z))if(q._layoutType===CW)S.beginPath(),S.rect(0,z.p().y-W/2,Z,W),S.fillStyle=jW.config.color_select,S.fill();else{var k=z.getRect();h(S,jW.config.color_select,k.x-2,k.y-2,k.width+4,k.height+4,1)}})},q.prototype.paintTop=function(S){jW.config.drawDNDState?S.drawDNDState=!0:(jW.config.texureImage3D&&(S.texureImage3D=!0),S.texureImage2D=!0);var q=void 0;if(this._dragInfo&&this._dragInfo.inView?q=this._dragInfo:this._crossDragInfo&&(q=this._crossDragInfo),q){var W=jW.config.color_select_dark,Z=q.targetData;if(Z)if(this._layoutType===CW){var z=Z.p().y-this._rowHeight/2,k=this.getWidth(),Q=this._rowHeight;h(S,W,0,z,k,Q,2)}else{var U=Z.getRect();S.beginPath(),S.rect(U.x,U.y,U.width,U.height),S.lineWidth=2,S.strokeStyle=jW.config.color_select_dark,S.stroke()}else{var u=this.getViewRect();h(S,W,u.x,u.y,u.width,u.height,2)}}},q.prototype.toDraggingDatas=function(S){var q=[];return this.isSelected(this.draggingData)?(this.sm().toSelection().each(function(S){S.fileType!==RW&&q.push(S)}),S&&q.reverse()):this.draggingData.fileType!==RW&&q.push(this.draggingData),q},q.prototype.isDroppable=function(S,q){return"displays"===this.explorer.rootDir&&q.view instanceof kZ||q.view===this.editor.dndFromOutside},q.prototype._endDrag=function(S,q){var W=this,Z=q.targetData;if(Z){var z=this.draggingData,Q=function(){W.isSelected(z)?W.sm().toSelection().each(function(S){W.editor.moveFile(S,Z)}):W.editor.moveFile(z,Z)};jW.config.promptForMovingFile?qq(k("editor.move"),k("editor.confirmmovefile"),Q,function(){}):Q()}},q.prototype.handleDisplayTreeDrop=function(S,q){var W=this,Z=void 0;Z=S.isSelected(S.draggingData)?S.getTopRowOrderSelection().toArray():[S.draggingData];var z={};Z.forEach(function(S){qS(S,z)});var Q=new ht.JSONSerializer(S.getDataModel(),!0);Q.isSerializable=function(S){return z[S._id]};var U=Q.serialize();Sq(k("editor.inputnewdisplayname")+" ["+q.url+"]",S.getLabel(S.draggingData),{nullable:!1,trim:!0,maxLength:jW.config.maxFileNameLength,checkFunc:jW.config.checkFileName,$38$:this.editor.$38$},function(S,Z){if("ok"===Z){bS(S)||(S+=".json");var k=q.url+"/"+S,Q={path:k,content:U,parent_uuid:q.uuid,root_dir:q.rootDir};W.editor.request("upload",Q,function(S){if(!0===S){var Z=W.editor.gv,Q=Z.isVisible;Z.isVisible=function(S){return Q.call(Z,S)&&z[S._id]},W.editor.saveImage(Z,k.substr(0,k.length-5)+".png",void 0,S.uuid,S.parent_uuid,q.rootDir),Z.isVisible=Q,Z.redraw()}W.editor.fireEvent("displayViewSaved",{url:k})})}})},q.prototype.handleDataDoubleSelect=function(S,q){if(this.isEditable(q)){var W=this.lp(S);if(this._layoutType===CW)W.x>this._rowHeight&&this.beginEditing(q);else{var Z=this.getDataUI(q);Z&&Z.labelInfo&&Z.labelInfo.rect&&ht.Default.containsPoint(Z.labelInfo.rect,W)&&this.beginEditing(q)}}},q.prototype.getLabelColor=function(S){return S!==this.draggingData||this.isSelected(S)?this._layoutType===CW?this.isSelected(S)?jW.config.color_light:ht.Default.labelColor:this.isSelected(S)?jW.config.color_select:ht.Default.labelColor:jW.config.color_select},q.prototype.handleInteraction=function(S){var q=S.kind,W=S.data,Z=S.event;if("clickData"===q&&this._filter)this.dm().sm().ss(W.getParent());else if("doubleClickData"===q)1===this.sm().size()&&(this.setFilter(""),this._justDoubleClickData=!0,W.fileType===RW?(this.dm().sm().ss(W),this._levelChanged=!0):this.editor.open(W,A(Z),!0));else if("doubleClickBackground"===S.kind&&!this._filter){var z=this.dm().sm().ld();if(z&&z.getParent()){var k={target:this.explorer};if(this.editor.fireEvent("doubleClickBackgroundToUpLevel",k),k.preventDefault)return;this._upLevel=!0,this.dm().sm().ss(z.getParent()),this._levelChanged=!0}}},q.prototype.handleScroll=function(S,q){WS(S),A(S)?q>0?this.setFileSize(Math.min(this.getFileSize()+2,this.getMaxFileSize())):this.setFileSize(Math.max(this.getFileSize()-2,1)):($W||S.wheelDelta!==S.wheelDeltaX)&&(q=$W&&S.detail?-S.detail:S.wheelDelta/40,this.translate(0,20*q))},q.prototype.handlePinch=function(S,q,W){W<q?this.setFileSize(Math.min(this.getFileSize()+2,this.getMaxFileSize())):this.setFileSize(Math.max(this.getFileSize()-2,1))},q.prototype.onPropertyChanged=function(S){QZ.prototype.onPropertyChanged.apply(this,arguments),UZ[S.property]&&this.doLayoutLater()},q.prototype.isVisible=function(S){if(this._layouting){if(!1===S.a("visible"))return!1;if(this._visibleFunc&&!1===this._visibleFunc(S))return!1;var q=this._filter;if(q){var W=this.dm().sm().ld();if(!S.isDescendantOf(W))return!1;if(jW.config.vision&&S.uuid===a(q))return!0;var Z=this.getLabel(S);if(!Z||Z.indexOf(q)<0)return!1}else{var z=this.dm().sm().ld();if(!z||S.getParent()!==z)return!1}if(!(S.fileType!==nW))return!1}else{if(this.nodes.indexOf(S)<0)return!1;if(!this.isNodeInRect(S))return!1}return!0},q.prototype.isNodeInRect=function(S){var q=ht.Default.clone(this.getViewRect());return ht.Default.grow(q,this.getFileSize()),!(!ht.Default.containsPoint(q,S.p())&&!ht.Default.intersectsRect(q,S.getRect()))},q.prototype.isMovable=function(){return!1},q.prototype.onValidated=function(){this._lastWidth===this.getWidth()&&this._lastHeight===this.getHeight()||this.doLayoutLater()},q.prototype.adjustTranslateX=function(){return 0},q.prototype.adjustTranslateY=function(S){var q=this.getHeight()-this._fileRect.height;return S<q&&(S=q),S>0?0:Math.round(S)},q.prototype.getContentRect=function(){return this._fileRect},q.prototype.doLayoutLater=function(){this._doLayoutLater||(this._doLayoutLater=!0,requestAnimationFrame(this.doLayoutBind))},q.prototype.doLayout=function(){var S=this;this._layouting=!0,this._doLayoutLater=!1,this.redraw();var q=this.nodes=[];this.dm().getDatas().each(function(W){S.isVisible(W)&&q.push(W)});var W=this._lastWidth=this.getWidth();this._lastHeight=this.getHeight();var Z=this._fileGap;if(this._layoutType===CW){for(var z=this._rowHeight,k=Math.max(z-4,2),Q=0;Q<q.length;Q++)this.updateFileNodeProperties(q[Q],Z+k/2,z*Q+2+k/2,k);this._fileRect={x:0,y:0,width:W,height:z*q.length}}else{for(var U=this._fileSize,u=U+Z,D=U+Z+16,G=Z,b=Z,v=0,j=0;j<q.length;j++)this.updateFileNodeProperties(q[j],G+U/2,b+U/2,U),(v+2)*u+Z>W?(G=Z,j!==q.length-1&&(b+=D),v=0):(G+=u,v++);this._fileRect={x:0,y:0,width:W,height:b+D}}this.tx(this.tx()),this.ty(this.ty()),this.showScrollBar(),this._layouting=!1},q.prototype.updateFileNodeProperties=function(S,q,W,Z){this._layoutType===CW?(S.setPosition(q,W),S.setSize(Z,Z),S.s({"label.position":20,"label.offset.x":3,"label.offset.y":0,"label.max":void 0})):(S.setPosition(q,W),S.setSize(Z,Z),S.s({"label.position":31,"label.offset.x":0,"label.offset.y":2,"label.max":Z}))},q}(QZ),DZ=function(S){function q(W,Z,z,k){QW(this,q);var Q=DW(this,S.call(this));Q.setSize(20,20),Q.setAnchor(.5,.5),Q._id=Q.url=Z?Z+"/"+z:z,Q.path=Z,Q.value=k,Q.rootDir=W,Q.uuid=tS(k)&&NS(k.fileType)&&null!=k.uuid?k.uuid:Q.url,Q.postfix=k?k.postfix:"";var U=nW,u=void 0,D=void 0,G=k&&k.uuid&&Q.postfix?Q.uuid+"."+Q.postfix:Q.url,b=z;return k&&k.attrs&&k.attrs.label&&(Q.label=b=k.attrs.label),Q.s({"select.width":0,pixelPerfect:!1,"image.stretch":"centerUniform","label.position":17}),""===Z?(U=PW,D="editor.root.state"):"assets"===W&&(D=Q.getFileImage(z))?(U=_W,Q.s("label",b)):bS(z)&&"displays"===W?(U=KW,D=dS(G),Q.s("label",T(z))):bS(z)&&"symbols"===W?(U=xW,D=dS(G),Q.s("label",T(z))):bS(z)&&"components"===W?(U=dW,D=dS(G),Q.s("label",T(z))):bS(z)&&"scenes"===W?(U=mW,D=dS(G),Q.s("label",T(z))):bS(z)&&"models"===W?(U=NW,D=dS(G),Q.s("label",T(z))):bS(z)&&"uis"===W?(U=tW,D=dS(G),Q.s("label",T(z))):Q.s("label",b),tS(k)&&(NS(k.fileType)?(U=k.fileType,u=k.fileIcon,D=k.fileImage||D||u,D||k.fileType!==RW||(D="editor.dir"),Q.a(k.attrs),Q.s(k.styles)):(!0===k.dir||null==k.dir&&null==k.fileType)&&(U=RW,D="editor.dir")),D||(D="editor.unknown"),Q.fileType=U,Q.setIcon(u),Q.setImage(D),Q.setName(z),Q}return uW(q,S),q.prototype.getFileUUID=function(){return this.postfix?this.uuid+"."+this.postfix:this.uuid},q.prototype.getFileImage=function(S){return GS(S)?this.url:nS(S)?"editor.dxf.state":PS(S)?"editor.obj.state":RS(S)?"editor.mtl.state":_S(S)?"editor.ttf.state":xS(S)?"editor.otf.state":vS(S)?"editor.sound.state":jS(S)?"editor.video.state":KS(S)?"editor.js.state":void 0},q.prototype.setAnchor=function(){for(var q,W=arguments.length,Z=Array(W),z=0;z<W;z++)Z[z]=arguments[z];var k=(q=S.prototype.setAnchor).call.apply(q,[this].concat(Z));return k||(this._anchor=this._anchor),k},q}(ht.Node);ht.Default.setCompType("accordion-title-comp",function(S,q,W,Z,z){var k=jW.config.drawAccordionTitle;if(k)return void k(S,q,Z,z,{isHover:Z.__hover,isExpanded:Z.expanded,hoverColor:jW.config.color_hover,selectColor:jW.config.color_select});var Q=Z.__hover,U=q.x,u=q.y,D=q.width,G=q.height,b=z.getLabel(Z),v=z.getFileGap();S.save(),(Q||z.isSelected(Z))&&(S.fillStyle=jW.config.color_hover,S.fillRect(U,u,D,G)),S.fillStyle=jW.config.color_select,S.fillRect(U+v,u+(G-8)/2,8,8),b&&ht.Default.drawText(S,b,"bold 14px Arial",ht.Default.labelColor,U+v+8+8,u,200,G,"left","middle"),S.restore()}),ht.Default.setImage("accordion-title",{width:160,height:24,fitSize:!0,pixelPerfect:!1,interactive:!0,boundExtend:2,onDown:function(S,q,W,Z,z,k){ht.Default.isLeftButton(S)&&(W.getMutex()&&!q.expanded&&W.dirs.forEach(function(S){S!==q&&(S.expanded=!1)}),q.expanded=!q.expanded,W.ivm())},onEnter:function(S,q,W,Z,z,k){q.__hover=!0,q.iv()},onLeave:function(S,q,W,Z,z,k){q.__hover=!1,q.iv()},comps:[{type:"accordion-title-comp",displayName:"clock-pointer",rect:[0,0,160,24]}]});var GZ={layoutType:!0,fileSize:!0,fileGap:!0,rowHeight:!0,filePadding:!0,titleHeight:!0},bZ=function(S){function q(W){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];QW(this,q);var z=DW(this,S.call(this,W,Z));return z.setFileGap(10),z.setMutex(jW.config.accordionMutex),z.nodes=[],z.dirs=[],z.bottomRects=[],z.addViewListener(function(S){"beginValidate"===S.kind&&z.doLayout()}),z.setSelectionModelShared(!1),z.dm().sm().ms(function(){z.sm().cs()}),z._layouted=!1,z.mi(z.handleInteraction.bind(z)),z.addBottomPainter(z.paintBottom.bind(z)),z.addTopPainter(z.paintTop.bind(z)),z}return uW(q,S),q.prototype.paintBottom=function(S){var q=this,W=this._rowHeight,Z=this.getWidth();this.nodes.forEach(function(z){if(q._layoutType===CW)q.isSelected(z)&&(S.beginPath(),S.rect(0,z.p().y-W/2,Z,W),S.fillStyle=jW.config.color_select,S.fill());else{var k=q.isSelected(z)?jW.config.color_select:jW.config.color_mask,Q=z.getRect(),U=Q.x,u=Q.y,D=Q.width,G=Q.height,b=q._filePadding;h(S,k,U-b,u-b,D+2*b,G+2*b,1)}}),S.beginPath(),S.lineWidth=2,S.strokeStyle=jW.config.color_hover,this.bottomRects.forEach(function(q){var W=q.x,Z=q.y,z=q.width,k=q.height;S.moveTo(W+10,Z+k/2),S.lineTo(W+z-10,Z+k/2)}),S.stroke()},q.prototype.isDroppable=function(S,q){return"displays"===this.explorer.rootDir&&q.view instanceof kZ||q.view===this.editor.dndFromOutside},q.prototype.handleDragAndDrop=function(q,W){var Z=this.draggingData;Z&&Z.fileType!==RW&&S.prototype.handleDragAndDrop.call(this,q,W)},q.prototype.isLabelVisible=function(S){return S.fileType!==RW},q.prototype.paintTop=function(S){jW.config.drawDNDState?S.drawDNDState=!0:(jW.config.texureImage3D&&(S.texureImage3D=!0),S.texureImage2D=!0);var q=void 0;if(this._dragInfo&&this._dragInfo.inView?q=this._dragInfo:this._crossDragInfo&&(q=this._crossDragInfo),q){var W=jW.config.color_select_dark,Z=q.targetData;if(Z){var z=Z.getRect();S.beginPath(),S.rect(z.x,z.y,z.width,z.height),S.lineWidth=2,S.strokeStyle=jW.config.color_select_dark,S.stroke()}else{var k=this.getViewRect();h(S,W,0,0,k.width,k.height,2)}}},q.prototype.getDataAt=function(q){if(this._layoutType!==CW)return S.prototype.getDataAt.call(this,q);var W=S.prototype.getDataAt.call(this,q);if(W)return W;for(var Z=this.lp(q).y,z=0;z<this.nodes.length;z++){var k=this.nodes[z],Q=k.getY(),U=this._rowHeight,u=Q-U/2,D=Q+U/2;if(Z>=u&&Z<D)return k}},q.prototype.handleInteraction=function(S){var q=S.kind,W=S.data,Z=S.event;"doubleClickData"===q&&1===this.sm().size()&&W.fileType!==RW&&(this.setFilter(""),W.getParent().expanded=!0,this.sm().ss(W),this.ivm(),this.editor.open(W,A(Z),!0))},q.prototype.handleDataDoubleSelect=function(S,q){if(this.isEditable(q)){var W=this.lp(S);if(q.fileType!==RW)if(this._layoutType===CW)W.x>this._rowHeight&&this.beginEditing(q);else{var Z=this.getDataUI(q);Z&&Z.labelInfo&&Z.labelInfo.rect&&ht.Default.containsPoint(Z.labelInfo.rect,W)&&this.beginEditing(q)}}},q.prototype.getLabelColor=function(S){return S!==this.draggingData||this.isSelected(S)?this._layoutType===CW?this.isSelected(S)?jW.config.color_light:ht.Default.labelColor:this.isSelected(S)?jW.config.color_select:ht.Default.labelColor:jW.config.color_select},q.prototype.isVisible=function(S){if(!this._layouted)return!1;if(this._visibleFunc&&!1===this._visibleFunc(S))return!1;var q=this.explorer.rootDir,W=S.getParent();if(!1===S.a("visible"))return!1;if(S.fileType===nW||!W)return!1;if(this._visibleFunc&&!this._visibleFunc(S))return!1;if(this._filter){var Z=this.getLabel(S);if(W.url===q&&S.fileType===RW){for(var z=S.getChildren(),k=0;k<z.length;k++){var Q=z.get(k);if(this.isVisible(Q))return!0}return!1}if(W.getParent()&&W.getParent().url===q&&S.fileType!==RW)return!(!Z||Z.indexOf(this._filter)<0)}return W.url===q&&S.fileType===RW||!(!W.getParent()||W.getParent().url!==q||S.fileType===RW)&&!!W.expanded},q.prototype.adjustTranslateX=function(S){return 0},q.prototype.adjustTranslateY=function(S){if(!this.contentHeight)return 0;var q=this.getViewRect(),W=q.height-this.contentHeight;return S>=0||W>=0?0:S>W?S:W},q.prototype.getImage=function(S){if(S.getImage)return S.fileType===RW?"accordion-title":S.getImage()},q.prototype.doLayout=function(){var S=this;if(this._lastWidth!==this.getWidth()||this._lastHeight!==this.getHeight()||this._lastFileSize!==this.getFileSize()){this._doLayoutLater=!1,this.redraw();var q=this.dirs=[],W=this.nodes=[],Z=this.bottomRects=[];this.dm().each(function(W){S.isVisible(W)&&W.fileType===RW&&q.push(W)});var z=this._lastWidth=this.getWidth(),k=this._titleHeight,Q=0;this._lastHeight=this.getHeight(),this._lastFileSize=this._fileSize,this._expandIds&&(this.dirs.forEach(function(q){q.expanded=S._expandIds.indexOf(q.getId())>=0}),delete this._expandIds),q.forEach(function(q){q.setAnchor(0,0),q.p(0,Q),q.setSize(z,k),q.s("label",null),Q+=k;var U=[];q.getChildren().each(function(q){S.isVisible(q)&&(U.push(q),W.push(q))}),Q=S.layoutChildren(U,Q),q.expanded&&(Z.push({x:0,y:Q,width:z,height:16}),Q+=16)}),this.contentHeight=Q,this._layouted=!0}},q.prototype.layoutChildren=function(S,q){if(!S||0===S.length)return q;var W=this._fileGap;if(this._layoutType===CW){var Z=this._rowHeight,z=Math.max(Z-4,15);return S.forEach(function(S,k){S.setPosition(W+z/2+jW.config.accordionListIndent,q+2+z/2),S.setSize(z,z),S.s({"label.position":20,"label.offset.x":3,"label.offset.y":0,"label.max":void 0}),q+=Z}),q}var k=this.getWidth(),Q=this._fileSize,U=this._filePadding,u=Q+2*U,D=W,G=q+W,b=0,v=Q+W+2*U,j=Q+W+16+2*U;return S.forEach(function(q,Z){q.setPosition(D+u/2,G+u/2),q.setSize(Q,Q),q.s({"label.position":31,"label.offset.x":0,"label.offset.y":2+U,"label.max":u}),(b+2)*v+W>k?(D=W,Z!==S.length-1&&(G+=j),b=0):(D+=v,b++)}),G+j},q.prototype.handleScroll=function(S){var q=$W&&S.detail?-S.detail:S.wheelDelta/10;($W||S.wheelDelta!==S.wheelDeltaX)&&this.translate(0,q)},q.prototype.adjustZoom=function(){return 1},q.prototype.onPropertyChanged=function(q){S.prototype.onPropertyChanged.call(this,q);var W=q.property;"dataModel"!==W&&"fileSize"!==W||this.doLayout()},q.prototype._endDrag=function(S,q){var W=this,Z=q.targetData;if(Z&&Z.fileType===RW){var z=this.draggingData,Q=function(){W.isSelected(z)?W.sm().toSelection().each(function(S){W.editor.moveFile(S,Z)}):W.editor.moveFile(z,Z),W.doLayout(),W.redraw()};jW.config.promptForMovingFile?qq(k("editor.move"),k("editor.confirmmovefile"),Q,function(){}):Q()}},q.prototype.toDraggingDatas=function(S){var q=[];return this.isSelected(this.draggingData)?(this.sm().toSelection().each(function(S){S.fileType!==RW&&q.push(S)}),S&&q.reverse()):this.draggingData.fileType!==RW&&q.push(this.draggingData),q},q.prototype.invalidateModel=function(){this._lastWidth=null,this.iv()},q.prototype.ivm=function(){this.invalidateModel()},q.prototype.getContentRect=function(){return{x:0,y:0,width:this.getWidth(),height:this.contentHeight||0}},q.prototype.onPropertyChanged=function(q){S.prototype.onPropertyChanged.apply(this,arguments),GZ[q.property]&&this.ivm()},UW(q,[{key:"expandIds",get:function(){var S=[];return this.dirs.forEach(function(q){q.expanded&&S.push(q.getId())}),S},set:function(S){this._expandIds=S,this._lastWidth=null}}]),q}(QZ);SS(bZ,{ms_ac:["filePadding","titleHeight","mutex"],_mutex:!1,_filePadding:6,_titleHeight:36});var vZ=function(S){function q(W,Z){var z=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];QW(this,q);var k=DW(this,S.call(this));k.editor=W,k.rootDir=Z,k.copyFileInfos=[],k.dataModel=new ht.DataModel,k.dataModel.setAutoAdjustIndex(!1),k.urlUUIDMap={},k.uuidURLMap={};var Q=k.mode=jW.config.explorerMode;Q===OW&&(k.accordion=new bZ(k,z)),k.tree=new ZZ(k,z),k.list=new uZ(k,z),k.controlPane=new bW,k.controlPane.addRow([{id:"filter",textField:{}},{id:"url",textField:{editable:!1}},{id:"slider",slider:{min:1,max:k.getFileListView().getMaxFileSize(),step:1,onValueChanged:function(S,q){k.getFileListView().setFileSize(q),k.getFileListView().setLayoutType(q>16?VW:CW)}}}],[.1,.2,ht.Default.isTouchable?70:50]);var U=k.controlPane.getViewById("filter").getElement();U.onkeyup=function(S){d(S)&&(U.value=""),Q===OW?(k.accordion.setFilter(U.value),k.accordion.ivm()):k.list.setFilter(U.value)},(Q===OW?k.accordion:k.list).mp(function(S){"filter"===S.property&&(U.value=S.newValue||"")});var u=k.controlPane.getItemById("slider").element;return u.getToolTip=function(){},k.getFileListView().mp(function(S){"fileSize"===S.property&&u.setValue(S.newValue)}),k.bottomPane=new YW,k.bottomPane.setCenterView(k.getFileListView()),k.bottomPane.setBottomView(k.controlPane),k.bottomPane.setBottomHeight(ht.Default.widgetRowHeight+8),k.setOrientation("vertical"),Q===OW?(k.setLeftView(k.bottomPane),k.setPosition(1),k.accordion.sm().ms(function(){k.$51$(k.accordion)}),k.accordion.setFileSize(jW.config.fileSize),k.setDraggable(!1)):(k.setLeftView(k.tree),k.setRightView(k.bottomPane),k.setPosition(jW.config.explorerSplitViewPosition),k.list.setSelectionModelShared(!1),k.list.sm().ms(function(){k.$51$(k.list)}),k.list.setFileSize(jW.config.fileSize)),k.tree.menu=new AW,k.treeMenuItems=[],k.initTreeMenu(k.tree.menu,k.treeMenuItems),k.tree.menu.setItems(k.treeMenuItems),k.tree.menu.addTo(k.tree.getView()),k.editor.menus.push(k.tree.menu),k.list.menu=new AW,k.listMenuItems=[],k.initListMenu(k.list.menu,k.listMenuItems),k.list.menu.setItems(k.listMenuItems),k.list.menu.addTo(k.list.getView()),k.editor.menus.push(k.list.menu),k.isAccordionMode()&&(k.accordion.menu=new AW,k.accordionMenuItems=[],k.initAccordionMenu(k.accordion.menu,k.accordionMenuItems),k.accordion.menu.setItems(k.accordionMenuItems),k.accordion.menu.addTo(k.accordion.getView()),k.editor.menus.push(k.accordion.menu)),k}return uW(q,S),q.prototype.$51$=function(S){var q=S.sm().ld();this.controlPane.v("url",q?q.getFileUUID():"")},q.prototype.isAccordionMode=function(){return this.mode===OW},q.prototype.findFileNode=function(S){var q=this.dataModel.getDataById(S);return!q&&this.uuidURLMap[S]&&(q=this.dataModel.getDataById(this.uuidURLMap[S])),q},q.prototype.parse=function(S){var q=this,W=void 0,Z=void 0,z=void 0,k=void 0;if(this.mode===OW?(Z=this.accordion.expandIds,W=this.accordion.ty()):(W=this.tree.ty(),Z=this.tree.expandIds,z=this.tree.selectionIds,k=this.tree.dm().size()),this.dataModel.clear(),CS(S))S.forEach(function(S){if(S){var W=S.attrs&&S.attrs.path?S.attrs.path:"",Z=q.rootNode=q.addFileNode(q.rootDir,W,S.name,S);q.parseRoot(Z,S)}});else{var Q=this.rootNode=this.addFileNode(this.rootDir,"",this.rootDir);this.parseRoot(Q,S)}var U=this.dataModel.getDatas(),u={};this.urlUUIDMap={},this.uuidURLMap={},U.toArray().forEach(function(S,W){u[S._id]=W,q.uuidURLMap[S.getFileUUID()]=S.url,
q.urlUUIDMap[S.url]=S.getFileUUID()}),U.sort(function(S,q){return S.fileType===PW?-1:q.fileType===PW?1:S.fileType===RW&&q.fileType!==RW?-1:S.fileType!==RW&&q.fileType===RW?1:u[S._id]-u[q._id]}),this.mode===OW?(this.accordion.expandIds=Z,this.accordion.ty(W)):(this.tree.expandIds=Z,this.tree.selectionIds=z,this.tree.ty(W),0===k&&(this.tree.expand(this.rootNode),this.tree.sm().ss(this.rootNode))),this.list.doLayout();var D={explorer:this};this.editor.fireEvent("explorerUpdated",D)},q.prototype.parseRoot=function(S,q){S.a("editable",!1);var W=void 0;q.fileType===RW||q.fileType===PW?(S.a(q.attrs),S.s(q.styles),q.fileIcon&&(S.setIcon(q.fileIcon),S.setImage(q.fileIcon)),W=q.children):W=q;for(var Z in W)this.parseChild(S,Z,W[Z])},q.prototype.parseChild=function(S,q,W){var Z=this.addFileNode(this.rootDir,S.url,q,W);Z.setParent(S);var z=void 0;W&&W.fileType===RW?z=W.children:Z.fileType===RW&&(z=W);for(var k in z)this.parseChild(Z,k,z[k]);return Z},q.prototype.deleteSelection=function(S){var q=this,W=[];if(S.sm().getTopSelection().forEach(function(S){var Z={data:S,url:S.url};q.editor.fireEvent("fileDeleting",Z),Z.preventDefault||W.push(S)}),W.length){var Z=S.getLabel(W[0])||W[0].getName(),z=k("editor.delete")+" ["+Z+"]";W.length>1&&(z+=" ("+W.length+")");var Q=function(){q.editor.removeFiles(W)};jW.config.deleteFileConfirm?qq(z,k("editor.deleteselection"),Q,function(){}):Q()}},q.prototype.addNewItem=function(S,q,W,Z){var z=this,Q={id:W,label:k("editor."+W.toLowerCase()),action:function(){if(q instanceof uZ){var S=z.tree.sm().ld();S&&S.fileType===RW&&(z.editor._rightClickURL=S.url)}z.editor[W](z.editor._rightClickURL),Z&&z.editor.save(),delete z.editor._rightClickURL},visible:function(){var S=z.tree.sm().ld();if(!q.editable||jW.config.vision&&S&&2!==S.a("dir_type")&&!S.a("editable"))return!1;if(z.isAccordionMode()){var W=z.accordion.sm().ld();return W&&W.fileType===RW}return!0}};return S.push(Q),Q},q.prototype.addDeleteItem=function(S,q){var W=this,Z={id:"delete",label:k("editor.delete"),action:function(){W.deleteSelection(q)},visible:function(){return!(!q.sm().ld()||!q.isEditable(q.sm().ld()))}};return S.push(Z),Z},q.prototype.addNewFolderItem=function(S,q){var W=this,Z={id:"newFolder",label:k("editor.newfolder"),action:function(){W.editor.newFolder(q)},visible:function(){var S=W.tree.sm().ld();return q.editable&&(q.isEditable(S)||jW.config.vision&&S&&2===S.a("dir_type"))}};return S.push(Z),Z},q.prototype.addLocateTreeFileItem=function(S){var q=this,W=void 0;return jW.config.locateFileEnabled&&!jW.config.vision&&(W={id:"locateFile",label:k("editor.locatefile"),action:function(){var S=q.tree.sm().ld()||q.rootNode;q.editor.locate(S)}},S.push(W)),W},q.prototype.addLocateListFileItem=function(S){var q=this,W=void 0;return jW.config.locateFileEnabled&&!jW.config.vision&&(W={id:"locateFile",label:k("editor.locatefile"),action:function(){var S=q.ld||q.tree.sm().ld()||q.rootNode;q.editor.locate(S)},visible:function(){return!q.isAccordionMode()||!!q.getFileListView().sm().ld()}},S.push(W)),W},q.prototype.addExportItem=function(S){var q=this,W={id:"export",label:k("editor.export"),action:function(){var S=[],W=q.getFileListView().sm();W.size()>0&&(W.each(function(q){S.push(q.url)}),q.editor.request("export",S))},visible:function(){var S=q.getFileListView().sm().ld();if(!S)return!1;var W=S.fileType;return W===KW||W===xW||W===dW||W===mW||W===NW||W===tW||W===RW}};return S.push(W),W},q.prototype.addRenameItem=function(S,q){var W={id:"rename",label:k("editor.rename"),action:function(){var S=q.sm().ld();S&&!1!==S.a("editable")&&q.beginEditing(S)},visible:function(){var S=q.sm().ld();return!(!S||!q.isEditable(S))}};return S.push(W),W},q.prototype.addCopyItem=function(S){var q=this,W={id:"copy",label:k("editor.copy"),action:function(){q.copyFiles()},visible:function(){if(!q.getFileListView().editable)return!1;var S=q.getFileListView().sm().ld();return!(!S||!1===S.a("editable"))}};return S.push(W),W},q.prototype.addPasteItem=function(S){var q=this,W={id:"paste",label:k("editor.paste"),action:function(){q.pasteFiles()},visible:function(){if(!q.copyFileInfos.length)return!1;var S=q.tree.sm().ld();if(!S)return!1;if(jW.config.vision){if(!1===S.a("editable")&&2!==S.a("dir_type"))return!1}else if(S!==q.rootNode&&!1===S.a("editable"))return!1;return!!q.getFileListView().editable&&(!q.isAccordionMode()||!!q.ld)}};return S.push(W),W},q.prototype.copyFiles=function(){var S=this;this.copyFileInfos.length=0,this.getFileListView().sm().each(function(q){S.prepareCopyFileInfos(q)})},q.prototype.prepareCopyFileInfos=function(S,q){var W=this;if(S.fileType!==PW&&S.fileType!==nW){var Z={url:S.url,name:S.getName(),fileNode:S,parentInfo:q,parent_uuid:S.parent_uuid};if(this.copyFileInfos.push(Z),this.editor.fireEvent("copyFile",{url:S.url}),!jW.config.copyFileByServer&&S.fileType===RW)return Z.isDir=!0,void S.eachChild(function(S){W.prepareCopyFileInfos(S,Z)});this.loadFileInfo(Z)}},q.prototype.loadFileInfo=function(S){var q=S.url,W=jW.config.copyFileByServer;if(W||this.editor.requestBase64(q,function(q){S.content=q}),bS(q)){var Z=dS(q);this.findFileNode(Z)&&(W?S.image=!0:this.editor.requestBase64(Z,function(q){S.image=q}))}},q.prototype.pasteFiles=function(){var S=this;if(jW.config.copyFileByServer){var q=[],W=this.currentDir;this.copyFileInfos.forEach(function(S){q.push(S.url),S.image&&q.push(dS(S.url))}),this.editor.request("paste",{fileList:q,destDir:W})}else this.copyFileInfos.forEach(function(q){S.pasteFileImpl(q)})},q.prototype.pasteFileImpl=function(S){var q=S.url,W=S.parentInfo,Z=void 0,z=2,k=W?W.pasteURL:this.currentDir;if(S.isDir){var Q=k+"/"+S.name;for(Z=Q;this.findFileNode(Z);)Z=Q+" "+z++}else if(S.content){var U=k+"/"+T(S.name),u=q.substring(q.lastIndexOf("."),q.length);for(Z=U+u;this.findFileNode(Z);)Z=U+" "+z+++u}if(Z){if(S.content){var D={path:Z,content:S.content,parent_uuid:S.uuid,root_dir:S.rootDir};this.editor.request("upload",D),this.editor.fireEvent("pasteFile",{url:Z}),S.image&&(D.path=dS(Z),D.content=S.image,this.editor.request("upload",D),this.editor.fireEvent("pasteFile",{url:D.path}))}S.isDir&&(S.pasteURL=Z,this.editor.request("mkdir",Z,function(S){}))}},q.prototype.enableDroppableToSymbolView=function(){var S=this.list;this.mode===OW&&(S=this.accordion),S.isDroppableToSymbolView=!0},q.prototype.enableDroppableToDisplayView=function(){var S=this.list;this.mode===OW&&(S=this.accordion),S.isDroppableToDisplayView=!0},q.prototype.enableDroppableToSceneView=function(){var S=this.list;this.mode===OW&&(S=this.accordion),S.isDroppableToSceneView=!0},q.prototype.enableDroppableToUIView=function(){var S=this.list;this.mode===OW&&(S=this.accordion),S.isDroppableToUIView=!0},q.prototype.enableDroppableToUIImage=function(){var S=this.list;this.mode===OW&&(S=this.accordion),S.isDroppableToUIImage=!0},q.prototype.getFileListView=function(){return this.mode===OW?this.accordion:this.list},q.prototype.initTreeMenu=function(S,q){},q.prototype.initListMenu=function(S,q){},q.prototype.initAccordionMenu=function(S,q){},q.prototype.addFileNode=function(S,q,W,Z){var z=new DZ(S,q,W,Z);return this.dataModel.add(z),z},UW(q,[{key:"currentDir",get:function(){var S=void 0;return this.isAccordionMode()?(S=this.ld,S&&S.fileType!==RW&&(S=S.getParent()),S?S.url:this.accordion.dirs.length?this.accordion.dirs[this.accordion.dirs.length-1].url:this.rootDir):(S=this.tree.sm().ld(),S?S.url:this.rootDir)}},{key:"ld",get:function(){return this.getFileListView().sm().ld()}}]),q}(FW),jZ=function(S){function q(W){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];QW(this,q);var z=DW(this,S.call(this,W,"displays",Z));return z.enableDroppableToDisplayView(),z.enableDroppableToUIView(),z}return uW(q,S),q.prototype.initTreeMenu=function(S,q){var W=this.tree;this.addLocateTreeFileItem(q),this.addNewFolderItem(q,this.tree).visible=function(){return W.editable&&(W.isEditable(W.sm().ld())||jW.config.vision&&W.sm().ld()&&2===W.sm().ld().a("dir_type"))},this.addNewDisplayItem(q,this.tree),this.addRenameItem(q,this.tree),this.addDeleteItem(q,this.tree)},q.prototype.initListMenu=function(S,q){var W=this,Z=this.tree;this.addLocateListFileItem(q);var z=this.addNewFolderItem(q,this.list);z.visible=function(){return Z.editable&&(Z.isEditable(Z.sm().ld())||jW.config.vision&&Z.sm().ld()&&2===Z.sm().ld().a("dir_type"))},z=this.addNewDisplayItem(q,this.list),z.visible=function(){var S=Z.sm().ld();if(!Z.editable||jW.config.vision&&S&&2!==S.a("dir_type")&&!S.a("editable"))return!1;if(W.isAccordionMode()){var q=W.accordion.sm().ld();return q&&q.fileType===RW}return!0},this.addCopyItem(q),this.addPasteItem(q),this.addRenameItem(q,this.list),this.addDeleteItem(q,this.list),this.addExportItem(q)},q.prototype.initAccordionMenu=function(S,q){this.addLocateListFileItem(q),this.addNewFolderItem(q,this.accordion),this.addNewDisplayItem(q,this.list),this.addCopyItem(q),this.addPasteItem(q),this.addRenameItem(q,this.accordion),this.addDeleteItem(q,this.accordion),this.addExportItem(q)},q.prototype.addNewDisplayItem=function(S,q){var W=this,Z={id:"newDisplayView",label:k("editor.newdisplayview"),action:function(){if(q instanceof uZ){var S=q.sm().ld();S&&S.fileType===RW&&(W.editor._rightClickURL=S.url)}W.editor.newDisplayView(),W.editor.save(),delete W.editor._rightClickURL},visible:function(){var S=q.sm().ld();if(!q.editable||jW.config.vision&&S&&2!==S.a("dir_type")&&!S.a("editable"))return!1;if(W.isAccordionMode()){var Z=W.accordion.sm().ld();return Z&&Z.fileType===RW}return!0}};return S.push(Z),Z},q}(vZ),iZ=function(S){function q(W){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];QW(this,q);var z=DW(this,S.call(this,W,"symbols",Z));return z.enableDroppableToDisplayView(),z.enableDroppableToSymbolView(),z.enableDroppableToSceneView(),z.enableDroppableToUIImage(),z}return uW(q,S),q.prototype.initTreeMenu=function(S,q){this.addLocateTreeFileItem(q),this.addNewFolderItem(q,this.tree),this.addNewItem(q,this.tree,"newSymbolView",!0),this.addRenameItem(q,this.tree),this.addDeleteItem(q,this.tree)},q.prototype.initListMenu=function(S,q){this.addLocateListFileItem(q),this.addNewFolderItem(q,this.list),this.addNewItem(q,this.list,"newSymbolView",!0),this.addCopyItem(q),this.addPasteItem(q),this.addRenameItem(q,this.list),this.addDeleteItem(q,this.list),this.addExportItem(q)},q.prototype.initAccordionMenu=function(S,q){this.addLocateListFileItem(q),this.addNewFolderItem(q,this.accordion),this.addNewItem(q,this.accordion,"newSymbolView",!0),this.addCopyItem(q),this.addPasteItem(q),this.addRenameItem(q,this.accordion),this.addDeleteItem(q,this.accordion),this.addExportItem(q)},q}(vZ),nZ=function(S){function q(W){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];QW(this,q);var z=DW(this,S.call(this,W,"components",Z));return z.enableDroppableToSymbolView(),z}return uW(q,S),q.prototype.initTreeMenu=function(S,q){this.addLocateTreeFileItem(q),this.addNewFolderItem(q,this.tree),this.addNewItem(q,this.tree,"newComponent"),this.addRenameItem(q,this.tree),this.addDeleteItem(q,this.tree)},q.prototype.initListMenu=function(S,q){this.addLocateListFileItem(q),this.addNewFolderItem(q,this.list),this.addNewItem(q,this.list,"newComponent"),this.addCopyItem(q),this.addPasteItem(q),this.addRenameItem(q,this.list),this.addDeleteItem(q,this.list),this.addExportItem(q)},q.prototype.initAccordionMenu=function(S,q){this.addLocateListFileItem(q),this.addNewFolderItem(q,this.accordion),this.addNewItem(q,this.accordion,"newComponent"),this.addCopyItem(q),this.addPasteItem(q),this.addRenameItem(q,this.accordion),this.addDeleteItem(q,this.accordion),this.addExportItem(q)},q}(vZ),PZ=function(S){function q(W){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];QW(this,q);var z=DW(this,S.call(this,W,"scenes",Z));return z.enableDroppableToDisplayView(),z.enableDroppableToSceneView(),z.enableDroppableToUIView(),z}return uW(q,S),q}(vZ),RZ=function(S){function q(W){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];QW(this,q);var z=DW(this,S.call(this,W,"models",Z));return z.enableDroppableToDisplayView(),z.enableDroppableToSceneView(),z}return uW(q,S),q}(vZ),_Z=function(S){function q(W){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];QW(this,q);var z=DW(this,S.call(this,W,"uis",Z));return z.enableDroppableToUIView(),z}return uW(q,S),q.prototype.initTreeMenu=function(S,q){this.addLocateTreeFileItem(q),this.addNewFolderItem(q,this.tree),this.addNewItem(q,this.tree,"newUIView",!0),this.addRenameItem(q,this.tree),this.addDeleteItem(q,this.tree)},q.prototype.initListMenu=function(S,q){this.addLocateListFileItem(q),this.addNewFolderItem(q,this.list),this.addNewItem(q,this.list,"newUIView",!0),this.addCopyItem(q),this.addPasteItem(q),this.addRenameItem(q,this.list),this.addDeleteItem(q,this.list),this.addExportItem(q)},q.prototype.initAccordionMenu=function(S,q){this.addLocateListFileItem(q),this.addNewFolderItem(q,this.accordion),this.addNewItem(q,this.accordion,"newUIView",!0),this.addCopyItem(q),this.addPasteItem(q),this.addRenameItem(q,this.accordion),this.addDeleteItem(q,this.accordion),this.addExportItem(q)},q}(vZ),xZ=function(S){function q(W){var Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];QW(this,q);var z=DW(this,S.call(this,W,"assets",Z));return z.enableDroppableToDisplayView(),z.enableDroppableToSymbolView(),z.enableDroppableToSceneView(),z.enableDroppableToUIImage(),z}return uW(q,S),q.prototype.initTreeMenu=function(S,q){this.addLocateTreeFileItem(q),this.addNewFolderItem(q,this.tree),this.addRenameItem(q,this.tree),this.addDeleteItem(q,this.tree)},q.prototype.initListMenu=function(S,q){this.addLocateListFileItem(q),this.addNewFolderItem(q,this.list),this.addCopyItem(q),this.addPasteItem(q),this.addRenameItem(q,this.list),this.addDeleteItem(q,this.list),this.$53$(q)},q.prototype.initAccordionMenu=function(S,q){this.addLocateListFileItem(q),this.addNewFolderItem(q,this.accordion),this.addCopyItem(q),this.addPasteItem(q),this.addRenameItem(q,this.accordion),this.addDeleteItem(q,this.accordion),this.$53$(q)},q.prototype.$53$=function(S){var q=this;S.push("separator"),S.push({id:"convertToDisplay",label:k("editor.converttodisplay"),action:function(){q.editor.open(q.getFileListView().sm().ld(),!1)},visible:function(){var S=q.getFileListView().sm().ld();return!!S&&(iS(S.url)||nS(S.url))}}),S.push({id:"convertToSymbol",label:k("editor.converttosymbol"),action:function(){q.editor.open(q.getFileListView().sm().ld(),!0)},visible:function(){var S=q.getFileListView().sm().ld();return!!S&&(iS(S.url)||nS(S.url)||_S(S.url)||xS(S.url))}}),S.push({id:"batchConvertSVG",label:k("editor.batchconvertsvg"),action:function(){q.editor.batchConvertSVG(q.getFileListView().sm().getSelection().toArray())},visible:function(){var S=q.getFileListView().sm().ld();return!!S&&iS(S.url)}})},q}(vZ),KZ=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));return Z.editor=W,Z}return uW(q,S),q.prototype.$5$=function(S){this.setGraphView(this.editor.gv)},q}(sW),dZ=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));Z.editView=W,Z.editor=W.editor,Z._topCanvas=s(),Z._topDiv=F(),Z._view.insertBefore(Z._topCanvas,Z._scrollBarDiv||null),Z._view.insertBefore(Z._topDiv,Z._scrollBarDiv||null);var z=[];return Z.menu=new AW(z),Z.menu.beforeShow=function(S){Z._rightClickPosition=Z.lp(S)},Z.initMenuItems(z),Z.menu.addTo(Z.getView()),Z.editor.menus.push(Z.menu),Z.setResettable(!0),Z.addTopPainter(function(S){jW.config.drawDNDState?S.drawDNDState=!0:(jW.config.texureImage3D&&(S.texureImage3D=!0),S.texureImage2D=!0);var q=Z.getViewRect(),W=Z.editView,z=W.hoverGuideLineX,k=W.hoverGuideLineY,Q=ht.Default.brighter(Z.dm().a("alignmentGuideColor"));ht.Default.isDragging()||!z&&!k||(S.beginPath(),S.strokeStyle=Q,S.lineWidth=1/Z.getZoom(),z&&(S.moveTo(z.x,q.y),S.lineTo(z.x,q.y+q.height)),k&&(S.moveTo(q.x,k.y),S.lineTo(q.x+q.width,k.y)),S.stroke())}),Z}return uW(q,S),q.prototype.reset=function(){this.fitContent(jW.config.animate,jW.config.fitPadding)},q.prototype.isEditable=function(q){return!!this.editable&&S.prototype.isEditable.call(this,q)},q.prototype.isMovable=function(q){return!!this.editable&&S.prototype.isMovable.call(this,q)},q.prototype.invalidateAll=function(q,W){if("imageLoaded"===W||"modelLoaded"===W){var Z=this.editor.inspector;Z&&(Z.$34$(),Z.$85$&&Z.$85$())}S.prototype.invalidateAll.call(this,q,W)},q.prototype.handleDelete=function(q){this.editable&&S.prototype.handleDelete.call(this,q)},q.prototype.onGroupDoubleClicked=function(q,W,Z){this.editable&&S.prototype.onGroupDoubleClicked.call(this,q,W,Z)},q.prototype.onEdgeDoubleClicked=function(q,W,Z){this.editable&&S.prototype.onEdgeDoubleClicked.call(this,q,W,Z)},q.prototype.checkDoubleClickOnNote=function(q,W){return!!this.editable&&S.prototype.checkDoubleClickOnNote.call(this,q,W)},q.prototype.getToolTip=function(S){return jW.config.getToolTip(S,this)},q.prototype.$56$=function(S){var q=this;S.push({id:"copy",label:k("editor.copy"),action:function(){q.editor.copy()},visible:function(){return!!q.editor.ld}}),S.push({id:"paste",label:k("editor.paste"),action:function(){q.editor.paste(!1,q._rightClickPosition)},visible:function(){return q.editable&&q.editor.hasCopyInfo()}})},q.prototype.$55$=function(S){var q=this;S.push({separator:!0,visible:function(){return q.editable&&!!q.editor.ld}}),S.push({id:"bringToFront",label:k("editor.bringtofront"),action:function(){q.editor.bringToFront()},visible:function(){return q.editable&&!!q.editor.ld}}),S.push({id:"bringForward",label:k("editor.bringforward"),action:function(){q.editor.bringForward()},visible:function(){return q.editable&&!!q.editor.ld}}),S.push({id:"sendBackward",label:k("editor.sendbackward"),action:function(){q.editor.sendBackward()},visible:function(){return q.editable&&!!q.editor.ld}}),S.push({id:"sendToBack",label:k("editor.sendtoback"),action:function(){q.editor.sendToBack()},visible:function(){return q.editable&&!!q.editor.ld}})},q.prototype.initMenuItems=function(S){},q.prototype.onClosed=function(){D(this.editor.menus,this.menu)},q.prototype.$57$=function(S){return S&&this.copyMap[S._id]?S._id:S},q.prototype.$49$=function(S,q){return S instanceof ht.Data?this.dm().contains(S)?S:void 0:q[S]},q.prototype.getSelectWidth=function(S){return!this.isEditable(S)||S instanceof ht.Edge?S.s("select.width"):0},q.prototype.onSelectionChanged=function(S){if(1===this.sm().size()&&("set"===S.kind||"append"===S.kind)){var q=this.sm().ld();q&&document.activeElement===this.getView()&&this._dataModel.isAutoAdjustIndex()&&this.adjustIndex(q)}},q.prototype.getContentRect=function(){var q=S.prototype.getContentRect.call(this);if(!q.width||!q.height){var W=this.dm().a("width")||200,Z=this.dm().a("height")||200;q={x:-W/2,y:-Z/2,width:W,height:Z,empty:!0}}return q},q.prototype.isDroppable=function(S,q){return!1},q.prototype.$58$=function(S){if(this.dragImage){var q=jW.config.dragImageSize,W=e(S);this.dragImage.style.left=W.x-q/2+"px",this.dragImage.style.top=W.y-q/2+"px"}},q.prototype.removeDragImage=function(){this.dragImage&&(M(this.dragImage),this.dragImage=null)},q.prototype.handleCrossDrag=function(S,q,W){var Z=this,z=W.view,k=z.draggingData;if("enter"===q){if(this._topDiv.style.border="solid "+jW.config.color_select_dark+" 2px",!this.dragImage&&k){var Q=void 0===k.a("dragImage")?k.getImage():k.a("dragImage");if(ht.Default.getImage(Q)!==ht.Default.getImage("editor.unknown")){var U=jW.config.dragImageSize;this.dragImage=ht.Default.toCanvas(Q,U,U,"centerUniform",k,W.view,null,ht.Default.devicePixelRatio),this.$58$(S),this.dragImage.style.opacity=jW.config.dragImageOpacity,this.dragImage.className="ht-editor-dnd-image",ht.Default.appendToScreen(this.dragImage)}}}else if("exit"===q||"cancel"===q)this._topDiv.style.border="",this.removeDragImage();else if("over"===q)this.$58$(S);else if("drop"===q)if(this._topDiv.style.border="",k){this.removeDragImage();var u=this.lp(S);z.isSelected(k)?z.sm().toSelection().each(function(q){z.handleDropToEditView?z.handleDropToEditView(Z.editView,q,u,S):Z.editor.$98$(q,u)}):z.handleDropToEditView?z.handleDropToEditView(this.editView,k,u,S):this.editor.$98$(k,u)}else z===this.editor.dndFromOutside&&this.editor.dropLocalFileOnView(S)},UW(q,[{key:"editable",get:function(){return this.editor.editable},set:function(S){}}]),q}(lW),NZ=function(S){function q(W){return QW(this,q),DW(this,S.call(this,W))}return uW(q,S),q.prototype.handleDataModelChange=function(q){S.prototype.handleDataModelChange.call(this,q),this.editor&&this.editor.fireViewEvent(this.editView,"DataModelChanged",{event:q})},q.prototype.handleDataModelPropertyChange=function(q){S.prototype.handleDataModelPropertyChange.call(this,q),this.editor&&this.editor.fireViewEvent(this.editView,"DataModelPropertyChanged",{event:q})},q.prototype.handleDataPropertyChange=function(q){S.prototype.handleDataPropertyChange.call(this,q),this.editor&&this.editor.fireViewEvent(this.editView,"DataPropertyChanged",{event:q})},q.prototype.initMenuItems=function(q){this.$56$(q),this.$55$(q),this.addBlockItems(q),S.prototype.initMenuItems.call(this,q)},q.prototype.isDroppable=function(S,q){if(this.editor.editable)return!!q.view.isDroppableToDisplayView},q.prototype.isSelectable=function(q,W){return!q._refGraph&&S.prototype.isSelectable.call(this,q,W)},q.prototype.addBlockItems=function(S){var q=this,W=function(){return q.sm().size()>0},Z=function(){for(var S=0;S<q.sm().size();S++){var W=q.sm().getSelection().get(S);if(W instanceof ht.Block&&!(W instanceof ht.RefGraph))return!0}return!1};S.push({separator:!0,visible:function(){return q.editable&&(W()||Z())}}),S.push({id:"block",label:k("editor.block"),action:function(){q.editor.block()},visible:function(){return q.editable&&W()}}),S.push({id:"unblock",label:k("editor.unblock"),action:function(){q.editor.unblock()},visible:function(){return q.editable&&Z()}})},q}(dZ),mZ=function(){function S(q,W,Z){QW(this,S),this.canvas=q,this.editView=W,this.type=Z,this.gv=W.graphView,this.hoverLine=null,this.setUp(),this.garbageImage=ht.Default.toCanvas("Icons.ConnectGuideDeletingImage",24,24)}return S.prototype.getView=function(){return this.canvas},S.prototype.setUp=function(){this.addListeners()},S.prototype.tearDown=function(){this.removeListeners(),this.clear()},S.prototype.clear=function(){},S.prototype.setCursor=function(S){ht.Default.isTouchable||(this.canvas.style.cursor=S)},S.prototype.checkHit=function(S){var q=this.editView,W=this.gv,Z=this.existList,z=this.type,k=W.lp(S),Q=W.getZoom();if(Z.length){var U=1/0,u=k[z],D=void 0;if(Z.forEach(function(S){var q=Math.abs(S.value-u);q<U&&(D=S,U=q)}),D&&U<6/Q){var G=this.getRoundLogicalPoint(S);return this.setCursor("x"===z?"ew-resize":"ns-resize"),G[z]=D.value,q[this.hoverKey]=G,this.hoverLine=D,q.drawRuler(),q.gv.redraw(),D}}return null},S.prototype.handle_touchmove=function(S){this.handle_mousemove(S)},S.prototype.handle_mousemove=function(S){if(this.editable&&!this.editing&&!ht.Default.isDragging()){var q=this.editView;this.gv;this.checkHit(S)||(delete this.hoverLine,this.setCursor("default"),q[this.hoverKey]=this.getRoundLogicalPoint(S),q.drawRuler(),q.gv.redraw())}},S.prototype.handle_touchstart=function(S){this.handle_mousedown(S)},S.prototype.handle_mousedown=function(S){this.editable&&(ht.Default.preventDefault(S),this.checkHit(S)?(V(this,S),ht.Default.preventDefault(S),this.editing=!0,delete this.editView[this.hoverKey],this.editView.gv.redraw()):this.addGuide(this.getRoundLogicalPoint(S)))},S.prototype.handle_mouseleave=function(S){var q=this.editView,W=this.hoverKey;this.editing||ht.Default.isDragging()||(q[W]&&(delete q[W],q.iv(),this.editView.gv.redraw()),this.setCursor("default"))},S.prototype.handleWindowTouchMove=function(S){this.handleWindowMouseMove(S)},S.prototype.handleWindowMouseMove=function(S){var q=this.hoverLine,W=this.gv,Z=this.type,z=this.editView,k=this.grid,Q=W.lp(S);if(k){var U=q.id,u=W.getZoom()>5?parseFloat(Q[Z].toFixed(1)):Math.round(Q[Z]);this.showGarbageTip(S),(this._garbageAppended||this.editView[this.hoverKey])&&(k.adjustAlignmentGuide(U,u),q.value=u,z.iv())}},S.prototype.handleWindowMouseUp=function(S){this.editing=!1;var q=this.hoverLine,W=this.garbageImage,Z=this.grid,z=this.existList;if(!this.containedInGv(S)){Z.removeAlignmentGuide(q.id);var k=z.indexOf(q);z.splice(k,1)}W.parentNode&&W.parentNode.removeChild(W),delete this.editView[this.hoverKey],this.editView.iv(),this.update()},S.prototype.showGarbageTip=function(S){var q=this.editView,W=this.hoverKey,Z=this.garbageImage,z=ht.Default.getClientPoint(S);this.containedInGv(S)?(Z.parentNode&&Z.parentNode.removeChild(Z),q[W]=this.getRoundLogicalPoint(S)):(Z.parentNode?delete this._garbageAppended:(ht.Default.appendToScreen(Z),this._garbageAppended=!0),Z.style.left=z.x+10+"px",Z.style.top=z.y+10+"px",delete q[W])},S.prototype.containedInGv=function(S){var q=this.gv,W=this.type,Z=q.getView().getBoundingClientRect(),z=Z.x,k=Z.y,Q=Z.width,U=Z.height,u={x:z+Q/2,y:k+U/2},D=C(S);return"x"===W?D.y=u.y:D.x=u.x,ht.Default.containsPoint(Z,D)},S.prototype.addGuide=function(S){var q=(this.editView,this.type),W=this.grid,Z=S[q];if(W){var z=W.addAlignmentGuide(q,Z);this.editView.alignGuideMap[q].push({id:z,value:Z}),this.update()}},S.prototype.getRoundLogicalPoint=function(S){var q=this.gv.lp(S);return this.gv.getZoom()>5?(q.x=parseFloat(q.x.toFixed(1)),q.y=parseFloat(q.y.toFixed(1))):(q.x=Math.round(q.x),q.y=Math.round(q.y)),q},S.prototype.update=function(){this.editView.updateAlignGuide()},UW(S,[{key:"grid",get:function(){return this.gv.getEditInteractor()?this.gv.getEditInteractor().gridGuide:null}},{key:"hoverKey",get:function(){return"hoverGuideLine"+this.type.toUpperCase()}},{key:"existList",get:function(){return this.editView.alignGuideMap[this.type]}},{key:"editable",get:function(){return this.editView.editable&&this.editView.dm.a("alignmentGuideEnabled")}}]),S}();SS(mZ,{ms_listener:1});var tZ={width:!0,height:!0,position:!0,rotation:!0,anchor:!0,scale:!0,expanded:!0};ht.Default.getMSMap().hteditor_editview=function(S,q){Object.defineProperties(S,{dirty:{get:function(){return this.tab.a("dirty")},set:function(S){ht.Default.loadingRefGraph||this.tab.a("dirty",S)}}}),S.setRulerEnabled=function(S){this.dm.a("rulerEnabled",S)},S.isRulerEnabled=function(){return this.dm.a("rulerEnabled")},S.reload=function(){if(this.url){var S={url:this.url};if(this.editor.fireViewEvent(this,"Reloading",S),S.preventDefault)return!1;this.parse(this.url)}},S.save=function(S,q){var W=this;if(!this.editable)return void(S&&S());var Z=function(){S&&S(),W.editor.fireViewEvent(W,"Saved",{url:W.url}),W.editor.makeFileNodeVisible(W.url)};if(q)this._saveAs(Z,q);else if(this.url)this._saveImpl(Z);else{var z=this.editor._rightClickURL||this.editor[this.type+"s"].currentDir,Q=k("editor.inputnew"+this.type+"name"),U=this.editor[this.type+"s"];if(U.isAccordionMode()&&U.rootDir===z)return void this.editor.showMessage(k("editor.createfolderfirst"),"error",2e3);this._saveNew(S,Z,Q,z)}},S._saveNew=function(S,q,W,Z){var z=this,Q=function(W,Q){if("ok"===Q){var U=bS(W)?T(W):W,u=Z+"/"+U+".json";z.editor.getFileNode(u)?qq(k("editor.filenameconflict"),u,function(){S&&S()}):(z.tab.setName(U),z.url=u,z.tab.setTag(z.url),z.editor.dataView.updateUrl(),z._saveImpl(q,!0))}else S&&S()},U={name:void 0};if(this.editor.fireViewEvent(this,"NewNameInputing",U),U.preventDefault)return!1;U.name?Q(U.name,"ok"):Sq(W,this.tab.getName(),{nullable:!1,trim:!0,maxLength:jW.config.maxFileNameLength,checkFunc:jW.config.checkFileName,$38$:this.editor.$38$},Q)},S._saveAs=function(S,q){this.tab.setName(a(q)),this.url=q,this.tab.setTag(this.url),this.editor.dataView.updateUrl(),this._saveImpl(S)},S._saveImpl=function(S,q){var W=this,Z=this.url,z={url:Z};if("display"===this.type&&jW.config.settingDefaultValueBeforeSaving&&this.dm.each(function(S){if(S instanceof ht.Node){var q=ht.Default.getImage(S.getImage());q&&q.dataBindings&&q.dataBindings.forEach(function(q){var W=S.getAttrObject(),Z=q.defaultValue;if(void 0!==Z){var z=q.attr;W&&void 0!==W[z]||S.a(z,Z)}})}}),this.editor.fireViewEvent(this,"Saving",z),z.preventDefault)return q&&(this.tab.setName(k("editor.untitled")),delete this.url,this.tab.setTag(void 0),this.editor.dataView.updateUrl()),!1;var Q=this.parent_uuid,U=this.root_dir;z={path:z.url,content:J(this.content),parent_uuid:Q,root_dir:U},this.editor.request("upload",z,function(z){z?(q&&W.tab.a("uuid",z.uuid),W.editor.saveImage(W.dm.a("snapshotURL")||W.g3d||W.graphView,Z.substr(0,Z.length-5)+".png",function(){S&&S(),W.editor.showMessage(k("editor.savedsuccessfully"),"normal",1e3),W.dirty=!1},z.uuid,z.parent_uuid,z.root_dir||z.asset_type)):(W.tab&&W.editor.mainTabView.removeTab(W.tab),delete W.tab,W.editor.showMessage(k("editor.savedfailed"),"error",1e3))})},S.parse=function(S,q){(S||q)&&(this.url=S,q?this.update(q):Y(S,this.update.bind(this)))},S.update=function(S,q){var W=this;if(S){if(q){var Z=J(this.content),z=S,k={undo:function(){W.updateImpl(Z,!0)},redo:function(){W.updateImpl(z,!0)}};this.dm.disableHistoryManager(),this.updateImpl(S,q),this.dm.enableHistoryManager(),this.dm.addHistory(k)}else this.dm.disableHistoryManager(),this.updateImpl(S,q),this.dm.enableHistoryManager(),this.dm.clearHistoryManager();var Q=void 0;q?Q="Committed":this.isOpened?Q="Reloaded":(Q="Opened",this.isOpened=!0);var U={url:this.url,json:S};this.editor.fireViewEvent(this,Q,U)}},S.$3$=function(){return this._interactionState},S.$4$=function(S,q,W,Z){var z=this,k=this._interactionState;k!==S&&(this._interactionState=S,this.editor.pointsEditingMode=!1,[this.graphView,this.g3d].forEach(function(k){if(k){var Q=[];if(k.getInteractors().each(function(q){q.keep?q.disabled="edit"!==S:Q.push(q)}),Q.forEach(function(S){S.tearDown(),k.getInteractors().remove(S)}),"edit"!==S){var U=k===z.g3d?z.create3dInteractor(q,W,Z):z.createInteractor(q,W,Z);U&&(U.setUp(),k.getInteractors().add(U))}k.invalidateSelection()}}),this.editor.mainToolbar.iv(),this.fp("interactionState",k,S),this.validateCanvas())},S.addData=function(S){var q=arguments.length>1&&void 0!==arguments[1]&&arguments[1],W=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Z=arguments.length>3&&void 0!==arguments[3]&&arguments[3],z="symbol"===this.type?"compCreated":"dataCreated",k={data:S};if(W)return void this.editor.fireViewEvent(this,z,k,!1);this.dm.beginTransaction(),q||S.getParent()||S.setParent(this.graphView.getCurrentSubGraph()),this.dm.add(S),q||(Z||this.dm.sm().ss(S),this.graphView.setFocus()),this.editor.fireViewEvent(this,z,k,!1),this.dm.endTransaction()},S.skewGrid=function(){this.dm.beginTransaction(),this.dm.a("gridAngle",2*Math.PI/3),this.dm.a("gridRotation",Math.PI/6),this.dm.endTransaction()},S.preview=function(){this.$64$("previews/"+this.type+".json",this.dm.a("previewURL")||jW.config[this.type+"PreviewURL"])},S.$64$=function(S,q){var W=this,Z=this.tab.getTag();Z&&(q+=(-1===q.indexOf("?")?"?":"&")+"tag="+encodeURI(Z));var z={url:q};if(this.editor.fireViewEvent(this,"Previewing",z),z.preventDefault)return!1;q=z.url;var k=this.content;k.title=this.tab.getName();var Q=this.parent_uuid,U=this.root_dir;z={path:jW.config.vision&&Z?"previews/"+Z:S,content:J(k),parent_uuid:Q,root_dir:U},this.editor.request("upload",z,function(S){window.open(q,q.replace(/[^\u4E00-\u9FA5A-Za-z0-9]+/g,"_")),W.editor.fireViewEvent(W,"Preview",{url:q})})}};var VZ=function(){function S(q,W,Z,z,k,Q,U){var u=this;QW(this,S),this.editor=q,this.tab=W,this.type=z,this.sceneView=k,this.parent_uuid=Q,this.root_dir=U,W.setView(this);var D=this.gv=this.graphView=new Z(this);this._view=w(!0,this),D.addViewListener(function(S){"validate"===S.kind&&u.validateCanvas()}),this._hRuler=s(),this._vRuler=s(),this._view.appendChild(D.getView()),this.$4$("edit"),D.isInteractive=function(){return!1},D.addPropertyChangeListener(function(){u.iv()}),D.addInteractorListener(function(S){u.handleInteractorEvent(S)}),this.dm.sm().addSelectionChangeListener(function(S){u.iv()}),this.dm.addDataModelChangeListener(function(S){u.handleDataModelChanged(S)}),
this.dm.addDataPropertyChangeListener(function(S){u.handleDataPropertyChanged(S)}),this.dm.addPropertyChangeListener(function(S){u.handleDataModelPropertyChanged(S)}),this.dm.addHierarchyChangeListener(function(S){u.handleHierarchyChanged(S)}),this.dm.layout=function(S,q){u._autoLayout||(u._autoLayout=new ht.layout.AutoLayout(D)),u._autoLayout.options=q||{};var W=D.getZoom(),Z=D.tx(),z=D.ty();u.dm.beginTransaction(),u._autoLayout.setAnimate(jW.config.animate);var k=function(){var S=D.getZoom(),q=D.tx(),k=D.ty(),Q={undo:function(){D.setZoom(W),D.tx(Z),D.ty(z)},redo:function(){D.setZoom(S),D.tx(q),D.ty(k)}};u.dm.addHistory(Q),u.dm.endTransaction()};u._autoLayout.layout(S,function(){jW.config.animate?D.fitContent({finishFunc:k}):(D.fitContent(!1,jW.config.fitPadding),k())})},D.setEditable(!0),D.setEditStyle("moveDummyThreshold",jW.config.moveDummyThreshold),D.setEditStyle("smartGuideThreshold",jW.config.smartGuideThreshold),jW.SceneView&&D.setEditStyle("curveTipVisible",!1),D.getInteractors().each(function(S){S.keep=!0}),this.clear(),this.initRuler()}return S.prototype.setGridEnabled=function(S){this.dm.a("gridEnabled",S)},S.prototype.isGridEnabled=function(){return this.dm.a("gridEnabled")},S.prototype.initRuler=function(){var S=this._hRuler,q=this._vRuler,W=this.gv,Z=this.type;if(this.alignGuideMap={x:[],y:[]},jW.config.gridAlignmentGuideEnabled){S.style.pointerEvents="auto",q.style.pointerEvents="auto";var z=this.dm.a("alignmentGuideColor");z||(z="symbol"===Z?jW.config.symbolGridAlignmentGuideColor:jW.config.displayGridAlignmentGuideColor),W.setEditStyle("gridAlignmentGuideColor",z);new mZ(this._hRuler,this,"x"),new mZ(this._vRuler,this,"y")}},S.prototype.resetGrid=function(){},S.prototype.clear=function(){this.dm.beginTransaction(),this.dm.setName(void 0),this.dm.setBackground(void 0),this.dm.setHierarchicalRendering(!1),this.dm.setLayers(void 0),this.dm.clear(),this.dm.setAttrObject(void 0),this.resetGrid(),this.getGridGuide().removeAllAlignmentGuide(),this.dm.endTransaction()},S.prototype.handleInteractorEvent=function(S){var q=S.kind;"prepareMove"!==q&&"prepareEdit"!==q||!S.event.altKey?"selectPoint"===q&&(this.currentEditingPoint=void 0===S.x?null:{x:S.x,y:S.y,e:mS(S.e)?S.e:0},this.editor.updateInspectorPropertiesLater()):(this.editor.copy(),this.editor.paste(!0),this.editor.gv.validate())},S.prototype.handleDataModelChanged=function(S){this.dirty=!0},S.prototype.handleDataPropertyChanged=function(S){S.data.disableDirty||"*"!==S.property&&(tZ[S.property]&&this.iv(),this.dirty=!0)},S.prototype.handleHierarchyChanged=function(S){this.dirty=!0},S.prototype.handleDataModelPropertyChanged=function(S){var q=this,W=S.property,Z=S.newValue;if("a:rulerEnabled"===W)this.graphView.getEditInteractor().alignmentGuideEnabled=Z,this.iv();else if("a:gridEnabled"===W)this.graphView.getEditInteractor().gridEnabled=Z;else if("a:gridBlockSize"===W)this.graphView.setEditStyle("gridBlockSize",Z);else if("a:gridThickLinesEvery"===W)this.graphView.setEditStyle("gridThickLinesEvery",Z);else if("a:gridThickColor"===W)this.graphView.setEditStyle("gridThickColor",Z);else if("a:gridLightColor"===W)this.graphView.setEditStyle("gridLightColor",Z);else if("a:gridAngle"===W)this.graphView.setEditStyle("gridAngle",Z);else if("a:gridRotation"===W)this.graphView.setEditStyle("gridRotation",Z);else if("a:gridZoomThreshold"===W)this.graphView.setEditStyle("gridZoomThreshold",Z);else if("a:anchorEnabled"===W)this.graphView.setEditStyle("anchorVisible",Z);else if("a:guideLineEnabled"===W)this.graphView.setEditStyle("guideLineVisible",Z);else if("a:highlightEnabled"===W)this.graphView.setEditStyle("hoverGuideVisible",Z);else if("a:highlightColor"===W)this.graphView.setEditStyle("hoverGuideColor",Z);else if("a:highlightBorderWidth"===W)this.graphView.setEditStyle("hoverGuideBorderWidth",Z);else if("a:highlightBorderPattern"===W)this.graphView.setEditStyle("hoverGuideBorderPattern",Z);else if("a:connectActionType"===W)this.graphView.setCurrentConnectActionType(Z);else if("a:xAlignmentGuides"===W){var z=this.getGridGuide();z.removeAllAlignmentGuide("x"),this.alignGuideMap.x=[],Z&&Z.forEach(function(S){var W=z.addAlignmentGuide("x",S);q.alignGuideMap.x.push({id:W,value:S})}),this.drawRuler()}else if("a:yAlignmentGuides"===W){var k=this.getGridGuide();k.removeAllAlignmentGuide("y"),this.alignGuideMap.y=[],Z&&Z.forEach(function(S){var W=k.addAlignmentGuide("y",S);q.alignGuideMap.y.push({id:W,value:S})}),this.drawRuler()}else"a:alignmentGuideColor"===W?(this.graphView.setEditStyle("gridAlignmentGuideColor",Z),this.drawRuler()):"a:alignmentGuideEnabled"===W&&(this.graphView.getEditInteractor().alignmentGuideEnabled=Z,this.drawRuler());this.dirty=!0,this.validateCanvas()},S.prototype.onClosed=function(){this.graphView.onClosed()},S.prototype.validateCanvasLater=function(){var S=this;this._validateCanvasLater||(this._validateCanvasLater=!0,requestAnimationFrame(function(){S.validateCanvas()}))},S.prototype.validateCanvas=function(){this._validateCanvasLater=!1;var S=this.graphView._topCanvas,q=I(S);q.clearRect(0,0,S.clientWidth,S.clientHeight),this.graphView.getInteractors().each(function(S){S.$0$&&S.$0$(q)}),this.$0$(q),q.restore()},S.prototype.redraw=function(){this._lastWidth=this._lastHeight=null,this.iv()},S.prototype.validateImpl=function(){var S=this._rulerSize,q=this.isRulerEnabled(),W=this.getWidth(),Z=this.getHeight();if(W!==this._lastWidth||Z!==this._lastHeight||S!==this._lastRulerSize||q!==this._lastRulerEnabled){if(this._lastWidth=W,this._lastHeight=Z,this._lastRulerSize=S,this._lastRulerEnabled=q,q){this._hRuler.parentNode||(this._view.appendChild(this._hRuler),this._view.appendChild(this._vRuler));var z=Math.max(0,W-S),k=Math.max(0,Z-S);o(this._hRuler,S,0,z,S),o(this._vRuler,0,S,S,k),o(this.graphView,S,S,z,k),o(this.graphView._topDiv,0,0,z,k),B(this.graphView._topCanvas,z,k),B(this._hRuler,z,S),B(this._vRuler,S,k)}else this._hRuler.parentNode&&(M(this._hRuler),M(this._vRuler)),o(this.graphView,0,0,W,Z),o(this.graphView._topDiv,0,0,W,Z),B(this.graphView._topCanvas,W,Z);this.validateCanvas()}this._hRuler.style.background=this._rulerBackground,this._vRuler.style.background=this._rulerBackground,this.drawRuler()},S.prototype.$0$=function(S){var q=this.graphView.getZoom(),W=this.graphView.tx(),Z=this.graphView.ty(),z=Math.round(this.dm.a("width")||0)*q,k=Math.round(this.dm.a("height")||0)*q,Q=this.graphView.getWidth(),U=this.graphView.getHeight();!jW.config.mixMaskAndBackground&&this.dm.getBackground()||z>0&&k>0&&Q>0&&U>0&&(S.beginPath(),W&&S.rect(0,0,W,U),Z&&Q-W&&S.rect(W,0,Q-W,Z),Q-W-z&&k&&S.rect(W+z,Z,Q-W-z,k),Q-W&&U-Z-k&&S.rect(W,Z+k,Q-W,U-Z-k),S.fillStyle=jW.config.color_mask,S.fill())},S.prototype.drawVerticalText=function(S,q,W){S.save(),S.translate(11,W+11),S.rotate(-Math.PI/2),H(S,q,this._rulerFont,this._rulerColor,11,-11,0,this._rulerSize,"right"),S.restore()},S.prototype.drawRuler=function(){if(this.isRulerEnabled()){var S=this._rulerFont,q=this._rulerSize,W=this._rulerColor,Z=this.graphView,z=Z.getUnionNodeRect(Z.sm().getSelection()),k=Z.getZoom(),Q=Math.log(k)/Math.log(10),U=Math.floor(Q),u=100/Math.pow(10,U)*k,D=u/10,G=U>1?40+10*(U-1):40,b=Math.round(Z.tx()),v=Math.round(Z.ty()),j={x:-b,y:-v,width:Z.getWidth(),height:Z.getHeight()},i=Math.floor(j.x/u),n=Math.ceil((j.x+j.width)/u),P=Math.floor(j.y/u),R=Math.ceil((j.y+j.height)/u),_=this.dm.a("alignmentGuideColor"),x=this.dm.a("alignmentGuideEnabled"),K=ht.Default.getTextSize,d=void 0,N=void 0,m=void 0,t=void 0,V=void 0,C=void 0;for(_||(_="symbol"===this.type?jW.config.symbolGridAlignmentGuideColor:jW.config.displayGridAlignmentGuideColor),I(this._hRuler,0,0,1,{x:0,y:0,width:j.width,height:q}).restore(),t=I(this._hRuler,b,0,1),t.lineWidth=1,t.strokeStyle=W,z&&(t.beginPath(),t.rect(z.x*k,0,z.width*k,q),t.fillStyle=jW.config.color_line,t.fill()),t.beginPath(),d=i;d<=n;d++)V=d*u,C=U>1?(V/k).toFixed(U-1):Math.round(V/k),V=Math.round(V),t.moveTo(V,q),t.lineTo(V,0),H(t,C,S,W,V,0,1,q,"left");for(t.stroke(),t.beginPath(),d=i;d<=n;d++)for(m=1;m<10;m++)V=d*u+m*D,C=U>1?(V/k).toFixed(U-1):Math.round(V/k),V=Math.round(V),t.moveTo(V,q),5===m?(t.lineTo(V,q-10),H(t,C,S,W,V,0,1,q,"left")):(t.lineTo(V,q-4),D>G&&H(t,C,S,W,V,0,1,q,"left"));t.stroke(),x&&this.alignGuideMap&&this.alignGuideMap.x.length&&(t.beginPath(),t.strokeStyle=_,this.alignGuideMap.x.forEach(function(S){t.moveTo(k*S.value,0),t.lineTo(k*S.value,q)}),t.stroke());var O=this.hoverGuideLineX;if(x&&O){var e=k*O.x,L=K(S,O.x);t.fillStyle=jW.config.color_pane,t.fillRect(e,0,L.width,q),H(t,O.x,S,_,e,0,L.width,q,"left","middle"),t.beginPath(),t.lineWidth=2,t.moveTo(e,0),t.lineTo(e,q),t.strokeStyle=ht.Default.brighter(_),t.stroke()}for(t.restore(),I(this._vRuler,0,0,1,{x:0,y:0,width:q,height:j.height}).restore(),t=I(this._vRuler,0,v,1),t.lineWidth=1,t.strokeStyle=W,z&&(t.beginPath(),t.rect(0,z.y*k,q,z.height*k),t.fillStyle=jW.config.color_line,t.fill()),t.beginPath(),N=P;N<=R;N++)V=N*u,C=U>1?(V/k).toFixed(U-1):Math.round(V/k),V=Math.round(V),t.moveTo(q,V),t.lineTo(0,V),this.drawVerticalText(t,C,V);for(t.stroke(),t.beginPath(),N=P;N<=R;N++)for(m=1;m<10;m++)V=N*u+m*D,C=U>1?(V/k).toFixed(U-1):Math.round(V/k),V=Math.round(V),t.moveTo(q,V),5===m?(t.lineTo(q-10,V),this.drawVerticalText(t,C,V)):(t.lineTo(q-4,V),D>G&&this.drawVerticalText(t,C,V));t.stroke(),x&&this.alignGuideMap&&this.alignGuideMap.y.length&&(t.beginPath(),t.strokeStyle=_,this.alignGuideMap.y.forEach(function(S){t.moveTo(0,k*S.value),t.lineTo(q,k*S.value)}),t.stroke());var $=this.hoverGuideLineY;if(x&&$){var y=k*$.y,c=K(S,$.y);t.fillStyle=jW.config.color_pane,t.fillRect(0,y,q,c.width),t.save(),t.translate(0,y),t.rotate(-Math.PI/2),H(t,$.y,S,_,-c.width,0,c.width,q,"right"),t.restore(),t.beginPath(),t.lineWidth=2,t.moveTo(0,y),t.lineTo(q,y),t.strokeStyle=ht.Default.brighter(_),t.stroke()}t.restore()}},S.prototype.updateAlignGuide=function(){if(this.getGridGuide()){var S=this.dm,q=this.alignGuideMap,W=q.x,Z=q.y;S.beginTransaction(),S.a({xAlignmentGuides:W&&W.length?W.map(function(S){return S.value}):void 0,yAlignmentGuides:Z&&Z.length?Z.map(function(S){return S.value}):void 0}),S.endTransaction()}},S.prototype.getGridGuide=function(){return this.gv.getEditInteractor()?this.gv.getEditInteractor().gridGuide:null},UW(S,[{key:"editable",get:function(){return this.sceneView?this.sceneView.editable:this._editable},set:function(S){this.sceneView||S!==this._editable&&(this._editable=S,this.gv.invalidateSelection(),this.editor.mainToolbar.iv())}},{key:"dm",get:function(){return this.graphView.dm()}}]),S}();SS(VZ,{ms_v:1,ms_fire:1,ms_ac:["rulerBackground","rulerFont","rulerColor","rulerSize","guideColor"],hteditor_editview:1,_rulerFont:jW.config.smallFont,_rulerBackground:jW.config.color_pane,_rulerColor:jW.config.color_dark,_rulerSize:jW.config.rulerSize,_guideColor:jW.config.color_transparent,_interactionState:void 0});var CZ=function(S){function q(W,Z,z){QW(this,q);var k=W.getView(),Q=DW(this,S.call(this,k.graphView));return Q.tab=W,Q.editView=k,Q.editor=Q.editView.editor,Q.clazz=Z,Q.type=z,Q._disabled=!1,Q}return uW(q,S),q.prototype.beginTransaction=function(){this._isBeginTransaction||(this._isBeginTransaction=!0,this.dm.beginTransaction())},q.prototype.endTransaction=function(){this._isBeginTransaction&&(this._isBeginTransaction=!1,this.dm.endTransaction())},q.prototype.getDataAt=function(S,q){return this.gv.getDataAt(S,q)},q.prototype.getNodeAt=function(S){var q=this.getDataAt(S);return q instanceof ht.Node?q:null},q.prototype.setUp=function(){S.prototype.setUp.call(this),this.sm.cs()},q.prototype.$0$=function(S){},q.prototype.drawDiamond=function(S,q,W,Z){var z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;q=this.toPoint(q),Z&&(S.fillStyle=Z),W&&(S.strokeStyle=W);var k=q,Q=k.x,U=k.y;S.lineWidth=1,S.beginPath(),S.moveTo(Q,U-z),S.lineTo(Q+z,U),S.lineTo(Q,U+z),S.lineTo(Q-z,U),S.closePath(),Z&&S.fill(),W&&S.stroke()},q.prototype.drawRect=function(S,q,W,Z){q=this.toRect(q),Z&&(S.fillStyle=Z),W&&(S.strokeStyle=W),S.lineWidth=1,S.beginPath(),S.rect(q.x,q.y,q.width,q.height),S.stroke(),Z&&S.fill(),W&&S.stroke()},q.prototype.drawPoint=function(S,q,W,Z,z){q=this.toPoint(q),z&&(S.fillStyle=z),Z&&(S.strokeStyle=Z),S.lineWidth=1,S.beginPath(),S.arc(q.x,q.y,W,0,2*Math.PI,!0),z&&S.fill(),Z&&S.stroke()},q.prototype.drawPoints=function(S,q,W,Z,z){for(var k=0;k<q.length;k++)this.drawPoint(S,q[k],W,Z,z)},q.prototype.drawLine=function(S,q,W,Z){q=this.toPoint(q),W=this.toPoint(W),S.lineWidth=1,S.strokeStyle=Z,S.beginPath(),S.moveTo(q.x,q.y),S.lineTo(W.x,W.y),S.stroke()},q.prototype.toRect=function(S){var q=this.zoom;return{x:S.x*q+this.tx,y:S.y*q+this.ty,width:S.width*q,height:S.height*q}},q.prototype.toPoint=function(S){return{x:S.x*this.zoom+this.tx,y:S.y*this.zoom+this.ty}},q.prototype.add=function(S){this.editView.addData(S)},q.prototype.remove=function(S){this.dm.remove(S)},q.prototype.lp=function(S){return this.gv.lp(S)},UW(q,[{key:"dm",get:function(){return this.gv.dm()}},{key:"sm",get:function(){return this.gv.dm().sm()}},{key:"zoom",get:function(){return this.gv.getZoom()}},{key:"tx",get:function(){return this.gv.tx()}},{key:"ty",get:function(){return this.gv.ty()}},{key:"disabled",get:function(){return!this.editor.editable||this._disabled},set:function(S){this._disabled=S}}]),q}(ht.graph.Interactor),OZ=function(S){function q(W,Z,z){return QW(this,q),DW(this,S.call(this,W,Z,z))}return uW(q,S),q.prototype.tearDown=function(){S.prototype.tearDown.call(this),this.node=this.p1=this.p2=null},q.prototype.$48$=function(S){this.node?this.remove(this.node):this.editView.$4$("edit")},q.prototype.handle_mousedown=function(S){this.handle_touchstart(S)},q.prototype.handle_touchstart=function(S){WS(S),m(S)&&(this.gv.setFocus(S),this.p1=this.lp(S),this.startDragging(S))},q.prototype.handleWindowMouseMove=function(S){this.handleWindowTouchMove(S)},q.prototype.handleWindowMouseUp=function(S){this.handleWindowTouchEnd(S)},q.prototype.handleWindowTouchMove=function(S){if(WS(S),this.p1){this.p2=this.lp(S);var q=c(this.p1,this.p2);if(this.node)this.node.setRect(q);else{if(!q.width||!q.height)return;this.beginTransaction(),this.createNode(q,!1)}}},q.prototype.handleWindowTouchEnd=function(S){if(WS(S),this.endTransaction(),!this.node&&this.p1&&this.createNode({x:this.p1.x-25,y:this.p1.y-25,width:50,height:50},!0),this.node){var q="symbol"===this.editView.type?"compCreated":"dataCreated",W={data:this.node};this.editor.fireViewEvent(this.editView,q,W,!1)}jW.config.continuousCreating?this.node=this.p1=this.p2=null:this.editView.$4$("edit")},q.prototype.createNode=function(S,q){VS(this.type)?this.node=this.type(S,q):this.node=new this.clazz,q?this.node.setPosition(S.x+S.width/2,S.y+S.height/2):this.node.setRect(S),this.node.setParent(this.editView.graphView.getCurrentSubGraph()),this.dm.add(this.node),this.dm.sm().ss(this.node),this.editView.graphView.setFocus()},q.prototype.$0$=function(S){this.node&&this.drawRect(S,this.node.getRect(),jW.config.color_data_border)},q}(CZ),eZ=function(S){function q(W,Z,z){return QW(this,q),DW(this,S.call(this,W,Z,z))}return uW(q,S),q.prototype.tearDown=function(){S.prototype.tearDown.call(this),this.draggingPoint=this.n1=this.n2=null},q.prototype.$48$=function(S){this.n1?(this.draggingPoint=this.n1=this.n2=null,this.editView.validateCanvas()):this.editView.$4$("edit")},q.prototype.drawAttachPoints=function(S,q,W){var Z=this,z=this.gv.getAttachPoints(q);z&&z.forEach(function(z,k){var Q=z.x,U=z.y,u=z.offsetX,D=z.offsetY;k===W?Z.drawDiamond(S,q.getAttachPosition(Q,U,u,D),jW.config.color_select,jW.config.color_select,6):Z.drawDiamond(S,q.getAttachPosition(Q,U,u,D),jW.config.color_select,jW.config.color_light)})},q.prototype.drawCurve=function(S,q,W){var Z=this.gv.getEditInteractor();if(!Z)return null;var z=Z.getSubModule("Curve");if(!z)return null;z.drawEdgeHostHighlight(S,q,W),this.editView.validateCanvasLater()},q.prototype.$0$=function(S){if(this.n1&&(this.n1 instanceof ht.Edge?this.drawCurve(S,this.n1,this.edgePosition1):(this.drawRect(S,this.gv.getNodeRect(this.n1),jW.config.color_data_border),this.drawAttachPoints(S,this.n1,this.attachIndex1)),this.draggingPoint)){var q=void 0,W=void 0;q=this.n1 instanceof ht.Edge?this.edgePosition1.point:this.attachIndex1||0===this.attachIndex1?this.getAttachPosition(this.n1,this.attachIndex1):this.n1.p(),this.n2 instanceof ht.Edge?W=this.edgePosition2.point:this.n2&&(this.attachIndex2||0===this.attachIndex2)&&(W=this.getAttachPosition(this.n2,this.attachIndex2)),this.drawLine(S,q,W||this.draggingPoint,jW.config.color_data_border)}if(this.n2)if(this.n2 instanceof ht.Edge)this.drawCurve(S,this.n2,this.edgePosition2);else{var Z=this.gv.getNodeRect(this.n2);this.n1!==this.n2&&(this.drawRect(S,Z,jW.config.color_data_border),this.drawAttachPoints(S,this.n2,this.attachIndex2));var z=this.toPoint({x:Z.x,y:Z.y});S.beginPath(),S.moveTo(z.x,z.y-15-3),S.lineTo(z.x+10,z.y-15-3),S.lineTo(z.x+10,z.y-3),S.lineTo(z.x+5,z.y-7-3),S.moveTo(z.x+10,z.y-3),S.lineTo(z.x+15,z.y-7-3),S.lineWidth=1,S.strokeStyle=jW.config.color_data_border,S.stroke()}},q.prototype.handle_mousemove=function(S){var q=this;if(WS(S),!this.draggingPoint){var W=this.getDataAt(S,function(S){return q.gv.isSourceTargetEditable(null,S)});if(W instanceof ht.Edge)this.edgePosition1=this.gv.calculateEdgePosition(W,this.lp(S));else{var Z=this.attachIndex1;if(W){var z=this.gv.calculateAttachPoint(W,this.lp(S));this.attachIndex1=z?z.index:null}else this.attachIndex1=null;if(W===this.n1&&Z===this.attachIndex1)return}this.n1=W,this.editView.validateCanvas()}},q.prototype.handle_mousedown=function(S){this.handle_touchstart(S)},q.prototype.handle_touchstart=function(S){var q=this;WS(S),m(S)&&(this.gv.setFocus(S),this.draggingPoint||(this.n1=this.getDataAt(S,function(S){return q.gv.isSourceTargetEditable(null,S)}),this.n1&&(this.draggingPoint=this.lp(S),this.startDragging(S))))},q.prototype.handleWindowMouseMove=function(S){this.handleWindowTouchMove(S)},q.prototype.handleWindowMouseUp=function(S){this.handleWindowTouchEnd(S)},q.prototype.handleWindowTouchMove=function(S){var q=this,W=this.getDataAt(S,function(S){return q.gv.isSourceTargetEditable(null,S,!0)});if(this.draggingPoint=this.lp(S),this.autoScroll(S),jW.config.edgeLoop||this.n1!==W){if(this.n2=W,W)if(W instanceof ht.Edge)this.edgePosition2=this.gv.calculateEdgePosition(W,this.lp(S));else{var Z=this.gv.calculateAttachPoint(W,this.lp(S));this.attachIndex2=Z?Z.index:null}}else this.attachIndex2=null,this.edgePosition2=null;this.editView.validateCanvas()},q.prototype.handleWindowTouchEnd=function(S){if(this.n1&&this.n2){var q=void 0;NS(this.type)?(q=new this.clazz(this.n1,this.n2),q.s("edge.type",this.type)):q=VS(this.type)?this.type(this.n1,this.n2):new this.clazz(this.n1,this.n2);var W=void 0,Z=void 0;if(this.n1 instanceof ht.Edge)void 0!==this.edgePosition1.index?q.setStyle("edge.source.index",this.edgePosition1.index):void 0!==this.edgePosition1.percent&&q.setStyle("edge.source.percent",this.edgePosition1.percent);else if(W=this.getAttachPoint(this.n1,this.attachIndex1)){var z=W,k=z.x,Q=z.y,U=z.offsetX,u=z.offsetY;q.s({"edge.source.anchor.x":k,"edge.source.anchor.y":Q,"edge.source.offset.x":U,"edge.source.offset.y":u})}if(this.n2 instanceof ht.Edge)void 0!==this.edgePosition2.index?q.setStyle("edge.target.index",this.edgePosition2.index):void 0!==this.edgePosition2.percent&&q.setStyle("edge.target.percent",this.edgePosition2.percent);else if(Z=this.getAttachPoint(this.n2,this.attachIndex2)){var D=Z,G=D.x,b=D.y,v=D.offsetX,j=D.offsetY;q.s({"edge.target.anchor.x":G,"edge.target.anchor.y":b,"edge.target.offset.x":v,"edge.target.offset.y":j})}(W||Z)&&q.s("edge.offset",0),this.add(q),jW.config.continuousCreating||this.editView.$4$("edit")}this.draggingPoint=this.n1=this.n2=null,this.editView.validateCanvas()},q.prototype.getAttachPoint=function(S,q){if(null===q||void 0===q)return null;var W=this.gv.getAttachPoints(S);return W&&0!==W.length?W[q]:null},q.prototype.getAttachPosition=function(S,q){var W=this.getAttachPoint(S,q),Z=W.x,z=W.y,k=W.offsetX,Q=W.offsetY;return S.getAttachPosition(Z,z,k,Q)},q}(CZ),LZ=function(S){function q(W,Z,z,k){QW(this,q);var Q=DW(this,S.call(this,W,Z,z));return Q.fill=k,Q}return uW(q,S),q.prototype.setUp=function(){S.prototype.setUp.call(this),this.shapeHelper.reset()},q.prototype.tearDown=function(){S.prototype.tearDown.call(this)},q.prototype.$48$=function(S){var q=this.shapeHelper;q.isEditing3d()||(q.isBreak?this.createShape():(q.preCtrl=null,q.isBreak=!0,this.editView.validateCanvas()))},q.prototype.createShape=function(){var S=this.shapeHelper,q=S.points,W=S.segments,z=S.closePath;if(q.length>1){var k=Z(q),Q=void 0;VS(this.type)?Q=this.type(k,W):(Q=new this.clazz,Q.setPoints(k),Q.setSegments(W)),z&&Q.setClosePath&&Q.setClosePath(!0),this.add(Q)}this.editView.$4$("edit"),this.editor.pointsEditingMode=!0},q.prototype.handle_mousedown=function(S){this.handle_touchstart(S)},q.prototype.isCloseStart=function(S){var q=this.shapeHelper.points,W=q[0];return!!W&&y(W,this.lp(S))<5/this.gv.getZoom()},q.prototype.handle_touchstart=function(S){this.shapeHelper.setEditing3d(!1);var q=this.shapeHelper,W=q.points,Z=q.segments,z=q.isBreak,k=q.preCtrl;if(WS(S),m(S)){if(this.gv.setFocus(S),t(S))this.createShape();else{if(this.isCloseStart(S))return this.shapeHelper.closePath=!0,void this.createShape();var Q=this.judgeNextPoint(S,!0);if(W.length){var U=W[W.length-1];if(Math.abs(U.x-Q.x)<.01&&Math.abs(U.y-Q.y)<.01)return}k?(W.push(k),W.push(Q),W.push(Q),Z.push(4),this.shapeHelper.preCtrl=null):(z?(Z.push(1),this.shapeHelper.isBreak=!1):Z.push(W.length>0?2:1),W.push(Q)),this.shapeHelper.nextPoint=this.lp(S),this.editView.validateCanvas()}this.shapeHelper.downPoint=this.lp(S),this.startDragging(S),this._dragging=!0}},q.prototype.judgeNextPoint=function(S,q){var W=this.shapeHelper,Z=W.points,z=W.isBreak,k=this.lp(S);if(this._dragging||z&&!q)return null;if(ht.Default.isShiftDown()&&Z.length>0){var Q=Z[Z.length-1],U=k.x-Q.x,u=k.y-Q.y,D=Math.atan2(u,U),G=ht.Default.getDistance(Q,k),b=D%(Math.PI/4);return D-=b,Math.abs(b)>Math.PI/8&&(b>0?D+=Math.PI/4:D-=Math.PI/4),{x:Q.x+Math.cos(D)*G,y:Q.y+Math.sin(D)*G}}var v=this.gv.getEditInteractor(),j=v.gridGuide.findClosest(k);return j&&(j.x&&(k.x+=j.x),j.y&&(k.y+=j.y)),k},q.prototype.handle_mousemove=function(S){this.shapeHelper.nextPoint=this.judgeNextPoint(S),this.editView.validateCanvas()},q.prototype.handle_touchend=function(S){},q.prototype.handle_mouseup=function(S){this.handle_touchend(S)},q.prototype.handleWindowTouchMove=function(S){return this.handleWindowMouseMove(S)},q.prototype.updateCtrl=function(S){var q=this.shapeHelper,W=q.points,Z=q.segments,z=q.downPoint,k=W.length,Q=W[k-1],U=this.lp(S),u=this.gv.getZoom(),D=ht.Default.getDistance(z,U),G=Z[Z.length-1];if(D*u>5){if(ht.Default.isShiftDown()){var b=Math.abs;b(Q.x-U.x)>=b(Q.y-U.y)?U.y=Q.y:U.x=Q.x}else{var v=this.gv.getEditInteractor(),j=v.gridGuide.findClosest(U);j&&(j.x&&(U.x+=j.x),j.y&&(U.y+=j.y))}var i={x:2*Q.x-U.x,y:2*Q.y-U.y};4===G?W[k-2]=i:1!==G&&(Z.pop(),Z.push(4),W.splice(k-1,0,i),W.push(W[k-1])),this.shapeHelper.preCtrl=U}else 4===G&&(W[k-2]=W[k-1],this.shapeHelper.preCtrl=null)},q.prototype.handleWindowMouseMove=function(S){0!==this.shapeHelper.points.length&&(this.updateCtrl(S),this.editView.validateCanvas())},q.prototype.handleWindowTouchEnd=function(S){return this.handleWindowMouseUp(S)},q.prototype.handleWindowMouseUp=function(S){0!==this.shapeHelper.points.length&&(this._dragging=!1,this.updateCtrl(S),this.shapeHelper.nextPoint=this.judgeNextPoint(S,!0))},q.prototype.$0$=function(S){var q=this.shapeHelper,W=q.points,Z=q.segments,z=(q.isBreak,q.preCtrl),k=(q.downPoint,q.nextPoint),Q=[];S.beginPath();for(var U=0,u=void 0,D=void 0,G=void 0,b=0;b<Z.length;b++){var v=Z[b];1===v?(u=this.toPoint(W[U++]),S.moveTo(u.x,u.y)):2===v?(u=this.toPoint(W[U++]),S.lineTo(u.x,u.y)):3===v?(u=this.toPoint(W[U++]),D=this.toPoint(W[U++]),S.quadraticCurveTo(u.x,u.y,D.x,D.y)):4===v?(u=this.toPoint(W[U++]),D=this.toPoint(W[U++]),G=this.toPoint(W[U++]),S.bezierCurveTo(u.x,u.y,D.x,D.y,G.x,G.y)):5===v&&S.closePath(),Q.push(W[U-1])}if(k)if(z)u=this.toPoint(z),D=this.toPoint(k),G=this.toPoint(k),S.bezierCurveTo(u.x,u.y,D.x,D.y,G.x,G.y);else{var j=this.toPoint(k);S.lineTo(j.x,j.y)}if(S.strokeStyle=jW.config.color_data_border,S.lineWidth=1,S.stroke(),this.fill&&(S.fillStyle=jW.config.color_transparent,S.fill()),this.drawPoints(S,Q,4,jW.config.color_data_border,jW.config.color_data_background),z){var i=W[W.length-1],n=this.gv.getZoom(),P=3/n,R=6/n,_={x:2*i.x-z.x,y:2*i.y-z.y};this.drawLine(S,z,_,jW.config.color_data_border),this.drawRect(S,{x:_.x-P,y:_.y-P,width:R,height:R},jW.config.color_data_border,jW.config.color_data_background),this.drawRect(S,{x:z.x-P,y:z.y-P,width:R,height:R},jW.config.color_data_border,jW.config.color_data_background)}},UW(q,[{key:"shapeHelper",get:function(){return this.editor.shapeHelper}}]),q}(CZ),$Z=function(S){function q(W,Z,z,k,Q,U,u,D){QW(this,q);var G=DW(this,S.call(this,W,Z,NZ,"display",U,u,D));G.displayTree=G.list=new(Q||kZ)(G),G.dm.setHierarchicalRendering(!0),G.dm.enableHistoryManager(jW.config.maxUndoRedoSteps);var b=W.getFileNode(z);return G.editable=!b||!1!==b.a("editable"),U||(z?k||G.editor.fireEvent("displayViewOpening",{displayView:G,url:z}):G.editor.fireEvent("displayViewCreated",{displayView:G,json:k})),jW.config.standaloneViewCounter&&G.initIdCounter&&G.initIdCounter(),G.parse(z,k),G.dirty=!1,G}return uW(q,S),q.prototype.onClosed=function(){S.prototype.onClosed.call(this),this.displayTree.onClosed()},q.prototype.handleDataModelChanged=function(S){"add"!==S.kind||this.dm.isDeserializing()||ht.Default.isIsolating()||S.data.setLayer(this.editor.currentLayer),this.dirty=!0},q.prototype.clear=function(){this.sceneView||(this.dm.beginTransaction(),S.prototype.clear.call(this),this.dm.a("connectActionType",jW.config.displayConnectActionType),this.dm.a("anchorEnabled",jW.config.displayAnchorEnabled),this.dm.a("guideLineEnabled",jW.config.displayGuideLineEnabled),this.dm.a("highlightEnabled",jW.config.displayHighlightEnabled),this.dm.a("highlightColor",jW.config.displayHighlightColor),this.dm.a("highlightBorderWidth",jW.config.displayHighlightBorderWidth),this.dm.a("highlightBorderPattern",jW.config.displayHighlightBorderPattern),this.dm.endTransaction())},q.prototype.resetGrid=function(){this.sceneView||(this.dm.beginTransaction(),this.dm.a("rulerEnabled",jW.config.displayRulerEnabled),this.dm.a("gridEnabled",jW.config.displayGridEnabled),this.dm.a("gridBlockSize",jW.config.displayGridBlockSize),this.dm.a("gridThickLinesEvery",jW.config.displayGridThickLinesEvery),this.dm.a("gridThickColor",jW.config.displayGridThickColor),this.dm.a("gridLightColor",jW.config.displayGridLightColor),this.dm.a("gridAngle",jW.config.displayGridAngle),this.dm.a("gridRotation",jW.config.displayGridRotation),this.dm.a("gridZoomThreshold",jW.config.displayGridZoomThreshold),this.dm.a("alignmentGuideEnabled",jW.config.displayGridAlignmentGuideEnabled),this.dm.a("alignmentGuideColor",jW.config.displayGridAlignmentGuideColor),this.dm.endTransaction())},q.prototype.updateImpl=function(S,q){var W=this,z=g(S);if(this.clear(),this.dm.deserialize(z,void 0,{setId:jW.config.setId,disableInit:!0,disableOnPreDeserialize:!0,disableOnPostDeserialize:!0}),this.dirty=!!q,!q&&jW.config.fitContentForDisplayView)if(z.contentRect){var k=Z(z.contentRect);ht.Default.grow(k,jW.config.fitPadding),this.graphView.getWidth()&&this.graphView.getHeight()?this.graphView.fitRect(k,jW.config.animate):setTimeout(function(){W.graphView.fitRect(k,jW.config.animate)},600)}else this.graphView.fitContent(jW.config.animate,jW.config.fitPadding);return z},q.prototype.createInteractor=function(S,q,W){var Z=new S;return Z instanceof ht.Shape?new LZ(this.tab,null,function(W,Z){var z=new S;return z.setPoints(W),z.setSegments(Z),q&&q(z),z},W):Z instanceof ht.Edge?new eZ(this.tab,null,function(S,W){var Z=new ht.Edge(S,W);return q&&q(Z),Z}):Z instanceof ht.Node?new OZ(this.tab,null,function(W,Z){var z=new S;return q&&q(z,W,Z),z}):void 0},UW(q,[{key:"content",get:function(){var S=this.dm,q=S.toJSON();q.modified=(new Date).toString(),S.a("connectActionType")===jW.config.displayConnectActionType&&delete q.a.connectActionType,S.a("rulerEnabled")===jW.config.displayRulerEnabled&&delete q.a.rulerEnabled,S.a("gridEnabled")===jW.config.displayGridEnabled&&delete q.a.gridEnabled,S.a("gridBlockSize")===jW.config.displayGridBlockSize&&delete q.a.gridBlockSize,S.a("gridThickLinesEvery")===jW.config.displayGridThickLinesEvery&&delete q.a.gridThickLinesEvery,S.a("gridThickColor")===jW.config.displayGridThickColor&&delete q.a.gridThickColor,S.a("gridLightColor")===jW.config.displayGridLightColor&&delete q.a.gridLightColor,S.a("gridAngle")===jW.config.displayGridAngle&&delete q.a.gridAngle,S.a("gridRotation")===jW.config.displayGridRotation&&delete q.a.gridRotation,S.a("gridZoomThreshold")===jW.config.displayGridZoomThreshold&&delete q.a.gridZoomThreshold,S.a("anchorEnabled")===jW.config.displayAnchorEnabled&&delete q.a.anchorEnabled,S.a("guideLineEnabled")===jW.config.displayGuideLineEnabled&&delete q.a.guideLineEnabled,S.a("highlightEnabled")===jW.config.displayHighlightEnabled&&delete q.a.highlightEnabled,S.a("highlightColor")===jW.config.displayHighlightColor&&delete q.a.highlightColor,S.a("highlightBorderWidth")===jW.config.displayHighlightBorderWidth&&delete q.a.highlightBorderWidth,S.a("highlightBorderPattern")===jW.config.displayHighlightBorderPattern&&delete q.a.highlightBorderPattern,S.a("xAlignmentGuides")&&!S.a("xAlignmentGuides").length&&delete q.a.xAlignmentGuides,S.a("yAlignmentGuides")&&!S.a("yAlignmentGuides").length&&delete q.a.yAlignmentGuides,S.a("alignmentGuideEnabled")===jW.config.displayGridAlignmentGuideEnabled&&delete q.a.alignmentGuideEnabled,S.a("alignmentGuideColor")===jW.config.displayGridAlignmentGuideColor&&delete q.a.alignmentGuideColor;var W=this.graphView.getContentRect();return S.a("width")>0&&S.a("height")>0&&(q.contentRect={x:0,y:0,width:S.a("width"),height:S.a("height")}),S.size()&&W&&W.width&&W.height&&(q.contentRect=W),q}}]),q}(VZ),yZ=function(S){function q(W){return QW(this,q),DW(this,S.call(this,W))}return uW(q,S),q.prototype.setDataModel=function(S){var q=this,W=q._dataModel,Z=q._selectionModel;W!==S&&(W&&(W.umm(q.handleDataModelChange,q),W.umd(q.handleDataPropertyChange,q),W.removeIndexChangeListener(q.handleIndexChange,q),Z||W.sm().ums(q.handleSelectionChange,q)),q._dataModel=S,S.mm(q.handleDataModelChange,q),S.md(q.handleDataPropertyChange,q),S.addIndexChangeListener(q.handleIndexChange,q),Z?Z._setDataModel(S):S.sm().ms(q.handleSelectionChange,q),q.fp("dataModel",W,S))},q.prototype.handleIndexChange=function(S){this.ivm()},q.prototype.handleDataPropertyChange=function(S){this.invalidateData(S.data)},q.prototype.validateModel=function(){var S=this;S._rows.clear(),S._rowMap={};var q=S._rows=S._dataModel.toDatas(S.isVisible,S),W=0,Z=S.getCurrentSortFunc(),z=q.size();for(Z&&q.sort(Z);W<z;W++)S._rowMap[q.get(W)._id]=W},q}(wW),cZ=function(S){function q(W,Z){var z=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];QW(this,q);var k=DW(this,S.call(this,Z));return k.editor=W,k.editable=z,k.addTopPainter(k.drawDNDState.bind(k)),k}return uW(q,S),q.prototype.getLabelColor=function(q){return q!==this.draggingData||this.isSelected(q)?q.s("2d.visible")&&q.s("3d.visible")?S.prototype.getLabelColor.call(this,q):jW.config.color_disabled:jW.config.color_select},q.prototype.isEditable=function(S){return this.editable},q.prototype.handleDelete=function(){this.editable&&this.removeSelection()},q.prototype.handleDataDoubleSelect=function(S,q){if(this.isEditable(q)){var W=this.getIcon(q)?this.getIndent():0;this.lp(S).x>W&&this.beginEditing(q)}},q.prototype.rename=function(S,q){S.setName(q)},q.prototype.isDroppable=function(S,q){return!1},q.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},q.prototype._endDrag=function(S,q){},q.prototype._endCrossDrag=function(S,q){},
q.prototype.drawDNDState=function(S){jW.config.drawDNDState?S.drawDNDState=!0:(jW.config.texureImage3D&&(S.texureImage3D=!0),S.texureImage2D=!0);var q=void 0;if(this._dragInfo&&this._dragInfo.inView?q=this._dragInfo:this._crossDragInfo&&(q=this._crossDragInfo),q){var W=this.getWidth(),Z=(this.getRowHeight(),q.type,jW.config.color_select_dark);if(q.refData){var z=q.y;S.beginPath(),S.arc(4,z,3,0,2*Math.PI,!0),S.moveTo(7,z),S.lineTo(W,z),S.lineWidth=2,S.strokeStyle=Z,S.stroke()}else{var k=this.getViewRect();h(S,Z,k.x,k.y,k.width,k.height,2)}}},q.prototype._dragging=function(S,q){var W=this.getRowHeight(),Z=this.lp(S),z=Z.y/W,k=Math.floor(z);k>this.getRowSize()-1||k<0?(q.refData=null,q.type=null,q.parent=null):(q.refData=this.getRowDatas().get(k),Z.y-k*W<.5*W?(q.type="up",q.y=k*W):(q.type="down",q.y=(k+1)*W)),this.autoScroll(S),this.redraw()},q.prototype.$1$=function(){var S="";if(this.draggingData&&(S=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var q=this.sm().size();S+=q>1?" (+"+q+") ":""}return S},q.prototype.handleDragAndDrop=function(S,q){if(this.editable){if("prepare"===q)return void this._clearDragInfo();"begin"===q&&(this._dragInfo={tip:this.$1$(),view:this});var W=this._dragInfo;if(W){var Z=this.editor.dnd;if("begin"===q||"between"===q){return this.getView().contains(O(S))?(W.inView=!0,this._dragging(S,W),Z.clearDropView(S,W)):(W.inView&&this.redraw(),W.inView=!1,Z.crossDrag(S,W)),void Z.showTip(W.tip,S)}return"end"===q?(W.inView?this._endDrag(S,W):Z.crossDrop(S,W),void this._clearDragInfo()):"cancel"===q?(W.inView||Z.crossCancel(S,W),void this._clearDragInfo()):void 0}}},q.prototype.handleCrossDrag=function(S,q,W){if(this.editable)return"exit"===q||"cancel"===q?(this._crossDragInfo=null,void this.redraw()):"enter"===q||"over"===q?(this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(S,this._crossDragInfo)):"drop"===q?(this._endCrossDrag(S,W),this._crossDragInfo=null,void this.redraw()):void 0},q.prototype.beginEditing=function(S){var q=this;this.cancelEditing(),this.makeVisible(S),this.validate();var W=this.getIcon(S)?this.getIndent():0,Z=this.ty()+this.getRowIndex(S)*this.getRowHeight(),z=Math.max(1,this.getWidth()-W),k=this.getRowHeight();this._currentEditor=new ht.widget.TextField,this._currentEditor.data=S;var Q=this._currentEditor.getElement(),U=this.getLabel(S);Q.value=null==U?"":U,Q.onblur=function(S){q.endEditing()},Q.onkeydown=function(S){K(S)?q.endEditing():d(S)&&q.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),o(this._currentEditor,W,Z,z,k),this._currentEditor.setFocus(),ht.Default.callLater(Q.select,Q)},q.prototype.endEditing=function(){var S=this._currentEditor;S&&(this.rename(S.data,S.getValue()),delete this._currentEditor,M(S.getView()),this.redraw())},q.prototype.cancelEditing=function(){var S=this._currentEditor;S&&(delete this._currentEditor,M(S.getView()),this.redraw())},q}(yZ),XZ=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this,W.editor,W.dm));return Z.symbolView=W,Z.graphView=W.graphView,Z.nodeIcon=HS(Z),Z.initMenu(),Z.initStudio&&Z.initStudio(),W.dm.addDataPropertyChangeListener(function(S){S.data.editorIcon=null}),Z}return uW(q,S),q.prototype.getToolTip=function(S){return jW.config.getToolTip(S,this)},q.prototype.onDataDoubleClicked=function(S,q){this.editor.fitSelection()},q.prototype.onPropertyChanged=function(q){"filter"===q.property&&this.ivm(),S.prototype.onPropertyChanged.call(this,q)},q.prototype.handleDataPropertyChange=function(q){!this._filter||"displayName"!==q.property&&"s:text"!==q.property&&"s:type"!==q.property&&"s:image"!==q.property?S.prototype.handleDataPropertyChange.call(this,q):this.ivm()},q.prototype.isVisible=function(S){if("__renderHTML__"===S.getTag())return!1;if(!this._filter)return!0;var q=this.getVisibleFunc();if(q&&!q(S))return!1;if(jW.config.symbolListVisibleFunc)return jW.config.symbolListVisibleFunc(S,this._filter);var W=this.getLabel(S),Z=(this._filter+"").toLowerCase();return null!=W&&(W=(W+"").toLowerCase(),W.indexOf(Z)>=0)},q.prototype.validate=function(){this.graphView.validate(),S.prototype.validate.call(this)},q.prototype.validateModel=function(){var q=this;S.prototype.validateModel.call(this),jW.config.filterSymbolViewEnabled&&this.graphView.setVisibleFunc(function(S){return q.isVisible(S)})},q.prototype.getIcon=function(S){return S instanceof MW?"editor.restore.state":S instanceof ht.Text?S.getIcon():S instanceof ht.Shape?(S.editorIcon||(S.editorIcon=hS(S)),S.editorIcon):S instanceof ht.Node?this.nodeIcon:null},q.prototype.isDroppable=function(S,q){return!1},q.prototype._endCrossDrag=function(S,q){},q.prototype._endDrag=function(S,q){var W=this;this.editor.beginTransaction();var Z=q.type,z=q.refData;if(this.isSelected(this.draggingData)){var k=this.getRowOrderSelection();"down"===Z&&k.reverse(),k.each(function(S){W._dropData(S,Z,z)})}else this._dropData(this.draggingData,Z,z),this.sm().ss(this.draggingData);this.editor.endTransaction()},q.prototype._dropData=function(S,q,W){if(W){var Z=this.dm().getDatas(),z=Z.indexOf(W);"down"===q&&z++,Z.indexOf(S)<z&&z--,this.dm().moveToIndex(S,z)}else this.dm().bringToFront(S)},q.prototype.rename=function(S,q){S.setDisplayName(q)},q.prototype.initMenu=function(){this.menu=new AW;var S=[];this.initMenuItems(S),this.menu.setItems(S),this.menu.addTo(this.getView()),this.editor.menus.push(this.menu)},q.prototype.onClosed=function(){D(this.editor.menus,this.menu)},q.prototype.initMenuItems=function(S){var q=this;S.push.apply(S,[{id:"copy",label:k("editor.copy"),action:function(){q.editor.copy()},visible:function(){return!!q.editor.ld}},{id:"paste",label:k("editor.paste"),action:function(){q.editor.paste()},visible:function(){return q.editable&&q.editor.hasCopyInfo()}},{id:"delete",label:k("editor.delete"),action:function(){q.editor.delete()},visible:function(){return q.editable&&!!q.editor.ld}},"separator",{id:"bringToFront",label:k("editor.bringtofront"),action:function(){q.editor.bringToFront()},visible:function(){return q.editable&&!!q.editor.ld}},{id:"bringForward",label:k("editor.bringforward"),action:function(){q.editor.bringForward()},visible:function(){return q.editable&&!!q.editor.ld}},{id:"sendBackward",label:k("editor.sendbackward"),action:function(){q.editor.sendBackward()},visible:function(){return q.editable&&!!q.editor.ld}},{id:"sendToBack",label:k("editor.sendtoback"),action:function(){q.editor.sendToBack()},visible:function(){return q.editable&&!!q.editor.ld}}])},UW(q,[{key:"editable",get:function(){return this.editor.editable},set:function(S){}}]),q}(cZ);SS(XZ,{ms_ac:["filter"]});var fZ=function(S){function q(W){return QW(this,q),DW(this,S.call(this,W))}return uW(q,S),q.prototype.handleDataModelChange=function(q){S.prototype.handleDataModelChange.call(this,q),this.editor&&this.editor.fireViewEvent(this.editView,"DataModelChanged",{event:q})},q.prototype.handleDataModelPropertyChange=function(q){S.prototype.handleDataModelPropertyChange.call(this,q),this.editor&&this.editor.fireViewEvent(this.editView,"DataModelPropertyChanged",{event:q})},q.prototype.handleDataPropertyChange=function(q){S.prototype.handleDataPropertyChange.call(this,q),this.editor&&this.editor.fireViewEvent(this.editView,"DataPropertyChanged",{event:q})},q.prototype.isDroppable=function(S,q){if(this.editor.editable)return!!q.view.isDroppableToSymbolView},q.prototype.isPixelPerfect=function(S){return!0},q.prototype.initMenuItems=function(q){this.$56$(q),this.$55$(q),S.prototype.initMenuItems.call(this,q)},q.prototype.isVisible=function(q){var W=this.editor.symbolStatePane.currentState,Z=this.getState(q);return(void 0===Z||Z===W)&&S.prototype.isVisible.call(this,q)},q.prototype.getState=function(S){var q=S.s("state");return q||this.editor.symbolStatePane.currentState},q}(dZ),JZ=function(S){function q(W,Z,z){QW(this,q);var k=DW(this,S.call(this));return k.setIcon("editor.func"),k.setImage("editor.func"),k.parse(W,Z,z),k}return uW(q,S),q.prototype.toLabel=function(){return this.getDisplayName()||k("editor.comptype.func")},q.prototype.getClass=function(){return q},q.prototype.parse=function(S,q,W){S&&(this.a("type",S.type),TS(this,S,q,W))},q.prototype.toJSON=function(){var S={};return S.type=this.a("type"),aS(this,S),S},UW(q,[{key:"compType",get:function(){return"function"}}]),q}(ht.Node),gZ=function(S){function q(W,Z,z,k){QW(this,q);var Q=DW(this,S.call(this));return Q.newAdded=k,Q.defaultValueMap={},Q.parse(W,Z,z),Q}return uW(q,S),q.prototype.toLabel=function(){return this.getDisplayName()||this.s("type")||k("editor.comptype.comp")},q.prototype.getClass=function(){return q},q.prototype.getStyle=function(q,W){var Z=S.prototype.getStyle.call(this,q,W);return void 0===Z&&(Z=this.defaultValueMap[q]),Z},q.prototype.$60$=function(S){this.properties&&(this.properties=null),this.disableDirty=!0,this.defaultValueMap={};var q=this.s("type"),W=ht.Default.getCompType(q);if(W){this.newAdded&&W.events&&this._updateEvents(W.events),this.newAdded=void 0,this.$59$=null;var Z={cache:W,width:{value:100,isSafeFunc:!0,func:function(S){return S._width}},height:{value:100,isSafeFunc:!0,func:function(S){return S._height}},comps:[{type:{func:function(S){return S.compType},isSafeFunc:!0}}]};if(!W.width||this._width>0||this.setWidth(W.width),!W.height||this._height>0||this.setHeight(W.height),W.properties){this.properties=W.properties;for(var z in this.properties){var k=this.properties[z];Z.comps[0][z]={func:"style@"+z},rS(this,z,S?S[z]:void 0,k.defaultValue),this.defaultValueMap[z]=k.defaultValue}}var Q=jW.config.customProperties.comp;Q&&Q.length&&Q.forEach(function(S){var q=S.property;Z.comps[0][q]={func:"style@"+q}}),this.setImage(Z),this.ivLater()}else this.$59$=S,"editor.comp"!==this.getImage()&&(this.setImage("editor.comp"),this.ivLater());this.disableDirty=!1},q.prototype.ivLater=function(){var S=this;ht.Default.callLater(function(){S.disableDirty=!0,S.iv(),S.disableDirty=!1})},q.prototype.onStyleChanged=function(q,W,Z){S.prototype.onStyleChanged.call(this,q,W,Z),"type"===q&&(W&&(this.newAdded=!0),this.$60$(this.parsingComp))},q.prototype.parse=function(S,q,W){S&&(this.parsingComp=S,TS(this,S,q,W),rS(this,"type",S.type),this.parsingComp=null)},q.prototype._updateEvents=function(S){var q=this;iW.forEach(function(S){return q.a(S,void 0)}),this.a(S)},q.prototype.toJSON=function(){var S={};if(cS(this,S,"type","type",void 0),aS(this,S),this.properties)for(var q in this.properties)cS(this,S,q,q,this.properties[q].defaultValue);return S},UW(q,[{key:"compType",get:function(){var S=this.s("type");return this.$59$?this.$60$(this.$59$):S&&ht.Default.getCompType(S)!==this.getImage().cache&&this.$60$(this.toJSON()),S}}]),q}(ht.Node),TZ=function(S){function q(W,Z,z){QW(this,q);var k=DW(this,S.call(this));return k.s({border_color:jW.config.color_dark,border_width:1}),k.setImage("border_image"),k.parse(W,Z,z),k}return uW(q,S),q.prototype.getClass=function(){return q},q.prototype.toLabel=function(){return this.getDisplayName()||k("editor.comptype.border")},q.prototype.parse=function(S,q,W){S&&(rS(this,"type",S.type,"border"),rS(this,"border_color",S.color,jW.config.color_dark),rS(this,"border_width",S.width,1),TS(this,S,q,W))},q.prototype.toJSON=function(){var S={};return cS(this,S,"type","type",void 0),cS(this,S,"border_color","color",void 0),cS(this,S,"border_width","width",void 0),aS(this,S),S},UW(q,[{key:"compType",get:function(){return this.s("type")}}]),q}(ht.Node),aZ=function(S){function q(W,Z,z){QW(this,q);var k=DW(this,S.call(this));return k.setSize(100,100),k.setImage("pieChart_image"),k.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.hollw":!1,"chart.start.angle":0,"chart.values":[],"chart.colors":void 0}),k.parse(W,Z,z),k}return uW(q,S),q.prototype.getClass=function(){return q},q.prototype.toLabel=function(){return this.getDisplayName()||k("editor.comptype.piechart")},q.prototype.parse=function(S,q,W){S&&(rS(this,"chart.type",S.type,"pieChart"),rS(this,"chart.label",S.label,!1),rS(this,"chart.label.color",S.labelColor,ht.Default.labelColor),rS(this,"chart.label.font",S.labelFont,ht.Default.labelFont),rS(this,"chart.hollow",S.hollow,!1),rS(this,"chart.start.angle",S.startAngle,0),rS(this,"chart.values",S.values,[]),rS(this,"chart.colors",S.colors,void 0),TS(this,S,q,W))},q.prototype.toJSON=function(){var S={};return cS(this,S,"chart.type","type",void 0),cS(this,S,"chart.label","label",!1),cS(this,S,"chart.label.color","labelColor",ht.Default.labelColor),cS(this,S,"chart.label.font","labelFont",ht.Default.labelFont),cS(this,S,"chart.hollow","hollow",!1),cS(this,S,"chart.start.angle","startAngle",0),cS(this,S,"chart.values","values",[]),cS(this,S,"chart.colors","colors",void 0),aS(this,S),S},UW(q,[{key:"compType",get:function(){return this.s("chart.type")}}]),q}(ht.Node),rZ=function(S){function q(W,Z,z){QW(this,q);var k=DW(this,S.call(this));return k.setSize(100,100),k.setImage("columnChart_image"),k.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.series":[],"chart.min.value":0,"chart.max.value":void 0}),k.parse(W,Z,z),k}return uW(q,S),q.prototype.getClass=function(){return q},q.prototype.toLabel=function(){return this.getDisplayName()||k("editor.comptype.columnchart")},q.prototype.parse=function(S,q,W){S&&(rS(this,"chart.type",S.type,void 0),rS(this,"chart.label",S.label,!1),rS(this,"chart.label.color",S.labelColor,ht.Default.labelColor),rS(this,"chart.label.font",S.labelFont,ht.Default.labelFont),rS(this,"chart.series",S.series,[]),rS(this,"chart.min.value",S.minValue,0),rS(this,"chart.max.value",S.maxValue,void 0),TS(this,S,q,W))},q.prototype.toJSON=function(){var S={};return cS(this,S,"chart.type","type",void 0),cS(this,S,"chart.label","label",!1),cS(this,S,"chart.label.color","labelColor",ht.Default.labelColor),cS(this,S,"chart.label.font","labelFont",ht.Default.labelFont),cS(this,S,"chart.series","series",[]),cS(this,S,"chart.min.value","minValue",0),cS(this,S,"chart.max.value","maxValue",void 0),aS(this,S),S},UW(q,[{key:"compType",get:function(){return this.s("chart.type")}}]),q}(ht.Node),oZ=function(S){function q(W,Z,z){QW(this,q);var k=DW(this,S.call(this));return k.setSize(100,100),k.setImage("lineChart_image"),k.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.series":[],"chart.min.value":0,"chart.max.value":void 0,"chart.line.point":!1,"chart.line.width":2,"chart.line.3d":!1}),k.parse(W,Z,z),k}return uW(q,S),q.prototype.getClass=function(){return q},q.prototype.toLabel=function(){return this.getDisplayName()||k("editor.comptype.linechart")},q.prototype.parse=function(S,q,W){S&&(rS(this,"chart.type",S.type,void 0),rS(this,"chart.label",S.label,!1),rS(this,"chart.label.color",S.labelColor,ht.Default.labelColor),rS(this,"chart.label.font",S.labelFont,ht.Default.labelFont),rS(this,"chart.series",S.series,[]),rS(this,"chart.min.value",S.minValue,0),rS(this,"chart.max.value",S.maxValue,void 0),rS(this,"chart.line.point",S.linePoint,!1),rS(this,"chart.line.width",S.lineWidth,2),rS(this,"chart.line.3d",S.line3d,!1),TS(this,S,q,W))},q.prototype.toJSON=function(){var S={};return cS(this,S,"chart.type","type",void 0),cS(this,S,"chart.label","label",!1),cS(this,S,"chart.label.color","labelColor",ht.Default.labelColor),cS(this,S,"chart.label.font","labelFont",ht.Default.labelFont),cS(this,S,"chart.series","series",[]),cS(this,S,"chart.min.value","minValue",0),cS(this,S,"chart.max.value","maxValue",void 0),cS(this,S,"chart.line.point","linePoint",!1),cS(this,S,"chart.line.width","lineWidth",2),cS(this,S,"chart.line.3d","line3d",!1),aS(this,S),S},UW(q,[{key:"compType",get:function(){return this.s("chart.type")}}]),q}(ht.Node),BZ={rect:TW,circle:TW,oval:TW,roundRect:TW,star:TW,triangle:TW,hexagon:TW,pentagon:TW,diamond:TW,rightTriangle:TW,parallelogram:TW,pentagram:TW,trapezoid:TW,polygon:TW,arc:TW,image:rW,shape:aW,text:oW,border:TZ,pieChart:aZ,oneDimensionalColumnChart:rZ,columnChart:rZ,percentageColumnChart:rZ,stackedColumnChart:rZ,lineChart:oZ,comp:gZ,clip:BW,restore:MW,endClip:MW};jW.toDatas=function(S,q){var W=[];return S.forEach(function(S){var Z=lq(S);if(Z){var z=Yq(Z),k=Aq(z,q);if(k){if(W.push(k),S.attribs){var Q={};S.attribs.forEach(function(S){var q=S.attr,W=Q[q]||0;Q[q]=W+1,W>0&&(q=q+"_"+W),k.a(q+".text",S.text);var Z=S.startPoint;(S.halign||S.valign)&&(Z=S.endPoint),k.a(q+".x",Z.x),k.a(q+".y",Z.y)})}}else W.push(null)}else W.push(null)}),W};var MZ=function(S){function q(W,Z,z,k,Q,U){QW(this,q);var u=DW(this,S.call(this,W,Z,fZ,"symbol",void 0,Q,U));u.graphView.vectorDataBindingDisabled=!0,u.graphView.getLabel=function(){return null},u.graphView.setVisibleFunc(function(S){return!(S instanceof MW)}),u.list=u.symbolList=new XZ(u),u.dm.a({name:void 0,comps:[],width:100,height:100,boundExtend:0,fitSize:!1,scrollable:!1,interactive:!1,disableSelectedBorder:!1,pixelPerfect:!0,clip:!1,visible:!0,color:void 0,blendMode:"multiply",opacity:1});var D=jW.config.customProperties.symbol;D&&D.length&&D.forEach(function(S){u.dm.a(S.property,S.defaultValue)}),u.dm.addIndexChangeListener(function(){u.dirty=!0}),u.dirty=!1,u.dm.enableHistoryManager(jW.config.maxUndoRedoSteps);var G=["a:renderHTML","a:width","a:height","f:dataBindings"];u.dm.mp(function(S){G.indexOf(S.property)>=0&&u.updateRenderNode()}),u.parse(z,k);var b=W.getFileNode(z);return u.editable=!b||!1!==b.a("editable"),z?k||u.editor.fireEvent("symbolViewOpening",{symbolView:u,url:z}):u.editor.fireEvent("symbolViewCreated",{symbolView:u,json:k}),u}return uW(q,S),q.prototype.clear=function(){this.dm.beginTransaction(),S.prototype.clear.call(this),this.dm.a("connectActionType",jW.config.symbolConnectActionType),this.dm.a("anchorEnabled",jW.config.symbolAnchorEnabled),this.dm.a("guideLineEnabled",jW.config.symbolGuideLineEnabled),this.dm.a("highlightEnabled",jW.config.symbolHighlightEnabled),this.dm.a("highlightColor",jW.config.symbolHighlightColor),this.dm.a("highlightBorderWidth",jW.config.symbolHighlightBorderWidth),this.dm.a("highlightBorderPattern",jW.config.symbolHighlightBorderPattern),this.dm.setAutoAdjustIndex(!1),this.dm.endTransaction()},q.prototype.resetGrid=function(){this.dm.beginTransaction(),this.dm.a("rulerEnabled",jW.config.symbolRulerEnabled),this.dm.a("gridEnabled",jW.config.symbolGridEnabled),this.dm.a("gridBlockSize",jW.config.symbolGridBlockSize),this.dm.a("gridThickLinesEvery",jW.config.symbolGridThickLinesEvery),this.dm.a("gridThickColor",jW.config.symbolGridThickColor),this.dm.a("gridLightColor",jW.config.symbolGridLightColor),this.dm.a("gridAngle",jW.config.symbolGridAngle),this.dm.a("gridRotation",jW.config.symbolGridRotation),this.dm.a("gridZoomThreshold",jW.config.symbolGridZoomThreshold),this.dm.a("alignmentGuideEnabled",jW.config.symbolGridAlignmentGuideEnabled),this.dm.a("alignmentGuideColor",jW.config.symbolGridAlignmentGuideColor),this.dm.endTransaction()},q.prototype.onClosed=function(){S.prototype.onClosed.call(this),this.list.onClosed()},q.prototype.updateImpl=function(S,q){var W=this,Z=this.dm,z=g(S),k=this.editor.symbolStatePane;k.symbolViewUpdating=!0,this.clear(),Z.setBackground(z.background),Z.a("previewURL",z.previewURL),Z.a("snapshotURL",z.snapshotURL),Z.dataBindings=z.dataBindings,this.attrObject=z.attrObject,Z.a("xAlignmentGuides",z.xAlignmentGuides),Z.a("yAlignmentGuides",z.yAlignmentGuides),null!=z.rulerEnabled&&Z.a("rulerEnabled",z.rulerEnabled),null!=z.gridEnabled&&Z.a("gridEnabled",z.gridEnabled),null!=z.gridBlockSize&&Z.a("gridBlockSize",z.gridBlockSize),null!=z.gridThickLinesEvery&&Z.a("gridThickLinesEvery",z.gridThickLinesEvery),null!=z.gridThickColor&&Z.a("gridThickColor",z.gridThickColor),null!=z.gridLightColor&&Z.a("gridLightColor",z.gridLightColor),null!=z.gridAngle&&Z.a("gridAngle",z.gridAngle),null!=z.gridRotation&&Z.a("gridRotation",z.gridRotation),null!=z.gridZoomThreshold&&Z.a("gridZoomThreshold",z.gridZoomThreshold),null!=z.anchorEnabled&&Z.a("anchorEnabled",z.anchorEnabled),null!=z.guideLineEnabled&&Z.a("guideLineEnabled",z.guideLineEnabled),null!=z.highlightEnabled&&Z.a("highlightEnabled",z.highlightEnabled),null!=z.highlightColor&&Z.a("highlightColor",z.highlightColor),null!=z.highlightBorderWidth&&Z.a("highlightBorderWidth",z.highlightBorderWidth),void 0!==z.highlightBorderPattern&&Z.a("highlightBorderPattern",z.highlightBorderPattern),void 0!==z.alignmentGuideEnabled&&Z.a("alignmentGuideEnabled",z.alignmentGuideEnabled),void 0!==z.alignmentGuideColor&&Z.a("alignmentGuideColor",z.alignmentGuideColor),z.hasOwnProperty("connectActionType")&&Z.a("connectActionType",z.connectActionType),iW.forEach(function(S){Z.a(S,z[S])}),Z.a({name:z.name,renderHTML:z.renderHTML,layoutAttach:z.layoutAttach,layoutProperties:z.layoutProperties,comps:wS(z.comps,[]),width:wS(z.width,100),height:wS(z.height,100),boundExtend:wS(z.boundExtend,0),fitSize:wS(z.fitSize,!1),scrollable:wS(z.scrollable,!1),interactive:wS(z.interactive,!1),disableSelectedBorder:wS(z.disableSelectedBorder,!1),pixelPerfect:wS(z.pixelPerfect,!0),clip:wS(z.clip,!1),visible:wS(z.visible,!0),color:wS(z.color,void 0),blendMode:wS(z.blendMode,"multiply"),opacity:wS(z.opacity,1),attachPoints:wS(z.attachPoints,void 0),attachStyle:wS(z.attachStyle,void 0),cacheRule:wS(z.cacheRule,!1),textureCache:wS(z.textureCache,!1),state:wS(z.state,void 0),stateEnum:wS(z.stateEnum,void 0),comps_func:sS(z.comps),width_func:sS(z.width),height_func:sS(z.height),fitSize_func:sS(z.fitSize),scrollable_func:sS(z.scrollable),interactive_func:sS(z.interactive),disableSelectedBorder_func:sS(z.disableSelectedBorder),pixelPerfect_func:sS(z.pixelPerfect),visible_func:sS(z.visible),color_func:sS(z.color),blendMode_func:sS(z.blendMode),opacity_func:sS(z.opacity),attachPoints_func:sS(z.attachPoints),attachStyle_func:sS(z.attachStyle),cacheRule_func:sS(z.cacheRule),textureCache_func:sS(z.textureCache),state_func:sS(z.state)});var Q=jW.config.customProperties.symbol;Q&&Q.length&&Q.forEach(function(S){Z.a(S.property,wS(z[S.property],S.defaultValue))}),Z.a("comps").forEach(function(S){lq(S,W)}),k.symbolViewUpdating=!1,this.dirty=!!q,!q&&jW.config.fitContentForSymbolView&&this.graphView.fitContent(jW.config.animate,jW.config.fitPadding),this.updateRenderNode(),k.updateTable()},q.prototype.updateRenderNode=function(){if(jW.SceneView){var S=this.dm,q=S.a("renderHTML"),W=S.getDataByTag("__renderHTML__");if(!q)return void(W&&W.removeFromDataModel());var Z={comps:[]};Z.renderHTML=q,Z.dataBindings=S.dataBindings,this.addValue(Z,"width"),this.addValue(Z,"height"),W||(W=new ht.Node,W.setTag("__renderHTML__"),W.s({"2d.selectable":!1}),this.dm.add(W)),W.setImage(Z),W.setRect({x:0,y:0,width:Z.width,height:Z.height})}},q.prototype.addValue=function(S,q,W){var Z=this.dm.a(q);gS(S,q,this.dm.a(q+"_func"),Z,W)},q.prototype.createInteractor=function(S,q,W){var Z=this,z=BZ[S];return"shape"===S?new LZ(this.tab,null,function(W,k){var Q={type:"shape",background:null,borderColor:jW.config.color_data_border,borderWidth:1};q&&q(Q,W,k);var U=new z(Q);return U.setPoints(W),U.setSegments(k),Z.editor.fireEvent("compInited",{type:S,data:U,symbolView:Z.editor.symbolView}),U},W):new OZ(this.tab,null,function(W,Q){var U=void 0;U="arc"===S?{type:S,rect:[W.x,W.y,W.width,W.height],background:jW.config.color_data_background,borderWidth:1,borderColor:jW.config.color_data_border,arcFrom:0,arcTo:4.1888}:"border"===S?{type:S,rect:[W.x,W.y,W.width,W.height],border:1,color:jW.config.color_data_border}:"text"===S?{type:S,rect:[W.x,W.y,W.width,W.height],text:k("editor.text")}:"comp"===S||"image"===S?Q?{rect:[W.x+W.width/2,W.y+W.height/2,-1,-1]}:{rect:[W.x,W.y,W.width,W.height]}:"pieChart"===S?{type:"pieChart",values:[10,20,40,60,80],colors:["#7EB6EA","#434348","#93EB82","#F5A262","#8087E6"]}:"oneDimensionalColumnChart"===S?{type:"columnChart",series:[{values:[10,20,40,60,80],colors:["#7EB6EA","#434348","#93EB82","#F5A262","#8087E6"]}]}:"columnChart"===S?{type:"columnChart",series:[{values:[30,40,60,70,80],color:"#7EB6EA"},{values:[20,40,50,80,90],color:"#434348"}]}:"lineChart"===S?{type:"lineChart",series:[{values:[10,40,30,60,70],color:"#7EB6EA"}]}:{type:S,rect:[W.x,W.y,W.width,W.height],background:jW.config.color_data_background,borderWidth:1,borderColor:jW.config.color_data_border},q&&q(U,W,Q);var u=new z(U);return Z.editor.fireEvent("compInited",{type:S,data:u,symbolView:Z.editor.symbolView}),u})},UW(q,[{key:"attrObject",set:function(S){var q=this.editor.rightBottomTabView.getTabModel().sm();this._attrObject=S,this.editor.dataViewTab&&q.co(this.editor.dataViewTab)&&this.editor.dataView.updateContent()},get:function(){return this._attrObject}},{key:"content",get:function(){var S=this,q=this.graphView.getEditInteractor(),W=(q.gridGuide,this.dm),Z=this.attrObject,z={modified:(new Date).toString()};void 0!==Z&&(z.attrObject=Z),W.getBackground()&&(z.background=W.getBackground()),W.dataBindings&&(z.dataBindings=g(J(W.dataBindings),{ignoreDataModel:1})),W.a("previewURL")&&(z.previewURL=W.a("previewURL")),W.a("snapshotURL")&&(z.snapshotURL=W.a("snapshotURL")),W.a("connectActionType")!==jW.config.symbolConnectActionType&&(z.connectActionType=W.a("connectActionType")),W.a("rulerEnabled")!==jW.config.symbolRulerEnabled&&(z.rulerEnabled=W.a("rulerEnabled")),W.a("gridEnabled")!==jW.config.symbolGridEnabled&&(z.gridEnabled=W.a("gridEnabled")),W.a("gridBlockSize")!==jW.config.symbolGridBlockSize&&(z.gridBlockSize=W.a("gridBlockSize")),W.a("gridThickLinesEvery")!==jW.config.symbolGridThickLinesEvery&&(z.gridThickLinesEvery=W.a("gridThickLinesEvery")),W.a("gridThickColor")!==jW.config.symbolGridThickColor&&(z.gridThickColor=W.a("gridThickColor")),W.a("gridLightColor")!==jW.config.symbolGridLightColor&&(z.gridLightColor=W.a("gridLightColor")),W.a("gridAngle")!==jW.config.symbolGridAngle&&(z.gridAngle=W.a("gridAngle")),W.a("gridRotation")!==jW.config.symbolGridRotation&&(z.gridRotation=W.a("gridRotation")),W.a("gridZoomThreshold")!==jW.config.symbolGridZoomThreshold&&(z.gridZoomThreshold=W.a("gridZoomThreshold")),W.a("anchorEnabled")!==jW.config.symbolAnchorEnabled&&(z.anchorEnabled=W.a("anchorEnabled")),W.a("guideLineEnabled")!==jW.config.symbolGuideLineEnabled&&(z.guideLineEnabled=W.a("guideLineEnabled")),W.a("highlightEnabled")!==jW.config.symbolHighlightEnabled&&(z.highlightEnabled=W.a("highlightEnabled")),W.a("highlightColor")!==jW.config.symbolHighlightColor&&(z.highlightColor=W.a("highlightColor")),W.a("highlightBorderWidth")!==jW.config.symbolHighlightBorderWidth&&(z.highlightBorderWidth=W.a("highlightBorderWidth")),W.a("highlightBorderPattern")!==jW.config.symbolHighlightBorderPattern&&(z.highlightBorderPattern=W.a("highlightBorderPattern")),W.a("xAlignmentGuides")&&W.a("xAlignmentGuides").length&&(z.xAlignmentGuides=W.a("xAlignmentGuides")),W.a("yAlignmentGuides")&&W.a("yAlignmentGuides").length&&(z.yAlignmentGuides=W.a("yAlignmentGuides")),W.a("cacheRule")&&this.addValue(z,"cacheRule"),W.a("textureCache")&&this.addValue(z,"textureCache"),null!=W.a("alignmentGuideEnabled")&&W.a("alignmentGuideEnabled")!==jW.config.symbolGridAlignmentGuideEnabled&&(z.alignmentGuideEnabled=W.a("alignmentGuideEnabled")),W.a("alignmentGuideColor")&&W.a("alignmentGuideColor")!==jW.config.symbolGridAlignmentGuideColor&&(z.alignmentGuideColor=W.a("alignmentGuideColor")),W.a("stateEnum")&&W.a("stateEnum").length&&(z.stateEnum=W.a("stateEnum"),this.addValue(z,"state")),iW.forEach(function(S){W.a(S)&&(z[S]=W.a(S))}),W.a("renderHTML")&&(z.renderHTML=W.a("renderHTML")),W.a("layoutAttach")&&(z.layoutAttach=W.a("layoutAttach")),W.a("layoutProperties")&&(z.layoutProperties=W.a("layoutProperties")),this.addValue(z,"width"),this.addValue(z,"height"),this.addValue(z,"boundExtend",0),this.addValue(z,"fitSize",!1),this.addValue(z,"scrollable",!1),this.addValue(z,"interactive",!1),this.addValue(z,"disableSelectedBorder",!1),this.addValue(z,"pixelPerfect",!0),this.addValue(z,"name"),this.addValue(z,"clip",!1),this.addValue(z,"visible",!0),this.addValue(z,"color"),this.addValue(z,"blendMode","multiply"),this.addValue(z,"opacity",1),this.addValue(z,"attachPoints"),this.addValue(z,"attachStyle");var k=jW.config.customProperties.symbol,Q=!!jW.config.saveSymbolCustomPropertyDefaultValue;k&&k.length&&k.forEach(function(q){Q?S.addValue(z,q.property):S.addValue(z,q.property,q.defaultValue)});var U=[];return W.a("comps_func")?z.comps={values:U,func:W.a("comps_func")}:z.comps=U,W.each(function(S){"__renderHTML__"!==S.getTag()&&U.push(S.toJSON())}),z}}]),q}(VZ),YZ=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));Z.editor=W,Z.getTabModel().sm().ms(function(){var S=Z.currentTab;Z.editor.$5$(S),jW.config.uisVisible&&(S&&S._isUI?(S.getView().redraw(!0),W.mainSplitView.setStatus("cr")):W.mainSplitView.setStatus("normal"))});var z=function(){return!!Z.getTabModel().size()};return Z.menu=new AW([{id:"closeTab",label:k("editor.closetab"),action:function(){Z.closeTab()},visible:z},{id:"closeOtherTabs",label:k("editor.closeothertabs"),action:function(){Z.closeOtherTabs()},visible:z},{id:"closeTabsToTheRight",label:k("editor.closetabstotheright"),action:function(){Z.closeTabsToTheRight()},visible:z},{separator:!0,visible:function(){return Z._rightClickTab&&z()}},{id:"showInExplorer",label:k("editor.showinexplorer"),action:function(){var S=Z._rightClickTab||Z.currentTab;Z.editor.selectFileNode(S.getTag())},visible:function(){return Z._rightClickTab&&z()}}]),Z.menu.beforeShow=function(S){Z._rightClickTab=Z.getTabAt(S)},Z.menu.addTo(Z.getTitleDiv()),Z.editor.menus.push(Z.menu),Z.addTitleTipHandler(),Z}return uW(q,S),q.prototype.drawCloseIcon=function(q,W,Z,z){q.a("dirty")?(W.fillStyle=Z,W.beginPath(),W.arc(z.x+z.width/2,z.y+z.height/2,3,0,2*Math.PI,!0),W.fill()):S.prototype.drawCloseIcon.call(this,q,W,Z,z)},q.prototype.open=function(S){if(S){var q=S.fileType,W=q===KW,Z=q===xW,z=q===tW,k=q===mW&&jW.SceneView;if(W||Z||k||z){var Q=S.url,U=this.getTabModel().getDataByTag(Q);if(!U){if(jW.SceneView&&k&&this.hasTooManyOpenScenes())return;U=new ht.Tab,U.setTag(Q),U.setClosable(!0),U.setName(T(S.getName())),U.a("uuid",S.uuid),W?(U.setIcon("editor.display"),new $Z(this.editor,U,Q,void 0,void 0,void 0,S.parent_uuid,S.root_dir)):Z?(U.setIcon("editor.symbol"),new MZ(this.editor,U,Q,void 0,S.parent_uuid,S.root_dir)):k?(U.setIcon("editor.scene"),new jW.SceneView(this.editor,U,Q,void 0,S.parent_uuid,S.root_dir)):z&&(U.setIcon("editor.ui-tab"),U._isUI=!0,new jW.UIView(this.editor,U,Q,void 0,S.parent_uuid,S.root_dir)),this.editor.addTab(U)}this.getTabModel().sm().ss(U)}}},q.prototype.newDisplayView=function(S){var q=new ht.Tab;q.setClosable(!0),q.setIcon("editor.display"),q.setName(S||k("editor.untitled"));var W=new $Z(this.editor,q);return this.editor.addTab(q,!0),W},q.prototype.newSymbolView=function(S){var q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],W=new ht.Tab;W.setClosable(!0),W.setIcon("editor.symbol"),W.setName(S||k("editor.untitled"));var Z=new MZ(this.editor,W);return this.editor.addTab(W,!0),q&&this.editor.zoomToFit(),Z},q.prototype.newUIView=function(S){var q=new ht.Tab;q._isUI=!0,q.setClosable(!0),q.setIcon("editor.ui-tab"),q.setName(S||k("editor.untitled"));var W=new jW.UIView(this.editor,q);return this.editor.addTab(q,!0),W},q.prototype.$99$=function(S){var q=this;this.getTabModel().each(function(W){if(!W._isUI){var Z=W.getView();Z.graphView.invalidateAll();var z=Z.g3d;if(z){z.deleteTexture(S);var k=void 0,Q=q.editor.getFileNode(S);Q&&(k=Q.getFileUUID(),z.deleteTexture(k)),z.dm().each(function(S){z.invalidateCachedTexture(S)}),z.invalidateAll()}}})},q.prototype.updateUIRefs=function(S){this.getTabModel().each(function(q){if(q._isUI){q.getView().handleFileChanged(S)}})},q.prototype.reload=function(){this.currentTab&&this.currentTab.getView().reload()},q.prototype.save=function(S,q){this.currentTab&&this.currentTab.getView().save(S,q)},q.prototype.saveAll=function(S){var q=this.tabs,W=-1,Z=function(){W++,W<q.length?q[W].getView().save(Z):S()};Z()},q.prototype.preview=function(){this.currentTab&&this.currentTab.getView().preview()
},q.prototype.selectTab=function(S){S&&this.getTabModel().sm().ss(S)},q.prototype.onTabClosing=function(S,q){return this.closeTab(S),!1},q.prototype.closeTab=function(S,q,W){(S=S||this._rightClickTab||this.currentTab)&&this.closeTabs([S],q,W)},q.prototype.closeOtherTabs=function(S,q){var W=this._rightClickTab||this.currentTab;this.closeTabs(this.tabs.filter(function(S){return S!==W}),S,q)},q.prototype.closeTabsToTheRight=function(S,q){var W=this._rightClickTab||this.currentTab;if(W){var Z=this.tabs.indexOf(W);this.closeTabs(this.tabs.slice(Z+1),S,q)}},q.prototype.closeAllTabs=function(S,q){this.closeTabs(this.tabs,S,q)},q.prototype.closeTabs=function(S,q,W){var Z=this,z=void 0,k=function(Q){if("cancel"!==Q&&S.length){var U=S.shift(0);void 0===z&&(z=Z.tabs.indexOf(U)-1),Z.$65$(U,k,W)}else{q&&q();var u=Z.tabs.length;!Z.currentTab&&u&&((void 0===z||z<0)&&(z=0),z>u-1&&(z=u-1),Z.selectTab(Z.tabs[z]))}};k(),this._rightClickTab=null},q.prototype.removeTab=function(S){var q=S.getView(),W={url:q.url};this.editor.fireViewEvent(q,"Closing",W),W.preventDefault||(q.onClosed(),this.getTabModel().remove(S),this.editor.fireEvent("tabClosed",{tab:S}),this.editor.fireViewEvent(q,"Closed",W))},q.prototype.$65$=function(S,q,W){var Z=this,z=S.getView();if(!W&&z.dirty&&z.editable){var Q={tab:S};if(this.editor.fireEvent("tabPrompting",Q),"notSave"===Q.action)this.removeTab(S),q&&q("notSave");else if("save"===Q.action)z.save(function(){Z.removeTab(S),q&&q("save")});else if("cancel"===Q.action)q&&q("cancel");else{var U=[{label:k("editor.notsave"),action:function(){u.hide(),Z.removeTab(S),q&&q("notSave")}},{label:k("editor.save"),action:function(){z.save(function(){u.hide(),Z.removeTab(S),q&&q("save")})}},{label:k("editor.cancel"),action:function(){u.hide(),q&&q("cancel")}}],u=new GW({title:S.getName(),contentPadding:20,width:260,draggable:!0,content:'<p style="color: '+ht.Default.labelColor+'">'+k("editor.savechange")+"</p>",buttons:U});u.$48$=U[2].action,u.$47$=U[1].action,u.show(this.editor.$38$)}}else this.removeTab(S),q&&q()},q.prototype.addTitleTipHandler=function(){},UW(q,[{key:"currentTab",get:function(){return this.getTabModel().sm().ld()}},{key:"tabs",get:function(){return this.getTabModel().getRoots().toArray()}}]),q}(HW),AZ=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));Z.setHPadding(8),Z.editor=W,Z.buttons={};var z=Z._items=[];return Z.addAlignItems(z),Z.addSearchItem(z),Z.addLastItem(z),Z.updateItems(),Z}return uW(q,S),q.prototype.addAlignItems=function(S){S.push(this.createItem("distributeHorizontal")),S.push(this.createItem("distributeVertical")),S.push(this.createItem("alignLeft")),S.push(this.createItem("alignHorizontal")),S.push(this.createItem("alignRight")),S.push(this.createItem("alignTop")),S.push(this.createItem("alignVertical")),S.push(this.createItem("alignBottom"))},q.prototype.addLastItem=function(S){var q=22,W=[q,q,q,q,q,q,q,q,.1];G(jW.config.compactFilter)||(this.addCompactItem(S),W.push(q)),this.addRow(S,W)},q.prototype.createItem=function(S){var q=this,W="editor.align."+S.toLocaleLowerCase();return this.buttons[S]=zq(null,k(W),W,function(){q[S]()})},q.prototype.updateItems=function(){var S=this.buttons;if(this.dataModel){var q=this.selection;q.length>2?(S.distributeHorizontal.setDisabled(!1),S.distributeVertical.setDisabled(!1),S.alignLeft.setDisabled(!1),S.alignHorizontal.setDisabled(!1),S.alignRight.setDisabled(!1),S.alignTop.setDisabled(!1),S.alignVertical.setDisabled(!1),S.alignBottom.setDisabled(!1)):q.length>1?(S.distributeHorizontal.setDisabled(!0),S.distributeVertical.setDisabled(!0),S.alignLeft.setDisabled(!1),S.alignHorizontal.setDisabled(!1),S.alignRight.setDisabled(!1),S.alignTop.setDisabled(!1),S.alignVertical.setDisabled(!1),S.alignBottom.setDisabled(!1)):(S.distributeHorizontal.setDisabled(!0),S.distributeVertical.setDisabled(!0),S.alignLeft.setDisabled(!0),S.alignHorizontal.setDisabled(!0),S.alignRight.setDisabled(!0),S.alignTop.setDisabled(!0),S.alignVertical.setDisabled(!0),S.alignBottom.setDisabled(!0))}else S.distributeHorizontal.setDisabled(!0),S.distributeVertical.setDisabled(!0),S.alignLeft.setDisabled(!0),S.alignHorizontal.setDisabled(!0),S.alignRight.setDisabled(!0),S.alignTop.setDisabled(!0),S.alignVertical.setDisabled(!0),S.alignBottom.setDisabled(!0)},q.prototype.$5$=function(S){if(this.dataModel&&this.dataModel.sm().ums(this.updateItems,this),S&&!S._isUI){var q=S.getView();this.dataModel=q.dm,this.dataModel.sm().ms(this.updateItems,this)}else this.dataModel=null;this.updateItems()},q.prototype.getUnionRect=function(S){return this.editor.gv?this.editor.gv.getUnionNodeRect(S):null},q.prototype.isSelected=function(S){return this.dataModel&&this.dataModel.sm().contains(S)},q.prototype.hasSelectedGroupParent=function(S){return S instanceof ht.Group&&(!!this.isSelected(S)||this.hasSelectedGroupParent(S.getParent()))},q.prototype.hasSelectedHost=function(S){var q=this,W=function(Z){return Z!==S&&(Z instanceof ht.Node&&(!!q.isSelected(Z)||W(Z.getHost())))};return W(S.getHost())},q.prototype.distributeHorizontal=function(){if(this.editor.editable){this.editor.beginTransaction();var S=this.editor.gv,q=this.selection,W=this.getUnionRect(q);if(S&&W){q.sort(function(q,W){return S.getNodeRect(q).x-S.getNodeRect(W).x});var Z={},z=0;q.forEach(function(q){var W=S.getNodeRect(q);Z[q._id]=W,z+=W.width});var k=(W.width-z)/(q.length-1),Q=W.x;q.forEach(function(q){var W=S.getNodeRect(q);q.translate(Q-W.x,0),Q+=W.width+k})}this.editor.endTransaction()}},q.prototype.distributeVertical=function(){if(this.editor.editable){this.editor.beginTransaction();var S=this.editor.gv,q=this.selection,W=this.getUnionRect(q);if(S&&W){q.sort(function(q,W){return S.getNodeRect(q).y-S.getNodeRect(W).y});var Z={},z=0;q.forEach(function(q){var W=S.getNodeRect(q);Z[q._id]=W,z+=W.height});var k=(W.height-z)/(q.length-1),Q=W.y;q.forEach(function(q){var W=S.getNodeRect(q);q.translate(0,Q-W.y),Q+=W.height+k})}this.editor.endTransaction()}},q.prototype.alignLeft=function(){if(this.editor.editable){this.editor.beginTransaction();var S=this.editor.gv,q=this.selection,W=this.getUnionRect(q);S&&W&&q.forEach(function(q){var Z=S.getNodeRect(q);q.translate(W.x-Z.x,0)}),this.editor.endTransaction()}},q.prototype.alignHorizontal=function(){if(this.editor.editable){this.editor.beginTransaction();var S=this.editor.gv,q=this.selection,W=this.getUnionRect(q);S&&W&&q.forEach(function(q){var Z=S.getNodeRect(q);q.translate(W.x+W.width/2-Z.x-Z.width/2,0)}),this.editor.endTransaction()}},q.prototype.alignRight=function(){if(this.editor.editable){this.editor.beginTransaction();var S=this.editor.gv,q=this.selection,W=this.getUnionRect(q);S&&W&&q.forEach(function(q){var Z=S.getNodeRect(q);q.translate(W.x+W.width-Z.x-Z.width,0)}),this.editor.endTransaction()}},q.prototype.alignTop=function(){if(this.editor.editable){this.editor.beginTransaction();var S=this.editor.gv,q=this.selection,W=this.getUnionRect(q);S&&W&&q.forEach(function(q){var Z=S.getNodeRect(q);q.translate(0,W.y-Z.y)}),this.editor.endTransaction()}},q.prototype.alignVertical=function(){if(this.editor.editable){this.editor.beginTransaction();var S=this.editor.gv,q=this.selection,W=this.getUnionRect(q);S&&W&&q.forEach(function(q){var Z=S.getNodeRect(q);q.translate(0,W.y+W.height/2-Z.y-Z.height/2)}),this.editor.endTransaction()}},q.prototype.alignBottom=function(){if(this.editor.editable){this.editor.beginTransaction();var S=this.editor.gv,q=this.selection,W=this.getUnionRect(q);S&&W&&q.forEach(function(q){var Z=S.getNodeRect(q);q.translate(0,W.y+W.height-Z.y-Z.height)}),this.editor.endTransaction()}},q.prototype.addSearchItem=function(S){var q=this;this.searchField=new ht.widget.TextField;var W=this.searchField.getElement();W.onkeyup=function(S){d(S)&&(W.value=""),q.editor.filterProperties()},S.push(this.searchField)},q.prototype.addCompactItem=function(S){var q=this,W=kq("editor.filter",function(){return jW.config.commonAndAdvancedFilterMode?!q.editor.inspectorCompact:q.editor.inspectorCompact}),Z=function(){q.editor.inspectorCompact=!q.editor.inspectorCompact},z=k(jW.config.commonAndAdvancedFilterMode?"editor.commonadvanced":"editor.compactdetail");S.push(zq(null,z,W,Z))},UW(q,[{key:"selection",get:function(){var S=this,q=[];return this.dataModel&&this.dataModel.sm().each(function(W){W instanceof ht.Node&&(S.hasSelectedGroupParent(W.getParent())||S.hasSelectedHost(W)||q.push(W))}),q}},{key:"filter",get:function(){return this.searchField.getElement().value}}]),q}(bW),lZ=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));return Z.editor=W,Z.initForm(),Z.visible=!1,Z.$5$(),Z.oopsImageJSON=ht.Default.getImage("editor.oops"),Z.oopsImage=ht.Default.toCanvas(Z.oopsImageJSON,Z.oopsImageJSON.width,Z.oopsImageJSON.height,"fill",null,null,null,ht.Default.devicePixelRatio).toDataURL(),Z}return uW(q,S),q.prototype.initForm=function(){var S=this,q=this.codeEditor=new vW({language:"json",lineNumbers:"off",readOnly:!0,minimap:{enabled:!1}});this.addRow([{id:"content",element:q}],[.1],.1),this.addRow([{id:"url",textField:{editable:!1}},{id:"edit",button:{onClicked:function(){S.editor.editable&&(S.editing=!S.editing)}}},{id:"commit",button:{label:k("editor.commit"),onClicked:function(){S.commit()}}}],[.1,50,50]),this.getView().style.background=jW.config.color_pane,this.editing=!1},q.prototype.commit=function(){this.editor.editable&&(this.currentView.update(this.content,!0),this.editing=!1)},q.prototype.$66$=function(S){var q=this;this.visible&&!this.editing&&(S&&"*"===S.property||(this._updateContentLater&&clearTimeout(this._updateContentLater),this._updateContentLater=setTimeout(function(){q.updateContent()},100)))},q.prototype.updateContent=function(){this.visible&&!this.editing&&(this._updateContentLater=null,this.content=this.currentView?J(this.currentView.content,void 0,!1):"")},q.prototype.updateUrl=function(){this.v("url",this.tab&&this.tab.getTag()||"")},q.prototype.$5$=function(S){this.editing=!1,this.dataModel&&(this.dataModel.removeDataModelChangeListener(this.$66$,this),this.dataModel.removeDataPropertyChangeListener(this.$66$,this),this.dataModel.removePropertyChangeListener(this.$66$,this)),S&&!S._isUI?(this.currentView=S.getView(),this.dataModel=this.currentView.dm,this.dataModel.addDataModelChangeListener(this.$66$,this),this.dataModel.addDataPropertyChangeListener(this.$66$,this),this.dataModel.addPropertyChangeListener(this.$66$,this),this.setDisabled(!1)):(this.currentView=null,this.dataModel=null,this.setDisabled(!0)),this.tab=S,this.updateUrl(),this.$66$()},UW(q,[{key:"editing",get:function(){return this._editing},set:function(S){this._editing!==S&&(this._editing=S,this.getViewById("edit").setLabel(k(S?"editor.cancel":"editor.edit")),this.getViewById("commit").setDisabled(!S),this.getViewById("content").setEditable(S),S||this.$66$())}},{key:"visible",get:function(){return this._visible},set:function(S){this._visible!==S&&(this._visible=S,S?this.updateContent():this.editing||(this.content=""))}},{key:"content",get:function(){return this.v("content")},set:function(S){this.setDisabled(!1),this.v("content",S)}}]),q}(bW);jW.DataView=lZ;var wZ=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));Z.editor=W,Z._emptyDataModel=new ht.DataModel,Z.centerPane=new YW,Z.setCenterView(Z.centerPane),Z.controlPane=new bW,Z.controlPane.addRow([{id:"filter",textField:{}}],[.1,ht.Default.isTouchable?32:18]),Z.setBottomView(Z.controlPane),Z.setBottomHeight(ht.Default.widgetRowHeight+8);var z=Z.controlPane.getViewById("filter"),k=z.setValue;z.setValue=function(S){k.call(z,S),Z.updateCenterView(S)};var Q=!1,U=Z.input=z.getElement();return U.addEventListener("compositionstart",function(){return Q=!0}),U.addEventListener("compositionend",function(){Q=!1,Z.updateCenterView(U.value)}),U.addEventListener("keyup",function(S){!Q&&Z.list&&(d(S)&&(U.value=""),Z.updateCenterView(U.value))}),Z}return uW(q,S),q.prototype.$5$=function(S){this.tab=S,this.list=S?S.getView().list:null,this.controlPane.v("filter",this.list?this.list.getFilter()||"":"")},q.prototype.initFilterList=function(){var S=this._filterListView=new wW;S.setFilter=function(S){var q=this._filter;this._filter=S,this.fp("filter",q,S),this.ivm()},S.getFilter=function(){return this._filter},S.isVisible=function(S){if("__renderHTML__"===S.getTag())return!1;if(!this._filter)return!0;var q=this.getVisibleFunc();if(q&&!q(S))return!1;var W=this.getLabel(S);if(null==W)return!1;var Z=(this._filter+"").toLowerCase();return W=(W+"").toLowerCase(),W.indexOf(Z)>=0}},q.prototype.updateCenterView=function(S){var q=this.list;q&&(q instanceof hW&&S&&(q=this._filterListView),this.centerPane.getCenterView()!==q&&this.centerPane.setCenterView(q),this.list&&this.list.setFilter(S),q===this._filterListView&&this._filterListView.setFilter(S))},UW(q,[{key:"list",get:function(){return this._list},set:function(S){if(this._list=S,this.centerPane.setCenterView(S),!(S&&S instanceof hW))return void(this._filterListView&&this._filterListView.dm(this._emptyDataModel));this._filterListView||this.initFilterList(),this._filterListView.getLabel=S.getLabel,this._filterListView.getIcon=S.getIcon,this._filterListView.dm(S.dm())}}]),q}(YW),sZ=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));Z.editor=W,Z._layerNames=[],Z.setDisabled(!0),Z.tableModel=new ht.DataModel,Z.tablePane=new pW(Z.tableModel),Z.tableView=Z.tablePane.getTableView(),Z.tableView.setEditable(!0);var z=Z.tableView.isCellEditable;return Z.tableView.isCellEditable=function(){return!!W.editable&&z.apply(this,arguments)},Z.tablePane.getView().style.border=jW.config.color_line+" solid 1px",Z.tablePane.addColumns([Z.$73$("name",k("editor.name"),100),Z.$73$("visible",k("editor.visible"),50),Z.$73$("selectable",k("editor.selectable"),50),Z.$73$("movable",k("editor.movable"),50),Z.$73$("editable",k("editor.editable"),50)]),Z.addRow([Z.tablePane],[.1],.1),Z.addRow([{button:{icon:"editor.add",toolTip:k("editor.add"),onClicked:function(){Z.editor.editable&&(Z.addLayer(ht.Data.prototype._layer,!0,!0,!0,!0),Z.updateLayers())}}},{button:{icon:"editor.delete",toolTip:k("editor.delete"),onClicked:function(){Z.editor.editable&&Z.tableView.sm().size()&&(Z.dataModel.beginTransaction(),Z.removeSelectionLayers(),Z.updateLayers(),Z.dataModel.endTransaction())}}},null,{button:{icon:"editor.top",toolTip:k("editor.bringtofront"),onClicked:function(){Z.editor.editable&&Z.tableView.sm().size()&&(Z.tableModel.moveSelectionToTop(),Z.updateLayers())}}},{button:{icon:"editor.up",toolTip:k("editor.bringforward"),onClicked:function(){Z.editor.editable&&Z.tableView.sm().size()&&(Z.tableModel.moveSelectionUp(),Z.updateLayers())}}},{button:{icon:"editor.down",toolTip:k("editor.sendbackward"),onClicked:function(){Z.editor.editable&&Z.tableView.sm().size()&&(Z.tableModel.moveSelectionDown(),Z.updateLayers())}}},{button:{icon:"editor.bottom",toolTip:k("editor.sendtoback"),onClicked:function(){Z.editor.editable&&Z.tableView.sm().size()&&(Z.tableModel.moveSelectionToBottom(),Z.updateLayers())}}}],[20,20,.1,20,20,20,20]),Z}return uW(q,S),q.prototype.addLayer=function(S,q,W,Z,z){!1!==q&&(q=!0),!1!==W&&(W=!0),!1!==Z&&(Z=!0),!1!==z&&(z=!0);var k=new ht.Data;k.a({name:S,visible:q,selectable:W,movable:Z,editable:z}),this.tableModel.add(k)},q.prototype.removeSelectionLayers=function(){var S=this.dataModel,q=this.tableModel.sm().getSelection(),W=this.tableModel.size(),Z=q.toArray().map(function(S){return S.a("name")}),z=null;if(W>q.size())for(var k=this.tableModel.toDatas().toArray(),Q=W-1;Q>=0;Q--){var U=k[Q].a("name");if(Z.indexOf(U)<0){z=U;break}}S.each(function(S){Z.indexOf(S.getLayer())>=0&&S.setLayer(z)}),this.tableView.removeSelection()},q.prototype.$73$=function(S,q,W){var Z=this;return{name:S,tag:S,accessType:"attr",width:W,displayName:q,align:"center",editable:!0,setValue:function(q,W,z){z!==q.a(S)&&(q.a(S,z),Z.updateLayers())}}},q.prototype.$5$=function(S){this.dataModel&&this.dataModel.removePropertyChangeListener(this.handleDataModelPropertyChange,this);var q=this.editor.displayView||this.editor.sceneView;q?(this.dataModel=q.dm,this.dataModel.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.setDisabled(!1)):(this.dataModel=null,this.setDisabled(!0)),this.updateTable(),this.updateInspector()},q.prototype.handleDataModelPropertyChange=function(S){"layers"===S.property&&(this.updateTable(),this.updateInspector())},q.prototype.updateLayers=function(){if(this.dataModel){var S=this.tableModel.size()?[]:null;S&&this.tableModel.getRoots().forEach(function(q){S.push({name:q.a("name"),visible:q.a("visible"),selectable:q.a("selectable"),movable:q.a("movable"),editable:q.a("editable")})}),this.isSettingLayers=!0,this.dataModel.setLayers(S),this.isSettingLayers=!1,this.updateInspector()}},q.prototype.updateTable=function(){var S=this;if(!this.isSettingLayers&&(this.tableModel.clear(),this.dataModel)){var q=this.dataModel.getLayers();q&&q.forEach(function(q){tS(q)?S.addLayer(q.name,q.visible,q.selectable,q.movable,q.editable):S.addLayer(q,!0,!0,!0,!0)})}},q.prototype.updateInspector=function(){var S=this;if(this.dataModel){var q=this.dataModel.getLayers(),W=this.editor.inspector;this._layerNames=[],q&&q.forEach(function(q){S._layerNames.push(tS(q)?q.name:q)}),W&&(W.$34$(),W.filterPropertiesLater())}},UW(q,[{key:"currentLayer",get:function(){var S=this.tableModel.sm().ld();if(S)return S.a("name");var q=this.tableModel.getRoots();return q.size()?(S=q.get(q.size()-1),S.a("name")):ht.Data.prototype._layer}},{key:"layerNames",get:function(){return this._layerNames}}]),q}(bW),FZ={},pZ=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));Z.editor=W,Z.symbolViewUpdating=!1;var z=Z.tableModel=new ht.DataModel,Q=Z.tablePane=new pW(z),U=Z.tableView=Q.getTableView();z.mm(Z.handleUpdate,Z),z.md(Z.handleTableDataPropertyChange,Z);var u=z.sm();u.setSelectionMode("single"),u.ms(Z.handleTableSelectionChange,Z);var D=U.getLabelColor;return U.getLabelColor=function(S){return!1===S.s("editable")?jW.config.color_disabled:D.call(this,S)},U.isEditable=function(){return W.editable},U.isCellEditable=function(S,q){return"isDefault"===q.getName()?W.editable:!1!==S.s("editable")&&W.editable},Q.addColumns([{name:"stateName",displayName:k("editor.state"),accessType:"attr",editable:!0,valueType:"string",tag:"stateName"},{name:"stateDisplayName",displayName:k("editor.name"),accessType:"attr",editable:!0,valueType:"string",tag:"stateDisplayName"},{name:"isDefault",displayName:k("editor.default"),accessType:"attr",valueType:"boolean",editable:!0,width:48,setValue:function(S,q,W,z){Z.setDefaultState(S.a("stateName"))}}]),Q.addViewListener(function(S){if("beginValidate"===S.kind){var q=Q.getColumnModel(),W=Q.getWidth(),Z=(W-80)/2;q.getDataByTag("stateName").setWidth(Z),q.getDataByTag("stateDisplayName").setWidth(Z)}}),Z.addRow([Z.tablePane],[.1],.1),Z.addRow([{button:{icon:"editor.add",toolTip:k("editor.add"),onClicked:function(){if(Z.editor.editable){var S=Z.addState(null,null,!1,!0);Z.tableModel.sm().ss(S)}}}},{button:{icon:"editor.delete",toolTip:k("editor.delete"),onClicked:function(){Z.editor.editable&&Z.removeState()}}},null,{button:{icon:"editor.top",toolTip:k("editor.bringtofront"),onClicked:function(){Z.editor.editable&&Z.tableView.sm().size()&&Z.tableModel.moveSelectionToTop()}}},{button:{icon:"editor.up",toolTip:k("editor.bringforward"),onClicked:function(){Z.editor.editable&&Z.tableView.sm().size()&&Z.tableModel.moveSelectionUp()}}},{button:{icon:"editor.down",toolTip:k("editor.sendbackward"),onClicked:function(){Z.editor.editable&&Z.tableView.sm().size()&&Z.tableModel.moveSelectionDown()}}},{button:{icon:"editor.bottom",toolTip:k("editor.sendtoback"),onClicked:function(){Z.editor.editable&&Z.tableView.sm().size()&&Z.tableModel.moveSelectionToBottom()}}}],[20,20,.1,20,20,20,20]),Z._index=0,Z}return uW(q,S),q.prototype.handleUpdate=function(){if(!this.updatingClear){var S=[],q=void 0;this.tableModel.each(function(W){var Z=W.a("stateName");if(W.a("isDefault")&&(q=Z),W.s("editable")){var z=W.a("stateDisplayName"),k={};k.value=Z,z&&(k.label=z),S.push(k)}}),this.isSettingState=!0,this.editor.dm.a({stateEnum:S,state:q}),this.editor.inspector.filterPropertiesLater(),this.editor.inspector.updateProperties(),this.isSettingState=!1}},q.prototype.handleTableDataPropertyChange=function(S){if("a:stateName"!==S.property||this.renameRollback)this.handleUpdate();else{var q=S.oldValue,W=S.newValue;this.isStateExist(W,S.data)?(this.editor.showMessage(k("editor.statenameexist"),"error"),this.renameRollback=!0,S.data.a("stateName",q),this.renameRollback=!1):W?(this.editor.dm.each(function(S){q===S.s("state")&&S.s("state",W)}),this.handleUpdate(),this.editor.rightBottomTabView.iv()):(this.editor.showMessage(k("editor.statenameempty"),"error"),this.renameRollback=!0,S.data.a("stateName",q),this.renameRollback=!1)}},q.prototype.handleTableSelectionChange=function(){this.editor.symbolView&&(this.editor.rightBottomTabView.iv(),this.editor.symbolView.graphView.invalidateAll())},q.prototype.addState=function(S,q){var W=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Z=arguments[3],z=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],k=this.currentState,Q=this.tableView.dm(),U=new ht.Data;if(!S){for(;this.isStateExist("state"+this._index);)this._index++;S="state"+this._index}if(U.a({stateName:S,isDefault:W,stateDisplayName:q}),U.s("editable",z),Q.add(U),W&&Q.sm().ss(U),Z&&jW.config.isCopyCompsWhenNewState&&k){var u=this.dataModel.toDatas(function(S){return S.s("state")===k});if(u.size()){var D=this.dataModel.sm();D.cs(),u.each(function(S){D.as(S)}),this.editor.copy(),this.editor.paste(!0),D.each(function(q){q.s("state",S)})}}return U},q.prototype.removeState=function(){var S=this,q=this.tableModel.sm().ld();if(q&&q.s("editable")){var W=q.a("stateName"),Z=this.editor.dm,z=Z.toDatas(function(S){return W===S.s("state")}),Q=z.size();Q?this.editor.showConfirm(void 0,iq(k("editor.retaincompafterdelete"),W),function(){z.each(function(S){S.s("state",void 0)}),S.tableModel.remove(q)},function(){for(var W=Q-1;W>=0;W--)Z.remove(z.get(W));S.tableModel.remove(q)}):this.tableModel.remove(q)}},q.prototype.handleDataModelPropertyChange=function(S){"a:stateEnum"!==S.property&&"a:state"!==S.property||this.updateTable()},q.prototype.handleDataModelChange=function(S){var q=this.currentState;if(!this.symbolViewUpdating){if("add"===S.kind){var W=S.data.s("state");q?S.data.s("state",q):W&&!this.isStateExist(W)&&S.data.s("state",void 0)}this.updateTableLater()}},q.prototype.updateTable=function(){var S=this;if(!this.isSettingState&&this.dataModel){FZ={},this.updatingClear=!0,this.tableModel.clear();var q=this.dataModel.a("state"),W=[];this.getNestState(this.editor.symbolView.content.comps,W),W.forEach(function(W){S.addState(W.value,W.label,W.value===q,!1,!1)});var Z=this.dataModel.a("stateEnum");Z&&Z.forEach(function(W){FZ[W.value]=1,S.addState(W.value,W.label,W.value===q)}),this.updatingClear=!1}},q.prototype.updateTableLater=function(){var S=this;setTimeout(function(){S.updateTable()},100)},q.prototype.getNestState=function(S,q){var W=this;S.forEach(function(S){if("image"===S.type){var Z=ht.Default.getImage(S.name);if(Z&&Z.comps){var z=Z.stateEnum;z&&z.forEach(function(S){q.push(S),FZ[S.value]=1}),W.getNestState(Z.comps,q)}else if(!Z)return void W.updateTableLater()}})},q.prototype.isStateExist=function(S,q){for(var W=this.tableModel.toDatas(function(S){return S!==q}),Z=W.size(),z=0;z<Z;z++)if(S===W.get(z).a("stateName"))return!0},q.prototype.setDefaultState=function(S){this.tableModel.each(function(q){q.a("isDefault",q.a("stateName")===S)})},q.prototype.$5$=function(S){var q=this;this.dataModel&&(this.dataModel.ump(this.handleDataModelPropertyChange,this),this.dataModel.umm(this.handleDataModelChange,this),this.dataModel._lastState=this.currentState);var W=this.editor.symbolView;if(W?(this.dataModel=W.dm,this.dataModel.mp(this.handleDataModelPropertyChange,this),this.dataModel.mm(this.handleDataModelChange,this)):this.dataModel=null,this.updateTable(),W){var Z=this.dataModel._lastState;void 0!==Z?this.tableModel.each(function(S){S.a("stateName")===Z&&q.tableModel.sm().ss(S)}):this.tableModel.sm().cs()}},q.prototype.getAllStateEnum=function(){var S=[];return this.tableModel.each(function(q){var W=q.a("stateName"),Z=q.a("stateDisplayName"),z={};z.value=W,Z&&(z.label=Z),S.push(z)}),S},UW(q,[{key:"currentState",get:function(){var S=this.tableModel.sm().ld();return S?S.a("stateName"):void 0}}]),q}(bW),HZ=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));return Z.editor=W,Z.editor.menus.push(Z),Z.setItems(Z.createItems()),Z}return uW(q,S),q.prototype.createItems=function(){return[{id:"file",label:k("editor.file"),items:[this.createItem("newDisplayView",k("editor.newdisplayview"),"newDisplayView",jW.config.displaysVisible),this.createItem("newSymbolView",k("editor.newsymbolview"),"newSymbolView",jW.config.symbolsVisible),this.createItem("newComponent",k("editor.newcomponent"),"newComponent",jW.config.componentsVisible)]}]},q.prototype.createItem=function(S,q,W){var Z=this,z=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],k={id:S,label:q,visible:!(!this.editor[W]||!z)};return W&&(k.action=function(){Z.editor[W]()}),k},q}(AW),EZ=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));return Z.editor=W,Z.initMenu(),Z.$68$(),Z.enableToolTip(),Z}return uW(q,S),q.prototype.$5$=function(){this.iv()},q.prototype.initMenu=function(){var S=this;this.editor.mainMenu=new HZ(this.editor);var q=function(q){var W=S.editor.mainMenu;W.isShowing()&&!W.getView().contains(q.target)&&W.hide()};window.addEventListener("touchstart",q,!1),window.addEventListener("mousedown",q,!1)},q.prototype.$68$=function(){var S=[];this.$67$(S),this.createEditItem(S),this.createDisplayItems(S),this.createSymbolItems(S),this.createSceneItems(S),this.setItems(S)},q.prototype.$67$=function(S){var q=this,W=Wq("menu",k("editor.menu"),"editor.menu");W.action=function(S,W,Z){q.editor.mainMenu.isShowing()||(q.editor.mainMenu.showOnView(q,4,20),Z.preventDefault(),Z.stopPropagation())},S.push(W)},q.prototype.createEditItem=function(S){var q=this,W=function(){return q.editor.currentView&&"edit"===q.editor.currentView.$3$()},Z=Wq("edit",k("editor.edit"),"editor.edit",W);Z.visible=function(){return(!q.editor.currentView||!q.editor.currentView.getPreferredSize)&&q.editor.editable},Z.action=function(){var S=q.editor.currentView;S&&S.$4$("edit")},S.push(Z)},q.prototype.createDisplayItems=function(S){var q=this,W=function(S){return function(W){"Node"===S||"SubGraph"===S||("Edge"===S?W.s({"edge.width":1,"edge.color":jW.config.color_data_border}):"Group"===S?W.setExpanded(!0):"arc"===S?W.s({shape:S,"shape.background":jW.config.color_data_background,"shape.border.width":1,"shape.border.color":jW.config.color_data_border,"shape.arc.from":0,"shape.arc.to":4.1888}):"Shape"===S?W.s({"shape.background":null,"shape.border.color":jW.config.color_data_border,"shape.border.width":1}):"Text"===S?W.s("text",k("editor.text")):W.s({shape:S,"shape.background":jW.config.color_data_background,"shape.border.width":1,"shape.border.color":jW.config.color_data_border})),q.editor.fireEvent("dataInited",{type:S,data:W,displayView:q.editor.displayView})}};S.push(this.editor.createDisplayItem("Shape",k("editor.shape"),"editor.display.shape",ht.Shape,W("Shape"))),S.push(this.editor.createDisplayItem("Oval",k("editor.oval"),"editor.display.oval",ht.Node,W("oval"))),S.push(this.editor.createDisplayItem("RoundRect",k("editor.roundrect"),"editor.display.roundrect",ht.Node,W("roundRect"))),S.push(this.editor.createDisplayItem("Rect",k("editor.rect"),"editor.display.rect",ht.Node,W("rect"))),S.push(this.editor.createDisplayItem("Polygon",k("editor.polygon"),"editor.display.polygon",ht.Node,W("polygon"))),S.push(this.editor.createDisplayItem("Triangle",k("editor.triangle"),"editor.display.triangle",ht.Node,W("triangle"))),S.push(this.editor.createDisplayItem("Star",k("editor.star"),"editor.display.star",ht.Node,W("star"))),S.push(this.editor.createDisplayItem("Arc",k("editor.arc"),"editor.display.arc",ht.Node,W("arc"))),S.push(this.editor.createDisplayItem("Text",k("editor.text"),"editor.display.text",ht.Text,W("Text"))),S.push(this.editor.createDisplayItem("Node",k("editor.node"),"editor.display.node",ht.Node,W("Node"))),S.push(this.editor.createDisplayItem("Group",k("editor.group"),"editor.display.group",ht.Group,W("Group"))),S.push(this.editor.createDisplayItem("SubGraph",k("editor.subgraph"),"editor.display.subgraph",ht.SubGraph,W("SubGraph"))),S.push(this.editor.createDisplayItem("Edge",k("editor.edge"),"editor.display.edge",ht.Edge,W("Edge")))},q.prototype.createSymbolItems=function(S){S.push(this.editor.createSymbolItem("shape",k("editor.shape"),"editor.symbol.shape","shape")),S.push(this.editor.createSymbolItem("oval",k("editor.oval"),"editor.symbol.oval","oval")),S.push(this.editor.createSymbolItem("roundRect",k("editor.roundrect"),"editor.symbol.roundrect","roundRect")),S.push(this.editor.createSymbolItem("rect",k("editor.rect"),"editor.symbol.rect","rect")),S.push(this.editor.createSymbolItem("polygon",k("editor.polygon"),"editor.symbol.polygon","polygon")),S.push(this.editor.createSymbolItem("triangle",k("editor.triangle"),"editor.symbol.triangle","triangle")),S.push(this.editor.createSymbolItem("star",k("editor.star"),"editor.symbol.star","star")),S.push(this.editor.createSymbolItem("arc",k("editor.arc"),"editor.symbol.arc","arc")),S.push(this.editor.createSymbolItem("text",k("editor.text"),"editor.symbol.text","text")),S.push(this.editor.createSymbolItem("border",k("editor.border"),"editor.symbol.border","border")),S.push(this.editor.createSymbolItem("piechart",k("editor.piechart"),"editor.symbol.piechart","pieChart")),S.push(this.editor.createSymbolItem("onedimensionalcolumnchart",k("editor.onedimensionalcolumnchart"),"editor.symbol.onedimensionalcolumnchart","oneDimensionalColumnChart")),S.push(this.editor.createSymbolItem("columnchart",k("editor.columnchart"),"editor.symbol.columnchart","columnChart")),S.push(this.editor.createSymbolItem("linechart",k("editor.linechart"),"editor.symbol.linechart","lineChart"))},q.prototype.createSceneItems=function(S){},q}(EW),hZ=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));return Z.editor=W,Z.$68$(),Z.enableToolTip(),Z.setStickToRight(!0),Z}return uW(q,S),q.prototype.handleGraphViewPropertyChange=function(S){"zoom"===S.property&&this.$69$()},q.prototype.handleDataModelPropertyChange=function(S){this.iv()},q.prototype.$69$=function(){this.label.innerHTML=this.graphView?parseInt(100*this.graphView.getZoom())+"%":""},q.prototype.$5$=function(S){if(this.dm&&this.dm.removePropertyChangeListener(this.handleDataModelPropertyChange,this),this.graphView&&this.graphView.removePropertyChangeListener(this.handleGraphViewPropertyChange,this),S){var q=S.getView();this.dm=q.dm,this.dm&&this.dm.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.graphView=q.graphView,this.isUI=S._isUI,this.graphView&&this.graphView.addPropertyChangeListener(this.handleGraphViewPropertyChange,this)}else this.dm=null,this.graphView=null,this.isUI=null;this.iv(),this.$69$()},q.prototype.$68$=function(){var S=this,q=void 0,W=function(){return!!S.graphView},Z=function(){return!(!S.graphView&&!S.isUI)},z=[];q=Wq("undo",k("editor.undo"),"editor.undo"),q.action=function(){S.editor.undo()},q.visible=Z,z.push(q),q=Wq("redo",k("editor.redo"),"editor.redo"),q.action=function(){S.editor.redo()},q.visible=Z,z.push(q),z.push({separator:!0,visible:Z}),jW.SceneView&&(q=Wq("debug",k("editor.debug"),"editor.debug",function(){return S.editor.isDebugTipShowing()}),q.action=function(){S.editor.toggleDebugTip()},q.visible=W,z.push(q)),q=Wq("rulers",k("editor.showrulers"),"editor.rulers",function(){return S.editor.isRulerEnabled()}),q.action=function(){S.editor.toggleRulerEnabled()},q.visible=W,z.push(q),q=Wq("grid",k("editor.showgrid"),"editor.grid",function(){return S.editor.isGridEnabled()}),q.action=function(){
S.editor.toggleGridEnabled()},q.visible=W,z.push(q),z.push({separator:!0,visible:W}),q=Wq("save",k("editor.save"),"editor.save"),q.action=function(){S.editor.save()},q.visible=Z,z.push(q),q=Wq("preview",k("editor.preview"),"editor.preview"),q.action=function(){S.editor.preview()},q.visible=Z,z.push(q),q=Wq("reload",k("editor.reload"),"editor.reload"),q.action=function(){S.editor.reload()},q.visible=Z,z.push(q),z.push({separator:!0,visible:Z}),z.push(this.createZoomItem(W)),q=Wq("zoomToFit",k("editor.zoomtofit"),"editor.zoomtofit"),q.action=function(){S.editor.zoomToFit()},q.visible=W,z.push(q),z.push({separator:!0,visible:W}),q=Wq("toggleLeft",k("editor.toggleleft"),"editor.toggleleft"),q.action=function(){S.editor.toggleLeft()},z.push(q),q=Wq("toggleRight",k("editor.toggleright"),"editor.toggleright"),q.action=function(){S.editor.toggleRight()},z.push(q),this.setItems(z)},q.prototype.createZoomItem=function(S){var q=this,W=this.label=ht.Default.createDiv(!0);W.style.font=this.getLabelFont(),W.style.color=this.getLabelColor(),W.style.cursor="ew-resize",W.style.width="40px",W.style.height=ht.Default.widgetRowHeight+"px",W.style.lineHeight=ht.Default.widgetRowHeight+"px",W.style.whiteSpace="nowrap",W.style.textAlign="center";var Z=function(S){S.preventDefault();var W=q.editor.gv;if(W){t(S)&&q.editor.zoomReset();var Z=W.getZoom(),z=C(S).x,k=function(S){S.preventDefault();var q=C(S).x-z;W.setZoom(Z*(1+.005*q))};window.addEventListener("mousemove",k,!1),window.addEventListener("touchmove",k,!1);var Q=function(S){S.preventDefault(),window.removeEventListener("mousemove",k,!1),window.removeEventListener("touchmove",k,!1),window.removeEventListener("mouseup",Q,!1),window.removeEventListener("touchend",Q,!1)};window.addEventListener("mouseup",Q,!1),window.addEventListener("touchend",Q,!1)}};return W.addEventListener("mousedown",Z,!1),W.addEventListener("touchstart",Z,!1),{id:"zoom",unfocusable:!0,element:W,visible:S}},q}(EW),IZ=function(S){function q(){var W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Z=W.functionName,z=W.functionValue,k=W.argList,Q=W.codeEditorConfig;QW(this,q);var U=DW(this,S.call(this));U._functionName=Z||"",U.commentRowHeight=18;var u=U.raws=[],D=U.addRow([{id:"comment",element:U.createCommentGraph()}],[.1],90);return u.push(D),D=U.addRow([{id:"head",element:"function() {"}],[.1]),u.push(D),D=U.addRow([{id:"function",element:jq(Q)}],[.1],.1),u.push(D),D=U.addRow(["}"],[.1]),u.push(D),U.updateContent(z,k),U}return uW(q,S),q.prototype.setArguments=function(S){this._argList=S,this.setFormRows()},q.prototype.getArguments=function(){return this._argList},q.prototype.updateContent=function(S,q){this.setArguments(q),this.setFunctionValue(S)},q.prototype.stringifyFunction=function(S){return this._argList?v(S):b(S)},q.prototype.setFunctionValue=function(S){this.v("function",this.stringifyFunction(S))},q.prototype.getFunctionValue=function(){return this.parseFunction(this.v("function"))},q.prototype.parseFunction=function(S){if(S){var q=this.getFunctionHead();return S=S.trim(),q?S=""+q+S+"}":S.startsWith("function")||(S="function() {\n"+S+"\n}"),j(S)}},q.prototype.getFunctionHead=function(){var S=this._argList;if(S){CS(S[0])&&(S=S.map(function(S){return S[1]}));var q="function("+(CS(S)?S.join(", "):S)+") {";return this._functionName&&(q=this._functionName+": "+q),q}},q.prototype.setFormRows=function(){var S=this,q=this.raws,W=this._argList;if(4===S.getRows().length&&M(this.commentGraph.getView()),W){CS(W[0])?(S._rows=q,this.commentNode.a("dataSource",W.map(function(S){var q=S.slice(0);return q[2]&&(q[2]=k(q[2])),q})),this.setCommentCollapse(!1)):S._rows=q.slice(1)}else S._rows=[q[2]];4===S.getRows().length&&S._contentDiv.appendChild(this.commentGraph.getView()),S.iv(),W&&S.v("head",this.getFunctionHead())},q.prototype.createCommentGraph=function(){var S=this,q=this.commentGraph=new ht.graph.GraphView;q.setRectSelectable(!1),q.setPannable(!1),q.getSelectWidth=function(){return 0},q.setZoomable(!1),q.setMovableFunc(function(){return!1}),q.setScrollBarVisible(!1);var W=q.dm(),Z=this.commentNode=new ht.Node;return W.add(Z),Z.setImage("editor.function.comment"),Z.s({fullscreen:"fill","fullscreen.gap":0,interactive:!0,pixelPerfect:!1,onEnter:function(S,q){q.a("background",jW.config.color_pane_dark)},onLeave:function(S,q){q.a("background",null)},onUp:function(q,W){var Z=!W.a("collapse");S.setCommentCollapse(Z)}}),Z.a({collapse:!1,rowHeight:this.commentRowHeight}),q},q.prototype.setCommentCollapse=function(S){this.commentNode.a("collapse",S),this.getRows()[0].height=this.commentRowHeight*(S?1:this._argList.length+2),this.iv()},q}(bW),Sz=function(){},qz=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));Z.editor=W,Z._errorMsg=null,Z.$71$(),Z.$70$(),Z.$72$(),Z.splitView=new FW(Z.inspectorPane,Z.graphView,"v",-200),Z.mainSplitView=new FW(Z.funcPane,Z.splitView,"h",-360),Z._eventData=new ht.Data;var z=[];return z.push({label:k("editor.refresh"),action:function(){Z.refresh()}}),z.push({label:k("editor.ok"),action:function(){Z.ok()}}),z.push({label:k("editor.cancel"),action:function(){Z.hide()}}),Z.setConfig({closable:!0,draggable:!0,width:jW.config.componentViewSize.width,height:jW.config.componentViewSize.height,contentPadding:0,resizeMode:"wh",maximizable:!0,content:Z.mainSplitView,buttons:z,buttonsAlign:"right"}),Z}return uW(q,S),q.prototype.$48$=function(){this.hide()},q.prototype.$47$=function(){this.ok()},q.prototype.$71$=function(){var S=this;ht.Default.setCompType("_editingCompType_",{func:function(){}}),this.graphView=new lW,this.initOverviewNode(),this.graphView.mi(function(q){"doubleClickData"!==q.kind&&"doubleClickBackground"!==q.kind||S.graphView.fitContent(jW.config.animate,jW.config.fitPadding)});var q=this;ht.Default.drawCompType=function(S,W,Z,z,Q,U){var u="_editingCompType_"===z.type;try{u&&q.beforeDrawCompType(W),S(W,Z,z,Q,U),u&&q.afterDrawCompType(W)}catch(S){u&&(q.afterDrawCompType(W),q._errorMsg=k("editor.compfunctionerror")),console.error(S.stack||S)}}},q.prototype.initOverviewNode=function(){var S=this.node,q=this.graphView.dm();S&&q.contains(S)&&q.remove(S);var W=this.node=new ht.Node;W.setImage({width:100,height:100,fitSize:!0,comps:[{type:"_editingCompType_"}]}),q.add(W),q.sm().ss(W)},q.prototype.beforeDrawCompType=function(S){var q=this._restoreFlag;q||(q=this._restoreFlag=S.createLinearGradient(0,0,10,10),q.addColorStop(0,"black"),q.addColorStop(0,"black")),S.fillStyle=q,S.save(),S.fillStyle="#000000"},q.prototype.afterDrawCompType=function(S){if(S.restore(),S.fillStyle!==this._restoreFlag){for(var q=0;S.fillStyle!==this._restoreFlag&&(S.restore(),!(++q>=20)););S.fillStyle="black",this._errorMsg=k("editor.complosssaveorrestore")}else this._errorMsg=null},q.prototype.$72$=function(){this.funcPane=new IZ({argList:[["CanvasRenderingContext2D","g","editor.comment.canvasrenderingcontext2d"],["Rect","rect","editor.comment.componentrect"],["Object","comp","editor.comment.component"],["ht.Node","data","editor.comment.node"],["View","view","editor.comment.view"]]})},q.prototype.$70$=function(){var S=this,q=jW.config.indent;this.inspectorPane=new bW;var W=zq(k("editor.eventhandlers"),null,null,function(){S.editor.eventView.open([S._eventData],null,S.resetEventButtonLabelColor.bind(S))});this.eventButton=W,this.inspectorPane.addRow([k("editor.name"),{id:"name",textField:{}},{element:k("editor.events"),align:"right"},{element:W}],[q,.1,q,.1]),this.inspectorPane.addRow([k("editor.width"),{id:"width",textField:{}},{element:k("editor.height"),align:"right"},{id:"height",textField:{}}],[q,.1,q,.1]),this.inspectorPane.addRow([k("editor.path"),{id:"path",textField:{editable:!1}}],[q,.1]),this.inspectorPane.addRow([k("editor.snapshoturl"),{id:"snapshotURL",textField:{}}],[q,.1]),this.createTable()},q.prototype.$73$=function(S,q,W,Z){return{name:S,tag:S,accessType:"attr",width:W,displayName:q,align:"center",enum:Z,editable:!0}},q.prototype.createTable=function(){var S=this,q=this.tableModel=new ht.DataModel;this.tablePane=new pW(this.tableModel),this.tableView=this.tablePane.getTableView(),this.tableView.setEditable(!0),this.tableView.isEditable=function(){return S.editable},this.tablePane.getView().style.border=jW.config.color_line+" solid 1px",this.tablePane.addColumns([this.$73$("property",k("editor.property"),150),this.$73$("valueType",k("editor.valuetype"),80,{values:jW.consts.valueTypes,labels:jW.consts.valueTypeLabels}),this.$73$("defaultValue",k("editor.defaultvalue"),90),this.$73$("name",k("editor.name"),80),this.$73$("group",k("editor.group"),80),this.$73$("description",k("editor.description"),120),this.$73$("extraInfo",k("editor.extrainfo"),100)]),this.$74$(),this.initExtraInfoColumn(),this.initI18nColumns(),this.inspectorPane.addRow([this.tablePane],[.1],.1),this.inspectorPane.addRow([{button:{toolTip:k("editor.add"),icon:"editor.add",onClicked:function(){if(S.editable){var W=new ht.Data;W.a({property:"property",valueType:"String"});var Z=void 0,z=q.sm().ld();z&&(Z=q.getRoots().indexOf(z)+1),q.add(W,Z),q.sm().ss(W),setTimeout(function(){S.tableView.tx(0),Kq(S.tableView,W,S.tableView.getColumnModel().getDataByTag("property"))},100)}}}},{button:{toolTip:k("editor.delete"),icon:"editor.delete",onClicked:function(){S.editable&&S.tableView.removeSelection()}}},null,{button:{icon:"editor.top",toolTip:k("editor.bringtofront"),onClicked:function(){S.editable&&S.tableView.sm().size()&&S.tableModel.moveSelectionToTop()}}},{button:{icon:"editor.up",toolTip:k("editor.bringforward"),onClicked:function(){S.editable&&S.tableView.sm().size()&&S.tableModel.moveSelectionUp()}}},{button:{icon:"editor.down",toolTip:k("editor.sendbackward"),onClicked:function(){S.editable&&S.tableView.sm().size()&&S.tableModel.moveSelectionDown()}}},{button:{icon:"editor.bottom",toolTip:k("editor.sendtoback"),onClicked:function(){S.editable&&S.tableView.sm().size()&&S.tableModel.moveSelectionToBottom()}}}],[20,20,.1,20,20,20,20])},q.prototype.$74$=function(){var S=this,q=this.tableView.getColumnModel().getDataByTag("defaultValue");q.getValue=function(S,q,W){var Z=S.a("defaultValue");return"Angle"===S.a("valueType")&&Z&&(Z=Z/Math.PI*180),Z},q.setValue=function(S,q,W,Z){"Angle"===S.a("valueType")&&(W=W*Math.PI/180),S.a("defaultValue",W)},q.getEnumValues=function(S){var q=S?jW.config.valueTypes[S.a("valueType")]:null;return q&&"enum"===q.type?q.values:null},q.getEnumLabels=function(S){var q=S?jW.config.valueTypes[S.a("valueType")]:null;return q&&"enum"===q.type?q.labels:null},q.getEnumIcons=function(S){var q=S?jW.config.valueTypes[S.a("valueType")]:null;return q&&"enum"===q.type?q.icons:null},q.getEnumDropDownWidth=function(S){var q=S?jW.config.valueTypes[S.a("valueType")]:null;return q&&"enum"===q.type?q.dropDownWidth:null},q.getValueType=function(S){var q=S?jW.config.valueTypes[S.a("valueType")]:null;return q?q.type:null},q.isCellEditable=function(q,W,Z,z){var Q=q?jW.config.valueTypes[q.a("valueType")]:null,U=Q?Q.type:null,u=q.a("extraInfo"),D=jW.config.handleDefaultVauleColumnEdit,G=function(S){q.a("defaultValue",S)};if(D&&D(G,Q,U,u))return!1;if("function"===U){var b=k("editor.function")+" "+(q.a("property")||"");return S.editor.functionView.open(q.a("defaultValue"),G,b,u&&u.arguments),!1}if("multiline"===U)return S.editor.textView.open(q.a("defaultValue"),G,q.a("property")||"&nbsp;"),!1;if("font"===U)return S.editor.fontView.open(q.a("defaultValue"),G,q.a("property")||"&nbsp;"),!1;if("object"===U||"custom"===U||"stringArray"===U||"objectArray"===U||"numberArray"===U||"colorArray"===U){var v=k("editor.object")+" "+(q.a("property")||"");return S.editor.objectView.open(q.a("defaultValue"),G,v),!1}return"dataModel"!==U||(S.editor.dataModelView.open(q.a("defaultValue"),G,S.editable,u),!1)}},q.prototype.initExtraInfoColumn=function(){var S=this;this.tableView.getColumnModel().getDataByTag("extraInfo").isCellEditable=function(q,W,Z,z){var Q=k("editor.extrainfo")+" "+(q.a("property")||"");return S.editor.objectView.open(q.a("extraInfo"),function(S){q.a("extraInfo",S)},Q),!1}},q.prototype.initI18nColumns=function(){var S=this;["name","group"].forEach(function(q){var W=S.tableView.getColumnModel().getDataByTag(q);W.getValue=function(S,W,Z){var z=S.a(q);return S._editing_?z:k(z)},W.setValue=function(S,W,Z,z){S.a(q,Z),delete S._editing_},W.isCellEditable=function(S,q,W,Z){return S._editing_=1,!0}})},q.prototype.open=function(S,q){var W=this;this.fileNode=S,this.initOverviewNode(),S?Y(S.url,function(q){W.update(S.url,S.path,T(S.getName()),q,S.a("editable"))}):this.update(void 0,q||this.editor.components.currentDir,k("editor.untitled"))},q.prototype.update=function(S,q,W,Z,z){if(this.editable=!1!==z,this._eventData.setAttrObject({}),Z){if(Z=g(Z),this.setTitle(k("editor.editcomponent")),this.node.setWidth(Z.width||100),this.node.setHeight(Z.height||100),this.inspectorPane.v("width",this.node.getWidth()),this.inspectorPane.v("height",this.node.getHeight()),this.inspectorPane.v("snapshotURL",Z.snapshotURL||""),this.inspectorPane.getViewById("name").setEditable(!1),this.inspectorPane.v("name",W||""),this.inspectorPane.v("path",q||""),this.funcPane.setFunctionValue(Z.func),this.tableModel.clear(),Z.properties)for(var Q in Z.properties){var U=Z.properties[Q],u=new ht.Data;u.a({property:Q,valueType:U.valueType,defaultValue:U.defaultValue,name:U.name,group:U.group,description:U.description,extraInfo:U.extraInfo}),this.tableModel.add(u)}if(this._eventData=new ht.Data,Z.events)for(var D in Z.events)this._eventData.a(D,Z.events[D]);this.refresh(),this.show(this.editor.$38$),this.url=S,this.editor.fireEvent("componentViewOpened",{componentView:this,url:S,json:Z})}else this.setTitle(k("editor.newcomponent")),this.node.setWidth(100),this.node.setHeight(100),this.inspectorPane.v("width",this.node.getWidth()),this.inspectorPane.v("height",this.node.getHeight()),this.inspectorPane.v("snapshotURL",""),this.inspectorPane.getViewById("name").setEditable(!0),this.inspectorPane.v("name",W),this.inspectorPane.v("path",q),this.funcPane.setFunctionValue(),this.tableModel.clear(),this.refresh(),this.show(this.editor.$38$),this.url=S,this.editor.fireEvent("componentViewCreated",{componentView:this});this.resetEventButtonLabelColor()},q.prototype.$76$=function(S){var q={};return this.tableModel.getRoots().each(function(W){q[W.a("property")]={valueType:W.a("valueType"),defaultValue:S?JS(W.a("defaultValue")):W.a("defaultValue"),name:W.a("name"),group:W.a("group"),description:W.a("description"),extraInfo:W.a("extraInfo")}}),q},q.prototype.refresh=function(S){ht.Default.setCompType("_editingCompType_",{func:this.funcPane.getFunctionValue()||Sz,properties:this.$76$()}),this.node.setWidth(parseFloat(this.inspectorPane.v("width"))),this.node.setHeight(parseFloat(this.inspectorPane.v("height"))),this.node.iv(),this.graphView.fitContent(jW.config.animate,jW.config.fitPadding);var q=function(W){"validate"===W.kind&&(S&&S(!this._errorMsg),this._errorMsg&&this.editor.showMessage(this._errorMsg,"error"),this.graphView.removeViewListener(q,this))};this.graphView.addViewListener(q,this)},q.prototype.createEvents=function(){var S=this._eventData,q=null;return iW.forEach(function(W){S.a(W)&&(q||(q={}),q[W]=S.a(W))}),q},q.prototype.resetEventButtonLabelColor=function(){for(var S=!1,q=0;q<iW.length;q++)if(this._eventData.a(iW[q])){S=!0;break}this.eventButton.setLabelColor(S?jW.config.color_select:ht.Default.labelColor)},q.prototype.ok=function(){var S=this;if(!this.editable)return void this.hide();var q=this.inspectorPane.v("name").trim(),W=this.inspectorPane.v("path");if(!this.url){var Z=this.editor.components;if(Z.isAccordionMode()&&Z.rootDir===W)return void this.editor.showMessage(k("editor.createfolderfirst"),"error",2e3)}var z=this.url||W+"/"+q+".json";if(!q)return void qq(null,k("editor.inputempty"),function(){});if(q.length>jW.config.maxFileNameLength)return void qq(null,k("editor.inputmax"),function(){});if(jW.config.checkFileName&&!(q=jW.config.checkFileName(q,z)))return void qq(null,k("editor.invalidfilename"),function(){});bS(q)&&(q=T(q));var Q=this.content,U={componentView:this,url:z,json:J(Q)};this.editor.fireEvent("componentViewSaving",U),U.preventDefault||(U={path:U.url,content:U.json},jW.config.vision&&(U.root_dir=this.editor.components.rootDir,U.parent_uuid=this.editor.components.tree.sm().ld().uuid),this.refresh(function(Z){Z&&S.editor.request("upload",U,function(Z){(jW.config.vision?Z&&Z.uuid:!0===Z)&&(S.refresh(),S.graphView.sm().cs(),S.graphView.validate(),S.editor.saveImage(Q.snapshotURL||S.graphView,W+"/"+q+".png",function(){S.editor.fireEvent("componentViewSaved",U)},Z.uuid,Z.parent_uuid,Z.root_dir),S.hide(),S.editor.selectFileNode(U.path),U={componentView:S,url:U.path,json:U.content})})}))},UW(q,[{key:"content",get:function(){var S=this.inspectorPane,q={modified:(new Date).toString(),width:parseFloat(S.v("width")),height:parseFloat(S.v("height")),func:this.funcPane.getFunctionValue()||Sz},W=S.v("snapshotURL"),Z=this.createEvents();return this.tableModel.size()&&(q.properties=this.$76$(!0)),Z&&(q.events=Z),W&&(q.snapshotURL=W),q}}]),q}(GW),Wz=460,Zz=230,zz=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));Z.editor=W;var z=[];z.push(k("editor.binding")),z.push({id:"compProperty",textField:{editable:!1}}),z.push({element:k("editor.type"),align:"right"}),z.push({id:"type",comboBox:{values:["attr","func"],onValueChanged:function(S,q){var W="func"===q,z=W?ht.Default.labelColor:jW.config.color_disabled;Z.getViewById("func").setEditable(W),Z.getItemById("head").color=z,Z.getItemById("end").color=z,Z.getViewById("property").setDisabled(W),W&&Z.getViewById("property").setValue(""),Z.iv()}}}),z.push({element:k("editor.property"),align:"right"});var Q={id:"property"};jW.config.dataBindingsForSymbol.getComboBoxValues?Q.comboBox={editable:!!jW.config.dataBindingsForSymbol.comboBoxEditable}:Q.textField={},z.push(Q);var U=[50,90,40,60,60,.1];if(jW.config.dataBindingsForSymbol.onButtonClicked){var u=zq("...",void 0,void 0,function(){Z.smartClose=!1,jW.config.dataBindingsForSymbol.onButtonClicked(Z,Z.v("compProperty"),Z.editor)});z.push(u),U.push(20)}if(Z.addRow(z,U),!jW.config.dataBindingsForSymbol.getComboBoxValues){Z.getItemById("property").element.getElement().addEventListener("keydown",function(S){ht.Default.isEnter(S)&&Z.hide(!0)})}Z.addLine(),Z.addRow([{id:"head",element:""}],[.1]),Z.addRow([{id:"func",element:jq()}],[.1],.1),Z.addRow([{id:"end",element:"}"},{button:{label:k("editor.ok"),onClicked:function(){Z.hide(!0)}}},{button:{label:k("editor.cancel"),onClicked:function(){Z.hide()}}}],[.1,50,50]),Z.setWidth(Wz),Z.setHeight(Zz),Z.getView().className="ht-editor-databinding",Z.getView().style.background=jW.config.color_pane,Z.getView().style.border=jW.config.color_pane_dark+" solid 1px",Z.getView().style.boxShadow="0px 0px 3px "+ht.Default.toolTipShadowColor,Z.getView().style.overflow="visible";var D=Z.handleWindowClick.bind(Z);return window.addEventListener("mousedown",D,!1),window.addEventListener("touchstart",D,!1),Z}return uW(q,S),q.prototype.handleWindowClick=function(S){if(this.smartClose&&this.getView().parentNode&&!this.button.getView().contains(S.target)){var q=this.getViewById("type");if(!q.getListView().getView().contains(S.target)){if((q=this.getViewById("property"))instanceof ht.widget.ComboBox){if(q.getListView().getView().contains(S.target))return;if(q.getInput()&&q.getInput().contains(S.target))return}this.getView().contains(S.target)||this.hide()}}},q.prototype.toggle=function(S,q,W,Z,z,k){this.getView().parentNode?this.hide():this.show(S,q,W,Z,z,k)},q.prototype.show=function(S,q,W,Z,z,k){var Q=this;jW.config.dataBindingsForSymbol.getComboBoxValues?jW.config.dataBindingsForSymbol.getComboBoxValues(function(U){Q.getViewById("property").setValues(U),Q.showImpl(S,q,W,Z,z,k)}):this.showImpl(S,q,W,Z,z,k)},q.prototype.showImpl=function(S,q,W,Z,z,k){if(!this.getView().parentNode){this.smartClose=!0;var Q=S.getView().getBoundingClientRect(),U=(this.getView().style,L());ht.Default.appendToScreen(this),Q.bottom+Zz+1>U.height?this.getView().style.top=U.top+Q.top-Zz-1+"px":this.getView().style.top=U.top+Q.bottom+1+"px",this.getView().style.left=U.left+Q.right-Wz+"px",this.iv(),this.button=S,this.name=q,this.inspector=Z,this.setter=k,this.v("compProperty",W||q);var u=void 0,D=!1;this.inspector.global?"clip"===q?(u=z?z():this.inspector.dataModel.a("clip"),this.v("head","function(g, width, height, data, view, image) {"),D=!0):(u=z?z():this.inspector.dataModel.a(q+"_func"),this.v("head","function(data, view) {")):(u=z?z():this.inspector.data.a(q),this.inspector.data instanceof JZ&&"type"===q?(this.v("head","function(g, rect, comp, data, view) {"),D=!0):this.v("head","function(data, view) {"));NS(u)?(LW.test(u)?(this.v("type","attr"),this.v("property",u.slice(5))):(this.v("type","attr"),this.v("property",u)),this.v("func","")):VS(u)?(this.v("type","func"),this.v("property",""),this.v("func",v(u))):(this.v("type","attr"),this.v("property",""),this.v("func","")),D?(this.v("type","func"),this.v("property",""),this.getViewById("type").setDisabled(!0)):this.getViewById("type").setDisabled(!1)}},q.prototype.hide=function(){var S=this,q=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.getView().parentNode&&(M(this.getView()),q)){var W=this.v("type"),Z=this.v("property"),z=void 0;if("func"===W){var k=this.v("func").trim();(k||this.inspector.data instanceof JZ&&"type"===this.name)&&(z=j(this.v("head")+"\n"+k+"\n}"))}else Z&&"attr"===W&&(z="attr@"+Z);this.setter?this.setter(z):this.inspector.global?"clip"===this.name?this.inspector.dataModel.a("clip",z):this.inspector.dataModel.a(this.name+"_func",z):this.inspector.setValue(function(q,W){q.a(S.name,W)},z)}},q}(bW),kz=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));Z.editor=W,Z.createTabView();var z=[];return z.push({label:k("editor.ok"),action:function(){Z.ok()}}),z.push({label:k("editor.cancel"),action:function(){Z.hide()}}),Z.setConfig({title:k("editor.eventhandlers"),closable:!0,draggable:!0,width:jW.config.eventViewSize.width,height:jW.config.eventViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:Z.tabView,buttons:z,buttonsAlign:"right"}),Z.setModal(!1),Z}return uW(q,S),q.prototype.$48$=function(){this.hide()},q.prototype.$47$=function(){this.ok()},q.prototype.ok=function(S){var q=this;this.target&&(this.editor.beginTransaction(),iW.forEach(function(W){var Z=q[W+"FormPane"],z=Z.getFunctionValue();if("data"===q.inspectorType||"data3d"===q.inspectorType){var k=S?null:z;q.target.forEach(function(S){S.s(W,k)})}else{var Q=S?null:z;q.target.forEach(function(S){S.a(W,Q)})}}),this.editor.endTransaction()),this.callback&&this.callback(),this.hide()},q.prototype.createTabView=function(){var S=this,q=this.tabView=new HW;iW.forEach(function(W){var Z=S[W+"FormPane"]=new IZ({functionName:W});S[W+"Tab"]=q.add(k("editor.event."+W.toLowerCase()),Z)}),q.getTabModel().sm().ss(q.getTabModel().getDatas().get(0))},q.prototype.open=function(S,q,W){var Z=this;S&&S.length&&(this.target=S,this.inspectorType=q,this.callback=W,iW.forEach(function(W){var z=Z[W+"FormPane"];"data"===q||"data3d"===q?z.updateContent(S[S.length-1].s(W),[["Event","event","editor.comment.event"],["ht.Node","data","editor.comment.node"],"data3d"===q?["ht.graph3d.Graph3dView","view","editor.comment.graph3dview"]:["ht.graph.GraphView","view","editor.comment.graphview"]]):z.updateContent(S[S.length-1].a(W),[["Event","event","editor.comment.event"],["ht.Node","data","editor.comment.node"],["View","view","editor.comment.view"],["Point","point","editor.comment.componentpoint"],["Number","width","editor.comment.componentwidth"],["Number","height","editor.comment.componentheight"]])}),this.show(this.editor.$38$))},q.prototype.hide=function(){S.prototype.hide.call(this),this.target=this.inspectorType=this.callback=void 0},q}(GW);jW.EventView=kz;var Qz=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));Z.editor=W,Z.formPane=new IZ;var z=[];return z.push({label:k("editor.ok"),action:function(){Z.ok()}}),z.push({label:k("editor.cancel"),action:function(){Z.hide()}}),Z.setConfig({title:k("editor.function"),closable:!0,draggable:!0,width:jW.config.functionViewSize.width,height:jW.config.functionViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:Z.formPane,buttons:z,buttonsAlign:"right"}),Z.setModal(!1),Z}return uW(q,S),q.prototype.$48$=function(){this.hide()},q.prototype.$47$=function(){this.ok()},q.prototype.ok=function(){this.setValue&&this.setValue(this.formPane.getFunctionValue()),this.hide()},q.prototype.open=function(S,q,W,Z,z){this.setValue=q,this.setTitle(W),this.formPane.updateContent(S,Z),this.callback=z,this.show(this.editor.$38$)},q}(GW);ht.Default.setCompType("editor.comp.function.comment",{width:300,height:100,func:function(S,q,W,Z,z){var k=q.x,Q=q.y,U=q.width,u=q.height,D=W.getValue("dataSource"),G=W.getValue("collapse"),b=W.getColor("background"),v=W.getValue("font"),j=W.getColor("notes.color"),i=W.getColor("param.color"),n=W.getColor("type.color"),P=W.getColor("propertyName.color"),R=W.getColor("comment.color")||j,_=W.getValue("rowHeight")||ht.Default.getTextSize(v,"1").height;if(S.save(),b&&(S.fillStyle=b,S.fillRect(k,Q,U,u)),S.beginPath(),S.rect(k,Q,U,u),S.clip(),G)H(S,"/** ...",v,j,k,Q,U,_,"left","middle");else{H(S,"/**",v,j,k,Q,U,_,"left","middle");var x=S.measureText("/").width;D.forEach(function(q,W){var Z=x;H(S,"*",v,j,k+Z,Q+(W+1)*_,U,_,"left","middle"),Z+=S.measureText("* ").width,H(S,"@param",v,i,k+Z,Q+(W+1)*_,U,_,"left","middle"),Z+=S.measureText("@param  ").width,H(S,"{"+q[0]+"}",v,n,k+Z,Q+(W+1)*_,U,_,"left","middle"),Z+=S.measureText("{"+q[0]+"}  ").width,H(S,q[1],v,P,k+Z,Q+(W+1)*_,U,_,"left","middle"),Z+=S.measureText(q[1]+"  ").width,H(S,q[2],v,R,k+Z,Q+(W+1)*_,U,_,"left","middle")}),H(S,"*/",v,j,k+x,Q+(D.length+1)*_,U,_,"left","middle")}S.restore()},properties:{dataSource:{valueType:"Object",defaultValue:[]},font:{valueType:"Font",defaultValue:"12px sans-serif, Arial"},collapse:{valueType:"Boolean"},rowHeight:{valueType:"PositiveNumber",defaultValue:20},background:{valueType:"Color"},"notes.color":{valueType:"Color",defaultValue:"rgb(143,153,204)"},"param.color":{valueType:"Color",defaultValue:"rgb(13,171,214)"},"type.color":{valueType:"Color",defaultValue:"rgb(125,195,125)"},"propertyName.color":{valueType:"Color",defaultValue:"rgb(175,77,232)"},"comment.color":{valueType:"Color",defaultValue:"rgb(143,153,204)"}}}),function(S,q){ht.Default.setImage(S,q)}("editor.function.comment",{width:300,height:100,fitSize:!0,comps:[{type:"editor.comp.function.comment",rect:[0,0,300,100],dataSource:{func:"attr@dataSource"},rowHeight:{func:"attr@rowHeight"},background:{func:"attr@background"},collapse:{func:"attr@collapse"}}]});var Uz=function(S){function W(q){QW(this,W);var Z=DW(this,S.call(this));Z.editor=q,Z.formPane=new bW,Z.formPane.addRow([{id:"object",element:jq()}],[.1],.1);var z=[];return z.push({label:k("editor.ok"),action:function(){Z.ok()}}),z.push({label:k("editor.cancel"),action:function(){Z.hide()}}),Z.setConfig({title:k("editor.object"),closable:!0,draggable:!0,width:jW.config.objectViewSize.width,height:jW.config.objectViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:Z.formPane,buttons:z,buttonsAlign:"right"}),Z.setModal(!1),Z}return uW(W,S),W.prototype.$48$=function(){this.hide()},W.prototype.$47$=function(){this.ok()},W.prototype.ok=function(){this.setValue&&this.setValue(q(this.formPane.v("object"))),this.hide()},W.prototype.open=function(S,q,W,Z){if(this.setValue=q,this.setTitle(W),this.callback=Z,S=this.stringify(S)){this._funcMap;for(var z in this._funcMap)S=S.replace('"'+z+'"',b(this._funcMap[z]))}this.formPane.v("object",S),this.show(this.editor.$38$)},W.prototype.stringify=function(S,q){var W=this,Z=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()},this._funcMap={};var z=JSON.stringify(S,function(S,q){if("function"==typeof q){var Z=Math.random().toString().substring(3,16)+Date.now();return W._funcMap[Z]=q,Z}return q},null==q?2:q);return Date.prototype.toJSON=Z,z},W}(GW),uz=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));Z.editor=W,Z.formPane=new bW,Z.formPane.addRow([{id:"text",element:jq({value:"",language:"text",minimap:{enabled:!1}})}],[.1],.1);var z=[];return z.push({label:k("editor.ok"),action:function(){Z.ok()}}),z.push({label:k("editor.cancel"),action:function(){Z.hide()}}),Z.setConfig({closable:!0,draggable:!0,width:jW.config.textViewSize.width,height:jW.config.textViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:Z.formPane,buttons:z,buttonsAlign:"right"}),Z.setModal(!1),Z}return uW(q,S),q.prototype.$48$=function(){this.hide()},q.prototype.$47$=function(){this.ok()},q.prototype.ok=function(){this.setValue&&this.setValue(this.formPane.v("text").replace(/\r/g,"")),this.hide()},q.prototype.open=function(S,q,W,Z){this.setValue=q,this.setTitle(W),this.formPane.v("text",S||""),this.callback=Z,this.show(this.editor.$38$)},q}(GW),Dz=function(){function S(){QW(this,S)}return S.prototype.init=function(){var S=this.baseFonts=["monospace","sans-serif","serif"],q=this.testString="mmmmmmmmmmlli",W=this.testSize="72px",Z=this.h=document.getElementsByTagName("body")[0],z=this.s=document.createElement("span");z.style.fontSize=W,z.innerHTML=q;var k=this.defaultWidth={},Q=this.defaultHeight={};for(var U in S)z.style.fontFamily=S[U],Z.appendChild(z),k[S[U]]=z.offsetWidth,Q[S[U]]=z.offsetHeight,Z.removeChild(z);this.initialized=!0},S.prototype.detect=function(S){this.initialized||this.init();var q=!1,W=this.baseFonts,Z=this.s,z=this.h,k=this.defaultWidth,Q=this.defaultHeight;for(var U in W){Z.style.fontFamily=S+","+W[U],z.appendChild(Z);var u=Z.offsetWidth!=k[W[U]]||Z.offsetHeight!=Q[W[U]];z.removeChild(Z),q=q||u}return q},S}(),Gz=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));return Z.editor=W,Z}return uW(q,S),q.prototype.init=function(){var S=this;this._detector=new Dz;var q=this.borderPane=new YW,W=this.rightBorder=new YW,Z=this.previewGraph=new ht.graph.GraphView,z=this.listView=new wW,Q=this.formPane=new bW;z.getView().style.borderRight="2px solid #f7f7f7",z.getLabelFont=function(S){return"14px "+S.getName()},q.setLeftView(z),q.setCenterView(W),q.setLeftWidth(180),W.setBottomView(Z),W.setBottomHeight(120),W.setCenterView(Q),Z.adjustTranslateX=function(){return 0},Z.adjustTranslateY=function(){return 0},Z.handleScroll=function(){return!1},Z.setScrollBarVisible(!1);var U=this.textNode=new ht.Text;U.s({"2d.selectable":!1,text:jW.config.fontPreview}),U.setAnchor(0,0),U.setSize(2e3,120),U.p(4,4),Z.dm().add(U);Q.setVPadding(32),Q.setVGap(18),Q.setHGap(0),Q.addRow([{element:k("editor.font.style"),align:"right"},"",{id:"normal",button:this.createStyleButton(k("editor.font.normal"))},{id:"bold",button:this.createStyleButton(k("editor.font.bold"))},{id:"oblique",button:this.createStyleButton(k("editor.font.oblique"))},{id:"obliqueBold",button:this.createStyleButton(k("editor.font.obliquebold"))}],[60,8,.1,.1,.1,.1],32),Q.addRow([{element:k("editor.font.size"),align:"right"},"",{id:"fontSize",slider:{max:72,min:12,step:1,onValueChanged:function(q,W){Q.getItemById("fontSizeLabel").element=W+"",Q.iv(),S._handleFontChange()}}},{id:"fontSizeLabel",element:"12"}],[60,8,.1,20],32),Q.addRow([{element:k("editor.output"),align:"right"},"",{id:"fontOutput",textField:{editable:!1,value:this.getFontString()}}],[60,8,.1],32);var u=[];u.push({label:k("editor.ok"),action:function(){S.ok()}}),u.push({label:k("editor.cancel"),action:function(){S.hide()}}),this.initFontList(),this.setConfig({closable:!0,draggable:!0,width:jW.config.fontViewSize.width,height:jW.config.fontViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:q,buttons:u,buttonsAlign:"right"}),this._init=!0,this.setModal(!1)},q.prototype.createStyleButton=function(S){var q=this;return{label:S,groupId:"fontStyle",labelSelectColor:jW.config.color_select,labelColor:"#2c2c2c",borderSelectColor:"red",background:"rgb(247,247,247)",
selectBackground:"rgb(247,247,247)",togglable:!0,borderColor:null,onClicked:function(S){q._handleFontChange()}}},q.prototype.initFontList=function(){var S=this,q=this.listView,W=q.getView().style,Z=q.dm(),z=this._detector,k=jW.config.fontList,Q=jW.config.ignoreFontDetection;return q.sm().ms(function(q){S._handleFontChange(q)}),k.forEach(function(S){if(Q||z.detect(S)){var q=new ht.Node;q.setIcon(null),q.setName(S),Z.add(q)}}),Z.sm().setSelectionMode("multiple"),W.background="white",q},q.prototype.$48$=function(){this.hide()},q.prototype.$47$=function(){this.ok()},q.prototype._handleFontChange=function(){this.textNode.s("text.font",this.getFontString()),this.formPane.v("fontOutput",this.getFontString())},q.prototype.getFontString=function(){var S=this.listView,q=this.formPane,W=S.sm().getSelection().toArray(),Z="",z=W.map(function(S){return S.getName()});return z.length||(z=["arial"]),["bold","oblique","obliqueBold"].forEach(function(S,W){q.getItemById(S).element.isSelected()&&(0===W?Z="bold ":1===W?Z="italic ":2===W&&(Z="italic bold "))}),""+Z+q.getValue("fontSize")+"px "+z.join(", ")},q.prototype.ok=function(){this.setValue&&this.setValue(this.getFontString()),this.hide()},q.prototype.analysisFontString=function(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht.Default.labelFont;"string"!=typeof S&&(S=ht.Default.labelFont);var q=S.split(/px\s+/);q.length<2&&(q=ht.Default.labelFont.split(/px\s+/));var W=q[0].split(/\s+/),Z=q[1].split(",").map(function(S){return S.trim()}),z=/\d+/,k=void 0,Q=void 0,U=void 0;W.forEach(function(S){"bold"===S?k=!0:"oblique"===S||"italic"===S?Q=!0:z.test(S)&&(U=parseInt(S))}),this.setFormValue(U,Z,k,Q)},q.prototype.setFormValue=function(S,q,W,Z){var z=this.listView,k=this.formPane;z.sm().cs(),z.dm().each(function(S){q.forEach(function(q){S.getName().toLowerCase()===q.toLowerCase()&&z.sm().as(S)})});var Q=0;W&&Z?Q=3:W?Q=1:Z&&(Q=2),["normal","bold","oblique","obliqueBold"].forEach(function(S,q){k.getItemById(S).element.setSelected(Q===q)}),k.getItemById("fontSizeLabel").element=S+"",k.setValue("fontSize",S)},q.prototype.open=function(S,q,W,Z){this._init||this.init(),this.setValue=q,this.setTitle(W),this.analysisFontString(S),this.callback=Z,this.show(this.editor.$38$)},q}(GW),bz=300,vz=230,jz=function(S){function W(q){QW(this,W);var Z=DW(this,S.call(this));Z.editor=q,Z.addRow([{id:"content",element:jq()}],[.1],.1),Z.addRow([null,{button:{label:k("editor.ok"),onClicked:function(){Z.hide(!0)}}},{button:{label:k("editor.cancel"),onClicked:function(){Z.hide()}}}],[.1,50,50]),Z.setWidth(bz),Z.setHeight(vz),Z.getView().className="ht-editor-styleicons",Z.getView().style.background=jW.config.color_pane,Z.getView().style.border=jW.config.color_pane_dark+" solid 1px",Z.getView().style.boxShadow="0px 0px 3px "+ht.Default.toolTipShadowColor,Z.getView().style.overflow="visible";var z=function(S){!Z.getView().parentNode||Z.button.getView().contains(S.target)||Z.getView().contains(S.target)||Z.hide()};return window.addEventListener("mousedown",z,!1),window.addEventListener("touchstart",z,!1),Z}return uW(W,S),W.prototype.toggle=function(S,q){this.getView().parentNode?this.hide():this.show(S,q)},W.prototype.show=function(S,q){if(!this.getView().parentNode){var W=S.getView().getBoundingClientRect(),Z=(this.getView().style,L());ht.Default.appendToScreen(this),this.getView().style.top=Z.top+W.top+"px",this.getView().style.left=Z.left+W.left-bz-4+"px",this.iv(),this.button=S,this.data=q;var z=q.s("icons");this.v("content",z?J(z,void 0,!1):"")}},W.prototype.hide=function(){var S=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getView().parentNode&&(M(this.getView()),S&&this.data.s("icons",q(this.v("content"))))},W}(bW),iz=function(){function S(q){var W=this;QW(this,S),this.editor=q;var Z=this.container=ht.Default.createDiv(),z=this.wrap=ht.Default.createDiv(),k=Z.style;k.pointerEvents="none",k.position="absolute",k.left=0,k.right=0,k.top=0,k.bottom=0,Z.appendChild(z),k=z.style,k.width="500px",k.position="absolute",k.left="50%",k.bottom="20px",k.marginLeft="-300px",k.pointerEvents="none",this._cache=[],this._visibleCount=0,this.layoutContainer(),window.addEventListener("resize",function(){W.layoutContainer()})}return S.prototype.layoutContainer=function(){var S=this.container,q=ht.Default.getWindowInfo(),W=S.style;W.width=q.width+"px",W.height=q.height+"px"},S.prototype.createMessage=function(S){var q=this._cache.pop();if(!q){q=document.createElement("div");var W=q.style;W.boxSizing="border-box",W.padding=0,W.color="rgb(247,247,247)",W.margin="5px auto",W.textAlign="center",W.fontSize="14px",W.borderRadius="3px",W.height=0,W.overflow="hidden",W.pointerEvents="none",W.boxShadow="rgba(0,0,0,0.1) 1px 1px 2px",W.webkitTransition="0.3s all",W.mozTransition="0.3s all",W.msTransition="0.3s all",W.oTransition="0.3s all",W.transition="0.3s all"}return q.innerHTML=S,q},S.prototype.show=function(S){var q=this,W=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,z=this.createMessage(S);this.wrap.appendChild(z),this._visibleCount||ht.Default.appendToScreen(this.container),this._visibleCount++,z.style.backgroundImage="normal"===W?"linear-gradient(rgba(95, 156, 210, 0.8),rgba(112, 193, 244, 0.3))":"linear-gradient(rgba(242,83,75,0.8),rgba(242,83,75,0.3))",setTimeout(function(){z.style.height="",z.style.padding="6px 12px",q.hideLater(z,Z)},10)},S.prototype.hideLater=function(S,q){var W=this;setTimeout(function(){S.style.height=0,S.style.padding=0,setTimeout(function(){if(W.wrap.removeChild(S),W._cache.push(S),!--W._visibleCount){W.container.parentNode.removeChild(W.container)}},500)},q)},S}(),nz=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));return Z.editor=W,Z}return uW(q,S),q.prototype.init=function(){var S=this,q=this.dm=new ht.DataModel,W=this.gv=new ht.graph.GraphView(q),Z=this.rightFormPane=new bW,z=this.splitView=new FW(W,Z,"h",.6),Q=this.targetNode=new ht.Node;Q.setAnchor(0,0),Q.p(0,0),Q.s("2d.selectable",!1),W.dm().add(Q),W.setEditable(!0),W.addBottomPainter(function(S){var q=this.getViewRect();S.fillStyle="#cbd3d8",S.fillRect(q.x,q.y,q.width,q.height);var W=Q.getRect();S.fillStyle="#fff",S.fillRect(W.x,W.y,W.width,W.height)});var U=[{label:k("editor.ok"),action:function(){S.editor.dm.a("attachPoints",S.toPointsData()),S.hide()}},{label:k("editor.cancel"),action:function(){S.hide()}}];this.setConfig({title:"\u5438\u9644\u70b9",content:z,closable:!0,draggable:!0,maximizable:!0,resizeMode:"wh",buttons:U,width:jW.config.attachPointsViewSize.width,height:jW.config.attachPointsViewSize.height}),this.$80$(),q.md(function(S){if("position"===S.property&&S.data!==Q){var q=S.data,W=q.a("offsetX"),Z=q.a("offsetY"),z=S.newValue.x-W,k=S.newValue.y-Z;q.a({x:parseFloat((z/Q.getWidth()).toFixed(2)),y:parseFloat((k/Q.getHeight()).toFixed(2))})}}),W.mp(function(S){if("zoom"===S.property){var Z=1/W.getZoom();q.each(function(S){S!==Q&&S.setScale(Z,Z)})}}),this._init=!0},q.prototype.$80$=function(){var S=this,q=new pW(this.dm),W=this.tableView=q.getTableView();W.isVisible=function(q){return q!==S.targetNode},W.setEditable(!0),q.getView().style.border=jW.config.color_line+" solid 1px",q.addColumns([this.$73$("x",k("editor.attach.x"),70,function(q,W,Z,z){var k=S.targetNode.getWidth();q.setX(k*Z+(q.a("offsetX")||0))}),this.$73$("y",k("editor.attach.y"),70,function(q,W,Z,z){var k=S.targetNode.getHeight();q.setY(k*Z+(q.a("offsetY")||0))}),this.$73$("offsetX",k("editor.attach.offsetX"),70,function(q,W,Z,z){q.a("offsetX",Z);var k=S.targetNode.getWidth();q.setX(k*q.a("x")+Z)}),this.$73$("offsetY",k("editor.attach.offsetY"),70,function(q,W,Z,z){q.a("offsetY",Z);var k=S.targetNode.getHeight();q.setY(k*q.a("y")+Z)})]);var Z=jW.config.customAttachPointsColumns;if(Z&&Z.length){var z=this.customColumns=Z.map(function(q){return S.$73$(q.name,q.displayName,q.width||70,q.setter,"string")});q.addColumns(z)}this.rightFormPane.addRow([q],[.1],200),this.rightFormPane.addRow([{button:{icon:"editor.add",toolTip:k("editor.add"),onClicked:function(){S.add()}}},{button:{icon:"editor.delete",toolTip:k("editor.delete"),onClicked:function(){S.remove()}}}],[20,20],20)},q.prototype.add=function(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,z=arguments[4],k=new ht.Node,Q=1/this.gv.getZoom();if(k.setImage("editor.attachPoint"),k.setScale(Q,Q),k.a({x:S,y:q,offsetX:W,offsetY:Z}),k.s({"2d.editable":!1}),z)for(var U in z)"x"!==U&&"y"!==U&&"offsetX"!==U&&"offsetY"!==U&&k.a(U,z[U]);var u=this.targetNode.getWidth(),D=this.targetNode.getHeight();return k.p(S*u+W,q*D+Z),this.gv.dm().add(k),k},q.prototype.remove=function(){for(var S=this.dm.sm().getSelection().toArray(),q=S.length-1;q>=0;q--)this.dm.remove(S[q])},q.prototype.$73$=function(S,q,W,Z){var z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"number";return{name:S,tag:S,width:W,displayName:q,align:"center",editable:!0,valueType:z,getValue:function(q){return q.a(S)},setValue:Z}},q.prototype.toPointsData=function(){var S=this;return this.dm.toDatas(function(q){return q!==S.targetNode}).toArray().map(function(q){var W={x:q.a("x"),y:q.a("y")};return q.a("offsetX")&&(W.offsetX=q.a("offsetX")),q.a("offsetY")&&(W.offsetY=q.a("offsetY")),S.customColumns&&S.customColumns.forEach(function(S){var Z=q.a(S.name);Z&&(W[S.name]=Z)}),W})},q.prototype.$48$=function(){this.hide()},q.prototype.createNodeByPointData=function(){var S=this,q=this.editor.dm.a("attachPoints");q&&q.forEach(function(q){S.add(q.x,q.y,q.offsetX,q.offsetY,q)})},q.prototype.show=function(q){this._init||this.init(),this.dm.clear(),this.dm.add(this.targetNode),this.targetNode.setImage(q),this.createNodeByPointData(),S.prototype.show.call(this,this.editor.$38$),this.gv.fitContent(!0)},q}(GW),Pz=function S(q,W){var Z=this;QW(this,S),this.editor=q,this.inspector=W,["isDataTitleVisible","isDataPropertyVisible","isCompTitleVisible","isCompPropertyVisible","isDisplayTitleVisible","isDisplayPropertyVisible","isSymbolTitleVisible","isSymbolPropertyVisible","isData3dTitleVisible","isData3dPropertyVisible","isSceneTitleVisible","isScenePropertyVisible"].forEach(function(S){var z=jW.config.detailFilter,k=jW.config.compactFilter,Q=G(k);Z[S]=function(){if(z[S]&&!z[S].apply(W,arguments))return!1;if(jW.config.commonAndAdvancedFilterMode){if(q.inspectorCompact)return!(k[S]&&!k[S].apply(W,arguments));if(Q)return!0;if(k[S]&&!k[S].apply(W,arguments))return!0;if(S.indexOf("Title")>0)return!0;var Z=W._currentTitle;return!("isDataPropertyVisible"!==S||!k.isDataTitleVisible||k.isDataTitleVisible.call(W,arguments[0],arguments[1],Z))||(!("isCompPropertyVisible"!==S||!k.isCompTitleVisible||k.isCompTitleVisible.call(W,arguments[0],arguments[1],Z))||(!("isDisplayPropertyVisible"!==S||!k.isDisplayTitleVisible||k.isDisplayTitleVisible.call(W,arguments[0],Z))||(!("isSymbolPropertyVisible"!==S||!k.isSymbolTitleVisible||k.isSymbolTitleVisible.call(W,arguments[0],Z))||(!("isData3dPropertyVisible"!==S||!k.isData3dTitleVisible||k.isData3dTitleVisible.call(W,arguments[0],arguments[1],Z))||!("isScenePropertyVisible"!==S||!k.isSceneTitleVisible||k.isSceneTitleVisible.call(W,arguments[0],Z))))))}return!(q.inspectorCompact&&k[S]&&!k[S].apply(W,arguments))}})},Rz=ht.Default.labelColor,_z=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this,W)),z=Z.gv=new ht.graph.GraphView,k=z.dm();z.setMovableFunc(function(){return!1}),z.setZoomable(!1),z.setPannable(!1),z.setPannable(!1),z.setRectSelectable(!1),z.setScrollBarVisible(!1),z.sm().setSelectionMode("single"),k.setBackground(jW.config.color_pane);for(var Q=1;Q<56;Q++){var U=new ht.Node;U.setTag(Q),U.setRect(80,60,300,160),U.s({label:"   "+Q+"   ","label.position":Q,"label.offset.x":0,"label.offset.y":0,"label.color":Rz,"label.font":"18px Arial",shape:"rect","shape.background":null,"shape.border.width":1,"select.width":0,interactive:!0}),k.add(U)}z.sm().ms(function(S){!Z._openSetting&&z.sm().ld()&&W.close()});var u=ht.Default.brighter(jW.config.color_select,50);return z.mi(function(S){var q=S.data,W=S.kind;"onEnter"===W?(q._hover=!0,q.iv()):"onLeave"===W&&(q._hover=!1,q.iv())}),z.getLabelBackground=function(S){return z.isSelected(S)?jW.config.color_select:S._hover?u:null},Z}return uW(q,S),q.prototype.getView=function(){return this.gv.getView()},q.prototype.getValue=function(){var S=this.gv.sm().ld();return S?S.s("label.position"):this._sourceValue},q.prototype.getWidth=function(){return 360},q.prototype.getHeight=function(){return 220},q.prototype.onOpened=function(S){var q=this.gv,W=q.dm().getDataByTag(S);this._openSetting=!0,q.sm().ss(W),this._openSetting=!1,this._sourceValue=S,q.fitContent(!1,0)},q.prototype.onClosed=function(){},q}(ht.widget.BaseDropDownTemplate),xz=function(S){function q(W,Z,z){var k=arguments.length>3&&void 0!==arguments[3]&&arguments[3];QW(this,q);var Q=DW(this,S.call(this));Q.setHPadding(8),Q.setVPadding(0);var U=jW.config.indent,u=Q.getHGap();return Q.indent=U,Q.indent2=jW.config.indent2,Q.w1=[U,.1],Q.w1w1=[U,.1,U,.1],Q.wcc=[U,40+2*u+"+0.1",U,20,.1,20],Q.w2=[U-20-u,20,.1,U,.1],Q.w3=[U-20-u,20,.1,20,.1,20,.1],Q.w20=20+u+"+0.1",Q.global=k,Q.editor=W,Q.name=Z,Q.type=z,Q.inspectorFilter=new Pz(W,Q),Q.updateHandlers=[],Q.propertyChangeHandlers=[],Q.editor.fireEvent("inspectorInitializing",{inspector:Q}),Q.initForm(),Q.editor.fireEvent("inspectorInitialized",{inspector:Q}),Q.editor.fireEvent("inspectorCreated",{inspector:Q}),Q.$46$=Q._rows,Q.selection=void 0,Q}return uW(q,S),q.prototype.initForm=function(){},q.prototype.beginTransaction=function(){this.dataModel&&this.dataModel.beginTransaction()},q.prototype.endTransaction=function(){this.dataModel&&this.dataModel.endTransaction()},q.prototype.addUpdateHandler=function(S){this.updateHandlers.push(S)},q.prototype.removeUpdateHandler=function(S){D(this.updateHandlers,S)},q.prototype.addPropertyChangeHandler=function(S){this.propertyChangeHandlers.push(S)},q.prototype.removePropertyChangeHandler=function(S){D(this.propertyChangeHandlers,S)},q.prototype.$102$=function(){for(var S=this._rows,q=!0,W=S.length-1;W>=0;W--)S[W].title?q?this.removeRow(S[W]):q=!0:q=!1},q.prototype.isTitleVisible=function(S){return!1!==S.visible&&(!VS(S.visible)||!1!==S.visible(this))},q.prototype.isPropertyVisible=function(S){if(!1===S.visible)return!1;if(VS(S.visible)&&!S.visible(this))return!1;var q=this.editor.inspectorInputFilter;if(q){if(!S.keys)return!1;q=q.toLowerCase();var W=S.keys.name;if(W&&W.toLowerCase().indexOf(q)>=0)return!0;var Z=S.keys.displayName;return!!(Z&&Z.toLowerCase().indexOf(q)>=0)}return!0},q.prototype.makeItemsHidden=function(S){var q=this;S.hidden=!0,S.forEach(function(S){var W=q.getItemView(S);W&&(W.style.display="none")})},q.prototype.makeItemsVisible=function(S){var q=this;S.hidden=!1,S.forEach(function(S){var W=q.getItemView(S);W&&(W.style.display="block")})},q.prototype.filterPropertiesLater=function(){var S=this;this._filterPropertiesLater||(this._filterPropertiesLater=!0,requestAnimationFrame(function(){S.filterProperties()}))},q.prototype.isTitleExpanded=function(S){return!(S&&!this.editor.inspectorInputFilter)||jW.config.expandedTitles[S]},q.prototype.filterProperties=function(){var S=this;this._filterPropertiesLater=!1;var q=[];this._currentTitle=null;var W=!1;this.$46$.forEach(function(Z){var z=Z.items;Z.title?(!W&&"$$HTISFUCKINGAWESOME$$"!==S._currentTitle&&q.length&&q[q.length-1].title&&S.makeItemsHidden(q.pop().items),S.isTitleVisible(Z)?(S._currentTitle=Z.title,Z.button.setIcon(S.isTitleExpanded(S._currentTitle)?"expandIcon":"collapseIcon"),q.push(Z),S.makeItemsVisible(z)):(S._currentTitle="$$HTISFUCKINGAWESOME$$",S.makeItemsHidden(z)),W=!1):"$$HTISFUCKINGAWESOME$$"===S._currentTitle?S.makeItemsHidden(z):(S.isTitleExpanded(S._currentTitle)&&S.isPropertyVisible(Z)?(q.push(Z),S.makeItemsVisible(z)):S.makeItemsHidden(z),!W&&S.isPropertyVisible(Z)&&(W=!0))}),!W&&"$$HTISFUCKINGAWESOME$$"!==this._currentTitle&&q.length&&q[q.length-1].title&&this.makeItemsHidden(q.pop().items),this._currentTitle=null,this._rows=q,this.updateProperties(),this.iv()},q.prototype.addTitle=function(S,q){var W=this;q=q||{};var Z=this._oldTitle;this.editor.fireEvent("titleCreating",{oldTitle:Z,title:S,inspector:this});var z=function(){jW.config.expandedTitles[S]=!jW.config.expandedTitles[S],W.filterProperties()},k=[],Q=this.addButton(k,null,null,null,z,!0);Q.setBorderColor(null),q.icon&&this.addImage(k,function(){return q.icon}),this.addTitleItem(k,S,q),q.title=S,q.background||(q.background=jW.config.inspectorTitleBackground||jW.config.color_pane_dark),q.button=Q;var U=[20,.1];q.icon&&(U=[20,20,.1]);var u=q.buttons;if(u){var D=void 0,G=void 0;if(CS(u)?D=u:(D=u.items,G=u.widths),!G){G=[];for(var b=0,v=D.length;b<v;b++)G.push(20)}k.push.apply(k,D),U.push.apply(U,G)}var j=this.addRow(k,U,jW.config.inspectorTitleHeight||null,q);return this._oldTitle=S,this.editor.fireEvent("titleCreated",{oldTitle:Z,title:S,inspector:this}),j},q.prototype.addTitleItem=function(S,q,W){var Z=k("editor."+q.toLowerCase(),!0)||k(q);S.push({element:Z,font:jW.config.boldFont})},q.prototype.$34$=function(S){var q=this;S&&(this.propertyChangeHandlers.forEach(function(W){W(S,q)}),this.$46$.forEach(function(W){W.onPropertyChanged&&W.onPropertyChanged(S,q)})),this._updatePropertiesLater||(this._updatePropertiesLater=!0,requestAnimationFrame(function(){q.updateProperties()}))},q.prototype.updateProperties=function(){this._updating=!0,this.updateHandlers.forEach(function(S){S()}),this.editor.fireEvent("propertiesUpdated",{inspector:this}),this._updating=!1,this._updatePropertiesLater=!1},q.prototype.eachSelection=function(S){this.dataModel&&(this.beginTransaction(),this.dataModel.sm().each(function(q){S(q)}),this.endTransaction())},q.prototype.getPropertyValue=function(S,q){q=this.fixAccessType(q);var W=i(q,S);return this.getValue(W)},q.prototype.setPropertyValue=function(S,q,W,Z){W=this.fixAccessType(W);var z=n(W,S);z.once=Z,this.setValue(z,q)},q.prototype.getValue=function(S){if(this.dataModel)return this.global?S(this.dataModel):this.data?S(this.data):void 0},q.prototype.setValue=function(S,q,W){if(!this._updating&&this.dataModel&&this.editor.editable){if(this.beginTransaction(),this.global)S(this.dataModel,W?W():q);else if(S.once)this.data&&S(this.data);else{var Z=this.selection;Z&&0!==Z.length||(Z=this.editor.selection),Z.forEach(function(Z){S(Z,W?W():q)})}this.endTransaction()}},q.prototype.addLabelArray=function(S,q,W,Z,z,k){return this.addLabel(S,q,W,Z,void 0,k),this.addArray(S,W,Z,z)},q.prototype.addLabelTextArea=function(S,q,W,Z,z){return this.addLabel(S,q,W,Z,void 0,z),this.addTextArea(S,W,Z)},q.prototype.addLabelMultiline=function(S,q,W,Z,z){var k=this,Q=this.addLabelInput(S,q,W,Z,void 0,void 0,void 0,z);return this.addButton(S,"...",null,null,function(S){k.selection=k.editor.selection;var z=function(S){k.setValue(Z,S),k.selection=void 0};k.editor.textView.open(k.getValue(W),z,q,function(){return k.selection=void 0})},!0),Q},q.prototype.addLabelInput=function(S,q,W,Z,z,k,Q,U){return this.addLabel(S,q,W,Z,k,U),this.addInput(S,W,Z,z,Q,k)},q.prototype.addLabelRange=function(S,q,W,Z,z,k,Q,U,u){var D=this,G=function(S){var q=W(S);return null==q?k:q};return this.addLabelInput(S,q,G,Z?function(S,q){void 0!==k&&q>k&&(q=k),void 0!==z&&q<z&&(q=z);var W=G(S);Z(S,q),W!==q||W!==k&&W!==z||D.updateProperties()}:null,U,Q,void 0,u)},q.prototype.addLabelPosition=function(S,q,W,Z,z){var k=this,Q=function(S){var q=W(S);return null==q?1:q},U=function(S,q){q>55&&(q=55),q<1&&(q=1),Z(S,q)};this.addLabel(S,q,Q,U,1,z);var u=new ht.widget.MultiComboBox;return u.setEditable(!0),u.setDropDownComponent(_z),u.onValueChanged=function(S,q){k.setValue(Z,q)},S.push(u),this.updateHandlers.push(function(){var S=k.getValue(Q);u.setValue(S)}),u},q.prototype.addLabelColor=function(S,q,W,Z,z){return this.addLabel(S,q,W,Z,void 0,z),this.addColor(S,W,Z)},q.prototype.addLabelCheckBox=function(S,q,W,Z,z){return this.addLabel(S,q,W,Z,void 0,z),this.addCheckBox(S,W,Z)},q.prototype.addLabelFunction=function(S,q,W,Z,z,k,Q){return this.addLabel(S,q,W,Z,void 0,Q),this.addFunction(S,W,Z,z,k)},q.prototype.addLabelDataModel=function(S,q,W,Z,z,k,Q){return this.addLabel(S,q,W,Z,void 0,Q),this.addDataModel(S,W,Z,z,k)},q.prototype.addLabelObject=function(S,q,W,Z,z,k){return this.addLabel(S,q,W,Z,void 0,k),this.addObject(S,W,Z,z)},q.prototype.addLabelComboBox=function(S,q,W,Z,z,k,Q,U){return this.addLabel(S,q,W,Z,void 0,U),this.addComboBox(S,W,Z,z,k,Q)},q.prototype.addLabelComboBoxURL=function(S,q,W,Z,z,k,Q,U,u){var D=this;this.addLabel(S,q,W,Z,void 0,u);var G=this.addComboBox(S,W,Z,z,k,Q);return Z&&(G.setEditable(!0),Nq(G,U||function(S,q){return!!q.view.draggingData},function(S){var q=G.getView().value=S.getFileUUID();D.setValue(Z,q)})),G},q.prototype.addLabelURL=function(S,q,W,Z,z,k){return this.addLabel(S,q,W,Z,void 0,k),this.addURL(S,W,Z,z)},q.prototype.addURL=function(S,q,W,Z){var z=this.addInput(S,q,W);return W&&Nq(z,Z||function(S,q){return!!q.view.draggingData},function(S){z.getElement().value=S.getFileUUID(),z.handleChange()}),z},q.prototype.addLabelImage=function(S,q,W,Z,z){var k=function(S,q){if(!q.view.draggingData)return!1;var W=q.view.draggingData.fileType;return W===_W||W===xW};return this.addLabelURL(S,q,W,Z,k,z),this.addImage(S,W,Z)},q.prototype.addLabelData=function(S,q,W,Z,z){var k=this,Q=this.addLabelInput(S,q,function(S){var q=W(S);return q?q.toLabel()||q.getClassName():""},void 0,void 0,void 0,void 0,z);Z&&(Nq(Q,function(S,q){return q.view.draggingData&&k.dataModel===q.view.draggingData.getDataModel()},function(S){k.setValue(Z,S)}),Q.getElement().onkeydown=function(S){N(S)&&k.setValue(Z,null)});var U=new ht.widget.Image;return U.drawImage=function(S,q,W,Z,z,Q){var u=U.data,D=k.editor.list;u&&D&&D.dm().contains(u)&&(q=D.getIcon(u))&&E(S,ht.Default.getImage(q),"centerUniform",W,Z,z,Q,u,D)},this.updateHandlers.push(function(){if(!S.hidden){var q=U.data;U.data=k.getValue(W),U.fp("data",q,U.data)}}),S.push(U),Q},q.prototype.addLabelGradient=function(S,q,W,Z,z,k){var Q=this,U=[],u=function(){return Q.data&&Q.data.s(z)||jW.config.color_light},D=function(){return Q.data&&Q.data.s(Z)||jW.config.color_select};jW.consts.gradients.forEach(function(S){S?U.push({width:20,height:14,comps:[{type:"rect",rect:[0,0,20,14],gradient:S,gradientColor:{func:u},background:{func:D}}]}):U.push({width:20,height:14,comps:[]})});var G=this.addLabelComboBox(S,q,function(S){return S.s(W)},function(S,q){S.s(W,q)},jW.consts.gradients,null,U,k);return this.updateHandlers.push(function(){if(!S.hidden){var q=u(),W=D();G._lastGradientColor===q&&G._lastBackground===W||(G._lastGradientColor=q,G._lastBackground=W,G.iv())}}),G},q.prototype.addLabelFont=function(S,q,W,Z,z){var k=this,Q=this.addLabelInput(S,q,function(S){return W(S)||ht.Default.labelFont},Z?function(S,q){Z(S,q||void 0)}:null,void 0,void 0,void 0,z);return this.addButton(S,"...",null,null,function(S){k.selection=k.editor.selection;var z=function(S){k.setValue(Z,S),k.selection=void 0};k.editor.fontView.open(k.getValue(W),z,q,function(){return k.selection=void 0})},!0),Q},q.prototype.addLabelRotation=function(S,q,W,Z,z,k,Q,U){return this.addLabelInput(S,q,function(S){return null==W(S)?k:180/Math.PI*W(S)},Z?function(S,q){q=q*Math.PI/180,void 0!==k&&q>k&&(q=k),void 0!==z&&q<z&&(q=z),Z(S,q)}:null,"number",Q||1,void 0,U)},q.prototype.addLabelAlign=function(S,q,W,Z,z){return this.addLabelComboBox(S,q,function(S){return W(S)||"center"},Z,jW.consts.aligns,jW.consts.alignLabels,void 0,z)},q.prototype.addLabelVAlign=function(S,q,W,Z,z){return this.addLabelComboBox(S,q,function(S){return W(S)||"bottom"},Z,jW.consts.vAligns,jW.consts.vAlignLabels,void 0,z)},q.prototype.addLabelStretch=function(S,q,W,Z,z){return this.addLabelComboBox(S,q,function(S){return W(S)||"fill"},Z,jW.consts.stretchs,jW.consts.stretchLabels,void 0,z)},q.prototype.addLabelOrientation=function(S,q,W,Z,z){return this.addLabelComboBox(S,q,function(S){return W(S)||"top"},Z,jW.consts.orientations,jW.consts.orientationLabels,void 0,z)},q.prototype.addLabelLabel=function(S,q,W,Z,z){return this.addLabelInput(S,q,function(S){var q=W(S);return q&&q.replace&&(q=q.replace(/\n/g,"\\n")),q},Z?function(S,q){q&&q.replace&&(q=q.replace(/\\n/g,"\n")),Z(S,q)}:null,void 0,void 0,void 0,z)},q.prototype.toDisplayName=function(S){var q="";return S.forEach(function(S){if(S)if(NS(S))q+=S;else if(NS(S.element))q+=S.element;else{if(!S.element)return;S.element.innerHTML&&(q+=S.element.innerHTML)}}),q},q.prototype.addLabel=function(S,q,W,Z,z,k){var Q=this,U=void 0,u=!1,D=W&&Z&&z,G=jW.config.dataBindings;if(k&&G.onButtonClicked&&(!G.filter||G.filter(k.accessType,k.name,this))&&(u=!0),u||D){U=Zq(q,S.length?"right":"left"),S.push(U),U.style.cursor=D?"ew-resize":"pointer";var b=function(S){S.preventDefault(),Q.beginTransaction();var q=D?Q.getValue(W)||0:0,U=C(S).x,G=!1,b=function(S){if(S.preventDefault(),D){var W=q+(C(S).x-U)*(VS(z)?z():z);Q.setValue(Z,W),G=!0}};window.addEventListener("mousemove",b,!1),window.addEventListener("touchmove",b,!1);var v=function(S){Q.endTransaction(),S.preventDefault(),window.removeEventListener("mousemove",b,!1),window.removeEventListener("touchmove",b,!1),window.removeEventListener("mouseup",v,!1),window.removeEventListener("touchend",v,!1),u&&!G&&jW.config.dataBindings.onButtonClicked(Q.data,k.accessType,k.name,Q.editor)};window.addEventListener("mouseup",v,!1),window.addEventListener("touchend",v,!1)};U.addEventListener("mousedown",b,!1),U.addEventListener("touchstart",b,!1)}else U={element:q,align:S.length?"right":"left"},S.push(U);return u&&this.updateHandlers.push(function(){if(Q.data){var S=jW.config.isDataBound(Q.data,k.accessType,k.name);U.style.color=S?jW.config.color_select:jW.config.color_dark}}),U},q.prototype.createHandleChange=function(S,q,W){var Z=this;return function(){var z=S.value;if("pattern"===W)if(z=z.trim()){if(z.indexOf("[")<0||z.indexOf("]")<0)return;if(z=z.replace("[","").replace("]","").split(","),z.length){for(var k=[],Q=0;Q<z.length;Q++){var U=parseFloat(z[Q]);if(isNaN(U))return;k.push(U)}z=k}else z=void 0}else z=void 0;else if("number"===W){if(z=parseFloat(z),isNaN(z))return}else if("int"===W){if(z=parseInt(z),isNaN(z))return}else z||(z=void 0);Z.setValue(q,z)}},q.prototype.createArrayIndexColumn=function(S,q,W,z){var Q=this,U=S[q],u="object"===z?J(U,void 0,!1):U;return{name:q,width:50,align:"center",editable:!!W,sortable:!1,clickable:!1,getValueType:function(S){return z},getValue:function(S){return u},setValue:function(z,k,U,u){Q.setValue(W,void 0,function(){var W=S.slice();return W[q]=Z(U),W})},isCellEditable:function(S,W,Z,u){if(!Q.editor.editable)return!1;if("object"===z){var D=k("editor.object")+" ["+q+"]";return Q.editor.objectView.open(U,function(q){W.setValue(S,W,q,u)},D),!1}return!0}}},q.prototype.addArray=function(S,q,W,Z){var z=this,Q=new pW;Q.getTableHeader().setMovable(!1),Q.getView().style.border=jW.config.color_line+" solid 1px";var U=Q.getTableView();return U.getDataModel().add(new ht.Data),this.updateHandlers.push(function(){if(!S.hidden){var u=z.getValue(q);if(U.getColumnModel().clear(),Q.addColumns([{name:k("editor.length"),width:50,align:"center",editable:!!W,sortable:!1,clickable:!1,valueType:"int",getValue:function(S){return u?u.length:0},setValue:function(S,q,k,Q){z.setValue(W,void 0,function(){if(k>=0){var S=Gq(u,k);return"number"===Z||"int"===Z?uq(S):"color"===Z&&Dq(S),S}})}}]),u){for(var D=[],G=0;G<u.length;G++)D.push(z.createArrayIndexColumn(u,G,W,Z));Q.addColumns(D)}}}),S.push(Q),Q},q.prototype.addTextArea=function(S,q,W){var Z=this,z=new ht.widget.TextArea,k=z.getElement();return W?(k.onblur=function(){Z.setValue(W,k.value)},k.forceOnblur=k.onblur):z.setEditable(!1),this.updateHandlers.push(function(){if(!S.hidden){var W=Z.getValue(q);null==W&&(W=""),k.value!==W&&(k.value=W)}}),S.push(z),z},q.prototype.addInput=function(S,q,W,Z,k,Q){var U=this,u=new ht.widget.TextField;"number"!==Z&&"int"!==Z||(u.setType("number"),mS(Q)&&(u.getElement().step=Q));var D=u.getElement();if(W){var G=this.createHandleChange(D,W,Z);u.handleChange=G,k?(D.onkeyup=G,D.onchange=G):(D.onblur=G,D.forceOnblur=D.onblur,D.onkeydown=function(S){K(S)&&G()})}else u.setEditable(!1);return this.updateHandlers.push(function(){if(!S.hidden){var W=U.getValue(q);"pattern"===Z?W=W?"["+W.join()+"]":"":"number"===Z?W=z(parseFloat(W||0)):"int"===Z?W=parseInt(W||0):null==W&&(W=""),D.value!==W&&(NS(W)&&W.length>1e3&&W.startsWith("data:image")&&(W=W.substr(0,10)+"[...]"),D.value=W)}}),S.push(u),u},q.prototype.addColor=function(S,q,W){var Z=this,z=new ht.widget.ColorPicker;return W?(z.setInstant(!0),z.onValueChanged=function(){Z.setValue(W,z.getValue())},z.addViewListener(function(S){"open"===S.kind?Z.beginTransaction():"close"===S.kind&&Z.endTransaction()})):z.setDisabled(!0),this.updateHandlers.push(function(){if(!S.hidden){var W=Z.getValue(q);void 0===W&&(W=null),z.getValue()!=W&&z.setValue(W)}}),S.push(z),z},q.prototype.addImage=function(S,q,W){var Z=this,z=new ht.widget.Image;return dq(z,this.editor),this.updateHandlers.push(function(){if(!S.hidden||S.forceToUpdate){var W=Z.getValue(q);z.setExtraInfo(W)}}),S.push(z),z},q.prototype.addCheckBox=function(S,q,W){var Z=this,z=new ht.widget.CheckBox;return W?(z.handleClick=function(){Z.editor.editable&&z.setSelected(!z.isSelected())},z.onValueChanged=function(){Z.setValue(W,z.getValue())}):z.setDisabled(!0),this.updateHandlers.push(function(){if(!S.hidden){var W=!!Z.getValue(q);z.getValue()!==W&&z.setValue(W)}}),S.push(z),z},q.prototype.addFunction=function(S,q,W,Z,z){var Q=this,U=function(){var S=k("editor.function")+" - "+(Z||"");Q.selection=Q.editor.selection;var U=function(S){Q.setValue(W,S),Q.selection=void 0};Q.editor.functionView.open(Q.getValue(q),U,S,z,function(){return Q.selection=void 0})},u=zq(Z,null,null,U);return S.push(u),this.updateHandlers.push(function(){if(!S.hidden){var W=Q.getValue(q);u.setLabel(Z||b(W)),u.setLabelColor(W?jW.config.color_select:ht.Default.labelColor)}}),u},q.prototype.addDataModel=function(S,q,W,Z,z){var k=this,Q=function(){k.selection=k.editor.selection;var S=function(S){k.setValue(W,S),k.selection=void 0};k.editor.dataModelView.open(k.getValue(q),S,k.editor.editable,z,function(){return k.selection=void 0})},U=zq(Z,null,null,Q);return S.push(U),this.updateHandlers.push(function(){if(!S.hidden){var W=k.getValue(q);U.setLabel(Z),U.setLabelColor(W?jW.config.color_select:ht.Default.labelColor)}}),U},q.prototype.addObject=function(S,q,W,Z){var z=this,Q=function(){var S=k("editor.object")+" - "+(Z||"");z.selection=z.editor.selection;var Q=function(S){z.setValue(W,S),z.selection=void 0};z.editor.objectView.open(z.getValue(q),Q,S,function(){return void 0==z.selection})},U=zq(Z,null,null,Q);return S.push(U),this.updateHandlers.push(function(){if(!S.hidden){var W=z.getValue(q);U.setLabel(Z||J(W,void 0,!1)),U.setLabelColor(void 0!==W?jW.config.color_select:ht.Default.labelColor)}}),U},q.prototype.addComboBox=function(S,q,W,Z,z,k){var Q=this,U=new ht.widget.ComboBox;return U.setValues(Z),U.setLabels(z),U.setIcons(k),U.setDisabled(!W),W&&(U.onValueChanged=function(){Q.setValue(W,U.getValue())}),this.updateHandlers.push(function(){if(!S.hidden){var W=Q.getValue(q);U.getValue()!==W&&U.setValue(W)}}),k&&k[0].width&&U.setIndent(k[0].width+4),S.push(U),U},q.prototype.addButton=function(S,q,W,Z,z,k){var Q=this,U=function(){Q.global||k?z():Q.eachSelection(z)},u=zq(q,W,Z,U);return S.push(u),u},q.prototype.addDBRow=function(S,q,W,Z,z,k,Q){var U=this,u=S.length,D=this.indent,G=void 0;if(!jW.config.dataBindings.onButtonClicked||!1===Q||jW.config.dataBindings.filter&&!jW.config.dataBindings.filter(q,W,this))k?G=this.addRow(S,k,z,Z):2===u?G=this.addRow(S,[D,.1],z,Z):3===u?G=this.addRow(S,[D,.1,20],z,Z):4===u?G=this.addRow(S,[D,.1,20,20],z,Z):5===u?G=this.addRow(S,[D,.1,20,20,20],z,Z):1===u&&(G=this.addRow(S,[.1],z,Z));else{var b=function(){
jW.config.dataBindings.onButtonClicked(U.data,q,W,U.editor)},v=void 0;v=jW.config.dataBindings.getToolTip?jW.config.dataBindings.getToolTip(q,W,this):q+":"+W;var j=this.addButton(S,null,v,null,b,!0);this.updateHandlers.push(function(){if(!S.hidden&&U.data){var Z=jW.config.isDataBound(U.data,q,W);j.setIcon(Z?"editor.bind.state":"editor.unbind.state")}}),k?(k=k.slice(),k.push(20),G=this.addRow(S,k,z,Z)):2===u?G=this.addRow(S,[D,.1,20],z,Z):3===u?G=this.addRow(S,[D,.1,20,20],z,Z):4===u?G=this.addRow(S,[D,.1,20,20,20],z,Z):5===u?G=this.addRow(S,[D,.1,20,20,20,20],z,Z):1===u&&(G=this.addRow(S,[.1,20],z,Z))}return G.keys={name:W,displayName:this.toDisplayName(S),accessType:q},!this.addingCustomProperties&&XW[this.type]&&XW[this.type][q+":"+W]&&this.removeRows([G]),G},q.prototype.addFuncRow=function(S,q,W,Z,z){var k=this,Q=this.indent,U=void 0,u=void 0;if(!jW.config.dataBindingsForSymbol.filter||jW.config.dataBindingsForSymbol.filter(W||q,this)){var D=function(){k.dataModel&&k.editor.funcView.toggle(U,q,W,k)},G=void 0;G=jW.config.dataBindingsForSymbol.getToolTip?jW.config.dataBindingsForSymbol.getToolTip(W||q,this):(W||q)+": { func: ... }",U=this.addButton(S,null,G,null,D,!0),this.updateHandlers.push(function(){if(!S.hidden){var W=!1;k.global?k.dataModel&&(W="clip"===q?VS(k.dataModel.a(q)):!!k.dataModel.a(q+"_func")):k.data&&(W=!!k.data.a(q)),U.setIcon(W?"editor.bind.state":"editor.unbind.state")}});var b=S.length;z?(z=z.slice(),z.push(20),u=this.addRow(S,z,Z)):3===b?u=this.addRow(S,[Q,.1,20],Z):4===b?u=this.addRow(S,[Q,.1,20,20],Z):5===b?u=this.addRow(S,[Q,.1,20,20,20],Z):6===b&&(u=this.addRow(S,[Q,.1,20,20,20,20],Z))}else{var v=S.length;z?u=this.addRow(S,z,Z):2===v?u=this.addRow(S,[Q,.1],Z):3===v?u=this.addRow(S,[Q,.1,20],Z):4===v?u=this.addRow(S,[Q,.1,20,20],Z):5===v?u=this.addRow(S,[Q,.1,20,20,20],Z):6===v&&(u=this.addRow(S,[Q,.1,20,20,20,20],Z))}return u.keys={name:W||q,displayName:this.toDisplayName(S)},!this.addingCustomProperties&&XW[this.type]&&XW[this.type][W||q]&&this.removeRows([u]),u},q.prototype.addNameRow=function(S,q,W,Z,z){var k=this.indent,Q=S.length,U=void 0;return z?U=this.addRow(S,z,Z):2==Q?U=this.addRow(S,[k,.1],Z):3===Q?U=this.addRow(S,[k,.1,20],Z):4===Q?U=this.addRow(S,[k,.1,20,20],Z):5===Q&&(U=this.addRow(S,[k,.1,20,20,20],Z)),U.keys={name:q,displayName:this.toDisplayName(S),accessType:W},q=(W?W+":":"")+q,!this.addingCustomProperties&&XW[this.type]&&XW[this.type][q]&&this.removeRows([U]),U},q.prototype.$77$=function(){var S=this;this.addTitle("TitleGridsGuides");var q=[];this.addLabelCheckBox(q,k("editor.gridenabled"),function(S){return S.a("gridEnabled")},function(S,q){S.a("gridEnabled",q)}),this.addButton(q,k("editor.skew"),null,null,function(){S.editor.currentView&&S.editor.currentView.skewGrid&&S.editor.currentView.skewGrid()}),this.addButton(q,k("editor.reset"),null,null,function(){S.editor.currentView&&S.editor.currentView.resetGrid&&S.editor.currentView.resetGrid()}),this.addNameRow(q,"gridEnabled","a",void 0,[this.indent,20,.1,.1]),q=[],this.addLabelInput(q,k("editor.gridblocksize"),function(S){return S.a("gridBlockSize")},function(S,q){q>0&&S.a("gridBlockSize",q)},"int",1),this.addNameRow(q,"gridBlockSize","a"),q=[],this.addLabelInput(q,k("editor.gridthicklinesevery"),function(S){return S.a("gridThickLinesEvery")},function(S,q){q>0&&S.a("gridThickLinesEvery",q)},"int",1),this.addNameRow(q,"gridThickLinesEvery","a"),q=[],this.addLabelColor(q,k("editor.gridlightcolor"),function(S){return S.a("gridLightColor")},function(S,q){S.a("gridLightColor",q)}),this.addNameRow(q,"gridLightColor","a"),q=[],this.addLabelColor(q,k("editor.gridthickcolor"),function(S){return S.a("gridThickColor")},function(S,q){S.a("gridThickColor",q)}),this.addNameRow(q,"gridThickColor","a"),q=[],this.addLabelInput(q,k("editor.gridangle"),function(S){return 180/Math.PI*S.a("gridAngle")},function(S,q){S.a("gridAngle",q*Math.PI/180)},"number",1),this.addNameRow(q,"gridAngle","a"),q=[],this.addLabelInput(q,k("editor.gridrotation"),function(S){return 180/Math.PI*S.a("gridRotation")},function(S,q){S.a("gridRotation",q*Math.PI/180)},"number",1),this.addNameRow(q,"gridRotation","a"),q=[],this.addLabelInput(q,k("editor.gridzoomthreshold"),function(S){return S.a("gridZoomThreshold")},function(S,q){q>0&&S.a("gridZoomThreshold",q)},"number",.01),this.addNameRow(q,"gridZoomThreshold","a")},q.prototype.addHighlightProperties=function(){},q.prototype.$26$=function(){var S=this;this.addTitle("TitleEditingPoint");var q={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3};this.editingPointButtons=[];var W=function(W,Z){var z=k("editor.editingpoint."+Z.toLowerCase()),Q="editor.point."+Z.toLowerCase(),U=zq(z,null,Q,function(){S.editor.editInteractor.getSubModule("Curve").setCurrentSelectionStatus(U.statusValue)});U.setOrientation("v"),U.setTogglable(!0),U.setGroupId("editingPoint"),U.statusValue=q[Z],S.editingPointButtons.push(U),W.push(U)},Z=[];W(Z,"Straight"),W(Z,"Mirrored"),this.addRow(Z,[.1,.1],60),Z=[],W(Z,"Disconnected"),W(Z,"Asymmetric"),this.addRow(Z,[.1,.1],60),jW.SceneView&&(Z=[],Z.push(k("editor.point")),this.addLabelInput(Z,"X",function(q){return S.editor.getCurrentEditingPointValue("x")},function(q,W){return S.editor.setCurrentEditingPointValue("x",W)},"number",1),this.addLabelInput(Z,"Y",function(q){return S.editor.getCurrentEditingPointValue("y")},function(q,W){return S.editor.setCurrentEditingPointValue("y",W)},"number",1),this.addNameRow(Z,"currentEditingPoint.x.y",void 0,void 0,this.w2).visible=function(){return!(S.currentView instanceof jW.SceneView)},Z=[],Z.push(k("editor.point")),this.addLabelInput(Z,"X",function(q){return S.editor.getCurrentEditingPointValue("x")},function(q,W){return S.editor.setCurrentEditingPointValue("x",W)},"number",1),this.addLabelInput(Z,"Y",function(q){return S.editor.getCurrentEditingPointValue("e")},function(q,W){return S.editor.setCurrentEditingPointValue("e",W)},"number",1),this.addLabelInput(Z,"Z",function(q){return S.editor.getCurrentEditingPointValue("y")},function(q,W){return S.editor.setCurrentEditingPointValue("y",W)},"number",1),this.addNameRow(Z,"currentEditingPoint.x.y.z",void 0,void 0,this.w3).visible=function(){return S.currentView instanceof jW.SceneView})},q.prototype.addCustomProperties=function(){var S=this,q=jW.config.customProperties[this.type];q&&q.length&&(this.addTitle("TitleCustom"),q.forEach(function(q){S.addCustomProperty(q)}))},q.prototype.fixAccessType=function(S){return S=S||"a","symbol"===this.type?S="a":"comp"===this.type&&(S="s"),S},q.prototype.addEventProperties=function(S){var q=this,W=void 0;S?W=!1:(S=[],W=!0);var Z=function(){var S=q.global?q.dataModel:q.data;S&&(S=q.global?[q.dataModel]:q.editor.selection),q.editor.eventView.open(S,q.type)};this.addLabel(S,k("editor.events"));var z=this.addButton(S,k("editor.eventhandlers"),null,null,Z,!0);W&&("data"===this.type||"data3d"===this.type?(this.addLabel(S,k("editor.interactive")),this.addCheckBox(S,function(S){return!!S&&S.s("interactive")},function(S,q){S&&S.s("interactive",q)}),this.addRow(S,this.w1w1).keys={name:"eventHandlers",displayName:k("editor.eventhandlers")}):this.addRow(S,this.w1).keys={name:"eventHandlers",displayName:k("editor.eventhandlers")}),this.updateHandlers.push(function(){if(!S.hidden){var W=!1,Z=q.global?q.dataModel:q.data;iW.forEach(function(S){W||(W="data"===q.type||"data3d"===q.type?Z.s(S):Z.a(S))}),z.setLabelColor(W?jW.config.color_select:ht.Default.labelColor)}})},q.prototype.addCustomProperty=function(S){var q=S.name,W=S.valueType,Z=!1!==S.editable,z=S.defaultValue,D=this.fixAccessType(S.accessType),G=S.property;if(!(W=jW.config.valueTypes[W]))return!1;this.addingCustomProperties=!0;var b=[],v=k(q)||G,j=i(D,G),P=n(D,G),R=function(S){var q=j(S);return void 0===q&&(q=z),q},_=Z?P:null,x=S.extraInfo,K=void 0,d=void 0,N=void 0;x&&x.enum&&(K=x.enum.values,d=u(x.enum.labels,x.enum.i18nLabels),N=x.enum.icons);var m=S.dataBinding||S.bindable,t=jW.SceneView&&m&&("data"===this.type||"data3d"===this.type),V=void 0;x&&x.buildUI?(V=x.buildUI(this,b,v,R,_,x),t=!1):K?t?this.addActionLabelComboBox(b,v,D,G,K,d,N,R,_):this.addLabelComboBox(b,v,R,_,K,d,N):"int"===W.type||"number"===W.type?W.angle?t?this.addActionLabelRotation(b,v,D,G,W.min,W.max,W.step,R,_):this.addLabelRotation(b,v,R,_,W.min,W.max,W.step):t?this.addActionLabelRange(b,v,D,G,W.min,W.max,W.step,W.type,R,_):this.addLabelRange(b,v,R,_,W.min,W.max,W.step,W.type):"color"===W.type?t?this.addActionLabelColor(b,v,D,G,R,_):this.addLabelColor(b,v,R,_):"boolean"===W.type?t?this.addActionLabelCheckBox(b,v,D,G,R,_):this.addLabelCheckBox(b,v,R,_):"enum"===W.type?t?this.addActionLabelComboBox(b,v,D,G,W.values,W.labels,W.icons,R,_):this.addLabelComboBox(b,v,R,_,W.values,W.labels,W.icons):"image"===W.type?t?this.addActionLabelImage(b,v,D,G,R,_):this.addLabelImage(b,v,R,_):"url"===W.type?t?this.addActionLabelURL(b,v,D,G,void 0,R,_):this.addLabelURL(b,v,R,_):"multiline"===W.type?t?this.addActionLabelMultiline(b,v,D,G,R,_):this.addLabelMultiline(b,v,R,_):"colorArray"===W.type?t?this.addActionLabelArray(b,v,D,G,"color",R,_):this.addLabelArray(b,v,R,_,"color"):"numberArray"===W.type?t?this.addActionLabelArray(b,v,D,G,"number",R,_):this.addLabelArray(b,v,R,_,"number"):"stringArray"===W.type?t?this.addActionLabelArray(b,v,D,G,"string",R,_):this.addLabelArray(b,v,R,_,"string"):"objectArray"===W.type?t?this.addActionLabelArray(b,v,D,G,"object",R,_):this.addLabelArray(b,v,R,_,"object"):"function"===W.type?t?this.addActionLabelFunction(b,v,D,G,G,x&&x.arguments,R,_):this.addLabelFunction(b,v,R,_,G,x&&x.arguments):"dataModel"===W.type?this.addActionLabelDataModel(b,v,D,G,G,R,_):"object"===W.type?t?this.addActionLabelObject(b,v,D,G,G,R,_):this.addLabelObject(b,v,R,_,G):"font"===W.type?t?this.addActionLabelFont(b,v,D,G,R,_):this.addLabelFont(b,v,R,_):"custom"===W.type?(V=W.buildUI(this,b,v,R,_,x),t=!1):t?this.addActionLabelInput(b,v,D,G,void 0,void 0,void 0,R,_):this.addLabelInput(b,v,R,_);var C=void 0;"display"===this.type||"scene"===this.type||t||!m?C=this.addNameRow(b,G,D,Q(V,W),U(V,W)):"data"===this.type||"data3d"===this.type?C=this.addDBRow(b,D,G,null,Q(V,W),U(V,W)):"symbol"!==this.type&&"comp"!==this.type||(C=this.addFuncRow(b,G,null,Q(V,W),U(V,W))),C&&x&&(C.visible=x.visible,C.onPropertyChanged=x.onPropertyChanged),this.addingCustomProperties=!1},q.prototype.addLabelLayer=function(S,q){var W=this,Z=i("p","layer"),z=n("p","layer");this.addLabel(S,k("editor.layer"),void 0,void 0,void 0,q);var Q=new ht.widget.ComboBox;return Q.onValueChanged=function(){W.setValue(z,Q.getValue())},this.updateHandlers.push(function(){if(!S.hidden){Q.setValues(W.editor.layerPane.layerNames);var q=W.getValue(Z);Q.getValue()!==q&&Q.setValue(q)}}),S.push(Q),Q},q.prototype.addLabelIcons=function(S,q){var W=this;this.addLabel(S,k("editor.icons"),void 0,void 0,void 0,q);var Z=function(){W.data&&W.editor.iconsView.toggle(z,W.data)},z=this.addButton(S,"Icons","s:icons",null,Z,!0);return this.updateHandlers.push(function(){S.hidden||z.setLabelColor(W.data.s("icons")?jW.config.color_select:ht.Default.labelColor)}),z},q.prototype.addLabelBatch=function(S,q){var W=this,Z=i("s","batch"),z=n("s","batch");this.addLabel(S,k("editor.batch"),void 0,void 0,void 0,q);var Q=new ht.widget.ComboBox;return Q.onValueChanged=function(){W.setValue(z,Q.getValue())},this.updateHandlers.push(function(){if(!S.hidden){Q.setValues(W.editor.batchView.batchNames);var q=W.getValue(Z);Q.getValue()!==q&&Q.setValue(q)}}),S.push(Q),Q},q.prototype.addActionLabel=function(S,q,W,Z){this.addLabel(S,q,void 0,void 0,void 0,{accessType:W,name:Z})},q.prototype.addActionLabelInput=function(S,q,W,Z,z,k,Q,U,u){this.addLabelInput(S,q,i(W,Z,U),n(W,Z,u),z,k,Q,{accessType:W,name:Z})},q.prototype.addActionLabelData=function(S,q,W,Z,z,k){this.addLabelData(S,q,i(W,Z,z),n(W,Z,k),{accessType:W,name:Z})},q.prototype.addActionLabelRange=function(S,q,W,Z,z,k,Q,U,u,D){void 0===Q&&(Q="int"===U?1:.1),this.addLabelRange(S,q,i(W,Z,u),n(W,Z,D),z,k,Q,U,{accessType:W,name:Z})},q.prototype.addActionLabelCheckBox=function(S,q,W,Z,z,k){this.addLabelCheckBox(S,q,i(W,Z,z),n(W,Z,k),{accessType:W,name:Z})},q.prototype.addActionLabelColor=function(S,q,W,Z,z,k){this.addLabelColor(S,q,i(W,Z,z),n(W,Z,k),{accessType:W,name:Z})},q.prototype.addActionLabelImage=function(S,q,W,Z,z,k){this.addLabelImage(S,q,i(W,Z,z),n(W,Z,k),{accessType:W,name:Z})},q.prototype.addActionLabelObject=function(S,q,W,Z,z,k,Q){this.addLabelObject(S,q,i(W,Z,k),n(W,Z,Q),z,{accessType:W,name:Z})},q.prototype.addActionLabelComboBox=function(S,q,W,Z,z,k,Q,U,u){this.addLabelComboBox(S,q,i(W,Z,U),n(W,Z,u),z,k,Q,{accessType:W,name:Z})},q.prototype.addActionLabelComboBoxURL=function(S,q,W,Z,z,k,Q,U,u,D){this.addLabelComboBoxURL(S,q,i(W,Z,u),n(W,Z,D),z,k,Q,U,{accessType:W,name:Z})},q.prototype.addActionLabelFont=function(S,q,W,Z,z,k){this.addLabelFont(S,q,i(W,Z,z),n(W,Z,k),{accessType:W,name:Z})},q.prototype.addActionLabelPosition=function(S,q,W,Z,z,k){this.addLabelPosition(S,q,i(W,Z,z),n(W,Z,k),{accessType:W,name:Z})},q.prototype.addActionLabelMultiline=function(S,q,W,Z,z,k){this.addLabelMultiline(S,q,i(W,Z,z),n(W,Z,k),{accessType:W,name:Z})},q.prototype.addActionLabelRotation=function(S,q,W,Z,z,k,Q,U,u){this.addLabelRotation(S,q,i(W,Z,U),n(W,Z,u),z,k,Q,{accessType:W,name:Z})},q.prototype.addActionLabelAlign=function(S,q,W,Z,z,k){this.addLabelAlign(S,q,i(W,Z,z),n(W,Z,k),{accessType:W,name:Z})},q.prototype.addActionLabelVAlign=function(S,q,W,Z,z,k){this.addLabelVAlign(S,q,i(W,Z,z),n(W,Z,k),{accessType:W,name:Z})},q.prototype.addActionLabelStretch=function(S,q,W,Z,z,k){this.addLabelStretch(S,q,i(W,Z,z),n(W,Z,k),{accessType:W,name:Z})},q.prototype.addActionLabelGradient=function(S,q,W,Z,z){this.addLabelGradient(S,q,W,Z,z,{accessType:"s",name:W})},q.prototype.addActionLabelOrientation=function(S,q,W,Z,z,k){this.addLabelOrientation(S,q,i(W,Z,z),n(W,Z,k),{accessType:W,name:Z})},q.prototype.addActionLabelURL=function(S,q,W,Z,z,k,Q){this.addLabelURL(S,q,i(W,Z,k),n(W,Z,Q),z,{accessType:W,name:Z})},q.prototype.addActionLabelArray=function(S,q,W,Z,z,k,Q){this.addLabelArray(S,q,i(W,Z,k),n(W,Z,Q),z,{accessType:W,name:Z})},q.prototype.addActionLabelFunction=function(S,q,W,Z,z,k,Q,U){this.addLabelFunction(S,q,i(W,Z,Q),n(W,Z,U),z,k,{accessType:W,name:Z})},q.prototype.addActionLabelDataModel=function(S,q,W,Z,z,k,Q,U){this.addLabelDataModel(S,q,i(W,Z,Q),n(W,Z,U),z,k,{accessType:W,name:Z})},q.prototype.addActionLabelLayer=function(S){this.addLabelLayer(S,{accessType:"p",name:"layer"})},q.prototype.addActionLabelIcons=function(S){this.addLabelIcons(S,{accessType:"s",name:"icons"})},q.prototype.addActionLabelBatch=function(S){this.addLabelBatch(S,{accessType:"s",name:"batch"})},q}(bW),Kz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z,"display",!0))}return uW(q,S),q.prototype.initForm=function(){this.addCustomProperties(),this.$11$(),this.addHighlightProperties(),this.$77$()},q.prototype.isTitleVisible=function(q){return!!this.inspectorFilter.isDisplayTitleVisible(this.editor,q.title)&&S.prototype.isTitleVisible.call(this,q)},q.prototype.isPropertyVisible=function(q){return!!this.inspectorFilter.isDisplayPropertyVisible(this.editor,q.keys&&q.keys.name)&&S.prototype.isPropertyVisible.call(this,q)},q.prototype.$11$=function(){this.addTitle("TitleBasic");var S=[];this.addLabelInput(S,k("editor.previewurl"),function(S){return S.a("previewURL")},function(S,q){S.a("previewURL",q)}),this.addNameRow(S,"previewURL","a"),S=[],this.addLabelImage(S,k("editor.snapshoturl"),function(S){return S.a("snapshotURL")},function(S,q){S.a("snapshotURL",q)}),this.addNameRow(S,"snapshotURL","a"),S=[],this.addLabelColor(S,k("editor.background"),function(S){return S.getBackground()},function(S,q){S.setBackground(q)}),this.addNameRow(S,"background","p"),S=[],this.addLabelInput(S,k("editor.width"),function(S){return S.a("width")},function(S,q){S.a("width",q)},"number",1),this.addNameRow(S,"width","a"),S=[],this.addLabelInput(S,k("editor.height"),function(S){return S.a("height")},function(S,q){S.a("height",q)},"number",1),this.addNameRow(S,"height","a"),S=[];var q=[["Obejct","json","editor.comment.json"],["ht.DataModel","dm","editor.comment.datamodel"],["ht.graph.GraphView","view","editor.comment.graphview"]];this.addLabelFunction(S,k("editor.onpredeserialize"),function(S){return S.a("onPreDeserialize")},function(S,q){S.a("onPreDeserialize",q)},"onPreDeserialize",q),this.addNameRow(S,"onPreDeserialize","a"),S=[],q=[["Obejct","json","editor.comment.json"],["ht.DataModel","dm","editor.comment.datamodel"],["ht.graph.GraphView","view","editor.comment.graphview"],["ht.List","datas","editor.comment.datas"]],this.addLabelFunction(S,k("editor.onpostdeserialize"),function(S){return S.a("onPostDeserialize")},function(S,q){S.a("onPostDeserialize",q)},"onPostDeserialize",q),this.addNameRow(S,"onPostDeserialize","a"),S=[],this.addLabelComboBox(S,k("editor.connectactiontype"),function(S){return S.a("connectActionType")},function(S,q){S.a("connectActionType",q)},jW.consts.displayConnectActionTypes,jW.consts.displayConnectActionTypeLabels),this.addNameRow(S,"connectActionType","a"),S=[],this.addLabelCheckBox(S,k("editor.hierarchicalrendering"),function(S){return S.isHierarchicalRendering()},function(S,q){S.setHierarchicalRendering(q)}),this.addNameRow(S,"hierarchicalRendering","p"),S=[],this.addLabelCheckBox(S,k("editor.zoomable"),function(S){return null==S.a("zoomable")||S.a("zoomable")},function(S,q){S.a("zoomable",q)}),this.addNameRow(S,"zoomable","a"),S=[],this.addLabelCheckBox(S,k("editor.pannable"),function(S){return null==S.a("pannable")||S.a("pannable")},function(S,q){S.a("pannable",q)}),this.addNameRow(S,"pannable","a"),S=[],this.addLabelCheckBox(S,k("editor.rectselectable"),function(S){return null==S.a("rectSelectable")||S.a("rectSelectable")},function(S,q){S.a("rectSelectable",q)}),this.addNameRow(S,"rectSelectable","a"),S=[],this.addLabelCheckBox(S,k("editor.fitcontent"),function(S){return null!=S.a("fitContent")&&S.a("fitContent")},function(S,q){S.a("fitContent",q)}),this.addNameRow(S,"fitContent","a"),this.addLayoutProperties()},q.prototype.addLayoutProperties=function(){var S=[k("editor.layout")];this.$79$(S,"circular"),this.$79$(S,"symmetric"),this.$79$(S,"hierarchical"),this.$79$(S,"towardnorth"),this.$79$(S,"towardsouth"),this.$79$(S,"towardeast"),this.$79$(S,"towardwest"),this.addRow(S,[this.indent,.1,.1,.1,.1,.1,.1,.1]).keys={name:"layouts"}},q.prototype.$79$=function(S,q){var W=this,Z=function(){W.editor.editable&&W.dataModel&&W.dataModel.layout(q)};return this.addButton(S,null,k("editor.layout."+q),"editor.layout."+q+".state",Z)},q}(xz),dz={visible:"Boolean",selectable:"Boolean",movable:"Boolean",editable:"Boolean",opacity:"Opacity",clipPercentage:"Percentage",clipDirection:"ClipDirection",shadow:"Boolean",shadowColor:"Color",shadowBlur:"PositiveNumber",shadowOffsetX:"PositiveNumber",shadowOffsetY:"PositiveNumber",type:"String",background:"Color",repeatImage:"String",borderWidth:"PositiveNumber",borderColor:"Color",border3d:"Boolean",border3dColor:"Color",border3dAccuracy:"PositiveNumber",borderCap:"CapStyle",borderJoin:"JoinStyle",gradient:"Gradient",gradientColor:"Color",dash:"Boolean",dashOffset:"Number",dashColor:"Color",dashWidth:"PositiveNumber",dash3d:"Boolean",dash3dColor:"Color",dash3dAccuracy:"PositiveNumber",borderWidthAbsolute:"Boolean",fillClipPercentage:"Percentage",fillClipDirection:"ClipDirection",depth:"Number",cornerRadius:"PositiveNumber",polygonSide:"Int",arcFrom:"Number",arcTo:"Number",arcClose:"Boolean",arcOval:"Boolean",displayName:"String",scaleX:"Number",scaleY:"Number",anchorX:"Number",anchorY:"Number",rotation:"Number",color:"Color",width:"PositiveNumber",label:"Boolean",labelColor:"Color",labelFont:"String",minValue:"Number",maxValue:"Number",linePoint:"Boolean",lineWidth:"PositiveNumber",line3d:"Boolean",text:"String",align:"Align",vAlign:"VAlign",closePath:"Boolean",fillRule:"FillRule",name:"Image",stretch:"Stretch",values:"NumberArray",colors:"ColorArray",hollow:"Boolean",layoutV:"String",layoutH:"String"},Nz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z,"symbol",!0))}return uW(q,S),q.prototype.initForm=function(){this.addCustomProperties(),this.addControlProperties(),this.$11$(),this.addHighlightProperties(),this.$77$(),this.addDataBindingProperties()},q.prototype.isTitleVisible=function(q){return!!this.inspectorFilter.isSymbolTitleVisible(this.editor,q.title)&&S.prototype.isTitleVisible.call(this,q)},q.prototype.isPropertyVisible=function(q){return!!this.inspectorFilter.isSymbolPropertyVisible(this.editor,q.keys&&q.keys.name)&&S.prototype.isPropertyVisible.call(this,q)},q.prototype.$11$=function(){var S=this.indent,q=void 0;this.addTitle("TitleBasic"),q=[],this.addLabelInput(q,k("editor.previewurl"),function(S){return S.a("previewURL")},function(S,q){S.a("previewURL",q)}),this.addLabelImage(q,k("editor.snapshoturl"),function(S){return S.a("snapshotURL")},function(S,q){S.a("snapshotURL",q)}),this.addNameRow(q,"previewURL.snapshotURL",void 0,void 0,[S,this.w20,S,.1,20]),q=[],this.addLabelColor(q,k("editor.background"),function(S){return S.getBackground()},function(S,q){S.setBackground(q)}),this.addLabelComboBox(q,k("editor.connectactiontype"),function(S){return S.a("connectActionType")},function(S,q){S.a("connectActionType",q)},jW.consts.symbolConnectActionTypes,jW.consts.symbolConnectActionTypeLabels),this.addNameRow(q,"background.connectActionType",void 0,void 0,this.w1w1),q=[],this.addLabelInput(q,k("editor.width"),function(S){return S.a("width")},function(S,q){S.a("width",q)},"number",1),this.addFuncRow(q,"width"),q=[],this.addLabelInput(q,k("editor.height"),function(S){return S.a("height")},function(S,q){S.a("height",q)},"number",1),this.addFuncRow(q,"height"),q=[],this.addLabelInput(q,k("editor.boundextend"),function(S){return S.a("boundExtend")},function(S,q){S.a("boundExtend",q)},"number",1),this.addFuncRow(q,"boundExtend"),this.addStateProperty(),this.addAttachPointsProperties(),q=[],this.addLabelComboBox(q,k("editor.blendmode"),function(S){return S.a("blendMode")},function(S,q){S.a("blendMode",q)},["multiply","override","override_rgb","override_a"],[k("editor.blendmode.multiply"),k("editor.blendmode.override"),k("editor.blendmode.override_rgb"),k("editor.blendmode.override_a")]),this.addFuncRow(q,"blendMode")},q.prototype.addEventsAndRenderHTMLProperties=function(){var S=this,q=[];this.addEventProperties(q);var W=function(){S.editor.functionView.open(S.dataModel.a("renderHTML"),function(q){S.dataModel.a("renderHTML",q)},k("editor.renderhtml"),[["ht.Node","data","editor.comment.renderhtmlnode"],["ht.graph.GraphView","gv","editor.comment.graphview"],["Object","cache","editor.comment.renderhtmlcache"]])},Z=this.addButton(q,k("editor.renderhtml"),null,null,W,!0);this.updateHandlers.push(function(){if(!q.hidden){var W=S.dataModel.a("renderHTML");Z.setLabelColor(W?jW.config.color_select:ht.Default.labelColor)}}),this.addNameRow(q,"eventHandlers.renderhtml",void 0,void 0,[this.indent,.1,.1])},q.prototype.addControlProperties=function(){var S=this;this.addTitle("TitleControl"),this.addEventsAndRenderHTMLProperties();var q=[];if(this.addLabelCheckBox(q,k("editor.visible"),function(S){return S.a("visible")},function(S,q){S.a("visible",q)}),this.addFuncRow(q,"visible"),q=[],this.addLabelCheckBox(q,k("editor.clip"),function(S){return S.a("clip")},function(S,q){S.a("clip",q)}).onValueChanged=function(q,W){S.dataModel&&(W?S.dataModel.a("clip")||S.dataModel.a("clip",!0):S.dataModel.a("clip",!1))},this.addFuncRow(q,"clip"),q=[],this.addLabelCheckBox(q,k("editor.scrollable"),function(S){return S.a("scrollable")},function(S,q){S.a("scrollable",q)}),this.addFuncRow(q,"scrollable"),q=[],this.addLabelCheckBox(q,k("editor.interactive"),function(S){return S.a("interactive")},function(S,q){S.a("interactive",q)}),this.addFuncRow(q,"interactive"),q=[],this.addLabelCheckBox(q,k("editor.disableselectedborder"),function(S){return S.a("disableSelectedBorder")},function(S,q){S.a("disableSelectedBorder",q)}),this.addFuncRow(q,"disableSelectedBorder"),q=[],this.addLabelCheckBox(q,k("editor.pixelperfect"),function(S){return S.a("pixelPerfect")},function(S,q){S.a("pixelPerfect",q)}),this.addFuncRow(q,"pixelPerfect"),q=[],this.addLabelCheckBox(q,k("editor.cacherule"),function(S){return S.a("cacheRule")},function(S,q){S.a("cacheRule",q)}),this.addFuncRow(q,"cacheRule"),q=[],this.addLabelCheckBox(q,k("editor.texturecache"),function(S){return S.a("textureCache")},function(S,q){S.a("textureCache",q)}),this.addFuncRow(q,"textureCache"),q=[],this.addLabelCheckBox(q,k("editor.fitsize"),function(S){return S.a("fitSize")},function(S,q){S.a("fitSize",q)}),this.addFuncRow(q,"fitSize"),jW.SceneView){q=[];var W=function(){S.editor.symbolLayoutView.open(S.dataModel.a("layoutAttach"),S.dataModel.a("layoutProperties"),function(q){S.beginTransaction(),S.dataModel.a("layoutAttach",q.func),S.dataModel.a("layoutProperties",q.properties),S.endTransaction()})};this.addLabel(q,k("editor.layout"));var Z=this.addButton(q,k("editor.layoutattach"),null,null,W,!0);this.addRow(q,this.w1),this.updateHandlers.push(function(){if(!q.hidden){var W=S.dataModel.a("layoutAttach");Z.setLabelColor(W?jW.config.color_select:ht.Default.labelColor)}})}},q.prototype.addDataBindingProperties=function(){this.addTitle("TitleDataBinding"),this.$80$(),this.$81$()},q.prototype.$73$=function(S,q,W,Z,z){var k=this;return{name:S,tag:S,width:W,displayName:q,align:"center",enum:Z,editable:!0,valueType:z,getValue:function(q){var W=q.dataBinding[S];return"bindable"===S&&null==W&&(W=!0),W},setValue:function(q,W,Z,z){q.dataBinding[S]!==Z&&k.modifyDataBindings(function(){"valueType"===S&&delete q.dataBinding.defaultValue,q.dataBinding[S]=Z})}}},q.prototype.$74$=function(){var S=this,q=this.tableView.getColumnModel().getDataByTag("defaultValue");q.getValue=function(S,q,W){var Z=S.dataBinding.defaultValue;return"Angle"===S.dataBinding.valueType&&Z&&(Z=Z/Math.PI*180),Z},q.setValue=function(q,W,Z,z){S.modifyDataBindings(function(){"Angle"===q.dataBinding.valueType&&(Z=Z*Math.PI/180),q.dataBinding.defaultValue=Z})},q.getEnumValues=function(S){var q=S?jW.config.valueTypes[S.dataBinding.valueType]:null;return q&&"enum"===q.type?q.values:null},q.getEnumLabels=function(S){var q=S?jW.config.valueTypes[S.dataBinding.valueType]:null;return q&&"enum"===q.type?q.labels:null},q.getEnumIcons=function(S){var q=S?jW.config.valueTypes[S.dataBinding.valueType]:null;return q&&"enum"===q.type?q.icons:null},q.getEnumDropDownWidth=function(S){var q=S?jW.config.valueTypes[S.dataBinding.valueType]:null;return q&&"enum"===q.type?q.dropDownWidth:null},q.getValueType=function(S){var q=S?jW.config.valueTypes[S.dataBinding.valueType]:null;return q?q.type:null},q.isCellEditable=function(q,W,Z,z){var Q=jW.config.valueTypes[q.dataBinding.valueType],U=Q?Q.type:null,u=q.dataBinding.extraInfo,D=jW.config.handleDefaultVauleColumnEdit,G=function(W){S.modifyDataBindings(function(){q.dataBinding.defaultValue=W,S.tableView.redraw()})};if(D&&D(G,Q,U,u))return!1;if("function"===U){var b=k("editor.function")+" "+(q.dataBinding.attr||"");return S.editor.functionView.open(q.dataBinding.defaultValue,G,b,u&&u.arguments),!1}if("multiline"===U)return S.editor.textView.open(q.dataBinding.defaultValue,G,q.dataBinding.attr||"&nbsp;"),!1;if("font"===U)return S.editor.fontView.open(q.dataBinding.defaultValue,G,q.dataBinding.attr||"&nbsp;"),!1;if("object"===U||"stringArray"===U||"custom"===U||"objectArray"===U||"numberArray"===U||"colorArray"===U){var v=k("editor.object")+" "+(q.dataBinding.attr||"");return S.editor.objectView.open(q.dataBinding.defaultValue,G,v),!1}return"dataModel"!==U||(S.editor.dataModelView.open(q.dataBinding.defaultValue,G,S.editor.editable,u),!1)}},q.prototype.initExtraInfoColumn=function(){var S=this;this.tableView.getColumnModel().getDataByTag("extraInfo").isCellEditable=function(q,W,Z,z){var Q=k("editor.object")+" "+(q.dataBinding.attr||"");return S.editor.objectView.open(q.dataBinding.extraInfo,function(W){S.modifyDataBindings(function(){q.dataBinding.extraInfo=W,S.tableView.redraw()})},Q),!1}},q.prototype.initI18nColumn=function(){var S=this;["name","group"].forEach(function(q){var W=S.tableView.getColumnModel().getDataByTag(q);W.getValue=function(S,W,Z){var z=S.dataBinding[q];return S._editing_?z:k(z)},W.setValue=function(S,W,Z,z){S.dataBinding[q]=Z,delete S._editing_},W.isCellEditable=function(S,q,W,Z){return S._editing_=1,!0}})},q.prototype.$80$=function(){var S=this,q=this.tableModel=new ht.DataModel,W=this.tablePane=new pW(q),Z=this.tableView=W.getTableView();Z.setEditable(!0),Z.isEditable=function(){return S.editor.editable},W.getView().style.border=jW.config.color_line+" solid 1px",W.addColumns([this.$73$("attr",k("editor.attr"),90),this.$73$("valueType",k("editor.valuetype"),80,{values:jW.consts.valueTypes,labels:jW.consts.valueTypeLabels}),this.$73$("defaultValue",k("editor.defaultvalue"),90),this.$73$("name",k("editor.name"),80),this.$73$("group",k("editor.group"),80),this.$73$("bindable",k("editor.bindable"),50,void 0,"boolean"),this.$73$("description",k("editor.description"),120),this.$73$("extraInfo",k("editor.extrainfo"),100)]),this.$74$(),this.initExtraInfoColumn(),this.initI18nColumn();var z=[W];this.addRow(z,[.1],"120+0.1");var Q=null;this.updateHandlers.push(function(){if(!z.hidden&&S.dataModel&&(!Q||S.dataModel.dataBindings!==Q)){Q=S.dataModel.dataBindings;var W=q.sm().toSelection().toArray();if(q.clear(),S.dataModel.dataBindings){var Z=void 0;S.dataModel.dataBindings.forEach(function(z,k){var Q=new ht.Data;Q.dataBinding=z,q.add(Q),k===S.newDataBindingIndex&&(S.tableView.sm().ss(Q),Z=Q,delete S.newDataBindingIndex,delete S.addingDataBindingByButton);for(var U=0;U<W.length;U++)if(fS(W[U].dataBinding,z)){D(W,W[U]),q.sm().as(Q);break}}),setTimeout(function(){Z&&(S.tableView.tx(0),Kq(S.tableView,Z,S.tableView.getColumnModel().getDataByTag("attr")))},100)}}})},q.prototype.modifyDataBindings=function(S){var q=Z(this.dataModel.dataBindings);S();var W=Z(this.dataModel.dataBindings);this.dataModel.dataBindings=W,this.dataModel.fp("f:dataBindings",q,W)},q.prototype.$82$=function(S,q,W,Z,z,k,Q){var U=new ht.Data;U.dataBinding={attr:S||"",valueType:q||"String",defaultValue:W,name:Z,description:z,group:k,extraInfo:Q};var u={symbolView:this.editor.symbolView,dataBinding:U.dataBinding};if(this.editor.fireEvent("dataBindingAdding",u),u.preventDefault)return!1;U.dataBinding=u.dataBinding,this.dataModel.dataBindings||(this.dataModel.dataBindings=[]);var D=this.tableModel.sm().ld(),G=void 0;if(D){var b=this.tableModel.getRoots().indexOf(D);this.dataModel.dataBindings.splice(b+1,0,U.dataBinding),G=b+1}else this.dataModel.dataBindings.push(U.dataBinding),G=this.tableModel.size();this.addingDataBindingByButton&&(this.newDataBindingIndex=G)},q.prototype.add=function(){var S=this;this.modifyDataBindings(function(){S.addingDataBindingByButton=!0,S.$82$()})},q.prototype.delete=function(){var S=this;this.tableView.sm().ld()&&this.modifyDataBindings(function(){S.tableView.sm().each(function(q){D(S.dataModel.dataBindings,q.dataBinding)})})},q.prototype.reorder=function(){var S=this;this.dataModel.dataBindings=[],this.tableModel.getRoots().each(function(q){S.dataModel.dataBindings.push(q.dataBinding)})},q.prototype.import=function(){var S=this;this.modifyDataBindings(function(){jW.config.clearDataBindingsBeforeImporting&&(S.dataModel.dataBindings=[]);var q=S.editor.symbolView.content,W={};S.prefixStack=[],q.dataBindings&&q.dataBindings.forEach(function(S){W[S.attr]=!0}),S.addCompDataBinding(q,W),S.prefixStack=[]})},q.prototype.addCompDataBinding=function(S,q,W){var Z=this,z=void 0;for(var k in S)if("comps"!==k){var Q=S[k];tS(Q)&&this.addPropertyDataBinding(null,k,Q,q)}W&&S.dataBindings&&S.dataBindings.forEach(function(S){var W=S.attr,z=S.valueType,k=S.defaultValue,Q=S.name,U=S.description,u=S.group,D=S.extraInfo;W=Z.currentPrefix+W,q[W]||(Z.$82$(W,z,k,Q,U,u,D),q[W]=!0)}),S.comps&&S.comps.forEach(function(S){var W=S.prefix;W&&Z.prefixStack.push(W)
;for(var k in S){var Q=S[k];tS(Q)&&Z.addPropertyDataBinding(S,k,Q,q)}"image"===S.type&&(z=ht.Default.getImage(S.name))&&Z.addCompDataBinding(z,q,!0),W&&Z.prefixStack.pop()})},q.prototype.addPropertyDataBinding=function(S,q,W,Z){if(NS(W.func)&&LW.test(W.func)){var z=this.currentPrefix+W.func.slice(5);if(!Z[z]){var k=void 0,Q=void 0,U=void 0,u=void 0,D=void 0;if(S&&bS(S.type)){var G=ht.Default.getCompType(S.type);if(G){var b=G.properties[q];b?(k=b.valueType,Q=b.name,U=b.description,u=b.extraInfo,D=b.group):k=dz[q]}}else k=dz[q];this.$82$(z,k,void 0,Q,U,D,u),Z[z]=!0}}else{var v={};vq(W,v);for(var j in v)Z[j]||this.$82$(j,dz[v[j]])}},q.prototype.$81$=function(){var S=this,q=jW.config.importDataBindingsButtonVisible?{button:{icon:"editor.import",toolTip:k("editor.import"),onClicked:function(){S.editor.editable&&S.import()}}}:null;this.addRow([{button:{icon:"editor.add",toolTip:k("editor.add"),onClicked:function(){S.editor.editable&&S.add()}}},{button:{icon:"editor.delete",toolTip:k("editor.delete"),onClicked:function(){S.editor.editable&&S.delete()}}},q,null,{button:{icon:"editor.top",toolTip:k("editor.bringtofront"),onClicked:function(){S.editor.editable&&S.tableView.sm().size()&&S.modifyDataBindings(function(){S.tableModel.moveSelectionToTop(),S.reorder()})}}},{button:{icon:"editor.up",toolTip:k("editor.bringforward"),onClicked:function(){S.editor.editable&&S.tableView.sm().size()&&S.modifyDataBindings(function(){S.tableModel.moveSelectionUp(),S.reorder()})}}},{button:{icon:"editor.down",toolTip:k("editor.sendbackward"),onClicked:function(){S.editor.editable&&S.tableView.sm().size()&&S.modifyDataBindings(function(){S.tableModel.moveSelectionDown(),S.reorder()})}}},{button:{icon:"editor.bottom",toolTip:k("editor.sendtoback"),onClicked:function(){S.editor.editable&&S.tableView.sm().size()&&S.modifyDataBindings(function(){S.tableModel.moveSelectionToBottom(),S.reorder()})}}}],[20,20,20,.1,20,20,20,20])},q.prototype.addAttachPointsProperties=function(){var S=this,q=[],W=function(){S.editor.attachPointsView.show(S.editor.symbolView.content)};this.addLabel(q,k("editor.attach.points"));var Z=this.addButton(q,k("editor.attach.edit"),null,null,W,!0);this.addFuncRow(q,"attachPoints"),this.updateHandlers.push(function(){if(!q.hidden){var W=S.dataModel.a("attachPoints");Z.setLabelColor(W&&W.length?jW.config.color_select:ht.Default.labelColor)}}),q=[],this.addLabelComboBox(q,k("editor.attach.style"),function(S){return S.a("attachStyle")||"close"},function(S,q){S.a("attachStyle",q)},["close","strict"],[k("editor.attach.close"),k("editor.attach.strict")]),this.addFuncRow(q,"attachStyle")},q.prototype.addStateProperty=function(){var S=this;if(jW.SceneView){var q=[];this.addLabel(q,k("editor.state"));var W=new ht.widget.ComboBox;W.onValueChanged=function(){S.editor.dm.a("state",W.getValue())},this.updateHandlers.push(function(){if(!q.hidden){var Z=S.editor.dm.a("state"),z=S.editor.symbolStatePane.getAllStateEnum(),k=[],Q=[];z&&z.length&&(k=z.map(function(S){return S.value}),Q=z.map(function(S){return S.label||S.value}),k.unshift(void 0),Q.unshift("")),W.setValues(k),W.setLabels(Q),W.getValue()!==Z&&W.setValue(Z)}}),q.push(W),this.addFuncRow(q,"state")}},UW(q,[{key:"currentPrefix",get:function(){var S=this.prefixStack,q="";return S&&S.length&&(q=S.join(".")+"."),q}}]),q}(xz),mz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z,"data"))}return uW(q,S),q.prototype.isTitleVisible=function(q){return!!this.inspectorFilter.isDataTitleVisible(this.editor,this.data,q.title)&&S.prototype.isTitleVisible.call(this,q)},q.prototype.isPropertyVisible=function(q){return!!this.inspectorFilter.isDataPropertyVisible(this.editor,this.data,q.keys&&q.keys.accessType,q.keys&&q.keys.name)&&S.prototype.isPropertyVisible.call(this,q)},q.prototype.addDBInput=function(S,q,W,Z,z){var k=[];return this.addLabelInput(k,q,i(S,W),n(S,W),Z,z),this.addDBRow(k,S,W)},q.prototype.addDBLabel=function(S,q,W){var Z=[];return this.addLabelLabel(Z,q,i(S,W),n(S,W)),this.addDBRow(Z,S,W)},q.prototype.addDBCheckBox=function(S,q,W){var Z=[];return this.addLabelCheckBox(Z,q,i(S,W),n(S,W)),this.addDBRow(Z,S,W)},q.prototype.addDBImage=function(S,q,W){var Z=[];return this.addLabelImage(Z,q,i(S,W),n(S,W)),this.addDBRow(Z,S,W)},q.prototype.addDBColor=function(S,q,W){var Z=[],z=function(q,Z){"shape.background"===W&&q.s("shape.gradient.pack")&&q.s("shape.gradient.pack",void 0),n(S,W)(q,Z)};return this.addLabelColor(Z,q,i(S,W),z),this.addDBRow(Z,S,W)},q.prototype.addDBFont=function(S,q,W){var Z=[];return this.addLabelFont(Z,q,i(S,W),n(S,W)),this.addDBRow(Z,S,W)},q.prototype.addDBPattern=function(S,q,W){var Z=[];return this.addLabelInput(Z,q,i(S,W),n(S,W),"pattern"),this.addDBRow(Z,S,W)},q.prototype.addDBRotation=function(S,q,W){var Z=[];return this.addLabelRotation(Z,q,i(S,W),n(S,W)),this.addDBRow(Z,S,W)},q.prototype.addDBAlign=function(S,q,W){var Z=[];return this.addLabelAlign(Z,q,i(S,W),n(S,W)),this.addDBRow(Z,S,W)},q.prototype.addDBVAlign=function(S,q,W){var Z=[];return this.addLabelVAlign(Z,q,i(S,W),n(S,W)),this.addDBRow(Z,S,W)},q.prototype.addDBOrientation=function(S,q,W){var Z=[];return this.addLabelOrientation(Z,q,i(S,W),n(S,W)),this.addDBRow(Z,S,W)},q.prototype.addDBComboBox=function(S,q,W,Z,z,k){var Q=[];return this.addLabelComboBox(Q,q,i(S,W),n(S,W),Z,z,k),this.addDBRow(Q,S,W)},q.prototype.addDBStretch=function(S,q,W){var Z=[];return this.addLabelStretch(Z,q,i(S,W),n(S,W)),this.addDBRow(Z,S,W)},q.prototype.addDBZeroToOne=function(S,q,W){var Z=[];return this.addLabelRange(Z,q,i(S,W),n(S,W),0,1,.01,"number"),this.addDBRow(Z,S,W)},q.prototype.addDBPosition=function(S,q,W){var Z=[];return this.addLabelPosition(Z,q,i(S,W),n(S,W)),this.addDBRow(Z,S,W)},q.prototype.addDBRange=function(S,q,W,Z,z,k,Q){var U=[];return this.addLabelRange(U,q,i(S,W),n(S,W),Z,z,k,Q),this.addDBRow(U,S,W)},q.prototype.addDBGradient=function(S,q,W,Z){var z=[];return this.addLabelGradient(z,S,q,W,Z),this.addDBRow(z,"s",q)},q.prototype.addDBBodyColorProperty=function(){this.addDBColor("s",k("editor.bodycolor"),"body.color")},q.prototype.addDBOpacityProperty=function(){this.addDBZeroToOne("s",k("editor.opacity"),"opacity")},q.prototype.$83$=function(){var S=[];return this.addLabelIcons(S),this.addDBRow(S,"s","icons")},q.prototype.addDBData=function(S,q,W,Z){var z=[];return this.addLabelData(z,q,i(S,W),Z||n(S,W)),this.addDBRow(z,S,W)},q.prototype.addDBMultiline=function(S,q,W){var Z=[];return this.addLabelMultiline(Z,q,i(S,W),n(S,W)),this.addDBRow(Z,S,W)},q.prototype.$27$=function(){this.addTitle("TitleBasic");var S=[];this.addLabelInput(S,k("editor.classname"),function(S){return S.getClassName()}),this.addRow(S,this.w1).keys={accessType:"p",name:"className"},this.addDBInput("p",k("editor.name"),"displayName"),this.addDBInput("p",k("editor.tag"),"tag"),this.addDBImage("p",k("editor.icon"),"icon"),this.addDBData("p",k("editor.parent"),"parent")},q.prototype.$29$=function(){this.addTitle("TitleLabel"),this.addDBMultiline("s",k("editor.content"),"label"),this.addDBFont("s",k("editor.font"),"label.font"),this.addDBColor("s",k("editor.color"),"label.color"),this.addDBColor("s",k("editor.background"),"label.background"),this.addDBPosition("s",k("editor.position"),"label.position"),this.addDBInput("s",k("editor.offsetx"),"label.offset.x","number",1),this.addDBInput("s",k("editor.offsety"),"label.offset.y","number",1),this.addDBInput("s",k("editor.maxlength"),"label.max","number",1),this.addDBRotation("s",k("editor.rotation"),"label.rotation"),this.addDBZeroToOne("s",k("editor.opacity"),"label.opacity"),this.addDBRange("s",k("editor.scale"),"label.scale",.01,100,.1,"number"),this.addDBAlign("s",k("editor.align"),"label.align"),this.addDBCheckBox("s",k("editor.fixed"),"label.position.fixed")},q.prototype.$30$=function(){this.addTitle("TitleNote"),this.addDBMultiline("s",k("editor.content"),"note"),this.addDBFont("s",k("editor.font"),"note.font"),this.addDBColor("s",k("editor.color"),"note.color"),this.addDBColor("s",k("editor.background"),"note.background"),this.addDBInput("s",k("editor.borderwidth"),"note.border.width","number",1),this.addDBColor("s",k("editor.bordercolor"),"note.border.color"),this.addDBPosition("s",k("editor.position"),"note.position"),this.addDBInput("s",k("editor.offsetx"),"note.offset.x","number",1),this.addDBInput("s",k("editor.offsety"),"note.offset.y","number",1),this.addDBZeroToOne("s",k("editor.opacity"),"note.opacity"),this.addDBRange("s",k("editor.scale"),"note.scale",.01,100,.1,"number"),this.addDBInput("s",k("editor.maxlength"),"note.max","number",1),this.addDBAlign("s",k("editor.align"),"note.align"),this.addDBCheckBox("s",k("editor.toggleable"),"note.toggleable"),this.addDBCheckBox("s",k("editor.expanded"),"note.expanded")},q.prototype.addDBLayer=function(){var S=[];this.addLabelLayer(S);var q=this.addDBRow(S,"p","layer");return q.items.tag="layer",q},q.prototype.addDBGray=function(){this.addDBCheckBox("s",k("editor.gray"),"2d.gray")},q}(xz),tz={TitleShapeBackground:!0,TitleShapeForeground:!0,TitleShapeBorder:!0,TitleShapeDash:!0},Vz={},Cz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){this.addCustomProperties(),this.addControlProperties(),this.addLayoutProperties(),this.$27$(),this.$91$(),this.$28$(),this.$29$(),this.$30$(),this.$25$()},q.prototype.addControlProperties=function(){this.addTitle("TitleControl"),this.addEventProperties(),this.addDBComboBox("s",k("editor.movemode"),"2d.move.mode",[void 0,"x","y"],["",k("editor.horizontal"),k("editor.vertical")]),this.addDBCheckBox("s",k("editor.ingroup"),"ingroup"),this.addDBCheckBox("s",k("editor.visible"),"2d.visible"),this.addDBCheckBox("s",k("editor.selectable"),"2d.selectable"),this.addDBCheckBox("s",k("editor.movable"),"2d.movable"),this.addDBCheckBox("s",k("editor.editable"),"2d.editable"),this.addDBCheckBox("s",k("editor.pixelperfect"),"pixelPerfect")},q.prototype.$27$=function(){S.prototype.$27$.call(this),this.addDBGray(),this.addDBLayer(),this.addDBInput("p",k("editor.tooltip"),"toolTip"),this.addDBBodyColorProperty(),this.addDBOpacityProperty(),this.$83$(),this.addDBState(),this.$84$()},q.prototype.addDBState=function(){var S=this,q=[];this.addLabelState(q);var W=this.addDBRow(q,"s","state");return W.visible=function(){var q=S.getStateEnum();return q&&q.length},W},q.prototype.getStateEnum=function(){var S=ht.Default.getImage(this.data.getImage());if(S&&S.comps){Vz={};var q=[];return this.getNestState(S.comps,q),S.stateEnum&&S.stateEnum.forEach(function(S){Vz[S.value]||q.push(S)}),q}return null},q.prototype.getNestState=function(S,q){var W=this;S.forEach(function(S){if("image"===S.type){var Z=ht.Default.getImage(S.name);if(Z&&Z.comps){var z=Z.stateEnum;z&&z.forEach(function(S){q.push(S),Vz[S.value]=1}),W.getNestState(Z.comps,q)}else if(!Z)return void W.$34$()}})},q.prototype.addActionLabelState=function(S){this.addLabelState(S,{accessType:"s",name:"state"})},q.prototype.addLabelState=function(S,q){var W=this,Z=new ht.widget.ComboBox,z=function(S){var q=S.s("state");if(q)return q;if(S.getImage){var W=ht.Default.getImage(S.getImage());return W?W.state:void 0}},Q=n("s","state");return this.addLabel(S,k("editor.state"),void 0,void 0,void 0,q),Z.onValueChanged=function(){W.setValue(Q,Z.getValue())},this.updateHandlers.push(function(){if(!S.hidden){var q=W.getStateEnum();if(!q||0===!q)return void(Z.getValues()&&Z.getValues().length&&(Z.setValues(),Z.setLabels(),Z.setValue()));var k=W.getValue(z),Q=q.map(function(S){return S.value}),U=q.map(function(S){return S.label||S.value});Q.unshift(void 0),U.unshift(""),Z.setValues(Q),Z.setLabels(U),Z.getValue()!==k&&"object"!=typeof k&&Z.setValue(k)}}),S.push(Z),Z},q.prototype.addActionLabelNodeImage=function(S){this.addLabelNodeImage(S,{accessType:"p",name:"image"})},q.prototype.addLabelNodeImage=function(S,q){var W=this;S.forceToUpdate=!0,this.addLabelImage(S,k("editor.image"),function(S){var q=S.getImage(),Z=ht.Default.getImage(q);return W.$85$(tS(Z)?Z.dataBindings:null,Z),q},function(S,q){S.setImage&&(NS(q)&&q.endsWith("[...]")||S.setImage(q))},q),this.addButton(S,null,k("editor.resetsize"),"editor.resetsize.state",function(S){S instanceof ht.Node&&S.setSize(-1,-1)})},q.prototype.$91$=function(){this.addDBStretch("s",k("editor.stretch"),"image.stretch").items.tag="imageRelative",this.addDBComboBox("s",k("editor.shape"),"shape",jW.consts.shapes,jW.consts.shapeLabels,jW.consts.shapeIcons);var S=[];this.addLabelNodeImage(S),this.imageRow=this.addDBRow(S,"p","image"),this.imageRow.items.tag="imageRelative"},q.prototype.addLayoutProperties=function(){var S=this;this.addTitle("TitleLayout"),this.addDBInput("p",k("editor.posx"),"x","number",1),this.addDBInput("p",k("editor.posy"),"y","number",1),this.addDBInput("p",k("editor.width"),"width","number",1),this.addDBInput("p",k("editor.height"),"height","number",1),this.addDBRotation("p",k("editor.rotation"),"rotation");var q=[],W=void 0;this.addLabelInput(q,k("editor.scalex"),i("p","scaleX"),n("p","scaleX"),"number",.01),this.addButton(q,null,k("editor.flipx"),"editor.flipx",function(S){S instanceof ht.Node&&S.setScaleX(-S.getScaleX())}),this.addDBRow(q,"p","scaleX"),q=[],this.addLabelInput(q,k("editor.scaley"),i("p","scaleY"),n("p","scaleY"),"number",.01),this.addButton(q,null,k("editor.flipy"),"editor.flipy",function(S){S instanceof ht.Node&&S.setScaleY(-S.getScaleY())}),this.addDBRow(q,"p","scaleY"),q=[],this.addLabelInput(q,k("editor.anchorx"),function(S){return S.getAnchor().x},function(S,q){S instanceof ht.Node&&S.setAnchor(q,S.getAnchor().y,!0)},"number",.01),this.addDBRow(q,"p","anchorX"),q=[],this.addLabelInput(q,k("editor.anchory"),function(S){return S.getAnchor().y},function(S,q){S instanceof ht.Node&&S.setAnchor(S.getAnchor().x,q,!0)},"number",.01),this.addDBRow(q,"p","anchorY"),this.addDBData("p",k("editor.host"),"host",function(S,q){!S.s("fullscreen")&&S instanceof ht.Node&&(null==q||q instanceof ht.Node)&&S.setHost(q)}).items.tag="host",this.addUpdateHandler(function(){S.updateSymbolLayoutProperties()}),jW.config.layoutEnabled&&(this.addDBComboBox("s",k("editor.fullscreen"),"fullscreen",jW.consts.fullscreenValues,jW.consts.fullscreenLabels).items.tag="fullscreen",this.addDBComboBox("s",k("editor.fullscreen.lock"),"fullscreen.lock",jW.consts.fullscreenLockValues,jW.consts.fullscreenLockLabels).items.tag="fullscreenDetail",this.addDBInput("s",k("editor.fullscreen.gap"),"fullscreen.gap","number",1).items.tag="fullscreenDetail",this.addNameRow([null,{element:this.addLayoutView()},null],"layoutView",void 0,100,[.1,100,.1]).items.tag="nodeLayout",W=this.addDBComboBox("s",k("editor.nodeLayout.h"),"layout.h",jW.consts.hLayoutValues,jW.consts.hLayoutLabels),W.items.tag="nodeLayout",this.layoutVRow=W=this.addDBComboBox("s",k("editor.nodeLayout.v"),"layout.v",jW.consts.vLayoutValues,jW.consts.vLayoutLabels),W.items.tag="nodeLayout")},q.prototype.addLayoutView=function(){var S=this,q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,W=this.layoutGv=new ht.graph.GraphView,Z=this.layoutNode=new ht.Node,z=!1;return Z.setImage("editor.layout.helper"),Z.a("selectColor",jW.config.color_select),Z.setSize(q,q),W.dm().add(Z),W.tx(q/2),W.ty(q/2),W.handleScroll=function(){},W.handlePinch=function(){},W.setScrollBarVisible(!1),W.setRectSelectable(!1),W.setPannable(!1),W.setMovableFunc(function(){return!1}),W.dm().md(function(q){z||(S.beginTransaction(),S.dataModel.sm().getSelection().each(function(S){"a:layout.v"===q.property?S.s("layout.v",q.newValue):"a:layout.h"===q.property&&S.s("layout.h",q.newValue)}),S.endTransaction())}),this.addUpdateHandler(function(){var q=S.data;z=!0,Z.a({"layout.v":q.s("layout.v"),"layout.h":q.s("layout.h")}),z=!1}),W},q.prototype.$84$=function(){this.addDBZeroToOne("s",k("editor.clippercentage"),"clip.percentage"),this.addDBComboBox("s",k("editor.clipdirection"),"clip.direction",jW.consts.clipDirections,jW.consts.clipDirectionLabels)},q.prototype.$28$=function(){this.$24$(),this.addShapeForegroundProperties(),this.$32$(),this.addShapeDashProperties()},q.prototype.$24$=function(){this.addTitle("TitleShapeBackground"),this.addDBColor("s",k("editor.background"),"shape.background"),this.addDBGradient(k("editor.gradient"),"shape.gradient","shape.background","shape.gradient.color"),this.addDBColor("s",k("editor.gradientcolor"),"shape.gradient.color"),this.addDBImage("s",k("editor.repeatimage"),"shape.repeat.image"),this.addDBZeroToOne("s",k("editor.clippercentage"),"shape.fill.clip.percentage"),this.addDBComboBox("s",k("editor.clipdirection"),"shape.fill.clip.direction",jW.consts.clipDirections,jW.consts.clipDirectionLabels)},q.prototype.addShapeForegroundProperties=function(){this.addTitle("TitleShapeForeground"),this.addDBColor("s",k("editor.foreground"),"shape.foreground"),this.addDBGradient(k("editor.gradient"),"shape.foreground.gradient","shape.foreground","shape.foreground.gradient.color"),this.addDBColor("s",k("editor.gradientcolor"),"shape.foreground.gradient.color"),this.addDBZeroToOne("s",k("editor.clippercentage"),"shape.foreground.clip.percentage"),this.addDBComboBox("s",k("editor.clipdirection"),"shape.foreground.clip.direction",jW.consts.clipDirections,jW.consts.clipDirectionLabels)},q.prototype.$32$=function(){this.addTitle("TitleShapeBorder"),this.addDBInput("s",k("editor.width"),"shape.border.width","number",1),this.addDBCheckBox("s",k("editor.widthabsolute"),"shape.border.width.absolute"),this.addDBPattern("s",k("editor.pattern"),"shape.border.pattern"),this.addDBColor("s",k("editor.color"),"shape.border.color"),this.addDBCheckBox("s",k("editor.threed"),"shape.border.3d"),this.addDBColor("s",k("editor.threedcolor"),"shape.border.3d.color"),this.addDBComboBox("s",k("editor.join"),"shape.border.join",jW.consts.joins,jW.consts.joinLabels),this.addDBComboBox("s",k("editor.cap"),"shape.border.cap",jW.consts.caps,jW.consts.capLabels),this.$23$()},q.prototype.$23$=function(){this.addDBInput("s",k("editor.depth"),"shape.depth","int",1).items.tag="shapeDepth",this.addDBInput("s",k("editor.sides"),"shape.polygon.side","int",1).items.tag="shapeSide",this.addDBInput("s",k("editor.radius"),"shape.corner.radius","number",1).items.tag="shapeRadius",this.addDBCheckBox("s",k("editor.arcoval"),"shape.arc.oval").items.tag="shapeArc",this.addDBCheckBox("s",k("editor.closed"),"shape.arc.close").items.tag="shapeArc",this.addDBRotation("s",k("editor.arcfrom"),"shape.arc.from").items.tag="shapeArc",this.addDBRotation("s",k("editor.arcto"),"shape.arc.to").items.tag="shapeArc"},q.prototype.addShapeDashProperties=function(){this.addTitle("TitleShapeDash"),this.addDBPattern("s",k("editor.pattern"),"shape.dash.pattern"),this.addDBCheckBox("s",k("editor.dash"),"shape.dash"),this.addDBColor("s",k("editor.color"),"shape.dash.color"),this.addDBInput("s",k("editor.offset"),"shape.dash.offset","number",1),this.addDBInput("s",k("editor.width"),"shape.dash.width","number",1),this.addDBCheckBox("s",k("editor.threed"),"shape.dash.3d"),this.addDBColor("s",k("editor.threedcolor"),"shape.dash.3d.color")},q.prototype.$34$=function(q){if(this._updateDataBindingsLater&&this.$86$(),q){if("s:shape"===q.property||"host"===q.property||"s:fullscreen"===q.property)return void this.filterPropertiesLater();if("s:select.type"===q.property&&("shadow"===q.oldValue||"shadow"===q.newValue))return void this.filterPropertiesLater()}S.prototype.$34$.call(this,q)},q.prototype.isTitleVisible=function(q){return!(!(!this.data||this.data instanceof ht.Shape||this.data.s("shape"))&&tz[q.title])&&S.prototype.isTitleVisible.call(this,q)},q.prototype.isPropertyVisible=function(q){if(this.data){var W=q.items.tag;if(W)if("selectShadow"===W){if("shadow"!==this.data.s("select.type"))return!1}else if("shapeDepth"===W){if("rect"!==this.data.s("shape"))return!1}else if("shapeSide"===W){if("polygon"!==this.data.s("shape"))return!1}else if("shapeRadius"===W){if("roundRect"!==this.data.s("shape"))return!1}else if("shapeArc"===W){if("arc"!==this.data.s("shape"))return!1}else if("imageRelative"===W){if(this.data.s("shape"))return!1}else if("layer"===W){if(!this.editor.layerPane.layerNames.length)return!1}else if("fullscreen"===W){if(this.data.getHost())return!1}else if("fullscreenDetail"===W){if(!this.data.s("fullscreen"))return!1}else if("host"===W){if(this.data.s("fullscreen"))return!1}else if("nodeLayout"===W&&!this.data.getHost())return!1}return S.prototype.isPropertyVisible.call(this,q)},q.prototype.$85$=function(S,q){var W=this;this.dataBindings!==S&&(this.$45$=S,this.pendingImage=q,this._updateDataBindingsLater||(this._updateDataBindingsLater=!0,requestAnimationFrame(function(){W._updateDataBindingsLater&&W.$86$()})))},q.prototype.$86$=function(){var S=this;if(this._updateDataBindingsLater=!1,this.dataBindings===this.$45$)return this.$45$=null,void(this.pendingImage=null);if(this._rows=this.$46$,this.removeRows(this.$44$),this.dataBindingHandlers&&this.dataBindingHandlers.length&&this.dataBindingHandlers.forEach(this.removeUpdateHandler,this),this.$44$=[],this.dataBindingHandlers=[],this.dataBindings=this.$45$,this.dataBindings){var q=this.updateHandlers.length,W={},Z={},z={};this.pendingImage.comps.forEach(function(S){if(bS(S.type)){var q=ht.Default.getCompType(S.type);if(q)for(var k in q.properties)W[k]=q.properties[k].defaultValue}vq(S,Z,z)});for(var k in Z)void 0===z[k]&&(z[k]=W[Z[k]]);var Q=void 0,U=this._rows.indexOf(this.imageRow)+1;this.dataBindings.forEach(function(q){if(q.group&&Q!==q.group){Q=q.group;var W=S.addTitle(Q,{index:U});W.items.tag="imageRelative",S.$44$.push(W),U++}S.$87$(q,U,z)&&U++}),this.dataBindingHandlers=this.updateHandlers.slice(q)}this.$46$=this._rows,this.filterProperties()},q.prototype.$87$=function(S,q,W,Z,z){var D=[],G=S.attr,b=jW.config.valueTypes[S.valueType];if(!b)return this.editor.fireEvent("error",{message:"Wrong value type:"+S.valueType}),!1;var v=k(S.name)||G,j=function(S){var q=S.a(G);return void 0===q&&(q=W[G]),q},i=function(S,q){S.a(G,q)},n=S.extraInfo,P=void 0,R=void 0,_=void 0;n&&n.enum&&(P=n.enum.values,R=u(n.enum.labels,n.enum.i18nLabels),_=n.enum.icons);var x=null==S.bindable||S.bindable,K=jW.SceneView&&x,d=void 0;n&&n.buildUI?(d=n.buildUI(this,D,v,j,i,n),K=!1):P?K?this.addActionLabelComboBox(D,v,"a",G,P,R,_,j,i):this.addLabelComboBox(D,v,j,i,P,R,_):"int"===b.type||"number"===b.type?b.angle?K?this.addActionLabelRotation(D,v,"a",G,b.min,b.max,b.step,j,i):this.addLabelRotation(D,v,j,i,b.min,b.max,b.step):K?this.addActionLabelRange(D,v,"a",G,b.min,b.max,b.step,b.type,j,i):this.addLabelRange(D,v,j,i,b.min,b.max,b.step,b.type):"color"===b.type?K?this.addActionLabelColor(D,v,"a",G,j,i):this.addLabelColor(D,v,j,i):"boolean"===b.type?K?this.addActionLabelCheckBox(D,v,"a",G,j,i):this.addLabelCheckBox(D,v,j,i):"enum"===b.type?K?this.addActionLabelComboBox(D,v,"a",G,b.values,b.labels,b.icons,j,i):this.addLabelComboBox(D,v,j,i,b.values,b.labels,b.icons):"multiline"===b.type?K?this.addActionLabelMultiline(D,v,"a",G,j,i):this.addLabelMultiline(D,v,j,i):"font"===b.type?K?this.addActionLabelFont(D,v,"a",G,j,i):this.addLabelFont(D,v,j,i):"image"===b.type?K?this.addActionLabelImage(D,v,"a",G,j,i):this.addLabelImage(D,v,j,i):"url"===b.type?K?this.addActionLabelURL(D,v,"a",G,void 0,j,i):this.addLabelURL(D,v,j,i):"colorArray"===b.type?K?this.addActionLabelArray(D,v,"a",G,"color",j,i):this.addLabelArray(D,v,j,i,"color"):"numberArray"===b.type?K?this.addActionLabelArray(D,v,"a",G,"number",j,i):this.addLabelArray(D,v,j,i,"number"):"stringArray"===b.type?K?this.addActionLabelArray(D,v,"a",G,"string",j,i):this.addLabelArray(D,v,j,i,"string"):"objectArray"===b.type?K?this.addActionLabelArray(D,v,"a",G,"object",j,i):this.addLabelArray(D,v,j,i,"object"):"function"===b.type?K?this.addActionLabelFunction(D,v,"a",G,G,n&&n.arguments,j,i):this.addLabelFunction(D,v,j,i,G,n&&n.arguments):"object"===b.type?K?this.addActionLabelObject(D,v,"a",G,G,j,i):this.addLabelObject(D,v,j,i,G):"custom"===b.type?(d=b.buildUI(this,D,v,j,i,n),K=!1):"dataModel"===b.type?K?this.addActionLabelDataModel(D,v,"a",G,G,n,j,i):this.addLabelDataModel(D,v,j,i,G,n):K?this.addActionLabelInput(D,v,"a",G,void 0,void 0,void 0,j,i):this.addLabelInput(D,v,j,i);var N=this.addDBRow(D,"a",G,{index:q},Q(d,b),U(d,b),x&&!K);return n&&(N.visible=n.visible,N.onPropertyChanged=n.onPropertyChanged),Z||(Z=this.$44$),Z.push(N),null!==z&&(D.tag=z||"imageRelative"),!0},q.prototype.$25$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",k("editor.color"),"select.color"),this.addDBInput("s",k("editor.width"),"select.width","number",1),this.addDBInput("s",k("editor.padding"),"select.padding","number",1),this.addDBComboBox("s",k("editor.selecttype"),"select.type",jW.consts.selectTypes,jW.consts.selectTypeLabels,jW.consts.selectTypeIcons),this.addDBInput("s",k("editor.shadowblur"),"shadow.blur","number",1).items.tag="selectShadow",this.addDBInput("s",k("editor.shadowoffsetx"),"shadow.offset.x","number",1).items.tag="selectShadow",this.addDBInput("s",k("editor.shadowoffsety"),"shadow.offset.y","number",1).items.tag="selectShadow"},q.prototype.updateSymbolLayoutProperties=function(){var S=this,q=this.data.getHost(),W=void 0,Z=void 0;if(q&&q.getImage&&(W=q.getImage())&&(W=ht.Default.getImage(W),tS(W)&&(Z=W.layoutProperties)),this.layoutProperties!==Z){if(this._rows=this.$46$,this.removeRows(this.layoutPropertiesRows),this.layoutPropertiesHandlers&&this.layoutPropertiesHandlers.length&&this.layoutPropertiesHandlers.forEach(this.removeUpdateHandler,this),this.layoutPropertiesRows=[],this.layoutPropertiesHandlers=[],this.layoutProperties=Z,this.layoutProperties){var z=this.updateHandlers.length,k=void 0,Q=this._rows.indexOf(this.layoutVRow)+1;this.layoutProperties.forEach(function(q){if(q.group&&k!==q.group){k=q.group;var W=S.addTitle(k,{index:Q});W.items.tag="layoutRelative",S.layoutPropertiesRows.push(W),Q++}S.$87$(q,Q,{},S.layoutPropertiesRows,"layoutRelative")&&Q++}),this.layoutPropertiesHandlers=this.updateHandlers.slice(z)}this.$46$=this._rows}},q}(mz),Oz={"h.v":!0,"v.h":!0,ortho:!0,flex:!0,"extend.east":!0,"extend.west":!0,"extend.north":!0,"extend.south":!0,ortho2:!0,flex2:!0,"extend.north2":!0,"extend.south2":!0,"extend.west2":!0,"extend.east2":!0,"v.h2":!0,"h.v2":!0},ez={"extend.east":!0,"extend.west":!0,"extend.north":!0,"extend.south":!0,"extend.north2":!0,"extend.south2":!0,"extend.west2":!0,"extend.east2":!0},Lz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){this.$26$(),this.addCustomProperties(),this.addControlProperties(),this.$27$(),this.addDBGray(),this.$88$(),this.addEdgeEndpointProperties(),this.$90$(),this.$29$(),this.$30$(),this.$25$()},q.prototype.addControlProperties=function(){this.addTitle("TitleControl"),this.addEventProperties(),this.addDBCheckBox("s",k("editor.visible"),"2d.visible"),this.addDBCheckBox("s",k("editor.selectable"),"2d.selectable"),this.addDBCheckBox("s",k("editor.editable"),"2d.editable"),this.addDBCheckBox("s",k("editor.independent"),"edge.independent"),this.addDBCheckBox("s",k("editor.toggleable"),"edge.toggleable")},q.prototype.isTitleVisible=function(q){return!("TitleEditingPoint"===q.title&&!this.editor.pointsEditingMode)&&S.prototype.isTitleVisible.call(this,q)},q.prototype.$34$=function(q){if(q){var W=q.property;if("s:edge.type"===W||"source"===W||"target"===W||"s:select.type"===W)return void this.filterPropertiesLater()}S.prototype.$34$.call(this,q)},q.prototype.isPropertyVisible=function(q){if(this.data){var W=q.items.tag;if(W){var Z=this.data.s("edge.type");if("edgeRipple"===W){if("ripple"!==Z)return!1}else if("edgeRadius"===W){if(!Oz[Z])return!1}else if("edgeOrtho"===W){if("ortho"!==Z&&"ortho2"!==Z)return!1}else if("edgeFlex"===W){if("flex"!==Z&&"flex2"!==Z)return!1}else if("edgeExtend"===W){if(!ez[Z])return!1}else if("layer"===W){if(!this.editor.layerPane.layerNames.length)return!1}else{if(!("edgeSourceIsEdge"!==W||this.data.getSource()instanceof ht.Edge))return!1;if(!("edgeTargetIsEdge"!==W||this.data.getTarget()instanceof ht.Edge))return!1;if(!("edgeSourceIsNode"!==W||this.data.getSource()instanceof ht.Node))return!1;if("edgeTargetIsNode"===W&&!(this.data.getTarget()instanceof ht.Node))return!1}}}return S.prototype.isPropertyVisible.call(this,q)},q.prototype.$27$=function(){S.prototype.$27$.call(this),this.addDBLayer(),this.addDBInput("p",k("editor.tooltip"),"toolTip"),this.addDBOpacityProperty(),this.$83$()},q.prototype.$25$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",k("editor.color"),"select.color"),this.addDBInput("s",k("editor.width"),"select.width","number",1);var S=[];this.addLabelCheckBox(S,k("editor.shadow"),function(S){return"shadow"===S.s("select.type")},function(S,q){S.s("select.type",q?"shadow":null)}),this.addDBRow(S,"s","select.type"),this.addDBInput("s",k("editor.shadowblur"),"shadow.blur","number",1),this.addDBInput("s",k("editor.shadowoffsetx"),"shadow.offset.x","number",1),this.addDBInput("s",k("editor.shadowoffsety"),"shadow.offset.y","number",1)},q.prototype.$88$=function(){this.addTitle("TitleEdgeBasic"),this.addDBInput("s",k("editor.width"),"edge.width","number",1),this.addDBCheckBox("s",k("editor.widthabsolute"),"edge.width.absolute"),this.addDBPattern("s",k("editor.pattern"),"edge.pattern"),this.addDBColor("s",k("editor.color"),"edge.color"),this.addDBCheckBox("s",k("editor.threed"),"edge.3d"),this.addDBColor("s",k("editor.threedcolor"),"edge.3d.color"),this.addDBComboBox("s",k("editor.join"),"edge.join",jW.consts.joins,jW.consts.joinLabels),this.addDBComboBox("s",k("editor.cap"),"edge.cap",jW.consts.caps,jW.consts.capLabels),this.addDBInput("s",k("editor.group"),"edge.group"),this.addDBInput("s",k("editor.offset"),"edge.offset","number",1),this.addDBInput("s",k("editor.gap"),"edge.gap","number",1),this.addDBComboBox("s",k("editor.type"),"edge.type",jW.consts.edgeTypes,jW.consts.edgeTypeLabels),this.addDBInput("s",k("editor.radius"),"edge.corner.radius","number",1).items.tag="edgeRadius",this.addDBZeroToOne("s",k("editor.ortho"),"edge.ortho").items.tag="edgeOrtho",this.addDBInput("s",k("editor.flex"),"edge.flex","number",1).items.tag="edgeFlex",this.addDBInput("s",k("editor.extend"),"edge.extend","number",1).items.tag="edgeExtend",this.addDBInput("s",k("editor.ripplesize"),"edge.ripple.size","int",1).items.tag="edgeRipple",this.addDBInput("s",k("editor.ripplelength"),"edge.ripple.length","number",1).items.tag="edgeRipple",this.addDBInput("s",k("editor.rippleelevation"),"edge.ripple.elevation","number",1).items.tag="edgeRipple",this.addDBCheckBox("s",k("editor.rippleboth"),"edge.ripple.both").items.tag="edgeRipple",this.addDBCheckBox("s",k("editor.ripplestraight"),"edge.ripple.straight").items.tag="edgeRipple",this.addDBCheckBox("s",k("editor.center"),"edge.center");var S=[],q=function(S,q){S instanceof ht.Edge&&S.toggle()};q.once=!0,this.addLabelCheckBox(S,k("editor.expanded"),function(S){return S.s("edge.expanded")},q),this.addDBRow(S,"s","edge.expanded")},q.prototype.$90$=function(){this.addTitle("TitleEdgeDash"),this.addDBCheckBox("s",k("editor.dash"),"edge.dash"),this.addDBPattern("s",k("editor.pattern"),"edge.dash.pattern"),this.addDBColor("s",k("editor.color"),"edge.dash.color"),this.addDBInput("s",k("editor.offset"),"edge.dash.offset","number",1),this.addDBInput("s",k("editor.width"),"edge.dash.width","number",1),this.addDBCheckBox("s",k("editor.threed"),"edge.dash.3d"),this.addDBColor("s",k("editor.threedcolor"),"edge.dash.3d.color")},q.prototype.addEdgeEndpointProperties=function(){this.addTitle("TitleEdgeEndpoint"),this.addDBData("p",k("editor.sourcedata"),"source",function(S,q){S instanceof ht.Edge&&(null==q||q instanceof ht.Node||q instanceof ht.Edge)&&(S.setSource(q),S.s("edge.source.percent",.5))}),this.addDBData("p",k("editor.targetdata"),"target",function(S,q){S instanceof ht.Edge&&(null==q||q instanceof ht.Node||q instanceof ht.Edge)&&(S.setTarget(q),S.s("edge.target.percent",.5))});var S=void 0;S=this.addDBZeroToOne("s",k("editor.sourcepercent"),"edge.source.percent"),S.items.tag="edgeSourceIsEdge",
S=this.addDBRange("s",k("editor.sourceindex"),"edge.source.index",-1,void 0,1,"int"),S.items.tag="edgeSourceIsEdge",S=this.addDBPosition("s",k("editor.sourceposition"),"edge.source.position"),S.items.tag="edgeSourceIsNode",S=this.addDBInput("s",k("editor.sourceoffsetx"),"edge.source.offset.x","number",1),S.items.tag="edgeSourceIsNode",S=this.addDBInput("s",k("editor.sourceoffsety"),"edge.source.offset.y","number",1),S.items.tag="edgeSourceIsNode",S=this.addDBInput("s",k("editor.sourceanchorx"),"edge.source.anchor.x","number",.01),S.items.tag="edgeSourceIsNode",S=this.addDBInput("s",k("editor.sourceanchory"),"edge.source.anchor.y","number",.01),S.items.tag="edgeSourceIsNode",S=this.addDBZeroToOne("s",k("editor.targetpercent"),"edge.target.percent"),S.items.tag="edgeTargetIsEdge",S=this.addDBRange("s",k("editor.targetindex"),"edge.target.index",-1,void 0,1,"int"),S.items.tag="edgeTargetIsEdge",S=this.addDBPosition("s",k("editor.targetposition"),"edge.target.position"),S.items.tag="edgeTargetIsNode",S=this.addDBInput("s",k("editor.targetoffsetx"),"edge.target.offset.x","number",1),S.items.tag="edgeTargetIsNode",S=this.addDBInput("s",k("editor.targetoffsety"),"edge.target.offset.y","number",1),S.items.tag="edgeTargetIsNode",S=this.addDBInput("s",k("editor.targetanchorx"),"edge.target.anchor.x","number",.01),S.items.tag="edgeTargetIsNode",S=this.addDBInput("s",k("editor.targetanchory"),"edge.target.anchor.y","number",.01),S.items.tag="edgeTargetIsNode"},q}(mz),$z=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){this.addCustomProperties(),this.addControlProperties(),this.addLayoutProperties(),this.$27$(),this.$91$(),this.$31$(),this.$93$(),this.$92$(),this.$28$(),this.$29$(),this.$30$(),this.$25$()},q.prototype.$34$=function(q){if(q&&"s:group.type"===q.property)return void this.filterPropertiesLater();S.prototype.$34$.call(this,q)},q.prototype.isTitleVisible=function(q){return(!this.data||!this.data.s("group.type")||"TitleGroupTitle"!==q.title)&&S.prototype.isTitleVisible.call(this,q)},q.prototype.isPropertyVisible=function(q){if(this.data){var W=q.items.tag;if(W&&"groupDepth"===W){var Z=this.data.s("group.type");if(Z&&"rect"!==Z)return!1}}return S.prototype.isPropertyVisible.call(this,q)},q.prototype.$31$=function(){this.addTitle("TitleGroupBasic"),this.addDBComboBox("s",k("editor.type"),"group.type",[void 0,"rect","oval","circle","roundRect"],["",k("editor.grouptype.rect"),k("editor.grouptype.oval"),k("editor.grouptype.circle"),k("editor.grouptype.roundrect")]),this.addDBPosition("s",k("editor.position"),"group.position"),this.addDBColor("s",k("editor.background"),"group.background"),this.addDBGradient(k("editor.gradient"),"group.gradient","group.background","group.gradient.color"),this.addDBColor("s",k("editor.gradientcolor"),"group.gradient.color"),this.addDBImage("s",k("editor.image"),"group.image"),this.addDBStretch("s",k("editor.stretch"),"group.image.stretch"),this.addDBImage("s",k("editor.repeatimage"),"group.repeat.image"),this.addDBCheckBox("s",k("editor.toggleable"),"group.toggleable"),this.addDBCheckBox("p",k("editor.expanded"),"expanded"),this.addDBInput("s",k("editor.depth"),"group.depth","number",1).items.tag="groupDepth"},q.prototype.$93$=function(){this.addTitle("TitleGroupTitle"),this.addDBLabel("s",k("editor.content"),"label"),this.addDBFont("s",k("editor.font"),"group.title.font"),this.addDBColor("s",k("editor.color"),"group.title.color"),this.addDBColor("s",k("editor.background"),"group.title.background"),this.addDBAlign("s",k("editor.align"),"group.title.align"),this.addDBOrientation("s",k("editor.valuetype.orientation"),"group.title.orientation"),this.addDBCheckBox("s",k("editor.splitline"),"group.splitLine")},q.prototype.$92$=function(){this.addTitle("TitleGroupBorder"),this.addDBInput("s",k("editor.width"),"group.border.width","number",1),this.addDBPattern("s",k("editor.pattern"),"group.border.pattern"),this.addDBColor("s",k("editor.color"),"group.border.color"),this.addDBComboBox("s",k("editor.join"),"group.border.join",jW.consts.joins,jW.consts.joinLabels),this.addDBComboBox("s",k("editor.cap"),"group.border.cap",jW.consts.caps,jW.consts.capLabels),this.addDBInput("s",k("editor.radius"),"group.border.radius","number",1),this.addDBInput("s",k("editor.padding"),"group.padding","number",1),this.addDBInput("s",k("editor.paddingleft"),"group.padding.left","number",1),this.addDBInput("s",k("editor.paddingright"),"group.padding.right","number",1),this.addDBInput("s",k("editor.paddingtop"),"group.padding.top","number",1),this.addDBInput("s",k("editor.paddingbottom"),"group.padding.bottom","number",1)},q}(Cz),yz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){this.$26$(),this.addCustomProperties(),this.addControlProperties(),this.addLayoutProperties(),this.$27$(),this.$28$(),this.$29$(),this.$30$(),this.$25$()},q.prototype.isTitleVisible=function(q){return!("TitleEditingPoint"===q.title&&!this.editor.pointsEditingMode)&&S.prototype.isTitleVisible.call(this,q)},q.prototype.$23$=function(){this.addDBCheckBox("p",k("editor.closed"),"closePath"),this.addDBColor("s",k("editor.outlinecolor"),"border.color"),this.addDBInput("s",k("editor.outlinewidth"),"border.width","number",1)},q.prototype.$24$=function(){S.prototype.$24$.call(this),this.addDBComboBox("s",k("editor.fillrule"),"shape.fill.rule",jW.consts.fillRules,jW.consts.fillRuleLabels)},q.prototype.$25$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",k("editor.color"),"select.color"),this.addDBInput("s",k("editor.width"),"select.width","number",1);var S=[];this.addLabelCheckBox(S,k("editor.shadow"),function(S){return"shadow"===S.s("select.type")},function(S,q){S.s("select.type",q?"shadow":null)}),this.addDBRow(S,"s","select.type"),this.addDBInput("s",k("editor.shadowblur"),"shadow.blur","number",1),this.addDBInput("s",k("editor.shadowoffsetx"),"shadow.offset.x","number",1),this.addDBInput("s",k("editor.shadowoffsety"),"shadow.offset.y","number",1)},q}(Cz),cz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.addControlProperties=function(){S.prototype.addControlProperties.call(this),this.addDBCheckBox("p",k("editor.clickthroughenabled"),"clickThroughEnabled");var q=[];this.addLabelCheckBox(q,k("editor.syncsize"),function(S){return S.isSyncSize()},function(S,q){S instanceof ht.Block&&(S.setSyncSize(q),S instanceof ht.RefGraph&&(S.p(0,0),S.setRotation(0),S.setAnchor(.5,.5),S.setScale(1,1),S.setSize(20,20),S.setRef(S.getRef())))}),this.addDBRow(q,"p","syncSize")},q.prototype.addDBGray=function(){},q.prototype.addDBBodyColorProperty=function(){},q.prototype.addDBOpacityProperty=function(){},q.prototype.$91$=function(){},q.prototype.$28$=function(){},q.prototype.$84$=function(){},q}(Cz),Xz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.$27$=function(){S.prototype.$27$.call(this),this.addDBRef()},q.prototype.addDBRef=function(){var S=this,q=[],W=function(S){return S.getRef()},Z=function(S,q){S instanceof ht.RefGraph&&(S.p(0,0),S.setRotation(0),S.setAnchor(.5,.5),S.setScale(1,1),S.setSize(20,20),S.setRef(q))},z=function(q,W){var Z=W.view.draggingData;return!!Z&&(S.editor.url!==Z.url&&Z.fileType===KW)};return this.addLabelURL(q,k("editor.ref"),W,Z,z),this.addDBRow(q,"p","ref")},q.prototype.addDBGray=function(){},q}(cz),fz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){this.addCustomProperties(),this.addControlProperties(),this.addLayoutProperties(),this.$27$(),this.$21$(),this.$25$()},q.prototype.$21$=function(){this.addTitle("TitleText"),this.addDBInput("s",k("editor.content"),"text"),this.addDBAlign("s",k("editor.align"),"text.align"),this.addDBVAlign("s",k("editor.valign"),"text.vAlign"),this.addDBColor("s",k("editor.color"),"text.color"),this.addDBFont("s",k("editor.font"),"text.font"),this.addDBCheckBox("s",k("editor.shadow"),"text.shadow"),this.addDBColor("s",k("editor.shadowcolor"),"text.shadow.color"),this.addDBInput("s",k("editor.shadowblur"),"text.shadow.blur","number",1),this.addDBInput("s",k("editor.shadowoffsetx"),"text.shadow.offset.x","number",1),this.addDBInput("s",k("editor.shadowoffsety"),"text.shadow.offset.y","number",1)},q}(Cz),Jz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z,"comp"))}return uW(q,S),q.prototype.initForm=function(){this.addCustomProperties(),this.addControlProperties(),this.addLayoutProperties(),this.$11$(),this.$19$()},q.prototype.isTitleVisible=function(q){return!!this.inspectorFilter.isCompTitleVisible(this.editor,this.data?this.data.compType:null,q.title)&&S.prototype.isTitleVisible.call(this,q)},q.prototype.isPropertyVisible=function(q){return!!this.inspectorFilter.isCompPropertyVisible(this.editor,this.data?this.data.compType:null,q.keys&&q.keys.name)&&S.prototype.isPropertyVisible.call(this,q)},q.prototype.addControlProperties=function(){this.addTitle("TitleControl"),this.addEventProperties(),this.addStyleCheckBox(k("editor.visible"),"2d.visible","visible"),this.addStyleCheckBox(k("editor.selectable"),"2d.selectable","selectable"),this.addStyleCheckBox(k("editor.movable"),"2d.movable","movable"),this.addStyleCheckBox(k("editor.editable"),"2d.editable","editable"),this.addStyleCheckBox(k("editor.pixelperfect"),"pixelPerfect","pixelPerfect")},q.prototype.$11$=function(){this.addTitle("TitleBasic"),this.$13$(),this.$14$(),this.addStyleInput(k("editor.prefix"),"prefix","prefix"),this.$18$(),this.addStyleZeroToOne(k("editor.opacity"),"opacity","opacity"),this.addState()},q.prototype.addState=function(){var S=this,q=[],W=new ht.widget.ComboBox,Z=i("s","state"),z=n("s","state");this.addLabel(q,k("editor.state"),Z,z),W.onValueChanged=function(){S.setValue(z,W.getValue())},this.updateHandlers.push(function(){if(!q.hidden){var z=S.getValue(Z),k=S.editor.symbolStatePane.getAllStateEnum();if(k&&k.length){var Q=k.map(function(S){return S.value}),U=k.map(function(S){return S.label||S.value});Q.unshift(void 0),U.unshift(""),W.setValues(Q),W.setLabels(U),W.getValue()!==z&&W.setValue(z)}}}),q.push(W);var Q=this.addFuncRow(q,"state");return Q.visible=function(){var q=S.editor.symbolStatePane.getAllStateEnum();return q&&q.length},Q},q.prototype.$12$=function(){var S=[];this.addLabelInput(S,k("editor.area"),function(S){return"["+z(S.p().x-S.getWidth()*S.getAnchor().x)+","+z(S.p().y-S.getHeight()*S.getAnchor().y)+","+z(S.getWidth())+","+z(S.getHeight())+"]"}),this.addFuncRow(S,"rect")},q.prototype.$13$=function(){var S=[];this.addLabelInput(S,k("editor.type"),function(S){return S.compType}),this.addRow(S,this.w1).keys={name:"type"}},q.prototype.$14$=function(){var S=[];this.addLabelInput(S,k("editor.name"),function(S){return S.getDisplayName()},function(S,q){S.setDisplayName(q)}),this.addFuncRow(S,"displayName")},q.prototype.$15$=function(){var S=[];this.addLabelInput(S,k("editor.rotation"),function(S){return 180/Math.PI*S.getRotation()},function(S,q){S instanceof ht.Node&&S.setRotation(q*Math.PI/180)},"number",1),this.addFuncRow(S,"rotation")},q.prototype.$16$=function(){var S=[];this.addLabelInput(S,k("editor.anchorx"),function(S){return S.getAnchor().x},function(S,q){S instanceof ht.Node&&S.setAnchor(q,S.getAnchor().y,!0)},"number",.01),this.addFuncRow(S,"anchorX"),S=[],this.addLabelInput(S,k("editor.anchory"),function(S){return S.getAnchor().y},function(S,q){S instanceof ht.Node&&S.setAnchor(S.getAnchor().x,q,!0)},"number",.01),this.addFuncRow(S,"anchorY")},q.prototype.$17$=function(){var S=[];this.addLabelInput(S,k("editor.scalex"),function(S){return S.getScale().x},function(S,q){S instanceof ht.Node&&S.setScale(q,S.getScale().y)},"number",.01),this.addFuncRow(S,"scaleX"),S=[],this.addLabelInput(S,k("editor.scaley"),function(S){return S.getScale().y},function(S,q){S instanceof ht.Node&&S.setScale(S.getScale().x,q)},"number",.01),this.addFuncRow(S,"scaleY")},q.prototype.$18$=function(){this.addStyleZeroToOne(k("editor.clippercentage"),"clip.percentage","clipPercentage"),this.addStyleComboBox(k("editor.clipdirection"),"clip.direction",jW.consts.clipDirections,jW.consts.clipDirectionLabels,null,"clipDirection")},q.prototype.$19$=function(){this.addTitle("TitleShadow"),this.addStyleCheckBox(k("editor.shadow"),"shadow","shadow"),this.addStyleColor(k("editor.shadowcolor"),"select.color","shadowColor"),this.addStyleInput(k("editor.shadowblur"),"shadow.blur","number",1,"shadowblur"),this.addStyleInput(k("editor.shadowoffsetx"),"shadow.offset.x","number",1,"shadowOffsetX"),this.addStyleInput(k("editor.shadowoffsety"),"shadow.offset.y","number",1,"shadowOffsetYs")},q.prototype.$20$=function(){var S=[];return this.addLabelInput(S,k("editor.posx"),function(S){return S.p().x},function(S,q){S instanceof ht.Node&&S.p(q,S.p().y)},"number",1),this.addLabelInput(S,k("editor.posy"),function(S){return S.p().y},function(S,q){S instanceof ht.Node&&S.p(S.p().x,q)},"number",1),this.addRow(S,this.w1w1).keys={name:"position"},S=[],this.addLabelInput(S,k("editor.width"),function(S){return S.getWidth()},function(S,q){S instanceof ht.Node&&S.setWidth(q)},"number",1),this.addLabelInput(S,k("editor.height"),function(S){return S.getHeight()},function(S,q){S instanceof ht.Node&&S.setHeight(q)},"number",1),this.addRow(S,this.w1w1).keys={name:"size"},S},q.prototype.addStyleColor=function(S,q,W,Z){var z=[];return this.addLabelColor(z,S,function(S){return S.s(q)},function(S,W){"shape.background"===q&&S.s("shape.gradient.pack")&&S.s("shape.gradient.pack",void 0),S.s(q,W)}),this.addFuncRow(z,q,W,Z)},q.prototype.addStyleFunction=function(S,q,W,Z,z){var k=[];return this.addLabelFunction(k,S,function(S){return S.s(q)},function(S,W){S.s(q,W)},W,Z),this.addFuncRow(k,q,W,z)},q.prototype.addStyleDataModel=function(S,q,W,Z,z){var k=[];return this.addLabelDataModel(k,S,function(S){return S.s(q)},function(S,W){S.s(q,W)},W,Z),this.addFuncRow(k,q,W,z)},q.prototype.addStyleObject=function(S,q,W,Z){var z=[];return this.addLabelObject(z,S,function(S){return S.s(q)},function(S,W){S.s(q,W)},W),this.addFuncRow(z,q,W,Z)},q.prototype.addStyleLabel=function(S,q,W,Z){var z=[];return this.addLabelInput(z,S,function(S){var W=S.s(q);return W&&W.replace&&(W=W.replace(/\n/g,"\\n")),W},function(S,W){W&&W.replace&&(W=W.replace(/\\n/g,"\n")),S.s(q,W)}),this.addFuncRow(z,q,W,Z)},q.prototype.addStyleArray=function(S,q,W,Z,z){var k=[];return this.addLabelArray(k,S,function(S){return S.s(q)},function(S,W){S.s(q,W)},Z),this.addFuncRow(k,q,W,z)},q.prototype.addStyleMultiline=function(S,q,W,Z){var z=[];return this.addLabelMultiline(z,S,function(S){return S.s(q)},function(S,W){S.s(q,W)}),this.addFuncRow(z,q,W,Z)},q.prototype.addStyleFont=function(S,q,W,Z){var z=[];return this.addLabelFont(z,S,function(S){return S.s(q)},function(S,W){S.s(q,W)}),this.addFuncRow(z,q,W,Z)},q.prototype.addStyleTextArea=function(S,q,W,Z){var z=[];return this.addLabelTextArea(z,S,function(S){return S.s(q)},function(S,W){S.s(q,W)}),this.addFuncRow(z,q,W,Z)},q.prototype.addStyleInput=function(S,q,W,Z,z,k){var Q=[];return this.addLabelInput(Q,S,function(S){return S.s(q)},function(S,W){S.s(q,W)},W,Z),this.addFuncRow(Q,q,z,k)},q.prototype.addStyleCheckBox=function(S,q,W,Z){var z=[];return this.addLabelCheckBox(z,S,function(S){return S.s(q)},function(S,W){S.s(q,W)}),this.addFuncRow(z,q,W,Z)},q.prototype.addStyleAlign=function(S,q,W,Z){var z=[];return this.addLabelComboBox(z,S,function(S){return S.s(q)||"center"},function(S,W){S.s(q,W)},["left","center","right"],[k("editor.align.left"),k("editor.align.center"),k("editor.align.right")]),this.addFuncRow(z,q,W,Z)},q.prototype.addStyleVAlign=function(S,q,W,Z){var z=[];return this.addLabelComboBox(z,S,function(S){return S.s(q)||"bottom"},function(S,W){S.s(q,W)},["top","middle","bottom"],[k("editor.valign.top"),k("editor.valign.middle"),k("editor.valign.bottom")]),this.addFuncRow(z,q,W,Z)},q.prototype.addStyleStretch=function(S,q,W,Z){var z=[];return this.addLabelComboBox(z,S,function(S){return S.s(q)||"fill"},function(S,W){S.s(q,W)},["fill","uniform","centerUniform"],[k("editor.stretch.fill"),k("editor.stretch.uniform"),k("editor.stretch.centeruniform")]),this.addFuncRow(z,q,W,Z)},q.prototype.addStyleComboBox=function(S,q,W,Z,z,k,Q){var U=[];return this.addLabelComboBox(U,S,function(S){return S.s(q)},function(S,W){S.s(q,W)},W,Z,z),this.addFuncRow(U,q,k,Q)},q.prototype.addStyleImage=function(S,q,W,Z){var z=[];return this.addLabelImage(z,S,function(S){return S.s(q)},function(S,W){S.s(q,W)}),this.addFuncRow(z,q,W,Z)},q.prototype.addStyleURL=function(S,q,W,Z){var z=[];return this.addLabelURL(z,S,function(S){return S.s(q)},function(S,W){S.s(q,W)}),this.addFuncRow(z,q,W,Z)},q.prototype.addStylePattern=function(S,q,W,Z){var z=[];return this.addLabelInput(z,S,function(S){return S.s(q)},function(S,W){S.s(q,W)},"pattern"),this.addFuncRow(z,q,W,Z)},q.prototype.addStyleZeroToOne=function(S,q,W){return this.addStyleRange(S,q,0,1,.01,W)},q.prototype.addStylePosition=function(S,q,W){return this.addStyleRange(S,q,1,55,1,W)},q.prototype.addStyleRange=function(S,q,W,Z,z,k){var Q=[];return this.addLabelInput(Q,S,function(S){var W=S.s(q);return null==W?Z:W},function(S,z){void 0!==Z&&z>Z&&(z=Z),void 0!==W&&z<W&&(z=W),S.s(q,z)},"number",z),this.addFuncRow(Q,q,k)},q.prototype.addStyleRotation=function(S,q,W,Z,z,k){var Q=[];return this.addLabelInput(Q,S,function(S){var W=S.s(q);return null==W?z:180/Math.PI*W},function(S,W){W=W*Math.PI/180,void 0!==z&&W>z&&(W=z),void 0!==Z&&W<Z&&(W=Z),S.s(q,W)},"number",k||1),this.addFuncRow(Q,q,W)},q.prototype.addStyleGradient=function(S,q,W,Z,z){var k=[];return this.addLabelGradient(k,S,q,W,Z),this.addFuncRow(k,q,z)},q.prototype.addLayoutProperties=function(){var S=this;this.addTitle("TitleLayout"),this.$12$(),this.$20$(),this.$15$(),this.$16$(),this.$17$();var q=function(S){return!!S.dataModel.a("fitSize")},W=this.layoutGv=new ht.graph.GraphView,Z=this.layoutNode=new ht.Node,z=!1;if(Z.setImage("editor.layout.helper"),Z.a("selectColor",jW.config.color_select),W.dm().add(Z),W.tx(50),W.ty(50),W.handleScroll=function(){},W.handlePinck=function(){},W.setScrollBarVisible(!1),W.setRectSelectable(!1),W.setPannable(!1),W.setMovableFunc(function(){return!1}),W.dm().md(function(q){z||(S.beginTransaction(),S.dataModel.sm().getSelection().each(function(S){"a:layout.v"===q.property?S.s("layout.v",q.newValue):"a:layout.h"===q.property&&S.s("layout.h",q.newValue)}),S.endTransaction())}),jW.config.layoutEnabled){this.addRow(["",{element:W},""],[.1,100,.1],100).visible=q,this.addUpdateHandler(function(q,W){var k=S.data;z=!0,Z.a({"layout.v":k.s("layout.v"),"layout.h":k.s("layout.h")}),z=!1});var Q=[];this.addLabelComboBox(Q,k("editor.nodeLayout.h"),function(S){return S.s("layout.h")},function(S,q){S.s("layout.h",q)},jW.consts.hLayoutValues,jW.consts.hLayoutLabels),this.addFuncRow(Q,"layout.h").visible=q,Q=[],this.addLabelComboBox(Q,k("editor.nodeLayout.v"),function(S){return S.s("layout.v")},function(S,q){S.s("layout.v",q)},jW.consts.vLayoutValues,jW.consts.vLayoutLabels),this.addFuncRow(Q,"layout.v").visible=q}},q}(xz),gz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.$34$=function(q){if(q&&"s:shape"===q.property)return void this.filterPropertiesLater();S.prototype.$34$.call(this,q)},q.prototype.isTitleVisible=function(q){if(this.data){var W=this.data.s("shape");if("TitleArc"===q.title&&"arc"!==W)return!1}return S.prototype.isTitleVisible.call(this,q)},q.prototype.isPropertyVisible=function(q){if(this.data){var W=q.items.tag;if(W){var Z=this.data.s("shape");if("shapeDepth"===W&&"rect"!==Z)return!1;if("shapeCornerRadius"===W&&"roundRect"!==Z)return!1;if("shapePolygonSide"===W&&"polygon"!==Z)return!1}}return S.prototype.isPropertyVisible.call(this,q)},q.prototype.initForm=function(){S.prototype.initForm.call(this),this.$36$(),this.$37$(),this.addDashProperties(),this.addArcProperties()},q.prototype.$13$=function(){this.addStyleComboBox(k("editor.type"),"shape",jW.consts.shapes.slice(1),jW.consts.shapeLabels.slice(1),jW.consts.shapeIcons.slice(1),"type")},q.prototype.$36$=function(){this.addTitle("TitleBackground"),this.addStyleColor(k("editor.background"),"shape.background","background"),this.addStyleImage(k("editor.repeatimage"),"shape.repeat.image","repeatImage"),this.addStyleGradient(k("editor.gradient"),"shape.gradient","shape.background","shape.gradient.color","gradient"),this.addStyleColor(k("editor.gradientcolor"),"shape.gradient.color","gradientColor"),this.addStyleZeroToOne(k("editor.clippercentage"),"shape.fill.clip.percentage","fillClipPercentage"),this.addStyleComboBox(k("editor.clipdirection"),"shape.fill.clip.direction",jW.consts.clipDirections,jW.consts.clipDirectionLabels,null,"fillClipDirection"),this.addStyleInput(k("editor.depth"),"shape.depth","int",1,"depth").items.tag="shapeDepth"},q.prototype.$37$=function(){this.addTitle("TitleBorder"),this.addStyleInput(k("editor.width"),"shape.border.width","number",1,"borderWidth"),this.addStyleCheckBox(k("editor.widthabsolute"),"shape.border.width.absolute","borderWidthAbsolute"),this.addStyleColor(k("editor.color"),"shape.border.color","borderColor"),this.addStylePattern(k("editor.pattern"),"shape.border.pattern","borderPattern"),this.addStyleCheckBox(k("editor.threed"),"shape.border.3d","border3d"),this.addStyleColor(k("editor.threedcolor"),"shape.border.3d.color","border3dColor"),this.addStyleComboBox(k("editor.cap"),"shape.border.cap",jW.consts.caps,jW.consts.capLabels,null,"borderCap"),this.addStyleComboBox(k("editor.join"),"shape.border.join",jW.consts.joins,jW.consts.joinLabels,null,"borderJoin"),this.addStyleInput(k("editor.radius"),"shape.corner.radius","number",1,"cornerRadius").items.tag="shapeCornerRadius",this.addStyleInput(k("editor.sides"),"shape.polygon.side","int",1,"polygonSide").items.tag="shapePolygonSide"},q.prototype.addDashProperties=function(){this.addTitle("TitleDash"),this.addStyleCheckBox(k("editor.dash"),"shape.dash","dash"),this.addStylePattern(k("editor.pattern"),"shape.dash.pattern","dashPattern"),this.addStyleColor(k("editor.color"),"shape.dash.color","dashColor"),this.addStyleInput(k("editor.offset"),"shape.dash.offset","number",1,"dashOffset"),this.addStyleInput(k("editor.width"),"shape.dash.width","number",1,"dashWidth"),this.addStyleCheckBox(k("editor.threed"),"shape.dash.3d","dash3d"),this.addStyleColor(k("editor.threedcolor"),"shape.dash.3d.color","dash3dColor")},q.prototype.addArcProperties=function(){this.addTitle("TitleArc"),this.addStyleCheckBox(k("editor.arcoval"),"shape.arc.oval","arcOval"),this.addStyleCheckBox(k("editor.closed"),"shape.arc.close","arcClose"),this.addStyleRotation(k("editor.arcfrom"),"shape.arc.from","arcFrom"),this.addStyleRotation(k("editor.arcto"),"shape.arc.to","arcTo")},q}(Jz),Tz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){S.prototype.initForm.call(this),this.addTitle("TitleImage");var q=[];this.addLabelImage(q,k("editor.name"),function(S){return S.s("image")},function(S,q){NS(q)&&q.endsWith("[...]")||S.s("image",q)}),this.addButton(q,null,k("editor.resetsize"),"editor.resetsize.state",function(S){S instanceof ht.Node&&S.setSize(-1,-1)}),this.addFuncRow(q,"image","name"),this.addStyleColor(k("editor.color"),"body.color","color"),this.addStyleStretch(k("editor.stretch"),"image.stretch","stretch")},q}(Jz),az=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){S.prototype.initForm.call(this),this.$43$()},q.prototype.$43$=function(){this.addTitle("TitleBorder"),this.addStyleInput(k("editor.width"),"border_width","number",1,"border"),this.addStyleColor(k("editor.color"),"border_color","color")},q}(Jz),rz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){S.prototype.initForm.call(this),this.addBasicChartProperties()},q.prototype.addBasicChartProperties=function(){this.addTitle("TitleChart"),this.addStyleCheckBox(k("editor.text"),"chart.label","label"),this.addStyleColor(k("editor.color"),"chart.label.color","labelColor"),this.addStyleFont(k("editor.font"),"chart.label.font","labelFont")},q}(Jz),oz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){S.prototype.initForm.call(this),this.addPieChartProperties()},q.prototype.addBasicChartProperties=function(){S.prototype.addBasicChartProperties.call(this),this.addStyleRotation(k("editor.rotation"),"chart.start.angle","startAngle"),this.addStyleCheckBox(k("editor.hollow"),"chart.hollow","hollow")},q.prototype.createChartIndexColumn=function(S){var q=this;return{name:S,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,getValueType:function(S){return"chart.values"===S.getTag()?"number":"color"},getValue:function(W){if(q.data){var Z=q.data.s(W.getTag());return Z?Z[S]:void 0}},setValue:function(W,Z,z,k){var Q=W.getTag(),U=function(q,W){var Z=Gq(q.s(Q));Z[S]=W,"chart.values"===Q?uq(Z):Dq(Z),q.s(Q,Z)};q.setValue(U,z)}}},q.prototype.addPieChartProperties=function(){var S=this,q=this.tableModel=new ht.DataModel,W=this.tablePane=new pW(q),Z=this.tableView=W.getTableView();W.getTableHeader().setMovable(!1),Z.setEditable(!0),Z.isEditable=function(){return S.editor.editable},W.getView().style.border=jW.config.color_line+" solid 1px";var z=[W];this.addRow(z,[.1],ht.Default.widgetRowHeight+4*Z.getRowHeight()).keys={name:"chartTable"};var Q=new ht.Data,U=new ht.Data;Q.setTag("chart.values"),U.setTag("chart.colors"),q.add(Q),q.add(U),this.updateHandlers.push(function(){if(!z.hidden&&S.data){Z.getColumnModel().clear(),W.addColumns([{name:k("editor.length"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"int",getValue:function(q){if(!S.data)return 0;var W=S.data.s("chart.values");return W?W.length:0},setValue:function(q,W,Z,z){var k=function(S,q){if(q>=0){var W=Gq(S.s("chart.values"),q);uq(W),S.s("chart.values",W),W=Gq(S.s("chart.colors"),q),Dq(W),S.s("chart.colors",W)}};S.setValue(k,Z)}},{tag:"binding",name:k("editor.binding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(q,Z,z,k){var Q="chart.values"===q.getTag()?"values":"colors";return S.editor.funcView.toggle(W,q.getTag(),Q,S),!1},drawCell:function(q,W,Z,z,k,Q,U,u,D){var G=!!S.data.a(W.getTag());E(q,ht.Default.getImage(G?"editor.bind":"editor.unbind"),"centerUniform",k,Q,U,u,W,D,G&&!Z?jW.config.color_select:jW.config.color_dark)}}]);for(var q=S.data.s("chart.values"),Q=q?q.length:0,U=0;U<Q;U++)W.addColumns([S.createChartIndexColumn(U)])}})},q}(rz),Bz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){S.prototype.initForm.call(this),this.addOneDimensionalProperties()},q.prototype.createChartIndexColumn=function(S){var q=this;return{name:S,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,getValueType:function(S){return"values"===S.getTag()?"number":"color"},getValue:function(W){if(q.data){var Z=wS(q.data.s("chart.series"));if(Z&&Z[0]){var z=wS(Z[0][W.getTag()]);return z?z[S]:void 0}}},setValue:function(W,z,k,Q){var U=W.getTag(),u=function(q,W){var z=q.s("chart.series");if(z){var k=Z(z),Q=wS(k);if(Q[0]){var u=wS(Q[0][U]);u&&u[S]!==W&&(u[S]=W,"values"===U?uq(u):Dq(u),q.s("chart.series",k))}}};q.setValue(u,k)}}},q.prototype.addOneDimensionalProperties=function(){var S=this,q=this.tableModel=new ht.DataModel,W=this.tablePane=new pW(q),z=this.tableView=W.getTableView();W.getTableHeader().setMovable(!1),z.setEditable(!0),z.isEditable=function(){return S.editor.editable},W.getView().style.border=jW.config.color_line+" solid 1px";var Q=[W];this.addRow(Q,[.1],ht.Default.widgetRowHeight+4*z.getRowHeight()).keys={name:"chartTable"};var U=new ht.Data,u=new ht.Data;U.setTag("values"),u.setTag("colors"),q.add(U),q.add(u),this.updateHandlers.push(function(){if(!Q.hidden&&S.data){z.getColumnModel().clear(),W.addColumns([{name:k("editor.length"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"int",getValue:function(q){if(!S.data)return 0;var W=wS(S.data.s("chart.series"));if(!W)return 0;if(!W[0])return 0;var Z=wS(W[0].values);return Z?Z.length:0},setValue:function(q,W,z,k){var Q=function(S,q){if(q>=0){var W=S.s("chart.series"),z=W?Z(W):[],k=wS(z);k[0]||(k[0]={});var Q=k[0];Q.values||(Q.values=[]),Q.colors||(Q.colors=[]);var U=wS(Q.values),u=wS(Q.colors);q===U.length&&q===u.length||(U.length=q,u.length=q,uq(U),Dq(u),S.s("chart.series",z))}};S.setValue(Q,z)}},{tag:"binding",name:k("editor.binding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(q,z,k,Q){var U=q.getTag(),u=function(){return Fq(S.data,U)},D=function(q){S.setValue(function(S,W){var z=S.s("chart.series");if(z){var k=Z(z),Q=wS(k);if(Q[0]){var u=wS(Q[0][U]);Q[0][U]=q?{value:u,func:q}:u,S.s("chart.series",k)}}},q)};return S.editor.funcView.toggle(W,U,U,S,u,D),!1},drawCell:function(q,W,Z,z,k,Q,U,u,D){var G=!!Fq(S.data,W.getTag());E(q,ht.Default.getImage(G?"editor.bind":"editor.unbind"),"centerUniform",k,Q,U,u,W,D,G&&!Z?jW.config.color_select:jW.config.color_dark)}}]);for(var q=sq(S.data,"values"),U=q?q.length:0,u=0;u<U;u++)W.addColumns([S.createChartIndexColumn(u)])}})},q}(rz),Mz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){S.prototype.initForm.call(this),this.addSeriesChartProperties()},q.prototype.addSeriesChartProperties=function(){var S=this,q=[],W=function(S){var q=S.s("chart.series");return q?q.length:0},z=function(S,q){if(q>=0){var W=S.s("chart.series"),z=W?Z(W):[],k=wS(z);if(k.length!==q){k.length=q;for(var Q=void 0,U=0;U<q;U++){k[U]||(k[U]={});var u=k[U];u.values||(u.values=[]),u.color||(u.color=ht.Color.chart[U%ht.Color.chart.length]);var D=wS(u.values);wS(u.colors);0===U?Q=D.length:D.length=Q,uq(D)}S.s("chart.series",z)}}};this.addLabelInput(q,k("editor.series"),W,z,"int",1),W=function(S){var q=S.s("chart.series");if(q){var W=q[0];if(W){var Z=wS(W.values);return Z?Z.length:0}}return 0},z=function(S,q){if(q>=0){var W=S.s("chart.series"),z=W?Z(W):[],k=wS(z);if(k.length){for(var Q=0;Q<k.length;Q++){k[Q]||(k[Q]={});var U=k[Q];U.values||(U.values=[]);var u=wS(U.values);if(u.length===q)return;U.color||(U.color=ht.Color.chart[Q%ht.Color.chart.length]);wS(U.colors);u.length=q,uq(u)}S.s("chart.series",z)}}},this.addLabelInput(q,k("editor.length"),W,z,"int",1),this.addRow(q,this.w1w1).keys={name:"chartSeries"};var Q=this.tableModel=new ht.DataModel,U=this.tablePane=new pW(Q),u=this.tableView=U.getTableView();U.getTableHeader().setMovable(!1),u.setEditable(!0),u.isEditable=function(){return S.editor.editable},U.getView().style.border=jW.config.color_line+" solid 1px";var D=[U];this.addRow(D,[.1],160).keys={name:"chartTable"},this.updateHandlers.push(function(){if(!D.hidden&&S.data){Q.clear(),u.getColumnModel().clear();var q=S.data.s("chart.series");if(q)for(var W=0;W<q.length;W++){var z=new ht.Data;z.serie=q[W],z.index=W,Q.add(z)}if(U.addColumns([{name:k("editor.index"),width:50,align:"center",sortable:!1,clickable:!1,valueType:"int",getValue:function(S){return S.index}},{tag:"binding",name:k("editor.colorbinding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(q,W,z,k){var Q=q.index,u=function(){return sS(q.serie.color)},D=function(q){S.setValue(function(S,W){var z=S.s("chart.series");if(z){var k=Z(z),U=wS(k),u=U[Q];if(u){var D=wS(u.color);u.color=q?{value:D,func:q}:D,S.s("chart.series",k)}}},q)};return S.editor.funcView.toggle(U,"values","values",S,u,D),!1},drawCell:function(S,q,W,Z,z,k,Q,U,u){var D=!!sS(q.serie.color);E(S,ht.Default.getImage(D?"editor.bind":"editor.unbind"),"centerUniform",z,k,Q,U,q,u,D&&!W?jW.config.color_select:jW.config.color_dark)}},{name:k("editor.color"),width:50,align:"center",editable:!0,sortable:!1,
clickable:!1,valueType:"color",getValue:function(S){return wS(S.serie.color)},setValue:function(q,W,z,k){var Q=q.index,U=wS(q.serie.color);if(z&&U!==z){var u=function(S,q){var W=S.s("chart.series");if(W){var z=Z(W),k=wS(z),U=k[Q];if(U){var u=sS(U.color);U.color=u?{value:q,func:u}:q,S.s("chart.series",z)}}};S.setValue(u,z)}}},{tag:"binding",name:k("editor.valuebinding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(q,W,z,k){var Q=q.index,u=function(){return sS(q.serie.values)},D=function(q){S.setValue(function(S,W){var z=S.s("chart.series");if(z){var k=Z(z),U=wS(k),u=U[Q];if(u){var D=wS(u.values);u.values=q?{value:D,func:q}:D,S.s("chart.series",k)}}},q)};return S.editor.funcView.toggle(U,"values","values",S,u,D),!1},drawCell:function(S,q,W,Z,z,k,Q,U,u){var D=!!sS(q.serie.values);E(S,ht.Default.getImage(D?"editor.bind":"editor.unbind"),"centerUniform",z,k,Q,U,q,u,D&&!W?jW.config.color_select:jW.config.color_dark)}}]),q){var G=q[0];if(G){var b=wS(G.values);if(b)for(var v=0;v<b.length;v++)U.addColumns([S.createChartIndexColumn(v)])}}}})},q.prototype.createChartIndexColumn=function(S){var q=this;return{name:S,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"number",getValue:function(q){var W=wS(q.serie.values);return W?W[S]:void 0},setValue:function(W,z,k,Q){var U=W.index,u=function(q,W){var z=q.s("chart.series");if(z){var k=Z(z),Q=wS(k);if(Q[U]){var u=wS(Q[U].values);u&&u[S]!==W&&(u[S]=W,q.s("chart.series",k))}}};q.setValue(u,k)}}},q}(rz),Yz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.addBasicChartProperties=function(){S.prototype.addBasicChartProperties.call(this),this.addStyleComboBox(k("editor.type"),"chart.type",jW.consts.columnChartTypes,jW.consts.columnChartTypeLabels,null,"type")},q.prototype.$13$=function(){},q}(Mz),Az=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){S.prototype.initForm.call(this)},q}(Mz),lz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){this.$26$(),S.prototype.initForm.call(this)},q.prototype.isTitleVisible=function(q){return!("TitleEditingPoint"===q.title&&!this.editor.pointsEditingMode)&&S.prototype.isTitleVisible.call(this,q)},q.prototype.$13$=function(){var S=[];this.addLabelInput(S,k("editor.type"),function(S){return S.compType}),this.addRow(S,this.w1).keys={name:"type"}},q.prototype.$36$=function(){S.prototype.$36$.call(this),this.addStyleComboBox(k("editor.fillrule"),"shape.fill.rule",jW.consts.fillRules,jW.consts.fillRuleLabels,null,"fillRule")},q.prototype.$37$=function(){S.prototype.$37$.call(this);var q=[];this.addLabelCheckBox(q,k("editor.closed"),function(S){return S.isClosePath()},function(S,q){S instanceof ht.Shape&&S.setClosePath(q)}),this.addFuncRow(q,"name")},q}(gz),wz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){S.prototype.initForm.call(this),this.addTitle("TitleText"),this.addStyleLabel(k("editor.text"),"text","text"),this.addStyleAlign(k("editor.align"),"text.align","align"),this.addStyleVAlign(k("editor.valign"),"text.vAlign","vAlign"),this.addStyleColor(k("editor.color"),"text.color","color"),jW.SceneView&&(this.addStyleGradient(k("editor.gradient"),"text.gradient","text.color","text.gradient.color","gradient"),this.addStyleColor(k("editor.gradientcolor"),"text.gradient.color","gradientColor"),this.addStyleCheckBox(k("editor.vertical"),"text.vertical","vertical"),this.addStyleComboBox(k("editor.textdecoration"),"text.decoration",[void 0,"overline","line.through","underline"],["",k("editor.overline"),k("editor.line.through"),k("editor.underline")],null,"decoration")),this.addStyleFont(k("editor.font"),"text.font","font")},q.prototype.$19$=function(){this.addTitle("TitleShadow"),this.addStyleCheckBox(k("editor.shadow"),"text.shadow","shadow"),this.addStyleColor(k("editor.shadowcolor"),"text.shadow.color","shadowColor"),this.addStyleInput(k("editor.shadowblur"),"text.shadow.blur","number",1,"shadowblur"),this.addStyleInput(k("editor.shadowoffsetx"),"text.shadow.offset.x","number",1,"shadowOffsetX"),this.addStyleInput(k("editor.shadowoffsety"),"text.shadow.offset.y","number",1,"shadowOffsetYs")},q}(Jz),sz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.$13$=function(){var S=[];this.addLabelInput(S,k("editor.type"),function(S){return"function"}),this.addFuncRow(S,"type")},q}(Jz),Fz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){S.prototype.initForm.call(this),this.addComponent()},q.prototype.$13$=function(){},q.prototype.addComponent=function(){var S=this;this.addTitle("TitleComponent");var q=[];q.forceToUpdate=!0;var W=function(S,q){return!!q.view.draggingData&&q.view.draggingData.fileType===dW};this.addLabelURL(q,k("editor.type"),function(q){var W=q.s("type");return S.$42$(q.properties),W},function(S,q){S.s("type",q)},W);var Z=new ht.widget.Image;Z.vectorDataBindingDisabled=!0,this.updateHandlers.push(function(){if(!q.hidden){var W=S.data?S.data.s("type"):null;S.$42$(S.data.properties),Z.setIcon(W?dS(W):null),Z.compType=W}});var z=Z.getView();z.style.cursor="pointer";var Q=function(q){q.preventDefault(),t(q)?S.editor.open(Z.compType):S.editor.selectFileNode(Z.compType)};z.addEventListener("mousedown",Q,!1),z.addEventListener("touchstart",Q,!1),q.push(Z),this.addFuncRow(q,"type")},q.prototype.$42$=function(S){var q=this;this.properties!==S&&(this.pendingProperties=S,this._updateComponentLater||(this._updateComponentLater=!0,requestAnimationFrame(function(){q.$60$()})))},q.prototype.$60$=function(){if(this._updateComponentLater=!1,this.properties===this.pendingProperties)return void(this.pendingProperties=null);if(this._rows=this.$46$,this.removeRows(this.$35$),this.propertiesHandlers&&this.propertiesHandlers.length&&this.propertiesHandlers.forEach(this.removeUpdateHandler,this),this.$35$=[],this.properties=this.pendingProperties,this.properties){var S=this.updateHandlers.length,q=void 0;for(var W in this.properties){var Z=this.properties[W];if(Z.group&&q!==Z.group){q=Z.group;var z=this.addTitle(q);this.$35$.push(z)}this.addProperty(W,Z)}this.propertiesHandlers=this.updateHandlers.slice(S)}this.$46$=this._rows,this.filterProperties()},q.prototype.addProperty=function(S,q){var W=jW.config.valueTypes[q.valueType];if(!W)return this.editor.fireEvent("error",{message:"Wrong value type:"+q.valueType}),!1;var Z=k(q.name)||S,z=q.extraInfo,D=void 0,G=void 0,b=void 0;z&&z.enum&&(D=z.enum.values,G=u(z.enum.labels,z.enum.i18nLabels),b=z.enum.icons);var v=void 0;if(z&&z.buildUI){var j=function(q){return q.s(S)},i=function(q,W){q.s(S,W)},n=[];v=z.buildUI(this,n,Z,j,i,z),this.addFuncRow(n,S,S,Q(v,W),U(v,W))}else if(D)this.addStyleComboBox(Z,S,D,G,b,S);else if("int"===W.type||"number"===W.type){var P=(W.max,W.min,function(q){return q.s(S)}),R=function(q,W){q.s(S,W)},_=[];W.angle?this.addLabelRotation(_,Z,P,R,W.min,W.max,W.step):this.addLabelRange(_,Z,P,R,W.min,W.max,W.step,W.type),this.addFuncRow(_,S,S,Q(v,W))}else if("color"===W.type)this.addStyleColor(Z,S,S,Q(v,W));else if("boolean"===W.type)this.addStyleCheckBox(Z,S,S,Q(v,W));else if("enum"===W.type)this.addStyleComboBox(Z,S,W.values,W.labels,W.icons,S);else if("multiline"===W.type)this.addStyleMultiline(Z,S,S,Q(v,W));else if("font"===W.type)this.addStyleFont(Z,S,S,Q(v,W));else if("image"===W.type)this.addStyleImage(Z,S,S,Q(v,W));else if("url"===W.type)this.addStyleURL(Z,S,S,Q(v,W));else if("colorArray"===W.type)this.addStyleArray(Z,S,S,"color",Q(v,W));else if("numberArray"===W.type)this.addStyleArray(Z,S,S,"number",Q(v,W));else if("stringArray"===W.type)this.addStyleArray(Z,S,S,"string",Q(v,W));else if("objectArray"===W.type)this.addStyleArray(Z,S,S,"object",Q(v,W));else if("function"===W.type){var x=void 0;z&&z.arguments&&(x=z.arguments),this.addStyleFunction(Z,S,S,x,Q(v,W))}else if("dataModel"===W.type)this.addStyleDataModel(Z,S,S,z,Q(v,W));else if("custom"===W.type){var K=function(q){return q.s(S)},d=function(q,W){q.s(S,W)},N=[];v=W.buildUI(this,N,Z,K,d,z),this.addFuncRow(N,S,S,Q(v,W),U(v,W))}else"object"===W.type?this.addStyleObject(Z,S,S,Q(v,W)):this.addStyleInput(Z,S,null,null,S,Q(v,W));return this.$35$.push(this._rows[this._rows.length-1]),!0},q}(Jz),pz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){this.$26$(),this.addTitle("TitleBasic"),this.$13$(),this.$14$()},q.prototype.isTitleVisible=function(q){return!("TitleEditingPoint"===q.title&&!this.editor.pointsEditingMode)&&S.prototype.isTitleVisible.call(this,q)},q}(Jz),Hz=function(S){function q(W,Z){return QW(this,q),DW(this,S.call(this,W,Z))}return uW(q,S),q.prototype.initForm=function(){this.addTitle("TitleBasic"),this.$13$(),this.$14$()},q}(Jz),Ez=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));return Z.editor=W,Z.getView().style.background=jW.config.color_pane,Z}return uW(q,S),q.prototype.handleDataModelPropertyChange=function(S){var q=this.inspector;q&&q.global&&q.$34$(S)},q.prototype.handleDataModelChange=function(S){var q=this.inspector;q&&q.global&&q.$34$()},q.prototype.handleDataPropertyChange=function(S){var q=this.inspector;q&&!q.global&&q.data===S.data&&q.$34$(S)},q.prototype.handleSelectionChange=function(S){this.updateInspector(),this.inspector&&this.inspector.updateProperties()},q.prototype.handleGraphViewInteractorChange=function(S){var q=this.inspector;q&&("pointsEditingMode"===S.property?q.filterPropertiesLater():"shapePointStatus"===S.property&&q.editingPointButtons&&q.editingPointButtons.forEach(function(q){q.setSelected(q.statusValue===S.newValue),q.setBorderColor(q.isSelected()?jW.config.color_line:null)}))},q.prototype.$5$=function(S){if(this.dataModel&&(this.dataModel.removeDataModelChangeListener(this.handleDataModelChange,this),this.dataModel.removePropertyChangeListener(this.handleDataModelPropertyChange,this),this.dataModel.removeDataPropertyChangeListener(this.handleDataPropertyChange,this),this.dataModel.sm().ums(this.handleSelectionChange,this),this.currentView.graphView.getEditInteractor().ump(this.handleGraphViewInteractorChange,this)),S){if(S._isUI)return;this.currentView=S.getView(),this.dataModel=this.currentView.dm,this.dataModel.addDataModelChangeListener(this.handleDataModelChange,this),this.dataModel.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.dataModel.addDataPropertyChangeListener(this.handleDataPropertyChange,this),this.dataModel.sm().ms(this.handleSelectionChange,this),this.currentView.graphView.getEditInteractor().mp(this.handleGraphViewInteractorChange,this),this.g3d=this.currentView.g3d}else this.dataModel=null,this.currentView=null,this.g3d=null;this.updateInspector()},q.prototype.getDataInspector=function(S){return S instanceof ht.Shape?this.htShapeInspector:S instanceof ht.Edge?this.htEdgeInspector:S instanceof ht.Group?this.htGroupInspector:S instanceof ht.Text?this.htTextInspector:S instanceof ht.RefGraph?this.htRefGraphInspector:S instanceof ht.Block?this.htBlockInspector:S instanceof ht.Node?this.htNodeInspector:this.htDataInspector},q.prototype.getCompInspector=function(S){if(S instanceof BW)return this.clipInspector;if(S instanceof MW)return this.restoreInspector;if(S instanceof TW)return this.basicInspector;if(S instanceof TZ)return this.borderInspector;if(S instanceof rW)return this.imageInspector;if(S instanceof aZ)return this.pieChartInspector;if(S instanceof rZ){var q=wS(S.s("chart.series"));return q&&q.length<=1&&q[0].colors?this.oneDimensionalColumnChartInspector:this.columnChartInspector}return S instanceof oZ?this.lineChartInspector:S instanceof aW?this.shapeInspector:S instanceof oW?this.textInspector:S instanceof JZ?this.funcTypeInspector:S instanceof gZ?this.compTypeInspector:null},q.prototype.updateInspector=function(){if(this.dataModel){var S=this.dataModel.sm().ld();S?this.currentView instanceof MZ?this.inspector=this.getCompInspector(S):this.currentView instanceof $Z?this.inspector=this.getDataInspector(S):this.currentView instanceof jW.SceneView&&(this.inspector=this.getData3dInspector(S)):this.currentView instanceof MZ?this.inspector=this.symbolInspector:this.currentView instanceof $Z?this.inspector=this.displayInspector:this.currentView instanceof jW.SceneView&&(this.inspector=this.sceneInspector),this.inspector&&(this.inspector.currentView=this.currentView)}else this.inspector=null},UW(q,[{key:"basicInspector",get:function(){return this._basicInspector||(this._basicInspector=new gz(this.editor,"basic")),this._basicInspector}},{key:"borderInspector",get:function(){return this._borderInspector||(this._borderInspector=new az(this.editor,"border")),this._borderInspector}},{key:"clipInspector",get:function(){return this._clipInspector||(this._clipInspector=new pz(this.editor,"clip")),this._clipInspector}},{key:"restoreInspector",get:function(){return this._restoreInspector||(this._restoreInspector=new Hz(this.editor,"restore")),this._restoreInspector}},{key:"imageInspector",get:function(){return this._imageInspector||(this._imageInspector=new Tz(this.editor,"image")),this._imageInspector}},{key:"pieChartInspector",get:function(){return this._pieChartInspector||(this._pieChartInspector=new oz(this.editor,"pieChart")),this._pieChartInspector}},{key:"oneDimensionalColumnChartInspector",get:function(){return this._oneDimensionalColumnChartInspector||(this._oneDimensionalColumnChartInspector=new Bz(this.editor,"oneDimensionalColumnChartInspector")),this._oneDimensionalColumnChartInspector}},{key:"columnChartInspector",get:function(){return this._columnChartInspector||(this._columnChartInspector=new Yz(this.editor,"columnChart")),this._columnChartInspector}},{key:"lineChartInspector",get:function(){return this._lineChartInspector||(this._lineChartInspector=new Az(this.editor,"lineChart")),this._lineChartInspector}},{key:"shapeInspector",get:function(){return this._shapeInspector||(this._shapeInspector=new lz(this.editor,"shape")),this._shapeInspector}},{key:"textInspector",get:function(){return this._textInspector||(this._textInspector=new wz(this.editor,"text")),this._textInspector}},{key:"funcTypeInspector",get:function(){return this._funcTypeInspector||(this._funcTypeInspector=new sz(this.editor,"func")),this._funcTypeInspector}},{key:"compTypeInspector",get:function(){return this._compTypeInspector||(this._compTypeInspector=new Fz(this.editor,"comp")),this._compTypeInspector}},{key:"htShapeInspector",get:function(){return this._htShapeInspector||(this._htShapeInspector=new yz(this.editor,"Shape")),this._htShapeInspector}},{key:"htBlockInspector",get:function(){return this._htBlockInspector||(this._htBlockInspector=new cz(this.editor,"Block")),this._htBlockInspector}},{key:"htRefGraphInspector",get:function(){return this._htRefGraphInspector||(this._htRefGraphInspector=new Xz(this.editor,"RefGraph")),this._htRefGraphInspector}},{key:"htGroupInspector",get:function(){return this._htGroupInspector||(this._htGroupInspector=new $z(this.editor,"Group")),this._htGroupInspector}},{key:"htEdgeInspector",get:function(){return this._htEdgeInspector||(this._htEdgeInspector=new Lz(this.editor,"Edge")),this._htEdgeInspector}},{key:"htNodeInspector",get:function(){return this._htNodeInspector||(this._htNodeInspector=new Cz(this.editor,"Node")),this._htNodeInspector}},{key:"htTextInspector",get:function(){return this._htTextInspector||(this._htTextInspector=new fz(this.editor,"Text")),this._htTextInspector}},{key:"htDataInspector",get:function(){return this._htDataInspector||(this._htDataInspector=new mz(this.editor,"Data")),this._htDataInspector}},{key:"displayInspector",get:function(){return this._displayInspector||(this._displayInspector=new Kz(this.editor,"display")),this._displayInspector}},{key:"symbolInspector",get:function(){return this._symbolInspector||(this._symbolInspector=new Nz(this.editor,"symbol")),this._symbolInspector}},{key:"inspector",get:function(){return this.getCenterView()},set:function(S){var q=this.getCenterView();S?(S.dataModel=this.dataModel,this.dataModel&&(S.data=this.dataModel.sm().ld()),S.g3d=this.g3d,this.getCenterView()!==S&&this.setCenterView(S),S.filterPropertiesLater()):this.setCenterView(null),S===q||null==S&&null==q||this.editor.fireEvent("inspectorUpdated",{inspector:S,oldInspector:q})}}]),q}(YW),hz=function(){function S(q){QW(this,S),this.editor=q}return S.prototype.showTip=function(S,q){this.tip.innerHTML=S,this.tip.parentNode!==document.body&&ht.Default.appendToScreen(this.tip);var W=e(q);this.tip.style.left=W.x+15+"px",this.tip.style.top=W.y+"px"},S.prototype.hideTip=function(){M(this.tip)},S.prototype.clearDropView=function(S,q){this._dropView&&(this._dropView.handleCrossDrag(S,"exit",q),this._dropView=null)},S.prototype.crossDrag=function(S,q){var W=this._dropView,Z=this.$94$(S,q);W!==Z?(W&&W.handleCrossDrag(S,"exit",q),Z&&Z.handleCrossDrag(S,"enter",q)):Z&&Z.handleCrossDrag(S,"over",q),this._dropView=Z},S.prototype.crossDrop=function(S,q){this._dropView&&(this._dropView.handleCrossDrag(S,"drop",q),this._dropView=null)},S.prototype.crossCancel=function(S,q){this._dropView&&(this._dropView.handleCrossDrag(S,"cancel",q),this._dropView=null)},S.prototype.$94$=function(S,q){for(var W=O(S);W&&(!W._ht||!W._ht.isDroppable||q&&!W._ht.isDroppable(S,q));)W=W.parentNode;return W?W._ht:null},UW(S,[{key:"tip",get:function(){if(!this._tip){this._tip=F(),this._tip.className="ht-editor-dnd-tip";var S=this._tip.style;S.whiteSpace="nowrap",S.color=jW.config.color_light,S.background=jW.config.color_transparent,S.font=ht.Default.labelFont,S.padding="4px",S.borderRadius="4px",S.position="absolute",S.zIndex=1e4}return this._tip}}]),S}(),Iz=function(){function S(q,W){QW(this,S),this.editor=q,this.dnd=q.dnd,this._dragInfo={view:this},W&&(W.addEventListener("dragenter",this.handle_dragenter.bind(this),!1),W.addEventListener("dragover",this.handle_dragover.bind(this),!1),W.addEventListener("dragleave",this.handle_dragleave.bind(this),!1),W.addEventListener("drop",this.handle_drop.bind(this),!1),W.addEventListener("dragexit",this.handle_dragexit.bind(this),!1),W.addEventListener("dragend",this.handle_dragend.bind(this),!1)),this.isDroppableToDisplayView=!0,this.isDroppableToSymbolView=!0,this.isDroppableToSceneView=!0}return S.prototype.handle_dragenter=function(S){WS(S),S.stopPropagation(),this.dnd.crossDrag(S,this._dragInfo)},S.prototype.handle_dragover=function(S){WS(S),S.stopPropagation(),this.dnd.crossDrag(S,this._dragInfo)},S.prototype.handle_dragleave=function(S){WS(S),S.stopPropagation(),this.dnd.crossCancel(S,this._dragInfo)},S.prototype.handle_dragexit=function(S){WS(S),S.stopPropagation(),this.dnd.crossCancel(S,this._dragInfo)},S.prototype.handle_dragend=function(S){WS(S),S.stopPropagation(),this.dnd.crossCancel(S,this._dragInfo)},S.prototype.handle_drop=function(S){WS(S),S.stopPropagation(),this.dnd.crossDrop(S,this._dragInfo)},S}(),Sk=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));return Z.editor=W,Z}return uW(q,S),q.prototype.init=function(){var S=this,q=this.contentDiv=ht.Default.createDiv();q.style.lineHeight="28px",q.style.textAlign="center",q.style.fontSize="14px",q.style.color=ht.Default.labelColor,this.setConfig({closable:!0,draggable:!0,width:320,height:120,content:q,buttons:[{label:k("editor.yes"),action:function(){S.onYes&&S.onYes(),S.hide()}},{label:k("editor.no"),action:function(){S.onNo&&S.onNo(),S.hide()}},{label:k("editor.cancel"),action:function(){S.hide()}}]}),this._init=!0},q.prototype.show=function(){var q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k("editor.tooltip"),W=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",Z=arguments[2],z=arguments[3];this._init||this.init(),this.setTitle(q),this.contentDiv.innerHTML=W,this.onYes=Z,this.onNo=z,S.prototype.show.call(this,this.editor.$38$)},q}(GW),qk=function(S){function q(W){QW(this,q);var Z=DW(this,S.call(this));return Z.editor=W,Z.editable=!0,Z}return uW(q,S),q.prototype.init=function(){var S=this;this.$72$(),this.$70$();var q=new FW(this.funcPane,this.inspectorPane,"h",.5);this.setConfig({title:k("editor.layoutattach"),closable:!0,draggable:!0,width:jW.config.attachPointsViewSize.width,height:jW.config.attachPointsViewSize.height,resizeMode:"wh",maximizable:!0,content:q,buttons:[{label:k("editor.ok"),action:function(){S.ok()}},{label:k("editor.cancel"),action:function(){S.hide()}}],buttonsAlign:"right"})},q.prototype.$72$=function(){this.funcPane=new IZ({argList:[["ht.Node","host","editor.comment.symbollayouthost"]]})},q.prototype.$73$=function(S,q,W,Z){return{name:S,tag:S,accessType:"attr",width:W,displayName:q,align:"center",enum:Z,editable:!0}},q.prototype.$70$=function(){var S=this;this.inspectorPane=new bW,this.tableModel=new ht.DataModel,this.tablePane=new pW(this.tableModel),this.tableView=this.tablePane.getTableView(),this.tableView.setEditable(!0),this.tableView.isEditable=function(){return S.editable},this.tablePane.getView().style.border=jW.config.color_line+" solid 1px",this.tablePane.addColumns([this.$73$("attr",k("editor.property"),90),this.$73$("valueType",k("editor.valuetype"),80,{values:jW.consts.valueTypes,labels:jW.consts.valueTypeLabels}),this.$73$("defaultValue",k("editor.defaultvalue"),90),this.$73$("name",k("editor.name"),80),this.$73$("group",k("editor.group"),80),this.$73$("description",k("editor.description"),120),this.$73$("extraInfo",k("editor.extrainfo"),100)]),this.$74$(),this.initExtraInfoColumn(),this.inspectorPane.addRow([this.tablePane],[.1],.1),this.inspectorPane.addRow([{button:{toolTip:k("editor.add"),icon:"editor.add",onClicked:function(){S.editable&&S.addProperties({attr:"layout."},!0)}}},{button:{toolTip:k("editor.delete"),icon:"editor.delete",onClicked:function(){S.editable&&S.tableView.removeSelection()}}},null,{button:{icon:"editor.top",toolTip:k("editor.bringtofront"),onClicked:function(){S.editable&&S.tableView.sm().size()&&S.tableModel.moveSelectionToTop()}}},{button:{icon:"editor.up",toolTip:k("editor.bringforward"),onClicked:function(){S.editable&&S.tableView.sm().size()&&S.tableModel.moveSelectionUp()}}},{button:{icon:"editor.down",toolTip:k("editor.sendbackward"),onClicked:function(){S.editable&&S.tableView.sm().size()&&S.tableModel.moveSelectionDown()}}},{button:{icon:"editor.bottom",toolTip:k("editor.sendtoback"),onClicked:function(){S.editable&&S.tableView.sm().size()&&S.tableModel.moveSelectionToBottom()}}}],[20,20,.1,20,20,20,20])},q.prototype.$74$=function(){var S=this,q=this.tableView.getColumnModel().getDataByTag("defaultValue");q.getValue=function(S,q,W){var Z=S.a("defaultValue");return"Angle"===S.a("valueType")&&Z&&(Z=Z/Math.PI*180),Z},q.setValue=function(S,q,W,Z){"Angle"===S.a("valueType")&&(W=W*Math.PI/180),S.a("defaultValue",W)},q.getEnumValues=function(S){var q=S?jW.config.valueTypes[S.a("valueType")]:null;return q&&"enum"===q.type?q.values:null},q.getEnumLabels=function(S){var q=S?jW.config.valueTypes[S.a("valueType")]:null;return q&&"enum"===q.type?q.labels:null},q.getEnumIcons=function(S){var q=S?jW.config.valueTypes[S.a("valueType")]:null;return q&&"enum"===q.type?q.icons:null},q.getEnumDropDownWidth=function(S){var q=S?jW.config.valueTypes[S.a("valueType")]:null;return q&&"enum"===q.type?q.dropDownWidth:null},q.getValueType=function(S){var q=S?jW.config.valueTypes[S.a("valueType")]:null;return q?q.type:null},q.isCellEditable=function(q,W,Z,z){var Q=q?jW.config.valueTypes[q.a("valueType")]:null,U=Q?Q.type:null,u=q.a("extraInfo"),D=jW.config.handleDefaultVauleColumnEdit,G=function(S){q.a("defaultValue",S)};if(D&&D(G,Q,U,u))return!1;if("function"===U){var b=k("editor.function")+" "+(q.a("property")||"");return S.editor.functionView.open(q.a("defaultValue"),G,b,u&&u.arguments),!1}if("multiline"===U)return S.editor.textView.open(q.a("defaultValue"),G,q.a("property")||"&nbsp;"),!1;if("font"===U)return S.editor.fontView.open(q.a("defaultValue"),G,q.a("property")||"&nbsp;"),!1;if("object"===U||"custom"===U||"stringArray"===U||"objectArray"===U||"numberArray"===U||"colorArray"===U){var v=k("editor.object")+" "+(q.a("property")||"");return S.editor.objectView.open(q.a("defaultValue"),G,v),!1}return!0}},q.prototype.initExtraInfoColumn=function(){var S=this;this.tableView.getColumnModel().getDataByTag("extraInfo").isCellEditable=function(q,W,Z,z){var Q=k("editor.extrainfo")+" "+(q.a("property")||"");return S.editor.objectView.open(q.a("extraInfo"),function(S){q.a("extraInfo",S)},Q),!1}},q.prototype.addProperties=function(S,q){var W=this,Z=S.attr,z=S.valueType,k=S.defaultValue,Q=S.name,U=S.description,u=S.extraInfo,D=new ht.Data;D.a({attr:Z||"",valueType:z||"String",defaultValue:k,name:Q,description:U,extraInfo:u}),this.tableModel.add(D),this.tableModel.sm().ss(D),q&&setTimeout(function(){W.tableView.tx(0),Kq(W.tableView,D,W.tableView.getColumnModel().getDataByTag("attr"),Z)},100)},q.prototype.update=function(S,q){var W=this;this.funcPane.setFunctionValue(S),this.tableModel.clear(),q&&q.forEach(function(S){W.addProperties(S)})},q.prototype.open=function(S,q,W){this._init||this.init(),this.setValue=W,this.update(S,q),this.show(this.editor.$38$)},q.prototype.ok=function(){var S=this.setValue,q={func:this.funcPane.getFunctionValue()};this.tableModel.size()&&(q.properties=[],this.tableModel.each(function(S){q.properties.push(Z(S.getAttrObject()))})),S(q),this.hide()},q}(GW),Wk=function(){function S(q){QW(this,S),this.editor=q,this.editing3d=!1,this.reset()}return S.prototype.reset=function(){this.points=[],this.segments=[],this.isBreak=!1,this.nextPoint=null,this.closePath=!1,this.preCtrl=null,this.nextPoint=null,this.drawPoint=null,this.downPoint=null,this.shape=null},S.prototype.setShape=function(S){this.shape=S},S.prototype.setPoint=function(S,q){this.points[S]=q},S.prototype.setSegment=function(S,q){this.segments[S]=q},S.prototype.setEditing3d=function(S){this.editing3d=S},S.prototype.isEditing3d=function(){return this.editing3d},S}(),Zk=function(){function S(q){var W=this;QW(this,S),this.params=q||{},this.$38$=this.params.$38$,this._eventNotifier=new ht.Notifier;var Z=ht.Default.getClass(jW.config.serviceClass)||qZ;this.$39$=new Z(function(S){W.handleServiceEvent(S),W.fireEvent(S.type,S)},this),this.emptyFunc=function(){}}return S.prototype.addEventListener=function(S,q,W){this._eventNotifier.add(S,q,W)},S.prototype.removeEventListener=function(S,q){this._eventNotifier.remove(S,q)},S.prototype.fireViewEvent=function(S,q,W){var Z=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];W=W||{},S.sceneView?(Z&&(q="sceneView"+q),W.sceneView=S.sceneView):"symbol"===S.type?(Z&&(q="symbolView"+q),W.symbolView=S):"display"===S.type?(Z&&(q="displayView"+q),W.displayView=S):"scene"===S.type&&(Z&&(q="sceneView"+q),W.sceneView=S),this.fireEvent(q,W)},S.prototype.fireEvent=function(S,q){q=q||{},jW.config.handleEvent&&jW.config.handleEvent(this,S,q);var W="on"+S.charAt(0).toUpperCase()+S.slice(1);jW.config[W]&&jW.config[W](this,q),this.params&&this.params[W]&&this.params[W](this,q),this._eventNotifier.fire({editor:this,type:S,params:q})},S.prototype.handleServiceEvent=function(S){if("connected"===S.type)this.init&&(this.init(),this.init=null);else if("fileChanged"===S.type){var q=S.path;this.updateUIRefs(q);var W=X(q),Z=this.getFileNode(q);Z&&(W=X(Z.getFileUUID())||W),W&&this.$99$(q),ZS(q)?this.requestDisplays():zS(q)?this.requestSymbols():kS(q)?this.requestComponents():QS(q)?this.requestScenes():US(q)?this.requestModels():uS(q)?this.requestUIs():DS(q)&&this.requestAssets()}else"download"===S.type?this.downloadFile(S.path):"confirm"===S.type&&this.requestImport(S.path)},S.prototype.init=function(){this._inspectorCompact=!G(jW.config.compactFilter),this.menus=[],this.cloneInfo={type:null,funcArray:[],jsonArray:[]},this.shapeHelper=new Wk(this),this.initSID(),this.$6$(),this.requestDisplays(),this.requestSymbols(),this.requestComponents(),this.requestScenes(),this.requestModels(),this.requestUIs(),this.requestAssets(),this.$38$&&this.$38$.addEventListener("keydown",this.handleKeydown.bind(this),!1),this.dnd=new hz(this),this.dndFromOutside=new Iz(this,this.mainPane.getView()),this.fireEvent("editorCreated"),this.fireEvent("mainMenuCreated"),this.fireEvent("mainToolbarCreated"),this.fireEvent("rightToolbarCreated");var S=this.params.open||W("hteditor");if(S){var q=jW.config.paramHandlers[S];if(q&&!q(this))return;bS(S)?this._pendingOpenJSON=S:"newdisplay"===S?this.newDisplayView():"newsymbol"===S?this.newSymbolView():"newcomponent"===S&&this.newComponent()}},S.prototype.$6$=function(){this.mainTabView=new YZ(this),this.funcView=new zz(this),this.eventView=new kz(this),this.functionView=new Qz(this),this.objectView=new Uz(this),this.textView=new uz(this),this.fontView=new Gz(this),this.iconsView=new jz(this),this.componentView=new qz(this),this.messageView=new iz(this),this.confirmView=new Sk(this),this.attachPointsView=new nz(this),this.symbolLayoutView=new qk(this),this.$7$(),this.$8$(),this.$10$(),this.$9$(),this.leftSplitView=new FW(this.leftTopTabView,this.mainTabView,"h",jW.config.leftSplitViewPosition),this.rightSplitView=new FW(this.rightTopBorderPane,this.rightBottomTabView,"v",jW.config.rightSplitViewPosition),this.mainSplitView=new FW(this.leftSplitView,this.rightSplitView,"h",jW.config.mainSplitViewPosition),this.mainPane=new YW,this.mainPane.setTopView(this.topBorderPane),this.mainPane.setCenterView(this.mainSplitView),Uq(this.mainPane,this.$38$),this.mainPane.validateImpl()},S.prototype.initSID=function(){var S=window.location.href.match("sid=([0-9a-z-]*)");S&&(this.sid=S[1])},S.prototype.$7$=function(){var S=this;this.mainToolbar=new EZ(this),this.rightToolbar=new hZ(this),this.topBorderPane=new YW,this.topBorderPane.setCenterView(this.mainToolbar),this.topBorderPane.setRightView(this.rightToolbar),this.topBorderPane.setHeight(28),this.rightToolbar.onSumWidthChanged=function(){S.topBorderPane.setRightWidth(S.rightToolbar.getSumWidth())}},S.prototype.$8$=function(){this.displays=new jZ(this,jW.config.displaysEditable),this.symbols=new iZ(this,jW.config.symbolsEditable),this.components=new nZ(this,jW.config.componentsEditable),this.scenes=new PZ(this,jW.config.scenesEditable),this.models=new RZ(this,jW.config.modelsEditable),this.uis=new _Z(this,jW.config.uisEditable),this.assets=new xZ(this,jW.config.assetsEditable),this.leftTopTabView=new HW,this.scenesTab=this.leftTopTabView.add(k("editor.scenes"),this.scenes,!1,jW.config.scenesVisible),this.displaysTab=this.leftTopTabView.add(k("editor.displays"),this.displays,!1,jW.config.displaysVisible),this.symbolsTab=this.leftTopTabView.add(k("editor.symbols"),this.symbols,!1,jW.config.symbolsVisible),this.componentsTab=this.leftTopTabView.add(k("editor.components"),this.components,!1,jW.config.componentsVisible),this.modelsTab=this.leftTopTabView.add(k("editor.models"),this.models,!1,jW.config.modelsVisible),this.uisTab=this.leftTopTabView.add(k("editor.uis"),this.uis,!1,jW.config.uisVisible),this.assetsTab=this.leftTopTabView.add(k("editor.assets"),this.assets,!1,jW.config.assetsVisible),this.leftTopTabView.select(jW.config.scenesVisible?this.scenesTab:this.displaysTab)},S.prototype.$9$=function(){this.inspectorTool=new AZ(this),this.inspectorPane=new Ez(this),this.rightTopBorderPane=new YW,this.rightTopBorderPane.setTopView(this.inspectorTool),this.rightTopBorderPane.setCenterView(this.inspectorPane),this.rightTopBorderPane.setTopHeight(ht.Default.widgetHeaderHeight+6)},S.prototype.$10$=function(){var S=this;this.listPane=new wZ(this),this.layerPane=new sZ(this),this.overview=new KZ(this),this.dataView=new lZ(this),this.symbolStatePane=new pZ(this),jW.BatchView&&(this.batchView=new jW.BatchView(this)),jW.ProblemsPane&&(this.problemsView=new jW.ProblemsPane(this));var q=this.rightBottomTabView=new HW;this.listPaneTab=this.rightBottomTabView.add(k("editor.list"),this.listPane,!0),
jW.config.layerEnabled&&(this.layerTab=this.rightBottomTabView.add(k("editor.layer"),this.layerPane,!1,!1)),jW.config.symbolStateEnabled&&(this.symbolStateTab=this.rightBottomTabView.add(k("editor.state"),this.symbolStatePane,!1,!1)),jW.config.overviewEnabled&&(this.overviewTab=this.rightBottomTabView.add(k("editor.overview"),this.overview)),jW.config.batchViewEnabled&&jW.BatchView&&(this.batchViewTab=this.rightBottomTabView.add(k("editor.batch"),this.batchView)),jW.config.problemsEnabled&&jW.ProblemsPane&&(this.problemsTab=this.rightBottomTabView.add(k("editor.problems"),this.problemsView,!1,!0)),jW.config.dataViewEnabled&&(this.dataViewTab=this.rightBottomTabView.add(k("editor.data"),this.dataView));var W=this.rightBottomTabView.getTabModel().sm();W.ms(function(){var q=W.ld();q&&(S.dataView.visible=q.getView()===S.dataView,S.overview.setAutoUpdate(q.getView()===S.overview))}),q.getLabel=function(q){var W=q.toLabel();if(q===S.symbolStateTab){var Z=S.symbolStatePane.tableModel.sm().ld();if(Z){var z=Z.a("stateDisplayName")||Z.a("stateName");return W+(z?" - "+z:"")}}return W}},S.prototype.newFolder=function(S){var q=this,W=this.explorer;if(W){var Z=S.sm().ld();S!==S.explorer.list||Z&&Z.fileType===RW||(Z=S.explorer.tree.sm().ld()),Z&&!W.isAccordionMode()||(Z=S.explorer.rootNode);Sq(k("editor.inputnewfoldername"),"",{nullable:!1,trim:!0,maxLength:jW.config.maxFileNameLength,checkFunc:jW.config.checkFileName,$38$:this.$38$},function(S,z){if("ok"===z){var Q=(Z?Z.url:W.rootDir)+"/"+S;if(q.getFileNode(Q))return void qq(k("editor.filenameconflict"),Q,function(){});q.request("mkdir",jW.config.vision?{dir:Q,parent_uuid:Z.uuid,root_dir:Z.rootDir}:Q,function(S){})}})}},S.prototype.getFileNode=function(S){for(var q=this.leftTopTabView.getTabModel().getDatas(),W=0;W<q.size();W++){var Z=q.get(W);if(Z.getView()instanceof vZ){var z=Z.getView().findFileNode(S);if(z)return z}}return null},S.prototype.selectFileNode=function(S){for(var q=this,W=this.leftTopTabView.getTabModel().getDatas(),Z=0;Z<W.size();Z++){var z=W.get(Z);if(z.isVisible()&&z.getView()instanceof vZ){var k=function(){var W=z.getView(),Z=W.findFileNode(S);if(Z)return q.leftTopTabView.getTabModel().sm().ss(z),W.isAccordionMode()?(Z.fileType===RW?W.accordion.sm().ss(Z):(Z.getParent().expanded=!0,W.accordion.sm().ss(Z)),W.accordion.ivm()):Z.fileType===RW?(W.tree.sm().ss(Z),setTimeout(function(){W.tree.makeVisible(Z)},500)):(W.tree.sm().ss(Z.getParent()),W.list.sm().ss(Z),setTimeout(function(){W.tree.makeVisible(Z.getParent()),W.list.makeVisible(Z)},500)),delete q._pendingSelectURL,{v:void 0}}();if("object"==typeof k)return k.v}}this._pendingSelectURL=S},S.prototype.makeFileNodeVisible=function(S){for(var q=this.leftTopTabView.getTabModel().getDatas(),W=0;W<q.size();W++){var Z=q.get(W),z=Z.getView();if(z instanceof vZ){var k=z.findFileNode(S);if(k){var Q=k.getParent();z.tree.sm().ss(Q),z.tree.makeVisible(Q),z.list.makeVisible(k)}}}},S.prototype.renameFile=function(S,q,W){var z=this;if(!S||S.$33$||!1===S.a("editable")||!q)return!1;var Q=q;bS(S.getName())&&!bS(q)&&(q+=".json");var U=S.path+"/"+q;if(!(q=jW.config.checkFileName(q,U)))return qq(k("editor.invalidinput"),Q,function(){}),!1;if(q.length>jW.config.maxFileNameLength+5)return qq(k("editor.inputmax"),q,function(){}),!1;if(S.getName()===q)return!1;if(this.getFileNode(U))return qq(k("editor.filenameconflict"),U,function(){}),!1;S.$33$=U;var u={old:S.url,new:S.$33$,fileType:S.fileType};bS(u.old)&&this.request("rename",{old:dS(u.old),new:dS(u.new),fileType:_W},function(S){}),this.request("rename",u,function(k){if(k){z.mainTabView.getTabModel().each(function(W){if(W.getTag()===S.url){W.setTag(S.$33$);W.getView().url=S.$33$,W.setName(T(q))}}),W();var Q=Z(u);return Q.data=S,z.fireEvent("fileRenamed",Q),!0}return delete S.$33$,!1})},S.prototype.moveFile=function(S,q){if(S&&!1!==S.a("editable")&&q&&!S.$33$&&!q.$33$){var W={data:S,url:S.url,parent:q};if(this.fireEvent("fileMoving",W),!W.preventDefault){var Z=S.getParent();if(S.setParent(q),Z!==S.getParent()){S.$33$=q.url+"/"+S.getName();var z={old:S.url,new:S.$33$};bS(z.old)&&this.request("rename",{old:dS(z.old),new:dS(z.new)},function(S){}),this.request("rename",z,function(S){})}}}},S.prototype.removeFiles=function(S){var q=this;S.forEach(function(S){if(!S.$33$&&!1!==S.a("editable")){var W=S.url||S;bS(W)&&q.request("remove",jW.config.vision?{path:dS(W),uuid:S.uuid,root_dir:S.rootDir}:dS(W),function(S){}),q.request("remove",jW.config.vision?{path:W,uuid:S.uuid,root_dir:S.rootDir}:W,function(Z){q.fireEvent("fileDeleted",{data:S,url:W})})}})},S.prototype.requestBase64=function(S,q){this.request("source",{url:S,encoding:"base64",prefix:"data:;base64,"},q)},S.prototype.request=function(S,q,W,Z){var z=this;W=W||this.emptyFunc,Z?setTimeout(function(){z.$39$.request(S,q,W)},Z):this.$39$.request(S,q,W)},S.prototype.requestDisplays=function(){var S=this;this._requestingDisplays||(this.request("explore","/displays",function(q){S._requestingDisplays=!1,S.displays.parse(q),S._pendingOpenJSON&&ZS(S._pendingOpenJSON)&&(S.displays.findFileNode(S._pendingOpenJSON)?(S.open(S._pendingOpenJSON),S.selectFileNode(S._pendingOpenJSON)):jW.config.newIfFailToOpen&&(S.newDisplayView(),S.save(null,S._pendingOpenJSON)),delete S._pendingOpenJSON),S._pendingSelectURL&&ZS(S._pendingSelectURL)&&S.selectFileNode(S._pendingSelectURL)},jW.config.requestDelay),this._requestingDisplays=!0)},S.prototype.requestSymbols=function(){var S=this;this._requestingSymbols||(this.request("explore","/symbols",function(q){S._requestingSymbols=!1,S.symbols.parse(q),S._pendingOpenJSON&&zS(S._pendingOpenJSON)&&(S.symbols.findFileNode(S._pendingOpenJSON)?(S.open(S._pendingOpenJSON),S.selectFileNode(S._pendingOpenJSON)):jW.config.newIfFailToOpen&&(S.newSymbolView(),S.save(null,S._pendingOpenJSON)),delete S._pendingOpenJSON),S._pendingSelectURL&&zS(S._pendingSelectURL)&&S.selectFileNode(S._pendingSelectURL)},jW.config.requestDelay),this._requestingSymbols=!0)},S.prototype.requestComponents=function(){var S=this;this._requestingComponents||(this.request("explore","/components",function(q){S._requestingComponents=!1,S.components.parse(q),S._pendingOpenJSON&&kS(S._pendingOpenJSON)&&(S.components.findFileNode(S._pendingOpenJSON)?S.open(S._pendingOpenJSON):jW.config.newIfFailToOpen&&S.newComponent(),delete S._pendingOpenJSON),S._pendingSelectURL&&kS(S._pendingSelectURL)&&S.selectFileNode(S._pendingSelectURL)},jW.config.requestDelay),this._requestingComponents=!0)},S.prototype.requestScenes=function(){var S=this;jW.config.scenesVisible&&(this._requestingScenes||(this.request("explore","/scenes",function(q){S._requestingScenes=!1,S.scenes.parse(q),S._pendingOpenJSON&&QS(S._pendingOpenJSON)&&(S.scenes.findFileNode(S._pendingOpenJSON)?(S.open(S._pendingOpenJSON),S.selectFileNode(S._pendingOpenJSON)):jW.config.newIfFailToOpen&&(S.newSceneView(),S.save(null,S._pendingOpenJSON)),delete S._pendingOpenJSON),S._pendingSelectURL&&QS(S._pendingSelectURL)&&S.selectFileNode(S._pendingSelectURL)},jW.config.requestDelay),this._requestingScenes=!0))},S.prototype.requestModels=function(){var S=this;this._requestingModels||(this.request("explore","/models",function(q){S._requestingModels=!1,S.models.parse(q),S._pendingOpenJSON&&US(S._pendingOpenJSON)&&(S.open(S._pendingOpenJSON),delete S._pendingOpenJSON),S._pendingSelectURL&&US(S._pendingSelectURL)&&S.selectFileNode(S._pendingSelectURL)},jW.config.requestDelay),this._requestingModels=!0)},S.prototype.requestUIs=function(){var S=this;jW.config.uisVisible&&(this._requestingUIs||(this.request("explore","/uis",function(q){S._requestingUIs=!1,S.uis.parse(q),S._pendingOpenJSON&&uS(S._pendingOpenJSON)&&(S.uis.findFileNode(S._pendingOpenJSON)?(S.open(S._pendingOpenJSON),S.selectFileNode(S._pendingOpenJSON)):jW.config.newIfFailToOpen&&(S.newUIView(),S.save(null,S._pendingOpenJSON))),S._pendingSelectURL&&uS(S._pendingSelectURL)&&S.selectFileNode(S._pendingSelectURL)},jW.config.requestDelay),this._requestingUIs=!0))},S.prototype.requestAssets=function(){var S=this;this._requestingAssets||(this.request("explore","/assets",function(q){S._requestingAssets=!1,S.assets.parse(q),S._pendingOpenJSON&&DS(S._pendingOpenJSON)&&(S.open(S._pendingOpenJSON),delete S._pendingOpenJSON),S._pendingSelectURL&&DS(S._pendingSelectURL)&&S.selectFileNode(S._pendingSelectURL)},jW.config.requestDelay),this._requestingAssets=!0)},S.prototype.requestImport=function(S){var q=this;jW.config.importConfirm?qq("",k("editor.importconfirm"),function(){q.request("import",{path:S,move:!0})},function(){q.request("import",{path:S,move:!1})}):this.request("import",{path:S,move:!0})},S.prototype.downloadFile=function(S){try{var q=window.location.hostname,W=window.location.port,Z=window.location.protocol+"//"+q+":"+W+"/"+S,z=document.createElement("iframe");z.src=Z,z.style.display="none",document.body.appendChild(z)}catch(S){}},S.prototype.$5$=function(S){var q=this._currentTab,W=this.rightBottomTabView.getTabModel().sm();this._currentTab=S,this.inspectorPane.$5$(S),this.listPane.$5$(S),jW.config.overviewEnabled&&this.overview.$5$(S),jW.config.dataViewEnabled&&this.dataView.$5$(S),jW.config.layerEnabled&&this.layerPane.$5$(S),jW.config.symbolStateEnabled&&this.symbolStatePane.$5$(S),jW.config.batchViewEnabled&&jW.BatchView&&this.batchView.$5$(S),jW.config.problemsEnabled&&this.problemsView.$5$(S),this.mainToolbar.$5$(S),this.rightToolbar.$5$(S),this.inspectorTool.$5$(S),jW.config.layerEnabled&&this.layerTab.setVisible(!!this.displayView||!!this.sceneView),jW.config.symbolStateEnabled&&this.symbolStateTab.setVisible(!!this.symbolView),jW.config.batchViewEnabled&&jW.BatchView&&this.batchViewTab.setVisible(!!this.sceneView),(!this.symbolView&&this.symbolStateTab&&W.co(this.symbolStateTab)||this.symbolView&&this.layerTab&&W.co(this.layerTab)||!this.sceneView&&this.batchViewTab&&W.co(this.batchViewTab)||!S&&(this.symbolStateTab&&W.co(this.symbolStateTab)||this.layerTab&&W.co(this.layerTab)||this.batchViewTab&&W.co(this.batchViewTab)||this.problemsTab&&W.co(this.problemsTab)))&&W.ss(this.listPaneTab),this.fireEvent("tabUpdated",{tab:S,oldTab:q})},S.prototype.updateInspectorPropertiesLater=function(){this.inspector&&this.inspector.$34$()},S.prototype.beginTransaction=function(){this.dm&&this.dm.beginTransaction()},S.prototype.endTransaction=function(){this.dm&&this.dm.endTransaction()},S.prototype.getCurrentEditingPointValue=function(S){var q=this.currentEditingPoint;return q?q[S]:0},S.prototype.setCurrentEditingPointValue=function(S,q){var W=this.gv;W&&W.getEditInteractor().getSubModule("Curve").setCurrentPoint(S,q)},S.prototype.$99$=function(S){this.mainTabView.$99$(S)},S.prototype.updateUIRefs=function(S){this.mainTabView.updateUIRefs(S)},S.prototype.getDragPoint=function(S){return this.dnd.$94$(S)instanceof ht.graph3d.Graph3dView?this.sceneView.lp(S):this.gv.lp(S)},S.prototype.dropLocalFileOnView=function(S){if(this.currentView){var q={event:S};if(this.fireViewEvent(this.currentView,"OutsideDropping",q),!q.preventDefault)for(var W=S.dataTransfer.files,Z=0;Z<W.length;Z++){var z=W[Z],k=z.name;GS(k)?this.insertLocalImageFile(S,z):bS(k)&&this.insertLocalJSONFile(S,z)}}},S.prototype.insertLocalImageFile=function(S,q){var W=this;Qq(q,function(Z){if(W.sceneView){var z=new ht.Node;z.setAnchor3d(.5,0,.5),z.s({shape3d:"billboard","shape3d.image":Z,autorotate:!0}),z.p(W.getDragPoint(S)),z.setDisplayName(a(q.name)),W.sceneView.addData(z)}else if(W.displayView){var k=new ht.Node;k.setImage(Z),k.p(W.gv.lp(S)),k.setDisplayName(a(q.name)),W.displayView.addData(k)}else if(W.symbolView){var Q=W.gv.lp(S),U=new rW({type:"image",name:Z,rect:[Q.x,Q.y,-1,-1]});U.setDisplayName(a(q.name)),W.symbolView.addData(U)}},!0)},S.prototype.insertLocalJSONFile=function(S,q){var W=this;Qq(q,function(S){W.$97$(S)})},S.prototype.$97$=function(S){var q=this;if(S){this.beginTransaction(),S=g(S);var W=this.sceneView||this.displayView;if(W&&CS(S.d)){var Z=this.gv,z=Z.dm().deserialize(S,Z.getCurrentSubGraph(),{justDatas:!0});Z.sm().ss(z.toList(Z.isSelectable,Z)),z.each(function(S){W.addData(S,!0,!0)})}else this.symbolView&&CS(S.comps)&&S.comps.forEach(function(S){lq(S,q.symbolView)});this.gv.setFocus(),this.endTransaction()}},S.prototype.dropLocalFileOnDir=function(S,q){for(var W=S.dataTransfer.files,Z=q.url,z=0;z<W.length;z++){var Q=W[z].name;if(!jW.config.checkFileName(Q,Z+"/"+Q))return void qq(k("editor.invalidfilename"),Q,function(){})}for(var U=0;U<W.length;U++)this.uploadLocalFile(W[U],Z,q.uuid,q.rootDir)},S.prototype.uploadLocalFile=function(S,q,W,Z){var z=this,k=jW.config.checkFileName(S.name,q+"/"+S.name);k&&Qq(S,function(S){var Q={path:q+"/"+k,content:S,parent_uuid:W,root_dir:Z};z.request(jW.config.vision?"drag":"upload",Q)},!0)},S.prototype.addTab=function(S,q){this.mainTabView.add(S),this.fireEvent("tabCreated",{tab:S}),q&&this.mainTabView.getTabModel().sm().ss(S),this.mainTabView.validate()},S.prototype.openByJSON=function(S,q,W,Z,z){this.mainTabView.getTabModel();if(S===KW){var k=this.mainTabView.getTabModel().getDataByTag(q);k||(k=new ht.Tab,k.setTag(q),k.setIcon("editor.display"),k.setClosable(!0),k.setName(W),new $Z(this,k,q,Z),this.addTab(k)),this.mainTabView.getTabModel().sm().ss(k)}else if(S===xW){var Q=this.mainTabView.getTabModel().getDataByTag(q);Q||(Q=new ht.Tab,Q.setTag(q),Q.setIcon("editor.symbol"),Q.setClosable(!0),Q.setName(W),new MZ(this,Q,q,Z),this.addTab(Q)),this.mainTabView.getTabModel().sm().ss(Q)}else if(S===dW)this.componentView.update(q,z,W,Z);else if(S===tW){var U=this.mainTabView.getTabModel().getDataByTag(q);U||(U=new ht.Tab,U._isUI=!0,U.setTag(q),U.setIcon("editor.ui-tab"),U.setClosable(!0),U.setName(W),new UIView(this,U,q,Z),this.addTab(U)),this.mainTabView.getTabModel().sm().ss(U)}},S.prototype.isOpenable=function(S){return!jW.config.isOpenable||jW.config.isOpenable(S)},S.prototype.open=function(S,q,W){var Z=this;if(NS(S)&&(S=this.getFileNode(S)),S&&!S.$33$&&this.isOpenable(S))if(S.fileType===KW||S.fileType===xW||S.fileType===mW||S.fileType===tW)this.mainTabView.open(S);else if(S.fileType===dW)this.componentView.open(S);else if(S.fileType===NW)this.openModel&&this.openModel(S);else if(S.fileType===_W){var z=S.url,k=r(z),Q=jW.config.fileOpeners[k];if(Q&&!Q(this,S,q,W))return;if(iS(z))Y(z,function(W){var z=ht.Default.svgToShape(W,{segments:jW.config.svgSegments,minimumFontSize:jW.config.svgMinimumFontSize});setTimeout(function(){var W=z.output,k=z.converter;k._canvas&&(W.width=k._canvas.width,W.height=k._canvas.height);var Q=T(S.getName());q?Z.newSymbolView(Q,!1):Z.newDisplayView(Q),W.comps.forEach(function(S){delete S.repeatImage}),Z.beginTransaction();var U=jW.toDatas(W.comps,q);U.forEach(function(S){S&&Z.currentView.addData(S,!0)}),q&&(W.width&&Z.dm.a("width",W.width),W.height&&Z.dm.a("height",W.height)),Z.fireEvent("svgConverted",{editor:editor,toSymbol:q,comps:W.comps,datas:U,fileNode:S}),Z.zoomToFit(),Z.endTransaction()},jW.config.svgWaitingTime)});else if(nS(z))Y(z,function(W){var z=T(S.getName()),k=ht.Default.cadToShape(W,{boundingType:q?jW.config.cadToSymbolBoundingType:jW.config.cadToDisplayBoundingType,defaultColor:16777215}),Q={},U=Object.keys(k.blockDef).length,u=function(){q?Z.newSymbolView(z,!1):Z.newDisplayView(z),Z.beginTransaction(),Z.currentView.dm.setBackground("#000000"),k.comps.forEach(function(S){"image"===S.type&&Q[S.name]&&(S.name=Q[S.name])});var W=jW.toDatas(k.comps,q);W.forEach(function(S){Z.currentView.addData(S,!0)}),q&&(k.width&&Z.dm.a("width",k.width),k.height&&Z.dm.a("height",k.height)),Z.fireEvent("dxfConverted",{editor:editor,toSymbol:q,comps:k.comps,datas:W,fileNode:S,result:k}),Z.zoomToFit(),Z.endTransaction()};U?function(){var q=function(){0===--U&&u()},W="symbols/"+S.path.substr("assets/".length)+"/"+z+"/";for(var D in k.blockDef){k.blockDef[D].comps.forEach(function(S){"image"===S.type&&(S.name=W+S.name+".json")});var G={path:Q[D]=W+D+".json",content:J(k.blockDef[D]),parent_uuid:S.uuid,root_dir:S.rootDir};Z.request("upload",G,q)}}():u()});else if(_S(z)||xS(z)){if(!jW.FontConverterOptionView||!this.openFont)return;this.openFont(S)}}},S.prototype.$98$=function(S,q){var W=this;if(S){if(!this.tab)return void this.open(S);if(this.editable)if(S.fileType!==KW){if(this.url!==S.url)if(S.fileType!==dW)if(S.fileType===xW||GS(S.url)){if(this.displayView){var Z=new ht.Node;if(Z.setImage(S.getFileUUID()),q)Z.p(q.x,q.y);else{var z=this.gv.getViewRect();z&&Z.p(z.x+z.width/2,z.y+z.height/2)}Z.setDisplayName(a(S.url)),this.displayView.addData(Z)}else if(this.symbolView){var k=ht.Default.getImage(S.getFileUUID()),Q=k?k.width:-1,U=k?k.height:-1,u=q?q.x:(this.dm.a("width")||0)/2,D=q?q.y:(this.dm.a("height")||0)/2,G=new rW({type:"image",name:S.getFileUUID(),rect:[u-(Q>0?Q/2:0),D-(U>0?U/2:0),Q,U]});G.setDisplayName(a(S.url)),this.symbolView.addData(G)}else if(this.sceneView){var b=S.getFileUUID(),v=new ht.Node;if(v.setAnchor3d(.5,0,.5),v.s({shape3d:"billboard","shape3d.image":b,autorotate:!0}),v.a("image2d.url",b),q)v.p(q.x,q.y);else{var j=this.gv.getViewRect();j&&v.p(j.x+j.width/2,j.y+j.height/2)}v.setDisplayName(a(S.url)),this.sceneView.addData(v)}}else{if(S.fileType===mW)return void(this.displayView&&jW.config.handleInsertSceneFileToDisplayView&&jW.config.handleInsertSceneFileToDisplayView(this.displayView,S,q));if(S.fileType!==NW);else if(this.displayView)jW.config.handleInsertModelFileToDisplayView&&jW.config.handleInsertModelFileToDisplayView(this.displayView,S,q);else if(this.sceneView){var i=new ht.Node;if(i.setAnchor3d(.5,0,.5),i.s({shape3d:S.getFileUUID()}),q)i.p(q.x,q.y);else{var n=this.gv.getViewRect();n&&i.p(n.x+n.width/2,n.y+n.height/2)}i.setDisplayName(a(S.url)),this.sceneView.addData(i)}}else if(this.symbolView){var P=new gZ({type:S.getFileUUID(),rect:[q?q.x:(this.dm.a("width")||0)/2,q?q.y:(this.dm.a("height")||0)/2,-1,-1]},void 0,void 0,!0);P.setDisplayName(a(S.url)),this.symbolView.addData(P)}}else if(this.displayView)if(jW.config.insertDisplayViewAsRefGraph){var R=new ht.RefGraph;R.setRef(S.getFileUUID()),R.onPendingUpdated=function(){R.onPendingUpdated=null,R.p(q)},R.setDisplayName(a(S.url)),this.displayView.addData(R)}else Y(S.url,function(S){W.$97$(S,q)})}},S.prototype.newDisplayView=function(S){return this.mainTabView.newDisplayView(S)},S.prototype.newSymbolView=function(S,q){return this.mainTabView.newSymbolView(S,q)},S.prototype.newUIView=function(S){return this.mainTabView.newUIView(S)},S.prototype.newComponent=function(S){this.componentView.open(null,S)},S.prototype.isDebugTipShowing=function(){var S=this.g3d||this.gv;return S&&S.isDebugTipShowing()},S.prototype.toggleDebugTip=function(){var S=this.g3d||this.gv;S&&(S.isDebugTipShowing()?(S.hideDebugTip(),S.disableToolTip(),this.list.disableToolTip()):(S.showDebugTip(),S.enableToolTip(),this.list.enableToolTip()))},S.prototype.save=function(S,q){this.mainTabView.save(S,q)},S.prototype.saveAll=function(S){this.mainTabView.saveAll(S)},S.prototype.reload=function(){this.mainTabView.reload()},S.prototype.preview=function(){this.mainTabView.preview()},S.prototype.closeTab=function(S,q,W){this.mainTabView.closeTab(S,q,W)},S.prototype.closeOtherTabs=function(S,q){this.mainTabView.closeOtherTabs(S,q)},S.prototype.closeTabsToTheRight=function(S,q){this.mainTabView.closeTabsToTheRight(S,q)},S.prototype.closeAllTabs=function(S,q){this.mainTabView.closeAllTabs(S,q)},S.prototype.filterProperties=function(){this.inspector&&this.inspector.filterPropertiesLater()},S.prototype.isRulerEnabled=function(){return!!this.currentView&&this.currentView.isRulerEnabled()},S.prototype.setRulerEnabled=function(S){this.currentView&&this.currentView.setRulerEnabled(S)},S.prototype.toggleRulerEnabled=function(){this.setRulerEnabled(!this.isRulerEnabled())},S.prototype.isGridEnabled=function(){return!!this.currentView&&this.currentView.isGridEnabled()},S.prototype.setGridEnabled=function(S){this.currentView&&this.currentView.setGridEnabled(S)},S.prototype.toggleGridEnabled=function(){this.setGridEnabled(!this.isGridEnabled())},S.prototype.toggleLeft=function(){"normal"===this.leftSplitView.getStatus()?this.leftSplitView.setStatus("cl"):this.leftSplitView.setStatus("normal")},S.prototype.toggleRight=function(){if(this.currentView&&this.currentView.getPreferredSize){var S=this.currentView;S.isRightExpanded()?S.setRightExpanded(!1):S.setRightExpanded(!0)}else"normal"===this.mainSplitView.getStatus()?this.mainSplitView.setStatus("cr"):this.mainSplitView.setStatus("normal")},S.prototype.toggleBoth=function(){if("normal"===this.mainSplitView.getStatus()||"normal"===this.leftSplitView.getStatus())if(this.leftSplitView.setStatus("cl"),this.currentView&&this.currentView.getPreferredSize){var S=this.currentView;S.setRightExpanded(!1)}else this.mainSplitView.setStatus("cr");else if(this.leftSplitView.setStatus("normal"),this.currentView&&this.currentView.getPreferredSize){var S=this.currentView;S.setRightExpanded(!0)}else this.mainSplitView.setStatus("normal")},S.prototype.zoomIn=function(){this.gv&&this.gv.zoomIn(jW.config.animate)},S.prototype.zoomOut=function(){this.gv&&this.gv.zoomOut(jW.config.animate)},S.prototype.zoomReset=function(){this.gv&&this.gv.zoomReset(jW.config.animate)},S.prototype.zoomToFit=function(){this.gv&&this.gv.fitContent(jW.config.animate,jW.config.fitPadding)},S.prototype.fitSelection=function(){this.gv&&this.gv.fitSelection(jW.config.fitPadding,jW.config.animate)},S.prototype.delete=function(){this.gv&&this.gv.removeSelection()},S.prototype.copyFiles=function(){this.explorer.copyFiles()},S.prototype.pasteFiles=function(){this.explorer.pasteFiles()},S.prototype.copy=function(){var S=this;if(this.ld){var q=this.cloneInfo;if(q.funcArray.length=0,q.jsonArray.length=0,q.offset={x:0,y:0,e:0},q.lastCheck=null,q.lastView=this.gv,q.sourceView=this.gv,this.displayView)q.type="display";else if(this.symbolView)q.type="symbol";else{if(!this.sceneView)return void(q.type=null);q.type="scene"}var W=0,Z=void 0,z={};this.selection.forEach(function(q){if(!q._refGraph){z[q._id]=q,q instanceof ht.Block&&!(q instanceof ht.RefGraph)&&qS(q,z);var k=mq(S.gv.dm(),q);W=Math.max(W,k),W===k&&(Z=q)}}),q.lastData=Z;var k=[],Q=void 0;this.gv.each(function(S){z[S._id]&&(k.push(S),S instanceof ht.Node&&(Q=Q?ht.Default.unionRect(Q,S.getRect()):S.getRect()))}),q.rect=Q,this.gv.copyMap=z,k.forEach(function(W){var Z=S.gv.isSelected(W),z=W.$50$(S.gv);if(0!==z.length){q.funcArray.push([W._id,Z].concat(z));var k=Yq(W);k&&q.jsonArray.push([Z,k])}}),this.fireEvent("copy",{datas:k,info:q}),this.gv.copyMap=null}},S.prototype.hasCopyInfo=function(){return this.cloneInfo.funcArray.length>0},S.prototype.paste=function(S,q){var W=this;if(this.editable){var Z=this.gv,z=this.currentView,Q=this.cloneInfo;if(Q.funcArray.length&&Z){var U=[],u=[];if(this.beginTransaction(),ht.Default.setIsolating(!0),"display"===Q.type&&this.displayView||"display"===Q.type&&this.sceneView||"symbol"===Q.type&&this.symbolView||"scene"===Q.type&&this.sceneView||"scene"===Q.type&&this.displayView){var D={},G=[];Q.funcArray.forEach(function(S){var q=S[0],k=S[1],Q=S[2],b=S[3],v=void 0;Q.clazz===ht.Points&&z!==W.sceneView?(Q.clazz=ht.Node,v=b(Q,Z),Q.clazz=ht.Points):v=b(Q,Z),z.addData(v,!0),D[q]=v,U.push(v),G.push(Q),k&&u.push(v)});for(var b=0;b<U.length;b++)U[b].$49$(G[b],Z,D);if(jW.config.pasteToLastSelectedIndex&&Q.sourceView===Z)for(var v=Z.dm(),j=Q.lastData,i=j.getParent(),n=v.getSiblings(j).indexOf(j)+1,P=0,R=U.length;P<R;P++){var _=G[P];if(!D[_.parent]){var x=U[P];x.setParent(i),v.moveTo(x,n++)}}}else Q.jsonArray.length&&Q.jsonArray.forEach(function(S,q){var z=S[0],D=S[1],G=Q.funcArray[q][2];if("symbol"===Q.type&&!W.symbolView&&G.clazz===gZ)return void W.showMessage(k("editor.componentsusederror"),"error");var b=Aq(D,!!W.symbolView);b&&(b.setParent(Z.getCurrentSubGraph()),W.currentView.addData(b,!0),U.push(b),z&&u.push(b))});ht.Default.setIsolating(!1);var K=jW.config.pasteOffset,d=0,N=0,m=0;if(mS(K)?d=N=K:CS(K)?3===K.length?(d=K[0],m=K[1],N=K[2]):2===K.length&&(d=K[0],N=K[1]):K&&("x"in K&&(d=K.x),"y"in K&&(m=K.y),"z"in K&&(N=K.z)),u.length&&this.sm.ss(u),Q.lastView!==Z&&(Q.offset.x=-d,Q.offset.y=-N,Q.offset.e=-m),!S&&U.length){var t=Q.rect;if(q&&t?(Q.offset.x=q.x-t.x-t.width/2,Q.offset.y=q.y-t.y-t.height/2):(Q.offset.x+=d,Q.offset.y+=N),Q.offset.e+=m,ht.Default.moveDatas(U,Q.offset.x,Q.offset.e,Q.offset.y),!q&&!this.g3d){var V=Z.$63$(U);V&&(Q.offset.x+=V.x,Q.offset.y+=V.y,Q.lastCheck||(ht.Default.moveDatas(U,-d,-m,-N),Q.offset.x-=d,Q.offset.y-=N,Q.offset.e-=m)),Q.lastCheck=V}}Q.lastView=Z,this.fireEvent("paste",{datas:U,info:Q}),Z.setFocus(),this.endTransaction()}}},S.prototype.block=function(){if(this.editable){var S=this.displayView||this.sceneView;if(S){var q=this.selection;if(q.length){this.beginTransaction();var W=new ht.Block;q.forEach(function(S){S.setHost&&S.setHost(void 0),S.setParent(W)}),S.addData(W),this.endTransaction()}}}},S.prototype.unblock=function(){var S=this;if(this.editable){if(this.displayView||this.sceneView){this.beginTransaction();var q=[];this.selection.forEach(function(W){if(W instanceof ht.Block&&!(W instanceof ht.RefGraph)){var Z=W.getParent();W.getChildren().toArray().forEach(function(S){S.setParent(Z),q.push(S)}),S.dm.remove(W)}}),q.length&&(this.sm.ss(q),this.gv.setFocus()),this.endTransaction()}}},S.prototype.bringForward=function(){this.editable&&this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionDown():this.dm.bringSelectionForward())},S.prototype.bringToFront=function(){this.editable&&this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionToBottom():this.dm.bringSelectionToFront())},S.prototype.sendBackward=function(){this.editable&&this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionUp():this.dm.sendSelectionBackward())},S.prototype.sendToBack=function(){this.editable&&this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionToTop():this.dm.sendSelectionToBack())},S.prototype.undo=function(){this.pointsEditingMode=!1,this.editable&&(this._currentTab&&this._currentTab._isUI?this._currentTab.getView().undo():this.dm.getHistoryManager()&&this.dm.getHistoryManager().canUndo()&&(this.dm.undo(),this.fireEvent("undo",{})))},S.prototype.redo=function(){this.pointsEditingMode=!1,this.editable&&(this._currentTab&&this._currentTab._isUI?this._currentTab.getView().redo():this.dm.getHistoryManager()&&this.dm.getHistoryManager().canRedo()&&(this.dm.redo(),this.fireEvent("redo",{})))},S.prototype.distributeHorizontal=function(){this.editable&&this.inspectorTool.distributeHorizontal()},S.prototype.distributeVertical=function(){this.editable&&this.inspectorTool.distributeVertical()},S.prototype.alignLeft=function(){this.editable&&this.inspectorTool.alignLeft()},S.prototype.alignHorizontal=function(){this.editable&&this.inspectorTool.alignHorizontal()},S.prototype.alignRight=function(){this.editable&&this.inspectorTool.alignRight()},S.prototype.alignTop=function(){this.editable&&this.inspectorTool.alignTop()},S.prototype.alignVertical=function(){this.editable&&this.inspectorTool.alignVertical()},S.prototype.alignBottom=function(){this.editable&&this.inspectorTool.alignBottom()},S.prototype.folder=function(){if(this.editable&&this.displayView){this.beginTransaction();var S=new ht.Data;S.s("editor.folder",!0),this.dm.add(S);this.list.getTopRowOrderSelection().each(function(q){S.addChild(q)}),this.sm.ss(S),this.endTransaction()}},S.prototype.unfolder=function(){var S=this;if(this.editable&&this.displayView){this.beginTransaction();var q=this.sm.toSelection(function(S){return S.s("editor.folder")});q.forEach(function(S){S.toChildren().forEach(function(q){q.setParent(S.getParent())})}),q.forEach(function(q){S.dm.remove(q)}),this.endTransaction()}},S.prototype.locate=function(S){S&&this.request("locate",S.url||S)},S.prototype.saveImage=function(S,q,W,Z,z,k){var Q=this,U=function(){var U={uuid:Z,path:q,content:bq(S),parent_uuid:z,root_dir:k};Q.request("upload",U,W)};if(NS(S)&&!ht.Default.getImage(S))if(/.json$/.test(S))ht.Default.xhrLoad(S,function(q){q&&(ht.Default.setImage(S,ht.Default.parse(q)),U())});else{var u=new window.Image;u.onload=function(){ht.Default.setImage(S,u),U()},u.src=S}else U()},S.prototype.$48$=function(S){if(yW.length){if((S.target._ignore||!IS(S.target))&&!ht.Default.popup){var q=yW[yW.length-1];q.$48$&&q.$48$()}}else{for(var W=0;W<this.menus.length;W++)if(this.menus[W].isShowing())return void this.menus[W].hide();if(this.funcView&&this.funcView.smartClose&&this.funcView.getView().parentNode)return void this.funcView.hide();if(this.iconsView&&this.iconsView.getView().parentNode)return void this.iconsView.hide();if(this.tab){var Z=this.tab.getView();[Z.graphView,Z.g3d].forEach(function(q){if(q){var W=q.getInteractors();W&&W.each(function(q){!q.disabled&&q.$48$&&q.$48$(S)})}})}}},S.prototype.$47$=function(S){if(yW.length){if((S.target._ignore||!IS(S.target))&&!ht.Default.popup){var q=yW[yW.length-1];q.$47$&&q.$47$()}}else;},S.prototype.handleKeydown=function(S){var q=S.keyCode;if(l(S)&&83===q&&S.preventDefault(),d(S))return void this.$48$(S);if(K(S))return void this.$47$(S);var W={event:S};return this.fireEvent("keydown",W),W.preventDefault?void 0:l(S)&&83===q?void this.save():void(IS(S.target)||(S.preventDefault(),80===q?this.preview():187===q?this.zoomIn():189===q?this.zoomOut():48===q?this.zoomToFit():57===q?this.zoomReset():l(S)&&67===q?this.copy():l(S)&&86===q?this.paste():l(S)&&A(S)&&90===q?this.redo():l(S)&&90===q?this.undo():S.altKey&&l(S)&&221===q?this.bringToFront():S.altKey&&l(S)&&219===q?this.sendToBack():l(S)&&221===q?this.bringForward():l(S)&&219===q?this.sendBackward():90===q?this.fitSelection():l(S)&&A(S)&&71===q?this.unblock():l(S)&&71===q&&this.block()))},S.prototype.createDisplayItem=function(S,q,W,Z,z,k){var Q=this,U=function(){return Q.displayView&&Q.displayView.$3$()===S},u=Wq(S,q,W,U);return u.visible=function(){return!!Q.displayView&&Q.editable},u.action=function(){Q.displayView&&Q.displayView.$4$(S,Z,z,k)},u},S.prototype.createSymbolItem=function(S,q,W,Z,z,k){var Q=this,U=function(){return Q.symbolView&&Q.symbolView.$3$()===S},u=Wq(S,q,W,U);return u.visible=function(){return!!Q.symbolView&&Q.editable},u.action=function(){Q.symbolView&&Q.symbolView.$4$(S,Z,z,k)},u},S.prototype.showMessage=function(S,q,W){this.messageView.show(S,q,W)},S.prototype.showConfirm=function(S,q,W,Z){this.confirmView.show(S,q,W,Z)},S.prototype.batchConvertSVG=function(S){var q=this,W=[],Z=[];S.forEach(function(S){iS(S.url)&&(W.push(S.url),Z.push(S))});var z=2*W.length,Q=0,U=function(){++Q===z&&q.showMessage(iq(k("editor.batchconvertsuccess"),W.length+""))};Y(W,function(S){S.forEach(function(S,W){var z=Z[W],k=ht.Default.svgToShape(S,{segments:jW.config.svgSegments,minimumFontSize:jW.config.svgMinimumFontSize}),Q=z.path.replace(/^assets/g,"symbols"),u=z.getName().replace(/svg$/g,"json");setTimeout(function(){var S=k.output,W=k.converter;W._canvas&&(S.width=W._canvas.width,S.height=W._canvas.height),q.request("upload",{path:Q+"/"+u,content:J(S)},U),u=z.getName().replace(/svg$/g,"png"),q.request("upload",{path:Q+"/"+u,content:bq(S)},U)},jW.config.svgWaitingTime)})})},UW(S,[{key:"editable",get:function(){return!!this.currentView&&this.currentView.editable},set:function(S){this.currentView&&(this.currentView.editable=S)}},{key:"dm",get:function(){return this.gv?this.gv.dm():null}},{key:"gv",get:function(){var S=this.mainTabView.getTabModel().sm().ld();if(S){return S.getView().graphView}return null}},{key:"editInteractor",get:function(){return this.gv?this.gv.getEditInteractor():null}},{key:"pointsEditingMode",get:function(){return!!this.editInteractor&&this.editInteractor.pointsEditingMode},set:function(S){this.editInteractor&&(this.editInteractor.pointsEditingMode=S)}},{key:"anchorVisible",get:function(){return!!this.gv&&this.gv.getEditStyle("anchorVisible")},set:function(S){this.gv&&this.gv.setEditStyle("anchorVisible",S)}},{key:"sm",get:function(){return this.gv?this.gv.sm():null}},{key:"ld",get:function(){return this.sm?this.sm.ld():null}},{key:"selection",get:function(){var S=this,q=[];return this.gv&&this.gv.each(function(W){
S.gv.isSelected(W)&&q.push(W)}),q}},{key:"tabs",get:function(){return this.mainTabView.tabs}},{key:"inspector",get:function(){return this.inspectorPane.inspector}},{key:"list",get:function(){return this.listPane.list}},{key:"tab",get:function(){return this.mainTabView.currentTab}},{key:"url",get:function(){return this.tab?this.tab.getTag():null}},{key:"explorer",get:function(){return this.leftTopTabView.getCurrentTab().getView()}},{key:"dir",get:function(){return this.explorer?this.explorer.tree.getSelectionModel().getLastData():null}},{key:"file",get:function(){return this.explorer?this.explorer.getFileListView().getSelectionModel().getLastData():null}},{key:"currentLayer",get:function(){return this.layerPane.currentLayer}},{key:"currentView",get:function(){var S=this.tab;return S?S.getView():null}},{key:"displayTree",get:function(){return this.displayView?this.displayView.displayTree:null}},{key:"displayView",get:function(){var S=this.currentView;return S instanceof $Z?S:null}},{key:"symbolList",get:function(){return this.symbolView?this.symbolView.symbolList:null}},{key:"symbolView",get:function(){var S=this.currentView;return S instanceof MZ?S:null}},{key:"currentEditingPoint",get:function(){var S=this.currentView;return S?S.currentEditingPoint:null}},{key:"inspectorCompact",get:function(){return this._inspectorCompact},set:function(S){this._inspectorCompact=S,this.filterProperties(),this.inspectorTool.iv()}},{key:"inspectorInputFilter",get:function(){return this.inspectorTool.searchField.getValue()},set:function(S){this.inspectorTool.searchField.setValue(S),this.filterProperties()}}]),S}();SS(Zk,{ms_fire:1}),jW.Editor=Zk;var zk=function(){function S(q,W){var Z=this;QW(this,S),this.editor=W,this.handler=q,this.cookie=0,this.callbacks={},this.cmds={},this.fileChangeVersion=String((new Date).getTime());var z=jW.config.host||window.location.hostname,k=jW.config.port||window.location.port,Q=this.url=window.location.protocol+"//"+z+":"+k;setTimeout(function(){Z.handler({type:"connected",message:Q})},1),jW.config.checkForFileChanges&&jW.config.checkForFileChangesInterval&&this.fileChangedEvent()}return S.prototype.request=function(S,q,W){var Z=++this.cookie;this.callbacks[Z]=W,this.cmds[Z]=S;var z=this.editor.sid;this[S](Z,q,z||null,W);var k=S;q&&(NS(q)?k=S+": "+q:q.path&&(k=S+": "+q.path)),this.handler({type:"request",message:k,cmd:S,data:q})},S.prototype.fileChangedEvent=function(){var S=this,q=this.url+"/fileVersion";q+="/"+S.fileChangeVersion,q+="?sid="+this.editor.sid,S.send("GET",q,null,function(q){S.fileChangeVersion=String((new Date).getTime());var W=q.target.response;if(W){W=JSON.parse(W);Object.keys(W).forEach(function(q){S.handler({type:"fileChanged",path:q})})}}),setTimeout(function(){S.fileChangedEvent()},jW.config.checkForFileChangesInterval)},S.prototype.export=function(S,q,W){var Z=this,z=new ht.Request,k={},Q=new FormData,U=this.url+"/export";U+="?sid="+W,Q.append("dir",q),k.url=encodeURI(U),k.method="POST",k.data=Q,z.setResponseType("blob"),z.onload=function(q){var W=q.target;if(200==W.status||0===W.status){var z=W.response,k=W.getResponseHeader("Content-Disposition").split(";"),Q=k[1].split("=")[1],U=new Blob([z],{type:"application/zip"}),u=document.createElement("a");u.href=window.URL.createObjectURL(U),u.download=decodeURI(Q),u.click(),Z.handleRespone(S,!0)}},z.send(k)},S.prototype.mkdir=function(S,q,W){var Z=this,z=new ht.Request,k={},Q=new FormData,U=this.url+"/mkdir";U+="?sid="+W,jW.config.vision?(Q.append("path",q.dir),Q.append("parent_uuid",q.parent_uuid)):Q.append("path",q),k.url=encodeURI(U),k.method="POST",k.data=Q,z.onload=function(q){var W=q.target;if(200==W.status||0===W.status){var z=W.response||W.responseText;Z.handleRespone(S,"true"===z),Z.handler({type:"fileChanged",path:dir})}},z.send(k)},S.prototype.explore=function(S,q,W){var Z=this,z=new ht.Request,k={},Q=this.url+"/explore";Q+=q,Q+="?sid="+W,k.url=encodeURI(Q),z.onload=function(q){var W=q.target;if(200==W.status||0===W.status){var z=W.response||W.responseText;Z.handleRespone(S,JSON.parse(z))}},z.send(k)},S.prototype.upload=function(S,q,W){var Z=this,z=new FormData,k=this.url+"/upload",Q=q.path;k+="?sid="+W,z.append("path",q.path),z.append("content",q.content),Z.send("POST",k,z,function(q){var W=q.target;if(200==W.status||0===W.status){var z=W.response;if(Z.handleRespone(S,!0),z){var k=JSON.parse(z);Z.handler({type:"confirm",path:k.tempName,datas:k.paths})}else Z.handler({type:"fileChanged",path:Q})}})},S.prototype.rename=function(S,q,W){var Z=this,z=new FormData,k=q.new,Q=q.old,U=this.url+"/rename";U+="?sid="+W,z.append("newPath",k),z.append("oldPath",Q),Z.send("POST",U,z,function(q){var W=q.target;if(200==W.status||0===W.status){var z=W.response||W.responseText;Z.handleRespone(S,"true"===z),"true"===z&&(Z.handler({type:"fileChanged",path:k}),Z.handler({type:"fileChanged",path:Q}))}})},S.prototype.remove=function(S,q,W){var Z=this,z=new FormData,k=this.url+"/remove";k+="?sid="+W,z.append("path",q),Z.send("POST",k,z,function(W){var z=W.target;if(200==z.status||0===z.status){var k=z.response||z.responseText;Z.handleRespone(S,"true"===k),"true"===k&&Z.handler({type:"fileChanged",path:q})}})},S.prototype.locate=function(S,q,W){var Z=this,z=this.url+"/locate";z+="?dir="+q,z+="&sid="+W,Z.send("GET",z,null,function(q){var W=q.target;200!=W.status&&0!=W.status||Z.handleRespone(S,!0)})},S.prototype.open=function(S,q,W){var Z=this,z=this.url+"/open";z+="?url="+q,z+="&sid="+W,Z.send("GET",z,null,function(q){var W=q.target;200!=W.status&&0!=W.status||Z.handleRespone(S,!0)})},S.prototype.source=function(S,q,W){var Z=this,z=new FormData,k=this.url+"/source";k+="?sid="+W,z.append("url",q.url),z.append("encoding",q.encoding),z.append("prefix",q.prefix),Z.send("POST",k,z,function(q){var W=q.target;if(200==W.status||0===W.status){var z=W.response||W.responseText;Z.handleRespone(S,z)}})},S.prototype.import=function(S,q,W){var Z=this,z=new FormData,k=this.url+"/import";k+="?sid="+W,z.append("path",q.path),z.append("move",q.move),Z.send("POST",k,z,function(q){var W=q.target;200!=W.status&&0!==W.status||Z.handleRespone(S,!0)})},S.prototype.paste=function(S,q,W){var Z=this,z=new FormData,k=this.url+"/paste";k+="?sid="+W,z.append("destDir",q.destDir),z.append("fileList",q.fileList),Z.send("POST",k,z,function(q){var W=q.target;if(200==W.status||0===W.status){var z=W.response||W.responseText;Z.handleRespone(S,z)}})},S.prototype.send=function(S,q,W,Z){var z=new ht.Request,k={};k.url=encodeURI(q),k.method=S,k.data=W,Z&&(z.onload=Z),z.send(k)},S.prototype.handleRespone=function(S,q){var W=this.callbacks[S],Z=this.cmds[S];delete this.callbacks[S],delete this.cmds[S],this.handler({type:"response",message:Z,cmd:Z,data:q}),W&&W(q)},S}();return jW.config.logEditorInfo&&console.log("HT Editor v0.3.9 powered by HT for Web v"+ht.Default.getVersion()+" from www.hightopo.com"),!window.onbeforeunload&&jW.config.promptBeforeClosing&&(window.onbeforeunload=function(S){return S.returnValue=k("editor.closetip"),S.returnValue}),jW.version="0.3.9",jW.FILE_TYPE_UNKNOWN=nW,jW.FILE_TYPE_ROOT=PW,jW.FILE_TYPE_DIR=RW,jW.FILE_TYPE_ASSET=_W,jW.FILE_TYPE_SYMBOL=xW,jW.FILE_TYPE_DISPLAY=KW,jW.FILE_TYPE_COMPONENT=dW,jW.FILE_TYPE_MODEL=NW,jW.FILE_TYPE_UI=tW,jW.FILE_TYPE_SCENE=mW,jW.FILE_LAYOUT_LIST=CW,jW.MESSAGE_TYPE_NORMAL="normal",jW.MESSAGE_TYPE_ERROR="error",jW.getString=k,jW.stringifyFunction=b,jW.parseFunction=j,jW.createLabel=Zq,jW.createButton=zq,jW.createItem=Wq,jW.layoutMainView=Uq,jW.msClass=SS,jW.initContext=I,jW.getInput=Sq,jW.trimExtension=T,jW.fileNameToDisplayName=a,jW.isJSON=bS,jW.isOBJ=PS,jW.isDisplay=ZS,jW.isScene=QS,jW.isSymbol=zS,jW.isAsset=DS,jW.isComponent=kS,jW.isUI=uS,jW.isImage=GS,jW.isModel=US,jW.isMTL=RS,jW.getter=i,jW.setter=n,jW.snapshot=bq,jW.CodeEditor=vW,jW.createCodeEditor=jq,jW.FunctionEditor=IZ,jW.ContextMenu=AW,jW.Dialog=GW,jW.SplitView=FW,jW.FormPane=bW,jW.TablePane=pW,jW.DND=hz,jW.DNDFromOutside=Iz,jW.DNDTree=WZ,jW.DNDIndexList=cZ,jW.EditGraphView=dZ,jW.DisplayGraphView=NZ,jW.SymbolList=XZ,jW.FileTree=ZZ,jW.FileList=uZ,jW.DisplayTree=kZ,jW.DisplayView=$Z,jW.MainTabView=YZ,jW.MainToolbar=EZ,jW.MainMenu=HZ,jW.MessageView=iz,jW.ObjectView=Uz,jW.EditView=VZ,jW.FontView=Gz,jW.FunctionView=Qz,jW.ComponentView=qz,jW.SymbolView=MZ,jW.RightToolbar=hZ,jW.InspectorTool=AZ,jW.Inspector=xz,jW.HTDataInspector=mz,jW.HTNodeInspector=Cz,jW.HTTextInspector=fz,jW.HTShapeInspector=yz,jW.HTGroupInspector=$z,jW.HTBlockInspector=cz,jW.HTRefGraphInspector=Xz,jW.HTEdgeInspector=Lz,jW.DisplayInspector=Kz,jW.SymbolInspector=Nz,jW.InspectorPane=Ez,jW.Explorer=vZ,jW.Scenes=PZ,jW.Models=RZ,jW.Assets=xZ,jW.Components=nZ,jW.Displays=jZ,jW.Symbols=iZ,jW.UIs=_Z,jW.FileNode=DZ,jW.WebSocketService=qZ,jW.HTTPService=zk,jW.CreateNodeInteractor=OZ,jW.CreateEdgeInteractor=eZ,jW.CreateShapeInteractor=LZ,jW.combineShapes=Rq,jW.splitShape=_q,jW.removeItem=D,jW.alert=qq,jW.initImageIcon=dq,jW.initInputDND=Nq,jW.jsonToPNG=dS,jW.getDataBindingMap=vq,jW.isAllShape=xq,jW.reverseShapes=Pq,jW.readLocalFile=Qq,jW.removeCache=X,jW.DIRECTORY_TYPE_NORMAL=1,jW.DIRECTORY_TYPE_PROJECT=2,jW.DIRECTORY_TYPE_ROOT=3,jW.DIRECTORY_TYPE_SYSTEM=4,jW.showingDialogs=yW,jW.symbol={Image:rW},jW.createEditor=function(S){if(window.location.host.indexOf("hightopo")>=0){var q="https:"==document.location.protocol?" https://":" http://";document.write(unescape("%3Cdiv style='display:none'%3E%3Cspan id='cnzz_stat_icon_1000279011'%3E%3C/span%3E%3Cscript src='"+q+"s23.cnzz.com/z_stat.php%3Fid%3D1000279011%26show%3Dpic' type='text/javascript'%3E%3C/script%3E%3C/div%3E")),document.body.style.margin="0px",document.body.style.padding="0px"}S&&(ht.Default.isString(S)?S={container:S}:S.tagName&&S.appendChild&&(S={container:S})),S=S||{};var W=void 0,Z=void 0===S.container?jW.config.container:S.container;return null===Z?W=null:Z?ht.Default.isString(Z)?W=document.getElementById(Z):Z.length?(W=ht.Default.createDiv(),W.style.left=Z[0]+"px",W.style.top=Z[1]+"px",W.style.width=Z[2]+"px",W.style.height=Z[3]+"px",document.body.appendChild(W)):W=Z:W=document.body,S.$38$=W,new Zk(S)},jW.init=function(){if(!jW.consts){var S=k("MAX_INDENT_TEST_STRING",!0);S&&(jW.config.indent=ht.Default.getTextSize(void 0,S).width+4-ht.Default.textExtraWidth),S=k("MAX_INDENT2_TEST_STRING",!0),S&&(jW.config.indent2=ht.Default.getTextSize(void 0,S).width+4-ht.Default.textExtraWidth),Eq(),Hq(),pq(),jW.config.initStudio&&jW.config.initStudio()}},jW}();