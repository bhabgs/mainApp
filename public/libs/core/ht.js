!function(Q,N,Ht){"use strict";var Y,m,E,gt="ht";if(!Q.ht){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),Q.performance&&Q.performance.now||(J=Date.now(),Q.performance||(Q.performance={}),Q.performance.now=function(){return Date.now()-J});for(var J,M=Date.now(),Z=["ms","moz","webkit","o"],A=0;A<Z.length&&!Q.requestAnimationFrame;++A)Q.requestAnimationFrame=Q[Z[A]+"RequestAnimationFrame"],Q.cancelAnimationFrame=Q[Z[A]+"CancelAnimationFrame"]||Q[Z[A]+"CancelRequestAnimationFrame"];Q.requestAnimationFrame||(Q.requestAnimationFrame=function(T){var B=Date.now(),G=16+M-B;return M=B,Q.setTimeout(function(){M=Date.now(),T(performance.now())},G=G<0?0:G)}),Q.cancelAnimationFrame||(Q.cancelAnimationFrame=function(T){return Q.clearTimeout(T)}),N.assign===Ht&&(N.assign=function(T){if(T===Ht||null===T)throw new TypeError("Cannot convert undefined or null to object");for(var B=N(T),G=1;G<arguments.length;G++){var H=arguments[G];if(H!==Ht&&null!==H)for(var f in H)N.prototype.hasOwnProperty.call(H,f)&&(B[f]=H[f])}return B}),Q.btoa===Ht&&(Q.btoa=function(T){for(var B,G,H=String(T),f=0,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",J="";H.charAt(0|f)||(v="=",f%1);J+=v.charAt(63&B>>8-f%1*8)){if(255<(G=H.charCodeAt(f+=.75)))throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");B=B<<8|G}return J});var R=(T1=Q.location)&&Q.document,ft=null,F=Ht,L=Q.ht={},W=Q.htconfig,vt=L.Default=W&&W.Default||{},Ft=L.Style=W&&W.Style||{},s=L.Attr=W&&W.Attr||{},S=function(){return!0},y=function(){return!1},u=function(T){return T},x=function(T){return!T},q=L.Color=W&&W.Color||{},w=L.IsGetter=W&&W.IsGetter||{},O=!1;try{var T=N.defineProperty({},"passive",{get:function(){return O=!0,Ht}});T1&&Q.addEventListener("test",T,T),T1&&Q.removeEventListener("test",T,T)}catch(B){O=!1}vt.passiveSupported=O;var Wt,st,_,St,p,yt,xt,i,I,h,wt,Ot,e,c,t,d,P,k,W=vt.passiveSupported,C=vt.eventListenerOptionsFalse=!!W&&{passive:!1,capture:!1},a=vt.eventListenerOptionsTrue=!W||{passive:!1,capture:!0},Tt=function(T,B,G,H){T.addEventListener(B,G,H?a:C)},Bt=function(T,B,G,H){T.removeEventListener(B,G,H?a:C)},_t=(T=Math).round,pt=T.floor,qt=T.ceil,ut=T.sqrt,Gt=T.max,Jt=T.min,it=T.abs,Mt=T.cos,It=T.acos,Yt=T.sin,Dt=T.pow,ht=T.asin,o=(T.exp,T.PI),mt=2*o,ot=o/2,et=T.tan,ct=T.atan2,tt=T.random,W=T.log,B=Dt(2,1),dt=Q.parseInt||global.parseInt,Nt="2023-6-15",Qt=T1&&!!Q.navigator&&-1<Q.navigator.platform.indexOf("Win"),Lt=function(T){return T*T},jt=T1&&Q.setTimeout,rt=T1&&Q.clearTimeout,Xt=T1&&(Q.navigator?Q.navigator.userAgent.toLowerCase():""),Ut=(Ae=function(T){return T.test(Xt)})(/msie/),lt=Ae(/msie/)||Ae(/trident/),bt=Ae(/msie 10/),Kt=Ae(/edge/),zt=Ae(/firefox/),nt=Ae(/mac/),$t=(Ae(/mscAndroid/),vt.isTouchable===Ht?!Qt&&!!R&&"ontouchend"in R:vt.isTouchable),Vt="default",Pt="single",kt="multiple",Ct="front",at="back",Te="left",Be="right",Ge="top",He="bottom",fe="center",ve="eye",Je="middle",Me="east",Ye="west",me="north",Ee="none",Ze="px",Re="absolute",Ae="border",ge="triangle",j="rect",Fe="circle",We="cylinder",se="shape",Se="items",ye="normal",xe="remove",we="clear",Oe="width",_e="height",pe="ingroup",qe="check",ue="uncheck",ie="radioOn",Ie="radioOff",De="points",he="values",oe="series",ee="body",ce="label",te="label2",de="note",Ne="note2",Qe="icons",Le="labelFont",je="labelColor",re="labelSelectColor",Xe="note.expanded",Ue="note2.expanded",le="edge.expanded",be="edge.points",Ke="edge.type",ze="rotation",ne="hidden",$e="visible",Ve="tuv",Pe="no",ke="draw",Ce="select",ae="currentSubGraph",Qt="selectBackground",TB="autoMakeVisible",BB="autoHideScrollBar",GB="scrollBarColor",HB="scrollBarSize",fB="indent",vB="rowHeight",JB="columnLineColor",MB="rowLineColor",YB="columnLineVisible",mB="rowLineVisible",EB="visibleFunc",ZB="expandIcon",RB="collapseIcon",AB="checkMode",gB="sortFunc",FB="editable",WB="batchEditable",sB="tristate",SB="asc",yB="desc",xB="position",wB="elevation",OB="children",_B="translateX",pB="translateY",qB="dataModel",uB="state",iB="encode",IB="shape3d",DB="shape3d.resolution",hB="shape3d.visible",oB="shape3d.from.visible",eB="shape3d.to.visible",cB="shape3d.top.visible",tB="shape3d.bottom.visible",dB="repeat.uv.length",NB="serializeValue",QB="deserializeValue",LB="centerUniform",jB="uniform",rB="rgba(255,255,255,0)",XB="style",UB="string",lB="boolean",bB="color",KB="int",zB="number",nB="ew-resize",$B="ns-resize",VB="pointer",PB="auto",kB="mousedown",CB="mousemove",aB="mouseup",Tw="mouseout",Bw="touchstart",Gw="touchmove",Hw="touchend",fw="keydown",vw=["DOMMouseScroll","mousewheel"],Jw=zt?vw[0]:vw[1],Mw="__ht__"+iB,Yw=[Bw,Gw,Hw],mw=[kB,CB,aB,Tw,Jw,"wheel","mouseenter","mouseleave","mouseover"],Ew=[fw,"keyup","keypress","input","contextmenu","compositionstart","compositionupdate","compositionend"],Zw=($t?Yw:mw).concat(Ew),Rw=ft,Aw=ft,gw=ft,Fw=ft,Ww=aB.length,sw=function(){gw&&(rt(gw.timeout),gw=ft)},Sw=function(){gw&&f2(gw.e,gw.info)},yw=(Q.addEventListener&&(F=T1)&&($t||(Tt(Q,Tw,function(){sw()}),Tt(Q,Jw,function(){v2()})),Tt(Q,"keyup",function(T){91===T.keyCode?Iw={}:delete Iw[T.keyCode]},!0),Tt(Q,fw,function(T){Iw[T.keyCode]=!0},!0),Tt(Q,"blur",function(T){Iw={}})),0),xw=ft,ww=function(T,B){var G=jt(function(){delete xw[G],_1(xw)&&(xw=ft),T()},B);return G},zt=ft,Ow={},_w={},pw={},qw={},uw={},iw={},Iw={},Dw={},hw={},ow={},ew={},cw=/.json$/,tw=/\.(json|bin|fbx|gltf|glb)$/,dw=/^data:image\/svg\+xml/,Nw=[],Qw={},Lw=ft,jw=function(){},rw=function(){throw"Oops!"},Xw=[0,0,0],Uw={x:0,y:0,width:0,height:0},lw=ft,bw=ft,Kw=ft,zw=function(T,B){(_w[T]=B)&&B.comps&&!B.uuid&&(B.uuid=L.Math.generateUUID()),$J[T]&&(B.cacheRule=$J[T],delete $J[T])},nw=function(T){bw&&!T._72O&&((Kw=Kw||{})[T._72O=i2()]=T),St!=ft?(T=1e4*Yt(Ww++))-pt(T)<.05&&_&&!xt&&(H0=sw):H0=J1},$w=function(G,H,f,v){var J,M,T=(bw=bw||{})[G];if(T){if(T.url===H)return;T.image?(T.image.onload=jw,T.image.onerror=jw):T.request&&(T.request.onload=jw,T.request.onerror=jw)}cw.test(H)?(J=new Ga,bw[G]={request:J,url:H},(H=vt.beforeLoadURL(H,G)).data?(M=vt.parse(H.data),Vw(G,M),vt.handleImageLoaded(G,M)):(J.onload=function(T){var B;200===this.status||0===this.status?(B=vt.parse(J.getResponseText()),Vw(G,B),vt.handleImageLoaded(G,B)):Vw(G,vt.handleUnfoundImage(G,H)||ft)},J.onerror=function(T){Vw(G,vt.handleUnfoundImage(G,H)||ft)},(T={}).url=encodeURI(H),T.sync=!1,J.send(T))):(M=new Image,bw[G]={image:M,url:H},/^data:image/.test(H)||(H=vt.beforeLoadURL(H,G),H=vt.appendTimeStamp(H),H=encodeURI(H),M.crossOrigin=vt.crossOrigin),vt.convertImageSrc(H,function(T){lt&&(0<H.toLowerCase().indexOf(".svg")||dw.test(H))?(R.body.appendChild(M),M.style.visibility="hidden",M.onload=function(){jt(function(){var T,B;f&&(M.width=f),v&&(M.height=v),M.width&&M.height||(T=M.width||M.clientWidth,B=M.height||M.clientHeight,M.width=T,M.height=B),vt.handleImageLoaded(G,M),Vw(G,M),R.body.removeChild(M),M.style.visibility=""},180)},M.onerror=function(){Vw(G,vt.handleUnfoundImage(G,H)||ft),R.body.removeChild(M),M.style.visibility=""}):(M.onload=function(){f&&(M.width=f),v&&(M.height=v),vt.handleImageLoaded(G,M),Vw(G,M)},M.onerror=function(){Vw(G,vt.handleUnfoundImage(G,H)||ft)}),M.src=T}))},Vw=function(T,B){if(zw(T,B),delete bw[T],_1(bw)&&(bw=ft,Kw)){for(var G in Kw)(H=Kw[G])._2O&&H._2O[T]&&(H.deleteTexture(T),delete H._2O[T]),H.invalidateAll&&H.invalidateAll(Ht,"imageLoaded",T),H.redraw&&H.redraw(),H.iv(),H instanceof $a&&H.dm().each(function(T){T instanceof LW&&T.updateLayoutAttaches()}),delete H._72O;Kw=ft}if(B&&Kw)for(var G in Kw){var H;(H=Kw[G]).invalidateAll&&H.invalidateAll(Ht,"imageLoading",T),H.redraw&&H.redraw(),H.iv(),H instanceof $a&&H.dm().each(function(T){T instanceof LW&&T.updateLayoutAttaches()})}},Pw=(W=T&&Date,function(){return(Q.performance&&Q.performance.now?Q.performance:Date).now()}),kw=function(T,B,G){return{width:T,height:B,comps:m1(G)?G:[G]}},Cw=function(T,B){return{type:Fe,rect:[T,B,1.6,1.6],borderWidth:1,borderColor:g,gradient:H2,gradientColor:N4,background:g}},aw=function(T,B){return kw(16,16,{type:ge,rect:[4,4,10,8],background:T,rotation:B?1.57:3.14})},T1=function(T,B){return kw(16,16,{type:ge,rect:[4,4,8,7],background:T,rotation:B?3.14:0})},B1=function(T){return"horizontal"===(T=T._orientation)||"h"===T},G1=function(T,B,G,H){return G||(G=$t?5:3,G/=H||1),{x:T-G,y:B-G,width:2*G,height:2*G}},H1=function(T){return(/ble$/.test(T)||/ed$/.test(T)||w[T]?"is":"get")+T.charAt(0).toUpperCase()+T.slice(1)},f1=function(T){return"set"+T.charAt(0).toUpperCase()+T.slice(1)},Et=function(T){return typeof T==UB||T instanceof String},v1=function(T){return typeof T==zB},J1=function(T){return typeof T===lB},M1=function(T){return T&&"object"==typeof T},Y1=function(T){return"function"==typeof T},m1=function(T){return T instanceof Array},E1=function(T){return T instanceof $},r=function(T){return T instanceof LW},Z1=function(T){return T instanceof bW},R1=function(T){return T instanceof KW},A1=function(T,B){return T instanceof L.Group&&(B?!(!(B=B.getDataUI(T))||!B._88I):T.isExpanded())},g1=function(T){return T instanceof nW},F1=function(T){return T&&"IFRAME"===T.tagName},W1=function(T,B,G){var H,f=B.length;if(G)for(var v=0;v<G;v++)if(3===f)T.push(B[0]),T.push(B[1]),T.push(B[2]);else for(H=0;H<f;H++)T.push(B[H]);else if(3===f)T.push(B[0]),T.push(B[1]),T.push(B[2]);else for(H=0;H<f;H++)T.push(B[H])},s1=function(T){return!!T&&(M1(T)?T:{})},S1=function(T,B,G){var H,f=M1(T)?T:T.prototype;for(H in B)G&&H in f?f[H]===Ht&&console.warn("class",f,"has own undefined property",H,", keep exist!"):f[H]=B[H];return T},y1=function(T,B){var G;"wheelDelta"in B||((G=B.deltaMode)===B.DOM_DELTA_PIXEL?B.wheelDelta=-B.deltaY:G===B.DOM_DELTA_LINE?B.wheelDelta=40*-B.deltaY:B.wheelDelta=120*-B.deltaY),T.handle_mousewheel(B)},x1=function(T){return String.fromCharCode(T)},w1=function(T,B){for(var G,H=0,f="",v="",J=T.length;H<J;H++)"%"===(G=T[B?H:J-1-H])?G="'":"a"===G?G='"':"]"===G&&(G="\\"),G=x1(G.charCodeAt(0)-1),B?H%2?v+=G:f=G+f:f+=G;return B?v+f:f},O1=function(T,B,G){T.superClass.constructor.apply(B,G)},_1=function(T){for(var B in T)return!1;return!0},p1=function(T){return!T||0===T.length},q1=(h="",[ue[0],MB[0],ce[0]].forEach(function(T){h+=f1(T).slice(3)}),jB=R&&R[h]||LB,function(T,B){return T===B||T.x===B.x&&T.y===B.y&&T.width===B.width&&T.height===B.height}),u1=function(T,B,G){return T<B?B:G<T?G:T},i1=function(T){return T<0?-1:0<T?1:0},I1=function(T,B,G){return D1(T.x,T.y,B.x,B.y,G.x,G.y,G.x+G.width,G.y,!0)||D1(T.x,T.y,B.x,B.y,G.x+G.width,G.y,G.x+G.width,G.y+G.height,!0)||D1(T.x,T.y,B.x,B.y,G.x+G.width,G.y+G.height,G.x,G.y+G.height,!0)||D1(T.x,T.y,B.x,B.y,G.x,G.y+G.height,G.x,G.y,!0)},D1=function(T,B,G,H,f,v,J,M,Y){var m,E=(M-v)*(G-T)-(J-f)*(H-B);return 0!=E?(m=T+(E=((J-f)*(B-v)-(M-v)*(T-f))/E)*(G-T),E=B+E*(H-B),Y&&(m+Rs<Jt(T,G)||m-Rs>Gt(T,G)||m+Rs<Jt(f,J)||m-Rs>Gt(f,J)||E+Rs<Jt(B,H)||E-Rs>Gt(B,H)||E+Rs<Jt(v,M)||E-Rs>Gt(v,M))?ft:[m,E]):ft},h1=function(T,B,G){if(T&&G){var H=function(T,B,G){return B?B===XB?T.getStyle(G):"attr"===B?T.getAttr(G):"field"===B?T[G]:void 0:T[G=H1(G)]?T[G]():void 0};if("string"!=typeof G||"{"!==G[0]||"}"!==G[G.length-1])return H(T,B,G);var f=(G=(G=G.substr(1)).substr(0,G.length-1)).split("."),v=H(T,B,f[0]);if(v!=ft)for(var J=1,M=f.length;J<M;J++)if((v=v[f[J]])==ft)return v;return v}return Ht},o1=function(T,B,G,H){T&&G&&(B?B===XB?T.s(G,H):"attr"===B?T.a(G,H):"field"===B&&(B=T[G],T[G]=H,T.fp("f:"+G,B,H)):T[G=f1(G)]&&T[G](H))},e1=function(T,B,G){var H=100*Math.max(T.width,T.height);return B&&"top"!==B?"bottom"===B?{x:T.x-H,y:T.y-H,width:T.width+2*H,height:T.height*G+H}:"right"===B?{x:T.x-H,y:T.y-H,width:T.width*G+H,height:T.height+2*H}:"left"===B?{x:T.x+T.width*(1-G),y:T.y-H,width:T.width*G+H,height:T.height+2*H}:void 0:{x:T.x-H,y:T.y+T.height*(1-G),width:T.width+2*H,height:T.height*G+H}},c1=function(T,B,G,H,f){B&&k0(T,G,H,1,f,B)},t1=function(T,B,G,H){var f=1-T;return f*f*B+2*T*f*G+T*T*H},d1=function(T,B,G,H,f){var v=1-T;return v*v*v*B+3*v*v*T*G+3*v*T*T*H+T*T*T*f},N1=function(T){var B,G,H,f,v=0;return T.forEach(function(T){if(0<(B=T.length))for(G=T[0],f=1;f<B;f++)H=T[f],v+=n2(G,H),G=H}),v},Q1=function(T){return N.create(T)},L1=function(T){var B,G;T.element||((B=T.textField)?G=O2(wK.TextField,B):(B=T.textArea)?G=O2(wK.TextArea,B):(B=T.button)?G=O2(wK.Button,B):(B=T.comboBox)?G=O2(wK.ComboBox,B):(B=T.checkBox)?G=O2(wK.CheckBox,B):(B=T.radioButton)?G=O2(wK.RadioButton,B):(B=T.slider)?G=O2(wK.Slider,B):(B=T.colorPicker)?G=O2(wK.ColorPicker,B):(B=T.image)&&(G=O2(wK.Image,B)),G&&(T.element=G))},j1=function(T,B){return(T=r1(T))._ht=B,T},Tw=Q.top===Q?Q.top:Q||Q.document,r1=function(T,B){var G=R.createElement("div"),H=G.style;return G.tabIndex=-1,G.onkeydown=_2,H.msTouchAction=Ee,U1(G,ft,0),$t&&H.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",ft),T&&(H.overflow=ne),B&&K1(B,G),G},X1=function(T,B){var G=R.createElement("canvas"),H=G.style;return H.msTouchAction=Ee,B||(H.pointerEvents=Ee),U1(G,ft,0),T&&K1(T,G),G},U1=function(T,B,G){var H=T.style;H.border=B?B+" solid 1px":0,H.outline=0,H.padding=G?"0 "+G+Ze:0,l1(T)},l1=function(T){(T=T.style).position=Re,T.margin=0,T.setProperty("box-sizing","border-box",ft),T.setProperty("-moz-box-sizing","border-box",ft)},b1=function(T,B,G,H){H=H||B2,B!=ft&&(T.width=B*H,T.style.width=B+Ze),G!=ft&&(T.height=G*H,T.style.height=G+Ze)},K1=function(T,B,G){T.appendChild(B),G&&(B.style.position=Re)},z1=function(T,B){B.split||(B+="");for(var G,H=B.split("\n"),f=0,v=H.length,J=0;J<v;J++){var M=Q2(T.font,H[J]);M.width>f&&(f=M.width),G=G||M.height}return T.ss=H,{width:f,height:G*v}},n1=(I=R?X1().getContext("2d"):ft,function(T,M,Y,m,E,Z){var B=T.split("\n"),R=[],A=Q2(Y,T).height;return m=m||0,I.font=Y,I.textBaseline=Ge,B.forEach(function(T){for(var B=0,G=1,H=0,f=T.length;G<=f;G++){var v=T.substring(B,G),J=E?I.measureText(T[G]):Q2(Y,v),J=(E&&(H+=J.fontBoundingBoxDescent||A),E?H+(v.length-1)*Z:J.width+(v.length-1)*m);M<J&&(G-1===B?(R.push(T.substring(B,G)),B=G):(R.push(T.substring(B,G-1)),B=G-1,G--),H=0)}B!==G-1&&R.push(T.substring(B,G))}),R}),$1=function(T,B,G,H,f,v,J,M){T.font=G;var Y,m=T.measureText(B);T.beginPath(),T.strokeStyle=H,T.lineWidth=1,"underline"===M?(Y=m.actualBoundingBoxDescent?m.actualBoundingBoxDescent+1:Q2(G,B).size/2,T.moveTo(f-J/2,v+Y),T.lineTo(f+J/2,v+Y)):"strikethrough"===M?(T.moveTo(f-J/2,v),T.lineTo(f+J/2,v)):"overline"===M&&(Y=m.fontBoundingBoxAscent||Q2(G,B).size/2,T.moveTo(f-J/2,v-Y),T.lineTo(f+J/2,v-Y)),T.stroke()},V1=function(T,B,G,H,f,v,J,M,Y,m,E){var Z,R,A=f.x,g=f.y,F=f.width,f=f.height;B!=ft&&(Z=Q2(G,B),R={},Y&&(Z.width+=(B.length-1)*Y),R.y=J&&J!==Je?J===Ge?g+Z.height/2:g+f-Z.height/2:g+f/2,R.x=v&&v!==Te?v===Be?A+F-Z.width/2:A+F/2:A+Z.width/2,k1(T,B,R,G,H,Y,m,E),M&&$1(T,B,G,H,R.x,R.y,Z.width,M))},P1=function(T,B,G,H,f,v,J,M,Y,m){var E=B.length;if(1===E){var Z=B[0];k1(T,Z,G,H,f,M,Y,m),J&&(R=Q2(H,Z),$1(T,Z,H,f,G.x+G.width/2,G.y+G.height/2,R.width,J))}else for(var R,A=G.height/E,g={x:G.x,y:G.y,width:G.width,height:A},F=0;F<B.length;F++)v?V1(T,B[F],H,f,g,v,null,J,M,Y,m):(k1(T,B[F],g,H,f,M,Y,m),J&&(R=Q2(H,B[F]),$1(T,B[F],H,f,g.x+g.width/2,g.y+g.height/2,R.width,J))),g.y+=A},k1=function(T,B,G,H,f,v,J,M){T.font=H||E2,T.fillStyle=f||m2,T.textAlign=fe,T.textBaseline=Je;var Y,m,m=G?G.width===Ht?(Y=G.x,G.y):(Y=G.x+G.width/2,G.y+G.height/2):Y=0,E=J&&M;if(E&&(T.strokeStyle=M,T.lineWidth=J),v){Y-=(Q2(H,B).width+v*(B.length-1))/2;for(var Z=(B+"").length,R=0;R<Z;R++){var A=B[R],g=T.measureText(A);E&&T.strokeText(A,_t(Y+(g.width+4)/2),_t(m)),T.fillText(A,_t(Y+(g.width+4)/2),_t(m)),Y+=g.width+v}}else E&&T.strokeText(B,_t(Y),_t(m)),T.fillText(B,_t(Y),_t(m))},C1=function(T){var B=(T=T.getView?T.getView():T).offsetWidth||T.scrollWidth;return!B&&T.style.width?dt(T.style.width):B},a1=function(T){var B=(T=T.getView?T.getView():T).offsetHeight||T.scrollHeight;return!B&&T.style.height?dt(T.style.height):B},T0=function(T,B,G){var H=B[0].toUpperCase()+B.substring(1,B.length);T["webkit"+H]=G,T["moz"+H]=G,T["ms"+H]=G,T["o"+H]=G,T[B]=G},B0=function(T,B){var G=r1(),H=G.style;return H.backgroundColor=vt.disabledBackground,T&&(H.backgroundImage="url("+T+")",H.backgroundPosition="50% 50%",H.backgroundRepeat="no-repeat no-repeat"),!1===B?i.forEach(function(T){Tt(G,T,rK)}):i.forEach(function(T){Tt(G,T,jK)}),G},G0=function(T,B){return(T=T.getContext("2d",B)).save(),T.lineCap=M2,T.lineJoin=Y2,T},H0=function(T,B,G,H){f0(T,B*B2,G*B2),1!=(H*=B2)&&T.scale(H,H)},f0=function(T,B,G){T.translate(B,G)},v0=function(T,B){B&&T.rotate(B)},J0=function(T,B,G){G===Ht&&(G=1),1===(B=B===Ht?1:B)&&1===G||T.scale(B,G)},M0=!(i=[Bw,fw,kB]),Y0=Tw[qe[1]+_B[0]],m0=function(T){var B=R.activeElement;if(R.activeElement!==T){B&&B.forceOnblur&&B.forceOnblur();for(var G=[],H=T.parentNode;H;)G.push([H,H.scrollLeft,H.scrollTop]),H=H.parentNode;if(!M0){var f=[],v=[];try{for(var J=Q.parent,M=Q;J!==M;)f.push([J,J.scrollX,J.scrollY]),M=J,J=Q.parent;var Y=Q.frameElement;if(Y)for(var m=Y.parentNode;m;)v.push([m,m.scrollLeft,m.scrollTop]),m=m.parentNode}catch(T){M0=!0}}$t?T.focus():(Y=(B=Ts()).target,T.focus(),Y.scrollLeft=B.left,Y.scrollTop=B.top),G.forEach(function(T){T[0].scrollLeft=T[1],T[0].scrollTop=T[2]}),M0||(f.forEach(function(T){T[0].scrollTo(T[1],T[2])}),v.forEach(function(T){T[0].scrollLeft=T[1],T[0].scrollTop=T[2]}))}},E0=function(T){return T&&T.getView?T.getView():T},D=function(T,B,G,H,f){var v,J;2===arguments.length&&(G=B.y,H=B.width,f=B.height,B=B.x),T.isSelfViewEvent?(T.setX(B),T.setY(G),T.setWidth(H),T.setHeight(f)):(v=(J=E0(T)).style,(R.fullscreenElement||R.mozFullScreenElement||R.webkitFullscreenElement||R.msFullscreenElement)!==J?(B!==Ht&&(v.left=B+Ze),G!==Ht&&(v.top=G+Ze),H!==Ht&&(v.width=H+Ze),f!==Ht&&(v.height=f+Ze)):(J=vt.getWindowInfo(),v.left=(B=J.left)+Ze,v.top=(G=J.top)+Ze,v.width=(H=J.width)+Ze,v.height=(f=J.height)+Ze),T.endEditing&&!$t&&T.endEditing(),T.redraw&&T.redraw(),T.invalidate&&T.invalidate(),T.onLayouted&&T.onLayouted(B,G,H,f),T.fireViewEvent&&T.fireViewEvent("layout"))},Z0=function(T){return T.touches?T.touches[0]||T.changedTouches[0]:T},R0=function(T){return T&&"object"==typeof T&&"touches"in T},A0=function(T){vt.popup&&vt.popup.close(),vt.popup=T},g0=ft,F0=function(T){g0.handleWindowTouchMove(T)},W0=function(T){g0.handleWindowTouchEnd(T),Bt(Q,Gw,F0),Bt(Q,Hw,W0),Bt(Q,"blur",W0),g0=ft},s0=function(T){g0.handleWindowMouseMove(T)},S0=function(T){g0.handleWindowMouseUp(T),Bt(Q,CB,s0),Bt(Q,aB,S0),Bt(Q,"blur",S0),g0=ft},y0=function(T){return 1===X2(T)},x0=function(T,B){return B?B.keyCode===T:Iw[T]},w0=function(T){return b2(T)&&x0(65,T)},O0=function(T){return x0(46,T)||x0(8,T)},_0=(Tw=function(B){return function(T){return T?T.keyCode===B:Iw[B]}})((T=[65,83,68,87,37,38,39,40,32,13,27])[0]),p0=Tw(T[1]),q0=Tw(T[2]),u0=Tw(T[3]),i0=Tw(T[4]),I0=Tw(T[5]),D0=Tw(T[6]),h0=Tw(T[7]),o0=Tw(T[8]),e0=Tw(T[9]),c0=Tw(T[10]),t0={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},d0=[2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,5,5,5,5,5,7321],N0=ft,Q0=ft,L0=function(T,B){N0=N0||X1(),b1(N0,T,B,1);var G=G0(N0);return G.clearRect(0,0,T,B),G},j0=function(T,B){Q0=Q0||X1(),b1(Q0,T,B,1);var G=G0(Q0,{willReadFrequently:!0});return G.clearRect(0,0,T,B),G},r0=function(T,B,G){var H,f,v,J,M,Y,m,E,Z,R;return B&&T?"override"===G?B:"override_rgb"===G?(R=U0(B),T=X0(T),"rgba("+_t(255*R[0])+","+_t(255*R[1])+","+_t(255*R[2])+","+T[3]/255+")"):"override_a"===G?(R=U0(B),"rgba("+(T=X0(T))[0]+","+T[1]+","+T[2]+","+R[3]+")"):"multiply_destinationAtop"===G?(G=U0(T),E=G[3],H=U0(B),f=H[3],0!==E&&0!==f&&(J=(v=G)[3],M=G.map(function(T,B){return T*H[B]}),Z=1-E,m=(Y=1-f)*E+f,G=G.map(function(T,B){return(f*Z*H[B]+f*E*M[B]+Y*E*T)/m}),Z=1-(E=m),G=G.map(function(T,B){return v[B]*Z+T*E}),E=J),"rgba("+_t(255*G[0])+","+_t(255*G[1])+","+_t(255*G[2])+","+E+")"):(R=U0(B),T=X0(T),"rgba("+_t(T[0]*R[0])+","+_t(T[1]*R[1])+","+_t(T[2]*R[2])+","+T[3]/255*R[3]+")"):T},X0=function(){var H,T,f={};for(T in Q){var B=kt.length;if(T.length==B&&T[0]===kt[2]&&T[1]===Ee[1]&&T[4]===kt[3]&&T[5]===kt[4]&&T.substr(B-2)===Ee[1]+Ee[2]){var G,v=Q[T];for(G in v)G.length===B&&G.substr(0,3)===Be[3]+xe[3]+Ce[0]&&G.substr(B-2)===kt[0]+de[3]&&(vw=v[G])}}return function(T){var B,G=f[T];return G||(H||(H=X1(),b1(H,1,1,1)),(B=H.getContext("2d",{willReadFrequently:!0})).clearRect(0,0,1,1),k0(B,0,0,1,1,T),G=B.getImageData(0,0,1,1).data,G=f[T]=[G[0],G[1],G[2],G[3]]),G}}(),U0=function(T){return Et(T)?((T=X0(T)).CA||(T.CA=[T[0]/255,T[1]/255,T[2]/255,T[3]/255]),T.CA):T},l0=function(T,B,G){return B&&(B="miter"===G?8*B+20:B+1,T&&Bs(T,B)),B},b0=function(T,B){T&&T.beginPath();for(var G,H,f=[],v=function(T){for(var B,G=/(\-{0,1}[\d\.]+)/gi,H=[];B=G.exec(T);)H.push(parseFloat(B[0]));return H},J=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,M={x:0,y:0};Y=J.exec(B);){var Y=Y[0],m=Y.substr(0,1);if("M"===m||"m"===m){for(var E=v(Y),Z=0;Z<E.length;Z+=2){var R=E[Z],A=E[Z+1];"m"===m&&(R+=M.x,A+=M.y),T&&T.moveTo(R,A),f.push({x:R,y:A}),M.x=R,M.y=A}G=H=null}else if("H"===m||"h"===m){for(E=v(Y),Z=0;Z<E.length;Z+=1)R=E[Z],"h"===m&&(R+=M.x),T&&T.lineTo(R,M.y),f.push({x:R,y:M.y}),M.x=R;G=H=null}else if("C"===m||"c"===m){for(E=v(Y),Z=0;Z<E.length;Z+=6){var g=E[Z],F=E[Z+1],W=E[Z+2],s=E[Z+3],R=E[Z+4],A=E[Z+5];"c"===m&&(g+=M.x,F+=M.y,W+=M.x,s+=M.y,R+=M.x,A+=M.y),T&&T.bezierCurveTo(g,F,W,s,R,A),f.push({x:g,y:F}),f.push({x:W,y:s}),f.push({x:R,y:A}),M.x=R,M.y=A}G=[g,F,W,s,R,A],H=null}else if("S"===m||"s"===m){for(E=v(Y),Z=0;Z<E.length;Z+=4)F=G?(g=2*G[4]-G[2],2*G[5]-G[3]):(g=M.x,M.y),W=E[Z],s=E[Z+1],R=E[Z+2],A=E[Z+3],"s"===m&&(W+=M.x,s+=M.y,R+=M.x,A+=M.y),T&&T.bezierCurveTo(g,F,W,s,R,A),f.push({x:g,y:F}),f.push({x:W,y:s}),f.push({x:R,y:A}),M.x=R,M.y=A;G=[g,F,W,s,R,A],H=null}else if("Q"===m||"q"===m){for(E=v(Y),Z=0;Z<E.length;Z+=4)g=E[Z],F=E[Z+1],R=E[Z+2],A=E[Z+3],"q"===m&&(g+=M.x,F+=M.y,R+=M.x,A+=M.y),T&&T.quadraticCurveTo(g,F,R,A),f.push({x:g,y:F}),f.push({x:R,y:A}),M.x=R,M.y=A;G=null,H=[g,F,R,A]}else if("T"===m||"t"===m){for(E=v(Y),Z=0;Z<E.length;Z+=2)F=H?(g=2*H[2]-H[0],2*H[3]-H[1]):(g=M.x,M.y),R=E[Z],A=E[Z+1],"t"===m&&(R+=M.x,A+=M.y),T&&T.quadraticCurveTo(g,F,R,A),f.push({x:g,y:F}),f.push({x:R,y:A}),M.x=R,M.y=A;G=null,H=[g,F,R,A]}else if("V"===m||"v"===m){for(E=v(Y),Z=0;Z<E.length;Z+=1)A=E[Z],"v"===m&&(A+=M.y),T&&T.lineTo(M.x,A),f.push({x:M.x,y:A}),M.y=A;G=H=null}else if("L"===m||"l"===m){for(E=v(Y),Z=0;Z<E.length;Z+=2)R=E[Z],A=E[Z+1],"l"===m&&(R+=M.x,A+=M.y),T&&T.lineTo(R,A),f.push({x:R,y:A}),M.x=R,M.y=A;G=H=null}else if("A"===m||"a"===m){for(E=v(Y),Z=0;Z<E.length;Z+=7){var S=E[Z],y=E[Z+1],x=E[Z+2],w=E[Z+3],O=E[Z+4],R=E[Z+5],A=E[Z+6];"a"===m&&(R+=M.x,A+=M.y),(S=function(T,B,G,H,f,v,J,M){function Y(T,B){return(T[0]*B[1]<T[1]*B[0]?-1:1)*Math.acos(R(T,B))}H*=Math.PI/180;var m={x:Math.cos(H)*(T.x-J.x)/2+Math.sin(H)*(T.y-J.y)/2,y:-Math.sin(H)*(T.x-J.x)/2+Math.cos(H)*(T.y-J.y)/2},E=(1<(E=Math.pow(m.x,2)/Math.pow(B,2)+Math.pow(m.y,2)/Math.pow(G,2))&&(B*=Math.sqrt(E),G*=Math.sqrt(E)),(f==v?-1:1)*Math.sqrt((Math.pow(B,2)*Math.pow(G,2)-Math.pow(B,2)*Math.pow(m.y,2)-Math.pow(G,2)*Math.pow(m.x,2))/(Math.pow(B,2)*Math.pow(m.y,2)+Math.pow(G,2)*Math.pow(m.x,2)))),f=(E=isNaN(E)?0:E)*B*m.y/G,E=E*-G*m.x/B,T={x:(T.x+J.x)/2+Math.cos(H)*f-Math.sin(H)*E,y:(T.y+J.y)/2+Math.sin(H)*f+Math.cos(H)*E},Z=function(T){return Math.sqrt(Math.pow(T[0],2)+Math.pow(T[1],2))},R=function(T,B){return(T[0]*B[0]+T[1]*B[1])/(Z(T)*Z(B))},J=Y([1,0],[(m.x-f)/B,(m.y-E)/G]),m=Y(A=[(m.x-f)/B,(m.y-E)/G],f=[(-m.x-f)/B,(-m.y-E)/G]),R=(R(A,f)<=-1&&(m=Math.PI),1<=R(A,f)&&(m=0),G<B?B:G),E=G<B?1:B/G,A=G<B?G/B:1;if(null==M)return Bs(f={x:0,y:0,width:0,height:0},R),f.x*=E,f.width*=E,f.y*=A,f.height*=A,G=new L9(H),(f=$2([G.tf(f.x,f.y),G.tf(f.x+f.width,f.y),G.tf(f.x+f.width,f.y+f.height),G.tf(f.x,f.y+f.height)])).x+=T.x,f.y+=T.y,[{x:f.x,y:f.y},{x:f.x+f.width,y:f.y},{x:f.x+f.width,y:f.y+f.height},{x:f.x,y:f.y+f.height}];M.translate(T.x,T.y),M.rotate(H),M.scale(E,A),M.arc(0,0,R,J,J+m,1-v),M.scale(1/E,1/A),M.rotate(-H),M.translate(-T.x,-T.y)}(M,S,y,x,w,O,{x:R,y:A},T))&&(f=f.concat(S)),M.x=R,M.y=A}G=H=null}"z"!==(Y=Y.substr(Y.length-1))&&"Z"!==Y||T&&T.closePath()}return f},K0=function(T,B,G,H,f){var v=B[0];if(T.save(),m1(B))if(v&&1===v.length)for(var J="L"===B[0],M=B.length,Y=(W=J?(T.transform(B[5],B[6],B[7],B[8],B[9],B[10]),R=T.createLinearGradient(B[1],B[2],B[3],B[4]),11):(T.transform(B[7],B[8],B[9],B[10],B[11],B[12]),R=T.createRadialGradient(B[1],B[2],B[3],B[4],B[5],B[6]),13),T.compGray);W<M;)A=G(A=B[W+1]),R.addColorStop(B[W],Y?vt.toGrayColor(A):A),W+=2;else for(var m,E,Z,R,A,J="linear"===v,v=f.x,g=f.y,F=f.width,f=f.height,M=B.length,Y=T.compGray,W=J?(R=T.createLinearGradient(v+F*B[1],g+f*B[2],v+F*B[3],g+f*B[4]),5):(J=Math.min(F,f),Z=B[1]*F+v,m=B[2]*f+g,E=B[3]*J,Et(B[5])?(R=T.createRadialGradient(Z,m,0,Z,m,E),4):(T.transform(B[7],B[8],B[9],B[10],B[11]+Z,B[12]+m),F=B[4]*F+v-Z,v=B[5]*f+g-m,Z=B[6]*J,R=T.createRadialGradient(0,0,E,F,v,Z),13));W<M;)A=G(A=B[W+1]),R.addColorStop(B[W],Y?vt.toGrayColor(A):A),W+=2;else R=G(B);return H?T.strokeStyle=R:T.fillStyle=R,R},z0=function(T,B){var G;(G=T.s("shape.gradient.pack"))&&T.s("shape.gradient.pack",XK(G,B)),(G=T.s("shape.border.gradient.pack"))&&T.s("shape.border.gradient.pack",XK(G,B))},n0=function(T,B,G,H){var f=!1;if(T.beginPath?T.beginPath():f=!0,E1(B)&&(B=B._as),(G=E1(G)?G._as:G)&&G.length){for(var v,J,M,Y,m=0,E=0,Z=G.length;E<Z;E++)1===(v=G[E])?(J=B[m++],T.moveTo(J.x,f?-J.y:J.y)):2===v?(J=B[m++],T.lineTo(J.x,f?-J.y:J.y)):3===v?(J=B[m++],M=B[m++],T.quadraticCurveTo(J.x,f?-J.y:J.y,M.x,f?-M.y:M.y)):4===v?(J=B[m++],M=B[m++],Y=B[m++],T.bezierCurveTo(J.x,f?-J.y:J.y,M.x,f?-M.y:M.y,Y.x,f?-Y.y:Y.y)):5===v&&T.closePath();H&&5!==v&&T.closePath()}else{var R,A,g,F=B.length;if(0<F){for(R=B[0],T.moveTo(R.x,f?-R.y:R.y),A=1;A<F;A++)g=B[A],T.lineTo(g.x,f?-g.y:g.y);H&&T.closePath()}}},$0=function(T,B,G,H){if(E1(T)&&(T=T._as),(B=E1(B)?B._as:B)&&B.length){G=G||Ms;for(var f,v,J,M,Y,m,E,Z,R=[],A=ft,g=0,F=0,W=B.length;F<W;F++)if(1===(f=B[F]))R.push(A=[]),A.push(T[g++]);else if(2===f)A.push(T[g++]);else if(3===f){for(v=A[A.length-1],J=T[g++],M=T[g++],m=1;m<G;m++)E=t1(m/G,v.x,J.x,M.x),Z=t1(m/G,v.y,J.y,M.y),A.push({x:E,y:Z,b:!0});A.push(M)}else if(4===f){for(v=A[A.length-1],J=T[g++],M=T[g++],Y=T[g++],m=1;m<G;m++)E=d1(m/G,v.x,J.x,M.x,Y.x),Z=d1(m/G,v.y,J.y,M.y,Y.y),A.push({x:E,y:Z,b:!0});A.push(Y)}else 5===f&&A.push(A[0]);return H&&5!==f&&A&&2<A.length&&A.push(A[0]),R}return H&&2<T.length&&(T=T.slice()).push(T[0]),T?[T]:[]},V0=function(T,B,G,H,f,v){var J,M,Y=H,m=(B=X0(B))[0],E=B[1],Z=B[2],R=G?(J=(B=X0(G))[0]-m,M=B[1]-E,B[2]-Z):(J=255-m,M=255-E,255-Z);for(v||(v=10<H?1:.5,v=f<1?Jt(v/f,2):v),T.save(),T.shadowOffsetX=0,T.shadowOffsetY=0,T.shadowBlur=0,T.shadowColor=0;0<(H-=v);){var A=E+M*(F=1-H/Y),g=Z+R*F,F=Jt(qt(m+J*F),255),A=Jt(qt(A),255),g=Jt(qt(g),255);T.strokeStyle="rgb("+F+","+A+","+g+")",T.lineWidth=H,T.stroke()}T.restore()},P0=(e={},function(T,B){var G=T+"-"+B;if(v=e[G])return v;var H,f,v=X0(T),J=B<0?(H=qt(v[0]*(B=(100+B)/100)),f=qt(v[1]*B),qt(v[2]*B)):(H=v[0],f=v[1],J=v[2],f+=(255-f)*(B/=100),J+=(255-J)*B,H=Jt(qt(H+=(255-H)*B),255),f=Jt(qt(f),255),Jt(qt(J),255));return e[G]="rgb("+H+","+f+","+J+")"}),k0=function(T,B,G,H,f,v){v&&(T.fillStyle=v),T.beginPath(),T.rect(B,G,H,f),T.fill()},C0=function(T,B,G,H,f,v,J){T.beginPath(),A4[B](T,G.x,G.y,G.width,G.height,H,f,v,J)},a0=function(T,B,G,H,f){G=A4[G],T.fillStyle=G?G(T,B,H||N4,f.x,f.y,f.width,f.height):B},T4=function(T,B,G,H,f,v,J,M,Y){T.fillStyle=G4(T,B,G,H,f,v,J,M,Y)},B4=function(T,B,G,H,f,v,J,M,Y){T.strokeStyle=G4(T,B,G,H,f,v,J,M,Y)},G4=function(T,B,G,H,f,v,J,M,Y){var m,E,Z,R,A,g,F,W,s,S,y,x,w,O;try{!B.tagName&&B.comps&&(B._cacheImage_||(B._cacheImage_={}),E="override"===H?"colors_override":"override_rgb"===H?"colors_override_rgb":"override_a"===H?"colors_override_a":"colors",B._cacheImage_[E]||(B._cacheImage_[E]={__count__:0}),(Z=B._cacheImage_[E][G])||(B._cacheImage_[E].__count__>vt.imageCacheThreshold&&(B._cacheImage_[E]={__count__:0}),Z=L.Default.toCanvas(B,ks(B),Cs(B),null,f,v,G,null,H),B._cacheImage_[E][G]=Z,B._cacheImage_[E].__count__++),B=Z),(m=T.createPattern(B,"repeat")).setTransform&&M&&J&&(Y=Y||0,R=new L9,g=ks(B),F=Cs(B),W=M.width/2,s=M.height/2,"uniform"===J?(S=M.width/g,y=M.height/F,x=1,w=M.x,O=M.y,S<y?(x=S,O+=(M.height-F*x)/2,s=F*x/2):(x=y,w+=(M.width-g*x)/2,W=g*x/2),R.appendTranslate(w+W,O+s).appendRotate(Y).appendTranslate(-W,-s).appendScale(x,x),A=[x,0,0,x,w,O]):"fill"===J?(R.appendTranslate(M.x+W,M.y+s).appendRotate(Y).appendTranslate(-W,-s).appendScale(M.width/g,M.height/F),A=[M.width/g,0,0,M.height/F,M.x,M.y]):"centerUniform"===J&&(W=g/2,s=F/2,R.appendTranslate(M.x+(M.width-g)/2+W,M.y+(M.height-F)/2+s).appendRotate(Y).appendTranslate(-W,-s),A=[1,0,0,1,M.x+(M.width-g)/2,M.y+(M.height-F)/2]),(A=R.toArray())&&m.setTransform(new DOMMatrix(A)))}catch(T){m="black"}return m},H4=function(T){for(var B,G=[],H=0,f=T.length,v=0;v<65;v++)G[v]=v;for(v=0;v<65;v++)H=(H+G[v]+T.charCodeAt(v%f))%65,B=G[v],G[v]=G[H],G[H]=B;for(v=0;v<65;v++)G[v]=e9[G[v]];return G.join("")},f4=function(T,B,G,H,f,v,J){T.save(),T.translate(B,G),T.scale(1,J/v),T.arc(0,0,v,H,f),T.restore()},v4=function(T,B,G,H,f,v,J,M,Y){6===arguments.length&&(m1(v)?(M=v[1],Y=v[2],J=v[3],v=v[0]):Y=M=J=v);var m=B+H,E=G+f,Z=H<f?2*H:2*f;v=v<Z?v:Z,J=J<Z?J:Z,M=M<Z?M:Z,Y=Y<Z?Y:Z,T.roundRect?T.roundRect(B,G,H,f,[v,J,Y,M]):(T.moveTo(B+H/2,G),T.arcTo(m,G,m,E,J),T.arcTo(m,E,B,E,Y),T.arcTo(B,E,B,G,M),T.arcTo(B,G,m,G,v),T.lineTo(B+H/2,G))},J4=function(T,B,G,H,f,v,J){B&&(G=_t(G),H=_t(H),J=J||1,T.fillStyle=B,T.beginPath(),T.rect(G,H,J,v),T.rect(G,H,f,J),0<v-J&&T.rect(G,H+v-J,f,J),0<f-J&&T.rect(G+f-J,H,J,v),T.fill())},M4=function(T,B,G,H){var f,v,J,M,Y=H.x,m=H.y,E=H.width,H=H.height;!B||!G||E<=0||H<=0||(f=t2(B),v=d2(B),J=0<G,1===G||-1===G?(T.fillStyle=J?f:v,T.beginPath(),T.rect(Y,m,1,H),T.rect(Y,m,E,1),T.fill(),T.fillStyle=J?v:f,T.beginPath(),T.rect(Y,m+H-1,E,1),T.rect(Y+E-1,m,1,H)):(G=Jt(it(G),Jt(E/2,H/2)),(M=T.createLinearGradient(Y,m,Y+G,m)).addColorStop(0,J?f:v),M.addColorStop(1,B),T.fillStyle=M,T.beginPath(),T.moveTo(Y,m),T.lineTo(Y+G,m+G),T.lineTo(Y+G,m+H-G),T.lineTo(Y,m+H),T.lineTo(Y,m),T.fill(),(M=T.createLinearGradient(Y,m,Y,m+G)).addColorStop(0,J?f:v),M.addColorStop(1,B),T.fillStyle=M,T.beginPath(),T.moveTo(Y,m),T.lineTo(Y+G,m+G),T.lineTo(Y+E-G,m+G),T.lineTo(Y+E,m),T.lineTo(Y,m),T.fill(),(M=T.createLinearGradient(Y,m+H,Y,m+H-G)).addColorStop(0,J?v:f),M.addColorStop(1,B),T.fillStyle=M,T.beginPath(),T.moveTo(Y,m+H),T.lineTo(Y+G,m+H-G),T.lineTo(Y+E-G,m+H-G),T.lineTo(Y+E,m+H),T.lineTo(Y,m+H),T.fill(),(M=T.createLinearGradient(Y+E,m,Y+E-G,m)).addColorStop(0,J?v:f),M.addColorStop(1,B),T.fillStyle=M,T.beginPath(),T.moveTo(Y+E,m),T.lineTo(Y+E-G,m+G),T.lineTo(Y+E-G,m+H-G),T.lineTo(Y+E,m+H),T.lineTo(Y+E,m)),T.fill())},Y4=function(T,B,G,H,f,v,J){return(T=T.createLinearGradient(H,f,v,J)).addColorStop(0,G),T.addColorStop(1,B),T},m4=function(T,B,G,H,f,v,J){return(T=T.createLinearGradient(H,f,v,J)).addColorStop(0,B),T.addColorStop(.5,G),T.addColorStop(1,B),T},E4=function(T,B,G,H,f,v,J){return(T=T.createLinearGradient(H,f,v,J)).addColorStop(0,B),T.addColorStop(1/3,G),T.addColorStop(2/3,B),T.addColorStop(1,G),T},Z4=function(T,B,G,H,f,v,J,M,Y){return(T=T.createRadialGradient(H+v*M,f+J*Y,Jt(v,J)/24,H+v/2,f+J/2,Gt(v,J)/2)).addColorStop(0,G),T.addColorStop(1,B),T},R4=[0,-1,.22451398828979272,-.30901699437494734,.9510565162951535,-.30901699437494745,.3632712640026804,.11803398874989468,.5877852522924731,.8090169943749473,-11102230246251565e-32,.38196601125010515,-.587785252292473,.8090169943749475,-.3632712640026805,.1180339887498949,-.9510565162951536,-.3090169943749473,-.22451398828979285,-.30901699437494734],A4={polygon:function(T,B,G,H,f,v,J,M){(v==ft||v<3)&&(v=6),J==ft&&(J=0),M==ft&&(M=!0);var Y=Jt(H,f),m=Y/2,E=new b(B+H/2,G+f/2),Z=new b,R=0,A=2*o/v,g=new b(m,m);if(!1===M&&g.multiply({x:H/Y,y:f/Y}),0===J)for(W=0;W<v;W++)Z.set(Mt(R),Yt(R)).multiply(g).add(E),0===W?T.moveTo(Z.x,Z.y):T.lineTo(Z.x,Z.y),R+=A;else{for(var F=[],W=0;W<2;W++)F.push(new b(Mt(R),Yt(R)).multiply(g).add(E)),R+=A;var s=F.shift(),S=F[0],B=new b(Mt(R),Yt(R)).multiply(g).add(E),G=s.clone().sub(S),m=B.clone().sub(S),M=G.clone().normalize().dot(m.clone().normalize()),H=Math.sqrt((1-M)/(1+M));for(G.setLength(J/H).add(S),T.moveTo(G.x,G.y),W=0;W<v;W++)F.push(new b(Mt(R),Yt(R)).multiply(g).add(E)),R+=A,s=F.shift(),S=F[0],T.arcTo(s.x,s.y,S.x,S.y,J)}T.closePath()},arc:function(T,B,G,H,f,v,J,M,Y){v==ft&&(v=o),J==ft&&(J=mt),B+=H/2,G+=f/2,(M=M==ft||M)&&T.moveTo(B,G),Y?f4(T,B,G,v,J,H/2,f/2):T.arc(B,G,Jt(H,f)/2,v,J),M&&T.closePath()},rect:function(T,B,G,H,f){T.rect(B,G,H,f)},circle:function(T,B,G,H,f){T.arc(B+H/2,G+f/2,Jt(H,f)/2,0,mt,!0)},oval:function(T,B,G,H,f){f4(T,B+H/2,G+f/2,0,mt,H/2,f/2)},roundRect:function(T,B,G,H,f,v){v==ft&&(v=Jt(Jt(H,f)/4,8)),v4(T,B,G,H,f,v),T.closePath()},star:function(T,B,G,H,f){var v=2*H,J=2*f,M=B+H/2,Y=G+f/2;T.moveTo(M-v/4,Y-J/12),T.lineTo(B+.306*H,G+.579*f),T.lineTo(M-v/6,Y+J/4),T.lineTo(B+H/2,G+.733*f),T.lineTo(M+v/6,Y+J/4),T.lineTo(B+.693*H,G+.579*f),T.lineTo(M+v/4,Y-J/12),T.lineTo(B+.611*H,G+.332*f),T.lineTo(M+0,Y-J/4),T.lineTo(B+.388*H,G+.332*f),T.closePath()},pentagram:function(T,B,G,H,f){var v=B+.5*H,J=G+(f=.5*f),M=.5257311121191336*H,Y=R4,m=0;for(T.moveTo(v+(M=f<M?f:M)*Y[m++],J+M*Y[m++]);m<20;)T.lineTo(v+M*Y[m++],J+M*Y[m++]);T.closePath()},triangle:function(T,B,G,H,f){T.moveTo(B+H/2,G),T.lineTo(B+H,G+f),T.lineTo(B,G+f),T.closePath()},hexagon:function(T,B,G,H,f){T.moveTo(B,G+f/2),T.lineTo(B+H/4,G+f),T.lineTo(B+3*H/4,+G+f),T.lineTo(B+H,G+f/2),T.lineTo(B+3*H/4,G),T.lineTo(B+H/4,G),T.closePath()},pentagon:function(T,B,G,H,f){var v=2*H,J=2*f,B=B+H/2,H=G+f/2;T.moveTo(B-v/4,H-J/12),T.lineTo(B-v/6,H+J/4),T.lineTo(B+v/6,H+J/4),T.lineTo(B+v/4,H-J/12),T.lineTo(B+0,H-J/4),T.closePath()},diamond:function(T,B,G,H,f){T.moveTo(B+H/2,G),T.lineTo(B,G+f/2),T.lineTo(B+H/2,G+f),T.lineTo(B+H,G+f/2),T.closePath()},rightTriangle:function(T,B,G,H,f){T.moveTo(B,G),T.lineTo(B+H,G+f),T.lineTo(B,G+f),T.closePath()},parallelogram:function(T,B,G,H,f){var v=H/4;T.moveTo(B+v,G),T.lineTo(B+H,G),T.lineTo(B+H-v,G+f),T.lineTo(B,G+f),T.closePath()},trapezoid:function(T,B,G,H,f){var v=H/4;T.moveTo(B+v,G),T.lineTo(B+H-v,G),T.lineTo(B+H,G+f),T.lineTo(B,G+f),T.closePath()},"linear.southwest":function(T,B,G,H,f,v,J){return Y4(T,B,G,H,f+J,H+v,f)},"linear.southeast":function(T,B,G,H,f,v,J){return Y4(T,B,G,H+v,f+J,H,f)},"linear.northwest":function(T,B,G,H,f,v,J){return Y4(T,B,G,H,f,H+v,f+J)},"linear.northeast":function(T,B,G,H,f,v,J){return Y4(T,B,G,H+v,f,H,f+J)},"linear.north":function(T,B,G,H,f,v,J){return Y4(T,B,G,H,f,H,f+J)},"linear.south":function(T,B,G,H,f,v,J){return Y4(T,B,G,H,f+J,H,f)},"linear.west":function(T,B,G,H,f,v,J){return Y4(T,B,G,H,f,H+v,f)},"linear.east":function(T,B,G,H,f,v,J){return Y4(T,B,G,H+v,f,H,f)},"radial.center":function(T,B,G,H,f,v,J){return Z4(T,B,G,H,f,v,J,.5,.5)},"radial.southwest":function(T,B,G,H,f,v,J){return Z4(T,B,G,H,f,v,J,.25,.75)},"radial.southeast":function(T,B,G,H,f,v,J){return Z4(T,B,G,H,f,v,J,.75,.75)},"radial.northwest":function(T,B,G,H,f,v,J){return Z4(T,B,G,H,f,v,J,.25,.25)},"radial.northeast":function(T,B,G,H,f,v,J){return Z4(T,B,G,H,f,v,J,.75,.25)},"radial.north":function(T,B,G,H,f,v,J){return Z4(T,B,G,H,f,v,J,.5,.25)},"radial.south":function(T,B,G,H,f,v,J){return Z4(T,B,G,H,f,v,J,.5,.75)},"radial.west":function(T,B,G,H,f,v,J){return Z4(T,B,G,H,f,v,J,.25,.5)},"radial.east":function(T,B,G,H,f,v,J){return Z4(T,B,G,H,f,v,J,.75,.5)},"spread.horizontal":function(T,B,G,H,f,v,J){return m4(T,B,G,H,f,H+v,f)},"spread.vertical":function(T,B,G,H,f,v,J){return m4(T,B,G,H,f,H,f+J)},"spread.diagonal":function(T,B,G,H,f,v,J){return m4(T,B,G,H+v,f,H,f+J)},"spread.antidiagonal":function(T,B,G,H,f,v,J){return m4(T,B,G,H,f,H+v,f+J)},"spread.north":function(T,B,G,H,f,v,J){return E4(T,B,G,H,f-J/4,H,f+J+J/4)},"spread.south":function(T,B,G,H,f,v,J){return E4(T,G,B,H,f-J/4,H,f+J+J/4)},"spread.west":function(T,B,G,H,f,v,J){return E4(T,B,G,H-v/4,f,H+v+v/4,f)},"spread.east":function(T,B,G,H,f,v,J){return E4(T,G,B,H-v/4,f,H+v+v/4,f)}},g4=function(T,B,G){return new L9(T).tf(B,G)},F4=function(T){var B=T.touches[0],T=T.touches[1],G=B.clientX,B=B.clientY,H=T.clientX,T=T.clientY;return ut((G-H)*(G-H)+(B-T)*(B-T))},W4=(function(){for(var T=0,B=yB.split(""),G=0;G<B.length;G++)T=10*dt(B[G])+T;for(var H,f,v,J,M,Y=Q[573..toString(8*G)+ce.substr(G)+3],m=Q[573..toString(8*G)+ce.substr(G)+4],E=ft||4,Z=ft||1,R=ft||1,A=(E<0?E=0:.25<E&&(E=.25),[]),g=[],F=[],W=mt/R,s=mt/Z,S=.5-E,y=0;y<=Z;y++)for(J=Mt(f=y*s-o),v=Yt(f),O=0;O<=R;O++)M=S+E*J,A.push(Mt(H=O*W)*M,v*E,-Yt(H)*M),g.push(O/R,1-y/Z);for(y=0;y<Z;y++)for(var x=y*(R+1),w=(y+1)*(R+1),O=0;O<R;O++)F.push(x+O,w+O+1,w+O,x+O,x+O+1,w+O+1),d1.z=z0.z=[Y,m]}(),function(T,B,G){for(var H=0;H<G.size();H++){var f=G.get(H);T.co(f)&&B.add(f)}for(H=0;H<G.size();H++)f=G.get(H),W4(T,B,f._children)}),s4=function(T,B,G){for(var H=0;H<G.size();H++){var f=G.get(G.size()-1-H);T.co(f)&&B.add(f)}for(H=0;H<G.size();H++)f=G.get(H),s4(T,B,f._children)},S4=function(T,B,G){for(var H=!1,f=0;f<G.size();f++){var v=G.get(f);T.co(v)?H&&B.add(v):H=1}for(f=0;f<G.size();f++)v=G.get(f),S4(T,B,v._children)},y4=function(T,B,G){for(var H=!1,f=0;f<G.size();f++){var v=G.get(G.size()-1-f);T.co(v)?H&&B.add(v):H=!0}for(f=0;f<G.size();f++)v=G.get(f),y4(T,B,v._children)},x4=vt.moveDatas=function(T,H,f,v){var B,G,J,M,Y,m,E,Z=v==ft;0===H&&0===f&&(Z||0===v)||(B=!0,G=[],T.forEach(function(T){B&&(T._69O||R1(T)||g1(T))&&(B=!1)}),B?G=T:(J={},M={},T.forEach(function(T){J[T._id]=!0}),Y={},m=function(T){var B=T._id;return J[B]?(G.push(T),Y[B]=!0):Y[B]=!1},E=function(T){var B=T._id;if(M[B])return m(T);var G=Y[B];if(G!==Ht)return G;var H=T._parent;return H&&(g1(H)||R1(H))&&E(H)||(H=T._host)&&(M[B]=B,G=E(H),M[B]=Ht,G)?Y[B]=!0:m(T)},T.forEach(function(T){E(T)})),G.forEach(function(T){var B,G;r(T)?Z?T.translate(H,f):T.translate3d(H,f,v):(B=T.s(be))&&!B.isEmpty()&&(G=new $,B.each(function(T){T=o2(T),Z?(T.x+=H,T.y+=f):(T.x+=H,T.y+=v,T.e==ft?T.e=f:T.e+=f),G.add(T)}),T.s(be,G))}))},w4=function(T,B){var G,H;if(T=T.parentElement)return T.updateAppendMatrix&&(delete T.updateAppendMatrix,function T(B,G){c||(c=new K,t=new Zt,d=new K,P=new K,k=new K),G==Ht&&(G=new K);for(var H,f=getComputedStyle(B),v=(!lt&&f.perspective&&"none"!==f.perspective&&(d.el[11]=-1/lK(f.perspective),bK(f.perspectiveOrigin,t),P.setPosition(t),t.negate(),k.setPosition(t),G.multiplyMatrices(k,G),G.multiplyMatrices(d,G),G.multiplyMatrices(P,G)),f.transform&&"none"!==f.transform&&(J=f.transform,(H=c)==Ht&&(H=new K),UK(J,"matrix3d")?(M=(M=J.substring(9,J.length-1).split(",")).map(lK),H.fromArray(M)):UK(J,"matrix")&&(M=(M=J.substring(7,J.length-1).split(",")).map(lK),H.el[0]=M[0],H.el[1]=M[1],H.el[2]=0,H.el[3]=0,H.el[4]=M[2],H.el[5]=M[3],H.el[6]=0,H.el[7]=0,H.el[8]=0,H.el[9]=0,H.el[10]=1,H.el[11]=0,H.el[12]=M[4],H.el[13]=M[5],H.el[14]=0,H.el[15]=1),bK(f.transformOrigin,t),P.setPosition(t),t.negate(),k.setPosition(t),!lt&&"preserve-3d"===f.transformStyle||(c.el[8]=0,c.el[9]=0,c.el[10]=1,c.el[11]=0),G.multiplyMatrices(k,G),G.multiplyMatrices(c,G),G.multiplyMatrices(P,G)),B.offsetParent),J=B.offsetLeft,M=B.offsetTop,Y=B.parentElement;Y&&Y!==v;){var m=getComputedStyle(Y);if("none"!==m.transform||"none"!==m.perspective)break;Y=Y.parentElement}Y==Ht&&B!==B.ownerDocument.documentElement&&"fixed"!==f.position&&(Y=B.ownerDocument.documentElement),v!=Ht&&v!=Y&&(J-=Y.offsetLeft,M-=Y.offsetTop),Y&&(J-=Y.scrollLeft,M-=Y.scrollTop),t.set(J,M,0),P.setPosition(t),G.multiplyMatrices(P,G),Y&&T(Y,G)}(T,G=new K),(H=new K).getInverse(G),T._matrixAppend=H,T._maxrixPreAppend=G),B?T._matrixAppend:T._maxrixPreAppend},O4=N.getPrototypeOf?function(T,B,G){(B=function(T,B){for(;T&&!T.hasOwnProperty(B);)T=N.getPrototypeOf(T);return T&&N.getOwnPropertyDescriptor(T,B)}(B,G))&&N.defineProperty(T,G,B)}:function(T,B,G){T[G]=B[G]},_4={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},p4=function(){var H={1:function(T,B){return{x:T.x-B.width/2,y:T.y-B.height/2}},2:function(T,B){return{x:T.x+B.width/2,y:T.y-B.height/2}},3:function(T,B){return{x:T.x+T.width/2,y:T.y-B.height/2}},4:function(T,B){return{x:T.x+T.width-B.width/2,y:T.y-B.height/2}},5:function(T,B){return{x:T.x+T.width+B.width/2,y:T.y-B.height/2}},6:function(T,B){return{x:T.x,y:T.y}},7:function(T,B){return{x:T.x+T.width/2,y:T.y}},8:function(T,B){return{x:T.x+T.width,y:T.y}},9:function(T,B){return{x:T.x-B.width/2,y:T.y+B.height/2}},10:function(T,B){return{x:T.x+B.width/2,y:T.y+B.height/2}},11:function(T,B){return{x:T.x+T.width/2,y:T.y+B.height/2}},12:function(T,B){return{x:T.x-B.width/2+T.width,y:T.y+B.height/2}},13:function(T,B){return{x:T.x+T.width+B.width/2,y:T.y+B.height/2}},14:function(T,B){return{x:T.x-B.width/2,y:T.y+T.height/2}},15:function(T,B){return{x:T.x,y:T.y+T.height/2}},16:function(T,B){return{x:T.x+B.width/2,y:T.y+T.height/2}},17:function(T,B){return{x:T.x+T.width/2,y:T.y+T.height/2}},18:function(T,B){return{x:T.x+T.width-B.width/2,y:T.y+T.height/2}},19:function(T,B){return{x:T.x+T.width,y:T.y+T.height/2}},20:function(T,B){return{x:T.x+T.width+B.width/2,y:T.y+T.height/2}},21:function(T,B){return{x:T.x-B.width/2,y:T.y+T.height-B.height/2}},22:function(T,B){return{x:T.x+B.width/2,y:T.y+T.height-B.height/2}},23:function(T,B){return{x:T.x+T.width/2,y:T.y+T.height-B.height/2}},24:function(T,B){return{x:T.x+T.width-B.width/2,y:T.y+T.height-B.height/2}},25:function(T,B){return{x:T.x+T.width+B.width/2,y:T.y+T.height-B.height/2}},26:function(T,B){return{x:T.x,y:T.y+T.height}},27:function(T,B){return{x:T.x+T.width/2,y:T.y+T.height}},28:function(T,B){return{x:T.x+T.width,y:T.y+T.height}},29:function(T,B){return{x:T.x-B.width/2,y:T.y+T.height+B.height/2}},30:function(T,B){return{x:T.x+B.width/2,y:T.y+T.height+B.height/2}},31:function(T,B){return{x:T.x+T.width/2,y:T.y+T.height+B.height/2}},32:function(T,B){return{x:T.x+T.width-B.width/2,y:T.y+T.height+B.height/2}},33:function(T,B){return{x:T.x+T.width+B.width/2,y:T.y+T.height+B.height/2}},34:function(T,B){return{x:T.x,y:T.y-B.height/2}},35:function(T,B){return{x:T.x+T.width,y:T.y-B.height/2}},36:function(T,B){return{x:T.x,y:T.y+T.height+B.height/2}},37:function(T,B){return{x:T.x+T.width,y:T.y+T.height+B.height/2}},38:function(T,B){return{x:T.x+T.width/4,y:T.y-B.height/2}},39:function(T,B){return{x:T.x+3*T.width/4,y:T.y-B.height/2}},40:function(T,B){return{x:T.x+T.width/4,y:T.y}},41:function(T,B){return{x:T.x+3*T.width/4,y:T.y}},42:function(T,B){return{x:T.x+T.width/4,y:T.y+B.height/2}},43:function(T,B){return{x:T.x+3*T.width/4,y:T.y+B.height/2}},44:function(T,B){return{x:T.x+T.width/2,y:T.y+T.height/2-B.height/2}},45:function(T,B){return{x:T.x+T.width/4,y:T.y+T.height/2}},46:function(T,B){return{x:T.x+T.width/2-B.width/2,y:T.y+T.height/2}},47:function(T,B){return{x:T.x+T.width/2+B.width/2,y:T.y+T.height/2}},48:function(T,B){return{x:T.x+3*T.width/4,y:T.y+T.height/2}},49:function(T,B){return{x:T.x+T.width/2,y:T.y+T.height/2+B.height/2}},50:function(T,B){return{x:T.x+T.width/4,y:T.y+T.height-B.height/2}},51:function(T,B){return{x:T.x+3*T.width/4,y:T.y+T.height-B.height/2}},52:function(T,B){return{x:T.x+T.width/4,y:T.y+T.height}},53:function(T,B){return{x:T.x+3*T.width/4,y:T.y+T.height}},54:function(T,B){return{x:T.x+T.width/4,y:T.y+T.height+B.height/2}},55:function(T,B){return{x:T.x+3*T.width/4,y:T.y+T.height+B.height/2}}};if(function(T){var B,G=0;for(B in T)2===B.length&&573===dt(B,32)&&(Lw=T[B]),G++;return G}(Q))return function(T,B,G){return H[T](B,G||Uw)}}(),q4=(S1(q,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#45C4F9",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#FFF",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0),q.reverse),F=q.transparent,Tw=q.rectSelectBackground,u4=q.dash,i4=q.titleBackground,I4=q.titleIconBackground,D4=q.headerBackground,h4=q.headerIconBackground,o4=q.headerSeparator,e4=q.headerLine,c4=q.contentIconBackground,t4=q.contentLine,d4=(q.widgetIconHighlight,q.widgetIconBorder),g=(q.widgetIconGradient,q.imageBackground),N4=q.imageGradient,Q4=q.highlight,L4=q.label,j4=q.labelSelect;if(!Q.shutAlert1){var r4=new Date,X4=Nt.split("-"),r4=new Date(r4.getFullYear(),r4.getMonth(),r4.getDate()),Nt=new Date(dt(X4[0],10),dt(X4[1],10)-1,dt(X4[2],10)),X4=r4.getTime(),r4=Nt.getTime(),Nt="ht_try",U4=Q.alert;try{(G2=Q.localStorage)&&U4&&(X4<r4&&r4-X4<1728e6?(G=(r4-X4)/864e5,G2&&G2[Nt]!=G&&(G2[Nt]=G,Q.htWillExpire?U4(Q.htWillExpire.replace("{{day}}",G)):U4("HT for Web free trial license will expire in "+G+" days, please apply for a new license!"))):(r4<=X4&&(Q.htExpired?U4(Q.htExpired):console.warn("License 已过期，请联系管理员更新License!")),G2&&delete G2[Nt]))}catch(B){}}Math.sign===Ht&&(Math.sign=function(T){return T<0?-1:0<T?1:+T});var l4,b4,K4,z4,n4,$4,V4,P4,k4,C4,a4,TX,BX,GX,HX,fX,vX,JX,MX,YX,mX,EX,ZX,RX,AX,gX,FX,WX,sX,SX,yX,xX,wX,OX,_X,pX,qX,uX,iX,IX,DX,hX,oX,eX,cX,tX,dX,NX,QX,LX,jX,rX,XX,UX,lX,bX,KX,zX,nX,$X,VX,PX,kX,CX,aX,Tc,Bc,Gc,Hc,fc,vc,Jc,Mc,Yc,mc,Ec,Zc,X,Rc,Ac,gc,Fc,Wc,U,sc,Sc,yc,xc,wc,Oc,_c,pc,qc,uc,ic,Ic,Dc,hc,oc,ec,cc,tc,dc,Nc,Qc,Lc,jc,rc,Xc,Uc,lc,bc,Kc,zc,nc,$c,Vc,Pc,kc,Cc,ac,T9,B9,G9,H9,f9,v9,J9,M9,Y9,m9,E9,Z9,R9,A9,g9,F9,W9,s9,S9,y9,x9,w9,O9,_9,p9,q9,u9,i9,I9,D9,h9,o9,e9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c9=function(T,B){var G,H,f,v,J,M,Y="",m=0;for(T=unescape(encodeURIComponent(T));m<T.length;)f=(G=T.charCodeAt(m++))>>2,v=(3&G)<<4|(G=T.charCodeAt(m++))>>4,J=(15&G)<<2|(H=T.charCodeAt(m++))>>6,M=63&H,isNaN(G)?J=M=64:isNaN(H)&&(M=64),Y=Y+B.charAt(f)+B.charAt(v)+B.charAt(J)+B.charAt(M);return Y},t9=function(T,B,G){for(var H,f,v,J,M,Y,m="",E=G||0;E<T.length;)v=B.indexOf(T.charAt(E++)),H=(15&(J=B.indexOf(T.charAt(E++))))<<4|(M=B.indexOf(T.charAt(E++)))>>2,f=(3&M)<<6|(Y=B.indexOf(T.charAt(E++))),m+=String.fromCharCode(v<<2|J>>4),64!=M&&(m+=String.fromCharCode(H)),64!=Y&&(m+=String.fromCharCode(f));return decodeURIComponent(escape(m))},d9=[],N9=[],l=L.Math={generateUUID:function(){for(var f=[],T=0;T<256;T++)f[T]=(T<16?"0":"")+T.toString(16).toUpperCase();return function(){var T=4294967295*Math.random()|0,B=4294967295*Math.random()|0,G=4294967295*Math.random()|0,H=4294967295*Math.random()|0;return f[255&T]+f[T>>8&255]+f[T>>16&255]+f[T>>24&255]+"-"+f[255&B]+f[B>>8&255]+"-"+f[B>>16&15|64]+f[B>>24&255]+"-"+f[63&G|128]+f[G>>8&255]+"-"+f[G>>16&255]+f[G>>24&255]+f[255&H]+f[H>>8&255]+f[H>>16&255]+f[H>>24&255]}}(),clamp:function(T,B,G){return Math.max(B,Math.min(G,T))},fequal:function(T,B,G){return null==G&&(G=1e-8),Math.abs(T-B)<G},generateIncreasingID:(l4=0,function(){return++l4}),newIdGenerator:function(){var T=0;return{next:function(){return++T}}},encodeBase64:function(T,B){return c9(T,B||e9)},decodeBase64:function(T,B){return t9(T,B||e9)},randomArray:function(T,B){for(var G=(B=B||T.length)-1;0<G;G--){var H=Math.floor(Math.random()*(G+1)),f=T[G];T[G]=T[H],T[H]=f}return T},randomInt:function(T,B){return B===Ht&&(B=T,T=0),T+Math.floor(Math.random()*(B-T))},randomFloat:function(T,B){return B===Ht&&(B=T,T=0),T+Math.random()*(B-T)},modToPositive:function(T,B){return(T%=B)<0&&(T+=B),T},roundFloat:function(T,B){return B=1===B?10:2==B?100:3==B||B==ft?1e3:Math.pow(10,B),Math.round(T*B)/B},isPOT:function(T){return 0<T&&0==(T-1&T)},nearestPOT:function(T){if(!T)return 1;var B=T,G=(B--,B=(B=(B=(B=(B|=B>>1)|B>>2)|B>>4)|B>>8)|B>>16,++B>>1);return B-T<T-G?B:G},requestMatrix4:function(){return 0<d9.length?d9.pop():new l.Matrix4},releaseMatrix4:function(T){d9.push(T)},requestVector3:function(){return 0<N9.length?N9.pop():new l.Vector3},releaseVector3:function(T){N9.push(T)}},Q9=L.Matrix=L.Math.Matrix2d=function(T,B,G,H,f){this.setFromTransform(T,B,G,H,f)},L9=Q9,j9=(((Q9.prototype={}).constructor=Q9).prototype.set=function(T,B,G,H,f,v){return this.a=T,this.b=B,this.c=G,this.d=H,this.tx=f,this.ty=v,this},Q9.prototype.setFromTransform=function(T,B,G,H,f){var v,J=this;return T===Ht?(J.a=1,J.b=0,J.c=0,J.d=1,J.tx=0,void(J.ty=0)):(T=T?(v=Yt(T),Mt(T)):(v=0,1),f=f||1,J.a=T*(H=H||1),J.b=v*H,J.c=-v*f,J.d=T*f,J.tx=B||0,J.ty=G||0,J)},Q9.prototype.apply=function(T,B){B=B||new b;var G=T.x,T=T.y;return B.x=this.a*G+this.c*T+this.tx,B.y=this.b*G+this.d*T+this.ty,B},Q9.prototype.applyInverse=function(T,B){B=B||new b;var G=1/(this.a*this.d+this.c*-this.b),H=T.x,T=T.y;return B.x=this.d*G*H+-this.c*G*T+(this.ty*this.c-this.tx*this.d)*G,B.y=this.a*G*T+-this.b*G*H+(-this.ty*this.a+this.tx*this.b)*G,B},Q9.prototype.translate=function(T,B){return this.tx+=T,this.ty+=B,this},Q9.prototype.scale=function(T,B){return this.a*=T,this.d*=B,this.c*=T,this.b*=B,this.tx*=T,this.ty*=B,this},Q9.prototype.rotate=function(T){var B=Math.cos(T),T=Math.sin(T),G=this.a,H=this.c,f=this.tx;return this.a=G*B-this.b*T,this.b=G*T+this.b*B,this.c=H*B-this.d*T,this.d=H*T+this.d*B,this.tx=f*B-this.ty*T,this.ty=f*T+this.ty*B,this},Q9.prototype.appendTranslate=function(T,B){return this.tx+=this.a*T+this.c*B,this.ty+=this.b*T+this.d*B,this},Q9.prototype.appendScale=function(T,B){return this.a*=T,this.d*=B,this.c*=B,this.b*=T,this},Q9.prototype.appendRotate=function(T){if(!T)return this;var B=Math.cos(T),T=Math.sin(T),G=this.a,H=this.b;return this.a=G*B+this.c*T,this.b=H*B+this.d*T,this.c=-G*T+this.c*B,this.d=-H*T+this.d*B,this},Q9.prototype.append=function(T){var B=this.a,G=this.b,H=this.c,f=this.d;return this.a=T.a*B+T.b*H,this.b=T.a*G+T.b*f,this.c=T.c*B+T.d*H,this.d=T.c*G+T.d*f,this.tx=T.tx*B+T.ty*H+this.tx,this.ty=T.tx*G+T.ty*f+this.ty,this},Q9.prototype.setTransform=function(T,B,G,H,f,v,J,M,Y){var m=Math.sin(J),J=Math.cos(J),E=Math.cos(Y),Y=Math.sin(Y),Z=-Math.sin(M),M=Math.cos(M),R=J*f,f=m*f,J=J*v;return this.a=E*R+Y*(m=-m*v),this.b=E*f+Y*J,this.c=Z*R+M*m,this.d=Z*f+M*J,this.tx=T+(G*R+H*m),this.ty=B+(G*f+H*J),this},Q9.prototype.prepend=function(T){var B,G,H=this.tx;return 1===T.a&&0===T.b&&0===T.c&&1===T.d||(B=this.a,G=this.c,this.a=B*T.a+this.b*T.c,this.b=B*T.b+this.b*T.d,this.c=G*T.a+this.d*T.c,this.d=G*T.b+this.d*T.d),this.tx=H*T.a+this.ty*T.c+T.tx,this.ty=H*T.b+this.ty*T.d+T.ty,this},Q9.prototype.transform=Q9.prototype.prepend,Q9.prototype.invert=function(){var T=this.a,B=this.b,G=this.c,H=this.d,f=this.tx,v=T*H-B*G;return this.a=H/v,this.b=-B/v,this.c=-G/v,this.d=T/v,this.tx=(G*this.ty-H*f)/v,this.ty=-(T*this.ty-B*f)/v,this},Q9.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Q9.prototype.clone=function(){var T=new Q9;return T.a=this.a,T.b=this.b,T.c=this.c,T.d=this.d,T.tx=this.tx,T.ty=this.ty,T},Q9.prototype.copy=function(T){return T.a=this.a,T.b=this.b,T.c=this.c,T.d=this.d,T.tx=this.tx,T.ty=this.ty,T},Q9.prototype.tf=function(T,B){1===arguments.length&&(B=T.y,T=T.x);var G=this;return{x:G.a*T+G.c*B+G.tx,y:G.b*T+G.d*B+G.ty}},Q9.prototype.toArray=function(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]},Q9.prototype.fromArray=function(T){return this.a=T[0],this.b=T[1],this.c=T[2],this.d=T[3],this.tx=T[4],this.ty=T[5],this},Q9.prototype.toArray9=function(){return[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1]},Q9.prototype.tfi=function(T,B){1===arguments.length&&(B=T.y,T=T.x);var G=this,H=1/(G.a*G.d+G.c*-G.b);return{x:G.d*H*T+-G.c*H*B+(G.ty*G.c-G.tx*G.d)*H,y:G.a*H*B+-G.b*H*T+(-G.ty*G.a+G.tx*G.b)*H}},Q9.prototype.decompose=function(){var T=this,B=T.a,G=T.b,H=T.c,f=T.d,v=Math.sqrt(B*B+G*G),J=Math.sqrt(H*H+f*f);return B*f-G*H<0&&(B<f?v=-v:J=-J),v&&(B*=1/v,G*=1/v),J&&(f*=1/J),{translateX:T.tx,translateY:T.ty,rotation:Math.atan2(G,B),scaleX:v,scaleY:J}},Q9.IDENTITY=new Q9,Q9.TEMP_MATRIX=new Q9,L.Math.Quaternion=function(T,B,G,H){this.set(T,B,G,H)}),r9=(N.assign(j9.prototype,{set:function(T,B,G,H){var f=this;return f._x=T||0,f._y=B||0,f._z=G||0,f._w=H!==Ht?H:1,f},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(T){var B=this;return B._x=T._x,B._y=T._y,B._z=T._z,B._w=T._w,B},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this},dot:function(T){return this._x*T._x+this._y*T._y+this._z*T._z+this._w*T._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var T=this.length();return 0===T?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(T=1/T),this._y=this._y*T,this._z=this._z*T,this._w=this._w*T),this},fromArray:function(T,B){return this._x=T[B=B===Ht?0:B],this._y=T[B+1],this._z=T[B+2],this._w=T[B+3],this},slerp:function(T,B){if(0===B)return this;if(1===B)return this.copy(T);var G=this._x,H=this._y,f=this._z,v=this._w;if((J=v*T._w+G*T._x+H*T._y+f*T._z)<0?(this._w=-T._w,this._x=-T._x,this._y=-T._y,this._z=-T._z,J=-J):this.copy(T),1<=J)return this._w=v,this._x=G,this._y=H,this._z=f,this;if(T=Math.sqrt(1-J*J),Math.abs(T)<.001)return this._w=.5*(v+this._w),this._x=.5*(G+this._x),this._y=.5*(H+this._y),this._z=.5*(f+this._z),this;var J=Math.atan2(T,J),M=Math.sin((1-B)*J)/T,B=Math.sin(B*J)/T;return this._w=v*M+this._w*B,this._x=G*M+this._x*B,this._y=H*M+this._y*B,this._z=f*M+this._z*B,this},equals:function(T){return T._x===this._x&&T._y===this._y&&T._z===this._z&&T._w===this._w},setFromAxisAngle:function(T,B){var B=B/2,G=Math.sin(B);return this._x=T.x*G,this._y=T.y*G,this._z=T.z*G,this._w=Math.cos(B),this},setFromEuler:function(T){var B=T._x,G=T._y,H=T._z,T=T._order,f=Math.cos,v=Math.sin,J=f(B/2),M=f(G/2),f=f(H/2),B=v(B/2),G=v(G/2),v=v(H/2);return"XYZ"===T?(this._x=B*M*f+J*G*v,this._y=J*G*f-B*M*v,this._z=J*M*v+B*G*f,this._w=J*M*f-B*G*v):"YXZ"===T?(this._x=B*M*f+J*G*v,this._y=J*G*f-B*M*v,this._z=J*M*v-B*G*f,this._w=J*M*f+B*G*v):"ZXY"===T?(this._x=B*M*f-J*G*v,this._y=J*G*f+B*M*v,this._z=J*M*v+B*G*f,this._w=J*M*f-B*G*v):"ZYX"===T?(this._x=B*M*f-J*G*v,this._y=J*G*f+B*M*v,this._z=J*M*v-B*G*f,this._w=J*M*f+B*G*v):"YZX"===T?(this._x=B*M*f+J*G*v,this._y=J*G*f+B*M*v,this._z=J*M*v-B*G*f,this._w=J*M*f-B*G*v):"XZY"===T&&(this._x=B*M*f-J*G*v,this._y=J*G*f-B*M*v,this._z=J*M*v+B*G*f,this._w=J*M*f+B*G*v),this},setFromRotationMatrix:function(T){var B,G=(T=T.el)[0],H=T[4],f=T[8],v=T[1],J=T[5],M=T[9],Y=T[2],m=T[6],E=G+J+(T=T[10]);return 0<E?(B=.5/Math.sqrt(E+1),this._w=.25/B,this._x=(m-M)*B,this._y=(f-Y)*B,this._z=(v-H)*B):J<G&&T<G?(B=2*Math.sqrt(1+G-J-T),this._w=(m-M)/B,this._x=.25*B,this._y=(H+v)/B,this._z=(f+Y)/B):T<J?(B=2*Math.sqrt(1+J-G-T),this._w=(f-Y)/B,this._x=(H+v)/B,this._y=.25*B,this._z=(M+m)/B):(B=2*Math.sqrt(1+T-G-J),this._w=(v-H)/B,this._x=(f+Y)/B,this._y=(M+m)/B,this._z=.25*B),this},setFromToVectors:function(T,B){return z4===Ht&&(z4=new Zt),(n4=T.dot(B)+1)<1e-7?(n4=0,Math.abs(T.x)>Math.abs(T.z)?z4.set(-T.y,T.x,0):z4.set(0,-T.z,T.y)):z4.crossVectors(T,B),this._x=z4.x,this._y=z4.y,this._z=z4.z,this._w=n4,this.normalize()},setFromUnitVectors:function(T,B){return b4===Ht&&(b4=new Zt),(K4=T.dot(B)+1)<1e-6?(K4=0,Math.abs(T.x)>Math.abs(T.z)?b4.set(-T.y,T.x,0):b4.set(0,-T.z,T.y)):b4.crossVectors(T,B),this._x=b4.x,this._y=b4.y,this._z=b4.z,this._w=K4,this.normalize()},multiply:function(T){return this.multiplyQuaternions(this,T)},premultiply:function(T){return this.multiplyQuaternions(T,this)},multiplyQuaternions:function(T,B){var G=T._x,H=T._y,f=T._z,T=T._w,v=B._x,J=B._y,M=B._z,B=B._w;return this._x=G*B+T*v+H*M-f*J,this._y=H*B+T*J+f*v-G*M,this._z=f*B+T*M+G*J-H*v,this._w=T*B-G*v-H*J-f*M,this},toArray:function(T,B){return(T=T||[])[B=B||0]=this._x,T[B+1]=this._y,T[B+2]=this._z,T[B+3]=this._w,T}}),j9.slerpFlat=function(T,B,G,H,f,v,J){var M,Y,m,E=G[H+0],Z=G[H+1],R=G[H+2],G=G[H+3],H=f[v+0],A=f[v+1],g=f[v+2],f=f[v+3];return 0===J?(T[B+0]=E,T[B+1]=Z,T[B+2]=R,void(T[B+3]=G)):1===J?(T[B+0]=H,T[B+1]=A,T[B+2]=g,void(T[B+3]=f)):(G===f&&E===H&&Z===A&&R===g||(v=1-J,M=0<=(Y=E*H+Z*A+R*g+G*f)?1:-1,(m=1-Y*Y)>Number.EPSILON&&(m=Math.sqrt(m),Y=Math.atan2(m,Y*M),v=Math.sin(v*Y)/m,J=Math.sin(J*Y)/m),E=E*v+H*(Y=J*M),Z=Z*v+A*Y,R=R*v+g*Y,G=G*v+f*Y,v===1-J&&(E*=m=1/Math.sqrt(E*E+Z*Z+R*R+G*G),Z*=m,R*=m,G*=m)),T[B]=E,T[B+1]=Z,T[B+2]=R,void(T[B+3]=G))},L.Math.Vector4=function(T,B,G,H){this.x=T||0,this.y=B||0,this.z=G||0,this.w=H!==Ht?H:1}),Zt=(N.assign(r9.prototype,{isVector4:!0,set:function(T,B,G,H){return this.x=T,this.y=B,this.z=G,this.w=H,this},setScalar:function(T){return this.x=T,this.y=T,this.z=T,this.w=T,this},setX:function(T){return this.x=T,this},setY:function(T){return this.y=T,this},setZ:function(T){return this.z=T,this},setW:function(T){return this.w=T,this},setComponent:function(T,B){switch(T){case 0:this.x=B;break;case 1:this.y=B;break;case 2:this.z=B;break;case 3:this.w=B;break;default:throw new Error("index is out of range: "+T)}return this},getComponent:function(T){switch(T){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+T)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(T){return this.x=T.x,this.y=T.y,this.z=T.z,this.w=T.w!==Ht?T.w:1,this},add:function(T,B){return B!==Ht?this.addVectors(T,B):(this.x+=T.x,this.y+=T.y,this.z+=T.z,this.w+=T.w,this)},addScalar:function(T){return this.x+=T,this.y+=T,this.z+=T,this.w+=T,this},addVectors:function(T,B){return this.x=T.x+B.x,this.y=T.y+B.y,this.z=T.z+B.z,this.w=T.w+B.w,this},addScaledVector:function(T,B){return this.x+=T.x*B,this.y+=T.y*B,this.z+=T.z*B,this.w+=T.w*B,this},sub:function(T,B){return B!==Ht?this.subVectors(T,B):(this.x-=T.x,this.y-=T.y,this.z-=T.z,this.w-=T.w,this)},subScalar:function(T){return this.x-=T,this.y-=T,this.z-=T,this.w-=T,this},subVectors:function(T,B){return this.x=T.x-B.x,this.y=T.y-B.y,this.z=T.z-B.z,this.w=T.w-B.w,this},multiplyScalar:function(T){return this.x*=T,this.y*=T,this.z*=T,this.w*=T,this},applyMatrix4:function(T){var B=this.x,G=this.y,H=this.z,f=this.w,T=T.el;return this.x=T[0]*B+T[4]*G+T[8]*H+T[12]*f,this.y=T[1]*B+T[5]*G+T[9]*H+T[13]*f,this.z=T[2]*B+T[6]*G+T[10]*H+T[14]*f,this.w=T[3]*B+T[7]*G+T[11]*H+T[15]*f,this},divideScalar:function(T){return this.multiplyScalar(1/T)},setAxisAngleFromQuaternion:function(T){this.w=2*Math.acos(T.w);var B=Math.sqrt(1-T.w*T.w);return B<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=T.x/B,this.y=T.y/B,this.z=T.z/B),this},setAxisAngleFromRotationMatrix:function(T){var B,G,H,f=(T=T.el)[0],v=T[4],J=T[8],M=T[1],Y=T[5],m=T[9],E=T[2],Z=T[6],T=T[10];if(Math.abs(v-M)<.01&&Math.abs(J-E)<.01&&Math.abs(m-Z)<.01){if(Math.abs(v+M)<.1&&Math.abs(J+E)<.1&&Math.abs(m+Z)<.1&&Math.abs(f+Y+T-3)<.1)return this.set(1,0,0,0),this;var R=Math.PI,A=(f+1)/2,g=(Y+1)/2,F=(T+1)/2,W=(v+M)/4,s=(J+E)/4,S=(m+Z)/4;return g<A&&F<A?H=A<.01?(B=0,G=.707106781):(G=W/(B=Math.sqrt(A)),s/B):F<g?H=g<.01?(G=0,B=.707106781):(B=W/(G=Math.sqrt(g)),S/G):F<.01?(G=B=.707106781,H=0):(B=s/(H=Math.sqrt(F)),G=S/H),this.set(B,G,H,R),this}return A=Math.sqrt((Z-m)*(Z-m)+(J-E)*(J-E)+(M-v)*(M-v)),Math.abs(A)<.001&&(A=1),this.x=(Z-m)/A,this.y=(J-E)/A,this.z=(M-v)/A,this.w=Math.acos((f+Y+T-1)/2),this},min:function(T){return this.x=Math.min(this.x,T.x),this.y=Math.min(this.y,T.y),this.z=Math.min(this.z,T.z),this.w=Math.min(this.w,T.w),this},max:function(T){return this.x=Math.max(this.x,T.x),this.y=Math.max(this.y,T.y),this.z=Math.max(this.z,T.z),this.w=Math.max(this.w,T.w),this},clamp:function(T,B){return this.x=Math.max(T.x,Math.min(B.x,this.x)),this.y=Math.max(T.y,Math.min(B.y,this.y)),this.z=Math.max(T.z,Math.min(B.z,this.z)),this.w=Math.max(T.w,Math.min(B.w,this.w)),this},clampScalar:function(T,B){return $4===Ht&&($4=new r9,V4=new r9),$4.set(T,T,T,T),V4.set(B,B,B,B),this.clamp($4,V4)},clampLength:function(T,B){var G=this.length();return this.divideScalar(G||1).multiplyScalar(Math.max(T,Math.min(B,G)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(T){return this.x*T.x+this.y*T.y+this.z*T.z+this.w*T.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(T){return this.normalize().multiplyScalar(T)},lerp:function(T,B){return this.x+=(T.x-this.x)*B,this.y+=(T.y-this.y)*B,this.z+=(T.z-this.z)*B,this.w+=(T.w-this.w)*B,this},lerpVectors:function(T,B,G){return this.subVectors(B,T).multiplyScalar(G).add(T)},equals:function(T){return T.x===this.x&&T.y===this.y&&T.z===this.z&&T.w===this.w},fromArray:function(T,B){return this.x=T[B=B===Ht?0:B],this.y=T[B+1],this.z=T[B+2],this.w=T[B+3],this},toArray:function(T,B){return(T=T===Ht?[]:T)[B=B===Ht?0:B]=this.x,T[B+1]=this.y,T[B+2]=this.z,T[B+3]=this.w,T},fromBufferAttribute:function(T,B,G){return this.x=T.getX(B),this.y=T.getY(B),this.z=T.getZ(B),this.w=T.getW(B),this}}),L.Math.Vector3=function(T,B,G){T===Ht?(this.x=0,this.y=0,this.z=0):"object"==typeof T?this.copy(T):this.set(T,B==Ht?T:B,G==Ht?T:G)}),X9=(N.assign(Zt.prototype,{isVector3:!0,isNaN:function(){return isNaN(this.x)||isNaN(this.y)||isNaN(this.z)},set:function(T,B,G){return this.x=T,this.y=B,this.z=G,this},equals:function(T){return T&&this.x===T.x&&this.y===T.y&&this.z===T.z},setScalar:function(T){return this.x=T,this.y=T,this.z=T,this},setX:function(T){return this.x=T,this},setY:function(T){return this.y=T,this},setZ:function(T){return this.z=T,this},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(T){return T.x===Ht?(this.x=T[0],this.y=T[1],this.z=T[2]):(this.x=T.x,this.y=T.y,this.z=T.z||0),this},add:function(T){return this.x+=T.x,this.y+=T.y,this.z+=T.z,this},addScalar:function(T){return this.x+=T,this.y+=T,this.z+=T,this},addVectors:function(T,B){return this.x=T.x+B.x,this.y=T.y+B.y,this.z=T.z+B.z,this},addScaledVector:function(T,B){return this.x+=T.x*B,this.y+=T.y*B,this.z+=T.z*B,this},sub:function(T){return this.x-=T.x,this.y-=T.y,this.z-=T.z,this},subScalar:function(T){return this.x-=T,this.y-=T,this.z-=T,this},subVectors:function(T,B){return this.x=T.x-B.x,this.y=T.y-B.y,this.z=T.z-B.z,this},divide:function(T){return this.x/=T.x,this.y/=T.y,this.z/=T.z,this},multiply:function(T){return this.x*=T.x,this.y*=T.y,this.z*=T.z,this},multiplyScalar:function(T){return this.x*=T,this.y*=T,this.z*=T,this},divideScalar:function(T){return 0!==T?(this.x*=T=1/T,this.y*=T,this.z*=T):(this.x=0,this.y=0,this.z=0),this},distanceTo:function(T){return Math.sqrt(this.distanceToSquared(T))},distanceToSquared:function(T){var B=this.x-T.x,G=this.y-T.y;return B*B+G*G+(T=this.z-T.z)*T},distanceToSquared2:function(T){var B=this.x-T[0],G=this.y-T[1];return B*B+G*G+(T=this.z-T[2])*T},divideVectors:function(T,B){return this.x=T.x/B.x,this.y=T.y/B.y,this.z=T.z/B.z,this},multiplyVectors:function(T,B){return this.x=T.x*B.x,this.y=T.y*B.y,this.z=T.z*B.z,this},transformDirection:function(T){var B=this.x,G=this.y,H=this.z,T=T.el;return this.x=T[0]*B+T[4]*G+T[8]*H,this.y=T[1]*B+T[5]*G+T[9]*H,this.z=T[2]*B+T[6]*G+T[10]*H,this.normalize()},applyAxisAngle:(C4=new j9,function(T,B){return this.applyQuaternion(C4.setFromAxisAngle(T,B))}),applyEuler:(k4=new j9,function(T){return this.applyQuaternion(k4.setFromEuler(T))}),applyQuaternion:function(T){var B=this.x,G=this.y,H=this.z,f=T._x,v=T._y,J=T._z,M=(T=T._w)*B+v*H-J*G,Y=T*G+J*B-f*H,m=T*H+f*G-v*B;return this.x=M*T+(B=-f*B-v*G-J*H)*-f+Y*-J-m*-v,this.y=Y*T+B*-v+m*-f-M*-J,this.z=m*T+B*-J+M*-v-Y*-f,this},applyMatrix4:function(T){var B=this.x,G=this.y,H=this.z,f=1/((T=T.el)[3]*B+T[7]*G+T[11]*H+T[15]);return this.x=(T[0]*B+T[4]*G+T[8]*H+T[12])*f,this.y=(T[1]*B+T[5]*G+T[9]*H+T[13])*f,this.z=(T[2]*B+T[6]*G+T[10]*H+T[14])*f,this},applyMatrix3:function(T){var B=this.x,G=this.y,H=this.z,T=T.el;return this.x=T[0]*B+T[3]*G+T[6]*H,this.y=T[1]*B+T[4]*G+T[7]*H,this.z=T[2]*B+T[5]*G+T[8]*H,this},applyNormalMatrix:function(T){return this.applyMatrix3(T).normalize()},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},reflect:(P4=new Zt,function(T){return this.sub(P4.copy(T).multiplyScalar(2*this.dot(T)))}),dot:function(T){return this.x*T.x+this.y*T.y+this.z*T.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){var T=this.length();return T?this.multiplyScalar(1/T):this},setLength:function(T){return this.normalize().multiplyScalar(T)},fromArray:function(T,B){return this.x=T[B=B===Ht?0:B],this.y=T[B+1],this.z=T[B+2],this},toArray:function(T,B){return(T=T===Ht?[0,0,0]:T)[B=B===Ht?0:B]=this.x,T[B+1]=this.y,T[B+2]=this.z,T},cross:function(T){return this.crossVectors(this,T)},angleTo:function(T){return 1+1e-6<(T=this.dot(T)/Math.sqrt(this.lengthSq()*T.lengthSq()))||T<-1-1e-6?0:Math.acos(l.clamp(T,-1,1))},lerp:function(T,B){return this.x+=(T.x-this.x)*B,this.y+=(T.y-this.y)*B,this.z+=(T.z-this.z)*B,this},lerpVectors:function(T,B,G){return this.subVectors(B,T).multiplyScalar(G).add(T)},crossVectors:function(T,B){var G=T.x,H=T.y,T=T.z,f=B.x,v=B.y,B=B.z;return this.x=H*B-T*v,this.y=T*f-G*B,this.z=G*v-H*f,this},min:function(T){return this.x=Math.min(this.x,T.x),this.y=Math.min(this.y,T.y),this.z=Math.min(this.z,T.z),this},max:function(T){return this.x=Math.max(this.x,T.x),this.y=Math.max(this.y,T.y),this.z=Math.max(this.z,T.z),this},setFromMatrixPosition:function(T){return this.setFromMatrixColumn(T,3)},setFromMatrixScale:function(T){var B=this.setFromMatrixColumn(T,0).length(),G=this.setFromMatrixColumn(T,1).length(),T=this.setFromMatrixColumn(T,2).length();return this.x=B,this.y=G,this.z=T,this},setFromMatrixColumn:function(T,B){return this.fromArray(T.el,4*B)}}),Zt.UP=new Zt(0,1,0),Zt.AxisX=new Zt(1,0,0),Zt.AxisY=new Zt(0,1,0),Zt.AxisZ=new Zt(0,0,1),Zt.normalizeArray=(a4=new Zt,function(T){return a4.copy(T).normalize().toArray()}),TX=new Zt,function(T,B){return(B=B||TX).x=T[0],B.y=T[1],B.z=T[2],B}),b=L.Math.Vector2=function(T,B,G){"object"==typeof T&&(T=T.x!=Ht?(B=T.y,G=T.e,T.x):(G=T[2],B=T[1],T[0])),this.set(T||0,B||0,G)},G=(b.prototype={},(b.prototype.constructor=b).prototype.isVector2=!0,N.defineProperties(b.prototype,{width:{get:function(){return this.x},set:function(T){this.x=T}},height:{get:function(){return this.y},set:function(T){this.y=T}}}),b.prototype.clone=function(){return new b(this.x,this.y,this.e)},b.prototype.copy=function(T){return this.set(T.x,T.y,T.e),this},b.prototype.equals=function(T){return T.x===this.x&&T.y===this.y&&T.e===this.e},b.prototype.set=function(T,B,G){return this.x=T||0,this.y=B||(0!==B?this.x:0),G!=Ht&&(this.e=G),this},b.prototype.setScalar=function(T){return this.x=T,this.y=T,this.e=T,this},b.prototype.setX=function(T){return this.x=T||0,this},b.prototype.setY=function(T){return this.y=T||0,this},b.prototype.setE=function(T){return this.e=T||0,this},b.prototype.add=function(T){return this.x+=T.x,this.y+=T.y,this},b.prototype.addVectors=function(T,B){return this.x=T.x+B.x,this.y=T.y+B.y,this},b.prototype.addScalar=function(T){return this.x+=T,this.y+=T,this},b.prototype.addScaledVector=function(T,B){return this.x+=T.x*B,this.y+=T.y*B,this},b.prototype.sub=function(T){return this.x-=T.x,this.y-=T.y,this},b.prototype.subScalar=function(T){return this.x-=T,this.y-=T,this},b.prototype.subVectors=function(T,B){return this.x=T.x-B.x,this.y=T.y-B.y,this},b.prototype.multiply=function(T){return this.x*=T.x,this.y*=T.y,this},b.prototype.multiplyScalar=function(T){return this.x*=T,this.y*=T,this},b.prototype.divide=function(T){return this.x/=T.x,this.y/=T.y,this},b.prototype.divideScalar=function(T){return this.multiplyScalar(1/T)},b.prototype.min=function(T){return this.x=Math.min(this.x,T.x),this.y=Math.min(this.y,T.y),this},b.prototype.max=function(T){return this.x=Math.max(this.x,T.x),this.y=Math.max(this.y,T.y),this},b.prototype.fromArray=function(T,B){return this.x=T[B=B===Ht?0:B],this.y=T[B+1],this},b.prototype.clamp=function(T,B){return this.x=Math.max(T.x,Math.min(B.x,this.x)),this.y=Math.max(T.y,Math.min(B.y,this.y)),this},b.prototype.clampScalar=function(T,B){return BX===Ht&&(BX=new b,GX=new b),BX.set(T,T),GX.set(B,B),this.clamp(BX,GX)},b.prototype.clampLength=function(T,B){var G=this.length();return this.multiplyScalar(Math.max(T,Math.min(B,G))/G)},b.prototype.dot=function(T){return this.x*T.x+this.y*T.y},b.prototype.cross=function(T){return this.x*T.y-this.y*T.x},b.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},b.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},b.prototype.normalize=function(){return this.divideScalar(this.length())},b.prototype.angle=function(){var T=Math.atan2(this.y,this.x);return T<0&&(T+=2*Math.PI),T},b.prototype.distanceTo=function(T){return Math.sqrt(this.distanceToSquared(T))},b.prototype.distanceToSquared=function(T){var B=this.x-T.x;return B*B+(T=this.y-T.y)*T},b.prototype.isNearEnough=function(T){return this.distanceToSquared(T)<1e-8},b.prototype.setLength=function(T){var B=this.length();return B?this.multiplyScalar(T/B):this},b.prototype.lerp=function(T,B){return this.x+=(T.x-this.x)*B,this.y+=(T.y-this.y)*B,"number"==typeof T.e&&"number"==typeof this.e&&(this.e+=(T.e-this.e)*B),this},b.prototype.lerpVectors=function(T,B,G){return this.subVectors(B,T).multiplyScalar(G).add(T)},b.prototype.rotateAround=function(T,B){var G=T?T.x:0,T=T?T.y:0,H=Math.cos(B),B=Math.sin(B),f=this.x-G,v=this.y-T;return this.x=f*H-v*B+G,this.y=f*B+v*H+T,this},L.Math.Matrix3=function(){this.el=[1,0,0,0,1,0,0,0,1]}),U9=(N.assign(G.prototype,{isMatrix3:!0,set:function(T,B,G,H,f,v,J,M,Y){var m=this.el;return m[0]=T,m[1]=H,m[2]=J,m[3]=B,m[4]=f,m[5]=M,m[6]=G,m[7]=v,m[8]=Y,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.el)},copy:function(T){var B=this.el,T=T.el;return B[0]=T[0],B[1]=T[1],B[2]=T[2],B[3]=T[3],B[4]=T[4],B[5]=T[5],B[6]=T[6],B[7]=T[7],B[8]=T[8],this},setFromMatrix4:function(T){return T=T.el,this.set(T[0],T[4],T[8],T[1],T[5],T[9],T[2],T[6],T[10]),this},applyToBufferAttribute:(HX=new Zt,function(T){for(var B=0,G=T.count;B<G;B++)HX.x=T.getX(B),HX.y=T.getY(B),HX.z=T.getZ(B),HX.applyMatrix3(this),T.setXYZ(B,HX.x,HX.y,HX.z);return T}),multiply:function(T){return this.multiplyMatrices(this,T)},premultiply:function(T){return this.multiplyMatrices(T,this)},multiplyMatrices:function(T,B){var T=T.el,B=B.el,G=this.el,H=T[0],f=T[3],v=T[6],J=T[1],M=T[4],Y=T[7],m=T[2],E=T[5],T=T[8],Z=B[0],R=B[3],A=B[6],g=B[1],F=B[4],W=B[7],s=B[2],S=B[5],B=B[8];return G[0]=H*Z+f*g+v*s,G[3]=H*R+f*F+v*S,G[6]=H*A+f*W+v*B,G[1]=J*Z+M*g+Y*s,G[4]=J*R+M*F+Y*S,G[7]=J*A+M*W+Y*B,G[2]=m*Z+E*g+T*s,G[5]=m*R+E*F+T*S,G[8]=m*A+E*W+T*B,this},multiplyScalar:function(T){var B=this.el;return B[0]*=T,B[3]*=T,B[6]*=T,B[1]*=T,B[4]*=T,B[7]*=T,B[2]*=T,B[5]*=T,B[8]*=T,this},determinant:function(){var T=this.el,B=T[0],G=T[1],H=T[2],f=T[3],v=T[4],J=T[5],M=T[6],Y=T[7];return B*v*(T=T[8])-B*J*Y-G*f*T+G*J*M+H*f*Y-H*v*M},getInverse:function(T,B){var T=T.el,G=this.el,H=T[0],f=T[1],v=T[2],J=T[3],M=T[4],Y=T[5],m=T[6],E=T[7],Z=(T=T[8])*M-Y*E,R=Y*m-T*J,A=E*J-M*m,g=H*Z+f*R+v*A;return 0==g?this.identity():(G[0]=Z*(g=1/g),G[1]=(v*E-T*f)*g,G[2]=(Y*f-v*M)*g,G[3]=R*g,G[4]=(T*H-v*m)*g,G[5]=(v*J-Y*H)*g,G[6]=A*g,G[7]=(f*m-E*H)*g,G[8]=(M*H-f*J)*g,this)},transpose:function(){var T=this.el,B=T[1];return T[1]=T[3],T[3]=B,B=T[2],T[2]=T[6],T[6]=B,B=T[5],T[5]=T[7],T[7]=B,this},getNormalMatrix:function(T){return this.setFromMatrix4(T).getInverse(this).transpose()},transposeIntoArray:function(T){var B=this.el;return T[0]=B[0],T[1]=B[3],T[2]=B[6],T[3]=B[1],T[4]=B[4],T[5]=B[7],T[6]=B[2],T[7]=B[5],T[8]=B[8],this},setUvTransform:function(T,B,G,H,f,v,J){var M=Math.cos(f),f=Math.sin(f);this.set(G*M,G*f,-G*(M*v+f*J)+v+T,-H*f,H*M,-H*(-f*v+M*J)+J+B,0,0,1)},scale:function(T,B){var G=this.el;return G[0]*=T,G[3]*=T,G[6]*=T,G[1]*=B,G[4]*=B,G[7]*=B,this},rotate:function(T){var B=Math.cos(T),T=Math.sin(T),G=this.el,H=G[0],f=G[3],v=G[6],J=G[1],M=G[4],Y=G[7];return G[0]=B*H+T*J,G[3]=B*f+T*M,G[6]=B*v+T*Y,G[1]=-T*H+B*J,G[4]=-T*f+B*M,G[7]=-T*v+B*Y,this},translate:function(T,B){var G=this.el;return G[0]+=T*G[2],G[3]+=T*G[5],G[6]+=T*G[8],G[1]+=B*G[2],G[4]+=B*G[5],G[7]+=B*G[8],this},equals:function(T){for(var B=this.el,G=T.el,H=0;H<9;H++)if(B[H]!==G[H])return!1;return!0},fromArray:function(T,B){B===Ht&&(B=0);for(var G=0;G<9;G++)this.el[G]=T[G+B];return this},getElements:function(){return this.el},toArray:function(T,B){var G=this.el;return(T=T===Ht?[]:T)[B=B===Ht?0:B]=G[0],T[B+1]=G[1],T[B+2]=G[2],T[B+3]=G[3],T[B+4]=G[4],T[B+5]=G[5],T[B+6]=G[6],T[B+7]=G[7],T[B+8]=G[8],T}}),L.Math.Plane=function(T,B){this.normal=T!==Ht?T:new Zt(1,0,0),this.constant=B!==Ht?B:0}),l9=(N.assign(U9.prototype,{set:function(T,B){return this.normal.copy(T),this.constant=B,this},setComponents:function(T,B,G,H){return this.normal.set(T,B,G),this.constant=H,this},setFromNormalAndCoplanarPoint:function(T,B){return this.normal.copy(T),this.constant=-B.dot(this.normal),this},setFromCoplanarPoints:(MX=new Zt,YX=new Zt,function(T,B,G){return G=MX.subVectors(G,B).cross(YX.subVectors(T,B)).normalize(),this.setFromNormalAndCoplanarPoint(G,T),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(T){return this.normal.copy(T.normal),this.constant=T.constant,this},normalize:function(){var T=1/this.normal.length();return this.normal.multiplyScalar(T),this.constant*=T,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(T){return this.normal.dot(T)+this.constant},distanceToSphere:function(T){return this.distanceToPoint(T.center)-T.radius},projectPoint:function(T,B){return(B=B===Ht?new Zt:B).copy(this.normal).multiplyScalar(-this.distanceToPoint(T)).add(T)},intersectLine:(JX=new Zt,function(T,B){B===Ht&&(B=new Zt);var G=T.delta(JX),H=this.normal.dot(G);return 0===H?0===this.distanceToPoint(T.start)?B.copy(T.start):Ht:(H=-(T.start.dot(this.normal)+this.constant)/H)<0||1<H?Ht:B.copy(G).multiplyScalar(H).add(T.start)}),intersectsLine:function(T){var B=this.distanceToPoint(T.start),T=this.distanceToPoint(T.end);return B<0&&0<T||T<0&&0<B},intersectsBox:function(T){return T.intersectsPlane(this)},intersectsSphere:function(T){return T.intersectsPlane(this)},coplanarPoint:function(T){return(T=T===Ht?new Zt:T).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(fX=new Zt,vX=new G,function(T,B){return B=B||vX.getNormalMatrix(T),T=this.coplanarPoint(fX).applyMatrix4(T),B=this.normal.applyMatrix3(B).normalize(),this.constant=-T.dot(B),this}),translate:function(T){return this.constant-=T.dot(this.normal),this},equals:function(T){return T.normal.equals(this.normal)&&T.constant===this.constant}}),L.Math.Ray=function(T,B){this.origin=T!==Ht?T.clone():new Zt,this.direction=B!==Ht?B.clone():new Zt}),b9=(N.assign(l9.prototype,{set:function(T,B){return this.origin.copy(T),this.direction.copy(B),this},clone:function(){return(new this.constructor).copy(this)},copy:function(T){return this.origin.copy(T.origin),this.direction.copy(T.direction),this.maxHitLen=T.maxHitLen,this},at:function(T,B){return(B||new Zt).copy(this.direction).multiplyScalar(T).add(this.origin)},setMaxHitLength:function(T){this.maxHitLen=T},lookAt:function(T){return this.direction.copy(T).sub(this.origin).normalize(),this},applyMatrix4:function(T){var B,G=this.maxHitLen;return G&&(B=this.direction.clone().multiplyScalar(G).add(this.origin)).applyMatrix4(T),this.origin.applyMatrix4(T),this.direction.transformDirection(T),G&&(this.maxHitLen=this.origin.distanceTo(B)),this},distanceToPlane:function(T){var B=T.normal.dot(this.direction);return 0===B?0===T.distanceToPoint(this.origin)?0:null:0<=(T=-(this.origin.dot(T.normal)+T.constant)/B)?T:null},intersectPlane:function(T,B){return null===(T=this.distanceToPlane(T))?null:this.at(T,B)},intersectSphere:(FX=new Zt,function(T,B){FX.subVectors(T.center,this.origin);var G=FX.dot(this.direction),H=FX.dot(FX)-G*G;return(T=T.radius*T.radius)<H?null:(H=G-(T=Math.sqrt(T-H)),G+=T,H<0&&G<0?null:H<0?this.at(G,B):this.at(H,B))}),intersectEllipsoid:(AX=new Zt,gX=new Zt,function(T,B){AX.subVectors(T.center,this.origin),AX.divide(T.radius),gX.divideVectors(this.direction,T.radius);var T=gX.lengthSq(),G=AX.dot(gX),H=AX.dot(AX)*T-G*G;if(T<H)return null;var f=(G-(H=Math.sqrt(T-H)))/T,G=(G+H)/T;return f<0&&G<0?null:f<0?this.at(G,B):this.at(f,B)}),intersectBox:function(T,B){var G,H,f,v=1/this.direction.x,J=1/this.direction.y,M=1/this.direction.z,Y=this.origin,v=0<=v?(G=(T.min.x-Y.x)*v,(T.max.x-Y.x)*v):(G=(T.max.x-Y.x)*v,(T.min.x-Y.x)*v);return(J=0<=J?(f=(T.min.y-Y.y)*J,(T.max.y-Y.y)*J):(f=(T.max.y-Y.y)*J,(T.min.y-Y.y)*J))<G||v<f?null:((G<f||G!=G)&&(G=f),(J<v||v!=v)&&(v=J),(f=0<=M?(H=(T.min.z-Y.z)*M,(T.max.z-Y.z)*M):(H=(T.max.z-Y.z)*M,(T.min.z-Y.z)*M))<G||v<H||(v=f<v||v!=v?f:v)<0?null:(J=0<=(G=G<H||G!=G?H:G)?G:v,(T=this.maxHitLen)&&T<J?null:this.at(J,B)))},intersectTriangle:(mX=new Zt,EX=new Zt,ZX=new Zt,RX=new Zt,function(T,B,G,H,f,v){if(EX.subVectors(B,T),ZX.subVectors(G,T),RX.crossVectors(EX,ZX),(B=f||0)<(G=this.direction.dot(RX))){if(H)return null}else if(-B<=G)return null;return f=1/G,mX.subVectors(this.origin,T),(H=f*this.direction.dot(ZX.crossVectors(mX,ZX)))<-B||(G=f*this.direction.dot(EX.cross(mX)))<-B||1+B<H+G||(T=-f*mX.dot(RX))<0||(B=this.maxHitLen)&&B<T?null:this.at(T,v)})}),L.Math.Box3=function(T,B){this.min=T!==Ht?T:new Zt(1/0,1/0,1/0),this.max=B!==Ht?B:new Zt(-1/0,-1/0,-1/0)}),r4=(N.assign(b9.prototype,{set:function(T,B){return this.min.copy(T),this.max.copy(B),this},setFromArray:function(T){for(var B=1/0,G=1/0,H=1/0,f=-1/0,v=-1/0,J=-1/0,M=0,Y=T.length;M<Y;M+=3){var m=T[M],E=T[M+1],Z=T[M+2];m<B&&(B=m),E<G&&(G=E),Z<H&&(H=Z),f<m&&(f=m),v<E&&(v=E),J<Z&&(J=Z)}return this.min.set(B,G,H),this.max.set(f,v,J),this},setFromPoints:function(T){this.makeEmpty();for(var B=0,G=T.length;B<G;B++)this.expandByPoint(T[B]);return this},clone:function(){return(new this.constructor).copy(this)},intersectsBox:function(T){return!(T.max.x<this.min.x||T.min.x>this.max.x||T.max.y<this.min.y||T.min.y>this.max.y||T.max.z<this.min.z||T.min.z>this.max.z)},copy:function(T){return this.min.copy(T.min),this.max.copy(T.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(T){return this.isEmpty()?T.set(0,0,0):T.addVectors(this.min,this.max).multiplyScalar(.5)},expandByPoint:function(T){return this.min.min(T),this.max.max(T),this},expandByBox:function(T){return this.min.min(T.min),this.max.max(T.max),this},applyMatrix4:(WX=[new Zt,new Zt,new Zt,new Zt,new Zt,new Zt,new Zt,new Zt],function(T){return this.isEmpty()||(WX[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(T),WX[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(T),WX[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(T),WX[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(T),WX[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(T),WX[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(T),WX[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(T),WX[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(T),this.setFromPoints(WX)),this})}),L.Math.Sphere=function(T,B){this.center=T!==Ht?T:new Zt,this.radius=B!==Ht?B:0}),X4=(N.assign(r4.prototype,{set:function(T,B){return this.center.copy(T),this.radius=B,this},setFromPoints:(sX=new b9,function(T,B){for(var G=this.center,H=(B!==Ht?G.copy(B):sX.setFromPoints(T).getCenter(G),0),f=0,v=T.length;f<v;f++)H=Math.max(H,G.distanceToSquared(T[f]));return this.radius=Math.sqrt(H),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(T){return this.center.copy(T.center),this.radius=T.radius,this},empty:function(){return this.radius<=0},containsPoint:function(T){return T.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(T){return T.distanceTo(this.center)-this.radius},intersectsSphere:function(T){var B=this.radius+T.radius;return T.center.distanceToSquared(this.center)<=B*B},intersectsBox:function(T){return T.intersectsSphere(this)},intersectsPlane:function(T){return Math.abs(T.distanceToPoint(this.center))<=this.radius},clampPoint:function(T,B){var G=this.center.distanceToSquared(T);return(B=B===Ht?new Zt:B).copy(T),G>this.radius*this.radius&&(B.sub(this.center).normalize(),B.multiplyScalar(this.radius).add(this.center)),B},getBoundingBox:function(T){return(T=T===Ht?new b9:T).set(this.center,this.center),T.expandByScalar(this.radius),T},applyMatrix4:function(T){return this.center.applyMatrix4(T),this.radius=this.radius*T.getMaxScaleOnAxis(),this},translate:function(T){return this.center.add(T),this},equals:function(T){return T.center.equals(this.center)&&T.radius===this.radius}}),L.Math.Frustum=function(T,B,G,H,f,v){this.planes=[T!==Ht?T:new U9,B!==Ht?B:new U9,G!==Ht?G:new U9,H!==Ht?H:new U9,f!==Ht?f:new U9,v!==Ht?v:new U9]}),K=(N.assign(X4.prototype,{set:function(T,B,G,H,f,v){var J=this.planes;return J[0].copy(T),J[1].copy(B),J[2].copy(G),J[3].copy(H),J[4].copy(f),J[5].copy(v),this},clone:function(){return(new this.constructor).copy(this)},copy:function(T){for(var B=this.planes,G=0;G<6;G++)B[G].copy(T.planes[G]);return this},setFromMatrix:function(T){var B=this.planes,G=(T=T.el)[0],H=T[1],f=T[2],v=T[3],J=T[4],M=T[5],Y=T[6],m=T[7],E=T[8],Z=T[9],R=T[10],A=T[11],g=T[12],F=T[13],W=T[14],T=T[15];return B[0].setComponents(v-G,m-J,A-E,T-g).normalize(),B[1].setComponents(v+G,m+J,A+E,T+g).normalize(),B[2].setComponents(v+H,m+M,A+Z,T+F).normalize(),B[3].setComponents(v-H,m-M,A-Z,T-F).normalize(),B[4].setComponents(v-f,m-Y,A-R,T-W).normalize(),B[5].setComponents(v+f,m+Y,A+R,T+W).normalize(),this},intersectsObject:(xX=new r4,function(T){var B=T.geometry;return null===B.boundingSphere&&B.computeBoundingSphere(),xX.copy(B.boundingSphere).applyMatrix4(T.matrixWorld),this.intersectsSphere(xX)}),intersectsSprite:(yX=new r4,function(T){return yX.center.set(0,0,0),yX.radius=.7071067811865476,yX.applyMatrix4(T.matrixWorld),this.intersectsSphere(yX)}),intersectsSphere:function(T){for(var B=this.planes,G=T.center,H=-T.radius,f=0;f<6;f++)if(B[f].distanceToPoint(G)<H)return!1;return!0},intersectsBox:(SX=new Zt,function(T){for(var B=this.planes,G=0;G<6;G++){var H=B[G];if(SX.x=(0<H.normal.x?T.max:T.min).x,SX.y=(0<H.normal.y?T.max:T.min).y,SX.z=(0<H.normal.z?T.max:T.min).z,H.distanceToPoint(SX)<0)return!1}return!0}),containsPoint:function(T){for(var B=this.planes,G=0;G<6;G++)if(B[G].distanceToPoint(T)<0)return!1;return!0}}),L.Math.Matrix4=function(){this.el=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}),K9=(N.assign(K.prototype,{isMatrix4:!0,set:function(T,B,G,H,f,v,J,M,Y,m,E,Z,R,A,g,F){var W=this.el;return W[0]=T,W[4]=B,W[8]=G,W[12]=H,W[1]=f,W[5]=v,W[9]=J,W[13]=M,W[2]=Y,W[6]=m,W[10]=E,W[14]=Z,W[3]=R,W[7]=A,W[11]=g,W[15]=F,this},clone:function(){return(new K).fromArray(this.el)},fromArray:function(T,B){B===Ht&&(B=0);for(var G=this.el,H=0;H<16;H++)G[H]=T[H+B];return this},getElements:function(){return this.el},scale:function(T){var B=this.el,G=T.x,H=T.y,T=T.z;return B[0]*=G,B[4]*=H,B[8]*=T,B[1]*=G,B[5]*=H,B[9]*=T,B[2]*=G,B[6]*=H,B[10]*=T,B[3]*=G,B[7]*=H,B[11]*=T,this},translate:function(T){var B=this.el,G=T.x||0,H=T.y||0,T=T.z||0;return B[12]+=B[0]*G+B[4]*H+B[8]*T,B[13]+=B[1]*G+B[5]*H+B[9]*T,B[14]+=B[2]*G+B[6]*H+B[10]*T,B[15]+=B[3]*G+B[7]*H+B[11]*T,this},rotate:(DX=new K,function(T){return DX.makeRotationFromQuaternion(T),this.multiply(DX)}),makeRotationFromEuler:function(T){var B,G,H,f,v,J,M,Y,m,E,Z,R,A=this.el,g=T._x,F=T._y,W=T._z,T=T._order,s=Math.cos(g),g=Math.sin(g),S=Math.cos(F),F=Math.sin(F),y=Math.cos(W),W=Math.sin(W);return"XYZ"===T?(v=s*y,J=s*W,M=g*y,Y=g*W,A[0]=S*y,A[4]=-S*W,A[8]=F,A[1]=J+M*F,A[5]=v-Y*F,A[9]=-g*S,A[2]=Y-v*F,A[6]=M+J*F,A[10]=s*S):"YXZ"===T?(G=S*W,H=F*y,A[0]=(B=S*y)+(f=F*W)*g,A[4]=H*g-G,A[8]=s*F,A[1]=s*W,A[5]=s*y,A[9]=-g,A[2]=G*g-H,A[6]=f+B*g,A[10]=s*S):"ZXY"===T?(G=S*W,H=F*y,A[0]=(B=S*y)-(f=F*W)*g,A[4]=-s*W,A[8]=H+G*g,A[1]=G+H*g,A[5]=s*y,A[9]=f-B*g,A[2]=-s*F,A[6]=g,A[10]=s*S):"ZYX"===T?(v=s*y,J=s*W,M=g*y,Y=g*W,A[0]=S*y,A[4]=M*F-J,A[8]=v*F+Y,A[1]=S*W,A[5]=Y*F+v,A[9]=J*F-M,A[2]=-F,A[6]=g*S,A[10]=s*S):"YZX"===T?(m=s*S,E=s*F,Z=g*S,R=g*F,A[0]=S*y,A[4]=R-m*W,A[8]=Z*W+E,A[1]=W,A[5]=s*y,A[9]=-g*y,A[2]=-F*y,A[6]=E*W+Z,A[10]=m-R*W):"XZY"===T&&(m=s*S,E=s*F,Z=g*S,R=g*F,A[0]=S*y,A[4]=-W,A[8]=F*y,A[1]=m*W+R,A[5]=s*y,A[9]=E*W-Z,A[2]=Z*W-E,A[6]=g*y,A[10]=R*W+m),A[3]=0,A[7]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,this},makeRotationFromQuaternion:function(T){var B=this.el,G=T._x,H=T._y,f=T._z,v=f+f,J=G*(m=G+G),M=G*(E=H+H),G=G*v,Y=H*E,H=H*v,m=(T=T._w)*m,E=T*E,T=T*v;return B[0]=1-(Y+(f=f*v)),B[4]=M-T,B[8]=G+E,B[1]=M+T,B[5]=1-(J+f),B[9]=H-m,B[2]=G-E,B[6]=H+m,B[10]=1-(J+Y),B[3]=0,B[7]=0,B[11]=0,B[12]=0,B[13]=0,B[14]=0,B[15]=1,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},getInverse:function(T,B){var G=this.el,H=(T=T.el)[0],f=T[1],v=T[2],J=T[3],M=T[4],Y=T[5],m=T[6],E=T[7],Z=T[8],R=T[9],A=T[10],g=T[11],F=T[12],W=T[13],s=T[14],S=R*s*E-W*A*E+W*m*g-Y*s*g-R*m*(T=T[15])+Y*A*T,y=F*A*E-Z*s*E-F*m*g+M*s*g+Z*m*T-M*A*T,x=Z*W*E-F*R*E+F*Y*g-M*W*g-Z*Y*T+M*R*T,w=F*R*m-Z*W*m-F*Y*A+M*W*A+Z*Y*s-M*R*s,O=H*S+f*y+v*x+J*w;return 0==O?this.identity():(G[0]=S*(O=1/O),G[1]=(W*A*J-R*s*J-W*v*g+f*s*g+R*v*T-f*A*T)*O,G[2]=(Y*s*J-W*m*J+W*v*E-f*s*E-Y*v*T+f*m*T)*O,G[3]=(R*m*J-Y*A*J-R*v*E+f*A*E+Y*v*g-f*m*g)*O,G[4]=y*O,G[5]=(Z*s*J-F*A*J+F*v*g-H*s*g-Z*v*T+H*A*T)*O,G[6]=(F*m*J-M*s*J-F*v*E+H*s*E+M*v*T-H*m*T)*O,G[7]=(M*A*J-Z*m*J+Z*v*E-H*A*E-M*v*g+H*m*g)*O,G[8]=x*O,G[9]=(F*R*J-Z*W*J-F*f*g+H*W*g+Z*f*T-H*R*T)*O,G[10]=(M*W*J-F*Y*J+F*f*E-H*W*E-M*f*T+H*Y*T)*O,G[11]=(Z*Y*J-M*R*J-Z*f*E+H*R*E+M*f*g-H*Y*g)*O,G[12]=w*O,G[13]=(Z*W*v-F*R*v+F*f*A-H*W*A-Z*f*s+H*R*s)*O,G[14]=(F*Y*v-M*W*v-F*f*m+H*W*m+M*f*s-H*Y*s)*O,G[15]=(M*R*v-Z*Y*v+Z*f*m-H*R*m-M*f*A+H*Y*A)*O,this)},invert:function(){return this.getInverse(this)},makeRotationAxis:function(T,B){var G=Math.cos(B),B=Math.sin(B),H=1-G,f=T.x,v=T.y,T=T.z,J=H*f,M=H*v;return this.set(J*f+G,J*v-B*T,J*T+B*v,0,J*v+B*T,M*v+G,M*T-B*f,0,J*T-B*v,M*T+B*f,H*T*T+G,0,0,0,0,1),this},multiply:function(T){return this.multiplyMatrices(this,T)},premultiply:function(T){return this.multiplyMatrices(T,this)},multiplyMatrices:function(T,B){var T=T.el||T,B=B.el||B,G=this.el,H=T[0],f=T[4],v=T[8],J=T[12],M=T[1],Y=T[5],m=T[9],E=T[13],Z=T[2],R=T[6],A=T[10],g=T[14],F=T[3],W=T[7],s=T[11],T=T[15],S=B[0],y=B[4],x=B[8],w=B[12],O=B[1],_=B[5],p=B[9],q=B[13],u=B[2],i=B[6],I=B[10],D=B[14],h=B[3],o=B[7],e=B[11],B=B[15];return G[0]=H*S+f*O+v*u+J*h,G[4]=H*y+f*_+v*i+J*o,G[8]=H*x+f*p+v*I+J*e,G[12]=H*w+f*q+v*D+J*B,G[1]=M*S+Y*O+m*u+E*h,G[5]=M*y+Y*_+m*i+E*o,G[9]=M*x+Y*p+m*I+E*e,G[13]=M*w+Y*q+m*D+E*B,G[2]=Z*S+R*O+A*u+g*h,G[6]=Z*y+R*_+A*i+g*o,G[10]=Z*x+R*p+A*I+g*e,G[14]=Z*w+R*q+A*D+g*B,G[3]=F*S+W*O+s*u+T*h,G[7]=F*y+W*_+s*i+T*o,G[11]=F*x+W*p+s*I+T*e,G[15]=F*w+W*q+s*D+T*B,this},lookAt:(IX=new Zt,function(T,B,G){return IX.subVectors(T,B),this.lookAtDirection(IX,G)}),lookAtDirection:(qX=new Zt,uX=new Zt,iX=new Zt,function(T,B){B=B||Zt.UP;var G=this.el;return iX.copy(T),0===iX.lengthSq()&&(iX.z=1),iX.normalize(),qX.crossVectors(B,iX),0===qX.lengthSq()&&(1===Math.abs(B.z)?iX.x+=1e-4:iX.z+=1e-4,iX.normalize(),qX.crossVectors(B,iX)),qX.normalize(),uX.crossVectors(iX,qX),G[0]=qX.x,G[4]=uX.x,G[8]=iX.x,G[1]=qX.y,G[5]=uX.y,G[9]=iX.y,G[2]=qX.z,G[6]=uX.z,G[10]=iX.z,this}),extractScale:function(T){pX===Ht&&(pX=new Zt),T===Ht&&(T=new Zt);var B=pX.setFromMatrixColumn(this,0).length(),G=pX.setFromMatrixColumn(this,1).length(),H=pX.setFromMatrixColumn(this,2).length();return T.set(B,G,H),T},extractRotation:function(T){_X===Ht&&(_X=new Zt),T===Ht&&(T=new K);var B=this.el,G=T.el,H=1/_X.setFromMatrixColumn(T,0).length(),f=1/_X.setFromMatrixColumn(T,1).length(),T=1/_X.setFromMatrixColumn(T,2).length();return B[0]=G[0]*H,B[1]=G[1]*H,B[2]=G[2]*H,B[4]=G[4]*f,B[5]=G[5]*f,B[6]=G[6]*f,B[8]=G[8]*T,B[9]=G[9]*T,B[10]=G[10]*T,this},multiplyScalar:function(T){var B=this.el;return B[0]*=T,B[4]*=T,B[8]*=T,B[12]*=T,B[1]*=T,B[5]*=T,B[9]*=T,B[13]*=T,B[2]*=T,B[6]*=T,B[10]*=T,B[14]*=T,B[3]*=T,B[7]*=T,B[11]*=T,B[15]*=T,this},getPosition:function(T){return(T=T===Ht?new Zt:T).setFromMatrixColumn(this,3)},setPosition:function(T){var B=this.el;return B[12]=T.x,B[13]=T.y,B[14]=T.z,this},copyPosition:function(T){var B=this.el,T=T.el;return B[12]=T[12],B[13]=T[13],B[14]=T[14],this},toArray:function(T,B){var G=this.el;return(T=T===Ht?[]:T)[B=B===Ht?0:B]=G[0],T[B+1]=G[1],T[B+2]=G[2],T[B+3]=G[3],T[B+4]=G[4],T[B+5]=G[5],T[B+6]=G[6],T[B+7]=G[7],T[B+8]=G[8],T[B+9]=G[9],T[B+10]=G[10],T[B+11]=G[11],T[B+12]=G[12],T[B+13]=G[13],T[B+14]=G[14],T[B+15]=G[15],T},determinant:function(){var T=this.el||this,B=T[0],G=T[4],H=T[8],f=T[12],v=T[1],J=T[5],M=T[9],Y=T[13],m=T[2],E=T[6],Z=T[10],R=T[14];return T[3]*(+f*M*E-H*Y*E-f*J*Z+G*Y*Z+H*J*R-G*M*R)+T[7]*(+B*M*R-B*Y*Z+f*v*Z-H*v*R+H*Y*m-f*M*m)+T[11]*(+B*Y*E-B*J*R-f*v*E+G*v*R+f*J*m-G*Y*m)+T[15]*(-H*J*m-B*M*E+B*J*Z+H*v*E-G*v*Z+G*M*m)},copy:function(T){var B=this.el,T=T.el||T;return B[0]=T[0],B[1]=T[1],B[2]=T[2],B[3]=T[3],B[4]=T[4],B[5]=T[5],B[6]=T[6],B[7]=T[7],B[8]=T[8],B[9]=T[9],B[10]=T[10],B[11]=T[11],B[12]=T[12],B[13]=T[13],B[14]=T[14],B[15]=T[15],this},composeFromArray:function(T,B,G){var H,f,v,J,M,Y,m,E,Z,B=B?(H=B[0],f=B[1],v=B[2],B[3]):(v=f=H=0,1);return G?(J=G[0],M=G[1],Y=G[2]):J=M=Y=1,T?(m=T[0],E=T[1],Z=T[2]):m=E=Z=0,this._composeImpl(H,f,v,B,J,M,Y,m,E,Z)},compose:function(T,B,G){var H,f,v,J,M,Y,m,E,Z,B=B?(H=B._x,f=B._y,v=B._z,B._w):(v=f=H=0,1);return G?(J=G.x,M=G.y,Y=G.z):J=M=Y=1,T?(m=T.x,E=T.y,Z=T.z):m=E=Z=0,this._composeImpl(H,f,v,B,J,M,Y,m,E,Z)},_composeImpl:function(T,B,G,H,f,v,J,M,Y,m){var E=this.el,Z=G+G,R=T*(F=T+T),A=T*(W=B+B),T=T*Z,g=B*W,B=B*Z,G=G*Z,F=H*F,W=H*W,H=H*Z;return E[0]=(1-(g+G))*f,E[1]=(A+H)*f,E[2]=(T-W)*f,E[3]=0,E[4]=(A-H)*v,E[5]=(1-(R+G))*v,E[6]=(B+F)*v,E[7]=0,E[8]=(T+W)*J,E[9]=(B-F)*J,E[10]=(1-(R+g))*J,E[11]=0,E[12]=M,E[13]=Y,E[14]=m,E[15]=1,this},decompose:(wX=new Zt,OX=new K,function(T,B,G){var H=this.el,f=wX.set(H[0],H[1],H[2]).length(),v=wX.set(H[4],H[5],H[6]).length(),J=wX.set(H[8],H[9],H[10]).length(),T=(this.determinant()<0&&(f=-f),T.x=H[12],T.y=H[13],T.z=H[14],OX.copy(this),1/f),H=1/v,M=1/J;return OX.el[0]*=T,OX.el[1]*=T,OX.el[2]*=T,OX.el[4]*=H,OX.el[5]*=H,OX.el[6]*=H,OX.el[8]*=M,OX.el[9]*=M,OX.el[10]*=M,B.setFromRotationMatrix(OX),G.x=f,G.y=v,G.z=J,this}),equals:function(T){for(var B=this.el,G=T.el,H=0;H<16;H++)if(B[H]!==G[H])return!1;return!0},transpose:function(){var T=this.el,B=T[1];return T[1]=T[4],T[4]=B,B=T[2],T[2]=T[8],T[8]=B,B=T[6],T[6]=T[9],T[9]=B,B=T[3],T[3]=T[12],T[12]=B,B=T[7],T[7]=T[13],T[13]=B,B=T[11],T[11]=T[14],T[14]=B,this}}),new K),z9=new K,n9=(K.determinantOfArray=(hX=L.Math.Matrix4.prototype.determinant,function(T){return T?hX.call(T):0}),K.multiplyMatrixArray=function(T,B,G,H,f,v){var J=T.el||T,B=B.el||B,G=G.el||G,M=B[f+0],Y=B[f+4],m=B[f+8],E=B[f+12],Z=B[f+1],R=B[f+5],A=B[f+9],g=B[f+13],F=B[f+2],W=B[f+6],s=B[f+10],S=B[f+14],y=B[f+3],x=B[f+7],w=B[f+11],B=B[f+15],f=G[v+0],O=G[v+4],_=G[v+8],p=G[v+12],q=G[v+1],u=G[v+5],i=G[v+9],I=G[v+13],D=G[v+2],h=G[v+6],o=G[v+10],e=G[v+14],c=G[v+3],t=G[v+7],d=G[v+11],G=G[v+15];return J[H+0]=M*f+Y*q+m*D+E*c,J[H+4]=M*O+Y*u+m*h+E*t,J[H+8]=M*_+Y*i+m*o+E*d,J[H+12]=M*p+Y*I+m*e+E*G,J[H+1]=Z*f+R*q+A*D+g*c,J[H+5]=Z*O+R*u+A*h+g*t,J[H+9]=Z*_+R*i+A*o+g*d,J[H+13]=Z*p+R*I+A*e+g*G,J[H+2]=F*f+W*q+s*D+S*c,J[H+6]=F*O+W*u+s*h+S*t,J[H+10]=F*_+W*i+s*o+S*d,J[H+14]=F*p+W*I+s*e+S*G,J[H+3]=y*f+x*q+w*D+B*c,J[H+7]=y*O+x*u+w*h+B*t,J[H+11]=y*_+x*i+w*o+B*d,J[H+15]=y*p+x*I+w*e+B*G,T},L.Math.Triangle=function(T,B,G){this.a=T!==Ht?T:new Zt,this.b=B!==Ht?B:new Zt,this.c=G!==Ht?G:new Zt}),$9=(N.assign(n9,{barycoordFromPoint:(eX=new Zt,cX=new Zt,tX=new Zt,function(T,B,G,H,f){eX.subVectors(H,B),cX.subVectors(G,B),tX.subVectors(T,B);var H=eX.dot(eX),G=eX.dot(cX),T=eX.dot(tX),B=cX.dot(cX),v=cX.dot(tX),J=H*B-G*G,f=f||new Zt;return 0==J?f.set(-2,-1,-1):f.set(1-(B=(B*T-G*v)*(J=1/J))-(H=(H*v-G*T)*J),H,B)}),uvIntersection:(oX=new Zt,function(T,B,G,H,f,v,J){return n9.barycoordFromPoint(T,B,G,H,oX),f.multiplyScalar(oX.x),v.multiplyScalar(oX.y),J.multiplyScalar(oX.z),f.add(v).add(J),f.clone()})}),L.Math.Euler=function(T,B,G,H,f){this.set(T,B,G,H,f)}),V9=($9.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],$9.DefaultOrder="XYZ",$9.ReverseOrder=(dX={xyz:"ZYX",xzy:"YZX",yxz:"ZXY",yzx:"XZY",zxy:"YXZ",zyx:"XYZ"},function(T){return dX[T]}),N.defineProperties($9.prototype,{x:{get:function(){return this._x},set:function(T){this._x=T,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(T){this._y=T,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(T){this._z=T,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(T){this._order=T,this.onChangeCallback()}}}),N.assign($9.prototype,{set:function(T,B,G,H,f){return m1(T)&&(f=G,H=B,G=T[2],B=T[1],T=T[0]),H?f&&(H=$9.ReverseOrder(H)):H=this._order||"ZYX",this._x=T||0,this._y=B||0,this._z=G||0,this._order=H,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(T){return this._x=T._x,this._y=T._y,this._z=T._z,this._order=T._order,this.onChangeCallback(),this},setFromRotationMatrix:function(T,B,G){var H=L.Math.clamp,f=(T=T.el||T)[0],v=T[4],J=T[8],M=T[1],Y=T[5],m=T[9],E=T[2],Z=T[6],T=T[10];return"XYZ"===(B=B||this._order)?(this._y=Math.asin(H(J,-1,1)),Math.abs(J)<.9999999?(this._x=Math.atan2(-m,T),this._z=Math.atan2(-v,f)):(this._x=Math.atan2(Z,Y),this._z=0)):"YXZ"===B?(this._x=Math.asin(-H(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(J,T),this._z=Math.atan2(M,Y)):(this._y=Math.atan2(-E,f),this._z=0)):"ZXY"===B?(this._x=Math.asin(H(Z,-1,1)),Math.abs(Z)<.9999999?(this._y=Math.atan2(-E,T),this._z=Math.atan2(-v,Y)):(this._y=0,this._z=Math.atan2(M,f))):"ZYX"===B?(this._y=Math.asin(-H(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(Z,T),this._z=Math.atan2(M,f)):(this._x=0,this._z=Math.atan2(-v,Y))):"YZX"===B?(this._z=Math.asin(H(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(-m,Y),this._y=Math.atan2(-E,f)):(this._x=0,this._y=Math.atan2(J,T))):"XZY"===B?(this._z=Math.asin(-H(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(Z,Y),this._y=Math.atan2(J,f)):(this._x=Math.atan2(-m,T),this._y=0)):console.warn("unsupported order: "+B),this._order=B,!1!==G&&this.onChangeCallback(),this},setFromQuaternion:(QX=new K,function(T,B,G){return QX.makeRotationFromQuaternion(T),this.setFromRotationMatrix(QX,B,G)}),setFromVector3:function(T,B){return this.set(T.x,T.y,T.z,B||this._order)},reorder:(NX=new j9,function(T){return NX.setFromEuler(this),this.setFromQuaternion(NX,T)}),equals:function(T){return T._x===this._x&&T._y===this._y&&T._z===this._z&&T._order===this._order},fromArray:function(T){return this._x=T[0],this._y=T[1],this._z=T[2],T[3]!==Ht&&(this._order=T[3]),this.onChangeCallback(),this},toArray:function(T,B){return(T=T===Ht?[]:T)[B=B===Ht?0:B]=this._x,T[B+1]=this._y,T[B+2]=this._z,T[B+3]=this._order,T},toVector3:function(T){return T?T.set(this._x,this._y,this._z):new Zt(this._x,this._y,this._z)},onChange:function(T){return this.onChangeCallback=T,this},onChangeCallback:function(){}}),l.eulerArrayToQuaternionArray=(LX=new j9,jX=new $9,function(T,B){return LX.setFromEuler(jX.fromArray(T)).toArray(B)}),L.Math.Interpolant=function(T,B,G,H){this.parameterPositions=T,this._cachedIndex=0,T=B.length/T.length,G&&(T/=G),this.resultBuffer=H!==Ht?H:new B.constructor(T),this.sampleValues=B,this.valueSize=T,this.settings=null,this.DefaultSettings_={}}),P9=(N.assign(V9.prototype,{evaluate:function(T){var B,G=this.parameterPositions,H=this._cachedIndex,f=G[H],v=G[H-1];T:{B:{G:{H:if(!(T<f)){for(var J=H+2;;){if(f===Ht){if(T<v)break H;return H=G.length,this._cachedIndex=H,this.copySampleValue_(H-1,T,v)}if(H===J)break;if(v=f,T<(f=G[++H]))break B}B=G.length;break G}if(v<=T)break T;var M=G[1];for(T<M&&(H=2,v=M),J=H-2;;){if(v===Ht)return this._cachedIndex=0,this.copySampleValue_(0,T,f);if(H===J)break;if(f=v,(v=G[--H-1])<=T)break B}B=H,H=0}for(;H<B;){var Y=H+B>>>1;T<G[Y]?B=Y:H=1+Y}if(f=G[H],(v=G[H-1])===Ht)return this._cachedIndex=0,this.copySampleValue_(0,T,f);if(f===Ht)return H=G.length,this._cachedIndex=H,this.copySampleValue_(H-1,v,T)}this._cachedIndex=H,this.intervalChanged_(H,v,f)}return this.interpolateImpl(H,v,T,f)},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(T){for(var B=this.resultBuffer,G=this.sampleValues,H=this.valueSize,f=T*H,v=0;v!==H;++v)B[v]=G[f+v];return B},interpolateImpl:function(){},intervalChanged_:function(){}}),(KK.prototype=N.create(V9.prototype)).interpolateImpl=function(T){return this.copySampleValue_(T-1)},(zK.prototype=N.create(V9.prototype)).interpolateImpl=function(T,B,G,H){for(var f=this.resultBuffer,v=this.sampleValues,J=this.valueSize,M=T*J,Y=M-J,m=(G-B)/(H-B),E=1-m,Z=0;Z!==J;++Z)f[Z]=v[Y+Z]*E+v[M+Z]*m;return f},(nK.prototype=N.create(V9.prototype)).interpolateImpl=function(T,B,G,H){for(var f=this.resultBuffer,v=this.sampleValues,J=this.valueSize,M=(G-B)/(H-B),Y=T*J,m=Y+J;Y!==m;Y+=4)j9.slerpFlat(f,0,v,Y-J,v,Y,M);return f},($K.prototype=N.create(V9.prototype)).intervalChanged_=function(T,B,G){var H=this.parameterPositions,f=T-2,v=T+1,J=H[f],M=H[v];if(J===Ht)switch(this.getSettings_().endingStart){case"ZeroSlope":f=T,J=2*B-G;break;case"WrapAround":J=B+H[f=H.length-2]-H[f+1];break;default:f=T,J=G}if(M===Ht)switch(this.getSettings_().endingEnd){case"ZeroSlope":v=T,M=2*G-B;break;case"WrapAround":M=G+H[v=1]-H[0];break;default:v=T-1,M=B}var Y=.5*(G-B),m=this.valueSize;this._weightPrev=Y/(B-J),this._weightNext=Y/(M-G),this._offsetPrev=f*m,this._offsetNext=v*m},$K.prototype.interpolateImpl=function(T,B,G,H){for(var f=this.resultBuffer,v=this.sampleValues,J=this.valueSize,M=T*J,Y=M-J,m=this._offsetPrev,E=this._offsetNext,T=this._weightPrev,Z=this._weightNext,R=-T*(B=(H=(G=(G-B)/(H-B))*G)*G)+2*T*H-T*G,A=(1+T)*B+(-1.5-2*T)*H+(-.5+T)*G+1,g=(-1-Z)*B+(1.5+Z)*H+.5*G,F=Z*B-Z*H,W=0;W!==J;++W)f[W]=R*v[m+W]+A*v[Y+W]+g*v[M+W]+F*v[E+W];return f},(VK.prototype=N.create(V9.prototype)).copySampleValue_=function(T){for(var B=this.resultBuffer,G=this.sampleValues,H=this.valueSize,f=T*H*3+H,v=0;v!==H;v++)B[v]=G[f+v];return B},VK.prototype.interpolateImpl=(rX=new j9,function(T,B,G,H){for(var f=this.resultBuffer,v=this.sampleValues,J=this.valueSize,M=2*J,Y=3*J,m=H-B,E=T*Y,Z=E-Y,R=-2*(B=(G=(H=(G-B)/m)*H)*H)+3*G,A=B-G,g=1-R,F=A-G+H,W=0;W!==J;W++){var s=v[Z+W+J],S=v[Z+W+M]*m,y=v[E+W+J],x=v[E+W]*m;f[W]=g*s+F*S+R*y+A*x}return this.isQuaternion&&rX.fromArray(f).normalize().toArray(f),f}),L.Math.BitArray=function(T){T instanceof P9?this.fromString(T.toString()):"string"==typeof T?this.fromString(T):(this.size=T=T||0,this.data=new Uint32Array(Math.ceil(T/32)))}),k9=(N.assign(P9.prototype,{set:function(T,B,G){var H=T>>5,T=31&T;G&&1<G?(G=8==G?255:4===G?15:3,B?B&=G:B=0,this.data[H]=this.data[H]&~(G<<T)|B<<T):B?this.data[H]|=1<<T:this.data[H]&=~(1<<T)},get:function(T,B){var G=T>>5,T=31&T;return B&&1<B?this.data[G]>>T&(8==B?255:4===B?15:3):0!=(this.data[G]&1<<T)},toString:(XX=["","0","00","000","0000","00000","000000","0000000","00000000"],function(){for(var T,B="",G=0,H=this.data.length;G<H;G++)T=this.data[G].toString(16),B+=XX[8-T.length]+T;return B}),fromString:function(T){var B=T.length/8;this.size=32*B,this.data=new Uint32Array(B);for(var G=0;G<B;G++)this.data[G]=dt(T.substr(8*G,8),16);return this}}),{ms_ac:function(T,B){for(var G=B.ms_ac,H=0;H<G.length;H++)!function(T,G){var H="_"+G;T[H1(G)]=function(){return this[H]},T[f1(G)]=function(T){var B=this[H];this[H]=T,this.fp(G,B,T)}}(T,G[H])},ms_listener:function(T,B){T.addListeners=function(){var B=this,T=Zw;vt.mockTouch&&(T=Yw.concat(mw).concat(Ew));for(var G=0,H=(B.__events__=T).length;G<H;G++){var f=T[G];"wheel"===f&&!B.handle_wheel&&B.handle_mousewheel&&(B.handle_wheel=function(T){y1(B,T)}),B["handle_"+f]&&function(B,T,G){function H(T){"mousedown"!==B&&"mouseup"!==B&&"touchstart"!==B&&"touchend"!==B||U2(T),G.disabled||G["handle_"+B](T)}var f="__"+B;G[f]||(G[f]=H,Tt(T,B,H))}(f,B.getView(),B)}},T.removeListeners=function(){var T=this.__events__;if(T){this.__events__=Ht;for(var B,G,H,f,v=0,J=T.length;v<J;v++)this["handle_"+T[v]]&&(B=T[v],G=this.getView(),0,(f=this[H="__"+B])&&(Bt(G,B,f),delete this[H]))}}},ms_fire:function(T,B){T.mp=function(T,B,G){this.addPropertyChangeListener(T,B,G)},T.ump=function(T,B){this.removePropertyChangeListener(T,B)},T.fp=function(T,B,G,H,f){return this.firePropertyChange(T,B,G,H,f)},T.addPropertyChangeListener=function(T,B,G){this._62I||(this._62I=new FJ),this._62I.add(T,B,G)},T.removePropertyChangeListener=function(T,B){this._62I&&this._62I.remove(T,B)},T.firePropertyChange=function(T,B,G,H,f){if(H){if(H(B,G))return!1}else if(B===G)return!1;return(H=f||{}).property=T,H.oldValue=B,H.newValue=G,H.source=this,(H.data=this)._62I&&this._62I.fire(H),this.onPropertyChanged&&this.onPropertyChanged(H),!0}},ms_attr:function(T,B){T.a=function(T,B){if(2===arguments.length)this.setAttr(T,B);else{if(!M1(T))return this.getAttr(T);for(var G in T)this.setAttr(G,T[G])}return this},T.getAttr=function(T,B){if(B===Ht&&(B=1),this._attrObject&&T in this._attrObject)return this._attrObject[T];if(this.getImage){var G=this.getImage();if(Et(G)&&(G=_w[G]),M1(G)&&"dataBindings"in G)for(var H=G.dataBindings,f=H.length-1;0<=f;f--){var v=H[f];if(v.attr===T){if("defaultValue"in v)return v.defaultValue;break}}}return B?s[T]:Ht},T.setAttr=function(T,B){this._attrObject||(this._attrObject={});var G=this._attrObject[T];B===Ht?delete this._attrObject[T]:this._attrObject[T]=B,this.fp&&this.fp("a:"+T,G,B)&&this.onAttrChanged&&this.onAttrChanged(T,G,B)},T.getSerializableAttrs=function(){var T,B={};for(T in this._attrObject)B[T]=1;return B}},ms_bnb:function(T,B){T.getBodyColor=function(T){return T.s("body.color")},T.getBorderColor=function(T){return T.s("border.color")}},_51o:function(T,B){T.mi=function(T,B,G){this.addInteractorListener(T,B,G)},T.umi=function(T,B){this.removeInteractorListener(T,B)},T.fi=function(T){this.fireInteractorEvent(T)},T.addInteractorListener=function(T,B,G){this._63I||(this._63I=new FJ),this._63I.add(T,B,G)},T.removeInteractorListener=function(T,B){this._63I&&this._63I.remove(T,B)},T.fireInteractorEvent=function(T){this._63I&&this._63I.fire(T)},T.setInteractors=function(T){var B=this._interactors;B&&B.each(function(T){T.tearDown()}),m1(T)&&(T=new $(T)),(this._interactors=T)&&T.each(function(T){T.setUp()}),this.fp("interactors",B,T),this.invalidateSelection()},T.getInteractors=function(){return this._interactors}},_49o:function(T,B){T._44O=ft,T._45O=ft,T.getTopPainters=function(){return this._44O},T.getBottomPainters=function(){return this._45O},T.addTopPainter=function(T){this._44O||(this._44O=new $),this._44O.contains(T)||(this._44O.add(T),this.redraw&&this.redraw())},T.removeTopPainter=function(T){this._44O&&(this._44O.remove(T),this.redraw&&this.redraw())},T.addBottomPainter=function(T){this._45O||(this._45O=new $),this._45O.contains(T)||(this._45O.add(T),this.redraw&&this.redraw())},T.removeBottomPainter=function(T){this._45O&&(this._45O.remove(T),this.redraw&&this.redraw())},T._93db=function(B,G){var H=this;H._45O&&H._45O.each(function(T){T.draw?T.draw(B,G):T.call(H,B,G)})},T._92db=function(B,G){var H=this;H._44O&&H._44O.each(function(T){T.draw?T.draw(B,G):T.call(H,B,G)})}},ms_sm:function(T,B){T.sm=function(){return this.getSelectionModel()},T.setSelectableFunc=function(T){this.sm().setFilterFunc(T)},T.getSelectableFunc=function(){return this.sm().getFilterFunc()},T.getSelectionModel=function(){return this._selectionModel||this.dm().sm()},T.isSelectionModelShared=function(){return!this._selectionModel},T.setSelectionModelShared=function(T){var B=this,G=B.sm(),H=!B._selectionModel,f=B.handleSelectionChange,v=B.dm();H!==T&&(B.invalidateSelection&&B.invalidateSelection(),T?(v.sm().ms(f,B),B._selectionModel.ums(f,B),B._selectionModel.dispose(),B._selectionModel=ft):(v.sm().ums(f,B),B._selectionModel=new SJ(v),B._selectionModel.ms(f,B)),B.onSelectionModelSharedChanged(),B.fp("selectionModelShared",H,T),B.fireViewEvent({kind:"selectionModelSharedChange",oldValue:H,newValue:T,oldSelectionModel:G,newSelectionModel:B.sm()}))},T.onSelectionModelSharedChanged=function(){this.redraw(),this.invalidateSelection&&this.invalidateSelection()},T.removeSelection=function(){var T=this.dm();T.beginTransaction(),this.sm().toSelection().each(T.remove,T),T.endTransaction()},T.selectAll=function(){var B=this;B.sm().ss(B.dm().toDatas(function(T){return B.isVisible(T)&&B.isSelectable(T)}))},T.isSelected=function(T){return this.sm().co(T)},T.isSelectedById=function(T){return!!(T=this.dm().getDataById(T))&&this.isSelected(T)},T.isSelectable=function(T){return this.sm().isSelectable(T)}},ms_tx:function(T,B){T._64I=0,T._65O=0,T.isScrollable=function(){return this.getWidth()<this._64I},T._40o=function(){return this.isScrollable()},T.getLogicalPoint=function(T){return Gs(T,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},T.tx=function(T){if(T===Ht)return this.getTranslateX();this.setTranslateX(T)},T.getTranslateX=function(){return this._65O},T.setTranslateX=function(T){var B=this.getWidth()-this._64I,B=(T=_t(T=0<(T=T<B?B:T)?0:T),this._65O);this._65O=T,this.fp(_B,B,T)}},ms_ty:function(T,B){T._23Q=0,T._66O=0,T._41o=function(){return this.getHeight()<this._23Q},T.getLogicalPoint=function(T){return Gs(T,this._canvas||this._view,this.tx?this.tx():0,this.ty())},T.ty=function(T){if(T===Ht)return this.getTranslateY();this.setTranslateY(T)},T.getTranslateY=function(){return this._66O},T.setTranslateY=function(T){var B=this.getHeight()-this._23Q,B=(T=_t(T=0<(T=T<B?B:T)?0:T),this._66O);this._66O=T,this.fp(pB,B,T)}},ms_txy:function(T,B){T._65O=0,T._66O=0,T.tx=function(T){if(T===Ht)return this.getTranslateX();this.setTranslateX(T)},T.ty=function(T){if(T===Ht)return this.getTranslateY();this.setTranslateY(T)},T.onTranslateEnded=function(){},T.setTranslate=function(B,G,T){var H,f,v=this;(T=s1(T))?(v._65I&&v._65I.stop(!0),H=v.tx(),f=v.ty(),T.action=function(T){v.setTranslate(H+(B-H)*T,f+(G-f)*T)},T._37o=function(){delete v._66I,delete v._65I,v.onTranslateEnded()},v._66I=1,v._65I=c2(T)):(v.tx(B),v.ty(G))},T.getTranslateX=function(){return this._65O},T.setTranslateX=function(T){T=this.adjustTranslateX(T);var B=this._65O;this._65O=T,this.fp(_B,B,T)},T.getTranslateY=function(){return this._66O},T.setTranslateY=function(T){T=this.adjustTranslateY(T);var B=this._66O;this._66O=T,this.fp(pB,B,T)},T.adjustTranslateX=function(T){return _t(T)},T.adjustTranslateY=function(T){return _t(T)},T.translate=function(T,B,G){this.setTranslate(this.tx()+T,this.ty()+B,G)},T.getLogicalPoint=function(T){return Gs(T,this._canvas||this._view,this.tx(),this.ty())}},ms_dm:function(T,B){T.dm=function(T){if(!T)return this.getDataModel();this.setDataModel(T)},T.getDataModel=function(){return this._dataModel}},ms_lp:function(T,B){T.lp=function(T){return this.getLogicalPoint(T)}},ms_v:function(T,B){T._disabled=!1,T.setDisabled=function(T,B){var G=this._disabled;G!==T&&(G&&(vs(this._63O),delete this._63O),T&&(K1(this._view,this._63O=B0(B)),this.iv()),this._disabled=T,this.fp("disabled",G,T))},T.isDisabled=function(){return this._disabled},T.getDisabledDiv=function(){return this._63O},T.getView=function(){return this._view},T.addToDOM=function(T){var B=this,G=B.getView(),H=G.style;(T=T||R.body).appendChild(G),H.left="0",H.right="0",H.top="0",H.bottom="0",Tt(Q,"resize",function(){B.iv()}),B.iv()},T.setCursor=function(T){"default"===T&&(T=this._defaultCursor||T);var B=this.getView().style;B.cursor=T,B.cursor="-webkit-"+T,B.cursor="-moz-"+T},T.getWidth=function(){return this._view.clientWidth},T.getHeight=function(){return this._view.clientHeight},T.setWidth=function(T){this._view.style.width=T+Ze,this.iv(),this.fp&&this.fp(Oe,ft,T)},T.setHeight=function(T){this._view.style.height=T+Ze,this.iv(),this.fp&&this.fp(_e,ft,T)},T.setFocus=function(T){var B=this._currentEditor;return!(T&&B&&(B=B.getView?B.getView():B).contains(T.target)||(m0(this._view),this.endEditing&&this.endEditing(),this.fireViewEvent("focus"),0))},T.iv=function(T){this.invalidate(T)},T.invalidate=function(T){this._68I||(this._68I=1,this._ivTimerId=I2(this._validateImpl,this,ft,T),this._ivTimerDelay=T,this.onInvalidated&&this.onInvalidated(),this.fireViewEvent("invalidate"))},T.validate=function(){var T=this._ivTimerId,B=this._ivTimerDelay;!1!==this._validateImpl()&&T&&D2(T,B)},T._validateImpl=function(){var T,B=this,G=B._view;if(!B._68I)return!1;delete B._68I,G.parentNode&&(0===G.offsetWidth&&0===G.offsetHeight&&B._67I!==ft?(B._67I===Ht&&(B._67I=vt.reinvalidateCount),0<B._67I?B._67I--:B._67I=ft,B.iv()):(B.fireViewEvent("beginValidate"),B.validateImpl(),B.onValidated&&B.onValidated(),B.fireViewEvent("validate"),(T=B._63O)&&(G.lastChild!==T&&(vs(T),K1(G,T)),D(T,0,0,B.getWidth(),B.getHeight())),nw(B),js(B),To(B),Ma(B)))},T.layout=function(T,B,G,H){1===arguments.length?D(this,T):D(this,T,B,G,H)},T.addViewListener=function(T,B,G){this._67O||(this._67O=new FJ),this._67O.add(T,B,G)},T.removeViewListener=function(T,B){this._67O.remove(T,B)},T.fireViewEvent=function(T){this._67O&&(Et(T)&&(T={kind:T}),this._67O.fire(T)),vt.viewListener&&vt.viewListener(this,T)}},ms_tip:function(T,B){T.setToolTipEnabled=function(T){T?$t||this._13o||(this.enableToolTip(),this.fp("toolTipEnabled",!1,!0)):this._13o&&(this.disableToolTip(),this.fp("toolTipEnabled",!0,!1))},T.isToolTipEnabled=function(){return!!this._13o},T.enableToolTip=function(){var T,G=this;$t||G._13o||(G._13o=function(T){var B;T.toolTipView||((B=(T.toolTipView=G).getToolTip(T))!=ft?(vt.toolTipContinual&&vt.isToolTipShowing()?f2(T,B):(v2(),gw={timeout:jt(Sw,T2),e:T,info:B}),Fw={e:T,view:G}):v2())},T=G.getView(),Tt(T,CB,G._13o),Tt(T,"mouseleave",vt.hideToolTip))},T.disableToolTip=function(){var T;this._13o&&(T=this.getView(),Bt(T,CB,this._13o),Bt(T,"mouseleave",vt.hideToolTip),delete this._13o)},T.getToolTip=function(T){return this.getDataAt?(T=this.getDataAt(T))?T.getToolTip():ft:this.getValue?this.getValue():void 0}},_52o:function(T,B){T._zoom=1,T._29I=Uw,T.zoomIn=function(T,B){this.setZoom(this._zoom*s2,T,B)},T.zoomOut=function(T,B){this.setZoom(this._zoom/s2,T,B)},T.zoomReset=function(T,B){this.setZoom(1,T,B)},T.scrollZoomIn=function(T){this.setZoom(this._zoom*S2,ft,T)},T.scrollZoomOut=function(T){this.setZoom(this._zoom/S2,ft,T)},T.pinchZoomIn=function(T){this.setZoom(this._zoom*y2,ft,T)},T.pinchZoomOut=function(T){this.setZoom(this._zoom/y2,ft,T)},T.adjustZoom=function(T){return T<w2?w2:x2<T?x2:T},T.getZoom=function(){return this._zoom},T.setZoom=function(B,T,G){var H,f=this;(T=s1(T))?(f._14o&&f._14o.stop(!0),H=f._zoom,T.action=function(T){f._96O(H+(B-H)*T,G)},T._37o=function(){delete f._zooming,delete f._14o,f.onZoomEnded()},f._zooming=1,f._14o=c2(T)):f._96O(B,G)},T._96O=function(T,B){var G,H;(T=this.adjustZoom(T))!==this._zoom&&(this.validate(),G=this._29I,H=this._zoom,0!==G.width&&0!==G.height&&(B=B||{x:G.x+G.width/2,y:G.y+G.height/2},this.tx((B.x-G.x)*H-B.x*T),this.ty((B.y-G.y)*H-B.y*T)),this._zoom=T,this.fp("zoom",H,T))}},ms_edge:function(T,B){T._2I=function(T){this._44I||(this._44I=new $),this._42I||(this._42I=new $),this._44I.add(T),this._42I.add(T),this._20I()},T._4I=function(T){this._44I||(this._44I=new $),this._43I||(this._43I=new $),this._44I.add(T),this._43I.add(T),this._20I()},T._16I=function(T){this._44I.remove(T),this._42I.remove(T),this._44I.isEmpty()&&delete this._44I,this._42I.isEmpty()&&delete this._42I,this._20I()},T._18I=function(T){this._44I.remove(T),this._43I.remove(T),this._44I.isEmpty()&&delete this._44I,this._43I.isEmpty()&&delete this._43I,this._20I()},T._20I=function(){var B,G=this;delete G._45I,!G._44I||G._44I.isEmpty()?delete G._70O:(G._44I.each(function(T){T.isLooped()&&!(B=B||{})[T._id]&&(G._45I||(G._45I=new $),G._45I.add(T),B[T._id]=T)}),B?(G._70O=new $,G._44I.each(function(T){B[T._id]?"A"!==B[T._id]&&(B[T._id]="A",G._70O.add(T)):G._70O.add(T)})):G._70O=G._44I)},T.hasAgentEdges=function(){return!!this._49I&&!this._49I.isEmpty()},T.getSourceAgentEdges=function(){return this._46I},T.getTargetAgentEdges=function(){return this._47I},T._1I=function(T){this._46I||(this._46I=new $),this._48I||(this._48I=new $),this._46I.add(T),this._48I.add(T),this._19I()},T._3I=function(T){this._47I||(this._47I=new $),this._48I||(this._48I=new $),this._47I.add(T),this._48I.add(T),this._19I()},T._15I=function(T){this._46I.remove(T),this._48I.remove(T),this._46I.isEmpty()&&delete this._46I,this._48I.isEmpty()&&delete this._48I,this._19I()},T._17I=function(T){this._47I.remove(T),this._48I.remove(T),this._47I.isEmpty()&&delete this._47I,this._48I.isEmpty()&&delete this._48I,this._19I()},T._19I=function(){var B,G=this,T=(delete G._49I,G._48I);T&&!T.isEmpty()&&(B={},T.each(function(T){B[T._id]?G._49I||(G._49I=new $):B[T._id]=T}),G._49I?T.each(function(T){B[T._id]&&(G._49I.add(T),delete B[T._id])}):G._49I=T)},T.getLoopedEdges=function(){return this._45I},T.getEdges=function(){return this._70O},T.getAgentEdges=function(){return this._49I},T.getSourceEdges=function(){return this._42I},T.getTargetEdges=function(){return this._43I},T._8I=function(){this._70O&&this._70O.each(function(T){T._7I()})}}}),C9=(S1(vt,{getVersion:function(){return"7.6.2-dev31"}},!0),function(T){return T.devicePixelRatio||(T.screen&&T.screen.logicalXDPI?T.screen.deviceXDPI/T.screen.logicalXDPI:1)}),a9=(S1(vt,{numberDigits:5,crossOrigin:"",baseZIndex:Ht,isTouchable:$t,mockTouch:!0,devicePixelRatio:C9(Q),reinvalidateCount:3,hitMaxArea:3e3,imageCacheThreshold:20,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:q.disabledBackground,forceHierarchicalSerialization:!0,extractBatchTranslation:!1,extractShapeTranslation:!1,extractPolylineTranslation:!1,extractVerticesTranslation:!1,envmapProbeMinWaitTime:300,envmapProbeMaxWaitTime:25e3,EnvmapTextureSize:1024,hoverDelay:600,clickDelay:200,toolTipDelay:800,toolTipContinual:!1,getDragger:function(){return g0},lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],blockMinSize:1,textExtraWidth:4,encodeStringKey:null,doubleClickSpeed:500,doubleClickRange:1,doubleTouchRange:20,touchMoveThreshold:10,animDuration:200,animEasing:function(T){return T*T},labelColor:L4,labelSelectColor:j4,labelFont:"12px arial, sans-serif",widgetIndent:$t?30:20,widgetRowHeight:$t?30:20,widgetHeaderHeight:$t?32:22,widgetTitleHeight:$t?34:24,scrollBarColor:F,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:$t?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,pinchZoomThreshold:1,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:I1,intersectionLineLine:D1,isEnter:e0,isEsc:c0,isDelete:O0,isSpace:o0,isLeft:i0,isUp:I0,isRight:D0,isDown:h0,isTouchEvent:R0,getTarget:function(T){return(R0(T)?Z0(T):T).target},isString:Et,isNumber:v1,isBoolean:J1,isArray:m1,isSelectAll:w0,isFunction:Y1,isObject:M1,getPropertyValue:h1,setPropertyValue:o1,addMethod:S1,createGradient:function(T,B,G,H,f,v,J,M){return(0,A4[B])(T,G,H,f,v,J,M)},appendToScreen:function(T){T=T.getView?T.getView():T,(R.fullscreenElement||R.mozFullScreenElement||R.webkitFullscreenElement||R.msFullscreenElement||R.body).appendChild(T)},encodeString:function(T){return L.Math.encodeBase64(T,vt.encodeStringKey)},decodeString:function(T){return L.Math.decodeBase64(T,vt.encodeStringKey)},findView:function(T){function B(T,B){for(var G="2d"===B?nJ.GraphView:sx.Graph3dView,H=0,f=T.length;H<f;H++)if(T[H]instanceof G)return v[H];return null}var v=[];return function T(B,G){var H=G._ht,f=(H&&B.push(H),G.children),v=f.length;if(v)for(var J=0;J<v;J++)T(B,f[J])}(v,R.body),"all"===T?v:"2d"===T?B(v,"2d"):"3d"===T?B(v,"3d"):B(v,"3d")||B(v,"2d")},toggleFullscreen:function(B){var G,H,f,v,J,M,Y,T,m,E,Z=B.getView();R.fullscreenElement||R.mozFullScreenElement||R.webkitFullscreenElement||R.msFullscreenElement?R.exitFullscreen?R.exitFullscreen():R.msExitFullscreen?R.msExitFullscreen():R.mozCancelFullScreen?R.mozCancelFullScreen():R.webkitExitFullscreen&&R.webkitExitFullscreen():(G=!0,E=B.isSelfViewEvent?(H=B.getX(),f=B.getY(),M=B.getWidth(),Y=B.getHeight(),T=Z.style.background,m=Z.style.backgroundColor,T||m||(Z.style.backgroundColor="white"),Z.requestFullscreen?Z.requestFullscreen():Z.msRequestFullscreen?Z.msRequestFullscreen():Z.mozRequestFullScreen?Z.mozRequestFullScreen():Z.webkitRequestFullscreen&&Z.webkitRequestFullscreen(),setInterval(function(){var T;Z!==(R.fullscreenElement||R.mozFullScreenElement||R.webkitFullscreenElement||R.msFullscreenElement)?(clearInterval(E),B.setX(H),B.setY(f),B.setWidth(M),B.setHeight(Y),B._fullscreen=!1,Z.style.oldBackgroundColor=m,B.iv()):(T=L.Default.getWindowInfo(),!G&&T.width===B.getWidth()&&T.height===B.getHeight()||(B.setX(T.left),B.setY(T.top),B.setWidth(T.width),B.setHeight(T.height),B._fullscreen=!0,B.iv(),G=!1))},500)):(v=Z.style.left,J=Z.style.top,M=Z.style.width,Y=Z.style.height,T=Z.style.background,m=Z.style.backgroundColor,T||m||(Z.style.backgroundColor="white"),Z.requestFullscreen?Z.requestFullscreen():Z.msRequestFullscreen?Z.msRequestFullscreen():Z.mozRequestFullScreen?Z.mozRequestFullScreen():Z.webkitRequestFullscreen&&Z.webkitRequestFullscreen(),setInterval(function(){var T;Z!==(R.fullscreenElement||R.mozFullScreenElement||R.webkitFullscreenElement||R.msFullscreenElement)?(clearInterval(E),Z.style.left=v,Z.style.top=J,Z.style.width=M,Z.style.height=Y,Z.style.oldBackgroundColor=m,B.iv()):(T=L.Default.getWindowInfo(),!G&&T.width===B.getWidth()&&T.height===B.getHeight()||(D(B),G=!1))},500)))},appendTimeStamp:function(T){return T},setCompType:function(T,B){Et(B)&&B.substr(0,12)==Mw&&(B=vt.parse(B)),Y1(B)||M1(B)?Dw[T]=B:rs(T)},getCompType:function(T){var B=Dw[T];return B===Ht&&cw.test(T)&&rs(T),B},getCompTypeMap:function(){return Dw},drawCompType:function(T,B,G,H,f,v){T(B,G,H,f,v)},numberListener:(Bc={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1},function(T){var B=T.keyCode;Bc[B]||65===B&&vt.isCtrlDown(T)||86===B&&vt.isCtrlDown(T)||67===B&&vt.isCtrlDown(T)||88===B&&vt.isCtrlDown(T)||35<=B&&B<=40||(T.shiftKey||B<48||57<B)&&(B<96||105<B)&&T.preventDefault()}),ignoreKeyCodes:[122,123],preventDefault:function(T){var B=T.target.tagName;"DIV"!==B&&"CANVAS"!==B||0<=vt.ignoreKeyCodes.indexOf(T.keyCode)||!("keydown"!==T.type||i0(T)||D0(T)||I0(T)||h0(T)||O0(T)||65===T.keyCode&&(T.metaKey||T.ctrlKey))||!0!==T.cancelable||(T.preventDefault(),T.preventManipulation&&T.preventManipulation())},getWindowInfo:function(){var T=R.documentElement;return{target:T=T&&(T.scrollLeft||T.scrollTop)?T:R.body,left:T.scrollLeft,top:T.scrollTop,width:Q.innerWidth||T.clientWidth,height:Q.innerHeight||T.clientHeight}},isDragging:function(){return!!g0},isLeftButton:function(T){return!!R0(T)||0===T.button},isMiddleButton:function(T){return!R0(T)&&T&&(1===T.button||4&(T.buttons||0))},isRightButton:function(T){return!R0(T)&&T&&(2===T.button||2&(T.buttons||0))},isInput:function(T){return!!T&&("INPUT"===(T=T.tagName)||"TEXTAREA"===T||"SELECT"===T)},getTouchCount:function(T){return R0(T)?T.touches.length:1},isDoubleClick:(Tc={},zt=new W,p=zt.getTime(),function(T){if(1<X2(T))return!1;var B=T.button==ft?"":T.button,G=(B=T.type+B)+"_isDoubleClick",H=(H=Tc[B])||(Tc[B]={details:0,timeout:null,lastPoint:null});return T[G]===Ht&&(T[G]=!0,B=K2(T),H.timeout&&(rt(H.timeout),H.timeout=null),G=R0(T)?vt.doubleTouchRange:vt.doubleClickRange,H.lastPoint&&n2(H.lastPoint,B)>G&&TN(H),H.lastPoint=B,H.details++,H.timeout=jt(function(){TN(this)}.bind(H),vt.doubleClickSpeed)),2===H.details}),isShiftDown:function(T){return T?T.shiftKey:Iw[16]},isCtrlDown:function(T){return T?nt?T.metaKey:T.ctrlKey:nt?Iw[91]:Iw[17]},getClientPoint:function(T){return{x:(T=R0(T)?Z0(T):T).clientX,y:T.clientY}},isMouseEvent:function(T){return T instanceof MouseEvent||0===T.type.indexOf("mouse")},getTargetElement:function(T){var B=z2(T),G=vt.isMouseEvent(T)||!R.elementFromPoint?T.target:R.elementFromPoint(B.x,B.y);if(lt&&R.elementFromPoint){for(var H=[],f=[];"none"===G.style.pointerEvents;)H.push(G),f.push(G.style.display||""),G.style.display="none",G=R.elementFromPoint(B.x,B.y);H.forEach(function(T,B){T.style.display=f[B]})}return G},getPagePoint:function(T){return{x:(T=R0(T)?Z0(T):T).pageX,y:T.pageY}},createObject:function(T,B){var G,H=new T;for(G in B){var f,v=B[G];Y1(v)?H[G]=v:0===G.indexOf("s:")?H.s(G.substr(2),B[G]):0===G.indexOf("a:")?H.a(G.substr(2),B[G]):(f=f1(G),v=B[G],H[f]?(H[f](v),"setToolTip"===f&&H.enableToolTip&&H.enableToolTip()):H[G]=v)}return H},setImage:function(T,B,G,H){var f=arguments.length;4===f?$w(T,H,B,G):2===f?Et(B)?B.substr(0,12)==Mw?zw(T,vt.parse(B)):$w(T,B):zw(T,B):1===f&&$w(T,T)},getImage:function(T,B,G){var H,f;return T==ft?ft:(M1(T)?H=T:(H=_w[T],!T||H!==Ht||bw&&bw[T]||$w(T,T)),B&&H&&H.tagName?(H[T="override"===G?"colors_override":"override_rgb"===G?"colors_override_rgb":"override_a"===G?"colors_override_a":"colors"]||(H[T]={__count__:0}),(f=H[T][B])||(H[T].__count__>vt.imageCacheThreshold&&(H[T]={__count__:0}),f=function(T,B,G,H,f){var v=X1(),J=(v.width=G,v.height=H,v.getContext("2d"));J.drawImage(T,0,0,G,H);try{for(var M=J.getImageData(0,0,G,H),Y=M.data,m=0,E=Y.length;m<E;m+=4){var Z=Y[m+0],R=Y[m+1],A=Y[m+2],g=Y[m+3];"override_a"===f?Y[m+3]=255*B[3]:"override_rgb"===f?(Y[m+0]=255*B[0],Y[m+1]=255*B[1],Y[m+2]=255*B[2]):"override"===f?(Y[m+0]=255*B[0],Y[m+1]=255*B[1],Y[m+2]=255*B[2],Y[m+3]=255*B[3]):(Y[m+0]=B[0]*Z,Y[m+1]=B[1]*R,Y[m+2]=B[2]*A,Y[m+3]=B[3]*g)}J.putImageData(M,0,0)}catch(B){return T}return v}(H,U0(B),H.width,H.height,G),H[T][B]=f,H[T].__count__++),f):H)},isImageComplete:function(T,B,G){var H=z(T);if(!H)return!1;if(H.tagName)return H.complete;for(var f=H.comps,v=!0,J=0,M=f.length;J<M;J++){var Y,m=(Y=f[J]).type;if("image"===Y.type){if((T=Y.name)&&T.func&&(T=n(T,B)),!p2(T,B,G)){v=!1;break}}else if(cw.test(m)&&vt.getCompType(m)===Ht){v=!1,rs(m);break}}return v},getId:(aX=1,function(){return++aX}),callLater:function(T,B,G,H){function f(){T.apply(B,G)}return H?jt(f,H):Q.requestAnimationFrame(f)},cancelLater:function(T,B){B?rt(T):Q.cancelAnimationFrame(T)},clone:function(T){if(null==T||"object"!=typeof T)return T;if(T instanceof Date)return(B=new Date).setTime(T.getTime()),B;if(T instanceof Array){for(var B=[],G=0,H=T.length;G<H;G++)B[G]=o2(T[G]);return B}if(T instanceof $){for(B=new $,G=0,H=T.length;G<H;G++)B.set(G,o2(T.get(G)));return B}if(T instanceof WJ)return T;if(T instanceof sJ)return(B=new sJ).deserialize(T.serialize()),B;if(T instanceof N){var f,B={};for(f in T)T.hasOwnProperty(f)&&(B[f]=o2(T[f]));return B}return T},callWhenLoaded:function(T,B){var G=ww(T,B=B||100);(xw=xw||{})[G]={tick:G,cb:T,delay:B}},beforeLoadURL:function(T,B){if(xw){var G={};for(B in xw){var H=xw[B],f=(rt(H.tick),ww(H.cb,H.delay));G[f]={tick:f,delay:H.delay,cb:H.cb}}xw=G}return vt.convertURL?vt.convertURL(T,B):T},convertURL:function(T){return T},handleRefGraphLoaded:function(T,B,G){},handleCompTypeLoaded:function(T,B){},handleImageLoaded:function(T,B){},handleUnfoundImage:function(T,B){return vt.getImage("default_blank")},resizeImage:function(T,B,G,H){G=G||B;var f=(H=H||X1()).getContext("2d");return b1(H,B,G,1),f.drawImage(T,0,0,B,G),H},resizeImagePOT:function(T,B,G){if(!T||!T.tagName)return T;var H,f=T.width,v=T.height;return f&&v&&(!l.isPOT(f)||!l.isPOT(v)||B&&f!==v)?(B=B?H=l.nearestPOT(Math.min(f,v)):(H=l.nearestPOT(f),l.nearestPOT(v)),vt.resizeImage(T,H,B,G)):T},sortFunc:function(T,B){if(T===B)return 0;if(T==ft&&B!=ft)return 1;if(T!=ft&&B==ft)return-1;if(T==ft&&B==ft)return 0;var G,H=typeof T,f=typeof B;return H==UB&&f==UB?G=T.localeCompare(B):H==zB&&f==zB&&(G=T-B),0<(G=G===Ht?(""+T).localeCompare(""+B):G)?1:G<0?-1:0},getClassMap:function(){return Ow},getClass:function(T){if(Et(T)){if(!(G=Ow[T])){for(var B=T.split("."),G=Q,H=0;H<B.length;H++)G=G[B[H]];Ow[T]=G}return G}return T},def:function(T,B,G){function H(){}var f,v,J;if(H.prototype=B.prototype,f=new H,Et(T)){if(Ow[T])throw"'"+T+"' already defined";J=e2(T),f.getClassName=function(){return T}}else J=T;if(f.constructor=J,f.getClass=function(){return J},f.getSuperClass=function(){return B},G)for(v in G)k9[v]&&k9.hasOwnProperty(v)?k9[v](f,G):O4(f,G,v);J.prototype=f,J.superClass=B.prototype},startAnim:function(B){return(B=o2(B)).easing=B.easing||vt.animEasing,B.duration||B.frames||(B.duration=vt.animDuration),B.t=0,B.duration?B.interval=0:(B.frame=0,B.interval=B.interval||10),B.tick=function(){var T;B.duration?(T=(Pw()-B.startTime)/B.duration,B.t=T=1<T?1:T,B.action(B.easing(T),T),B.isRunning()&&(1===T?B.stop():B._isPaused||(B.timeId=I2(B.tick)))):(B.frame++,T=B.t=B.frame/B.frames,B.action(B.easing(T),T),B.isRunning()&&(B.frame<B.frames?B._isPaused||(B.timeId=I2(B.tick,ft,ft,B.interval)):B.stop()))},B.resume=function(){B._isPaused&&(delete B._isPaused,B.duration?B.t<1&&(B.startTime=Pw()-B.duration*B.t,B.timeId=I2(B.tick)):B.frame<B.frames&&(B.timeId=I2(B.tick,ft,ft,B.interval)))},B.pause=function(){D2(B.timeId,!B.duration),B._isPaused=!0},B.isPaused=function(){return this._isPaused},B.stop=function(T){B.isRunning()&&(D2(B.timeId,!B.duration),delete B.timeId,B.duration?B.t<1&&T&&(B.t=1,B.action(B.easing(1),1)):B.frame<B.frames&&T&&(B.frame=B.frames,B.action(B.easing(1),1)),B._37o&&B._37o(),B.finishFunc&&B.finishFunc())},B.isRunning=function(){return B.timeId!=ft},B.delay?I2(aK,ft,[B],B.delay):aK(B),B},getTextSize:(kX={},CX=R?X1().getContext("2d"):ft,function(T,B){return CX.font=T||E2,(T=kX[CX.font])||(T=2*CX.measureText("e").width+4,kX[CX.font]=T),{width:CX.measureText(B).width+vt.textExtraWidth,height:T}}),drawText:function(T,B,G,H,f,v,J,M,Y,m,E){var Z,R;B!=ft&&(Z=Q2(G,B),(R={}).y=m&&m!==Je?m===Ge?v+Z.height/2:v+M-Z.height/2:v+M/2,R.x=Y&&Y!==Te?Y===Be?f+J-Z.width/2:f+J/2:f+Z.width/2,k1(T,B,R,G,H),E&&$1(T,B,G,H,R.x,R.y,Z.width,E))},getDistance:function(T,B){var G=T.length;return B?3===G?ut(Lt(T[0]-B[0])+Lt(T[1]-B[1])+Lt(T[2]-B[2])):2===G?ut(Lt(T[0]-B[0])+Lt(T[1]-B[1])):T.z===Ht?ut(Lt(B.x-T.x)+Lt(B.y-T.y)):ut(Lt(B.x-T.x)+Lt(B.y-T.y)+Lt(B.z-T.z)):3===G?ut(Lt(T[0])+Lt(T[1])+Lt(T[2])):2===G?ut(Lt(T[0])+Lt(T[1])):void 0},brighter:function(T,B){return P0(T,(B=B<0?-B:B)||40)},darker:function(T,B){return P0(T,(B=0<B?-B:B)||-40)},traverse:(PX={},function(T,B,G,H){var f,Y;(f=(f=PX[H=H||""])?f:PX[H]=(Y=H,function T(B,G,H,f){var v;if(H&&H(B,G),v=(v=""===Y?B.getChildren():B[Y])instanceof L.List?v.getArray():v)for(var J=0,M=v.length;J<M;J++)T(v[J],B,H,f);f&&f(B,G)}))(T,null,B,G)}),unionPoint:function(T,B){if(!T)return ft;if(2===arguments.length)return T&&B?{x:Jt(T.x,B.x),y:Jt(T.y,B.y),width:it(T.x-B.x),height:it(T.y-B.y)}:ft;var G=T;if((G=G._as||G).length===Ht)return ft;var H=G.length;if(H<=0)return ft;for(var f=1,v={x:(J=G[0]).x,y:J.y,width:0,height:0};f<H;f++){var J=G[f],M=Jt(v.x,J.x),Y=Gt(v.x+v.width,J.x),m=Jt(v.y,J.y),E=Gt(v.y+v.height,J.y);v.x=M,v.y=m,v.width=Y-M,v.height=E-m}return v},unionRect:function(T,B){return T&&!B?o2(T):!T&&B?o2(B):T&&B?((G={x:Jt(T.x,B.x),y:Jt(T.y,B.y)}).width=Gt(T.x+T.width,B.x+B.width)-G.x,G.height=Gt(T.y+T.height,B.y+B.height)-G.y,G):ft;var G},containsPoint:function(T,B,G,H){var f,v,J,M;return H!=ft&&1!==H&&(f=T.x+T.width/2,v=T.y+T.height/2,T={x:f-T.width/2*H,y:v-T.height/2*H,width:T.width*H,height:T.height*H}),G?(f=T.width/2,v=T.height/2,H=Yt(-G),G=Mt(-G),J=B.x-T.x-f,M=B.y-T.y-v,P2({x:-f,y:-v,width:T.width,height:T.height},B={x:G*J-H*M,y:H*J+G*M})):!(!T||B.x<T.x||B.y<T.y||B.x>T.x+T.width||B.y>T.y+T.height)},containsRect:function(T,B){if(!T||!B)return!1;var G=B.x,H=B.y,f=B.width,B=B.height,v=T.width,J=T.height;if((v|J|f|B)<0)return!1;var M=T.x,T=T.y;if(G<M||H<T)return!1;if(v+=M,(f+=G)<=G){if(M<=v||v<f)return!1}else if(M<=v&&v<f)return!1;if(J+=T,(B+=H)<=H){if(T<=J||J<B)return!1}else if(T<=J&&J<B)return!1;return!0},intersectsRect:function(T,B){if(!T||!B)return!1;var G=B.width,H=B.height,f=T.width,v=T.height;if(f<=0||v<=0||G<=0||H<=0)return!1;var J=B.x,B=B.y,M=T.x;return v+=T=T.y,G+=J,H+=B,J<(f+=M)&&B<v&&M<G&&T<H},intersection:function(T,B){if(!T||!B)return ft;var G=B.x,H=B.y,f=T.x,v=T.y,J=G,M=H,Y=f,m=v;return J+=B.width,M+=B.height,(Y+=T.width)<J&&(J=Y),(m+=T.height)<M&&(M=m),M-=H=H<v?v:H,(J-=G=G<f?f:G)<=0||M<=0?ft:{x:G,y:H,width:J,height:M}},grow:function(T,B,G){G===Ht&&(G=B),T.x-=B,T.y-=G,T.width=T.width+2*B,T.height=T.height+2*G},getScreenPoint:function(T,B,G,H,f,v,J){var M=G.getBoundingClientRect(),T=T*(v||1)-G.scrollLeft+(H||0),v=B*(J||1)-G.scrollTop+(f||0);return(H=w4(G,!1))?((B=new Zt(T,v,0)).applyMatrix4(H),{x:B.x,y:B.y}):{x:T+M.left,y:v+M.top}},getLogicalPoint:function(T,B,G,H,f,v){var J,M=B.getBoundingClientRect(),Y=T.target?(b2(T)?nt?Iw[91]=!0:Iw[17]=!0:nt?Iw[91]=!1:Iw[17]=!1,l2(T)?Iw[16]=!0:Iw[16]=!1,J=(T=R0(T)?Z0(T):T).clientX,T.clientY):(J=T.x,T.y),m=w4(B,!0);if(m){var E=new Zt(J,Y,0);E.applyMatrix4(m);do{if(Math.abs(E.z)<=1e-6)break;var Z=new Zt(J,Y,1);if(Z.applyMatrix4(m),Math.abs(Z.z)<=1e-6){E=Z;break}}while(Z.sub(E),!(Math.abs(Z.z)<=1e-6)&&(E.addScaledVector(Z,-E.z/Z.z),0));return{x:(E.x+B.scrollLeft-(G||0))/(f||1),y:(E.y+B.scrollTop-(H||0))/(v||1)}}return{x:(J-M.left+B.scrollLeft-(G||0))/(f||1),y:(Y-M.top+B.scrollTop-(H||0))/(v||1)}},removeHTML:function(T){return!(!(T=T&&T.getView?T.getView():T)||!T.parentNode||(VX!==T&&((VX=T).parentNode.removeChild(T),VX=ft),0))},getToolTipDiv:function(){var T;return Rw||(Rw=r1(),Aw=r1(),T=Rw.style,vt.baseZIndex!=ft&&(T.zIndex=dt(vt.baseZIndex)+3+""),T.whiteSpace="nowrap",T.color=vt.toolTipLabelColor,T.background=vt.toolTipBackground,T.font=vt.toolTipLabelFont,T.padding="5px",T.boxShadow="0px 0px 3px "+vt.toolTipShadowColor),Rw},isToolTipShowing:function(){return!(!Rw||!Rw.parentNode)||!(!Aw||!Aw.parentNode)},updateToolTipContent:function(T,B){vt.isToolTipShowing()&&(B=B||Fw&&Fw.view,(T=T===Ht&&B&&Fw.e?B.getToolTip(Fw.e):T)!=ft&&((T.html?(T=T.html,Aw):Rw).innerHTML=T))},hideToolTip:function(){var T;sw(),vt.isToolTipShowing()&&(vs(Rw),vs(Aw),(T=Fw&&Fw.view)&&T.onHideToolTip&&T.onHideToolTip(),Fw=ft)},showToolTip:function(T,B,G){var H,f,v,J,M,Y;T&&B!=ft?(vt.getToolTipDiv(),B.html?(B=B.html,H=Aw,vs(Rw)):(H=Rw,vs(Aw)),f=H.style,H.innerHTML="",B instanceof HTMLElement?H.appendChild(B):H.innerHTML=B,H.parentNode||L.Default.appendToScreen(H),T.target?(T=z2(T),B=Ts(),v=T.x,J=T.y,M=$t?60:12,$t?(Y=H.getBoundingClientRect(),f.left=v-Y.width/2+Ze,J-Y.height-M<B.top?f.top=J+M+Ze:f.top=J-Y.height-M+Ze):(f.left=v+M+Ze,f.top=J+M+Ze,(Y=H.getBoundingClientRect()).left+Y.width>B.width&&(f.left=v-M-Y.width+Ze),Y.top+Y.height>B.height&&(f.top=J-M-Y.height+Ze),Y.left<0&&(f.left=v+M+Ze),Y.top<0&&(f.top=J+M+Ze))):(f.left=T.x+Ze,f.top=T.y+Ze),sw(),G===Ht?G=Fw&&Fw.view:Fw={e:T,view:G},G&&G.onShowToolTip&&G.onShowToolTip()):v2()},startDragging:function(T,B,G){G==Ht&&(G=!0),T!==g0&&(g0?G&&(R0(B)?g0.handleWindowTouchEnd(B):g0.handleWindowMouseUp(B)):R0(B)?(Tt(Q,Gw,F0),Tt(Q,Hw,W0),Tt(Q,"blur",W0)):(Tt(Q,CB,s0),Tt(Q,aB,S0),Tt(Q,"blur",S0)),g0=T)},getImageMap:function(){return _w},toBoundaries:function(T,B,G,H){var f=[];return $0(T,B,G,H).forEach(function(T){var B=[];T.forEach(function(T){B.push(T.x,T.y)}),f.push(B)}),f},getCurrentKeyCodeMap:function(){return Iw},drawCenterImage:function(T,B,G,H,f,v,J,M){!f&&v&&v.isSelfViewEvent&&(f=v);var Y=ks(B,f,v),m=Cs(B,f,v);as(T,B,_t(G-Y/2),_t(H-m/2),Y,m,f,v,J,M)},drawStretchImage:function(T,B,G,H,f,v,J,M,Y,m,E,Z){!M&&Y&&Y.isSelfViewEvent&&(M=Y);var R,A,g,F=ks(B,M,Y,v),W=Cs(B,M,Y,J),s=("uniform"===G?(W*=s=Jt(v/F,J/W),H+=_t((v-(F*=s))/2),f+=_t((J-W)/2),v=F,J=W):"centerUniform"===G?((v<F||J<W)&&(F*=s=Jt(v/F,J/W),W*=s),H+=_t((v-F)/2),f+=_t((J-W)/2),v=F,J=W):"cover"===G&&(W*=s=F/v<W/J?v/F:J/W,H+=_t((v-(F*=s))/2),f+=_t((J-W)/2),v=F,J=W),T.interactiveInfo);s&&(A="center"===G?{x:H+v/2-F/2,y:f+J/2-W/2,width:F,height:W}:{x:H,y:f,width:v,height:J},s.rect?(R=(g=s.compInfos).length)&&(g[R-1].rect.image=B):s.rect=A),"center"===G?((g=!1!==E&&(v<F||J<W))&&(T.save(),T.beginPath(),T.rect(H,f,v,J),T.clip()),as(T,B,H+v/2-F/2,f+J/2-W/2,F,W,M,Y,m,Z),g&&T.restore()):as(T,B,H,f,v,J,M,Y,m,Z)},toCanvas:function(T,B,G,H,f,v,J,M,Y){T=z(T,J),B=B||ks(T,f),G=G||Cs(T,f);var m=X1(),E=G0(m);return M?(b1(m,B,G,M),E.scale(M,M)):b1(m,B,G,1),u2(E,T,H,0,0,B,G,f,v,J,Y),T&&T.clampToEdge&&(m.clampToEdge=T.clampToEdge),E.restore(),m},toGrayColor:function(T){if(!T)return T;var T=X0(T),B=_t(.299*T[0]+.587*T[1]+.114*T[2]);return"rgba("+B+","+B+","+B+","+T[3]/255+")"},createGradientImage:function(T,B,G,H){for(var f=["L",0,0,T,0,1,0,0,1,0,0],v=0,J=Math.min(B.length,G.length);v<J;v++)f.push(G[v],B[v]);return L.Default.toCanvas({width:T,height:T,clampToEdge:!0,comps:[{type:"shape",rotation:H||0,points:[0,0,T,0,T,T,0,T],background:"#ffffff",gradientPack:f}]})},createElement:function(T,B,G,H){return T=R.createElement(T),U1(T,B||q.widgetBorder,2),T.style.font=G||E2,H!=ft&&(T.value=H),vt.onElementCreated&&vt.onElementCreated(T),T},containedInView:function(T,B){return B=E0(B).getBoundingClientRect(),P2({x:B.left,y:B.top,width:B.width,height:B.height},K2(T))},isIsolating:function(){return 0<yw},setIsolating:function(T){T?yw++:yw--},getMSMap:function(){return k9},stringify:function(T,B,G){var H=Date.prototype.toJSON,f=(Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()},sJ.prototype.toJSON),T=(sJ.prototype.toJSON=function(){return"__ht__dataModel"+this.serialize(0)},B=G?0:B==ft?2:B,JSON.stringify(T,function(T,B){return"function"==typeof B?"__ht__"+(B.__ht__||B.toString()):v1(B)?B==ft||vt.numberDigits==ft?B:parseFloat(B.toFixed(vt.numberDigits)):KE(B)?null:B instanceof L.List?"__ht__list"+(B.__ht__list||vt.stringify(B._as)):B},B));return Date.prototype.toJSON=H,sJ.prototype.toJSON=f,G?Mw+function(T){for(var B=8+l.randomInt(8),G=e9[8*l.randomInt(8)+(B-8)],H="",f=0;f<B;f++)H+=e9[l.randomInt(64)];var v=H4(H+gt+"__"+iB);return G+H+c9(T,v)}(T):T},parse:function(T,M){return Et(T)&&(T.substr(0,12)!=Mw||(T=function(T){var B=T[0];if((B=e9.indexOf(B))<0)return"";var G=T.slice(1,1+(B=8+(7&B))),G=H4(G+gt+"__"+iB);return t9(T,G,1+B)}(T.substr(12)),Et(T)))?(M=M||{},JSON.parse(T,function(T,B){if(Et(B))if(M.ignoreFunction||"__ht__function"!=B.substr(0,14)){if(!M.ignoreDate&&"__ht__date"==B.substr(0,10))return new Date(dt(B.substr(10)));if("__ht__list"===B.substr(0,10))return new $(vt.parse(B.substr(10)));if(!M.ignoreDataModel&&"__ht__dataModel"===B.substr(0,15))return(G=new sJ).deserialize(vt.parse(B.substr(15))),G}else{var G=B.indexOf("{")+1,H=B.lastIndexOf("}"),f=B.indexOf("(")+1,v=B.indexOf(")");if(G&&H&&f&&v)try{var J=new Function(B.substring(f,v),B.substring(G,H));return J.__ht__=B.substr(6),J}catch(T){throw console.info("=== SyntaxError ===\n",B),T}}return B})):T},loadJS:function(T,B){B&&T.push(B);var G,B=T.shift();m1(B)?(T=B.contact(T),vt.loadJS(T)):Y1(B)?(B(),vt.loadJS(T)):Et(B)?((G=R.createElement("script")).onload=function(){vt.loadJS(T)},G.setAttribute("src",B),R.getElementsByTagName("head")[0].appendChild(G)):T.length&&vt.loadJS(T)},extendClass:function(T,B){var G,H=T.prototype;for(G in B)k9[G]&&k9.hasOwnProperty(G)?k9[G](H,B):H[G]=B[G]},toRoundedCorner:(KX=new Zt,zX=new Zt,nX=new Zt,$X=new Zt,function(T,B){var G,H=0,f=(T.getPoints&&(H=T.getElevation(),T=T.getPoints()),(G=T instanceof $?T:new $(T)).size());if(B<=0)return{points:G};var v=new $,J=new $,M=G.get(0);CK(KX,M,H),v.add(M),J.add(1);for(var Y,m,E=1;E<f;E++)E+1<f?(Y=G.get(E),m=G.get(E+1),CK(zX,Y,H),CK(nX,m,H),$X.subVectors(KX,zX).setLength(Math.min(.99*$X.length(),B)).add(zX),Y.e!==Ht||M.e!==Ht?v.add({x:$X.x,y:$X.z,e:$X.y}):v.add({x:$X.x,y:$X.z}),v.add(Y),$X.subVectors(nX,zX).setLength(Math.min(.99*$X.length(),B)).add(zX),Y.e!==Ht||m.e!==Ht?v.add(M={x:$X.x,y:$X.z,e:$X.y}):v.add(M={x:$X.x,y:$X.z}),KX.copy($X),J.addAll([2,3])):(v.add(G.get(E)),J.add(2));return{points:v,segments:J}}),toColorData:X0,setCanvas:b1,createDiv:r1,createDisabledDiv:B0,createView:j1,createCanvas:X1,appendChild:K1,initContext:G0,checkLoadingImage:nw,translateAndScale:H0,layout:D,getPosition:p4,drawPoints:n0,drawRoundRect:v4,drawBorder:J4,setFocus:m0,getter:H1,setter:f1,isEmptyObject:_1,cameraPriority:(bX={skybox:0,main:1e4,top:1e7,infinity:1/0},N.seal(N.defineProperties({},{skybox:{configurable:!1,enumerable:!1,get:function(){return bX.skybox},set:function(T){if(T>=bX.main)throw new RangeError("Skybox camera must have lower priority than the main camera.");bX.skybox=Number(T)}},main:{configurable:!1,enumerable:!1,get:function(){return bX.main},set:function(T){if(T<=bX.skybox)throw new RangeError("Main camera must have higher priority than the skybox camera.");if(T>=bX.top)throw new RangeError("Main camera must have lower priority than the top camera.");bX.main=Number(T)}},top:{configurable:!1,enumerable:!1,get:function(){return bX.top},set:function(T){if(T<=bX.main)throw new RangeError("Top camera must have higher priority than the main camera.");bX.top=Number(T)}}}))),addFontFace:(UX={ttf:"truetype",otf:"opentype",eot:"embedded-opentype"},lX={eot:0,woff2:1,woff:2,ttf:3,otf:4},function(T,B,G,H){if(T){var f;if(H&&vt.removeFontFace(T,!0),H=pw[T])return H.parentNode||R.head.appendChild(H),void(G&&G(H));0!==(B=(B=Et(B)?[B]:B).filter(function(T){return!!Et(T)&&0<T.length})).length&&(B=B.map(PK),f="",B.sort(kK).forEach(function(T){f+=", "+T.url}),f=f.substr(2),(H=R.createElement("style")).innerText='@font-face{font-family: "'+T+'";src: '+f+";}",R.head.appendChild(H),pw[T]=H,G&&G(H))}}),clearFontFace:function(){if(!_1(pw)){for(var T in pw)vt.removeFontFace(T);pw={}}},removeFontFace:function(T,B){if(T){var G=T;if(G.tagName){if(vs(G),B){var H,f=[];for(H in pw)pw[H]===G&&f.push(H);if(0<f.length)for(var v=0,J=f.length;v<J;v++)delete pw[f[v]]}}else(G=pw[T])&&(vs(G),B&&delete pw[T])}},getFontFaceMap:function(){return pw},handleFontFacesLoaded:function(T){}},!0),R&&R.fonts&&R.fonts.addEventListener&&R.fonts.addEventListener("loadingdone",function(T){vt.handleFontFacesLoaded(T.fontfaces),vt.findView("all").forEach(function(T){T.redraw?T.redraw():T.iv()})}),S1(w,{autoAdjustIndex:1,hierarchicalRendering:1,adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1,doubleClickToToggle:1,continuousLayout:1,syncSize:1},!0),vt.disabledOpacity),T2=vt.toolTipDelay,B2=vt.devicePixelRatio,U4=vt.autoMakeVisible,G2=vt.autoHideScrollBar,H2=vt.imageGradient,f2=vt.showToolTip,v2=vt.hideToolTip,J2=vt.dashPattern,M2=vt.lineCap,Y2=vt.lineJoin,m2=vt.labelColor,Nt=vt.labelSelectColor,E2=vt.labelFont,Z2=vt.widgetIndent,L4=vt.widgetRowHeight,R2=vt.widgetHeaderHeight,A2=vt.widgetTitleHeight,j4=vt.scrollBarColor,W=vt.scrollBarSize,g2=vt.scrollBarTimeout,F2=vt.scrollBarMinLength,W2=vt.scrollBarInteractiveSize,s2=vt.zoomIncrement,S2=vt.scrollZoomIncrement,y2=vt.pinchZoomIncrement,x2=vt.zoomMax,w2=vt.zoomMin,O2=vt.createObject,_2=vt.preventDefault,zt=vt.setImage,z=vt.getImage,p2=vt.isImageComplete,q2=vt.drawCenterImage,u2=vt.drawStretchImage,i2=vt.getId,I2=vt.callLater,D2=vt.cancelLater,h2=vt.sortFunc,o2=vt.clone,e2=vt.getClass,c2=vt.startAnim,t2=vt.brighter,d2=vt.darker,N2=vt.drawText,Q2=vt.getTextSize,L2=vt.isLeftButton,j2=vt.isMiddleButton,r2=vt.isRightButton,X2=vt.getTouchCount,U2=vt.isDoubleClick,l2=vt.isShiftDown,b2=vt.isCtrlDown,K2=vt.getClientPoint,z2=vt.getPagePoint,n2=vt.getDistance,$2=vt.unionPoint,V2=vt.unionRect,P2=vt.containsPoint,k2=vt.containsRect,C2=vt.intersectsRect,a2=vt.intersection,Ts=vt.getWindowInfo,Bs=vt.grow,Gs=vt.getLogicalPoint,Hs=vt.getScreenPoint,fs=vt.startDragging,vs=vt.removeHTML,Js=vt.createElement,Ms=vt.segmentResolution,Ys=vt.shapeResolution,ms=vt.shapeSide,Es=vt.def,r4=function(T,B,G){Es("ht."+T,B,G)},Zs=function(T,B){T.childNodes.forEach(function(T){B(T),Zs(T,B)})},Rs=(S1(vt,{toolTipLabelColor:m2,toolTipLabelFont:E2,toolTipBackground:q.toolTipBackground,toolTipShadowColor:F,debugTipLabelFont:E2,debugTipLabelColor:m2,debugTipBackground:q.toolTipBackground,drawBreakableText:P1,setDevicePixelRatio:function(T){B2=vt.devicePixelRatio="number"==typeof T?T:C9(Q),Zs(R.body,function(T){(T=T._ht)&&T._canvas&&(b1(T._canvas,T.getWidth(),T.getHeight()),T.redraw?T.redraw():T.iv())})},getPosition3dGap:function(){return f$()}},!0),1e-6),As="undefined"!=typeof Uint16Array?Uint16Array:Array,gs="undefined"!=typeof Uint32Array?Uint32Array:As,Fs="undefined"!=typeof Float32Array?Float32Array:Array,Ws=function(T,B,G){return T=[T[0]-B[0],T[1]-B[1],T[2]-B[2]],G&&0<(B=n2(T))&&(T[0]/=B,T[1]/=B,T[2]/=B),T},ss=function(){var T,B="charCodeAt",G=2*(2*Re.length+1);for(T in Q)if(T===gt+Te[0]+(Ze.length+2)){var H=Q[T];if(!H)break;for(var f=H.length,v=0;v<f;v++)if(H[v][B](0)===G&&H[v+1]!=ft&&H[v+1]===Ze[0]&&H[v+2]!=ft&&H[v+2][B](0)===G){for(var J=v+3;J<f;J++)if(H[J][B](0)===G){if(0==H[J+1])for(var M,Y=J+2;Y<f;Y++){if(H[Y][B](0)===G){0==H[Y-1]&&M&&(Ut=M.substr(0,M.length-1));break}M==ft?M=H[Y]:M+=H[Y]}break}break}break}return function(T){return[-T[0],-T[1],-T[2]]}}(),Ss=function(T,B){return 3===T.length?T[0]*B[0]+T[1]*B[1]+T[2]*B[2]:T[0]*B[0]+T[1]*B[1]},ys=function(){var T=new Array(16);return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},xs=ys(),ws=function(T){var B=new Array(16);return B[0]=T[0],B[1]=T[1],B[2]=T[2],B[3]=T[3],B[4]=T[4],B[5]=T[5],B[6]=T[6],B[7]=T[7],B[8]=T[8],B[9]=T[9],B[10]=T[10],B[11]=T[11],B[12]=T[12],B[13]=T[13],B[14]=T[14],B[15]=T[15],B},Os=function(T){return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},_s=function(T,B){var G=T[0],H=T[1],f=T[2];return T[0]=B[0]*G+B[4]*H+B[8]*f+B[12],T[1]=B[1]*G+B[5]*H+B[9]*f+B[13],T[2]=B[2]*G+B[6]*H+B[10]*f+B[14],T},ps=function(T,B){var G=T[0],H=T[1],f=T[2],v=T[3];return T[0]=B[0]*G+B[4]*H+B[8]*f+B[12]*v,T[1]=B[1]*G+B[5]*H+B[9]*f+B[13]*v,T[2]=B[2]*G+B[6]*H+B[10]*f+B[14]*v,T[3]=B[3]*G+B[7]*H+B[11]*f+B[15]*v,T},qs=function(T,B,G){var H,f;if("number"==typeof T?f=T:T&&(f=T.length,H=!0),f)for(var v,J=0,M=0;J<f;J++)v=B?Jt(f-1,1==M?J+1:2==M?J-1:J):J,G(H?T[v]:v),2<++M&&(M=0)},us=(vc=x1(T[1]+T[7]),Jc=x1(T[0]+T[3]-T[10]),Mc=x1(T[8]+2),Yc=function(){return Hc=fc.charAt(Gc),Gc+=1,Hc},mc=function(){var T="";if(Hc===Mc)for(;Yc();){if(Hc===Mc)return Yc(),T;T+=Hc}else Yc()},Ec=function(){for(;Hc&&Hc<=" ";)Yc()},Zc=function(){if(Ec(),Hc!==vc)return mc();var T,B={};if(Hc===vc){if(Yc(),Ec(),Hc===Jc)return Yc(),B;for(;Hc;){if(T=mc(),Ec(),Yc(),B[T]=Zc(),Ec(),Hc===Jc)return Yc(),B;Yc(),Ec()}}},function(T){if(_={},T&&(fc=T,Gc=0,Hc=" ",T=Zc(),Ec(),!Hc))return T}),is=function(T,B){var G,H,f,v,J,M,Y,m,E;B&&(G=Yt(B),B=Mt(B),H=T[4],f=T[5],v=T[6],J=T[7],M=T[8],Y=T[9],m=T[10],E=T[11],T[4]=H*B+M*G,T[5]=f*B+Y*G,T[6]=v*B+m*G,T[7]=J*B+E*G,T[8]=M*B-H*G,T[9]=Y*B-f*G,T[10]=m*B-v*G,T[11]=E*B-J*G)},Is=function(T,B){var G,H,f,v,J,M,Y,m,E;B&&(G=Yt(B),B=Mt(B),H=T[0],f=T[1],v=T[2],J=T[3],M=T[8],Y=T[9],m=T[10],E=T[11],T[0]=H*B-M*G,T[1]=f*B-Y*G,T[2]=v*B-m*G,T[3]=J*B-E*G,T[8]=H*G+M*B,T[9]=f*G+Y*B,T[10]=v*G+m*B,T[11]=J*G+E*B)},Ds=function(T,B){var G,H,f,v,J,M,Y,m,E;B&&(G=Yt(B),B=Mt(B),H=T[0],f=T[1],v=T[2],J=T[3],M=T[4],Y=T[5],m=T[6],E=T[7],T[0]=H*B+M*G,T[1]=f*B+Y*G,T[2]=v*B+m*G,T[3]=J*B+E*G,T[4]=M*B-H*G,T[5]=Y*B-f*G,T[6]=m*B-v*G,T[7]=E*B-J*G)},hs=function(T,B,G){return os(ft,!1===G?ft:T.getFinalScale3d(),T.getFinalRotation3d(),T.getRotationMode(),T.p3(),ft,B)},os=function(T,B,G,H,f,v,J){return v=v||ys(),f&&m$(v,f),lW(v,G,H),J&&Z$(v,v,J),B&&E$(v,B),T&&Z$(v,v,T),v},es=function(T,B,G){B=dt(B),G=dt(G),this.g=T,this._84O=B,this._85O=G,this._70I=!0,this.F=0,this._83O=B+G,this.pen={x:0,y:0}},cs="lineDashOffset",ts="setLineDash",ds=function(T,B,G){return p1(B)?T:T[ts]?(T[ts](B),G&&(T.lineDashOffset=G),T):new es(T,B[0],1<B.length?B[1]:B[0])},Ns=function(T,B){!p1(B)&&T[ts]&&(T[ts](Nw),T.lineDashOffset=0)},Qs=(Es(es,N,{_69I:6,moveTo:function(T,B){var G=this.pen;G.x=T,G.y=B,this.g.moveTo(T,B),this.start||(this.start={x:T,y:B})},lineTo:function(T,B){var G=this,H=G.pen,f=T-H.x,v=B-H.y,v=ct(v,f),f=Mt(v),v=Yt(v),J=G._23O(H.x,H.y,T,B),M=G._85O,Y=G._84O,m=G._83O;if(G.F){if(G.F>J)return G._70I?G._72I(T,B):G.moveTo(T,B),void(G.F-=J);if(G._70I?G._72I(H.x+f*G.F,H.y+v*G.F):G.moveTo(H.x+f*G.F,H.y+v*G.F),J-=G.F,G.F=0,G._70I=!G._70I,!J)return}var E=pt(J/m);if(E){for(var Z=f*Y,R=v*Y,A=f*M,g=v*M,F=0;F<E;F++)G._70I?(G._72I(H.x+Z,H.y+R),G.moveTo(H.x+A,H.y+g)):(G.moveTo(H.x+A,H.y+g),G._72I(H.x+Z,H.y+R));J-=m*E}G._70I?Y<J?(G._72I(H.x+f*Y,H.y+v*Y),G.moveTo(T,B),G.F=M-(J-Y),G._70I=!1):(G._72I(T,B),J===Y?(G.F=0,G._70I=!G._70I):(G.F=Y-J,G.moveTo(T,B))):M<J?(G.moveTo(H.x+f*M,H.y+v*M),G._72I(T,B),G.F=Y-(J-M),G._70I=!0):(G.moveTo(T,B),J===M?(G.F=0,G._70I=!G._70I):G.F=M-J)},quadraticCurveTo:function(T,B,G,H){var f,v=this,J=(Y=v.pen).x,M=Y.y,Y=v._22O(J,M,T,B,G,H),m=0,E=0,Z=v._85O,R=v._84O;if(v.F){if(v.F>Y)return v._70I?v._71I(T,B,G,H):v.moveTo(G,H),void(v.F-=Y);if(m=v.F/Y,f=v._20O(J,M,T,B,G,H,m),v._70I?v._71I(f[2],f[3],f[4],f[5]):v.moveTo(f[4],f[5]),v.F=0,v._70I=!v._70I,!Y)return}var A,g=pt((Y-Y*m)/v._83O),F=R/Y,W=Z/Y;if(g)for(var s=0;s<g;s++)v._70I?(f=v._21O(J,M,T,B,G,H,m,E=m+F),v._71I(f[2],f[3],f[4],f[5]),m=E,f=v._21O(J,M,T,B,G,H,m,E=m+W),v.moveTo(f[4],f[5])):(f=v._21O(J,M,T,B,G,H,m,E=m+W),v.moveTo(f[4],f[5]),m=E,f=v._21O(J,M,T,B,G,H,m,E=m+F),v._71I(f[2],f[3],f[4],f[5])),m=E;A=Y-Y*m,v._70I?R<A?(f=v._21O(J,M,T,B,G,H,m,E=m+F),v._71I(f[2],f[3],f[4],f[5]),v.moveTo(G,H),v.F=Z-(A-R),v._70I=!1):(f=v._19O(J,M,T,B,G,H,m),v._71I(f[2],f[3],f[4],f[5]),Y===R?(v.F=0,v._70I=!v._70I):(v.F=R-A,v.moveTo(G,H))):Z<A?(f=v._21O(J,M,T,B,G,H,m,E=m+W),v.moveTo(f[4],f[5]),f=v._19O(J,M,T,B,G,H,E),v._71I(f[2],f[3],f[4],f[5]),v.F=R-(A-Z),v._70I=!0):(v.moveTo(G,H),A===Z?(v.F=0,v._70I=!v._70I):v.F=Z-A)},bezierCurveTo:function(){var T=arguments;this.pen={x:T[4],y:T[5]},this.g.bezierCurveTo(T[0],T[1],T[2],T[3],T[4],T[5])},arc:function(T,B,G,H,f,v){v||(H=-H,f=-f);var J,M,Y,m,E,Z=T,R=B,v=H,A=G,g=G,B=!1,F=-((T=it(T=f-H)>2*o?2*o:T)/(J=qt(it(T)/(o/4)))),W=-v;if(0<J){T=Z+Mt(v)*A,v=R+Yt(-v)*g,B?this.lineTo(T,v):this.moveTo(T,v);for(var s=0;s<J;s++)E=(W+=F)-F/2,M=Z+Mt(W)*A,Y=R+Yt(W)*g,m=Z+Mt(E)*(A/Mt(F/2)),E=R+Yt(E)*(g/Mt(F/2)),this.quadraticCurveTo(m,E,M,Y)}},rect:function(T,B,G,H){this.pen={x:T,y:B},this.moveTo(T,B),this.lineTo(T,B+H),this.lineTo(T+G,B+H),this.lineTo(T+G,B),this.lineTo(T,B)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(T,B,G,H){return ut((G-=T)*G+(T=H-B)*T)},_22O:function(T,B,G,H,f,v,J){for(var M,Y,m,E,Z=0,R=T,A=B,g=0<J?J:this._69I,F=1;F<=g;F++)Z+=this._23O(R,A,M=(Y=(m=1-(E=F/g))*m)*T+(m*=2*E)*G+(E*=E)*f,Y=Y*B+m*H+E*v),R=M,A=Y;return Z},_21O:function(T,B,G,H,f,v,J,M){return 0===J?this._20O(T,B,G,H,f,v,M):1===M?this._19O(T,B,G,H,f,v,J):((T=this._20O(T,B,G,H,f,v,M)).push(J/M),this._19O.apply(this,T))},_20O:function(T,B,G,H,f,v,J){var M,Y;return 1!==J&&(M=G+(f-G)*J,Y=H+(v-H)*J,f=(G=T+(G-T)*J)+(M-G)*J,v=(H=B+(H-B)*J)+(Y-H)*J),[T,B,G,H,f,v]},_19O:function(T,B,G,H,f,v,J){var M;return 1!==J&&(T=(M=T+(G-T)*J)+((G+=(f-G)*J)-M)*J,B=(M=B+(H-B)*J)+((H+=(v-H)*J)-M)*J),[T,B,G,H,f,v]},_72I:function(T,B){var G=this.pen;T===G.x&&B===G.y||(G.x=T,G.y=B,this.g.lineTo(T,B))},_71I:function(T,B,G,H){var f=this.pen;T===G&&B===H&&G===f.x&&H===f.y||(f.x=G,f.y=H,this.g.quadraticCurveTo(T,B,G,H))}}),k9.ms_quickVisible=function(T,B){T._4BQ=!1,T._4CQ=function(T){var B=T._4EQ;return B!==Ht?B:T._4EQ=this._4FQ(T)},T._4DQ=function(T){var B;T?(T._4EQ=Ht,B=this,T instanceof nW||R1(T)||T instanceof aW||T.ISubGraph?T.eachChild(function(T){B.invalidateQuickVisible(T)}):T.getEdges&&(T=T.getEdges())&&T.each(function(T){B.invalidateQuickVisible(T)})):this.dm().each(function(T){T._4EQ=Ht})},T.enableQuickVisibleMode=function(){return!this._4BQ&&!this._visibleFunc&&(this._4BQ=!0,this._4FQ=this.isVisible,this.isVisible=this._4CQ,this.invalidateQuickVisible=this._4DQ,!0)},T.disableQuickVisibleMode=function(){return this._quickVisiblePending=!1,!!this._4BQ&&(this._4BQ=!1,this.isVisible=this._4FQ,this.invalidateQuickVisible=jw,!0)},T.isQuickVisibleMode=function(){return this._4BQ},T.invalidateQuickVisible=jw},T=tt()+1,B&&Q.console,ft),Ls=ft,js=vt.checkLoadingCompType=function(T){Qs&&!T._72O_&&((Ls=Ls||{})[T._72O_=i2()]=T)},rs=function(G,T){var H,B;(T=T||G)&&!(Qs=Qs||{})[G]&&(H=new Ga,Qs[T]={request:H,url:T},(T=vt.beforeLoadURL(T,G)).data?(B=vt.parse(T.data),Xs(G,B),vt.handleCompTypeLoaded(G,B)):(H.onload=function(T){var B;200===this.status||0===this.status?(B=vt.parse(H.getResponseText()),Xs(G,B),vt.handleCompTypeLoaded(G,B)):Xs(G,ft)},H.onerror=function(T){Xs(G,ft)},(B={}).url=encodeURI(T),B.sync=!1,H.send(B)))},Xs=function(T,B){if(Dw[T]=B,delete Qs[T],_1(Qs)&&(Qs=ft,Ls)){for(var G in Ls)(H=Ls[G]).invalidateAll&&H.invalidateAll(Ht,"compTypeLoaded",T),H.redraw&&H.redraw(),H.iv(),delete H._72O_;Ls=ft}if(B&&Ls)for(var G in Ls){var H;(H=Ls[G]).invalidateAll&&H.invalidateAll(Ht,"compTypeLoading",T),H.redraw&&H.redraw(),H.iv()}},Us=q.chart,ls="",bs=!0,Ks=vt.compStack=[],zs=/^style@/,ns=/^attr@/,$s=/^field@/,Vs={x:.5,y:.5},Ps=function(T,B,G){return!!T&&((H=G&&G.isImageFitSize?G.isImageFitSize(B,T):H)==ft?n(T.fitSize,B,G):H);var H},ks=function(T,B,G,H){return T?!(Ps(T,B,G)&&H||null!=(H=n(T.width,B,G)))?20:H:0},Cs=function(T,B,G,H){return T?!(Ps(T,B,G)&&H||null!=(H=n(T.height,B,G)))?20:H:0},n=function(T,B,G){if(!T||!T.func)return T;var H=T.func,f=T.value,T=Y1(H)?G&&G.vectorDataBindingDisabled&&!T.isSafeFunc?f:H(B,G):B instanceof WJ||L.ui&&B instanceof L.ui.View?ns.test(H)?B.a(ls+H.slice(5)):zs.test(H)?B.s(ls+H.slice(6)):$s.test(H)?B[H.slice(6)]:B[H]?B[H](G):f:f;return f!==Ht&&T==ft?f:T},as=vt.drawImage=(U=function(T,B,G){var H,f,v=!1;return T.prefix&&Rc instanceof WJ&&(f=Rc.a(ls+B))!==Ht&&(v=!0,H=f),(H=H===Ht?T[B]:H)&&H.func&&(v=!0,H=n(H,Rc,Ac)),G&&(H=G(H),v||(T[B]=H)),H},sc=function(T){var B=U(T,"anchorX"),G=U(T,"anchorY");return B!==Ht||G!==Ht?{x:B===Ht?Vs.x:B,y:G===Ht?Vs.y:G}:(B=U(T,"type"),G=U(T,"name"),"image"===B&&G&&(T=z(G))&&T.anchorX!==Ht&&T.anchorY!==Ht?{x:T.anchorX,y:T.anchorY}:Vs)},Sc={border:function(T,B){J4(X,GN(T,bB),B.x,B.y,B.width,B.height,U(T,"width"))},image:function(T,B){var G=Fc||U(T,bB),H=Wc||U(T,"blendMode"),f=U(T,"name");(f=(f=z(f,G,H))&&f.cacheRule!=ft?VJ(X,f,U(T,"stretch"),B.width,B.height,Rc,Ac,G):f)?u2(X,f,U(T,"stretch"),B.x,B.y,B.width,B.height,Rc,Ac,G,null,H):bs=!1},text:function(T,M){var B,Y,G,m,H,E,Z,R,f,A,g,F,W,s,S,y,x,v,w,J,O,_,p=U(T,"text");p!=ft&&(p+="",O=U(T,"gradientPack"),_=U(T,"gradient"),B=GN(T,"gradientColor"),Y=U(T,"font"),G=U(T,"vertical"),m=U(T,"verticalGap")||0,H=U(T,"align"),E=U(T,"vAlign"),Z=U(T,"decoration"),R=U(T,"letterGap")||0,f=U(T,"wrap"),A=U(T,"borderWidth"),g=U(T,"borderColor"),F=Q2(Y,p),O?(W=K0(X,O,GN,!1,M),X.restore()):W=GN(T,bB),!O&&_&&(W=vt.createGradient(X,_,W||vt.labelColor,B||q.imageGradient,M.x,M.y,M.width,M.height)),A&&m1(g)&&(g=K0(X,g,GN,!1,M),X.restore()),G?(null==m&&(m=1),s=[],S=[],J=f?n1(p,M.height,Y,R,G,m):[p],X.textBaseline=Ge,X.font=Y,J.forEach(function(T){for(var B=T.length,G=0,H=(B-1)*m,f=0;f<B;f++){var v=X.measureText(T[f]);s.push(v),H+=v.fontBoundingBoxDescent||F.height,G=Gt(G,v.width)}S.push({width:G,height:H})}),v=(J.length-1)*R,S.forEach(function(T){v+=T.width}),y=H&&H!==Te?H===Be?M.x+M.width-v:M.x+(M.width-v)/2:M.x,w=0,J.forEach(function(T,B){var G=S[B],H=T.length;x=E&&E!==Je?E===Ge?M.y:M.y+M.height-G.height:M.y+(M.height-G.height)/2;for(var f=0;f<H;f++){var v=T[f],J=s[w].fontBoundingBoxDescent||F.height;V1(X,v,Y,W,{x:y,y:x,width:G.width,height:J},fe,E,Z,R,A,g),x+=J+m,w++}y+=G.width+R})):1<(T=(J=f?n1(p,M.width,Y,R,G,m):p.split("\n")).length)?(O=T*Q2(Y,p).height+m*(T-1),_=o2(M),E&&E!==Je?E===He&&(_.y=M.y+M.height-O):_.y=M.y+(M.height-O)/2,_.height=O,P1(X,J,_,Y,W,H||Te,Z,R,A,g)):V1(X,p,Y,W,M,H,E,Z,R,A,g))},pieChart:function(T,B){var G=U(T,he),H=0;if(G&&(G.forEach(function(T){H+=T}),0<H)){for(var f=U(T,"colors")||Us,v=U(T,"startAngle")||0,J=U(T,"hollow"),M=U(T,ce),Y=U(T,Le),m=U(T,je),E=M?new $:ft,T=B.x,Z=B.y,R=B.width,A=T+R/2,g=Z+(B=B.height)/2,F=Jt(R,B)/2,W=0,s=0;s<G.length;s++){var S,y,x,w,O=G[s],_=v+mt*O/H;X.fillStyle=f[W++],W===f.length&&(W=0),X.beginPath(),J?(S=A+Mt(v)*F/2,y=g+Yt(v)*F/2,x=A+Mt(_)*F,w=g+Yt(_)*F,X.moveTo(S,y),X.arc(A,g,F/2,v,_,!1),X.lineTo(x,w)):X.moveTo(A,g),X.arc(A,g,F,_,v,!0),E&&(S=(v+_)/2,E.add({text:Y1(M)?M(O,s,H,Rc):O,x:A+Mt(S)*F*.75,y:g+Yt(S)*F*.75})),X.closePath(),X.fill(),v=_}E&&E.each(function(T){N2(X,T.text,Y,m,T.x,T.y,0,0,fe)})}},columnChart:function(T,B){var G=U(T,oe);if(G&&0<G.length){var H=G.length,f=U(T,ce),v=U(T,Le),J=U(T,je),M=f?new $:ft,Y=U(T,"minValue")||0,m=U(T,"maxValue");if(m==ft&&(m=0,G.forEach(function(T){U(T,he).forEach(function(T){m=Gt(m,T)})})),Y!==m){for(var E=B.height/(m-Y),Z=B.y+m*E,R=U(G[0],he).length,A=B.width/(3*R+1),g=2*A/H,F=0,W=0;W<H;W++)for(var s=G[W],S=U(s,bB),y=U(s,"colors"),x=U(s,he),w=0;w<R;w++){y?X.fillStyle=y[w]:S?X.fillStyle=S:(X.fillStyle=Us[F++],F===Us.length&&(F=0));var O,_=x[w],p=_*E,q=B.x+(1+3*w)*A+W*g;k0(X,q,Z-p,g,p),M&&(_=Y1(f)?f(_,w,s,Rc):_,O=Q2(v,_).height,M.add({x:q,y:Z-p-O,width:g,height:O,text:_}))}M&&M.each(function(T){N2(X,T.text,v,J,T.x,T.y,T.width,T.height,fe)})}}},stackedColumnChart:function(T,B){var G=U(T,oe);if(G&&0<G.length){var H=G.length,f=U(G[0],he).length,v=B.width/(3*f+1),J=0,M=U(T,"maxValue"),Y=U(T,ce),m=U(T,Le),E=U(T,je),Z=Y?new $:ft;if(M==ft)for(var M=0,R=0;R<f;R++){for(var A=0,g=0;g<H;g++)A+=U(G[g],he)[R];M=Gt(M,A)}if(0<M){for(R=0;R<f;R++)for(var F=B.y+B.height,g=0;g<H;g++){var W=G[g],s=U(W,bB),S=U(W,he)[R],y=S/M*B.height,s=(s?X.fillStyle=s:(X.fillStyle=Us[J++],J===Us.length&&(J=0)),F-=y,{x:B.x+(1+3*R)*v,y:F,width:2*v,height:y});k0(X,s.x,s.y,s.width,s.height),Z&&(s.text=Y1(Y)?Y(S,R,W,Rc):S,Z.add(s))}Z&&Z.each(function(T){N2(X,T.text,m,E,T.x,T.y,T.width,T.height,fe)})}}},percentageColumnChart:function(T,B){var G=U(T,oe);if(G&&0<G.length){for(var H=G.length,f=U(G[0],he).length,v=B.width/(3*f+1),J=0,M=U(T,ce),Y=U(T,Le),m=U(T,je),E=M?new $:ft,Z=0;Z<f;Z++){for(var R=0,A=0;A<H;A++)R+=U(G[A],he)[Z];if(0<R)for(var g=B.y+B.height,A=0;A<H;A++){var F=G[A],W=U(F,bB),s=U(F,he)[Z],S=s/R*B.height,W=(W?X.fillStyle=W:(X.fillStyle=Us[J++],J===Us.length&&(J=0)),g-=S,{x:B.x+(1+3*Z)*v,y:g,width:2*v,height:S});k0(X,W.x,W.y,W.width,W.height),E&&(W.text=Y1(M)?M(s,Z,F,Rc):s,E.add(W))}}E&&E.each(function(T){N2(X,T.text,Y,m,T.x,T.y,T.width,T.height,fe)})}},lineChart:function(T,B){var G=U(T,oe);if(G&&0<G.length){var H=G.length,f=U(T,"minValue")||0,v=U(T,"maxValue");if(v==ft&&(v=0,G.forEach(function(T){U(T,he).forEach(function(T){v=Gt(v,T)})})),f!==v)for(var J=B.height/(v-f),M=B.y+v*J,Y=U(G[0],he).length,m=B.width/(3*Y+1),E=0,Z=U(T,"lineWidth")||2,R=U(T,"line3d"),A=U(T,"linePoint"),g=U(T,ce),F=U(T,Le),W=U(T,je),s=0;s<H;s++){var S=G[s],y=U(S,bB),x=U(S,he);y?X.strokeStyle=y:(y=X.strokeStyle=Us[E++],E===Us.length&&(E=0)),X.beginPath();for(var w=0;w<Y;w++){var O=B.x+(2+3*w)*m,_=M-x[w]*J;0===w?X.moveTo(O,_):X.lineTo(O,_)}if(X.lineWidth=Z,X.stroke(),R&&V0(X,y,ft,Z,gc),A||g)for(var p,q=Z/2+2,w=0;w<Y;w++){var u,i,I,D,h=x[w],O=B.x+(2+3*w)*m,_=M-h*J;Y1(A)?A(X,O,_,y,w,S,Rc):A&&(X.fillStyle=y,X.beginPath(),X.arc(O,_,q,0,mt,!0),X.fill()),Y1(g)?p=g(h,w,S,Rc):g&&(p=h),p&&(h=Q2(F,p).height,(u=X.shadowBlur)&&(i=X.shadowOffsetX,I=X.shadowOffsetY,D=X.shadowColor,X.shadowOffsetX=0,X.shadowOffsetY=0,X.shadowBlur=0,X.shadowColor=ft),N2(X,p,F,W,O,_-h-q+2,0,h,fe),u&&(X.shadowOffsetX=i,X.shadowOffsetY=I,X.shadowBlur=u,X.shadowColor=D))}}}}},function(T,c,B,G,H,f,t,v,J,M){if(c&&H&&f){var Y,m,d,E,Z,R,A,g,F,N,W=[X,Rc,Ac,gc,Fc,Wc],T=(X=T,Ac=v,!(Rc=t)&&Ac&&Ac.isSelfViewEvent&&(Rc=Ac),gc=Ac&&Ac._zoom||1,Fc=J,Wc=M,H),v=f;if(RW()&&(0===X.maxSize&&!RW[0]||(m=!0),X.texureImage2D&&!RW[1]||(E=!0),X.texureImage3D&&!RW[2]||(Z=!0),X.drawDNDState&&!RW[3]||(A=!0),X.drawRect&&!RW[Le[2]]||(Y=!0),L[HB[1]+TB[0]+Ke[1]]&&!RW[TB[0]]||(g=!0),Lw.widget[0]&&!RW[4]||(R=!0),m&&E&&Z&&R&&A&&g&&Y&&(T=B,v=G)),c.tagName)return Et(Ut)&&!Q[Ut]||X.drawImage(c,T,v,H,f),void mN(W);0!=U(c,"visible")&&(Fc=Fc||n(c.color,Rc,Ac),M||(Wc=n(c.blendMode,Rc,Ac)),Et(Ut)&&!Q[Ut]&&(H=T,f=v),J=ks(c,Rc,Ac,H),m=Cs(c,Rc,Ac,f),d={x:0,y:0,width:J,height:m,fitSize:Ps(c,Rc,Ac)},E=U(c,"clip"),Z=U(c,"opacity"),d.fitSize&&(R=d.rw=n(c.width,Rc,Ac)||20,d.widthScale=J/R,A=d.rh=n(c.height,Rc,Ac)||20,d.heightScale=m/A),X.save(),X.interactiveInfo&&(F=(g=X.interactiveInfo.matrix).clone(),g.appendTranslate(T,v).appendScale(H/J,f/m),X.interactiveInfo.refRect=d),f0(X,T,v),J===H&&m===f||X.scale(H/J,f/m),E&&(Y1(E)?E(X,J,m,Rc,Ac,c):(X.beginPath(),X.rect(0,0,J,m),X.clip())),Z!=ft&&(X.globalAlpha*=Z),N=X.compGray,U(c,"comps").forEach(function(T){var B;if(T.gray&&(X.compGray=!0),T.prefix&&(B=ls,(E=n(T.prefix,Rc,Ac))&&(ls=ls+E+".")),0==(E=c,u=T,Ac&&Ac.getDrawableState?q=Ac.getDrawableState(Rc):Ac&&Ac.getState?q=Ac.getState(Rc):(q=Rc instanceof WJ?Rc.s(uB):null)!==Ht&&null!==q||(q=U(E,uB)),((E=U(u,uB))===Ht||null===E||E===q)&&U(u,$e)))T.prefix&&(ls=B);else{Ks.splice(0,0,T),X.interactiveInfo&&(G=X.interactiveInfo.matrix.clone());var G,H,f,v,J,M,Y,m,E,Z,R,A,g,F,W,s,S,y,x,w,O,_,p,q=U(T,"opacity"),u=U(T,"shadow"),i=U(T,"type"),I=U(T,"refRect")||d,D=(E=I,Y=U(m=T,j),S=sc(m),m1(Y)&&(_=Y.length,F=U(m,"relative"),p=E.width,x=E.height,4===_?(Y={x:Y[0],y:Y[1],width:Y[2],height:Y[3]},F&&(Y.x*=p,Y.y*=x,Y.width*=p,Y.height*=x)):3===_&&(_=Y[0],Y={width:Y[1],height:Y[2]},F&&(Y.width*=p,Y.height*=x),"object"==typeof _?_.length&&(_={x:_[0],y:_[1]}):_=p4(_,E,Y),Y.x=_.x-Y.width*S.x,Y.y=_.y-Y.height*S.y),Y.x+=U(m,"offsetX")||0,Y.y+=U(m,"offsetY")||0,!F&&E.fitSize&&(Y=fN(m,Y,E))),Y);if(q!=ft&&(H=X.globalAlpha,X.globalAlpha*=q),u&&(p=gc*vt.devicePixelRatio,f=X.shadowOffsetX,v=X.shadowOffsetY,J=X.shadowBlur,M=X.shadowColor,x=U(T,"shadowOffsetX"),_=U(T,"shadowOffsetY"),S=U(T,"shadowBlur"),F=GN(T,"shadowColor"),X.shadowOffsetX=(x==ft?3:x)*p,X.shadowOffsetY=(_==ft?3:_)*p,X.shadowBlur=(S==ft?6:S)*p,X.shadowColor=F||GN(Q4)),"save"===i)X.save();else if("endClip"===i||"restore"===i)X.restore();else if("clip"===i)X.save(),n0(X,U(T,"points",HN),U(T,"segments",vN),!0),X.clip();else if(A4[i]){if(YN(T,i,D=D||{x:0,y:0,width:I.width,height:I.height},I),T.prefix&&0===T.prefix.indexOf("ui.")&&Ac&&L.ui&&Ac instanceof L.ui.View){Ac._vectorCompInfo||(Ac._vectorCompInfo=[]);for(var h=!1,o=0;o<Ac._vectorCompInfo.length;o++){var e=Ac._vectorCompInfo[o];if(T.prefix===e.comp.prefix&&t===e.data){Ac._vectorCompInfo[o]={comp:T,type:i,rect:D,compRefRect:I,data:t,image:c,transform:X.getTransform()},h=!0;break}}h||Ac._vectorCompInfo.push({comp:T,type:i,rect:D,compRefRect:I,data:t,image:c,transform:X.getTransform()})}}else i===se?YN(T,i,D,I):"SVGPath"===i?(m=i,E=D,S=U(Y=T,"path"),y=U(Y,ze),x=U(Y,"scaleX"),w=U(Y,"scaleY"),O=sc(Y),_=ft,p=b0(null,S),E||((E=Y.unionRect)||(E=$2(p),Y.path.func||(Y.unionRect=E)),_=E),E&&((_=_||Y.unionRect)||(_=$2(p),Y.path.func||(Y.unionRect=_)),p=JN(Y,E,_,y,x,w,O),E=U(Y,"borderPattern"),y=ds(X,E),x=GN(Y,"background"),w=GN(Y,"borderColor"),O=U(Y,"borderWidth"),F=U(Y,"gradient"),W=GN(Y,"gradientColor"),s=U(Y,"border3d"),Z=GN(Y,"border3dColor"),R=U(Y,"border3dAccuracy"),A=X.lineJoin,g=X.lineCap,X.lineJoin=U(Y,"borderJoin")||Y2,X.lineCap=U(Y,"borderCap")||M2,x?(a0(X,x,F,W,_),b0(X,S),X.fill(),y!==X&&b0(X,S)):b0(X,S),(F=U(Y,"borderWidthAbsolute"))&&(X.save(),X.setTransform(1,0,0,1,0,0)),O&&w&&(X.lineWidth=O,X.strokeStyle=w,X.stroke(),s&&V0(X,w,Z,O,gc,R)),Ns(X,E),U(Y,"dash")&&0<(W=U(Y,"dashWidth")||O)&&(E=U(Y,"dashPattern")||J2,y=ds(X,E,U(Y,"dashOffset")),s=GN(Y,"dashColor")||GN(u4),y!==X&&b0(X,S),X.strokeStyle=s,X.lineWidth=W,X.stroke(),U(Y,"dash3d")&&V0(X,s,GN(Y,"dash3dColor"),W,gc,U(Y,"dash3dAccuracy")),Ns(X,E)),F&&X.restore(),m===j&&M4(X,x,U(Y,"depth"),_),X.lineJoin=A,X.lineCap=g,p&&MN())):(y=JN(T,D=D||{x:0,y:0,width:I.width,height:I.height},D,w=U(T,ze),Z=U(T,"scaleX"),R=U(T,"scaleY"),O=sc(T)),Y1(i)?(BN(T,i),vt.drawCompType(i,X,D,T,Rc,Ac)):vt.getCompType(i)?(s=(S=vt.getCompType(i)).func||S,BN(T,S),vt.drawCompType(s,X,D,T,Rc,Ac)):Sc[i]?Sc[i](T,D):vt.getCompType(i)===Ht&&cw.test(i)&&(rs(i),bs=!1),y&&MN());u&&(X.shadowOffsetX=f,X.shadowOffsetY=v,X.shadowBlur=J,X.shadowColor=M),q!=ft&&(X.globalAlpha=H),X.interactiveInfo&&(X.interactiveInfo.matrix=G),T.prefix&&(ls=B),Ks.splice(0,1),X.compGray=N}}),X.interactiveInfo&&(X.interactiveInfo.matrix=F),X.restore()),mN(W)}}),TJ=(vt.getCurrentComp=function(){return Ks[0]},vt.getParentComp=function(){return Ks[1]},vt.getInternal=function(){return{isEnter:e0,isEsc:c0,isSpace:o0,isLeft:i0,isUp:I0,isRight:D0,isDown:h0,addMethod:S1,superCall:O1,toPointsArray:$0,translateAndScale:H0,appendArray:W1,createWorldMatrix:os,vec3TransformMat4:_s,setCanvas:b1,createDiv:r1,createView:j1,createCanvas:X1,createImage:kw,initContext:G0,layout:D,fillRect:k0,Mat:L9,drawBorder:J4,isString:Et,setBorder:U1,getPropertyValue:h1,setPropertyValue:o1,drawVerticalLine:c1,draw3DRect:M4,getPinchDist:F4,isSameRect:q1,getPosition:p4,intersectionLineRect:I1,getNodeRect:yJ,getEdgeAgentPosition:QJ,getEdgeHostPosition:NJ,getImageWidth:ks,getImageHeight:Cs,initItemElement:L1,compileShaderAndFetchUniforms:Uo,composeShaderSource:Ko,decomposeShaderSource:bo,drawPoints:n0,createG2:ds,closePopup:A0,isH:B1,createAnim:s1,createNormalMatrix:k$,makeUVMatrix:Rx,toColorArray:U0,createNormals:x$,toFloatArray:co,glMV:C$,glPop:P$,batchShape:lx,createNodeMatrix:hs,getShapeModel:oo,getFaceInfo:Mx,transformAppend:aE,drawFaceInfo:Yx,glUploadData:K$,glUploadElementData:n$,glDrawArray:X$,glDrawElement:U$,glBindTexture:p$,pickValueToColor:gZ,to3dPointsArray:Lo,setGLDebugMode:function(T){m8=T},cube:function(){return{vs:Mo,is:Yo,uv:mo}},ui:function(){return{DataUI:ma,NodeUI:Za,EdgeUI:Ra,GroupUI:ga,ShapeUI:Wa,GridUI:Sa,Data3dUI:hZ,Node3dUI:oZ,Shape3dUI:tZ}},getInternalVersion:function(){return"U2FsdGVkX19u67I8SFNtwR1Px6TrV8RNJEIU+uyTOEU="},getDragger:function(){return g0},addMSMap:function(T){S1(k9,T)},k:Wt,overrideTimerFunc:function(T,B){I2=L.Default.callLater=T,D2=L.Default.cancelLater=B},canEnterEditDetailMode:zJ,addEventListener:Tt,removeEventListener:Bt,createGradientByPackedData:K0,completeCubeCenterOfModel3d:gx}},function(T){var x="toString",B="";function S(T,B,G){T!=ft&&(B==ft&&UB!=typeof T?this._54O(T,256):this._54O(T,B))}st=T["D"+11182[x](Dt(2,5))];var G=S.prototype;function y(){return new S(ft)}Pe+=Ye.substr(0,1);for(var T="Microsoft Internet Explorer"==(T=T.navigator?T.navigator.appName:"")?(G.am=function(T,B,G,H,f,v){for(var J=32767&B,M=B>>15;0<=--v;){var Y=32767&this[T],m=this[T++]>>15,E=M*Y+m*J;f=((Y=J*Y+((32767&E)<<15)+G[H]+(1073741823&f))>>>30)+(E>>>15)+M*m+(f>>>30),G[H++]=1073741823&Y}return f},30):"Netscape"!=T?(G.am=function(T,B,G,H,f,v){for(;0<=--v;){var J=B*this[T++]+G[H]+f;f=pt(J/67108864),G[H++]=67108863&J}return f},26):(G.am=function(T,B,G,H,f,v){for(var J=16383&B,M=B>>14;0<=--v;){var Y=16383&this[T],m=this[T++]>>14,E=M*Y+m*J;f=((Y=J*Y+((16383&E)<<14)+G[H]+f)>>28)+(E>>14)+M*m,G[H++]=268435455&Y}return f},28),N=(G.DB=T,G.DM=(1<<T)-1,G.DV=1<<T,G.FV=Dt(2,52),G.F1=52-T,G.F2=2*T-52,"0123456789abcdefghijklmnopqrstuvwxyz"),m=[],J=function(T){return String.fromCharCode(T)},H="0".charCodeAt(0),f=0;f<=9;++f)m[H++]=f;for(H="a".charCodeAt(0),f=10;f<36;++f)m[H++]=f;for(H="A".charCodeAt(0),f=10;f<36;++f)m[H++]=f;function E(T){return N.charAt(T)}function v(T){var B=y();return B._58O(T),B}function w(T){var B,G=1;return 0!=(B=T>>>16)&&(T=B,G+=16),0!=(B=T>>8)&&(T=B,G+=8),0!=(B=T>>4)&&(T=B,G+=4),0!=(B=T>>2)&&(T=B,G+=2),0!=(B=T>>1)&&(T=B,G+=1),G}function M(T){this.m=T}function Y(T){this.m=T,this.mp=T._50O(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<T.DB-15)-1,this.mt2=2*T.t}function O(T,B){return new S(T,B)}function Z(){this.n=ft,this.e=0,this.d=ft,this.p=ft,this.q=ft,this.dmp1=ft,this.dmq1=ft,this._10A=ft}(T=M.prototype)._73O=function(T){return T.s<0||0<=T._52O(this.m)?T.mod(this.m):T},T.revert=function(T){return T},T._74O=function(T){T._49O(this.m,ft,T)},T._75O=function(T,B,G){T._47O(B,G),this._74O(G)},T._76O=function(T,B){T._48O(B),this._74O(B)},(T=Y.prototype)._73O=function(T){var B=y();return T.abs()._59O(this.m.t,B),B._49O(this.m,ft,B),T.s<0&&0<B._52O(S.ZERO)&&this.m._78O(B,B),B},T.revert=function(T){var B=y();return T._77O(B),this._74O(B),B},T._74O=function(T){for(var B=this;T.t<=B.mt2;)T[T.t++]=0;for(var G=0;G<B.m.t;++G){var H=32767&T[G],f=H*B.mpl+((H*B.mph+(T[G]>>15)*B.mpl&B.um)<<15)&T.DM;for(T[H=G+B.m.t]+=B.m.am(0,f,T,G,0,B.m.t);T[H]>=T.DV;)T[H]-=T.DV,T[++H]++}T._57O(),T._45O(B.m.t,T),0<=T._52O(B.m)&&T._78O(B.m,T)},T._75O=function(T,B,G){T._47O(B,G),this._74O(G)},T._76O=function(T,B){T._48O(B),this._74O(B)},G._77O=function(T){for(var B=this.t-1;0<=B;--B)T[B]=this[B];T.t=this.t,T.s=this.s},G._58O=function(T){this.t=1,this.s=T<0?-1:0,0<T?this[0]=T:T<-1?this[0]=T+this.DV:this.t=0},G._54O=function(T,B){var G,H=this;if(16==B)G=4;else if(8==B)G=3;else if(256==B)G=8;else if(2==B)G=1;else if(32==B)G=5;else{if(4!=B)return void H.fromRadix(T,B);G=2}H.t=0,H.s=0;for(var f,v=T.length,J=!1,M=0;0<=--v;){var Y=8==G?255&T[v]:(Y=v,(f=m[(f=T).charCodeAt(Y)])==ft?-1:f);Y<0?"-"==T.charAt(v)&&(J=!0):(J=!1,0==M?H[H.t++]=Y:M+G>H.DB?(H[H.t-1]|=(Y&(1<<H.DB-M)-1)<<M,H[H.t++]=Y>>H.DB-M):H[H.t-1]|=Y<<M,(M+=G)>=H.DB&&(M-=H.DB))}8==G&&0!=(128&T[0])&&(H.s=-1,0<M&&(H[H.t-1]|=(1<<H.DB-M)-1<<M)),H._57O(),J&&S.ZERO._78O(H,H)},G._57O=function(){for(var T=this.s&this.DM;0<this.t&&this[this.t-1]==T;)--this.t},G._59O=function(T,B){for(var G=this.t-1;0<=G;--G)B[G+T]=this[G];for(G=T-1;0<=G;--G)B[G]=0;B.t=this.t+T,B.s=this.s},G._45O=function(T,B){for(var G=T;G<this.t;++G)B[G-T]=this[G];B.t=Gt(this.t-T,0),B.s=this.s},G._44O=function(T,B){for(var G=this,H=T%G.DB,f=G.DB-H,v=(1<<f)-1,J=pt(T/G.DB),M=G.s<<H&G.DM,Y=G.t-1;0<=Y;--Y)B[Y+J+1]=G[Y]>>f|M,M=(G[Y]&v)<<H;for(Y=J-1;0<=Y;--Y)B[Y]=0;B[J]=M,B.t=G.t+J+1,B.s=G.s,B._57O()},G._46O=function(T,B){var G=this,H=(B.s=G.s,pt(T/G.DB));if(H>=G.t)B.t=0;else{var f=T%G.DB,v=G.DB-f,J=(1<<f)-1;B[0]=G[H]>>f;for(var M=H+1;M<G.t;++M)B[M-H-1]|=(G[M]&J)<<v,B[M-H]=G[M]>>f;0<f&&(B[G.t-H-1]|=(G.s&J)<<v),B.t=G.t-H,B._57O()}},G._78O=function(T,B){for(var G=this,H=0,f=0,v=Jt(T.t,G.t);H<v;)f+=G[H]-T[H],B[H++]=f&G.DM,f>>=G.DB;if(T.t<G.t){for(f-=T.s;H<G.t;)f+=G[H],B[H++]=f&G.DM,f>>=G.DB;f+=G.s}else{for(f+=G.s;H<T.t;)f-=T[H],B[H++]=f&G.DM,f>>=G.DB;f-=T.s}B.s=f<0?-1:0,f<-1?B[H++]=G.DV+f:0<f&&(B[H++]=f),B.t=H,B._57O()},G._47O=function(T,B){var G=this.abs(),H=T.abs(),f=G.t;for(B.t=f+H.t;0<=--f;)B[f]=0;for(f=0;f<H.t;++f)B[f+G.t]=G.am(0,H[f],B,f,0,G.t);B.s=0,B._57O(),this.s!=T.s&&S.ZERO._78O(B,B)},G._48O=function(T){for(var B=this.abs(),G=T.t=2*B.t;0<=--G;)T[G]=0;for(G=0;G<B.t-1;++G){var H=B.am(G,B[G],T,2*G,0,1);(T[G+B.t]+=B.am(G+1,2*B[G],T,2*G+1,H,B.t-G-1))>=B.DV&&(T[G+B.t]-=B.DV,T[G+B.t+1]=1)}0<T.t&&(T[T.t-1]+=B.am(G,B[G],T,2*G,0,1)),T.s=0,T._57O()},G._49O=function(T,B,G){var H=this;if(!((E=T.abs()).t<=0)){var f=H.abs();if(f.t<E.t)return B!=ft&&B._58O(0),void(G!=ft&&H._77O(G));G==ft&&(G=y());var v=y(),J=H.s,T=T.s,M=H.DB-w(E[E.t-1]),Y=(0<M?(E._44O(M,v),f._44O(M,G)):(E._77O(v),f._77O(G)),v.t),m=v[Y-1];if(0!=m){var E=m*(1<<H.F1)+(1<Y?v[Y-2]>>H.F2:0),Z=H.FV/E,R=(1<<H.F1)/E,A=1<<H.F2,g=G.t,F=g-Y,W=B==ft?y():B;for(v._59O(F,W),0<=G._52O(W)&&(G[G.t++]=1,G._78O(W,G)),S.ONE._59O(Y,W),W._78O(v,v);v.t<Y;)v[v.t++]=0;for(;0<=--F;){var s=G[--g]==m?H.DM:pt(G[g]*Z+(G[g-1]+A)*R);if((G[g]+=v.am(0,s,G,F,0,Y))<s)for(v._59O(F,W),G._78O(W,G);G[g]<--s;)G._78O(W,G)}B!=ft&&(G._45O(Y,B),J!=T&&S.ZERO._78O(B,B)),G.t=Y,G._57O(),0<M&&G._46O(M,G),J<0&&S.ZERO._78O(G,G)}}},G._50O=function(){if(this.t<1)return 0;var T=this[0];if(0==(1&T))return 0;var B=3&T;return 0<(B=(B=(B=(B=B*(2-(15&T)*B)&15)*(2-(255&T)*B)&255)*(2-((65535&T)*B&65535))&65535)*(2-T*B%this.DV)%this.DV)?this.DV-B:-B},G._51O=function(){return 0==(0<this.t?1&this[0]:this.s)},G.exp=function(T,B){if(4294967295<T||T<1)return S.ONE;var G,H=y(),f=y(),v=B._73O(this),J=w(T)-1;for(v._77O(H);0<=--J;)B._76O(H,f),0<(T&1<<J)?B._75O(f,v,H):(G=H,H=f,f=G);return B.revert(H)},G.toString=function(T){var B,G=this;if(G.s<0)return"-"+G._85O()[x](T);if(16==T)B=4;else if(8==T)B=3;else if(2==T)B=1;else if(32==T)B=5;else{if(4!=T)return G.toRadix(T);B=2}var H,f=(1<<B)-1,v=!1,J="",M=G.t,Y=G.DB-M*G.DB%B;if(0<M--)for(Y<G.DB&&0<(H=G[M]>>Y)&&(v=!0,J=E(H));0<=M;)Y<B?(H=(G[M]&(1<<Y)-1)<<B-Y,H|=G[--M]>>(Y+=G.DB-B)):(H=G[M]>>(Y-=B)&f,Y<=0&&(Y+=G.DB,--M)),(v=0<H||v)&&(J+=E(H));return v?J:"0"},G._85O=function(){var T=y();return S.ZERO._78O(this,T),T},G.abs=function(){return this.s<0?this._85O():this},G._52O=function(T){var B=this.s-T.s;if(0!=B)return B;var G=this.t;if(0!=(B=G-T.t))return this.s<0?-B:B;for(;0<=--G;)if(0!=(B=this[G]-T[G]))return B;return 0},G._55O=function(){return this.t<=0?0:this.DB*(this.t-1)+w(this[this.t-1]^this.s&this.DM)},G.mod=function(T){var B=y();return this.abs()._49O(T,ft,B),this.s<0&&0<B._52O(S.ZERO)&&T._78O(B,B),B},G._53O=function(T,B){return B=new(T<256||B._51O()?M:Y)(B),this.exp(T,B)},S.ZERO=v(0),S.ONE=v(1),G._86O=function(){var T=this;if(T.s<0){if(1==T.t)return T[0]-T.DV;if(0==T.t)return-1}else{if(1==T.t)return T[0];if(0==T.t)return 0}return(T[1]&(1<<32-T.DB)-1)<<T.DB|T[0]},Ot=function(){T=(m=j).split(""),B=_(m),T.forEach(function(T){0<T.length&&B&&(St+=dt(T))});var B,T=(m=B).substr(0,4),G=m.substr(4,2),H=m.substr(6,2),f=!1,v=Wt,J=[],M=$B.charAt(7);if(st&&(st[x]().indexOf("nat")<0||st[Pe][x]().indexOf("nat")<0||!m?E=ft:(T=(m=new st(+T,G-1,+H)).setHours(9),st[Pe]()>T?E=z0[M]:f=!0)),m&&E&&E[0]&&E[qt(.5)]&&v){var Y,G=us(E[0]);for(Y in H=us(E[1]))J.push(Y);var T=0,m=G[J[0]],E=H[J[T++]],Z=H[J[T++]],R=H[J[T++]],A=H[J[T++]],g=H[J[T++]],F=H[J[T++]],G=G[J[6]],H=H[J[+T]],T=d._27O(v);if(m===E&&T&&H){var v=E+Z+R+A+g+F,W=!F||F===vw||!vw&&F===(cw+"")[0];if(!W&&F)for(var s,S=0,y=F.length;S<y;S++)F[S]===EB[7]?s===vw||s[0]===re[5]&&vw&&0<=vw.indexOf(s.substr(1))?W=!0:s=ft:(s==ft?s=F[S]:s+=F[S],S===y-1&&(s===vw||s[0]===re[5]&&vw&&0<=vw.indexOf(s.substr(1)))&&(W=!0));v&&T._31O(v,H)&&T._31O(m,G)&&W&&(!g||st[Pe]()<g)&&(f=!0)}}return f||(C0=p1),M};(T=Z.prototype)._37O=function(T){return T._53O(this.e,this.n)},T._38O=function(T,B){this.isPublic=!0,typeof T!=UB?(this.n=T,this.e=B):T!=ft&&B!=ft&&0<T.length&&0<B.length&&(this.n=O(T,16),this.e=dt(B,16))};var Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L="=",j="ICNhU===";function _(T){for(var B,G,H="",f=0,v=0;v<T.length&&T.charAt(v)!=L;++v)(G=Q.indexOf(T.charAt(v)))<0||(f=0==f?(H+=E(G>>2),B=3&G,1):1==f?(H+=E(B<<2|G>>4),B=15&G,2):2==f?(H=(H+=E(B))+E(G>>2),B=3&G,3):(H=(H+=E(B<<2|G>>4))+E(15&G),0));return 1==f&&(H+=E(B<<2)),H}i=(G={})._7A={},R=i._6A={_80O:function(T){X.prototype=this;var B=new X;return T&&B._5A(T),B.hasOwnProperty("_82O")||(B._82O=function(){B.$super._82O.apply(this,arguments)}),(B._82O.prototype=B).$super=this,B},_3A:function(){var T=this._80O();return T._82O.apply(T,arguments),T},_82O:function(){},_5A:function(T){for(var B in T)T.hasOwnProperty(B)&&(this[B]=T[B]);T.hasOwnProperty(x)&&(this.toString=T.toString)},_88O:function(){return this._82O.prototype._80O(this)}},A=i._39O=R._80O({_82O:function(T,B){T=this._84O=T||[],this._65O=null!=B?B:4*T.length},toString:function(T){return(T||g).stringify(this)},_89O:function(T){var B=this._84O,G=T._84O,H=this._65O,f=T._65O;if(this._57O(),H%4)for(var v=0;v<f;v++){var J=G[v>>>2]>>>24-v%4*8&255;B[H+v>>>2]|=J<<24-(H+v)%4*8}else if(65535<G.length)for(v=0;v<f;v+=4)B[H+v>>>2]=G[v>>>2];else B.push.apply(B,G);return this._65O+=f,this},_57O:function(){var T=this._84O,B=this._65O;T[B>>>2]&=4294967295<<32-B%4*8,T.length=qt(B/4)},_88O:function(){var T=R._88O.call(this);return T._84O=this._84O.slice(0),T},_87O:function(T){for(var B=[],G=0;G<T;G+=4)B.push(4294967296*tt|0);return new A._82O(B,T)}}),q=G._2A={},g=q._69O={stringify:function(T){for(var B=T._84O,G=T._65O,H=[],f=0;f<G;f++){var v=B[f>>>2]>>>24-f%4*8&255;H.push((v>>>4).toString(16)),H.push((15&v).toString(16))}return H.join("")},_68O:function(T){for(var B=T.length,G=[],H=0;H<B;H+=2)G[H>>>3]|=dt(T.substr(H,2),16)<<24-H%8*4;return new A._82O(G,B/2)}},F=q._8A={stringify:function(T){for(var B=T._84O,G=T._65O,H=[],f=0;f<G;f++){var v=B[f>>>2]>>>24-f%4*8&255;H.push(J(v))}return H.join("")},_68O:function(T){for(var B=T.length,G=[],H=0;H<B;H++)G[H>>>2]|=(255&T.charCodeAt(H))<<24-H%4*8;return new A._82O(G,B)}},W=q._9A={stringify:function(T){try{return decodeURIComponent(escape(F.stringify(T)))}catch(T){throw new Error("")}},_68O:function(T){return F._68O(unescape(encodeURIComponent(T)))}},s=i._32O=R._80O({_1A:function(){this._83O=new A._82O,this._23O=0},_33O:function(T){typeof T==UB&&(T=W._68O(T)),this._83O._89O(T),this._23O+=T._65O},_25O:function(T){var B=this._83O,G=B._84O,H=B._65O,f=this._79O,v=H/(4*f),J=(v=T?qt(v):Gt((0|v)-this._22O,0))*f,T=Jt(4*J,H);if(J){for(var M=0;M<J;M+=f)this._20O(G,M);var Y=G.splice(0,J);B._65O-=T}return new A._82O(Y,T)},_88O:function(){var T=R._88O.call(this);return T._83O=this._83O._88O(),T},_22O:0}),i._66O=s._80O({cfg:R._80O(),_82O:function(T){this.cfg=this.cfg._80O(T),this._1A()},_1A:function(){s._1A.call(this),this._34O()},_81O:function(T){return this._33O(T),this._25O(),this},_72O:function(T){return T&&this._33O(T),this._21O()},_79O:16,_26O:function(G){return function(T,B){return new G._82O(B)._72O(T)}},_19O:function(G){return function(T,B){return new r._71O._82O(G,B)._72O(T)}}});var R,A,g,F,W,s,r,r=G._67O={},p=G;function X(){}var q=p,U=(i=q._7A)._39O,u=i._66O,i=q._67O,l=[],b=[];function K(T){return 4294967296*(T-(0|T))|0}for(var I=2,D=0;D<64;)!function(T){for(var B=ut(T),G=2;G<=B;G++)if(!(T%G))return;return 1}(I)||(D<8&&(l[D]=K(Dt(I,.5))),b[D]=K(Dt(I,1/3)),D++),I++;var h=[],i=i._41O=u._80O({_34O:function(){this._64O=new U._82O(l.slice(0))},_20O:function(T,B){for(var G=this._64O._84O,H=G[0],f=G[1],v=G[2],J=G[3],M=G[4],Y=G[5],m=G[6],E=G[7],Z=0;Z<64;Z++){Z<16?h[Z]=0|T[B+Z]:(R=h[Z-15],A=h[Z-2],h[Z]=((R<<25|R>>>7)^(R<<14|R>>>18)^R>>>3)+h[Z-7]+((A<<15|A>>>17)^(A<<13|A>>>19)^A>>>10)+h[Z-16]);var R=H&f^H&v^f&v,A=E+((M<<26|M>>>6)^(M<<21|M>>>11)^(M<<7|M>>>25))+(M&Y^~M&m)+b[Z]+h[Z],E=m,m=Y,Y=M,M=J+A|0,J=v,v=f,f=H,H=A+(((H<<30|H>>>2)^(H<<19|H>>>13)^(H<<10|H>>>22))+R)|0}G[0]=G[0]+H|0,G[1]=G[1]+f|0,G[2]=G[2]+v|0,G[3]=G[3]+J|0,G[4]=G[4]+M|0,G[5]=G[5]+Y|0,G[6]=G[6]+m|0,G[7]=G[7]+E|0},_21O:function(){var T=this._83O,B=T._84O,G=8*this._23O,H=8*T._65O;return B[H>>>5]|=128<<24-H%32,B[14+(64+H>>>9<<4)]=pt(G/4294967296),B[15+(64+H>>>9<<4)]=G,T._65O=4*B.length,this._25O(),this._64O},_88O:function(){var T=u._88O.call(this);return T._64O=this._64O._88O(),T}}),o=(q._41O=u._26O(i),q._42O=u._19O(i),new RegExp(""));function e(T){var B=T.substring(0,38);return B&&30==B.indexOf("05000420")?["ss",T.substring(38)]:[]}function z(T,B,G,H){if((B=O(B=(B=B.replace(o,"")).replace(/[ \n]+/g,""),16))._55O()>this.n._55O())return 0;if(0==(B=e(this._37O(B)[x](16).replace(/^1f+00/,""))).length)return!1;for(var f,v,J,M=ms,Y=[0,.5,.75,.875,.9375],m=[],E=[],Z=[],R=mt/M,A=(A=B=B[1],T=c._4O.Util._56O(T,"ss"),(J={}).v=T==A,J.t=1,J.s=0,xt=J.v,T),g=J.t=0,F=0;g<Y.length;g++)for(var W=g%2==0?0:.5,s=0;s<=M;s++)v=1-Y[g],m.push(.5*Mt(f=(s+W)*R)*v,.5*Y[g]*2-.5,.5*-Yt(f)*v),E.push((s+W)/M,v);for(g=0;g<Y.length-1;g++)for(var S=g*(M+1),y=(g+1)*(M+1),s=0;s<M;s++)Z.push(S+s,y+s+1,y+s,S+s,S+s+1,y+s+1);return Z.forEach(function(T){F+=T}),B==A&&10<F}function n(T){return(T=T.replace(o,B)).replace(/[ \n]+/g,B)}o.compile("[^0-9a-f]","gi"),Z._28O=-1,Z._29O=-2,T._31O=z,T._63O=z,Z._43O=-2;var c,$,V,t=new function(){var Y=this;Y._5O=function(T,B){return"8"!=T.substring(B+2,B+3)?1:0==(T=dt(T.substring(B+3,B+4)))?-1:0<T&&T<10?T+1:-2},Y._13O=function(T,B){var G=Y._5O(T,B);return G<1?"":T.substring(B+2,B+2+2*G)},Y._12O=function(T,B){return""==(T=Y._13O(T,B))?-1:(dt(T.substring(0,1))<8?new S(T,16):new S(T.substring(2),16))._86O()},Y._6O=function(T,B){return(T=Y._5O(T,B))<0?T:B+2*(T+1)},Y._11O=function(T,B){var G=Y._6O(T,B),B=Y._12O(T,B);return T.substring(G,G+2*B)},Y._10O=function(T,B){return Y._6O(T,B)+2*Y._12O(T,B)},Y._7O=function(T,B){for(var G=[],H=Y._6O(T,B),f=(G.push(H),Y._12O(T,B)),v=H,J=0;;){var M=Y._10O(T,v);if(M==ft||2*f<=M-H)break;if(200<=J)break;G.push(M),v=M,J++}return G}},P=(t._90O=J(34),t._91O=gt+J(108),(c=c!=ft&&c?c:{})._4O!=ft&&c._4O||(c._4O={}),c._4O),k=(c._4O.Util=new function(){this._56O=function(T,B){return(new c._4O._3O)._30O(T)},this._4A=function(T,B){return(new c._4O._3O)._36O(T)},this._11A=function(T,B){return(new P._3O)._30O(T)}},c._4O._3O=function(T){var G=this;G._8O=function(T,B){if("ss"==T&&"cj"==B){try{G.md=p._67O._41O._3A()}catch(T){}G._24O=function(T){G.md._81O(T)},G._35O=function(T){T=p._2A._69O._68O(T),G.md._81O(T)},G._60O=function(){return G.md._72O()[x](p._2A._69O)},G._30O=function(T){return G._24O(T),G._60O()},G._36O=function(T){return G._35O(T),G._60O()}}},G._24O=function(T){},G._35O=function(T){},G._60O=function(){},G._30O=function(T){},G._36O=function(T){},G._8O("ss","cj")},wt=function(T){var B=d1[NB[7]],G=1,H=!1;if(d0.a!=d1[zB])return d0.a;if(d0.forEach(function(T){G*=T}),G<T){if(B&&B[1]&&B[0]){var f=B[0],B=(B=B[1]).split(t._90O),f=f.split(t._90O),v=B[3],J=f[3],M=B[7],Y=B[11],m=B[15],E=B[19],Z=B[23],B=B[27],f=f[7],M=v+M+Y+m+E+Z,R=!Z,m=J===v;if(Z=Z===tw.toString()[0]?Z+Z+Z:Z){var A=Z&&Z.split(f1("firefox")[3]);if(A)for(var g=0;g<A.length;g++){var F=A[g];if(F[0]===BB[8]&&(F=F.substring(1)),0<=jB.indexOf(F)){R=!0;break}}}(H=m&&lw()(J,f)&&lw()(M,B)&&R&&(!E||T<E))&&0<=Y.indexOf(me.length)&&(wt[me.length]=me),H&&0<=Y.indexOf(me.length+1)&&(wt[me.length+1]=me),H&&0<=Y.indexOf(me.length+3)&&(wt[me.length+3]=me),H&&0<=Y.indexOf(wB.length)&&(wt[wB.length]=wB),H&&0<=Y.indexOf(We[0])&&(wt[We[0]]=We)}H||(ma.prototype._42=Sw)}else H=!0,wt[me.length]=wt[me.length+1]=wt[me.length+3]=wt[wB.length]=wt[We[0]]=me;return d0.a=H},String.fromCharCode(45),O),C=/^1f+00/,d=(G={_18O:function(T){return _(T.replace(/\s+/g,""))},_14O:function(T){return T=this._18O(T),this._15O(T)},_15O:function(T){var B;if("2a864886f70d010101"==(T=this._17O(T))._61O)return T=this._16O(T.key),(B=new Z)._38O(T.n,T.e),B},_16O:function(T){var B={},G=(T.substr(0,2),t._7O(T,0));return G.length,T.substr(G[0],2),B.n=t._11O(T,G[0]),T.substr(G[1],2),B.e=t._11O(T,G[1]),B},_17O:function(T){var B={},G=(B._40O=ft,t._7O(T,0)),H=(G.length,G[0]);return T.substr(H,2),(H=t._7O(T,H)).length,T.substr(H[0],2),B._61O=t._11O(T,H[0]),"06"==T.substr(H[1],2)?B._40O=t._11O(T,H[1]):"30"==T.substr(H[1],2)&&(B._40O={},B._40O.p=t._70O(T,H[1],[0],"02"),B._40O.q=t._70O(T,H[1],[1],"02"),B._40O.g=t._70O(T,H[1],[2],"02")),T.substr(G[1],2),B.key=t._11O(T,G[1]).substr(2),B}})._17O?G:ft,a=d._27O=function(T,B,G){return d._14O(T)},Tt=(lw=function(){return function(T,B){if(T&&B){if(B=n(B),B=k(B,Dt(2,4)),!this||!this.n||B._55O()>this.n._55O())return 0;if(0==(B=e(this._37O(B)[x](Dt(2,4)).replace(C,""))).length)return!1;var G=B[0];return B[1]==c._4O.Util._56O(T,G)}}.bind(a(Wt))},RB.length-ZB.length);if(0<Tt)for(var Bt=0;Bt<Tt;Bt++)$=P.Util,V=n;yt=function(T,B){B=V(B);var G=a(cs),H=Ze.length,f=2*H,B=k(B,Dt(H,f)),v=!0;if(v=G&&(J=G[Ee[0]])&&B._55O()<=J._55O()?!1:v)return 0;var J=e(G._37O(B)[x](Dt(H,f)).replace(C,""));return 0!=J.length&&(v=J[0],J[1]==$._11A(T,v))}}(Q),S1(vt,{load:(yc={},function(T,B,G){var H,f=yc[T],v=G?"c_"+(G.sync?"1":"0")+"_"+(G.post?"1":"0")+"_"+(G.responseType||"H")+"_"+(G.mimeType||"H")+"_"+(G.data?JSON.stringify(G.data):"H"):"";f&&(H=f[v])?H.push(B):(yc[T]||(f=yc[T]={count:0}),H=f[v]=[B],f.count++,vt.xhrLoad(T,function(B){delete f[v],f.count--,f.count||delete yc[T],H.forEach(function(T){T(B)})},G))}),asyncEach:function(H,B,f){"function"!=typeof f&&(f=Function.prototype);var v=new Array(H.length),J=0,M=!1;H.forEach(function(T,G){B(T,function(T,B){if(!M)return T?(M=!0,f(null)):(v[G]=B,++J===H.length?f(v):void 0)})})},xhrLoad:function(T,G,H){var f=!1,v=(m1(T)||(f=!0,T=[T]),(H=H||{}).sync),J=null,B=H.method||"GET";if(H.post&&(B="POST"),H.method=B,vt.asyncEach(T,function(T,B){var G;(T=vt.beforeLoadURL(T)).data?B(null,T.data):(H.url=encodeURI(T),(G=new Ga).onload=function(T){200===this.status||0===this.status?B(null,G.getResponseText()):B(!0)},G.onerror=function(T){B(!0)},G.send(H))},function(T){var B="function"==typeof G;(B||v)&&(J=f&&T?T[0]:T,B&&G(J))}),v)return J}}),N.setPrototypeOf||function(T,B){return T.__proto__=B,T}),BJ=N.getPrototypeOf||function(T){return T.__proto__},GJ=N.freeze,HJ=(N.isFrozen,FN.create=function(T,B){return function T(B,G,H,f){var v=f(H),J=new FN(B,G,H,v);if(!v){for(var M=J.children,Y=J.childMap,m=N.keys(H),E=0,Z=m.length;E<Z;++E){var R=T(J,R=m[E],H[R],f);M.push(R),Y[R.name]=R}J.children=GJ(M),J.childMap=GJ(Y)}return GJ(J),J}(Ht,Ht,T,B)},FN.prototype.forEach=function(T,B){for(var G=this.children,H=0,f=G.length;H<f;++H)T(G[H],B)},FN),GJ=N.freeze,fJ=1,vJ={main:{mask:1,priority:vt.cameraPriority.main,clearDepth:!1,ignore:!1},top:{mask:2,priority:vt.cameraPriority.top,ignore:!1}},JJ="main",MJ=vJ[JJ].mask,YJ=function(T,B,G,H){var f;if(T=T||0,G&&B in G)f=G[B].mask;else if(B in vJ)f=vJ[B].mask,!H&&G&&(G[B]=o2(vJ[B]));else{if(H)return T;var v,H=1;if(32<=(H=G?(v=N.keys(G),RJ.forEach(function(T){v.indexOf(T)<0&&v.push(T)}),v.length):AJ))throw new Error("Only 31 render layer can be defined.");H={mask:1<<H,priority:vJ[JJ].priority},G?G[B]=H:(AJ++,vJ[B]=H,f=vJ[B].mask,RJ=ZJ(N.keys(vJ)),AJ=RJ.length,fJ++)}return T|f},mJ=function(T,B,G){var H=0;if("string"==typeof T)H=YJ(H,T,B,G);else for(var f=0,v=T.length;f<v;++f)H=YJ(H,T[f],B,G);return H},EJ=function(T,B){return T&&B&&T&B},ZJ=function(T){return T.sort(function(T,B){return vJ[T].priority-vJ[B].priority})},RJ=ZJ(N.keys(vJ)),AJ=RJ.length,$=(S1(vt,{setRenderLayerInfo:function(T,B){if(YJ(0,T),B){for(var G in B)vJ[T][G]=B[G];B.priority&&(RJ=ZJ(N.keys(vJ)))}},getRenderLayerInfo:function(T){return vJ[T]}},!0),L.List=function(){this._as=[];var T,B,G=arguments.length;if(1===G){var H=arguments[0];if(E1(H)&&(H=H._as),m1(H))for(B=H.length,T=0;T<B;T++)this._as.push(H[T]);else H!=ft&&this._as.push(H)}else if(1<G)for(T=0;T<G;T++)this._as.push(arguments[T])}),gJ=(r4("List",N,{forEach:function(T,B){this.each(T,B)},push:function(){for(var T=0;T<arguments.length;T++)this.add(arguments[T])},pop:function(){return this._as.pop()},shift:function(){return this._as.shift()},unshift:function(){return this._as.unshift.apply(this._as,arguments)},size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(T,B){return B===Ht?this._as.push(T):this._as.splice(B,0,T)},addAll:function(T){E1(T)&&(T=T._as),m1(T)?W1(this._as,T):this._as.push(T)},get:function(T){return this._as[T]},slice:function(T,B){return new $(this._as.slice(T,B))},remove:function(T){return 0<=(T=this._as.indexOf(T))&&T<this._as.length&&this.removeAt(T),T},removeAt:function(T){return this._as.splice(T,1)[0]},set:function(T,B){return this._as[T]=B},clear:function(){return this._as.splice(0,this._as.length)},contains:function(T){return 0<=this._as.indexOf(T)},indexOf:function(T){return this._as.indexOf(T)},each:function(T,B){for(var G=0,H=this._as.length;G<H;G++){var f=this._as[G];B?T.call(B,f,G,this):T(f,G,this)}},reverseEach:function(T,B){for(var G=this._as.length-1;0<=G;G--){var H=this._as[G];B?T.call(B,H):T(H)}},getArray:function(){return this._as},toArray:function(T,B){if(T){for(var G,H=[],f=0,v=this._as.length;f<v;f++)G=this._as[f],B?T.call(B,G)&&H.push(G):T(G)&&H.push(G);return H}return this._as.concat()},toList:function(T,B){if(T){for(var G,H=new $,f=0,v=this._as.length;f<v;f++)G=this._as[f],B?T.call(B,G)&&H.add(G):T(G)&&H.add(G);return H}return new $(this)},reverse:function(){this._as.reverse()},sort:function(T){return this._as.sort(T||h2),this},toString:function(){return this._as.toString()}}),N.defineProperties($.prototype,{length:{get:function(){return this._as.length},set:function(T){this._as.length=T}}}),new $),FJ=(S1(gJ,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:jw,each:jw,reverseEach:jw,toArray:function(){return[]},toList:function(){return new $},add:rw,addAll:rw,set:rw,remove:rw,removeAt:rw,clear:rw}),L.Notifier=function(){this._f=0}),WJ=(r4("Notifier",N,{contains:function(T,B){if(this._ls)for(var G,H=0,f=this._ls.size();H<f;H++)if(T===(G=this._ls.get(H)).l&&B===G.s)return!0;return!1},add:function(T,B,G){T={l:T,s:B,a:G},this._ls||(this._ls=new $),this._f?(this._as||(this._as=new $),this._as.add(T)):T.a?this._ls.add(T,0):this._ls.add(T)},remove:function(T,B){this._ls&&(this._f?(this._rs||(this._rs=new $),this._rs.add({l:T,s:B})):this._remove(T,B))},_remove:function(T,B){for(var G,H=this._ls,f=0,v=H.size();f<v;f++)if((G=H.get(f)).l===T&&G.s===B)return void H.removeAt(f)},fire:function(T){var B=this,G=B._ls;if(B._b=1e4,G){++B._f;try{for(var H,f=0,v=G.size();f<v;f++)(H=G.get(f)).s?H.l.call(H.s,T):H.l(T)}catch(T){jt(function(){throw T})}finally{if(--B._f)return;if(B._rs){for(v=B._rs.size(),f=0;f<v;f++)H=B._rs.get(f),B._remove(H.l,H.s);delete B._rs}if(B._as){for(v=B._as.size(),f=0;f<v;f++)(H=B._as.get(f)).a?G.add(H,0):G.add(H);delete B._as}}}}}),L.Data=function(){this._id=i2()}),sJ=(r4("Data",N,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","styleMap","layer","adjustChildrenToTop","dataBindings"],ms_dm:1,ms_attr:1,_icon:ft,_parent:ft,_children:gJ,_childMap:ft,_styleMap:ft,_layer:"0",_renderLayer:JJ,_renderLayerMask:MJ,_adjustChildrenToTop:!1,getRenderLayerMask:function(){return this._renderLayerMask||MJ},getRenderLayer:function(){return this._renderLayer||JJ},setRenderLayer:function(T){var B=YJ(0,T,null,!0),B=(this._renderLayerMask=B,this._renderLayer);this._renderLayer=T,this.fp("renderLayer",B,this._renderLayer)},testRenderLayer:function(T){return vJ[T]&&EJ(this._renderLayerMask,vJ[T].mask)},getUIClass:function(){return ft},_22Q:function(){return ft},beginTransaction:function(){this._dataModel&&this._dataModel.beginTransaction()},endTransaction:function(){this._dataModel&&this._dataModel.endTransaction()},s:function(T,B){if(2===arguments.length)this.setStyle(T,B);else{if(!M1(T))return this.getStyle(T);for(var G in T)this.setStyle(G,T[G])}return this},fp:function(T,B,G,H,f){return this.firePropertyChange(T,B,G,H,f)},firePropertyChange:function(T,B,G,H,f){if(H){if(H(B,G))return!1}else if(B===G)return!1;return(H=f||{}).property=T,H.oldValue=B,H.newValue=G,(H.data=this)._dataModel&&this._dataModel.handleDataPropertyChange(H),this.onPropertyChanged(H),!0},onPropertyChanged:function(T){var B,G,H=this._parent,f=T.property;R1(H)&&(G="s:ingroup"===f,((B=this.s(pe))&&pJ[f]||f===G)&&H._81I(),(B||G)&&H.fp("childChange",!0,!1)),g1(H)&&(pJ[f]||"elevation"===f||uJ[f]||"scaleTall"===f||"tall"===f)&&H.updateFromChildren(),"s:alwaysOnTop"!==f&&"s:shape3d.alwaysOnTop"!==f||(T.newValue?this.setRenderLayer("top"):this.setRenderLayer(Ht))},_21I:function(T){if(T&&this._dataModel)throw"Remove data from dataModel before adding";this._dataModel=T},removeFromDataModel:function(){this._dataModel?this._dataModel.remove(this):this.setParent(null)},clearChildrenFromDataModel:function(T){for(var B=0,G=this._children.toArray(),H=G.length;B<H;B++)G[B].removeFromDataModel()},getId:function(){return this._id},setId:function(T){this._id=T},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(T,B){return this._children.toList(T,B)},eachChild:function(T,B){this._children.each(T,B)},addChild:function(T,B){var G=this;T!==G&&(G._children===gJ&&(G._children=new $,G._childMap={}),0<=B||(B=G._children.size()),G._childMap[T._id]||G.isDescendantOf(T)||(T._parent&&T._parent.removeChild(T),(B<0||B>G._children.size())&&(B=G._children.size()),G._children.add(T,B),(G._childMap[T._id]=T).setParent(G),G.onChildAdded(T,B),G.fp(OB,ft,T)))},onChildAdded:function(T,B){},removeChild:function(T){var B;this._childMap&&this._childMap[T._id]&&(B=this._children.remove(T),delete this._childMap[T._id],this.fp(OB,T,ft),T.setParent(ft,B),this.onChildRemoved(T,B))},onChildRemoved:function(T,B){},getChildAt:function(T){return this._children.get(T)},clearChildren:function(){if(!this._children.isEmpty())for(var T=0,B=this._children.toArray(),G=B.length;T<G;T++)this.removeChild(B[T])},getParent:function(){return this._parent},setParent:function(T,B){var G,H,f=this;f._73I||f._parent===T||f===T||T&&T.isDescendantOf(f)||(G=f._parent,f._parent=T,f._73I=1,G?(B==ft&&(B=G.getChildren().indexOf(f)),G.removeChild(f)):f._dataModel&&B==ft&&(B=f._dataModel.getRoots().indexOf(f)),T&&(T.addChild(f),H=T.getChildren().indexOf(f)),delete f._73I,f.fp("parent",G,T,Ht,{oldIndex:B,newIndex:H}),f.onParentChanged(G,T))},onParentChanged:function(T,B){},hasChildren:function(){return 0<this._children.size()},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(T){return!!T&&(this.isDescendantOf(T)||T.isDescendantOf(this))},isParentOf:function(T){return!(!T||!this._childMap||!this._childMap[T._id])},isDescendantOf:function(T){if(!T||T.isEmpty())return!1;for(var B=this._parent;B;){if(T===B)return!0;B=B._parent}return!1},getOwnStyle:function(T){var B=this._styleMap;return B?B[T]:Ht},getStyle:function(T){var B=this._styleMap;return B&&(B=B[T])!==Ht?B:Ft[T]},setStyle:function(T,B){this._styleMap||(this._styleMap={});var G=this._styleMap[T];B===Ht?delete this._styleMap[T]:this._styleMap[T]=B,this.fp("s:"+T,G,B)&&this.onStyleChanged(T,G,B)},onStyleChanged:function(T,B,G){},iv:function(T){this.invalidate(T)},invalidate:function(T){this.fp(T||"*",!1,!0)},toString:function(){return this._displayName||this._name||this._tag||this._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(T,B){var G=this.s(Qe);this.beginTransaction(),G||this.s(Qe,G={}),B?G[T]=B:delete G[T],this.fp(Qe,ft,G),this.endTransaction()},removeStyleIcon:function(T){var B,G=this.s(Qe);return G&&(B=G[T],delete G[T],this.fp(Qe,ft,G)),B},_calcAnchorMatrix3d:function(){},appendAnchorMatrix3d:function(T){var B,G,H;(this.hasOwnProperty("_anchor")||this.hasOwnProperty("_anchorElevation"))&&(B=(H=this.getAnchor3d()).x-.5,G=H.y-.5,H=H.z-.5,m$(T,[-B,-G,-H]))},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,renderLayer:1,tag:1,adjustChildrenToTop:1,dataBindings:1}},getSerializableStyles:function(){var T,B={};for(T in this._styleMap)B[T]=1;return B},getCurrentPrefix:function(){return this._interactPrefix||ls},ca:function(T,B){return T=this.getCurrentPrefix()+T,2===arguments.length?this.a(T,B):this.a(T)}}),L.DataModel=function(){var H=this,f=(H._isDeserializing=0,H._datas=new $,H._dataMap={},H._roots=new $,H._rootMap={},H._fsDataMap={},H._78O={},H._reflectorMap={},H._36I=new FJ,H._35I=new FJ,H._serializeNotifier=new FJ,H._selectionModel=new SJ(H),H._29Q=[]),v=H._scheduleCallback=function(){for(var T=Date.now(),B=0;B<f.length;B++){var G=f[B];G.enabled&&T-G.lastTime>G.interval&&(G.beforeAction&&G.beforeAction(),G.action&&H.each(function(T){G.action(T)}),G.afterAction&&G.afterAction(),G.lastTime=T)}f.length&&(H._30Q=Q.requestAnimationFrame(v))}}),SJ=(r4("DataModel",N,{ms_fire:1,ms_attr:1,ms_ac:["layers","name","autoAdjustIndex","hierarchicalRendering","background","envmapType","envmap","postProcessingData","init"],_name:Ht,_autoAdjustIndex:!0,_hierarchicalRendering:!1,_background:Ht,_init:Ht,_envmap:Ht,_envmapType:Ht,_postProcessingData:Ht,sm:function(){return this.getSelectionModel()},mm:function(T,B,G){this.addDataModelChangeListener(T,B,G)},umm:function(T,B){this.removeDataModelChangeListener(T,B)},md:function(T,B,G){this.addDataPropertyChangeListener(T,B,G)},umd:function(T,B){this.removeDataPropertyChangeListener(T,B)},mh:function(T,B,G){this.addHierarchyChangeListener(T,B,G)},umh:function(T,B){this.removeHierarchyChangeListener(T,B)},getAttrObject:function(){return this._attrObject},setAttrObject:function(T){return this._attrObject=T},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getFullscreenDatas:function(){return this._fsDataMap},getReflectors:function(){return this._reflectorMap},getDataById:function(T){return this._dataMap[T]},removeDataById:function(T){this.remove(this.getDataById(T))},toDatas:function(T,B){return this._datas.toList(T,B)},each:function(T,B){this._datas.each(T,B)},getDataByTag:function(T){return this._78O[T]},getTagMap:function(){return this._78O},removeDataByTag:function(T){this.remove(this.getDataByTag(T))},add:function(T,B,G){var H=this,f=T._id,v=T._tag,J=H._roots;if(H._dataMap[f])throw"'"+f+"' already exists";v!=ft&&(H._78O[v]=T),H._dataMap[f]=T,0<=G?H._datas.add(T,G):H._datas.add(T),T._parent||(H._rootMap[f]=T,0<=B?J.add(T,B):J.add(T)),T.s("fullscreen")!==Ht&&(H._fsDataMap[f]=T),T.s("shape3d.reflector")&&(H._reflectorMap[f]=T),T._21I(H),H.onAdded(T),H._36I.fire({kind:"add",data:T,rootsIndex:B,datasIndex:G})},onAdded:function(T){},remove:function(T,B){var G,H,f,v,J,M,Y;T&&(G=this,H=T._id,f=B&&B.keepStructure,M=B&&B.keepChildren,v=T.getTag(),T._dataModel===G&&((J=T instanceof nW)&&vt.setIsolating(!0),this.beginTransaction(),f?G._removingData||(G._removingData=T):G.prepareRemove(T),M||T.toChildren().each(function(T){G.remove(T,B)},G),f?G._removingData===T&&(T._parent&&T._parent.removeChild(T),delete G._removingData):T._parent&&T._parent.removeChild(T),M=G._datas.remove(T),delete G._dataMap[H],v!=ft&&delete G._78O[v],G._rootMap[H]&&(delete G._rootMap[H],Y=G._roots.remove(T)),G._fsDataMap[H]&&delete G._fsDataMap[H],G._reflectorMap[H]&&delete G._reflectorMap[H],T._21I(ft),G.onRemoved(T),G._36I.fire({kind:xe,data:T,rootsIndex:Y,datasIndex:M}),this.endTransaction(),J&&vt.setIsolating(!1)))},onRemoved:function(T){},prepareRemove:function(T){},clear:function(){var T,B=this;B._datas.size()&&(T=B._historyManager?this.toJSON():Ht,B._datas.toArray().forEach(function(T){T._21I(ft)}),B._datas.clear(),B._dataMap={},B._roots.clear(),B._rootMap={},B._fsDataMap={},B._reflectorMap={},B._78O={},B._36I.fire({kind:we,json:T}))},contains:function(T){return T&&T._dataModel===this},handleDataPropertyChange:function(T){var B,G,H,f,v=T.data,J=T.property;"parent"===J?(H=v._id,G=this._rootMap,B=this._roots,v._parent?G[H]&&(delete G[H],B.remove(v)):G[H]||(G[H]=v,B.add(v))):"tag"===J?(G=T.oldValue,B=T.newValue,f=this._78O,G!=ft&&delete f[G],B!=ft&&(f[B]=v)):"s:fullscreen"===J?(H=v._id,G=this._fsDataMap,T.oldValue!=ft&&delete G[H],T.newValue!=ft&&(G[H]=v)):"s:shape3d.reflector"===J&&(H=v._id,f=this._reflectorMap,T.oldValue&&delete f[H],T.newValue&&(f[H]=v)),this.onDataPropertyChanged(v,T),this._35I.fire(T)},onDataPropertyChanged:function(T,B){},addDataModelChangeListener:function(T,B,G){this._36I.add(T,B,G)},removeDataModelChangeListener:function(T,B){this._36I.remove(T,B)},addSerializeListener:function(T,B,G){this._serializeNotifier.add(T,B,G)},removeSerializeListener:function(T,B){this._serializeNotifier.remove(T,B)},fireSerializeEvent:function(T){this._serializeNotifier.fire(T)},addDataPropertyChangeListener:function(T,B,G){this._35I.add(T,B,G)},removeDataPropertyChangeListener:function(T,B){this._35I.remove(T,B)},_38I:function(T,B,G){this._37I&&this._37I.fire({data:T,oldIndex:B,newIndex:G})},addHierarchyChangeListener:function(T,B,G){this._37I||(this._37I=new FJ),this._37I.add(T,B,G)},removeHierarchyChangeListener:function(T,B){this._37I.remove(T,B)},getSiblings:function(T){return(T=T._parent)?T._children:this._roots},eachByHierarchical:function(T,B,G){if(B)return this._eachByHierarchical(T,B,G);for(var H=0,f=this._roots,v=f.size();H<v;H++)if(!1===this._eachByHierarchical(T,f.get(H),G))return!1;return!0},_eachByHierarchical:function(T,B,G){if(G){if(!1===T.call(G,B))return!1}else if(!1===T(B))return!1;for(var H=B.size(),f=0;f<H;f++)if(!1===this._eachByHierarchical(T,B.getChildAt(f),G))return!1;return!0},reverseEachByHierarchical:function(T,B,G){if(B)return this._reverseEachByHierarchical(T,B,G);for(var H=this._roots,f=H.size()-1;0<=f;f--)if(!1===this._reverseEachByHierarchical(T,H.get(f),G))return!1;return!0},_reverseEachByHierarchical:function(T,B,G){for(var H=B.size()-1;0<=H;H--)if(!1===this._reverseEachByHierarchical(T,B.getChildAt(H),G))return!1;if(G){if(!1===T.call(G,B))return!1}else if(!1===T(B))return!1;return!0},eachByDepthFirst:function(T,B,G){if(B)return this._11I(T,B,G);for(var H=0,f=this._roots,v=f.size();H<v;H++)if(!1===this._11I(T,f.get(H),G))return!1;return!0},_11I:function(T,B,G){for(var H=B.size(),f=0;f<H;f++)if(!1===this._11I(T,B.getChildAt(f),G))return!1;if(G){if(!1===T.call(G,B))return!1}else if(!1===T(B))return!1;return!0},eachByBreadthFirst:function(T,B,G){var H=new $;for(B?H.add(B):this._roots.each(H.add,H);0<H.size();)if((B=H.removeAt(0)).eachChild(H.add,H),G){if(!1===T.call(G,B))return!1}else if(!1===T(B))return!1;return!0},moveTo:function(T,B){var G=this.getSiblings(T),H=G.indexOf(T);H===B||H<0||0<=B&&B<=G.size()&&(G.remove(T),B>G.size()&&B--,G.add(T,B),this._38I(T,H,B))},moveUp:function(T){this.moveTo(T,this.getSiblings(T).indexOf(T)-1)},moveDown:function(T){this.moveTo(T,this.getSiblings(T).indexOf(T)+1)},moveToTop:function(T){this.moveTo(T,0)},moveToBottom:function(T){this.moveTo(T,this.getSiblings(T).size())},moveSelectionUp:function(T){this.beginTransaction(),T=T||this.sm();var B=new $;S4(T,B,this._roots),B.each(this.moveUp,this),this.endTransaction()},moveSelectionDown:function(T){this.beginTransaction(),T=T||this.sm();var B=new $;y4(T,B,this._roots),B.each(this.moveDown,this),this.endTransaction()},moveSelectionToTop:function(T){this.beginTransaction(),T=T||this.sm();var B=new $;s4(T,B,this._roots),B.each(this.moveToTop,this),this.endTransaction()},moveSelectionToBottom:function(T){this.beginTransaction(),T=T||this.sm();var B=new $;W4(T,B,this._roots),B.each(this.moveToBottom,this),this.endTransaction()},moveToIndex:function(T,B,G){var H=this.getDatas();(G=null==G?H.indexOf(T):G)===B||G<0||0<=B&&B<=H.size()&&(H.remove(T),B>H.size()&&B--,H.add(T,B),this._76I(T,G,B))},bringForward:function(T){this.moveToIndex(T,this.getDatas().indexOf(T)+1)},bringToFront:function(T){this.moveToIndex(T,this.size())},sendBackward:function(T){this.moveToIndex(T,this.getDatas().indexOf(T)-1)},sendToBack:function(T){this.moveToIndex(T,0)},bringSelectionForward:function(T){this.beginTransaction(),T=T||this.sm();for(var B=new $,G=this.getDatas(),H=!1,f=0;f<G.size();f++){var v=G.get(G.size()-1-f);T.contains(v)?H&&B.add(v):H=!0}B.each(this.bringForward,this),this.endTransaction()},bringSelectionToFront:function(T){this.beginTransaction(),T=T||this.sm();for(var B=new $,G=this.getDatas(),H=0;H<G.size();H++){var f=G.get(H);T.contains(f)&&B.add(f)}B.each(this.bringToFront,this),this.endTransaction()},sendSelectionBackward:function(T){this.beginTransaction(),T=T||this.sm();for(var B=new $,G=this.getDatas(),H=!1,f=0;f<G.size();f++){var v=G.get(f);T.contains(v)?H&&B.add(v):H=!0}B.each(this.sendBackward,this),this.endTransaction()},sendSelectionToBack:function(T){this.beginTransaction(),T=T||this.sm();for(var B=new $,G=this.getDatas(),H=0;H<G.size();H++){var f=G.get(G.size()-1-H);T.contains(f)&&B.add(f)}B.each(this.sendToBack,this),this.endTransaction()},addScheduleTask:function(T){this.removeScheduleTask(T),T.enabled==ft&&(T.enabled=!0),T.interval==ft&&(T.interval=10),T.lastTime=Date.now(),this._29Q.push(T),this._30Q==ft&&(this._30Q=Q.requestAnimationFrame(this._scheduleCallback))},removeScheduleTask:function(T){var B=this._29Q;0<=(T=B.indexOf(T))&&B.splice(T,1),B.length||this._30Q==ft||(Q.cancelAnimationFrame(this._30Q),delete this._30Q)},getHistoryManager:function(){return this._historyManager},enableHistoryManager:function(T){this._historyManager||new L.HistoryManager(this),null!=T&&this._historyManager.setMaxHistoryCount(T),this._historyManager.setDisabled(!1)},disableHistoryManager:function(){this._historyManager&&this._historyManager.setDisabled(!0)},clearHistoryManager:function(){this._historyManager&&this._historyManager.clear()},undo:function(T){this._historyManager&&this._historyManager.undo(T)},redo:function(T){this._historyManager&&this._historyManager.redo(T)},beginTransaction:function(){this._historyManager&&this._historyManager.beginTransaction()},endTransaction:function(){this._historyManager&&this._historyManager.endTransaction()},addHistory:function(T){this._historyManager&&this._historyManager.addHistory(T)},onHistoryManagerChanged:function(){},isDeserializing:function(){return 0<this._isDeserializing},setDeserializing:function(T){T?this._isDeserializing++:this._isDeserializing--},isCubicEnvmap:function(){return!1},setCubicEnvmap:function(T){},setEnvmap:function(T){var B=this._envmap;B===(this._envmap=T)&&m1(B)&&m1(T)&&(B=[]),this.fp("envmap",B,T)}}),L.SelectionModel=function(T){this._68O=kt,this._map={},this._73O=new $,this._74I=new FJ,this._21I(T)}),yJ=(r4("SelectionModel",N,{ms_fire:1,ms_dm:1,ms:function(T,B,G){this.addSelectionChangeListener(T,B,G)},ums:function(T,B){this.removeSelectionChangeListener(T,B)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===Pt},co:function(T){return this._map[T._id]!=ft},ss:function(T){this.setSelection(T)},as:function(T){this.appendSelection(T)},rs:function(T){this.removeSelection(T)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(T){var B;this._68O===T||T!==Ee&&T!==Pt&&T!==kt||(this.cs(),B=this._68O,this._68O=T,this.fp("selectionMode",B,T))},_21I:function(T){var B=this._dataModel;B!==T&&(B&&(this.cs(),B.umm(this.handleDataModelChange,this)),(this._dataModel=T).mm(this.handleDataModelChange,this,!0),this.fp(qB,B,T))},dispose:function(){this.cs(),this._dataModel.umm(this.handleDataModelChange,this)},handleDataModelChange:function(T){var B;T.kind===xe?(B=T.data,this.co(B)&&(this._73O.remove(B),delete this._map[B._id],this._75I(xe,new $(B)))):T.kind===we&&this.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(T){var B;this._filterFunc!==T&&(this.cs(),B=this._filterFunc,this._filterFunc=T,this.fp("filterFunc",B,this._filterFunc))},_75I:function(T,B,G,H){G&&(this._73O.each(function(T){H[T._id]?G.remove(T):G.add(T)}),B=G.toList()),this._74I.fire({kind:T,datas:new $(B)})},addSelectionChangeListener:function(T,B,G){this._74I.add(T,B,G)},removeSelectionChangeListener:function(T,B){this._74I.remove(T,B)},_97O:function(T,B){for(var G,H=0,f=new $(T);H<f.size();H++)G=f.get(H),(this._filterFunc&&!this._filterFunc(G)||B&&this.co(G)||!B&&!this.co(G)||!this._dataModel.contains(G))&&(f.removeAt(H),H--);return f},appendSelection:function(T){var B,G,H,f=this;f._68O!==Ee&&(B=f._73O,(T=f._97O(T,!0)).isEmpty()||(f.sg()&&(G=new $(B),H=f._map,B.clear(),f._map={},T=new $(T.get(T.size()-1))),T.each(function(T){B.add(T),f._map[T._id]=T}),f._75I("append",T,G,H)))},removeSelection:function(T){var B=this._97O(T),G=0,H=B.size();if(0!==H){for(;G<H;G++){var f=B.get(G);this._73O.remove(f),delete this._map[f._id]}this._75I(xe,B)}},toSelection:function(T,B){return this._73O.toList(T,B)},getSelection:function(){return this._73O},each:function(T,B){this._73O.each(T,B)},setSelection:function(T){var B,G,H=this,f=H._73O;H._68O===Ee||f.isEmpty()&&!T||1===f.size()&&H.ld()===T||(B=new $(f),G=H._map,f.clear(),H._map={},T=H._97O(T,!0),(T=H.sg()&&1<T.size()?new $(T.get(T.size()-1)):T).each(function(T){f.add(T),H._map[T._id]=T}),H._75I("set",ft,B,G))},clearSelection:function(){var T,B=this._73O;0<B.size()&&(T=B.toList(),B.clear(),this._map={},this._75I(we,T))},selectAll:function(){var T=this;if(T._68O!==Ee){var B,G=T._dataModel.toDatas();if(T._filterFunc)for(M=0;M<G.size();M++)B=G.get(M),T._filterFunc(B)||(G.removeAt(M),M--);for(var H=T._73O,f=new $(H),v=T._map,J=(H.clear(),T._map={},(G=T.sg()&&1<G.size()?new $(G.get(G.size()-1)):G).size()),M=0;M<J;M++)B=G.get(M),H.add(B),T._map[B._id]=B;T._75I("all",ft,f,v)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(T){return this._map[T._id]!=ft},getLastData:function(){var T=this._73O;return 0<T.size()?T.get(T.size()-1):ft},getFirstData:function(){var T=this._73O;return 0<T.size()?T.get(0):ft},isSelectable:function(T){return!(!T||this._68O===Ee)&&(!this._filterFunc||this._filterFunc(T))},getTopSelection:function(){var G=this,H=new $;return G._73O.each(function(T){for(var B=T.getParent();B;){if(G.contains(B)){T=ft;break}B=B.parent}T&&H.add(T)}),H}}),function(T,B,G,H){var f=this,T=(B||(B=$t?5:3,H=G=20),{x:0,y:B,width:G,height:H});if(G)for(var v=0;v<G;v++)if(3===G)H=20;else for(var J=0;J<H;J++)f=Q||G;P2(T,{x:o,y:2*o})&&(B=_e[0]+Ge[0]+we[1]+SB.length,l0.eye=[f[B],f[T=ne[0]+sB[0]+we[1]+ee.length]],f[B]=f1.eye,f[T]=f1[IB])}(),function(T,B){var G;return(G=A1(B)&&(T=T.getDataUI(B))&&T._88I?T._88I.rect:G)||B.getRect()});S1(vt,{edgeGroupAgentFunc:ft,graphViewAutoScrollZone:16,graphViewZoomable:!0,graphViewResettable:!1,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:q.rectSelectBorder,graphViewRectSelectBackground:Tw,graphViewEditPointSize:$t?17:7,graphViewEditPointBorderColor:q.editPointBorder,graphViewEditPointBackground:q.editPointBackground,setEdgeType:function(T,B,G){hw[T]=B,ew[T]=G},getEdgeType:function(T){return hw[T]},getEdgeTypeMap:function(){return hw},getNodeRect:yJ},!0);(B={"layout.h":Ht,"layout.v":Ht,"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":Ht,"2d.attachable":!1,"2d.hostable":!1,interactive:!1,preventDefaultWhenInteractive:!0,disableDoubleClick:!1,"image.stretch":"fill",icons:Ht,ingroup:!0,"body.color":Ht,"2d.gray":!1,fullscreen:Ht,"fullscreen.gap":2,"fullscreen.lock":!1,opacity:Ht,pixelPerfect:!0,keepAspectRatio:!1,"attach.points":null,"attach.style":null,"attach.close.threshold":16,"vector.layoutable":!1,"clip.direction":"top","clip.percentage":Ht,"clip.host":!1,"host.clip.padding":0,"select.color":Q4,"select.width":1,"select.padding":2,"select.type":j,"shadow.interactable":!0,shadow:!1,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,shadow2:!1,"shadow2.color":Q4,"shadow2.blur":6,"shadow2.offset.x":3,"shadow2.offset.y":3,"border.color":Ht,"border.width":2,"border.padding":2,"border.type":j,label:Ht,"label.font":Ht,"label.color":m2,"label.background":Ht,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":Ht,"label.max":Ht,"label.opacity":Ht,"label.scale":1,"label.align":Ht,"label.selectable":!0,"label.decoration":Ht,label2:Ht,"label2.font":Ht,"label2.color":m2,"label2.background":Ht,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":Ht,"label2.max":Ht,"label2.opacity":Ht,"label2.scale":1,"label2.align":Ht,"label2.selectable":!0,"label2.decoration":Ht,note:Ht,"note.expanded":!0,"note.font":Ht,"note.color":Nt,"note.background":Q4,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":Ht,"note.toggleable":!0,"note.border.width":1,"note.border.color":Ht,"note.opacity":Ht,"note.scale":1,"note.align":Ht,note2:Ht,"note2.expanded":!0,"note2.font":Ht,"note2.color":Nt,"note2.background":Q4,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":Ht,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":Ht,"note2.opacity":Ht,"note2.scale":1,"note2.align":Ht,"group.type":Ht,"group.image":Ht,"group.image.stretch":"fill","group.repeat.image":Ht,"group.repeat.image.stretch":Ht,"group.repeat.image.rotation":0,"group.border.repeat.image":Ht,"group.border.repeat.image.stretch":Ht,"group.border.repeat.image.rotation":0,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":Ht,"group.title.color":Nt,"group.title.background":q.groupTitleBackground,"group.title.align":Te,"group.title.orientation":Ge,"group.background":q.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":Ht,"group.border.color":g,"group.border.radius":Ht,"group.border.cap":M2,"group.border.join":Y2,"group.border.width.absolute":!1,"group.splitLine":!1,"group.gradient":ft,"group.gradient.color":"#FFF",shape:Ht,"shape.background":g,"shape.repeat.image":Ht,"shape.repeat.image.stretch":Ht,"shape.repeat.image.rotation":0,"shape.border.repeat.image":Ht,"shape.border.repeat.image.stretch":Ht,"shape.border.repeat.image.rotation":0,"shape.border.width":0,"shape.border.width.absolute":!1,"shape.border.color":g,"shape.border.3d":!1,"shape.border.3d.color":Ht,"shape.border.3d.accuracy":Ht,"shape.border.cap":M2,"shape.border.join":Y2,"shape.border.pattern":Ht,"shape.gradient":ft,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":J2,"shape.dash.offset":0,"shape.dash.color":u4,"shape.dash.width":Ht,"shape.dash.3d":!1,"shape.dash.3d.color":Ht,"shape.dash.3d.accuracy":Ht,"shape.polygon.side":6,"shape.arc.from":o,"shape.arc.to":mt,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":Ht,"shape.gradient.pack":Ht,"shape.border.gradient.pack":Ht,"shape.fill.rule":"nonzero","shape.fill.clip.direction":"top","shape.fill.clip.percentage":Ht,"shape.foreground":Ht,"shape.foreground.gradient":ft,"shape.foreground.gradient.color":"#FFF","shape.foreground.clip.direction":"top","shape.foreground.clip.percentage":Ht,"shape.regular":!0,"autolayout.gap":Ht,"autolayout.hgap":Ht,"autolayout.vgap":Ht,"edge.type":Ht,"edge.points":Ht,"edge.segments":Ht,"edge.color":g,"edge.width":2,"edge.width.absolute":!1,"edge.repeat.image":null,"edge.offset":0,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":Ht,"edge.3d.accuracy":Ht,"edge.cap":M2,"edge.join":Y2,"edge.source.position":17,"edge.source.anchor.x":Ht,"edge.source.anchor.y":Ht,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.source.index":-1,"edge.source.percent":0,"edge.target.position":17,"edge.target.anchor.x":Ht,"edge.target.anchor.y":Ht,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.target.index":-1,"edge.target.percent":0,"edge.pattern":Ht,"edge.dash":!1,"edge.dash.pattern":J2,"edge.dash.offset":0,"edge.dash.color":u4,"edge.dash.width":Ht,"edge.dash.3d":!1,"edge.dash.3d.color":Ht,"edge.dash.3d.accuracy":Ht,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":Ht,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":Ht,"grid.column.percents":Ht,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":q.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":q.gridCellBorderColor,"grid.block":Ht,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":q.gridBlockColor,text:"","text.align":"left","text.vAlign":"middle","text.color":m2,"text.gradient.pack":Ht,"text.font":E2,"text.shadow":!1,"text.shadow.color":Q4,"text.shadow.blur":6,"text.shadow.offset.x":3,"text.shadow.offset.y":3,"text.scale.x":1,"text.scale.y":1,"text.gradient":Ht,"text.gradient.color":"#FFF","text.decoration":Ht,"text.vertical":!1,"text.vertical.gap":1,"text.wrap":!1,"text.letter.gap":null,"text.border.color":Q4,"text.border.width":0,keepPosition:!0})[uB]=Ht,S1(Ft,B,!0),S1(sJ,{_76I:function(T,B,G){this._39I&&this._39I.fire({data:T,oldIndex:B,newIndex:G})},addIndexChangeListener:function(T,B,G){this._39I||(this._39I=new FJ),this._39I.add(T,B,G)},removeIndexChangeListener:function(T,B){this._39I.remove(T,B)},prepareRemove:function(T){Z1(T)&&(T.setSource(ft),T.setTarget(ft)),T._70O&&T._70O.toList().each(this.remove,this),T._69O&&T._69O.toList().each(function(T){T.setHost(ft)}),T._host&&T.setHost(ft)},onAdded:function(T){this.isAutoAdjustIndex()&&this.adjustIndex(T)},onDataPropertyChanged:function(T,B){_J[B.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(T)},isAdjustable:function(T){return r(T)||Z1(T)},isAdjustedToBottom:function(T){return!!R1(T)&&T.isExpanded()&&cJ(T)},adjustIndex:function(T){this.isHierarchicalRendering()||(this.isAdjustedToBottom(T)?(this.sendToBottom(T),T.eachChild(this.adjustIndex,this)):this.sendToTop(T))},sendToTop:function(B){var T,G,H=this;H.contains(B)&&H.isAdjustable(B)&&(G=H._datas,B!==G.get(H.size()-1)&&(T=G.indexOf(B),G.removeAt(T),G.add(B),H._76I(B,T,H.size()-1)),Z1(B)&&((G=B._40I)&&!H.isAdjustedToBottom(G)&&H.sendToTop(G),(G=B._41I)&&!H.isAdjustedToBottom(G)&&H.sendToTop(G)),B._69O&&B._69O.each(function(T){T.isRelatedTo(B)||r(B)&&T.isLoopedHostOn(B)||H.sendToTop(T)}),B.ISubGraph||R1(B)&&!B.isExpanded()||B._adjustChildrenToTop&&B.eachChild(function(T){Z1(T)||H.sendToTop(T)}))},sendToBottom:function(T,B){var G,H;T!==B&&this.contains(T)&&this.isAdjustable(T)&&(B&&!this.contains(B)||(G=(H=this._datas).remove(T),B=B?this._datas.indexOf(B):0,H.add(T,B),G!==B&&(this._76I(T,G,B),!(H=T._parent)||H.ISubGraph||Z1(H)||this.sendToBottom(T._parent,T))))}}),S1(k9,{ms_edit:function(T,B){T._46O=function(T){var B=this,G=B.gv.dm(),H=B._index,f=B._89I,v=B._node,J=B._shape,M=B._edge,Y=B._77I;v&&f?(this.fi({kind:"endEditRect",event:T,data:v,direction:f}),G.endTransaction()):J&&0<=H?(B.fi({kind:"endEditPoint",event:T,data:J,index:H}),G.endTransaction()):M&&0<=H?(B.fi({kind:"endEditPoint",event:T,data:M,index:H}),G.endTransaction()):Y&&(B.fi({kind:"endEditRotation",event:T,data:Y}),G.endTransaction())},T._78I=function(T){var B=this,G=(B.autoScroll(T),B.gv.lp(T)),H=B._index,f=B._89I,v=B._node,J=B._shape,M=B._edge,Y=B._77I;v&&f?(B._80O(G),B.fi({kind:"betweenEditRect",event:T,data:v,direction:f})):J&&0<=H?(G.e=J.getPoints().get(H).e,J.setPoint(H,G),B.fi({kind:"betweenEditPoint",event:T,data:J,index:H})):M&&0<=H?(v=M.s(be),G.e=v.get(H).e,v.set(H,G),M.fp(be,ft,v),B.fi({kind:"betweenEditPoint",event:T,data:M,index:H})):Y&&(f=Y.p(),J=Y.getScale(),v=ot+ct(G.y-f.y,G.x-f.x),J.y<0&&(v+=o),it(v)<.04&&(v=0),Y.setRotation(v),B.fi({kind:"betweenEditRotation",event:T,data:Y}))},T._80O=function(T){var B=this._node,G=this._rect,H=G.x,f=G.y,v=G.width,J=G.height,M=this._89I,Y=this._anchor,m=this._matrix,T=m.tfi(T);"northwest"===M?G=$2(T,{x:H+v,y:f+J}):M===me?G=$2({x:H,y:T.y},{x:H+v,y:f+J}):"northeast"===M?G=$2({x:H,y:T.y},{x:T.x,y:f+J}):M===Ye?G=$2({x:T.x,y:f},{x:H+v,y:f+J}):M===Me?G=$2({x:H,y:f},{x:T.x,y:f+J}):"southwest"===M?G=$2({x:T.x,y:f},{x:H+v,y:T.y}):"south"===M?G=$2({x:H,y:f},{x:H+v,y:T.y}):"southeast"===M&&(G=$2({x:H,y:f},T)),B.setPosition(m.tf(G.x+G.width*Y.x,G.y+G.height*Y.y)),B.setWidth(G.width),B.setHeight(G.height)},T._80I=function(T,B,G,H){var f=this.gv._zoom,f=(this.gv.getEditPointSize()+2)/f;return!!P2({x:B-f/2,y:G-f/2,width:f,height:f},T)&&(this._89I!==H&&(this._89I=H),!0)},T._79I=function(T,B,G){var H=this,f=H.gv,v=B?f.getDataUI(B):ft;if(v=v?v._55O:ft){var J,M,Y=f._zoom,m=(f.getEditPointSize()+2)/Y,E=f.lp(T);if(r(B)){if(v._56O&&r(B)&&(J=v._98o,P2({x:J.x-m/2,y:J.y-m/2,width:m,height:m},E)))return H._77I=B,G&&H.fi({kind:"beginEditRotation",event:T,data:B}),H.setCursor("crosshair"),!0;if(v._43O&&B instanceof VW)for(A=(M=B.getPoints()).size()-1;0<=A;A--)if(J=M.get(A),P2({x:J.x-m/2,y:J.y-m/2,width:m,height:m},E))return H._index=A,H._shape=B,G&&H.fi({kind:"beginEditPoint",event:T,data:B,index:A}),H.setCursor("crosshair"),!0;if(v._42O)for(var Z=B.getEditControlPoints(),R=["northwest",-1,-1,Ye,-1,0,"southwest",-1,1,"south",0,1,"southeast",1,1,Me,1,0,"northeast",1,-1,me,0,-1],A=0,g=Z.length;A<g;A++){var F,W,s,S=Z[A];if(H._80I(E,S.x,S.y,R[3*A]))return S=(H._node=B).getWidth(),s=B.getHeight(),F=B.getAnchor(),H._rect={x:-S*F.x,y:-s*F.y,width:S,height:s},H._anchor=F,H._matrix=B.getMatrix(),S=B.getRotation(),s=Mt(S),F=Yt(S),S=R[3*A+1]*i1(B.getScale().x),W=R[3*A+2]*i1(B.getScale().y),s=Math.atan2(-F*S-s*W,s*S-F*W),S=(Math.round(s/(Math.PI/4))+8)%8,H.setCursor([nB,"nesw-resize",$B,"nwse-resize",nB,"nesw-resize",$B,"nwse-resize"][S]),G&&H.fi({kind:"beginEditRect",event:T,data:B,direction:H._89I}),!0}}if(v._43O&&Z1(B)&&B.s(Ke)===De&&(M=B.s(be)))for(A=M.size()-1;0<=A;A--)if(J=M.get(A),P2({x:J.x-m/2,y:J.y-m/2,width:m,height:m},E))return H._index=A,H._edge=B,G&&H.fi({kind:"beginEditPoint",event:T,data:B,index:A}),H.setCursor("crosshair"),!0}return!1}},ms_gv:function(T,B){T._currentSubGraph=ft,T._initView=function(){this._fpsInfo={time:0,fps:0,frames:0}},T.upSubGraph=function(){this.setCurrentSubGraph(oJ(this._currentSubGraph))},T.isVisible=function(T){var B=this;if(oJ(T)!==B._currentSubGraph)return!1;if(Z1(T)){var G=T._40I,H=T._41I;if(!G||!H)return!1;if(!(T.s("edge.independent")||B.isVisible(G)&&B.isVisible(H)))return!1;if(T.isEdgeGroupHidden())return!1}else for(var f=T._parent;f&&!f.ISubGraph;){if(R1(f)&&(!f.isExpanded()||!B.isVisible(f)))return!1;f=f._parent}if(T._parent instanceof nW&&!B.isVisible(T._parent))return!1;if(T._refGraph instanceof aW&&!B.isVisible(T._refGraph))return!1;if(B instanceof TZ){if(!T.s("3d.visible"))return!1}else{if((G=B.getLayersInfo())&&(H=G[T._layer])&&!1===H.visible)return!1;if(!T.s("2d.visible"))return!1}return!B._visibleFunc||B._visibleFunc(T)},T.handleSelectionChange=function(T){var G=this;T.datas.each(function(T){G.invalidateData(T);var B=T._parent;R1(B)&&r(T)&&T.s(pe)&&(G.invalidateData(B),B._49I&&B._49I.each(function(T){G.invalidateData(T)}))}),G.onSelectionChanged(T)},T.onSelectionChanged=function(T){var B=this.sm();1!==B.size()||"set"!==T.kind&&"append"!==T.kind||(T=B.ld(),this.isAutoMakeVisible()&&this.makeVisible(T),this.adjustIndex&&this._dataModel.isAutoAdjustIndex()&&this.adjustIndex(T))},T.makeVisible=function(T){if(T&&(this.getDataUI?this.getDataUI(T):this.getData3dUI(T))){var B=T,G=oJ(T);for(G!==this._currentSubGraph&&this.setCurrentSubGraph(G);(B=B._parent)&&B!==G;)R1(B)&&B.setExpanded(!0);this._23I=T,this.iv()}},T.getLabel=function(T){var B=T.getStyle(ce);return B===Ht?T.getName():B},T.getLabelBackground=function(T){return T.getStyle("label.background")},T.getLabelColor=function(T){return T.getStyle("label.color")},T.getLabel2=function(T){return T.getStyle("label2")},T.getLabel2Background=function(T){return T.getStyle("label2.background")},T.getLabel2Color=function(T){return T.getStyle("label2.color")},T.getNote=function(T){return T.getStyle(de)},T.getNoteBackground=function(T){return T.getStyle("note.background")},T.getNote2=function(T){return T.getStyle(Ne)},T.getNote2Background=function(T){return T.getStyle("note2.background")},T.handleClick=function(T,B,G){B?(this.fi({kind:"clickData",event:T,data:B,part:G}),this.onDataClicked(B,T)):(this.fi({kind:"clickBackground",event:T}),this.onBackgroundClicked(T))},T.handleDoubleClick=function(T,B,G){var H=this;L2(T)&&(B?(H.fi({kind:"doubleClickData",event:T,data:B,part:G}),H.onDataDoubleClicked(B,T,G),H.checkDoubleClickOnNote(T,B,G)||H.checkDoubleClickOnRotation&&H.checkDoubleClickOnRotation(T,B,G)||(Z1(B)?H.onEdgeDoubleClicked(B,T,G):B.ISubGraph?H.onSubGraphDoubleClicked(B,T,G):R1(B)?H.onGroupDoubleClicked(B,T,G):B.IDoorWindow?H.onDoorWindowDoubleClicked(B,T,G):B.ICSGBox&&H.onCSGBoxDoubleClicked(B,T,G))):(H.fi({kind:"doubleClickBackground",event:T}),H.onBackgroundDoubleClicked(T)))},T.onSubGraphDoubleClicked=function(T,B,G){this.setCurrentSubGraph(T)},T.onEdgeDoubleClicked=function(T,B,G){this.isEditable(T)||(T.ISubGraph&&!b2(B)?this.setCurrentSubGraph(T):T.s("edge.toggleable")&&T.toggle())},T._39Q=function(T){return!!this.isInteractive(T)&&this.preventDefaultWhenInteractive(T)},T.preventDefaultWhenInteractive=function(T){return T.s("preventDefaultWhenInteractive")},T.onGroupDoubleClicked=function(T,B,G){T.s("group.toggleable")&&T.toggle()},T.onDoorWindowDoubleClicked=function(T,B,G){T.s("dw.toggleable")&&T.toggle(!0)},T.onCSGBoxDoubleClicked=function(T,B,G){this instanceof TZ&&(B=this.intersectObject(B,T))&&T.s(B.part+".toggleable")&&T.toggleFace(B.part,!0)},T.onBackgroundClicked=function(T){},T.onBackgroundDoubleClicked=function(T){this.upSubGraph()},T.onDataClicked=function(T,B,G){},T.onDataDoubleClicked=function(T,B,G){},T.onAutoLayoutEnded=function(){},T.onMoveEnded=function(){},T.onPanEnded=function(){},T.onPinchEnded=function(){},T.onRectSelectEnded=function(){},T.onZoomEnded=function(){},T.serialize=function(T){return this.dm().serialize(T)},T.toJSON=function(){return this.dm().toJSON()},T.deserialize=function(T,B){var M=this,Y=((B=B instanceof WJ?{rootParent:B}:J1(B)?{setId:B}:Y1(B)?{finishFunc:B}:B||{}).view=M).dm();return B.reset&&(Y.setAttrObject({}),Y.setLayers(Ht),Y.setName(Ht),Y.setAutoAdjustIndex(!0),Y.setHierarchicalRendering(!1),Y.setBackground(Ht),Y.setInit(Ht),Y.setPostProcessingData(Ht),Y.setEnvmap(Ht),Y.setEnvmapType(Ht),M.disableToolTip(),M instanceof L.graph.GraphView?(M.setZoomable(vt.graphViewZoomable),M.setPannable(vt.graphViewPannable),M.setRectSelectable(vt.graphViewRectSelectable)):M instanceof L.graph3d.Graph3dView&&(M.shadowMap.resetProperties(),M.setDashDisabled(vt.graph3dViewDashDisabled),M.setUvClipEnabled(vt.graph3dViewUvClipEnabled),M.getHighlightHelper().resetProperties(),M.resetHeadlightProperties(),M.resetFogProperties(),M.setBatchInfoMap({}),M.setBatchColorDisabled(vt.graph3dViewBatchColorDisabled),M.setBatchInstancedDisabled(vt.graph3dViewBatchInstancedDisabled),M.setBatchBlendDisabled(vt.graph3dViewBatchBlendDisabled),M.setBatchBrightnessDisabled(vt.graph3dViewBatchBrightnessDisabled),M.setFlowBlendMode(vt.graph3dViewFlowBlendMode),M.setMoveStep(vt.graph3dViewMoveStep),M.setRotateStep(vt.graph3dViewRotateStep),M.setSortable(vt.graph3dViewSortable),M.setSortFunc(Ht),M.setSkybox(Ht),M.setToneMapping(Ht),M.setToneMappingExposure(1))),B.__innerHandler__=function(T){var G,H,f,B,v,J;J1(Y.a("toolTipEnable"))&&(Y.a("toolTipEnable")?M.enableToolTip():M.disableToolTip()),m1(Y.a("fontFaces"))&&Y.a("fontFaces").forEach(function(T){vt.addFontFace(T.name,T.url)}),M instanceof L.graph.GraphView&&(J1(Y.a("zoomable"))&&M.setZoomable&&M.setZoomable(Y.a("zoomable")),J1(Y.a("pannable"))&&M.setPannable&&M.setPannable(Y.a("pannable")),J1(Y.a("rectSelectable"))&&M.setRectSelectable&&M.setRectSelectable(Y.a("rectSelectable")),!0===Y.a("fitContent")&&M.fitContent&&M.fitContent(!0,0)),M instanceof L.graph3d.Graph3dView&&((T=T.scene)&&T.shadow!=ft&&M.shadowMap.setShadow(T.shadow,T.shadowParams),(J=Y.a("sceneContext"))?(J.eye&&M.setEye(J.eye),J.center&&M.setCenter(J.center),v1(J.far)&&M.setFar(J.far),v1(J.near)&&M.setNear(J.near)):(v1(Y.a("sceneNear"))&&M.setNear(Y.a("sceneNear")),v1(Y.a("sceneFar"))&&M.setFar(Y.a("sceneFar")),T&&(T.eye&&M.setEye(T.eye),T.center&&M.setCenter(T.center))),v1(Y.a("sceneDevicePixelRatio"))&&M.setDevicePixelRatio(Y.a("sceneDevicePixelRatio")),v1(Y.a("sceneFovy"))&&M.setFovy(Y.a("sceneFovy")),J1(Y.a("sceneOrtho"))&&M.setOrtho(Y.a("sceneOrtho")),v1(Y.a("sceneOrthoWidth"))&&M.setOrthoWidth(Y.a("sceneOrthoWidth")),J1(Y.a("sceneShadowEnabled"))&&(Y.a("sceneShadowEnabled")?M.enableShadow():M.disableShadow()),v1(Y.a("sceneShadowDegreeX"))&&M.setShadowDegreeX(Y.a("sceneShadowDegreeX")),v1(Y.a("sceneShadowDegreeZ"))&&M.setShadowDegreeZ(Y.a("sceneShadowDegreeZ")),v1(Y.a("sceneShadowIntensity"))&&M.setShadowIntensity(Y.a("sceneShadowIntensity")),Y.a("sceneShadowQuality")!=ft&&M.setShadowQuality(Y.a("sceneShadowQuality")),Y.a("sceneShadowType")&&M.setShadowType(Y.a("sceneShadowType")),v1(Y.a("sceneShadowRadius"))&&M.setShadowRadius(Y.a("sceneShadowRadius")),v1(Y.a("sceneShadowBias"))&&M.setShadowBias(Y.a("sceneShadowBias")),J1(Y.a("sceneDashEnable"))&&M.setDashDisabled(!Y.a("sceneDashEnable")),J1(Y.a("sceneUvClipEnabled"))&&M.setUvClipEnabled(Y.a("sceneUvClipEnabled")),Et(Y.a("sceneHighlightMode"))&&M.setHighlightMode(Y.a("sceneHighlightMode")),v1(Y.a("sceneHighlightWidth"))&&M.setHighlightWidth(Y.a("sceneHighlightWidth")),Y.a("sceneHighlightColor")&&M.setHighlightColor(Y.a("sceneHighlightColor")),Y.a("sceneHighlightType")&&M.setHighlightType(Y.a("sceneHighlightType")),Y.a("sceneHighlightGlow")&&M.setHighlightGlow(Y.a("sceneHighlightGlow")),Y.a("sceneHighlightStrength")&&M.setHighlightStrength(Y.a("sceneHighlightStrength")),J1(Y.a("sceneHeadlightEnable"))&&M.setHeadlightDisabled(!Y.a("sceneHeadlightEnable")),Y.a("sceneHeadlightDirection")!=ft&&M.setHeadlightDirection(Y.a("sceneHeadlightDirection")),v1(Y.a("sceneHeadlightRange"))&&M.setHeadlightRange(Y.a("sceneHeadlightRange")),Y.a("sceneHeadlightColor")&&M.setHeadlightColor(Y.a("sceneHeadlightColor")),v1(Y.a("sceneHeadlightIntensity"))&&M.setHeadlightIntensity(Y.a("sceneHeadlightIntensity")),v1(Y.a("sceneHeadlightAmbientIntensity"))&&M.setHeadlightAmbientIntensity(Y.a("sceneHeadlightAmbientIntensity")),v1(Y.a("sceneHeadlightRatioForPhysicalMaterial"))&&M.setHeadlightRatioForPhysicalMaterial(Y.a("sceneHeadlightRatioForPhysicalMaterial")),v1(Y.a("sceneHeadlightGroup"))&&M.setHeadlightGroup(Y.a("sceneHeadlightGroup")),J1(Y.a("sceneFogEnable"))&&M.setFogDisabled(!Y.a("sceneFogEnable")),Y.a("sceneFogMode")&&M.setFogMode(Y.a("sceneFogMode")),v1(Y.a("sceneFogDensity"))&&M.setFogDensity(Y.a("sceneFogDensity")),Y.a("sceneFogColor")&&M.setFogColor(Y.a("sceneFogColor")),v1(Y.a("sceneFogNear"))&&M.setFogNear(Y.a("sceneFogNear")),v1(Y.a("sceneFogFar"))&&M.setFogFar(Y.a("sceneFogFar")),J1(Y.a("sceneBatchBrightnessDisabled"))&&M.setBatchBrightnessDisabled(Y.a("sceneBatchBrightnessDisabled")),Y.a("sceneFlowBlendMode")!==Ht&&M.setFlowBlendMode(Y.a("sceneFlowBlendMode")),Y.a("sceneToneMapping")!==Ht&&M.setToneMapping(Y.a("sceneToneMapping")),v1(Y.a("sceneToneMappingExposure"))&&M.setToneMappingExposure(Y.a("sceneToneMappingExposure")),J1(Y.a("sceneBatchBlendDisabled"))&&M.setBatchBlendDisabled(Y.a("sceneBatchBlendDisabled")),J1(Y.a("sceneBatchColorDisabled"))&&M.setBatchColorDisabled(Y.a("sceneBatchColorDisabled")),J1(Y.a("sceneBatchInstancedDisabled"))&&M.setBatchInstancedDisabled(Y.a("sceneBatchInstancedDisabled")),Y.a("sceneBatchInfoMap")&&M.setBatchInfoMap(Y.a("sceneBatchInfoMap")),Y.a("sceneRenderLayerInfoMap")&&M.setRenderLayerInfoMap(Y.a("sceneRenderLayerInfoMap")),v1(Y.a("sceneMoveStep"))&&M.setMoveStep(Y.a("sceneMoveStep")),v1(Y.a("sceneRotateStep"))&&M.setRotateStep(Y.a("sceneRotateStep")),J1(Y.a("sceneSortable"))&&M.setSortable(Y.a("sceneSortable")),Y1(Y.a("sceneSortFunc"))&&M.setSortFunc(Y.a("sceneSortFunc")),Et(Y.a("sceneShaderSummary"))&&(M.enableShaderCompileParallel(),M.setShaderGCInterval(1/0),M.deserializePhysicalShader(Y.a("sceneShaderSummary"))),(J=Y.a("sceneSkyboxType")||"sphere")!=ft&&(H=!(G={}),T=Y.a("sceneSkyboxColor"),"sphere"===J?(G.shape3d=J,(B=Y.a("sceneSkyboxImage"))&&(G["shape3d.image"]=B,H=!0)):"cube"===J?(G.shape3d=Ht,["front","back","left","right","top","bottom"].forEach(function(T){var B=T+".image",T=T.charAt(0).toUpperCase()+T.slice(1);(T=Y.a("sceneSkybox"+T+"Image"))&&(G[B]=T,H=!0)})):"color"===J&&T&&(H=!0),H&&(f=new LW,v=Y.a("sceneSkyboxDiameter"),v1(v)?f.s3(v,v,v):f.s3(20,20,20),G["body.color"]=Y.a("sceneSkyboxBodyColor"),G.envmap=Y.a("sceneSkyboxEnvmap"),G["envmap.probe"]=Y.a("sceneSkyboxEnvmapProbe"),G.roughness=Y.a("sceneSkyboxRoughness"),G["shape3d.light"]=G["all.light"]=Y.a("sceneSkyboxLight"),G["light.mask"]=Y.a("sceneSkyboxLightMask"),G["headlight.ambientIntensity"]=Y.a("sceneSkyboxHeadLightAmbientIntensity"),G["skybox.blur.size"]=Y.a("sceneSkyboxBlurSize"),G["skybox.blur.resolution"]=Y.a("sceneSkyboxBlurResolution"),G["texture.wrap"]="clampToEdge",G["3d.clipbox.mask"]=rE,G["effect.flow.mask"]=rE,"color"===J&&(G.shape3d="sphere",(v=(B=f.s("shape3d.image"))&&L.Default.getImage(B))&&"CANVAS"===v.tagName||(v=R.createElement("canvas"),B=L.Math.generateUUID(),L.Default.setImage(B,v)),B&&M.getTextureMap()&&M.deleteTexture(B),L.Default.setCanvas(v,2,1024,1),(J=v.getContext("2d")).clearRect(0,0,2,1024),J.beginPath(),J.rect(0,0,2,1024),K0(J,T,function(T){return T},!1,{x:0,y:0,width:2,height:1024}),J.fill(),J.restore(),G["shape3d.image"]=B),f.s(G),["X","Y","Z"].forEach(function(T){var B=Y.a("sceneSkyboxRotation"+T);v1(B)&&f["setRotation"+T](B)}),M.setSkybox(f))))},Y.deserialize(T,B.rootParent,B)},T.isDebugTipShowing=function(){return!!this._debugDiv},T.showDebugTip=function(){var T,G,H=this,f=H._debugDiv;f||((f=H._debugDiv=R.createElement("div")).style.position="absolute",f.style.overflow="hidden",f.style.font=vt.debugTipLabelFont,f.style.padding="6px",f.style.backgroundColor=vt.debugTipBackground,f.style.color=vt.debugTipLabelColor,T=H.getView(),H._79O?T.insertBefore(f,H._79O):T.appendChild(f),G=function(){H.redraw();var T=H._canvas,T="FPS: "+H._fpsInfo.fps+"<br/>Datas: "+H.dm().getDatas().length+(T?"<br/>Size: "+T.width+" * "+T.height:""),B=H.dm()._historyManager;B&&(T+="<br/>Undoes: "+B.getHistories().length+" index: "+B.getHistoryIndex()),(B=H.getDebugTip())&&(T+="<hr>"+B),f.innerHTML=T,H._isDebugging&&requestAnimationFrame(G)},requestAnimationFrame(G),H._isDebugging=!0)},T.hideDebugTip=function(){var T=this._debugDiv;T&&(delete this._debugDiv,this.getView().removeChild(T),this._isDebugging=!1)},T.updateDOMAppendMatrix=function(){var T=this.getView();T&&(T.updateAppendMatrix=!0)},T.countFrame=function(){var T,B;this._isDebugging&&(1e3<(T=Date.now())-(B=this._fpsInfo).time?(B.fps=Math.round(1e5*(B.frames+1)/(T-B.time))/100,B.time=T,B.frames=0):B.frames++)}},ms_icons:function(T,B){T.getRotation=function(T,B){return T==ft?0:T},T._15O=function(){var T=this,B=T.s(Qe);if(B){var G,H=T,f=T.data||T._data,v=f.getRotation&&f.getRotation(),J=T._38o={icons:B,rects:{}};for(G in B){var M=B[G],Y=n(M.shape3d,f,H);if(!(!1===n(M.visible,f,H)||n(M.for3d,f,H)&&!T.I3d||Y&&!T.I3d)){var m=Y?[Y]:n(M.names,f,H),E=m?m.length:0,Z=n(M.position,f,H)||3,R=n(M.offsetX,f,H)||0,A=n(M.offsetY,f,H)||0,g=n(M.direction,f,H)||Me,F=(W=n(M.gap,f,H))!=ft?W:1,W=n(M.rotation,f,H),s=n(M.keepOrien,f,H),S=n(M.rotationFixed,f,H)?W:T.getRotation(W,s,Z),y=ft,x=J.rects[G]=new Array(E);v1(v)&&(v1(S)?S+=v:S=v),x.rotation=S;for(var w=0;w<E;w++){var O,_,p,q=m[w];Y?_=O=0:(q=z(q),O=n(M.width,f,H),_=n(M.height,f,H),O==ft&&(O=ks(q,f)),_==ft&&(_=Cs(q,f))),y?g===Me?R+=O/2:g===Ye?R-=O/2:g===me?A-=_/2:A+=_/2:y={width:O,height:_},T.I3d?(q=-O/2,p=-_/2,p={width:O,height:_,mat:T._16O(n(M.autorotate,f,H),Z,y,n(M.face,f,H)||Ct,n(M.t3,f,H),n(M.r3,f,H),n(M.rotationMode,f,H),R,A),vs:new Fs([q,-p,0,q,-p-_,0,q+O,-p-_,0,q+O,-p,0])}):(p={x:(q=T.getPosition(Z,R,A,y,n(M.positionFixed,f,H))).x-O/2,y:q.y-_/2,width:O,height:_},T._68o(p,S)),x[w]=p,g===Me?R+=O/2+F:g===Ye?R-=O/2+F:g===me?A-=_/2+F:A+=_/2+F}}}}}}});var xJ={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},wJ={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},OJ={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},_J={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},pJ={position:1,width:1,height:1,expanded:1,rotation:1,anchor:1,scale:1,"s:edge.points":1},qJ={"edge.type":1,"edge.group":1},uJ={rotation:1,rotationX:1,rotationZ:1,rotation3d:1},iJ={rotation:1,position:1,width:1,height:1,anchor:1,scale:1,host:1,"s:vector.layoutable":1},IJ={position:1,width:1,height:1,anchor:1,scale:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},DJ={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},hJ={shape:1,thickness:1,position:1,anchor:1,scale:1},oJ=function(T){if(!T)return ft;var B,G;if(Z1(T))return B=T._40I,G=T._41I,B&&G&&(B=oJ(B))===oJ(G)?B:ft;for(var H=T._parent;Z1(H)&&!H.ISubGraph;)H=H._parent;return H?H.ISubGraph?H:oJ(H):ft},eJ=function(T,B,G,H){var f=B.getStyle(G)*H;f&&Bs(T,f),(f=B.getStyle(G+".left")*H)&&(T.x-=f,T.width+=f),(f=B.getStyle(G+".right")*H)&&(T.width+=f),(f=B.getStyle(G+".top")*H)&&(T.y-=f,T.height+=f),(f=B.getStyle(G+".bottom")*H)&&(T.height+=f),T.width<0&&(T.width=-T.width,T.x-=T.width),T.height<0&&(T.height=-T.height,T.y-=T.height)},cJ=function(T){for(var B,G=0,H=T.size();G<H;G++)if(B=T.getChildAt(G),r(B)&&cJ(B))return!0;return T.hasAgentEdges()},tJ=function(T){if(!T)return ft;for(var B=T._parent;R1(B);){if(!R1(B._parent))return B.isExpanded()?T:B;B.isExpanded()||(T=B),B=B._parent}return T},dJ=function(T,B){if(!T||!B)return ft;var G,H,f,v=oJ(T),J=oJ(B);if(v===J)return T;for(;J&&v!==J;)J=oJ(J);if(v===J)return T;(G=new $).add(T,0);for(var M=T._parent;r(M)&&!B.isDescendantOf(M);)G.add(M,0),M=M._parent;for(f=G.size(),H=0;H<f;H++){var Y=G.get(H);if(R1(Y)&&!Y.isExpanded())return Y;if(Y.ISubGraph)return Y}return T},NJ=function(T,B,G){var H,f,v,J="target"===(G="target"!==G?"source":G)?B.getTargetAgent():B.getSourceAgent(),G="edge."+G+".";return Z1(J)?((H=T.getDataUI(J))._79o(),0<=(f=B.s(G+"index"))?(v=HW(H))[Math.max(0,Math.min(f,v.length-1))]:(f=B.s(G+"percent")||0,f=Math.max(0,Math.min(f,1)),v=CJ(H),GW(v,100*f))):QJ(T,J,B.s(G+"position"),B.s(G+"offset.x"),B.s(G+"offset.y"),B.s(G+"anchor.x"),B.s(G+"anchor.y"))},QJ=function(T,B,G,H,f,v,J){if(!B)return ft;var M,Y,m,E,Z,R=B.getRotation?B.getRotation():0;return G=v!==Ht||J!==Ht?(v=v===Ht?.5:v,J=J===Ht?.5:J,m=B.getScale(),R&&!A1(B,T)||m.x<0||m.y<0?(M=B.getPosition(),E=B.getWidth(),Y=B.getHeight(),Z=B.getAnchor(),new L9(R,M.x,M.y,m.x,m.y).tf((v-Z.x)*E,(J-Z.y)*Y)):{x:(M=yJ(T,B)).x+v*M.width,y:M.y+J*M.height}):p4(G,yJ(T,B)),R&&(Z=H*(m=Mt(R))-f*(E=Yt(R)),f=H*E+f*m,H=Z),G.x+=H,G.y+=f,G},LJ=function(T,B){var G,H,f=function(T,B){if(!T||!B)return ft;var G,H,f,v,J,M;if(T===B){if(!(v=T.getLoopedEdges()))return ft;v=new $(v)}else{if(J=T.getAgentEdges(),M=B.getAgentEdges(),!J||!M)return ft;for(H=J.size(),G=0;G<H;G++)f=J.get(G),M.contains(f)&&(v=v||new $).add(f)}if(v)for(G=0;G<v.size();G++)(f=v.get(G)).getStyle(Ke)===De&&(f._22I(ft),v.removeAt(G),G--);return v}(T,B);f&&!f.isEmpty()&&(1===f.size()?f.get(0)._22I(ft):(G=new $,H=new $,f.each(function(T){T=T.s("edge.group"),G.contains(T)||G.add(T)}),G.sort(),G.each(function(B){H.add(new L.EdgeGroup(f.toList(function(T){return B===T.s("edge.group")}),H))}),H.each(function(B){B.each(function(T){T._22I(B)})})))},jJ=function(T,B,G){var H=T._canvas,T=(T._zoom,Gs(B,H)),B=Gs(G,H);return{x:T.x-B.x,y:T.y-B.y}},rJ=function(T,B){var G,H,f,v,J,M,Y,m,E,Z,R,A;B&&(G=B.rect,H=B.color,f=B.rotation,v=B.labelWidth,J=B.background,M=B.opacity,Y=(A=B.scale)!=ft&&1!==A,M!=ft&&(m=T.globalAlpha,T.globalAlpha*=M),(f||Y)&&(T.save(),E=G.x+G.width/2,Z=G.y+G.height/2,f0(T,E,Z),f&&v0(T,f),Y&&T.scale(A,A),f0(T,-E,-Z)),J&&k0(T,G.x,G.y,G.width,G.height,J),v&&(R=G.width,(A=T.createLinearGradient(G.x,G.y,G.x+R,G.y)).addColorStop(0,H),A.addColorStop(.9,H),A.addColorStop(1,rB),H=A,G.width=v),P1(T,B.ss,G,B.font,H,B.align,B.decoration),v&&(G.width=R),(f||Y)&&T.restore(),M!=ft&&(T.globalAlpha=m))},XJ=function(T,B){var G,H,f,v,J,M,Y,m,E,Z,R,A,g,F,W,s,S;B&&(H=(G=B.rect).x,f=G.y,v=G.width,J=G.height,M=B.background,Y=B.backgroundImage,m=B.borderWidth,E=B.borderColor,Z=B.labelWidth,R=B.opacity,A=(S=B.scale)!=ft&&1!==S,R!=ft&&(g=T.globalAlpha,T.globalAlpha*=R),A&&(T.save(),F=G.x+G.width/2,s=G.y+G.height/2,f0(T,F,s),T.scale(S,S),f0(T,-F,-s)),B.expanded?(S=Jt(8,v/4),F=f+J-8,T.fillStyle=M,T.beginPath(),T.moveTo(H,f),T.lineTo(H,F),T.lineTo(H+v/2,F),T.lineTo(H+v/2,f+J),T.lineTo(H+v/2+S,F),T.lineTo(H+v,F),T.lineTo(H+v,f),T.closePath(),T.fill(),m&&(T.lineWidth=m,T.lineJoin="round",T.lineCap="round",E?T.strokeStyle=E:(T.strokeStyle=d2(M),T.beginPath(),T.moveTo(H+v,f),T.lineTo(H+v,F),T.lineTo(H+v/2+S,F),T.lineTo(H+v/2,f+J),T.stroke(),T.strokeStyle=t2(M),T.beginPath(),T.moveTo(H+v,f),T.lineTo(H,f),T.lineTo(H,F),T.lineTo(H+v/2,F),T.lineTo(H+v/2,f+J)),T.stroke()),Y?u2(T,z(Y),LB,G.x,G.y,G.width,G.height-8,B.data,B.view):(G.height-=8,M=B.color,Z&&((s=T.createLinearGradient(H,f,H+(W=v),f)).addColorStop(0,M),s.addColorStop(.9,M),s.addColorStop(1,rB),M=s,G.width=Z),P1(T,B.ss,G,B.font,M,B.align),Z&&(G.width=W),G.height+=8)):B.icon?as(T,z(B.icon),H,f,v,J,B.data,B.view):(S=v/2,m&&(T.lineWidth=m,T.lineJoin="round",T.lineCap="round",T.strokeStyle=E||d2(M),T.beginPath(),T.arc(H+S,f+S,S,ot,1.6*o,!0),T.moveTo(H+S,f+J),T.lineTo(H+v-S/5,f+S),T.stroke(),T.strokeStyle=E||t2(M),T.beginPath(),T.arc(H+S,f+S,S,1.6*o,ot,!0),T.moveTo(H+S,f+J),T.lineTo(H+S/5,f+S),T.stroke()),T.fillStyle=M,T.beginPath(),T.arc(H+S,f+S,S,0,mt,!0),T.moveTo(H+S,f+J),T.lineTo(H+v-S/5,f+S),T.lineTo(H+S/5,f+S),T.closePath(),T.fill(),T.fillStyle=B.color,T.beginPath(),T.arc(H+S,f+S,S/3,0,mt,!0),T.fill()),A&&T.restore(),R!=ft&&(T.globalAlpha=g))},UJ=function(T,B){return 2*T<B?T:B/2},lJ=function(T,B,G,H){if(!T||!B)return 0;var f=ct(B.y-T.y,B.x-T.x);return(f=!G&&B.x<T.x?f+o:f)+H},bJ=function(T,B,G,H,f,v,J){return J&&(T.x>B.x||T.x===B.x&&T.y>B.y)&&(G=_4[G],f=-f),(J=p4(G,{x:0,y:0,width:n2(T,B),height:0},v)).x+=H,J.y+=f,(J=new L9(ct(B.y-T.y,B.x-T.x)).tf(J)).x+=T.x,J.y+=T.y,J},KJ=function(T,G,H,B,f){if(T._19Q=!0,!H.getEdgeGroup())return B?H.s("edge.gap"):0;if(Z1(H.getSourceAgent())||Z1(H.getTargetAgent()))return 0;var v,J=0,M=0,Y=0;return H.getEdgeGroup().getSiblings().each(function(T){T.each(function(T){var B;G.isVisible(T)&&T.s(Ke)==f&&(B=T.s("edge.gap"),v?M+=Y/2+B/2:v=T,Y=B,T===H&&(J=M))})}),B?M-J+Y:(B=J-M/2,v&&H._40I!==v._40I&&(T._19Q=!1),B)},zJ=function(T){if(1===(B=T._getValidSelection()).length){var B,G=(B=B[0])instanceof L.Edge;if((B instanceof L.Shape||G)&&(!(G=G&&B.s("edge.type"))||"points"===G))return(G=T.gv).isPointEditable&&!G.isPointEditable(B)||!G.isEditable(B)?void 0:B}},nJ=L.graph={},T=function(T,B,G){Es("ht.graph."+T,B,G)},$J=(L.layout={},{}),VJ=function(T,B,G,H,f,v,J,M){var Y=J._zoom;if(!Y)return B;if(Y!==J._cacheZoom&&(J._cacheZoom=Y,J._cacheImage={}),Y*=B2,H=Math.ceil(H),f=Math.ceil(f),2048<H*Y||2048<f*Y)return B;var m,E=[B.uuid,H,f,G].join("_"),Z=v.s("state");if(Z&&(E+="_"+Z),(Z=B.cacheRule)&&(Y1(Z)?A=Z(v,J):Y1(Z.func)&&(A=Z.func(v,J))),A===Ht&&v instanceof L.Data){var R=B.dataBindings;if(R){for(var A="",g=R.length-1;0<=g;g--){var F=v.ca(R[g].attr);M1(F)||m1(F)||(A+="_"+F)}A=A.slice(1)}}if(E+="_"+A,H<=f&&H*Y<1?(m=f/H,f=(H=1/Y)*m):f<=H&&f*Y<1&&(m=H/f,H=(f=1/Y)*m),H=Math.ceil(H),f=Math.ceil(f),!(Z=J._cacheImage[E])){if(bs=!0,Z=L.Default.toCanvas(B,H,f,G,v,J,M,Y),!bs)return B;J._cacheImage[E]=Z}return Z};S1(vt,{setImageCacheRule:function(T,B){var G,H;for(H in B||"object"!=typeof T?(G={})[T]=B:G=T,G){var f=G[H];Et(H)?(Es=z(H))?Es.cacheRule=f:$J[H]=f:H.cacheRule=f}}});(B={comps:[{type:se,points:[85,50,70,115,100,71,86,107,88,49,43,57,106,98,116,66,120,50,109,74,72,112,110,116,66,84,77,110,90,111,117,85,56,70,53,86,118,103,111,83,68,53,52,61],borderWidth:1,borderColor:ft}]})[Oe]=B[_e]=160,Q.Image&&((gW=new Q.Image).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAALUlEQVRYR+3QQREAAAABQfqXFsNnFTizzXk99+MAAQIECBAgQIAAAQIECBAgMBo/ACHo7lH9AAAAAElFTkSuQmCC",zt("default_blank",gW)),zt("node_image",kw(30,30,[{type:j,rect:[4,5,22,16],gradient:H2,gradientColor:N4,background:g},{type:j,rect:[2,3,26,20],borderWidth:1,borderColor:g},{type:j,rect:[11,23,8,4],background:g},{type:j,rect:[6,27,18,2],background:g}])),zt("node_icon",kw(16,16,[{type:j,rect:[2,2,12,10],gradient:H2,gradientColor:N4,background:g},{type:Ae,rect:[2,2,12,10],width:1,color:g},{type:j,rect:[6,12,4,2],background:g},{type:j,rect:[4,14,8,1],background:g}])),zt("block_icon",kw(16,16,[{type:Ae,rect:[1,1,14,14],width:1,color:g}])),zt("group_image",kw(66,39,[{type:j,rect:[44.3,18,18.1,12.8],gradient:H2,gradientColor:N4,background:g},{type:j,rect:[3.3,17.8,18.1,12.8],gradient:H2,gradientColor:N4,background:g},{type:j,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:g,gradient:H2,gradientColor:N4,background:g},{type:j,rect:[26.2,29.4,12.8,4.2],background:g},{type:j,rect:[21.3,33.5,22.5,2.3],background:g},{type:j,rect:[5.3,32.7,14.1,2.1],background:g},{type:j,rect:[9,30.4,6.7,2.4],background:g},{type:j,rect:[50,30.7,6.7,2.4],background:g},{type:j,rect:[46.3,33,14.1,2.1],background:g}])),zt("group_icon",kw(16,16,[{type:j,rect:[4,12,4,2],background:g},{type:j,rect:[2,13,8,1],background:g},{type:j,rect:[12,12,2,1],background:g},{type:j,rect:[11,13,4,1],background:g},{type:j,rect:[10,7,6,5],gradient:H2,gradientColor:N4,background:g},{type:j,rect:[1,2,10,10],gradient:H2,gradientColor:N4,background:g},{type:Ae,rect:[1,2,10,10],width:1,color:g}])),zt("refGraph_icon",kw(16,16,[{type:"shape",borderWidth:1,borderColor:g,borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:g,borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}])),zt("edge_icon",kw(16,16,[{type:j,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:H2,gradientColor:N4,background:g},{type:j,rect:[10.8,1,4,4],background:g},{type:j,rect:[1,11,4,4],background:g}])),zt("subGraph_image",kw(72,45,[{type:se,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:H2,gradientColor:N4,background:g},{type:j,rect:[29.6,30.7,3.6,1.8],background:g},{type:j,rect:[28.4,32.3,6,1.2],background:g},{type:j,rect:[37.3,32,10.8,1.8],background:g},{type:j,rect:[39.1,29.9,7.2,2.3],background:g},{type:j,rect:[26.6,23.7,9.6,7.2],gradient:H2,gradientColor:N4,background:g},{type:j,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:g,gradient:H2,gradientColor:N4,background:g}])),zt("subGraph_icon",kw(17,17,[{type:se,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:H2,gradientColor:N4,background:g}])),zt("shape_icon",kw(16,16,[{type:se,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:g}])),zt("polyline_icon",kw(16,16,[{type:se,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:g},Cw(7.5,.4),Cw(7.5,6.3),Cw(13.6,6.3),Cw(13.6,14),Cw(.7,13.9),Cw(.7,.3)])),zt("grid_icon",kw(16,16,[{type:j,rect:[1,1,4,4],background:g,gradient:H2,gradientColor:N4},{type:j,rect:[6,1,4,4],background:g,gradient:H2,gradientColor:N4},{type:j,rect:[11,1,4,4],background:g,gradient:H2,gradientColor:N4},{type:j,rect:[11,6,4,4],background:g,gradient:H2,gradientColor:N4},{type:j,rect:[6,6,4,4],background:g,gradient:H2,gradientColor:N4},{type:j,rect:[1,6,4,4],background:g,gradient:H2,gradientColor:N4},{type:j,rect:[11,11,4,4],background:g,gradient:H2,gradientColor:N4},{type:j,rect:[6,11,4,4],background:g,gradient:H2,gradientColor:N4},{type:j,rect:[1,11,4,4],background:g,gradient:H2,gradientColor:N4}])),zt("light_icon",kw(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:g},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:g,gradient:H2,gradientColor:N4,background:{func:function(T){return T=T?T.s(LE):ft,m1(T)?"rgb("+dt(255*T[0])+","+dt(255*T[1])+","+dt(255*T[2])+")":T||g}}}])),zt("text_icon",kw(16,16,[{type:"shape",points:[3,3,13,3,8,3,8,14],segments:[1,2,1,2],borderWidth:1,borderColor:g}])),zt("border_image",{fitSize:!0,comps:[{type:"border",relative:!0,rect:[0,0,1,1],color:{func:"style@border_color"},width:{func:"style@border_width"}}]}),zt("columnChart_image",{fitSize:!0,boundExtend:150,comps:[{type:{func:"style@chart.type"},relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"}}]}),zt("lineChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"lineChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"},linePoint:{func:"style@chart.line.point"},lineWidth:{func:"style@chart.line.width"},line3d:{func:"style@chart.line.3d"}}]}),zt("pieChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"pieChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},hollow:{func:"style@chart.hollow"},startAngle:{func:"style@chart.start.angle"},values:{func:"style@chart.values"},colors:{func:"style@chart.colors"}}]});var PJ=function(T,B,G,H,f,v){var J,M,Y,m,E,Z=[],R=-((H=Math.abs(H)>2*Math.PI?2*Math.PI:H)/(J=Math.ceil(Math.abs(H)/(Math.PI/4)))),A=-G;if(0<J){H=T+Math.cos(G)*f,G=B+Math.sin(-G)*v,Z.push({x:H,y:G});for(var g=0;g<J;g++)E=(A+=R)-R/2,M=T+Math.cos(A)*f,Y=B+Math.sin(A)*v,m=T+Math.cos(E)*(f/Math.cos(R/2)),E=B+Math.sin(E)*(v/Math.cos(R/2)),Z.push({x:m,y:E}),Z.push({x:M,y:Y})}return Z},kJ=function(T){if(T){var B=T._data;if(B instanceof L.Shape)return{points:B.getPoints(),segments:B.getSegments()};if(B instanceof L.Edge&&(B=T._78o)){var T=B.type,G=B.points,H=B.segments,f=B.edgeTypeInfo;if(!T||G){var v=(J=B.sourcePoint).x,J=J.y,M=(Y=B.targetPoint).x,Y=Y.y;if(T)H?((m=new $({x:v,y:J})).addAll(G),m.add({x:M,y:Y}),E=new $(H._as)):(m=new $({x:v,y:J}),G.each(function(T){m.add(T)}),m.add({x:M,y:Y}));else if(B.looped)for(var m=new $(PJ(v,J,0,2*Math.PI,B.radius,B.radius)),E=new $([1]),Z=0;Z<(m.size()-1)/2;Z++)E.add(3);else m=new $,B.center?(m.add({x:B.c1.x,y:B.c1.y}),m.add({x:v,y:J}),m.add({x:M,y:Y}),m.add({x:B.c2.x,y:B.c2.y})):(m.add({x:v,y:J}),m.add({x:M,y:Y}))}else f&&(m=new $(f.points._as),f.segments&&(E=new $(f.segments._as)));return{points:m,segments:E}}}},CJ=function(T,B,G){if(null==B){if(!(T=kJ(T)))return;B=T.points,G=T.segments}if(B){if("number"==typeof(B=Array.isArray(B)?new $(B):B).get(0)){for(var H=new L.List,f=0;f<B.size();f+=2)H.add({x:B.get(f),y:B.get(f+1)});B=H}if(!G){G=[1];for(var v=B.length-1;0<v;v--)G.push(2)}Array.isArray(G)&&(G=new $(G));for(var J=$0(B._as,G._as,50),M=J.length,Y=[],f=0;f<M;f++){var m=J[f];1<m.length&&Y.push(m)}return Y}},aJ=function(T){for(var B=0,G=T.length-1,H=0;H<G;H++){var f=T[H],v=(J=T[H+1]).x-f.x,J=J.y-f.y;B+=Math.sqrt(v*v+J*J)}return B},TW=function(T,B){for(var G=0,H=B.length,f=0;f<H;f++)if(T<(G+=B[f]))return f;return Math.min(f,H-1)},BW=function(T,B){for(var G=0,H=0,f=T.length-1,v=0;v<f;v++){var J=T[v],M=T[v+1],Y=M.x-J.x,m=M.y-J.y;if(B<(G+=M=Math.sqrt(Y*Y+m*m))){G-=M,H=v;break}}var E=T[H],Z=T[H+1],Z=Math.atan2(Z.y-E.y,Z.x-E.x),R=B-G,m=Math.sin(Z)*R,Y=Math.cos(Z)*R;return{x:E.x+Y,y:E.y+m}},GW=function(T,B){if(T){var G;if(0===B)G=T[0][0];else if(100===B)G=(T=T[T.length-1])[T.length-1];else{for(var H=0,f=[],v=T.length,J=0;J<v;J++){var M=T[J];H+=M=aJ(M),f.push(M)}for(var Y=TW(B=H*B/100,f),m=0,E=0;E<Y;E++)m+=f[E];G=BW(T[Y],B-=m)}return G}},HW=function(T){for(var B,G,H,f,v,J=[],M=-1,Y=0,m=((H=T instanceof ma?(G=(B=kJ(T)).points,B.segments):(G=T,arguments[1]))||G).length;Y<m;Y++){if(3===(f=H?H.get(Y):1))v=2;else if(4===f)v=3;else{if(5===f)continue;v=1}M+=v,J.push(G.get(M))}return J},fW=(S1(vt,{_edgeProtectMethod:{getStraightLinePoints:CJ,calculateLineLength:aJ,calcSegmentIndexByDistance:TW,calculatePointAlongLine:BW,getPercentPosition:GW,getRealPointsFromDataUI:HW}}),function(T,B){for(var G=T.vertices,H=0;H<G.length;H++){var f=G[H],v=f.y;f.y=f.z,f.z=-v,B&&(f.y+=B)}}),vW=function(T){for(var B,G,H,f,v,J,M=[],Y=[],m=[],E=T.faces,Z=0,R=E.length;Z<R;Z++,0){var A=E[Z];1===A.i?(B||(B=[],G=[],H=[]),JW(A,Z,0,0,T,B,H,G)):2===A.i?(f||(f=[],v=[],J=[]),JW(A,Z,0,0,T,f,J,v)):JW(A,Z,0,0,T,M,m,Y)}return{vs:M,uv:Y,ns:m,top_vs:B,top_uv:G,top_ns:H,bottom_vs:f,bottom_uv:v,bottom_ns:J}},JW=function(T,B,G,H,f,v,J,M){var Y,m,E,Z=f.vertices,f=f.faceVertexUvs,R=Z[T.a],A=Z[T.b],Z=Z[T.c];v.push(R.x,R.y,R.z,A.x,A.y,A.z,Z.x,Z.y,Z.z);3===(v=T.vertexNormals).length?(Y=v[0],m=v[1],E=v[2]):Y=m=E=T.normal,J.push(Y.x,Y.y,Y.z,m.x,m.y,m.z,E.x,E.y,E.z),R=f[0][B][0],A=f[0][B][1],Z=f[0][B][2];M.push(R.x,R.y,A.x,A.y,Z.x,Z.y)},MW=(xc=new Zt,wc=new Zt,Oc=new Zt,_c=new Zt,pc=new Zt,qc=new Zt,uc=new Zt,ic=new Zt,Ic=new Zt,Dc=new Zt,hc=new Zt,oc=new Zt,SN.prototype._findVertex=function(T,B,G){return oc.fromArray(T,3*B),G&&oc.applyMatrix4(G),T=[oc.x,oc.y,oc.z].join(","),(B=this._vertexMap[T])||((G=oc.clone())._key=T,this._vertexMap[T]=B=G),B},SN.prototype._findLine=function(T,B){var G=[T,B];return T._key>B._key&&G.reverse(),G._key=[G[0]._key,G[1]._key].join("|"),(T=this._lineMap[G._key])||((this._lineMap[G._key]=T=G)._triangles={},G._planes={},this._lineList.push(G)),T},ec=new Zt(1,0,0),cc=new Zt(0,1,0),tc=new Zt(0,0,1),dc=new Zt,Nc=new Zt,Qc=new G,SN.prototype._addTriangle=function(T,B,G,H,f,v,J,M){var Y,m=this._findVertex(T,G,v),E=this._findVertex(T,H,v),T=this._findVertex(T,f,v),v=this._findLine(m,E),Z=this._findLine(E,T),R=this._findLine(T,m);B?(Y=(new Zt).fromArray(B,3*G),G=(new Zt).fromArray(B,3*H),H=(new Zt).fromArray(B,3*f),J&&(Y.applyMatrix3(J),G.applyMatrix3(J),H.applyMatrix3(J)),Y._key=wN(Y,M),G._key=wN(G,M),H._key=wN(H,M),yN(v,0,Y,E,G,T,H),yN(Z,0,G,T,H,m,Y),yN(R,0,H,m,Y,E,G)):(Nc.subVectors(T,E),dc.subVectors(E,m),(Y=(new Zt).crossVectors(dc,Nc))._key=wN(Y,M),xN(v,T,Y),xN(Z,m,Y),xN(R,E,Y))},SN.prototype._toLineVS=function(T){for(var B=this._lineList,G=0,H=B.length;G<H;++G){var f,v=B[G],J=!1;for(f in v._triangles)if(1==N.keys(v._triangles[f]).length){T.push(v[0].x,v[0].y,v[0].z,v[1].x,v[1].y,v[1].z),J=!0;break}if(!J)for(var M in v._planes)if(1==v._planes[M]._vertices.length){T.push(v[0].x,v[0].y,v[0].z,v[1].x,v[1].y,v[1].z),J=!0;break}}},[function(T,B){var G,H,f,v,J,M,Y,m;if((w=T._ctlineModel)||(T._ctlineModel=w=[]),w[0])return w[0];var E,Z,R,A,g,F,W,s,S,y=m1(T)?T:[T],x=["","top_","bottom_"],w=[],O=[];for(Zx(y,B,O),G=0,H=O.length;G<H;G++)if((Y=O[G])&&(m=Y.mesh))for(eo(m),f=0,v=x.length;f<v;f++)if(M=m[x[f]+"lvs"])for(W=w.length,s=M.length,w.length=W+s,S=0;S<s;++S,++W)w[W]=M[S];else if(J=m[x[f]+"vs"]){for(var _=m[x[f]+"is"],p=Y.matrix,q=_?_.length:J.length/3,u=0;u<q-1;)F=_?(E=_[u],Z=_[u+1],R=_[u+2],A=_[u+3],g=_[u+4],_[u+5]):(Z=(E=u)+1,R=u+2,A=u+3,g=u+4,u+5),xc.fromArray(J,3*E),wc.fromArray(J,3*Z),Oc.fromArray(J,3*R),_c.fromArray(J,3*A),pc.fromArray(J,3*g),qc.fromArray(J,3*F),p&&(xc.applyMatrix4(p),wc.applyMatrix4(p),Oc.applyMatrix4(p),_c.applyMatrix4(p),pc.applyMatrix4(p),qc.applyMatrix4(p)),u+=3*function(T,B,G,H,f){for(var v,J=[B,G,H],M=[f,pc,qc],Y=[],m=J.length,E=!0;m--&&E;){for(var Z=J[m],R=M.length,A=!1;R--;)if(Z.equals(M[R])){M.splice(R,1),Y.push(Z),A=!0;break}if(!A){if(v){E=!1;break}v=Z}}return E&&2===Y.length&&(f=M[0],uc.subVectors(v,Y[0]),Ic.subVectors(f,Y[0]),ic.subVectors(v,Y[1]),uc.x*ic.y*Ic.z+ic.x*Ic.y*uc.z+Ic.x*uc.y*ic.z-Ic.x*ic.y*uc.z-Ic.y*ic.z*uc.x-Ic.z*ic.x*uc.y<1e-6&&(Dc.subVectors(f,Y[1]),hc.subVectors(Y[1],Y[0]),sN(hc,uc)&&sN(hc,Ic)&&(hc.negate(),sN(hc,ic)&&sN(hc,Dc))))?(T.push(Y[1].x,Y[1].y,Y[1].z),T.push(v.x,v.y,v.z),T.push(v.x,v.y,v.z),T.push(Y[0].x,Y[0].y,Y[0].z),T.push(Y[0].x,Y[0].y,Y[0].z),T.push(f.x,f.y,f.z),T.push(f.x,f.y,f.z),T.push(Y[1].x,Y[1].y,Y[1].z),2):(T.push(B.x,B.y,B.z),T.push(G.x,G.y,G.z),T.push(G.x,G.y,G.z),T.push(H.x,H.y,H.z),T.push(H.x,H.y,H.z),T.push(B.x,B.y,B.z),1)}(w,xc,wc,Oc,_c);u<q&&(R=_?(E=_[u],Z=_[u+1],_[u+2]):(Z=(E=u)+1,u+2),xc.fromArray(J,3*E),wc.fromArray(J,3*Z),Oc.fromArray(J,3*R),p&&(xc.applyMatrix4(p),wc.applyMatrix4(p),Oc.applyMatrix4(p)),w.push(xc.x,xc.y,xc.z),w.push(wc.x,wc.y,wc.z),w.push(wc.x,wc.y,wc.z),w.push(Oc.x,Oc.y,Oc.z),w.push(Oc.x,Oc.y,Oc.z),w.push(xc.x,xc.y,xc.z))}return T._ctlineModel[0]=w},function(T,B,G){var H,f,v,J,M,Y,m,E=T._ctlineModel;if(E||(T._ctlineModel=E=[]),(E=E[1])&&E.epsilon===G)return E;(E=[]).epsilon=G;var Z,R,A,g=m1(T)?T:[T],F=["","top_","bottom_"],W=new SN,s=[];for(Zx(g,B,s),H=0,f=s.length;H<f;H++)if((Y=s[H])&&(m=Y.mesh))for(eo(m),v=0,J=F.length;v<J;v++)if(M=m[F[v]+"vs"])for(var S=m[F[v]+"is"],y=Y.matrix,x=S?S.length:M.length/3,w=0,w=0;w<x;w+=3)A=S?(Z=S[w],R=S[w+1],S[w+2]):(R=(Z=w)+1,w+2),W._addTriangle(M,Ht,Z,R,A,y,Ht,G);return W._toLineVS(E),T._ctlineModel[1]=E},function(T,B,G){var H,f,v,J,M,Y,m,E=T._ctlineModel;if(E||(T._ctlineModel=E=[]),(E=E[2])&&E.epsilon===G)return E;(E=[]).epsilon=G;var Z,R,A,g=m1(T)?T:[T],F=["","top_","bottom_"],W=new SN,s=[];for(Zx(g,B,s),H=0,f=s.length;H<f;H++)if((Y=s[H])&&(m=Y.mesh))for(eo(m),v=0,J=F.length;v<J;v++)if(M=m[F[v]+"vs"])for(var S,y=(S=Y.matrix)?Qc.getNormalMatrix(S):null,x=m[F[v]+"is"],w=m[F[v]+"ns"],O=x?x.length:M.length/3,_=0,_=0;_<O;_+=3)A=x?(Z=x[_],R=x[_+1],x[_+2]):(R=(Z=_)+1,_+2),W._addTriangle(M,w,Z,R,A,S,y,G);return W._toLineVS(E),T._ctlineModel[2]=E}]),YW=function(T,B,G,H,f,v,J,M,Y,m){G==ft&&(G=!0),H==ft&&(H=!0),J==ft&&(J=1),M==ft&&(M=0);var E=new wW,Z=(n0(E,T,B,Y),E=E.toShapes(),Ht);return m&&(m.length?Z={minX:m[0],minY:-m[3],maxX:m[2],maxY:-m[1]}:(Z={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},E.forEach(function(T){T=T.getBoundingBox(),Z.minX=Jt(T.minX,Z.minX),Z.minY=Jt(T.minY,Z.minY),Z.maxX=Gt(T.maxX,Z.maxX),Z.maxY=Gt(T.maxY,Z.maxY)}))),vW(new tW(E,{top:G,bottom:H,curveSegments:f,amount:J,repeatUVLength:v,boundingBox:Z},-J/2+M))},mW=function(T,B){this.repeatUVLength=T,this._bb=B},EW=(mW.prototype={generateTopUV:function(T,B,G,H,f,v,J){var M,Y,m,E=(T=T.vertices)[H].x,H=T[H].y,Z=T[f].x,f=T[f].y,R=T[v].x,T=T[v].y;return B=(v=this.repeatUVLength)?(Y=M=0,m=v):(this._bb||(this._bb=B.getBoundingBox()),M=(v=this._bb).minX,Y=v.minY,m=v.maxX-M,v.maxY-Y),J?[new b((E-M)/m,(H-Y)/B),new b((Z-M)/m,(f-Y)/B),new b((R-M)/m,(T-Y)/B)]:[new b((E-M)/m,1-(H-Y)/B),new b((Z-M)/m,1-(f-Y)/B),new b((R-M)/m,1-(T-Y)/B)]},generateBottomUV:function(T,B,G,H,f,v){return this.generateTopUV(T,B,G,H,f,v,!0)},generateSideWallUV:function(T,B,G,H,f,v,J,M,Y,m,E,Z){if(!this._cl){for(var R=[],A=0,g=G.length,F=0;F<g;F++){var W=G[F],s=G[(F+1)%g],S=W.x-s.x,W=W.y-s.y,s=ut(S*S+W*W);R.push(A),A+=s}for(F=0;F<g;F++)R[F]/=A;this._cl=R}var y=1-Y/m,Y=1-(Y+1)/m;return(m=(R=this._cl)[E])<(E=R[Z])&&(m+=1),[new b(m,y),new b(E,y),new b(E,Y),new b(m,Y)]}},function(T,B,G,H,f,v){this.a=T,this.b=B,this.c=G,this.i=v,this.normal=H instanceof Zt?H:new Zt,this.vertexNormals=H instanceof Array?H:[]}),ZW=(EW.prototype={constructor:EW},[-8,14,1,12,2,9,5,6,-1]),RW=function(){if(RW.eye!=ft)return RW.eye;for(var T=l0.eye,B=ZW,G=WJ.prototype.getClassName(),H="",f=!1,G=+new Q[G.substr(3,3)+nB[0]],v=0;v<B.length;v++){var J=B.length-v;H+=v%2==0?B[v]+J+"":B[v]-J+""}for(v=0;v<4;v++)H+=0;if((H=H*H.length/H.length)<G){if(T&&T[0]&&T[4/j.length]){for(var M,Y,m,E,Z,R,A,g,F=T[0],W=T[1],s="",S=0,v=0;v<W.length;v++)'"'===W[v]?g?(g=!1,S%2!=0&&(M==ft?M=s:Y==ft?Y=s:m==ft?m=s:E==ft?E=s:Z==ft?Z=s:R==ft?R=s:A==ft&&(A=s)),S++,s=""):g=!0:g&&(s+=W[v]);for(var y,x,w,O="",_=0,v=0;v<F.length;v++)'"'===F[v]?y?(y=!1,_%2!=0&&(x==ft?x=O:w==ft&&(w=O)),_++,O=""):y=!0:y&&(O+=F[v]);var T=M+Y+m+E+Z+R,p=!R||R===vw||!vw&&R===dw.toString()[0];if(!p&&R)for(var q,v=0,u=R.length;v<u;v++)R[v]===gB[4]?q===vw?p=vB:q[0]===ae[7]&&vw&&0<=vw.indexOf(q.substr(1))?p=MB:q=ft:(q==ft?q=R[v]:q+=R[v],v===u-1&&(q===vw?p=vB:q[0]===ae[7]&&vw&&0<=vw.indexOf(q.substr(1))&&(p=MB)));(f=yt(T,A)&&yt(x,w)&&x===M&&p&&(!Z||G<Z))&&0<=m.indexOf(Xw[0])&&(RW[Xw[0]]=1),f&&0<=m.indexOf(1)&&(RW[1]=1),f&&0<=m.indexOf(3)&&(RW[2]=1),f&&0<=m.indexOf(4)&&(RW[3]=1),f&&0<=m.indexOf(7)&&(RW[4]=1),f&&0<=m.indexOf(qB[1])&&(RW[qB[1]]=1),f&&0<=m.indexOf(ee[0])&&(RW[ee[0]]=1)}}else f=!0,RW[Xw[0]]=RW[1]=RW[2]=RW[3]=RW[4]=RW[qB[1]]=RW[ee[0]]=1;return RW.eye=f},AW=function(){},gW=AW.prototype,FW=(gW.getPointAt=function(T){return T=this.getUtoTmapping(T),this.getPoint(T)},gW.getPoints=function(T){T=T||5;for(var B=[],G=0;G<=T;G++)B.push(this.getPoint(G/T));return B},gW.getSpacedPoints=function(T){T=T||5;for(var B=[],G=0;G<=T;G++)B.push(this.getPointAt(G/T));return B},gW.getLength=function(){var T=this.getLengths();return T[T.length-1]},gW.getLengths=function(T){if(T=T||this.__arcLengthDivisions||200,this.cacheArcLengths&&this.cacheArcLengths.length==T+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var B,G,H=[],f=this.getPoint(0),v=0;for(H.push(0),G=1;G<=T;G++)v+=(B=this.getPoint(G/T)).distanceTo(f),H.push(v),f=B;return this.cacheArcLengths=H},gW.getUtoTmapping=function(T,B){for(var G,H=this.getLengths(),f=0,v=H.length,J=B||T*H[v-1],M=0,Y=v-1;M<=Y;)if((G=H[f=pt(M+(Y-M)/2)]-J)<0)M=f+1;else{if(!(0<G)){Y=f;break}Y=f-1}return H[f=Y]==J?f/(v-1):(f+(J-(B=H[f]))/(H[f+1]-B))/(v-1)},gW.getTangent=function(T){var B=T-1e-4,B=(1<(T=T+1e-4)&&(T=1),this.getPoint(B=B<0?0:B));return this.getPoint(T).clone().sub(B).normalize()},gW.getTangentAt=function(T){return T=this.getUtoTmapping(T),this.getTangent(T)},AW.create=function(T,B){return T.prototype=Q1(AW.prototype),T.prototype.getPoint=B,T},function(){this.curves=[],this.autoClose=!1}),WW=((G=FW.prototype=Q1(gW)).add=function(T){this.curves.push(T)},G.closePath=function(){var T=this.curves[0].getPoint(0),B=this.curves[this.curves.length-1].getPoint(1);T.equals(B)||this.curves.push(new uW(B,T))},G.getPoint=function(T){for(var B,G,H=T*this.getLength(),f=this.getCurveLengths(),v=0;v<f.length;){if(f[v]>=H)return G=1-(f[v]-H)/(B=this.curves[v]).getLength(),B.getPointAt(G);v++}return null},G.getLength=function(){var T=this.getCurveLengths();return T[T.length-1]},G.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;for(var T=[],B=0,G=this.curves.length,H=0;H<G;H++)B+=this.curves[H].getLength(),T.push(B);return this.cacheLengths=T},G.getTransformedPoints=function(T){return this.getPoints(T)},G.getBoundingBox=function(){for(var T,B,G,H,f,v=this.getPoints(),J=T=Number.NEGATIVE_INFINITY,M=G=Number.POSITIVE_INFINITY,Y=v[0]instanceof Zt,m=new(Y?Zt:b),E=0,Z=v.length;E<Z;E++)(f=v[E]).x>J&&(J=f.x),f.x<M&&(M=f.x),f.y>T&&(T=f.y),f.y<G&&(G=f.y),Y&&(f.z>B&&(B=f.z),f.z<H&&(H=f.z)),m.add(f);var R={minX:M,minY:G,maxX:J,maxY:T};return Y&&(R.maxZ=B,R.minZ=H),R},function(T){FW.call(this),this.actions=[],T&&this.fromPoints(T)}),G=WW.prototype=Q1(FW.prototype),sW="moveTo",SW="quadraticCurveTo",yW="bezierCurveTo",xW="ellipse",wW=(G.fromPoints=function(T){this.moveTo(T[0].x,T[0].y);for(var B=1,G=T.length;B<G;B++)this.lineTo(T[B].x,T[B].y)},G.moveTo=function(T,B){var G=Array.prototype.slice.call(arguments);this.actions.push({action:sW,args:G})},G.lineTo=function(T,B){var G=Array.prototype.slice.call(arguments),H=(f=this.actions[this.actions.length-1].args)[f.length-2],f=f[f.length-1],H=new uW(new b(H,f),new b(T,B));this.curves.push(H),this.actions.push({action:"lineTo",args:G})},G.quadraticCurveTo=function(T,B,G,H){var f=Array.prototype.slice.call(arguments),v=(J=this.actions[this.actions.length-1].args)[J.length-2],J=J[J.length-1],v=new iW(new b(v,J),new b(T,B),new b(G,H));this.curves.push(v),this.actions.push({action:SW,args:f})},G.bezierCurveTo=function(T,B,G,H,f,v){var J=Array.prototype.slice.call(arguments),M=(Y=this.actions[this.actions.length-1].args)[Y.length-2],Y=Y[Y.length-1],M=new IW(new b(M,Y),new b(T,B),new b(G,H),new b(f,v));this.curves.push(M),this.actions.push({action:yW,args:J})},G.arc=function(T,B,G,H,f,v){var J=(M=this.actions[this.actions.length-1].args)[M.length-2],M=M[M.length-1];this.absarc(T+J,B+M,G,H,f,v)},G.absarc=function(T,B,G,H,f,v){this.absellipse(T,B,G,G,H,f,v)},G.ellipse=function(T,B,G,H,f,v,J){var M=(Y=this.actions[this.actions.length-1].args)[Y.length-2],Y=Y[Y.length-1];this.absellipse(T+M,B+Y,G,H,f,v,J)},G.absellipse=function(T,B,G,H,f,v,J){var M=Array.prototype.slice.call(arguments),T=new qW(T,B,G,H,f,v,J),B=(this.curves.push(T),T.getPoint(1));M.push(B.x),M.push(B.y),this.actions.push({action:xW,args:M})},G.getSpacedPoints=function(T,B){T=T||40;for(var G=[],H=0;H<T;H++)G.push(this.getPoint(H/T));return G},G.getPoints=function(T,B){T=T||12;for(var G,H,f,v,J,M,Y,m,E,Z,R,A,g,F,W,s,S,y=[],x=0,w=this.actions.length;x<w;x++)switch(H=(G=this.actions[x]).action,f=G.args,H){case sW:case"lineTo":y.push(new b(f[0],f[1]));break;case SW:for(v=f[2],J=f[3],m=f[0],E=f[1],R=0<y.length?(Z=(A=y[y.length-1]).x,A.y):(Z=(A=this.actions[x-1].args)[A.length-2],A[A.length-1]),h=1;h<=T;h++)F=OW.b2(g=h/T,Z,m,v),W=OW.b2(g,R,E,J),y.push(new b(F,W));break;case yW:for(v=f[4],J=f[5],m=f[0],E=f[1],M=f[2],Y=f[3],R=0<y.length?(Z=(A=y[y.length-1]).x,A.y):(Z=(A=this.actions[x-1].args)[A.length-2],A[A.length-1]),h=1;h<=T;h++)F=OW.b3(g=h/T,Z,m,M,v),W=OW.b3(g,R,E,Y,J),y.push(new b(F,W));break;case"arc":for(var O=f[0],_=f[1],p=f[2],q=f[3],u=f[4],i=!!f[5],I=u-q,D=2*T,h=1;h<=D;h++)g=h/D,F=O+p*Mt(o=q+(g=i?g:1-g)*I),W=_+p*Yt(o),y.push(new b(F,W));break;case xW:for(var o,O=f[0],_=f[1],e=f[2],N=f[3],q=f[4],u=f[5],i=!!f[6],I=u-q,D=2*T,h=1;h<=D;h++)g=h/D,F=O+e*Mt(o=q+(g=i?g:1-g)*I),W=_+N*Yt(o),y.push(new b(F,W))}var c=Ft["shape3d.point.epsilon"],t=!1,w=y.length;for(x=0,w=y.length;x<w;x++)s=y[x],S=x===w-1?y[0]:y[x+1],s&&S&&it(s.x-S.x)<c&&it(s.y-S.y)<c&&(t=!0,y[x]=null);if(t){for(var d=[],x=0;x<w;x++)y[x]&&d.push(y[x]);y=d}return B&&y.push(y[0]),y},G.toShapes=function(T,B){function G(T){for(var B=[],G=0,H=T.length;G<H;G++){var f=T[G],v=new wW;v.actions=f.actions,v.curves=f.curves,B.push(v)}return B}var H=function(T){for(var B,G,H=[],f=new WW,v=0,J=T.length;v<J;v++)G=(B=T[v]).args,(B=B.action)==sW&&0!=f.actions.length&&(H.push(f),f=new WW),f[B].apply(f,G);return 0!=f.actions.length&&H.push(f),H}(this.actions);if(0==H.length)return[];if(!0===B)return G(H);var f,v,J,M=[];if(1==H.length)return v=H[0],(J=new wW).actions=v.actions,J.curves=v.curves,M.push(J),M;var Y,m,E,Z,R,A,g=!OW.isClockWise(H[0].getPoints()),g=T?!g:g,F=[],W=[],s=[],S=0;for(W[S]=Ht,s[S]=[],m=0,E=H.length;m<E;m++)Y=(v=H[m]).getPoints(),f=OW.isClockWise(Y),(f=T?!f:f)?(!g&&W[S]&&S++,W[S]={s:new wW,p:Y},W[S].s.actions=v.actions,W[S].s.curves=v.curves,g&&S++,s[S]=[]):s[S].push({h:v,p:Y[0]});if(!W[0])return G(H);if(1<W.length){for(var y=!1,x=[],w=0,O=W.length;w<O;w++)F[w]=[];for(w=0,O=W.length;w<O;w++){W[w];for(var _=s[w],p=0;p<_.length;p++){for(var q=_[p],u=!0,i=0;i<W.length;i++)!function(T,B){for(var G=B.length,H=!1,f=G-1,v=0;v<G;f=v++){var J=B[f],M=B[v],Y=M.x-J.x,m=M.y-J.y;if(1e-10<it(m)){if(m<0&&(J=B[v],Y=-Y,M=B[f],m=-m),!(T.y<J.y||T.y>M.y))if(T.y==J.y){if(T.x==J.x)return 1}else{if(0==(m=m*(T.x-J.x)-Y*(T.y-J.y)))return 1;m<0||(H=!H)}}else if(T.y==J.y&&(M.x<=T.x&&T.x<=J.x||J.x<=T.x&&T.x<=M.x))return 1}return H}(q.p,W[i].p)||(w!=i&&x.push({froms:w,tos:i,hole:p}),u?(u=!1,F[i].push(q)):y=!0);u&&F[w].push(q)}}0<x.length&&(y||(s=F))}for(m=0,E=W.length;m<E;m++)for(J=W[m].s,M.push(J),R=0,A=(Z=s[m]).length;R<A;R++)J.holes.push(Z[R].h);return M},function(){WW.apply(this,arguments),this.holes=[]}),OW=((G=wW.prototype=Q1(G)).getPointsHoles=function(T){for(var B=this.holes.length,G=[],H=0;H<B;H++)G[H]=this.holes[H].getTransformedPoints(T);return G},G.extractAllPoints=function(T){return{shape:this.getTransformedPoints(T),holes:this.getPointsHoles(T)}},G.extractPoints=function(T){return this.extractAllPoints(T)},{triangulateShape:function(w,T){function O(T,B,G){return T.x!=B.x?T.x<B.x?T.x<=G.x&&G.x<=B.x:B.x<=G.x&&G.x<=T.x:T.y<B.y?T.y<=G.y&&G.y<=B.y:B.y<=G.y&&G.y<=T.y}function _(T,B,G,H,f){var v=B.x-T.x,J=B.y-T.y,M=H.x-G.x,Y=H.y-G.y,m=T.x-G.x,E=T.y-G.y,Z=J*M-v*Y,R=J*m-v*E;if(1e-10<it(Z)){if(0<Z){if(R<0||Z<R)return[];if((A=Y*m-M*E)<0||Z<A)return[]}else{if(0<R||R<Z)return[];if(0<(A=Y*m-M*E)||A<Z)return[]}if(0==A)return!f||0!=R&&R!=Z?[T]:[];if(A==Z)return!f||0!=R&&R!=Z?[B]:[];if(0==R)return[G];if(R==Z)return[H];var A=A/Z;return[{x:T.x+A*v,y:T.y+A*J}]}if(0!=R||Y*m!=M*E)return[];var g,F,W,s,S,y,x,A=0==M&&0==Y;return(Z=0==v&&0==J)&&A?T.x!=G.x||T.y!=G.y?[]:[T]:Z?O(G,H,T)?[T]:[]:A?O(T,B,G)?[G]:[]:(R=0!=v?(s=T.x<B.x?(W=(g=T).x,(F=B).x):(W=(g=B).x,(F=T).x),G.x<H.x?(x=(S=G).x,(y=H).x):(x=(S=H).x,(y=G).x)):(s=T.y<B.y?(W=(g=T).y,(F=B).y):(W=(g=B).y,(F=T).y),G.y<H.y?(x=(S=G).y,(y=H).y):(x=(S=H).y,(y=G).y)),W<=x?s<x?[]:s==x?f?[]:[S]:s<=R?[S,F]:[S,y]:R<W?[]:W==R?f?[]:[g]:s<=R?[g,F]:[g,y])}function p(T,B,G,H){var f=B.x-T.x,B=B.y-T.y,v=G.x-T.x,G=G.y-T.y,J=H.x-T.x,H=H.y-T.y,T=f*G-B*v,f=f*H-B*J;return 1e-10<it(T)?(B=J*G-H*v,0<T?0<=f&&0<=B:0<=f||0<=B):0<f}for(var B,G,H,f,v={},J=w.concat(),M=0,Y=T.length;M<Y;M++)Array.prototype.push.apply(J,T[M]);for(E=0,Z=J.length;E<Z;E++)v[H=J[E].x+":"+J[E].y],v[H]=E;for(var w=function(J){for(var T,B,G,H,f=w.concat(),M=[],v=[],Y=0,m=J.length;Y<m;Y++)M.push(Y);for(var E,Z,R,A,g,F=0,W=2*M.length;0<M.length&&!(--W<0);)for(T=F;T<f.length;T++){for(var s=f[T],S=-1,Y=0;Y<M.length;Y++)if(B=M[Y],v[G=s.x+":"+s.y+":"+B]===Ht){for(var y=J[B],x=0;x<y.length;x++)if(H=y[x],E=T,Z=x,g=A=R=void 0,R=f.length-1,A=E-1,g=E+1,p(f[E],f[A=A<0?R:A],f[g=R<g?0:g],y[Z])&&(A=y.length-1,!!p(y[Z],y[R=(R=Z-1)<0?A:R],y[g=A<(g=Z+1)?0:g],f[E]))&&!function(T,B){for(var G,H=0;H<f.length;H++)if(G=H+1,G%=f.length,0<_(T,B,f[H],f[G],!0).length)return 1}(s,H)&&!function(T,B){for(var G,H,f,v=0;v<M.length;v++)for(G=J[M[v]],H=0;H<G.length;H++)if(f=H+1,f%=G.length,0<_(T,B,G[H],G[f],!0).length)return 1}(s,H)){S=x,M.splice(Y,1),H=f.slice(0,T+1),R=f.slice(T),A=y.slice(S),Z=y.slice(0,S+1),f=H.concat(A).concat(Z).concat(R),F=T;break}if(0<=S)break;v[G]=!0}if(0<=S)break}return f}(T),m=_W.Triangulate(w,!1),E=0,Z=m.length;E<Z;E++)for(G=m[E],B=0;B<3;B++)(f=v[H=G[B].x+":"+G[B].y])!==Ht&&(G[B]=f);return m.concat()},isClockWise:function(T){return _W.Triangulate.area(T)<0},b2p0:function(T,B){return(T=1-T)*T*B},b2p1:function(T,B){return 2*(1-T)*T*B},b2p2:function(T,B){return T*T*B},b2:function(T,B,G,H){return this.b2p0(T,B)+this.b2p1(T,G)+this.b2p2(T,H)},b3p0:function(T,B){return(T=1-T)*T*T*B},b3p1:function(T,B){var G=1-T;return 3*G*G*T*B},b3p2:function(T,B){return 3*(1-T)*T*T*B},b3p3:function(T,B){return T*T*T*B},b3:function(T,B,G,H,f){return this.b3p0(T,B)+this.b3p1(T,G)+this.b3p2(T,H)+this.b3p3(T,f)}}),_W={faces:{},face:"",weight:"normal",style:"normal",size:150,divisions:10,getDefaultFont:function(){var T=N.keys(this.faces);return T.length?T[0]:null},getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(T){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(T){var B=T.familyName.toLowerCase();return this.faces[B]=this.faces[B]||{},this.faces[B][T.cssFontWeight]=this.faces[B][T.cssFontWeight]||{},this.faces[B][T.cssFontWeight][T.cssFontStyle]=T},drawText:function(T){for(var B=this.getFace(),G=this.size/B.resolution,H=0,f=String(T).split(""),v=f.length,J=[],M=0;M<v;M++){var Y=new WW;(Y=this.extractGlyphPoints(f[M],B,G,H,Y))&&(H+=Y.offset*this.spacing,J.push(Y.path))}return{paths:J,offset:H/2}},extractGlyphPoints:function(T,B,G,H,f){var v,J,M,Y,m,E,Z,R,A,g,F,W,s,S,y,x,w,O,_=[];if(T=B.glyphs[T]||B.glyphs["?"]){if(T.o)for(m=(Y=T._cachedOutline||(T._cachedOutline=T.o.split(" "))).length,Z=E=G,v=0;v<m;)switch(Y[v++]){case"m":R=Y[v++]*E+H,A=Y[v++]*Z,f.moveTo(R,A);break;case"l":R=Y[v++]*E+H,A=Y[v++]*Z,f.lineTo(R,A);break;case"q":if(g=Y[v++]*E+H,F=Y[v++]*Z,S=Y[v++]*E+H,y=Y[v++]*Z,f.quadraticCurveTo(S,y,g,F),O=_[_.length-1])for(W=O.x,s=O.y,J=1,M=this.divisions;J<=M;J++){var p=J/M;OW.b2(p,W,S,g),OW.b2(p,s,y,F)}break;case"b":if(g=Y[v++]*E+H,F=Y[v++]*Z,S=Y[v++]*E+H,y=Y[v++]*Z,x=Y[v++]*E+H,w=Y[v++]*Z,f.bezierCurveTo(S,y,x,w,g,F),O=_[_.length-1])for(W=O.x,s=O.y,J=1,M=this.divisions;J<=M;J++)OW.b3(p=J/M,W,S,x,g),OW.b3(p,s,y,w,F)}return{offset:T.ha*G,path:f}}},generateShapes:function(T,B){var G=(B=B||{}).font;if(G===Ht&&!(G=_W.getDefaultFont()))return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),[];var H=B.size!==Ht?B.size:1,f=B.curveSegments!==Ht?B.curveSegments:4,v=B.spacing!==Ht?B.spacing:1,J=B.weight!==Ht?B.weight:"normal",B=B.style!==Ht?B.style:"normal";_W.size=H,_W.divisions=f,_W.face=G,_W.weight=J,_W.style=B,_W.spacing=v;for(var M=_W.drawText(T).paths,Y=[],m=0,E=M.length;m<E;m++)Array.prototype.push.apply(Y,M[m].toShapes());return Y}},pW=(Lc=1e-10,(G=_W).Triangulate=function(T,B){var G=T.length;if(G<3)return null;var H,f,v=[],J=[],M=[];if(0<ON(T))for(E=0;E<G;E++)J[E]=E;else for(E=0;E<G;E++)J[E]=G-1-E;for(var Y=G,m=2*Y,E=Y-1;2<Y;){if(m--<=0)return B?M:v;if(function(T,B,G,H,f,v){var J,M,Y,m,E,Z,R,A,g,F=T[v[B]].x,W=T[v[B]].y,s=T[v[G]].x,S=T[v[G]].y,y=T[v[H]].x,x=T[v[H]].y;if(!((s-F)*(x-W)-(S-W)*(y-F)<Lc)){for(m=y-s,E=x-S,Z=F-y,R=W-x,A=s-F,g=S-W,J=0;J<f;J++)if(M=T[v[J]].x,Y=T[v[J]].y,!(M===F&&Y===W||M===s&&Y===S||M===y&&Y===x)&&-Lc<=m*(Y-S)-E*(M-s)&&-Lc<=Z*(Y-x)-R*(M-y)&&-Lc<=A*(Y-W)-g*(M-F))return;return 1}}(T,H=Y<=(H=E)?0:H,E=Y<=(E=H+1)?0:E,f=Y<=(f=E+1)?0:f,Y,J)){var Z,R,A=J[H],g=J[E],F=J[f];for(v.push([T[A],T[g],T[F]]),M.push([J[H],J[E],J[f]]),R=(Z=E)+1;R<Y;Z++,R++)J[Z]=J[R];m=2*--Y}}return B?M:v},G.Triangulate.area=ON,Q._typeface_js={faces:_W.faces,loadFace:_W.loadFace},function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]}),G=pW.prototype={constructor:pW,computeFaceNormals:function(){for(var T=new Zt,B=new Zt,G=0,H=this.faces.length;G<H;G++){var f=this.faces[G],v=this.vertices[f.a],J=this.vertices[f.b],M=this.vertices[f.c];T.subVectors(M,J),B.subVectors(v,J),T.cross(B),T.normalize(),f.normal.copy(T)}},computeVertexNormals:function(T){for(var B,G=new Array(this.vertices.length),H=0,f=this.vertices.length;H<f;H++)G[H]=new Zt;if(T)for(var v,J,M,Y=new Zt,m=new Zt,E=0,Z=this.faces.length;E<Z;E++)B=this.faces[E],v=this.vertices[B.a],J=this.vertices[B.b],M=this.vertices[B.c],Y.subVectors(M,J),m.subVectors(v,J),Y.cross(m),G[B.a].add(Y),G[B.b].add(Y),G[B.c].add(Y);else for(E=0,Z=this.faces.length;E<Z;E++)G[(B=this.faces[E]).a].add(B.normal),G[B.b].add(B.normal),G[B.c].add(B.normal);for(H=0,f=this.vertices.length;H<f;H++)G[H].normalize();for(E=0,Z=this.faces.length;E<Z;E++)(B=this.faces[E]).vertexNormals[0]=G[B.a].clone(),B.vertexNormals[1]=G[B.b].clone(),B.vertexNormals[2]=G[B.c].clone()},mergeVertices:function(){for(var T,B,G,H,f={},v=[],J=[],M=Dt(10,4),Y=0,m=this.vertices.length;Y<m;Y++)T=this.vertices[Y],f[T=_t(T.x*M)+"_"+_t(T.y*M)+"_"+_t(T.z*M)]===Ht?(f[T]=Y,v.push(this.vertices[Y]),J[Y]=v.length-1):J[Y]=J[f[T]];for(var E=[],Y=0,m=this.faces.length;Y<m;Y++){(B=this.faces[Y]).a=J[B.a],B.b=J[B.b],B.c=J[B.c];for(var Z=[B.a,B.b,B.c],R=0;R<3;R++)if(Z[R]==Z[(R+1)%3]){E.push(Y);break}}for(Y=E.length-1;0<=Y;Y--){var A=E[Y];for(this.faces.splice(A,1),G=0,H=this.faceVertexUvs.length;G<H;G++)this.faceVertexUvs[G].splice(A,1)}var g=this.vertices.length-v.length;return this.vertices=v,g}},qW=function(T,B,G,H,f,v,J){this.aX=T,this.aY=B,this.xRadius=G,this.yRadius=H,this.aStartAngle=f,this.aEndAngle=v,this.aClockwise=J},uW=(qW.prototype=Q1(gW),qW.prototype.getPoint=function(T){(B=this.aEndAngle-this.aStartAngle)<0&&(B+=mt),mt<B&&(B-=mt),T=!0===this.aClockwise?this.aEndAngle+(1-T)*(mt-B):this.aStartAngle+T*B;var B=this.aX+this.xRadius*Mt(T),T=this.aY+this.yRadius*Yt(T);return new b(B,T)},function(T,B){this.v1=T,this.v2=B}),iW=((v=uW.prototype=Q1(gW)).getPoint=function(T){var B=this.v2.clone().sub(this.v1);return B.multiplyScalar(T).add(this.v1),B},v.getPointAt=function(T){return this.getPoint(T)},v.getTangent=function(T){return this.v2.clone().sub(this.v1).normalize()},function(T,B,G){this.v0=T,this.v1=B,this.v2=G}),IW=(iW.prototype=Q1(gW),iW.prototype.getPoint=function(T){var B=OW.b2(T,this.v0.x,this.v1.x,this.v2.x),T=OW.b2(T,this.v0.y,this.v1.y,this.v2.y);return new b(B,T)},function(T,B,G,H){this.v0=T,this.v1=B,this.v2=G,this.v3=H}),DW=(IW.prototype=Q1(gW),IW.prototype.getPoint=function(T){var B=OW.b3(T,this.v0.x,this.v1.x,this.v2.x,this.v3.x),T=OW.b3(T,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new b(B,T)},AW.create(function(T,B){this.v1=T,this.v2=B},function(T){var B=new Zt;return B.subVectors(this.v2,this.v1),B.multiplyScalar(T),B.add(this.v1),B}),AW.create(function(T,B,G){this.v0=T,this.v1=B,this.v2=G},function(T){var B=OW.b2(T,this.v0.x,this.v1.x,this.v2.x),G=OW.b2(T,this.v0.y,this.v1.y,this.v2.y),T=OW.b2(T,this.v0.z,this.v1.z,this.v2.z);return new Zt(B,G,T)})),hW=AW.create(function(T,B,G,H){this.v0=T,this.v1=B,this.v2=G,this.v3=H},function(T){var B=OW.b3(T,this.v0.x,this.v1.x,this.v2.x,this.v3.x),G=OW.b3(T,this.v0.y,this.v1.y,this.v2.y,this.v3.y),T=OW.b3(T,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return new Zt(B,G,T)}),oW=function(T,N,Q,B,G,H,f,v){pW.call(this),B=B!==Ht?B:.5,G=G!==Ht?G:.5,T=T||8,H=H||0,f=f||mt;for(var J=(v=v!==Ht?v:1)/2,M=[],Y=[],m=this.vertices,E=this.faces,Z=this.faceVertexUvs,R=0;R<=1;R++){for(var A=[],g=[],F=+R,W=F*(G-B)+B,s=0;s<=T;s++){var S=s/T,y=new Zt,x=-(S*f+H);y.z=W*Yt(x),y.y=-F*v+J,y.x=W*Mt(x),m.push(y),A.push(m.length-1),g.push(new b(S,F))}M.push(A),Y.push(g)}for(var w,O,_=(G-B)/v,s=0;s<T;s++)for(O=0!==B?(w=m[M[0][s]].clone(),m[M[0][s+1]].clone()):(w=m[M[1][s]].clone(),m[M[1][s+1]].clone()),w.setY(ut(w.x*w.x+w.z*w.z)*_).normalize(),O.setY(ut(O.x*O.x+O.z*O.z)*_).normalize(),R=0;R<1;R++){var p=M[R][s],q=M[R+1][s],u=M[R+1][s+1],i=M[R][s+1],I=w.clone(),D=w.clone(),h=O.clone(),o=O.clone(),e=Y[R][s].clone(),c=Y[R+1][s].clone(),L=Y[R+1][s+1].clone(),j=Y[R][s+1].clone();E.push(new EW(p,q,i,[I,D,o])),Z[0].push([e,c,j]),E.push(new EW(q,u,i,[D.clone(),h,o.clone()])),Z[0].push([c.clone(),L,j.clone()])}if(N&&0<B)for(this.vertices.push(new Zt(0,J,0)),s=0;s<T;s++){p=M[0][s],q=M[0][s+1],u=this.vertices.length-1,I=new Zt(0,1,0),D=new Zt(0,1,0),h=new Zt(0,1,0),e=Y[0][s].clone(),c=Y[0][s+1].clone(),L=new b(c.x,0),E.push(new EW(p,q,u,[I,D,h],0,1));var r=Mt(t=s/T*mt),X=Yt(t),U=Mt(d=(s+1)/T*mt),l=Yt(d);Z[0].push([new b(.5+.5*r,.5+.5*X),new b(.5+.5*U,.5+.5*l),new b(.5,.5)])}if(Q&&0<G)for(this.vertices.push(new Zt(0,-J,0)),s=0;s<T;s++){p=M[R][s+1],q=M[R][s],u=m.length-1,I=new Zt(0,-1,0),D=new Zt(0,-1,0),h=new Zt(0,-1,0),e=Y[R][s+1].clone(),c=Y[R][s].clone(),E.push(new EW(p,q,u,[I,D,h],0,2));var t,d,r=Mt(t=s/T*mt),X=Yt(t),U=Mt(d=(s+1)/T*mt),l=Yt(d);Z[0].push([new b(.5+.5*U,.5-.5*l),new b(.5+.5*r,.5-.5*X),new b(.5,.5)])}},eW=(oW.prototype=Q1(G),function(T,B,G,H,f,v,J){pW.call(this),J=J||.5,T=T||16,B=B||16,G=(G!==Ht?G:0)-o,H=H!==Ht?H:mt,f=f!==Ht?f:0,v=v!==Ht?v:o;for(var M=[],Y=[],m=this.vertices,E=this.faces,Z=this.faceVertexUvs,R=0;R<=B;R++){for(var A=[],g=[],F=0;F<=T;F++){var W=F/T,s=R/B,S=new Zt;S.x=-J*Mt(G+W*H)*Yt(f+s*v),S.y=J*Mt(f+s*v),S.z=J*Yt(G+W*H)*Yt(f+s*v),m.push(S),A.push(m.length-1),g.push(new b(W,s))}M.push(A),Y.push(g)}for(R=0;R<B;R++)for(F=0;F<T;F++){var y=M[R][F+1],x=M[R][F],w=M[R+1][F],O=M[R+1][F+1],_=m[y].clone().normalize(),p=m[x].clone().normalize(),q=m[w].clone().normalize(),u=m[O].clone().normalize(),i=Y[R][F+1].clone(),I=Y[R][F].clone(),D=Y[R+1][F].clone(),h=Y[R+1][F+1].clone();it(m[y].y)===J?(i.x=(i.x+I.x)/2,E.push(new EW(y,w,O,[_,q,u])),Z[0].push([i,D,h])):it(m[w].y)===J?(D.x=(D.x+h.x)/2,E.push(new EW(y,x,w,[_,p,q])),Z[0].push([i,I,D])):(E.push(new EW(y,x,O,[_,p,u])),Z[0].push([i,I,h]),E.push(new EW(x,w,O,[p.clone(),q,u.clone()])),Z[0].push([I.clone(),D,h.clone()]))}}),cW=(eW.prototype=Q1(G),function(T,B,G,H,f,v){pW.call(this),T=T||.33,B=B||.17,H=H||8,G=G||6,f=f||0,v=v||mt;for(var J=new Zt,M=[],Y=[],m=0;m<=H;m++)for(var E=m/H*mt+o,Z=0;Z<=G;Z++){var R=Z/G*v+f,A=(J.x=T*Mt(R),J.z=-T*Yt(R),new Zt),g=T+B*Mt(E);A.x=g*Mt(R),A.z=-g*Yt(R),A.y=B*Yt(E),this.vertices.push(A),M.push(new b(Z/G,1-m/H)),Y.push(A.clone().sub(J).normalize())}for(m=1;m<=H;m++)for(Z=1;Z<=G;Z++){var F=(G+1)*m+Z-1,W=(G+1)*(m-1)+Z-1,s=(G+1)*(m-1)+Z,S=(G+1)*m+Z,y=new EW(F,W,S,[Y[F].clone(),Y[W].clone(),Y[S].clone()]);this.faces.push(y),this.faceVertexUvs[0].push([M[F].clone(),M[W].clone(),M[S].clone()]),y=new EW(W,s,S,[Y[W].clone(),Y[s].clone(),Y[S].clone()]),this.faces.push(y),this.faceVertexUvs[0].push([M[W].clone(),M[s].clone(),M[S].clone()])}this.computeFaceNormals()}),tW=(cW.prototype=Q1(G),function(T,B,G){T&&(pW.call(this),T=T instanceof Array?T:[T],this.addShapeList(T,B),!1!==B.convertYZ&&fW(this,G),this.computeFaceNormals())}),dW=((v=tW.prototype=Q1(pW.prototype)).addShapeList=function(T,B){for(var G=T.length,H=0;H<G;H++){var f=T[H];this.addShape(f,B)}},v.addShape=function(W,s){var T,B,G,H,f,v,J=s.amount,M=s.curveSegments||Ys,S=s.steps||1,Y=s.extrudePath,m=!1,y=new mW(s.repeatUVLength,s.boundingBox),x=(Y&&(T=Y.getSpacedPoints(S),m=!0,B=s.frames!==Ht?s.frames:new dW.FrenetFrames(Y,S,!1),G=new Zt,H=new Zt,f=new Zt),this),w=this.vertices.length,E=(Y=W.extractPoints(M)).shape,Z=Y.holes;if(!OW.isClockWise(E))for(E=E.reverse(),A=0,g=Z.length;A<g;A++)v=Z[A],OW.isClockWise(v)&&(Z[A]=v.reverse());for(var R=OW.triangulateShape(E,Z),M=E,A=0,g=Z.length;A<g;A++)v=Z[A],E=E.concat(v);for(var F,O,_,p=E.length,q=R.length,u=0;u<p;u++)F=E[u],m?(H.copy(B.normals[0]).multiplyScalar(F.x),G.copy(B.binormals[0]).multiplyScalar(F.y),f.copy(T[0]).add(H).add(G),h(f.x,f.y,f.z)):h(F.x,F.y,0);for(_=1;_<=S;_++)for(u=0;u<p;u++)F=E[u],m?(H.copy(B.normals[_]).multiplyScalar(F.x),G.copy(B.binormals[_]).multiplyScalar(F.y),f.copy(T[_]).add(H).add(G),h(f.x,f.y,f.z)):h(F.x,F.y,J/S*_);if(s.bottom)for(var i=0;i<q;i++)o((O=R[i])[2],O[1],O[0],!0);if(s.top)for(i=0;i<q;i++)o((O=R[i])[0]+p*S,O[1]+p*S,O[2]+p*S,!1);var I=0;for(D(M,I),I+=M.length,A=0,g=Z.length;A<g;A++)D(v=Z[A],I),I+=v.length;function D(T,B){for(var G,H,f=T.length;0<=--f;){(H=(G=f)-1)<0&&(H=T.length-1);for(var v=0,J=S,v=0;v<J;v++){var M=p*v,Y=p*(v+1),m=(Z=void 0,B+G+M),M=B+H+M,E=B+H+Y,Y=B+G+Y,Z=T,R=v,A=J,g=G,F=H;m+=w,M+=w,E+=w,Y+=w,x.faces.push(new EW(m,M,Y)),x.faces.push(new EW(M,E,Y)),Z=y.generateSideWallUV(x,W,Z,s,m,M,E,Y,R,A,g,F),x.faceVertexUvs[0].push([Z[0],Z[1],Z[3]]),x.faceVertexUvs[0].push([Z[1],Z[2],Z[3]])}}}function h(T,B,G){x.vertices.push(new Zt(T,B,G))}function o(T,B,G,H){x.faces.push(new EW(T+=w,B+=w,G+=w,null,0,H?2:1)),H=H?y.generateBottomUV(x,W,s,T,B,G):y.generateTopUV(x,W,s,T,B,G),x.faceVertexUvs[0].push(H)}},function(T,B,G,H,f){pW.call(this),G=G||1,H=H||8,f=f||!1;var v,J,M,Y,m,E,Z,R,A,g,F,W,s,S,y,x,w=[],O=(B=B||64)+1,_=new Zt,p=new dW.FrenetFrames(T,B,f),q=p.tangents,u=p.normals,i=p.binormals;for(this.tangents=q,this.normals=u,this.binormals=i,Y=0;Y<O;Y++)for(w[Y]=[],M=T.getPointAt(Y/(O-1)),q[Y],v=u[Y],J=i[Y],m=0;m<H;m++)S=-G*Mt(y=m/H*mt),y=G*Yt(y),_.copy(M),_.x+=S*v.x+y*J.x,_.y+=S*v.y+y*J.y,_.z+=S*v.z+y*J.z,w[Y][m]=(S=_.x,y=_.y,x=_.z,this.vertices.push(new Zt(S,y,x))-1);for(Y=0;Y<B;Y++)for(m=0;m<H;m++)E=w[Y][m],Z=w[A=f?(Y+1)%B:Y+1][m],R=w[A][A=(m+1)%H],A=w[Y][A],g=new b(Y/B,m/H),F=new b((Y+1)/B,m/H),W=new b((Y+1)/B,(m+1)/H),s=new b(Y/B,(m+1)/H),this.faces.push(new EW(E,Z,A)),this.faceVertexUvs[0].push([g,F,s]),this.faces.push(new EW(Z,R,A)),this.faceVertexUvs[0].push([F.clone(),W,s.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}),NW=(dW.prototype=Q1(G),dW.FrenetFrames=function(T,B,G){var H,f,v,J,M,Y=new Zt,m=[],E=[],Z=[],R=new Zt,A=new K,g=B+1;for(this.tangents=m,this.normals=E,this.binormals=Z,M=0;M<g;M++)m[M]=T.getTangentAt(M/(g-1)),m[M].normalize();for(E[0]=new Zt,Z[0]=new Zt,B=Number.MAX_VALUE,f=it(m[0].x),v=it(m[0].y),J=it(m[0].z),f<=B&&(B=f,Y.set(1,0,0)),v<=B&&(B=v,Y.set(0,1,0)),J<=B&&Y.set(0,0,1),R.crossVectors(m[0],Y).normalize(),E[0].crossVectors(m[0],R),Z[0].crossVectors(m[0],E[0]),M=1;M<g;M++)E[M]=E[M-1].clone(),Z[M]=Z[M-1].clone(),R.crossVectors(m[M-1],m[M]),1e-4<R.length()&&(R.normalize(),H=It(u1(m[M-1].dot(m[M]),-1,1)),E[M].applyMatrix4(A.makeRotationAxis(R,H))),Z[M].crossVectors(m[M],E[M]);if(G)for(H=It(u1(E[0].dot(E[g-1]),-1,1)),H/=g-1,0<m[0].dot(R.crossVectors(E[0],E[g-1]))&&(H=-H),M=1;M<g;M++)E[M].applyMatrix4(A.makeRotationAxis(m[M],H*M)),Z[M].crossVectors(m[M],E[M])},function(T,B,G,H){pW.call(this),G=G||0,H=H==ft?mt:H;for(var f=1/(T.length-1),v=1/(B=B||18),J=0,M=B;J<=M;J++)for(var Y=G+J*v*H,m=Mt(Y),E=Yt(Y),Z=0,R=T.length;Z<R;Z++){var A=T[Z],g=new Zt;g.x=m*A.x-E*A.y,g.y=E*A.x+m*A.y,g.z=A.z,this.vertices.push(g)}for(var F=T.length,J=0,M=B;J<M;J++)for(Z=0,R=T.length-1;Z<R;Z++){var W=Z+F*J,s=W+F,m=W+1+F,S=W+1,y=J*v,x=Z*f,w=y+v,O=x+f;this.faces.push(new EW(W,S,s)),this.faceVertexUvs[0].push([new b(y,x),new b(y,O),new b(w,x)]),this.faces.push(new EW(s,S,m)),this.faceVertexUvs[0].push([new b(w,x),new b(y,O),new b(w,O)])}this.mergeVertices(),fW(this),this.computeFaceNormals(),this.computeVertexNormals()}),QW=(NW.prototype=Q1(G),function(T,B){T=_W.generateShapes(T,B=B||{}),B.amount=B.amount!==Ht?B.amount:.5,(B.convertYZ=!1)!==B.fill&&(B.bottom=!0,B.top=!0),tW.call(this,T,B)}),LW=(QW.prototype=Q1(v),L.Node=function(){O1(LW,this);var G=this._styleMap={};this.getStyle=function(T){var B=G[T];return B!==Ht?B:Ft[T]},this.setStyleMap=function(T){var B=G;G=this._styleMap=T||{},this.fp("styleMap",B,G)}}),jW={X:is,Y:Is,Z:Ds},rW={X:0,Y:1,Z:2},XW={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},UW=new j9,lW=function(T,B,G){var H,f;B&&(H=B[0],f=B[1],B=B[2],"xzy"===G?(Is(T,f),Ds(T,B),is(T,H)):"xyz"===G?(Ds(T,B),Is(T,f),is(T,H)):"yxz"===G?(Ds(T,B),is(T,H),Is(T,f)):"yzx"===G?(is(T,H),Ds(T,B),Is(T,f)):"zxy"===G?(Is(T,f),is(T,H),Ds(T,B)):"zyx"===G?(is(T,H),Is(T,f),Ds(T,B)):(Is(T,f),Ds(T,B),is(T,H)))},bW=(r4("Node",WJ,{ms_ac:["rotationMode","anchorElevation"],ms_edge:!0,_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:gW="xzy",_64O:0,_rotationX:0,_53O:0,_host:ft,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_anchorElevation:.5,_scale:{x:1,y:1},_scaleTall:1,_54O:0,getUIClass:function(){return Za},_22Q:function(){return oZ},getX:function(){return this.p().x},setX:function(T){this.p(T,this.p().y)},getY:function(){return this.p().y},setY:function(T){this.p(this.p().x,T)},getAnchorX:function(){return this.getAnchor().x},setAnchorX:function(T){this.setAnchor(T,this.getAnchor().y)},getAnchorY:function(){return this.getAnchor().y},setAnchorY:function(T){this.setAnchor(this.getAnchor().x,T)},getScaleX:function(){return this.getScale().x},setScaleX:function(T){this.setScale(T,this.getScale().y)},getScaleY:function(){return this.getScale().y},setScaleY:function(T){this.setScale(this.getScale().x,T)},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},setQuaternion:function(T){return T=(new $9).setFromQuaternion(T,$9.ReverseOrder(this.getRotationMode())),this._applyClosestR3(T.x,T.y,T.z)},getQuaternion:(v9=new $9,J9=new $9,M9=new j9,function(T){return T=T||new j9,this.getEuler(v9),v9.equals(J9)?T.copy(M9):T.copy(M9.setFromEuler(J9.copy(v9)))}),getEuler:function(T){var B=this.r3();return(T=T||new $9).set(B[0],B[1],B[2],$9.ReverseOrder(this.getRotationMode()))},setEuler:function(T){return T=T.clone().reorder($9.ReverseOrder(this.getRotationMode())),this.r3(T.x,T.y,T.z)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(T,B){_s(T,os(ft,ft,this.r3(),this.getRotationMode())),this.translate3d(T[0]*B,T[1]*B,T[2]*B)},translateFront:function(T){this.translate3dBy([0,0,1],T)},translateBack:function(T){this.translate3dBy([0,0,-1],T)},translateLeft:function(T){this.translate3dBy([-1,0,0],T)},translateRight:function(T){this.translate3dBy([1,0,0],T)},translateTop:function(T){this.translate3dBy([0,1,0],T)},translateBottom:function(T){this.translate3dBy([0,-1,0],T)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(T,B,G){1===arguments.length&&(B=T[1],G=T[2],T=T[0]),this.p(T,G),this.setElevation(B)},translate3d:function(T,B,G){1===arguments.length&&(B=T[1],G=T[2],T=T[0]),this.translate(T,G),this.setElevation(this._54O+B)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(T,B,G){1===arguments.length&&(B=T[1],G=T[2],T=T[0]),this.setSize(T,G),this.setTall(B)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(T,B,G){var H,f=this;f._updatingRotation3d||((f._updatingRotation3d=1)===arguments.length&&(B=T[1],G=T[2],T=T[0]),H=[f._rotationX,-f._64O,f._53O],f._rotationX=T,f._64O=-B,f._53O=G,f.fp("rotation3d",H,[T,B,G]),delete f._updatingRotation3d)},_applyClosestR3:function(T,B,G){var H,f,v,J=this.r3(),M=this.getRotationMode();"xzy"===M||"yzx"===M?(H=0<T?T-o:T+o,f=0<B?B-o:B+o,v=0<G?o-G:-o-G):"xyz"===M||"zyx"===M?(H=0<T?T-o:T+o,v=0<G?G-o:G+o,f=0<B?o-B:-o-B):"yxz"!==M&&"zxy"!==M||(v=0<G?G-o:G+o,f=0<B?B-o:B+o,H=0<T?o-T:-o-T),pN([H,f,v],J)<pN([T,B,G],J)?this.r3(H,f,v):this.r3(T,B,G)},setRotationY:function(T){this.setRotation(-T)},getRotationY:function(){return-this._64O},lookAtDirection:function(T,B){B=B||Ct;var G=this,H=n2(T);B===Ct?(G.r3([-ht(T[1]/H),-ct(T[2],T[0])+ot,0]),G.setRotationMode("xzy")):B===Be?(G.r3(0,-ct(T[2],T[0]),ht(T[1]/H)),G.setRotationMode("zyx")):B===Te?(G.r3(0,-ct(T[2],T[0])+o,-ht(T[1]/H)),G.setRotationMode("zyx")):B===Ge?(G.r3([-ht(T[1]/H)+ot,-ct(T[2],T[0])+ot,0]),G.setRotationMode("xzy")):B===He&&(G.r3([-ht(T[1]/H)-ot,-ct(T[2],T[0])+ot,0]),G.setRotationMode("xzy")),B===at&&(G.r3([-ht(T[1]/H)+o,-ct(T[2],T[0])+ot,o]),G.setRotationMode("zxy"))},lookAt:function(T,B){return this.lookAtDirection(Ws(T,this.p3()),B)},lookAtX:(ac=new Zt,T9=new Zt,B9=new Zt,G9=new K,H9=new K,f9=new $9,function(T,B){var G=hs(this);G9.fromArray(G),B9.copy(this.p3()),ac.copy(T).sub(B9),ac.lengthSq()<1e-6||(ac.normalize(),"string"==typeof(B=B||Ct)?B===Ct?T9.set(0,0,1):B===at?T9.set(0,0,-1):B===Te?T9.set(-1,0,0):B===Be?T9.set(1,0,0):B===Ge?T9.set(0,1,0):B===He&&T9.set(0,-1,0):T9.copy(B).normalize(),T9.applyMatrix4(G9).sub(B9).normalize(),(G=Math.acos(ac.dot(T9)))&&((T=ac.clone().cross(T9)).lengthSq()<1e-6&&(B===Ge||B===He||0===B[0]&&0===B[1]?T.set(0,0,1):T.set(0,1,0)).applyMatrix4(G9).sub(B9),T.normalize(),f9.set(this.r3(),this.getRotationMode(),!0),G9.makeRotationFromEuler(f9),H9.makeRotationAxis(T,-G),f9.setFromRotationMatrix(H9.multiply(G9)),this._applyClosestR3(f9.x,f9.y,f9.z)))}),getHost:function(){return this._host},setHost:function(T){var B,G=this;G!==T&&G._host!==T&&((B=G._host)&&(B._removeAttach(G),B.updateLayoutAttaches()),G._host=T,G._host&&(G._host._addAttach(G),G._host.updateLayoutAttaches()),G.fp("host",B,T),G.onHostChanged(B,T))},getAttaches:function(){return this._69O},_addAttach:function(T){this._69O||(this._69O=new $),this._69O.add(T),this.fp("attaches",ft,T)},_removeAttach:function(T){this._69O.remove(T),this._69O.isEmpty()&&delete this._69O,this.fp("attaches",T,ft)},getImage:function(){return this._pendingCheckImageJSON&&vt.getImage(this._image)&&(this._pendingCheckImageJSON=!1,this.getParent()instanceof aW&&this.getParent().checkPendingUpdateInfo()),this._image},setImage:function(T){var B=this._image,G=this.getWidth(),H=this.getHeight();this._image=T,this.fp("image",B,T)&&(null!=T&&(M1(T)||Et(T)&&/\.json$/i.test(T))&&(this._pendingCheckImageJSON=!0),yw||(this.fp(Oe,G,this.getWidth()),this.fp(_e,H,this.getHeight())))},getElevation:function(){return this._54O},setElevation:function(T){var B;this._50O||(this._50O=1,B=this._54O,this._54O=T,this.fp(wB,B,T),delete this._50O)},getRotation:function(){return this._64O},setRotation:function(T){var B;this._49O||(this._49O=1,B=this._64O,this._64O=T,this.fp(ze,B,T),delete this._49O)},getRotationX:function(){return this._rotationX},setRotationX:function(T){var B;this._51O||(this._51O=1,B=this._rotationX,this._rotationX=T,this.fp("rotationX",B,T),delete this._51O)},getRotationZ:function(){return this._53O},setRotationZ:function(T){var B;this._52O||(this._52O=1,B=this._53O,this._53O=T,this.fp("rotationZ",B,T),delete this._52O)},getPosition:function(){return this._position},setPosition:function(T,B){this._50I||(this._50I=1,(B=2===arguments.length?{x:T,y:B}:T).x===this._position.x&&B.y===this._position.y||(T=this._position,this._position=B,this.fp(xB,T,B)),delete this._50I)},translate:function(T,B){var G=this._position;this.p(G.x+T,G.y+B)},hasInheritedSize:function(){var T=this.getStyle("shape3d");if(T){var B=lE(T);if(B&&B.rawS3)return!0;if(("billboard"===T||"plane"===T)&&z(this.getStyle("shape3d.image")))return!0}return!(!this.hasOwnProperty("_image")||!z(this._image))},getWidth:function(){if(0<=this._width)return this._width;var T=this.getStyle("shape3d");if(T){var B,G=lE(T);if(G&&G.rawS3)return G.rawS3[0];if("billboard"===T||"plane"===T)return(B=z(this.getStyle("shape3d.image")))?ks(B,this):20}return(B=z(this._image))?ks(B,this):20},setWidth:function(T){var B=this._width;this._width=T,this.fp(Oe,B,T)},getHeight:function(){if(0<=this._height)return this._height;var T=this.getStyle("shape3d");if(T){var B,G=lE(T);if(G&&G.rawS3)return G.rawS3[2];if("plane"===T)return(B=z(this.getStyle("shape3d.image")))?Cs(B,this):20;if("billboard"===T)return 2}return(B=z(this._image))?Cs(B,this):20},setHeight:function(T){var B=this._height;this._height=T,this.fp(_e,B,T)},getTall:function(){if(0<=this._tall)return this._tall;var T=this.getStyle("shape3d");if(T){var B=lE(T);if(B&&B.rawS3)return B.rawS3[1];if("billboard"===T)return(B=z(this.getStyle("shape3d.image")))?Cs(B,this):20;if("plane"===T)return 2}return 20},setTall:function(T){var B=this._tall;this._tall=T,this.fp("tall",B,T)},setSize:function(T,B){2===arguments.length?(this.setWidth(T),this.setHeight(B)):(this.setWidth(T.width),this.setHeight(T.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(T,B,G,H,f){var v=this.getAnchor(),J=this.getScale(),M=(arguments.length<=2&&(f=B,B=T.y,G=T.width,H=T.height,T=T.x),f&&J.x<0?1-v.x:v.x),v=f&&J.y<0?1-v.y:v.y;this.p(T+G*M,B+H*v),f&&(G/=Math.abs(J.x),H/=Math.abs(J.y)),this.setWidth(G),this.setHeight(H)},getMatrix:function(){var T=this._64O,B=this._position,G=this.getScale();return new L9(T,B.x,B.y,G.x,G.y)},getMatrix4:(Pc=new Zt,kc=new j9,Cc=new Zt,function(T){return this.getQuaternion(kc),Pc.copy(this.p3()),Cc.copy(this.getFinalScale3d()),(T=T||new K).compose(Pc,kc,Cc)}),getAnchorRect:function(){var T=this.getWidth(),B=this.getHeight(),G=this.getAnchor();return{x:-T*G.x,y:-B*G.y,width:T,height:B}},toLocal:function(T){return this.getMatrix().tfi(T)},toGlobal:function(T){return this.getMatrix().tf(T)},getAttachPosition:(Vc=new L9,function(T,B,G,H){G=G||0,H=H||0;var f=this.getAnchor(),v=this._64O,J=this._position,M=this.getScale();return Vc.setFromTransform(v,J.x,J.y).tf({x:G+M.x*this.getWidth()*(T-f.x),y:H+M.y*this.getHeight()*(B-f.y)})}),isInRect:function(T){T=this.toLocal(T);var B=this.getWidth(),G=this.getHeight();return T.x+=B*this.getAnchorX(),T.y+=G*this.getAnchorY(),!(T.x<0||T.y<0||T.x>B||T.y>G)},getRect:function(){var T=this.getWidth(),B=this.getHeight(),G={x:-T*(G=this.getAnchor()).x,y:-B*G.y,width:T,height:B},T=this.getMatrix();return $2([T.tf(G.x,G.y),T.tf(G.x+G.width,G.y),T.tf(G.x+G.width,G.y+G.height),T.tf(G.x,G.y+G.height)])},getAnchorElevation:function(){return this._anchorElevation},getAnchor3d:function(){var T=this.getAnchor(),B=this._anchorElevation;return{x:T.x,y:B,z:T.y}},setAnchorElevation:function(T){var B=this._anchorElevation;return B!==T&&(this._anchorElevation=T,this.fp("anchorElevation",B,T),!0)},setAnchor3d:function(T,B,G,H){"number"==typeof T?f={x:T,y:B,z:G}:(f=T.length?{x:T[0],y:T[1],z:T[2]}:T,H=B),this.beginTransaction();var f,G=this.getAnchor3d(),T=this.setAnchor(f.x,f.z);return(T=!!this.setAnchorElevation(f.y)||T)&&H&&!yw&&(this.getAnchor3d(),B=hs(this),H=_s([f.x-G.x,f.y-G.y,f.z-G.z],B),this.p3(H)),this.endTransaction(),T},getAnchor:function(){if(this.hasOwnProperty("_anchor"))return this._anchor;var T=z(this._image);return T&&T.anchorX!==Ht?{x:T.anchorX,y:T.anchorY}:this._anchor},setAnchor:function(T,B,G){var H,f,v,J,M=this;return"number"==typeof T?J={x:T,y:B}:(J=T.length?{x:T[0],y:T[1]}:T,G=B),((T=M.getAnchor()).x!==J.x||T.y!==J.y)&&(M.beginTransaction(),M._anchor=J,M.fp("anchor",T,J),G&&!yw&&(B=M.getPosition(),G=M.getSize(),H=M.getRotation(),f=M.getScale(),v=-G.width*(T.x-J.x)*f.x,G=-G.height*(T.y-J.y)*f.y,T=Yt(H),J=Mt(H),M.setPosition(B.x+J*v-T*G,B.y+T*v+J*G)),M.endTransaction(),!0)},getLocalQuaternion:function(T){if(!(B=this.getHost()))return this.getQuaternion(T);var B=B.getQuaternion(),G=this.getQuaternion();return(T=T||new j9).copy(B).inverse().multiply(G)},setLocalQuaternion:function(T){var B=this.getHost();if(!B)return this.setQuaternion(T);B=B.getQuaternion(),this.setQuaternion(B.clone().multiply(T))},getLocalEuler:($c=new j9,function(T){return this.getHost()?(this.getLocalQuaternion($c),(T=T||new $9).setFromQuaternion($c,$9.ReverseOrder(this.getRotationMode()))):this.getEuler(T)}),setLocalEuler:(nc=new j9,function(T){return this.getHost()?(nc.setFromEuler(T),this.setLocalQuaternion(nc)):this.setEuler(T)}),getLocalPosition3d:function(T){(T=T||new Zt).copy(this.p3());var B=this.getHost();return B?(B=B.getMatrix4(),T.applyMatrix4(B.getInverse(B))):T},setLocalPosition3d:function(T){var B,G=this.getHost();G?(G=G.getMatrix4(),(B=new Zt(T)).applyMatrix4(G),this.p3(B.x,B.y,B.z)):T.x!==Ht?this.p3(T.x,T.y,T.z):this.p3(T)},getScale:function(){return this._scale},setScale:function(T,B){B=2===arguments.length?{x:T,y:B}:T,(T=this.getScale()).x===B.x&&T.y===B.y||(this._scale=B,this.fp("scale",T,B))},getScaleTall:function(){return this._scaleTall},getScale3d:function(){var T=this._scaleTall,B=this.getScale();return[B.x,T,B.y]},getFinalScale3d:function(){var T=this.s3(),B=this._dynamicScale3d,G=this.getScale3d();return T&&(G[0]*=T[0],G[1]*=T[1],G[2]*=T[2]),B&&(G[0]*=B[0],G[1]*=B[1],G[2]*=B[2]),G},getFinalRotation3d:function(){return this._dynamicRotation||this.r3()},setScaleTall:function(T){var B=this._scaleTall;B!==T&&(this._scaleTall=T,this.fp("scaleTall",B,T))},setScale3d:function(T,B,G){B="number"==typeof T?{x:T,y:B,z:G}:T.length?{x:T[0],y:T[1],z:T[2]}:T,this.setScaleTall(B.y),this.setScale(B.x,B.z)},getCorners:function(T,B){T==ft&&(T=0),B==ft&&(B=T);var G=this.getAnchor(),H=this.getWidth(),f=this.getHeight(),v=-H*G.x-T,G=-f*G.y-B,H=H+2*T,T=f+2*B;return[(f=this.getMatrix()).tf(v,G),f.tf(v,G+T),f.tf(v+H,G+T),f.tf(v+H,G)]},getEditControlPoints:function(T,B,G){B==ft&&(B=0),G==ft&&(G=B);var H=this.getAnchor(),f=this.getWidth(),v=this.getHeight(),J=-f*H.x-B,H=-v*H.y-G,f=f+2*B,B=v+2*G;return T?[{x:J,y:H},{x:J,y:0},{x:J,y:H+B},{x:0,y:H+B},{x:J+f,y:H+B},{x:J+f,y:0},{x:J+f,y:H},{x:0,y:H}]:[(v=this.getMatrix()).tf(J,H),v.tf(J,0),v.tf(J,H+B),v.tf(0,H+B),v.tf(J+f,H+B),v.tf(J+f,0),v.tf(J+f,H),v.tf(0,H)]},rotateAt:function(T,B,G){var H=this._position,f=this._64O,v=new L9(f,H.x,H.y).tf(T,B),T=ut(T*T+B*B),B=ct(H.y-v.y,H.x-v.x)+G;this.setRotation(f+G),this.p(v.x+T*Mt(B),v.y+T*Yt(B))},rotateAroundAxis:function(T,B){this.setQuaternion(this.getQuaternion().multiply(UW.setFromAxisAngle(T,B)))},rotateAroundWorldAxis:function(T,B){this.setQuaternion(this.getQuaternion().premultiply(UW.setFromAxisAngle(T,B)))},rotateX:function(T){return this.rotateAroundAxis(Zt.AxisX,T)},rotateY:function(T){return this.rotateAroundAxis(Zt.AxisY,T)},rotateZ:function(T){return this.rotateAroundAxis(Zt.AxisZ,T)},onParentChanged:function(T,B){LW.superClass.onParentChanged.apply(this,arguments),this._8I()},onPropertyChanged:(zc={},"width|height|position|anchor|rotation|scale|s:layout.h|s:layout.v".split("|").forEach(function(T){zc[T]=!0}),function(B){var T,G=this,H=(LW.superClass.onPropertyChanged.call(G,B),B.property);zc[H]&&!G._layoutUpdating&&G.updateLayoutParameters(null,H),G._69O&&G._69O.each(function(T){T.handleHostPropertyChange(B)}),G._49I&&G._49I.each(function(T){T.fp("agentChange",!0,!1)}),iJ[H]&&this.updateLayoutAttaches(),"a:layout"===H.substring(0,8)&&(this.updateLayoutAttaches(),(T=G._host)&&T.updateLayoutAttaches()),"s:shape3d.autorotate"!==H&&"s:autorotate"!==H&&"s:shape3d.fixSizeOnScreen"!==H&&"s:fixSizeOnScreen"!==H&&"s:hide.overlapping.group"!==H||(G._47Q=G.s("autorotate")||G.s("shape3d.autorotate")||G.s("fixSizeOnScreen")||G.s("shape3d.fixSizeOnScreen")||G.s("hide.overlapping.group"))}),onHostChanged:function(T,B){this.updateAttach(),this.updateLayoutParameters()},handleHostPropertyChange:function(T){this.updateAttach(T)},onStyleChanged:function(T,B,G){LW.superClass.onStyleChanged.apply(this,arguments),DJ[T]&&this.updateAttach()},updateLayoutAttaches:function(){var T;if(!yw&&this.s("vector.layoutable"))return!!((T=z(this.getImage()))&&T.layoutAttach&&(T=T.layoutAttach)&&T(this))||void 0},updateAttach:function(T){yw?this.updateLayoutParameters():this._51I||(this._51I=1,this._71O(T),delete this._51I)},_71O:function(T){var B,G,H,f,v,J,M=this,Y=M._host,m=T?T.property:ft,E=T?T.oldValue:ft,Z=T?T.newValue:ft;if(Y instanceof LW&&(!T||iJ[m])){var R=z(Y.getImage());if(R&&R.layoutAttach)return}Y instanceof L.Grid?m===wB?M.setElevation(M._54O+Z-E):T&&!IJ[m]||(R=M.s("attach.row.index"),f=M.s("attach.column.index"),(G=Y.getCellRect(R,f))&&(H=M.s("attach.row.span"),B=M.s("attach.column.span"),1===H&&1===B||(G=V2(G,Y.getCellRect(R+H-1,f+B-1))),eJ(G,M,"attach.padding",1),M.setRect(G))):Y instanceof VW&&0<=(R=M.s("attach.index"))&&(!T||hJ[m])?(H=M.s("attach.thickness"),f=Y.getScale(),B=Math.max(f.x,f.y),0<H&&M.setHeight(Y.getThickness()*H*B),G=M.s("attach.offset"),R<(H=(f=Y.getPoints()).size())&&(v=Y.getPointsMatrix2d(),J=f.get(R),H=H===R+1?f.get(0):f.get(R+1),J=v.apply(J),f=[(H=v.apply(H)).x-J.x,H.y-J.y],(R=n2(f))&&(M.s("attach.offset.relative")&&(G*=R),M.s("attach.offset.opposite")&&(G=R-G),v={x:J.x+f[0]/R*G,y:J.y+f[1]/R*G},(J=M.s("attach.gap"))&&(M.s("attach.gap.relative")&&(J*=Y.getThickness()*B),v=M$(ft,v,H,J)),M.p(v),M.setRotation(ct(f[1],f[0]))))):T&&(m===xB?M.translate(Z.x-E.x,Z.y-E.y):m===wB?M.setElevation(M._54O+Z-E):uJ[m]?"rotation3d"===m?M.syncRotation3d(Y,Z,E):M._11Q(Y,m,Z-E):"anchor"!==m&&"width"!==m&&"height"!==m&&"scale"!==m||M.layout(Y))},_11Q:(Uc=new L.Math.Euler,lc=L.Math.Euler.ReverseOrder,bc=new L.Math.Vector2,Kc=new L.Math.Vector2,function(T,B,G){var H=T.p3(),f=T.r3(),v=this.p3(),J=this.r3();if(B===ze&&(B="rotationY",G=-G),(B===ze||"rotationY"===B)&&0===J[0]&&0===J[2]&&0===f[0]&&0===f[2]&&0===v[1]&&0===H[1])return this.setRotation(-J[1]-G),bc.set(v[0],v[2]).rotateAround(Kc.set(H[0],H[2]),-G),void this.p(bc.x,bc.y);var T=(J=XW[T.getRotationMode()])[0],M=J[1],J=J[2],Y=jW[T],m=jW[M],E=jW[J],Z=ys(),T=(B===ze+T?(E(Z,f[rW[J]]),m(Z,f[rW[M]]),Y(Z,G),m(Z,-f[rW[M]]),E(Z,-f[rW[J]])):B===ze+M?(E(Z,f[rW[J]]),m(Z,G),E(Z,-f[rW[J]])):B===ze+J&&E(Z,G),Ws(v,H)),Y=(_s(T,Z),this.p3(H[0]+T[0],H[1]+T[1],H[2]+T[2]),this.getRotationMode());lW(Z,this.r3(),Y),Uc.setFromRotationMatrix(Z,lc(Y)),this.r3([Uc.x,Uc.y,Uc.z])}),syncRotation3d:(jc=new j9,rc=new $9,Xc=new Zt,function(T,B,G){var H;G[0]===B[0]&&G[1]===B[1]&&G[2]===B[2]||(H=$9.ReverseOrder(T.getRotationMode()),UW.setFromEuler(rc.set(G[0],G[1],G[2],H)),jc.setFromEuler(rc.set(B[0],B[1],B[2],H)),jc.multiply(UW.inverse()),G=T.p3(),B=this.p3(),Xc.set(B[0]-G[0],B[1]-G[1],B[2]-G[2]).applyQuaternion(jc),this.p3(G[0]+Xc.x,G[1]+Xc.y,G[2]+Xc.z),this.setQuaternion(this.getQuaternion(UW).premultiply(jc)))}),isHostOn:function(T){if(this._host&&T&&T._69O)for(var B={},G=this._host;G&&G!==this&&!B[G._id];){if(G===T)return!0;G=(B[G._id]=G)._host}return!1},isLoopedHostOn:function(T){return this.isHostOn(T)&&T.isHostOn(this)},getScaledSize:function(){var T=this.getSize(),B=this.getScale();return T.width*=Math.abs(B.x),T.height*=Math.abs(B.y),T},invalidateView:function(){var T=this.dm();T&&T.firePropertyChange("invalidateView",!1,!0)},layout:function(T){if(T=T||this.getHost()){var B=this,G=B.s("layout.h")||"center",H=B.s("layout.v")||"center";if("center"!==G||"center"!==H){var f,v,J,M,Y,m,E=new L.Math.Vector2,Z=T.getPosition(),R=T.getAnchor(),A=T.getScaledSize(),g=(B.getPosition(),1),F=1;switch(B._layoutUpdating=!0,G){case"left":E.setX(B._layoutHValue-R.x*A.width);break;case"right":E.setX((1-R.x)*A.width-B._layoutHValue);break;case"leftright":f=A.width-B._layoutHValue[2],J=B.getRotation()-T.getRotation(),M=Math.abs(Math.sin(J)),g+=(Y=Math.abs(Math.cos(J)))*f/B._layoutHValue[3],F+=M*f/B._layoutHValue[4],E.setX(B._layoutHValue[1]+(B._layoutHValue[5]-R.x)*A.width);break;case"center":E.setX((.5-R.x)*A.width-B._layoutHValue);break;case"scale":J=B.getRotation()-T.getRotation(),M=Math.abs(Math.sin(J)),Y=Math.abs(Math.cos(J)),E.setX((.5-R.x)*A.width-B._layoutHValue[1]*A.width/B._layoutHValue[0]),g+=Y*(v=A.width/B._layoutHValue[2]-1),F+=M*v}switch(H){case"top":E.setY(B._layoutVValue-R.y*A.height);break;case"bottom":E.setY((1-R.y)*A.height-B._layoutVValue);break;case"topbottom":J||(J=B.getRotation()-T.getRotation(),M=Math.abs(Math.sin(J)),Y=Math.abs(Math.cos(J))),g+=M*(f=A.height-B._layoutVValue[2])/B._layoutVValue[3],F+=Y*f/B._layoutVValue[4],E.setY(B._layoutVValue[1]+(B._layoutVValue[5]-R.y)*A.height);break;case"center":E.setY((.5-R.y)*A.height-B._layoutVValue);break;case"scale":J||(J=B.getRotation()-T.getRotation(),M=Math.abs(Math.sin(J)),Y=Math.abs(Math.cos(J))),E.setY((.5-R.y)*A.height-B._layoutVValue[1]*A.height/B._layoutVValue[0]),g+=M*(v=A.height/B._layoutVValue[2]-1),F+=Y*v}"leftright"!==G&&"scale"!==G&&"topbottom"!==H&&"scale"!==H||(H=this.getScale(),m=Math.abs(H.x),H=Math.abs(H.y),"leftright"===G||"scale"===G?B.setSize(B._layoutHValue[3]*g/m,B._layoutHValue[4]*F/H):B.setSize(B._layoutVValue[3]*g/m,B._layoutVValue[4]*F/H)),E.rotateAround(null,T.getRotation()),this.setPosition(E.x+Z.x,E.y+Z.y),B._layoutUpdating=Ht}}},updateLayoutParameters:function(T,B){if(T=T||this.getHost()){var G=this,H=G.s("layout.h"),f=G.s("layout.v");if(H||f){var v,J,M,Y,m,E,Z=new L.Math.Vector2,R=T.getPosition(),A=T.getAnchor(),g=T.getScaledSize(),F=G.getPosition(),W=G.getScaledSize();switch(Z.set(F.x-R.x,F.y-R.y),Z.rotateAround(null,-T.getRotation()),H){case"left":G._layoutHValue=Z.x+A.x*g.width;break;case"right":G._layoutHValue=-Z.x+(1-A.x)*g.width;break;case"center":G._layoutHValue=-Z.x+(.5-A.x)*g.width;break;case"leftright":case"scale":v="scale"===H?-Z.x+(.5-A.x)*g.width:(J=G.getAnchor(),M=G.getRotation()-T.getRotation(),Y=Math.cos(M),m=Math.sin(M),E=-Math.min(-J.x*Y+J.y*m,-J.x*Y-(1-J.y)*m,(1-J.x)*Y+J.y*m,(1-J.x)*Y-(1-J.y)*m),Z.x-(E-A.x)*g.width),"position"===B&&"object"==typeof G._layoutHValue?(G._layoutHValue[0]=g.width,G._layoutHValue[1]=v):G._layoutHValue=[g.width,v,g.width,W.width,W.height,E]}switch(f){case"top":G._layoutVValue=Z.y+A.y*g.height;break;case"bottom":G._layoutVValue=-Z.y+(1-A.y)*g.height;break;case"center":G._layoutVValue=-Z.y+(.5-A.y)*g.height;break;case"topbottom":case"scale":v="scale"===f?-Z.y+(.5-A.y)*g.height:(M||(J=G.getAnchor(),M=G.getRotation()-T.getRotation(),Y=Math.cos(M),m=Math.sin(M)),E=-Math.min(-J.x*m-J.y*Y,-J.x*m+(1-J.y)*Y,(1-J.x)*m-J.y*Y,(1-J.x)*m+(1-J.y)*Y),Z.y-(E-A.y)*g.height),"position"===B&&"object"==typeof G._layoutVValue?(G._layoutVValue[0]=g.height,G._layoutVValue[1]=v):G._layoutVValue=[g.height,v,g.height,W.width,W.height,E]}}}},getSerializableProperties:function(){var T=LW.superClass.getSerializableProperties.call(this);return S1(T,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,anchor:1,anchorElevation:1,scale:1,scaleTall:1,_width:1,_height:1,_tall:1,elevation:1}),T}}),L.Edge=function(T,B){O1(bW,this),this.setSource(T),this.setTarget(B),this._geometryVersion=0}),KW=(r4("Edge",WJ,{ms_edge:!0,_icon:"edge_icon",getUIClass:function(){return Ra},_22Q:function(){return cZ},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},canSetSourceTarget:function(T,B){if(T===this)return!1;if(r(T))return!0;for(var G,H,f,v,J=[this],M=-1,Y=0;M<Y;)if(G=J[++M]._44I)for(f=0,v=(G=G.getArray()).length;f<v;f++)if(H=G[f],Z1(H)&&!(0<=J.indexOf(H))){if(H===T)return!1;J.push(H),Y++}return!0},setSource:function(T){var B;this._source!==T&&this.canSetSourceTarget(T)&&(B=this._source,this._source=T,B&&B._16I(this),T&&T._2I(this),this._7I(),this.fp("source",B,T))},setTarget:function(T){var B;this._target!==T&&this.canSetSourceTarget(T)&&(B=this._target,this._target=T,B&&B._18I(this),T&&T._4I(this),this._7I(),this.fp("target",B,T))},isLooped:function(){return this._source===this._target&&r(this._source)&&r(this._target)},onPropertyChanged:(Y9={},["source","target","sourceAgent","targetAgent","edgeGroup","agentChange","s:edge.width","s:edge.type","s:edge.offset","s:edge.center","s:edge.points","s:edge.segments","s:edge.gap","s:edge.source.t3","s:edge.source.position","s:edge.source.anchor.x","s:edge.source.anchor.y","s:edge.source.anchor.elevation","s:edge.source.offset.x","s:edge.source.offset.y","s:edge.source.offset.elevation","s:edge.source.index","s:edge.source.percent","s:edge.target.t3","s:edge.target.position","s:edge.target.anchor.x","s:edge.target.anchor.y","s:edge.target.anchor.elevation","s:edge.target.offset.x","s:edge.target.offset.y","s:edge.target.offset.elevation","s:edge.target.index","s:edge.target.percent","s:edge.color","s:edge.gradient.color","s:edge.pattern","s:edge.dash","s:edge.dash.color","s:edge.dash.pattern","s:edge.dash.offset","s:repeat.uv.length","s:rotate.uv.length","s:rotate.vs.length","s:body.color","s:shape3d","s:shape3d.visible","s:shape3d.image","s:shape3d.smooth","s:shape3d.resolution","s:shape3d.color","s:shape3d.blend","s:shape3d.side","s:shape3d.start.angle","s:shape3d.sweep.angle","s:shape3d.top.cap","s:shape3d.top.image","s:shape3d.top.visible","s:shape3d.top.color","s:shape3d.bottom.cap","s:shape3d.bottom.image","s:shape3d.bottom.visible","s:shape3d.bottom.color","s:shape3d.uv.union"].forEach(function(T){Y9[T]=!0}),function(T){var B;Y9[T.property]&&(this._geometryVersion++,B=!0),B&&this._49I&&this._49I.each(function(T){T.fp("agentChange",!0,!1)}),"s:alwaysOnTop"!==T.property&&"s:shape3d.alwaysOnTop"!==T.property||(T.newValue?this.setRenderLayer("top"):this.setRenderLayer(Ht))}),_7I:function(){var T,B=this,G=function(T){if(T.isLooped())return T._source;var B=tJ(T._source),G=tJ(T._target);return B===G?T._source:dJ(B,G)}(B),G=(B._40I!==G&&((T=this._40I)&&T._15I(B),(B._40I=G)&&G._1I(B),B.fp("sourceAgent",T,G),LJ(T,B._41I),LJ(G,B._41I)),function(T){if(T.isLooped())return T._target;var B=tJ(T._source),G=tJ(T._target);return B===G?T._target:dJ(G,B)}(B));B._41I!==G&&((T=B._41I)&&T._17I(B),(B._41I=G)&&G._3I(B),B.fp("targetAgent",T,G),LJ(T,B._40I),LJ(G,B._40I))},_22I:function(T){this._52I=T,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){return this._52I&&this._52I.get(0)!==this&&!this.getStyle(le)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var T=this._52I;return T&&!this.getStyle(le)&&1<T.size()&&this===T.get(0)},toggle:function(){this.beginTransaction();var T=this._52I,B=!this.s(le);T&&1<T.size()&&(T.each(function(T){T.s(le,B)}),T.getSiblings().each(function(B){B!==T&&B.each(function(T){T.fp("edgeGroup",ft,B)})})),this.endTransaction()},setStyle:function(T,B){var G;T!==be&&"edge.segments"!==T||(B=m1(G=B)?new $(G):G),bW.superClass.setStyle.call(this,T,B)},onStyleChanged:function(T,B,G){bW.superClass.onStyleChanged.apply(this,arguments),qJ[T]&&LJ(this._41I,this._40I)},getSerializableProperties:function(){var T=bW.superClass.getSerializableProperties.call(this);return S1(T,{source:1,target:1}),T}}),L.Group=function(){O1(KW,this)}),zW=(r4("Group",LW,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return ga},onChildAdded:function(T,B){KW.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(T,B){KW.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var T;this._54I||yw||(T=this.getChildrenRect())&&(this._53I=1,this.p(p4(this.s("group.position"),T,this.getSize())),delete this._53I)},getChildrenRect:function(){var B,G=this;return G.eachChild(function(T){r(T)&&(B=V2(B,G.getChildRect(T)))}),B},getChildRect:function(B){var G;return r(B)&&B.s(pe)&&(R1(B)&&B.isExpanded()&&B.eachChild(function(T){G=V2(G,B.getChildRect(T))}),!G&&B.getRect&&(G=B.getRect())),G},setPosition:function(T,B){this._54I||(B=2===arguments.length?{x:T,y:B}:T,yw||this._53I||(this._54I=1,x4(this._children,B.x-this._position.x,B.y-this._position.y),delete this._54I),KW.superClass.setPosition.call(this,B))},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(T){var B;this._57O!==T&&(B=this._57O,this._57O=T,this.fp("expanded",B,this._57O),this._fireInvalidateDeep(),this._8I())},_fireInvalidateDeep:function(){this.eachChild(function(T){R1(T)?T._fireInvalidateDeep():T.iv()})},_8I:function(){KW.superClass._8I.call(this),this.eachChild(function(T){r(T)&&T._8I()})},onStyleChanged:function(T,B,G){KW.superClass.onStyleChanged.apply(this,arguments),"group.position"===T&&this._81I()},getSerializableProperties:function(){var T=KW.superClass.getSerializableProperties.call(this);return T.expanded=1,T}}),L.Camera=function(){O1(zW,this),this.s({"shadow.cast":!1,"shadow.receive":!1,shape3d:"billboard"}),this._viewMatrix=new l.Matrix4,this._projectMatrix=new l.Matrix4,this.setScale3d(1,1,-1),this.setCullingMask("main,top"),this._projectMatrixDirty=!0}),nW=(zW.CubeDirectionParam=[1,0,0,0,-1,0,-1,0,0,0,-1,0,0,1,0,0,0,1,0,-1,0,0,0,-1,0,0,1,0,-1,0,0,0,-1,0,-1,0],r4("Camera",LW,{_22Q:function(){return Camera3dUI},attachRenderTarget:function(T){this._projectMatrixDirty=!0,this.renderTarget=T},detachRenderTarget:function(){this._projectMatrixDirty=!0,this.renderTarget=null},setCullingMask:function(T){T=T.split(","),this._cullingLayers=T,this._cullingMask=mJ(T,null,!0),this.gv&&(this._currentCullingMask=mJ(T,this.gv.getRenderLayerInfoMap(),!0))},isLayerVisible:function(T){var B,T=this.gv?(B=this.gv.getRenderLayerInfo(T),this._currentCullingMask):(B=vJ[T],this._cullingMask);return B&&EJ(T,B.mask)},isOrtho:function(){return"ortho"===this.s("camera.type")&&!this.isCube()},isCube:function(){return this.renderTarget&&this.renderTarget.isCube()},isPerspective:function(){return!this.isOrtho()},setViewMatrix:(A9=new L.Math.Matrix4,g9=new L.Math.Euler,function(T){T.isMatrix4?this._viewMatrix.copy(T):this._viewMatrix.fromArray(T),A9.getInverse(this._viewMatrix),this.p3(A9.getPosition().toArray()),g9.set(0,0,0,this.getRotationMode(),!0).setFromRotationMatrix(A9),this.r3([g9.x,g9.y,g9.z])}),getViewMatrix:function(T){var B=os(null,null,this.r3(),this.getRotationMode(),this.p3()),G=this._viewMatrix;return G.fromArray(B).getInverse(G),G.toArray(T)},setProjectMatrix:function(T){T.isMatrix4?this._projectMatrix.copy(T):this._projectMatrix.fromArray(T),T=this._projectMatrix.getElements(),this.isOrtho()?this.s({"camera.near":(T[14]+1)/T[10],"camera.far":(T[14]-1)/T[10],"camera.ortho.width":2/T[0]}):this.s({"camera.near":T[14]/(T[10]-1),"camera.far":T[14]/(T[10]+1),"camera.fovy":2*Math.atan(1/T[5]),"camera.aspect":T[5]/T[0]}),this._projectMatrixDirty=!1},onPropertyChanged:function(T){zW.superClass.onPropertyChanged.call(this,T),"s:camera.near"!==(T=T.property)&&"s:camera.far"!==T&&"s:camera.fovy"!==T&&"s:camera.aspect"!==T&&"s:camera.ortho.width"!==T||(this._projectMatrixDirty=!0)},getProjectMatrix:function(){var T,B,G,H,f,v,J,M=this;return M._projectMatrixDirty&&(T=M.gv,G=(B=M.isCube())?1:M.s("camera.aspect")||(T?T.getAspect():null)||vt.graph3dViewAspect,H=M.s("camera.near")||(T?T.getNear():null)||vt.graph3dViewNear,f=M.s("camera.far")||(T?T.getFar():null)||vt.graph3dViewFar,v=ys(),M.isOrtho()?(J=(M.s("camera.ortho.width")||(T?T.getOrthoWidth():null)||vt.graph3dViewOrthoWidth)/2,g$(v,-J,J,-(J/=G),J,H,f)):(J=B?Math.PI/2:M.s("camera.fovy")||(T?T.getFovy():null)||vt.graph3dViewFovy,A$(v,J,G,H,f)),M._projectMatrix.fromArray(v),M._projectMatrixDirty=!1),M._projectMatrix.toArray()},lookAt:function(T,B){var G=this.p3();return T.x?this.lookAtDirection([T.x-G[0],T.y-G[1],T.z-G[2]],B):this.lookAtDirection([T[0]-G[0],T[1]-G[1],T[2]-G[2]],B)},lookAtDirection:(m9=new L.Math.Matrix4,E9=new L.Math.Euler,Z9=new L.Math.Vector3,R9=new L.Math.Vector3,function(T,B){m9.lookAtDirection(Z9.copy(T).multiplyScalar(-1),B?R9.copy(B):R9.set(0,1,0)),E9.set(0,0,0,this.getRotationMode(),!0).setFromRotationMatrix(m9),this.r3([E9.x,E9.y,E9.z])}),updateAndRender:function(T){return T.syncRenderState(),T.updateScene(),this.render(T)},getSize:function(T){var B=this.renderTarget;return B?[B.width,B.height]:T?(B=T.getDevicePixelRatio(),[T.getWidth()*B,T.getHeight()*B]):[0,0]},getWidth:function(T){return this.getSize(T)[0]},getHeight:function(T){return this.getSize(T)[1]},getEye:function(){return this.p3()},getCenter:function(){var T=new Zt,B=this.getEuler();return T.set(0,0,-1).applyEuler(B),this.gv&&(B=new Zt(this.gv.getEye()),B=new Zt(this.gv.getCenter()).sub(B).length(),T.setLength(B)),[(B=this.p3())[0]+T.x,B[1]+T.y,B[2]+T.z]},getUp:function(){var T=new Zt,B=this.getEuler(),B=(T.set(0,0,-1).applyEuler(B),(new Zt).set(0,1,0).applyEuler(B)),G=(new Zt).set(0,1,0);return(Math.abs(T.cross(B).dot(G))<1e-5?G:B).toArray()},render:function(T){var B=this,G=T.getGL();if(!G)return!1;this._currentCullingMask=mJ(this._cullingLayers,T.getRenderLayerInfoMap(),!0);var H=B.renderTarget,f=B.getSize(T),v=((B.gv=T)._camera=B,T._frameState.renderState.glState.color.clear.slice(0)),J=(D$(G,B.s("camera.background")),T.getEye);if(T.getEye=function(){return B.p3()},T.syncRenderState(),B.isCube())for(var M=zW.CubeDirectionParam,Y=0;Y<6;Y++)H&&H.bind(G,Y),T._18Q=null,B.lookAtDirection([M[6*Y+0],M[6*Y+1],M[6*Y+2]],[M[6*Y+3],M[6*Y+4],M[6*Y+5]]),!1!==B.s("camera.clear")&&G.clear(16384),T.setViewport(G,0,0,f[0],f[1]),B.s("camera.onlySky")?T.renderSky():T.renderScene({renderAxis:B.s("camera.renderAxis"),renderGrid:B.s("camera.renderGrid"),renderEdit:B.s("camera.renderEdit"),renderShadowMap:B.s("camera.renderShadowMap"),renderReflector:!1}),T._18Q=null,H&&H.unbind(G);else H&&H.bind(G),T._18Q=null,!1!==B.s("camera.clear")&&G.clear(16384),T.overlappingBox.clear(),T.setViewport(G,0,0,f[0],f[1]),B.s("camera.onlySky")?T.renderSky():T.renderScene({renderAxis:B.s("camera.renderAxis"),renderGrid:B.s("camera.renderGrid"),renderEdit:B.s("camera.renderEdit"),renderShadowMap:B.s("camera.renderShadowMap")}),T._18Q=null,H&&H.unbind(G);return T.getEye=J,D$(G,v),T._camera=null,!(B.gv=null)}}),L.Block=function(){O1(nW,this),this.s({"shadow.cast":!1,"shadow.receive":!1})}),G=(r4("Block",LW,{_icon:"block_icon",_clickThroughEnabled:!1,_syncSize:!0,_scaleMode:"2d",ms_ac:["clickThroughEnabled","syncSize","scaleMode"],getUIClass:function(){return Fa},_22Q:function(){return eZ},onChildAdded:function(T,B){nW.superClass.onChildAdded.apply(this,arguments),this.updateFromChildren()},onChildRemoved:function(T,B){nW.superClass.onChildRemoved.apply(this,arguments),this.updateFromChildren()},_getBoundingBox:(w9=new K,function(T,B){if(!(T=T instanceof LW?[T]:T)||0===T.length)return ft;var B=[],G=(function(T,H){var f=(new K).makeRotationFromEuler(this.getEuler()).setPosition((new Zt).fromArray(this.p3()));f.getInverse(f),T.forEach(function(T){var B,G;r(T)&&(B=H,G=f,w9.fromArray(hs(T)),T=T.getAnchor3d(),B.push((new Zt).set(0-T.x,0-T.y,0-T.z).applyMatrix4(w9).applyMatrix4(G)),B.push((new Zt).set(0-T.x,0-T.y,1-T.z).applyMatrix4(w9).applyMatrix4(G)),B.push((new Zt).set(0-T.x,1-T.y,0-T.z).applyMatrix4(w9).applyMatrix4(G)),B.push((new Zt).set(0-T.x,1-T.y,1-T.z).applyMatrix4(w9).applyMatrix4(G)),B.push((new Zt).set(1-T.x,0-T.y,0-T.z).applyMatrix4(w9).applyMatrix4(G)),B.push((new Zt).set(1-T.x,0-T.y,1-T.z).applyMatrix4(w9).applyMatrix4(G)),B.push((new Zt).set(1-T.x,1-T.y,0-T.z).applyMatrix4(w9).applyMatrix4(G)),B.push((new Zt).set(1-T.x,1-T.y,1-T.z).applyMatrix4(w9).applyMatrix4(G)))})}.call(this,T,B),[1/0,1/0,1/0]),H=[-1/0,-1/0,-1/0];return B.forEach(function(T){G[0]=Math.min(T.x,G[0]),G[1]=Math.min(T.y,G[1]),G[2]=Math.min(T.z,G[2]),H[0]=Math.max(T.x,H[0]),H[1]=Math.max(T.y,H[1]),H[2]=Math.max(T.z,H[2])}),{min:G,max:H}}),updateFromChildren:function(){var T,B,G,H,f,v,J,M,Y;yw||this._updatingToChildren||!this._syncSize||0===this.size()||this._freezeSyncFromChildren||(G=this._getBoundingBox(this.toChildren(r)))&&(this._updatingFromChildren=1,T=(new Zt).fromArray(this.getScale3d()),B=(new Zt).fromArray(G.min),G=(new Zt).fromArray(G.max),J=vt.blockMinSize,Y=new Zt,0===(G=G.clone().sub(B)).x&&Y.setX(.5),0===G.y&&Y.setY(.5),0===G.z&&Y.setZ(.5),H=this._width==ft||-1===this._width,f=new Zt(this.getAnchor3d()),v=T.clone().multiply((new Zt).fromArray(this.s3())),0===(M=G.clone()).x&&M.setX(J),0===M.y&&M.setY(J),0===M.z&&M.setZ(J),v=(J=f.clone().multiply(v)).clone().multiplyScalar(-1).sub(B).divide(M).add(J.divide(M)).add(Y),J=this.s("keepPosition"),H||this._anchorChanged||this._scaleChanged||!J?(M=(f=!H&&J?v:f).clone().multiply(G).add(B).applyEuler(this.getEuler()).add((new Zt).fromArray(this.p3())),this.p3([M.x,M.y,M.z])):this.setAnchor3d(v.x,v.y,v.z),Y=new Zt(1,1,1).divide(T).multiply(G),this.s3(Math.abs(Y.x),Math.abs(Y.y),Math.abs(Y.z)),delete this._updatingFromChildren)},setPosition:function(T,B){this._updatingToChildren||(B=2===arguments.length?{x:T,y:B}:T,yw||this._updatingFromChildren||(this._updatingToChildren=1,x4(this._children,B.x-this._position.x,B.y-this._position.y),delete this._updatingToChildren),nW.superClass.setPosition.call(this,B))},setSize3d:function(){this.beginTransaction(),nW.superClass.setSize3d.apply(this,arguments),this.endTransaction()},setTall:function(T){var B;this._updatingToChildren||(this.beginTransaction(),(T=Gt(T,vt.blockMinSize))!==(B=this.getTall())&&nW.superClass.setTall.call(this,T),yw||this._updatingFromChildren||(this._updatingToChildren=1,this._adjustChildTallOrScale(T/B,"size"),delete this._updatingToChildren,this.updateFromChildren()),this.endTransaction())},setWidth:function(T){return this.setSize(T,this.getHeight())},setHeight:function(T){return this.setSize(this.getWidth(),T)},setSize:function(T,B){var G,H,f=vt.blockMinSize;T=Gt(T,f),B=Gt(B,f),(f=this)._updatingToChildren||(2!==arguments.length&&(B=T.height,T=T.width),this.beginTransaction(),G=f.getWidth(),H=f.getHeight(),T!==G&&nW.superClass.setWidth.call(f,T),B!==H&&nW.superClass.setHeight.call(f,B),yw||f._updatingFromChildren||(f._updatingToChildren=1,f._adjustChildScaleOrSize(T/G,B/H,"size"),delete f._updatingToChildren,f.updateFromChildren()),this.endTransaction())},_adjustChildScaleOrSize:function(m,E,Z){var R,A;this._syncSize&&(R=this.getPosition(),A=this.getRotation(),this.eachChild(function(T){var B,G,H,f,v,J,M,Y;r(T)&&(f=T.getPosition(),Y=T.getRotation(),B=T.getWidth(),G=T.getHeight(),J=(H=T.getScale()).x*B,M=H.y*G,0!=J&&0!=M&&(m*E<0&&T.setRotation(-1*Y),(f=new L9(Y,f.x,f.y,J,M)).translate(-R.x,-R.y),f.rotate(-A),Y=ct(f.b*Math.sign(J),f.a*Math.sign(J)),f.scale(m,E),M=Mt(Y),Y=Math.abs(M)<.001?(J=Yt(Y),v=f.b/J,-f.c/J):(v=f.a/M,f.d/M),"scale"===Z?T.setScale(v/B,Y/G):"size"===Z&&(J=v/H.x,M=Y/H.y,T.setScale(i1(v)*Math.abs(H.x),i1(Y)*Math.abs(H.y)),T instanceof L.Shape?(T.setWidthForce(Math.max(Math.abs(J),1e-5)),T.setHeightForce(Math.max(Math.abs(M),1e-5))):T.setSize(Math.max(.01,Math.abs(J)),Math.max(.01,Math.abs(M)))),f.rotate(A),f.translate(R.x,R.y),T.setPosition(f.tx,f.ty)))}))},_calcChangeFactor:function(T,B,G,H){var T=it(T),f=(G=it(G))<T?T/G:G/T;return T=it(B),G=it(H),Gt(f,G<T?T/G:G/T)},setElevation:function(T){this._updatingToChildren||0!=(T-=this.getElevation())&&(yw||this._updatingFromChildren||(this._updatingToChildren=1,x4(this._children,0,T,0),delete this._updatingToChildren),nW.superClass.setElevation.apply(this,arguments))},setScaleTall:function(T){var B=this;if(!B._updatingToChildren){var G,H=B.getScaleTall();if(it(T)<.01&&(T=.01*(i1(T)||i1(H))),"3d"===B._scaleMode)return G=B.getScale(),void B.setScale3d(G.x,T,G.y);nW.superClass.setScaleTall.call(B,T),yw||B._updatingFromChildren||(B._updatingToChildren=1,B._adjustChildTallOrScale(T/H,"scale"),delete B._updatingToChildren,B._scaleChanged=1,this.updateFromChildren(),delete B._scaleChanged)}},_adjustChildTallOrScale:function(G,H){var f;this._syncSize&&(f=this.getElevation(),this.eachChild(function(T){var B;r(T)&&("size"===H?(B=T.getTall(),G<0&&T.setScaleTall(-1*T.getScaleTall()),T.setTall(Math.max(.01,Math.abs(B*G)))):(B=T.getScaleTall(),T.setScaleTall(B*G)),T.setElevation(f+(T.getElevation()-f)*G))}))},setAnchor3d:function(){var T;if(!this._updatingToChildren)return this.beginTransaction(),(T=nW.superClass.setAnchor3d.apply(this,arguments))&&!yw&&!this._updatingFromChildren&&this._syncSize&&(this._anchorChanged=1,this.updateFromChildren(),delete this._anchorChanged),this.endTransaction(),T},setAnchor:function(T,B,G){var H=this;if(!H._updatingToChildren){var f=H.getAnchor(),v=nW.superClass.setAnchor.apply(H,arguments);if(yw||H._updatingFromChildren||!H._syncSize)return v;H._updatingToChildren=1;var J=H.getAnchor(),M=(Y=H.getSize()).width*(f.x-J.x),Y=Y.height*(f.y-J.y),f=(new K).compose(new Zt,this.getQuaternion(),new Zt(this.getScale3d())),m=new Zt(M,0,Y).applyMatrix4(f);return H.eachChild(function(T){var B;r(T)&&(B=new Zt(T.p3()),T.p3(B.add(m).toArray()))}),delete H._updatingToChildren,v}},setAnchorElevation:function(T){var B=this;if(!B._updatingToChildren){var G=B.getAnchorElevation(),H=nW.superClass.setAnchorElevation.apply(B,arguments);if(yw||B._updatingFromChildren||!B._syncSize)return H;B._updatingToChildren=1;var f=B.getAnchorElevation(),G=B.getTall()*(G-f),f=(new K).compose(new Zt,this.getQuaternion(),new Zt(this.getScale3d())),v=new Zt(0,G,0).applyMatrix4(f);return B.eachChild(function(T){var B;r(T)&&(B=new Zt(T.p3()),T.p3(B.add(v).toArray()))}),delete B._updatingToChildren,H}},setRotation:function(T){this._updateChildrenRotation3d("rotation",T)},setRotationX:function(T){this._updateChildrenRotation3d("rotationX",T)},setRotationZ:function(T){this._updateChildrenRotation3d("rotationZ",T)},setRotation3d:function(T,B,G){var H,f,v=this;v._updatingToChildren||(H=v.r3(),nW.superClass.setRotation3d.apply(v,arguments),f=v.r3(),yw||v._updatingFromChildren||(v._updatingToChildren=1,v.eachChild(function(T){r(T)&&T.syncRotation3d(v,f,H)}),delete v._updatingToChildren))},_updateChildrenRotation3d:function(T,B){var G;this._updatingToChildren||(G=this[H1(T)](),nW.superClass[f1(T)].call(this,B),yw||this._updatingFromChildren||this._updateRotationToChildren(T,B-G))},_updateRotationToChildren:function(B,G){var H=this;H._updatingToChildren=1,H.eachChild(function(T){r(T)&&T._11Q(H,B,G)}),delete H._updatingToChildren},setScale:function(T,B){var G,H=this;H._updatingToChildren||(null==B&&(B=T.y,T=T.x),G=H.getScale(),it(T)<.01&&(T=.01*(i1(T)||i1(G.x))),it(B)<.01&&(B=.01*(i1(B)||i1(G.y))),"3d"===H._scaleMode?H.setScale3d(T,H.getScaleTall(),B):(nW.superClass.setScale.call(H,T,B),yw||H._updatingFromChildren||(H._updatingToChildren=1,T/=G.x,B/=G.y,H._adjustChildScaleOrSize(T,B,"scale"),delete H._updatingToChildren,H._scaleChanged=1,H.updateFromChildren(),delete H._scaleChanged)))},onPropertyChanged:function(T){nW.superClass.onPropertyChanged.call(this,T),"s:3d.visible"===T.property&&this._invalidateChildrenBatch()},_invalidateChildrenBatch:function(){this.eachChild(function(T){(T.s("batch")||T.s("wf.geometry")||T.s("wf.visible"))&&T.iv(),T instanceof nW&&T._invalidateChildrenBatch()})},getSerializableProperties:function(){var T=nW.superClass.getSerializableProperties.call(this);return T.clickThroughEnabled=1,T.syncSize=1,T.scaleMode=1,T},setScale3d:(F9=new Zt,W9=new Zt,s9=new Zt,S9=new K,y9=new j9,x9=new Zt,function(T,B,G){var H,f,v=this,B="number"==typeof T?{x:T,y:B,z:G}:T.length?{x:T[0],y:T[1],z:T[2]}:T;"3d"!==v._scaleMode?nW.superClass.setScale3d.apply(v,arguments):v._syncSize&&0!==v.size()&&((H=v.getMatrix4()).getInverse(H),nW.superClass.setScaleTall.call(v,B.y),nW.superClass.setScale.call(v,B.x,B.z),f=v.getMatrix4(),yw||v._updatingFromChildren||(v._updatingToChildren=1,v.eachChild(function(T){var B;r(T)&&(W9.fromArray(T.s3()),T instanceof L.Polyline?(B=T.getThickness(),W9.x=W9.x||B,W9.y=W9.y||B,W9.z=W9.z||B,x9.copy(T.getScale3d()).multiplyScalar(B),T.getQuaternion(y9),F9.copy(T.p3()),s9.copy(T.getFinalScale3d()),s9.x=s9.x||x9.x,s9.y=s9.y||x9.y,s9.z=s9.z||x9.z,S9.compose(F9,y9,s9)):T.getMatrix4(S9),S9.premultiply(H).premultiply(f),S9.decompose(F9,y9,s9),s9.divide(W9),T.setQuaternion(y9),T.p3(F9.toArray()),T.setScale3d(s9.toArray()))}),delete v._updatingToChildren,v._scaleChanged=1,v.updateFromChildren(),delete v._scaleChanged))})}),L.Grid=function(){O1(L.Grid,this)}),$W=(r4("Grid",LW,{IRotatable:!1,_icon:"grid_icon",_image:ft,getUIClass:function(){return Sa},setRotation:function(){},getCellRect:function(T,B){var G=this.s("grid.row.count"),H=this.s("grid.column.count");if(G<=0||H<=0||T<0||G<=T||B<0||H<=B)return ft;var f,v,J,M=this.getRect(),Y=this.s("grid.row.percents"),m=this.s("grid.column.percents");if(eJ(M,this,"grid.border",-1),Y&&Y._as&&(Y=Y._as),m&&m._as&&(m=m._as),Y&&Y.length===G){for(f=J=0;f<T;f++)J+=M.height*Y[f];M.y+=J,M.height=M.height*Y[T]}else M.height=M.height/G,M.y+=M.height*T;if(m&&m.length===H){for(f=v=0;f<B;f++)v+=M.width*m[f];M.x+=v,M.width=M.width*m[B]}else M.width=M.width/H,M.x+=M.width*B;return Bs(M,-this.s("grid.gap")),M}}),L.Text=function(){O1($W,this),this.setSize(100,50),this.s("text","TEXT")}),VW=(r4("Text",LW,{_icon:"text_icon",_image:"__text__",getUIClass:function(){return ya},setWidth:function(T){$W.superClass.setWidth.call(this,T=T||.001)},setHeight:function(T){$W.superClass.setHeight.call(this,T=T||.001)},toLabel:function(){return this._displayName||this._name||this.s("text")}}),zt("__text__",{width:{value:100,isSafeFunc:!0,func:function(T){return T?T._width:100}},height:{value:50,isSafeFunc:!0,func:function(T){return T?T._height:50}},comps:[{type:"text",relative:!0,rect:[0,0,1,1],text:{func:"style@text"},align:{func:"style@text.align"},vAlign:{func:"style@text.vAlign"},color:{func:"style@text.color"},font:{func:"style@text.font"},shadow:{func:"style@text.shadow"},shadowColor:{func:"style@text.shadow.color"},shadowBlur:{func:"style@text.shadow.blur"},shadowOffsetX:{func:"style@text.shadow.offset.x"},shadowOffsetY:{func:"style@text.shadow.offset.y"},scaleX:{func:"style@text.scale.x"},scaleY:{func:"style@text.scale.y"},gradient:{func:"style@text.gradient"},gradientColor:{func:"style@text.gradient.color"},gradientPack:{func:"style@text.gradient.pack"},decoration:{func:"style@text.decoration"},vertical:{func:"style@text.vertical"},verticalGap:{func:"style@text.vertical.gap"},wrap:{func:"style@text.wrap"},letterGap:{func:"style@text.letter.gap"},borderWidth:{func:"style@text.border.width"},borderColor:{func:"style@text.border.color"}}]}),L.Shape=function(){O1(VW,this),this._59O=new $}),PW=(VW.__de__=B,r4("Shape",LW,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return Wa},_22Q:function(){return tZ},getLength:function(T){return N1($0(this._59O,this._58O,T,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var T=this._58O;return T&&new $(T._as.slice(0))},setSegments:function(T){var B=this._58O;T=T?m1(T)?new $(T.slice(0)):new $(T._as.slice(0)):null,(B&&T&&B._as.join(",")!==T._as.join(",")||B!==T)&&(this._58O=T,this.fp("segments",B,T))},getPoints:function(){return this._59O},toPoints:function(){var T=this._59O;return new $(T._as.slice(0))},getPointsMatrix2d:function(){var T=new l.Matrix2d,B=this.getPosition(),G=this.getScale(),H=this.getRotation();return T.translate(-B.x,-B.y).scale(G.x,G.y).rotate(H).translate(B.x,B.y),T},getPointsMatrix3d:function(){var T=new l.Matrix4,B=T.getElements(),G=this.p3(),H=(m$(B,G),lW(B,this.getFinalRotation3d(),this.getRotationMode()),this.getScale3d()),f=this._dynamicScale3d;return f&&(H[0]*=f[0],H[1]*=f[1],H[2]*=f[2]),E$(B,H),m$(B,ss(G)),T},setPoints:function(T,B){var G,H,f=this,v=f._59O;T=T?m1(T)?new $(T.slice(0)):new $(T._as.slice(0)):new $,B&&(G=f.getPosition(),H=new L9(f.getRotation(),0,0,f.getScale().x,f.getScale().y)),(v&&T&&v._as.join(",")!==T._as.join(",")||v!==T)&&(f._59O=T,f.fs(),f.fp("points",v,T)),B&&(T=(v=f.getPosition()).x-G.x,B=v.y-G.y,G=H.tf(T,B),f.setPosition(v.x-T+G.x,v.y-B+G.y))},setPoints3d:function(T,B){var G=new Zt(this.p3()),H=this.getPointsMatrix3d();H.setPosition(new Zt),kW.superClass.setPoints.call(this,T),B&&(T=new Zt(this.p3()).clone().sub(G).applyMatrix4(H),G.add(T),this.p3(G.x,G.y,G.z))},addPoint:function(T,B,G){var H=this.toPoints();H.add(T,B),this.setPoints(H,G)},setPoint:function(T,B,G){var H=this.toPoints();H.set(T,B),this.setPoints(H,G)},removePointAt:function(T){var B=this.toPoints();B.removeAt(T),this.setPoints(B)},setWidthForce:function(T){var B,G,H,f,v=this;v._55I||yw||!v.getWidth()||(v._55I=1,B=v._position.x,G=T/v.getWidth(),H=v.toPoints(),f=new $,1!=G&&(H.each(function(T){f.add({x:(T.x-B)*G+B,y:T.y,e:T.e})}),v.setPoints(f),z0(v,[G,0,0,1,B*(1-G),0]),v.fs()),delete v._55I),VW.superClass.setWidth.call(v,T)},setWidth:function(T){return this.setWidthForce(T<Rs?Rs:T)},setHeightForce:function(T){var B,G,H,f,v=this;v._55I||yw||!v.getHeight()||(v._55I=1,B=v._position.y,G=T/v.getHeight(),H=v.toPoints(),f=new $,1!=G&&(H.each(function(T){f.add({x:T.x,y:(T.y-B)*G+B,e:T.e})}),v.setPoints(f),z0(v,[1,0,0,G,0,B*(1-G)]),v.fs()),delete v._55I),VW.superClass.setHeight.call(v,T)},setHeight:function(T){return this.setHeightForce(T<Rs?Rs:T)},setAnchorElevation:function(T){this._55I=!0;var B,G=this._updatingAnchor3d,T=(yw||G||(B=this.getAnchorElevation(),0!=(B=this.getTall()*(B-T))&&this.shiftPointsElevation(B)),VW.superClass.setAnchorElevation.apply(this,arguments));return G||delete this._55I,T},getShapeElevation:function(T){return this._54O-(this.getTall()||0)*(this._anchorElevation-.5)},setAnchor3d:function(T,B,G,H){var f,v,J,M,Y,m=this,T=("number"==typeof T?f={x:T,y:B,z:G}:(f=T.length?{x:T[0],y:T[1],z:T[2]}:T,H=B),m._55I=!0,m._updatingAnchor3d=!0,m.beginTransaction(),yw||(G=m.getAnchor3d(),T=m.getSize(),B=m.getTall(),v=T.width*(G.x-f.x),J=T.height*(G.z-f.z),M=B*(G.y-f.y),H||m.shiftPoints(v,J,M),Y=m.p3()),VW.superClass.setAnchor3d.apply(m,arguments));return yw||H&&(B=m.p3(),m.shiftPoints(B[0]-Y[0]+v,B[2]-Y[2]+J,B[1]-Y[1]+M)),m.endTransaction(),delete m._updatingAnchor3d,delete m._55I,T},setAnchor:function(T,B,G){var H,f,v,J=this,M=(J._55I=!0,J._updatingAnchor3d),Y=!yw&&!M,B=(Y&&("number"==typeof T?f={x:T,y:B}:(f=T.length?{x:T[0],y:T[1]}:T,G=B),T=J.getAnchor(),H=(B=J.getSize()).width*(T.x-f.x),f=B.height*(T.y-f.y),G||J.shiftPoints(H,f),v=J.getPosition()),VW.superClass.setAnchor.apply(J,arguments));return Y&&(T=J.getPosition(),G&&J.shiftPoints(T.x-v.x+H,T.y-v.y+f)),M||delete J._55I,B},shiftPoints:function(G,H,f){var v,T,J;(G||H||f)&&(v=this.getElevation()||0,T=this.toPoints(),J=new $,T.each(function(T){var B=T.e;J.add({x:T.x+G,y:T.y+H,e:B=f?(B==ft?v:B)+f:B})}),this.setPoints(J),this.fs())},shiftPointsElevation:function(T){return this.shiftPoints(0,0,T)},setPosition:function(T,B){var G=this;if(!G._28Q){if(G._28Q=1,!G._55I&&!yw){if(T=(B=2===arguments.length?{x:T,y:B}:T).x-G._position.x,B=B.y-G._position.y,0==T&&0==B)return void delete G._28Q;G._55I=1,G.shiftPoints(T,B),z0(G,[1,0,0,1,T,B]),delete G._55I}VW.superClass.setPosition.apply(G,arguments),delete G._28Q}},fs:function(){this.fireShapeChange()},_70I:function(){if(2!==this._59O.size())return!1;var T=this._58O;return!T||2===T.size()&&1===T.get(0)&&2===T.get(1)},fireShapeChange:function(){var T;this._55I||yw||(T=$2(this._59O))&&(this._55I=1,this.setRect(T),delete this._55I),this.fp(se,!1,!0)},getSerializableProperties:function(){var T=VW.superClass.getSerializableProperties.call(this);return T.segments=1,T.points=1,T.thickness=1,T.closePath=1,T}}),L.Points=function(){O1(PW,this)}),kW=(r4("Points",LW,{_59O:[],_colors:[],_sizes:[],_uvoffsets:[],_22Q:function(){return dZ},getPoints:function(){return this._59O},setPoints:function(T){var B=this._59O,G=(T=T?T.slice(0):[])[0];if(v1(G)){var H=T;T=[];for(var f=0,v=H.length;f<v;f+=3)T.push({x:H[f],e:H[f+1],y:H[f+2]})}this._59O=T,this._pointsDirty=!0,this.fp("points",B,this._59O)},setPoint:function(T,B){var G=this._59O.slice(0);G[T]=B,this.setPoints(G)},addPoint:function(T){this.setPoint(this._59O.length,T)},getColors:function(){return this._colors},setColors:function(T){var B=this._colors;T=T?T.slice(0):[],this._colors=T,this._colorsDirty=!0,this.fp("colors",B,T)},setPointColor:function(T,B){var G=this._colors.slice(0);G[T]=B,this.setColors(G)},getSizes:function(){return this._sizes},setSizes:function(T){var B=this._sizes;T=T?T.slice(0):[],this._sizes=T,this._sizesDirty=!0,this.fp("sizes",B,this._sizes)},setPointSize:function(T,B){var G=this._sizes.slice(0);G[T]=B,this.setSizes(G)},getUvoffsets:function(){return this._uvoffsets},setUvoffsets:function(T){var B=this._uvoffsets;T=T?T.slice(0):[],this._uvoffsets=T,this._offsetsDirty=!0,this.fp("uvoffsets",B,this._uvoffsets)},setPointUvoffset:function(T,B,G){var H;"object"==typeof B?(H=B[0],G=B[1]):H=B,(B=this._uvoffsets.slice(0))[2*T+0]=H,B[2*T+1]=G,this.setUvoffsets(B)},getPointInfo:function(T){if(!(B=this.getPoints())||B[T]==ft)return ft;var B=[(B=B[T]).x,B.e,B.y],G=this.mat||hs(this),H=[B[0],B[1],B[2]];return _s(H,G),G=this.getColors()[T]||this.s("points.color"),{size:(T=this.getSizes()[T])==ft?this.s("points.size"):T,color:G,local:B,world:H}},getSerializableProperties:function(){var T=PW.superClass.getSerializableProperties.call(this);return T.points=1,T.colors=1,T.sizes=1,T.uvoffsets=1,T},onPropertyChanged:function(T){PW.superClass.onPropertyChanged.call(this,T),"s:points.color"===(T=T.property)?this._colorsDirty=!0:"s:points.size"===T?this._sizesDirty=!0:"s:points.model"===T&&(this._modelDirty=!0)},getWidth:function(){if(0<=this._width)return this._width;var T=this.getStyle("points.model");return(T=T&&lE(T))&&T.rawS3?T.rawS3[0]:1},getHeight:function(){if(0<=this._height)return this._height;var T=this.getStyle("points.model");return(T=T&&lE(T))&&T.rawS3?T.rawS3[2]:1},getTall:function(){if(0<=this._tall)return this._tall;var T=this.getStyle("points.model");return(T=T&&lE(T))&&T.rawS3?T.rawS3[1]:1}}),L.Polyline=function(){O1(kW,this),this.s({"shape.background":null,"shape.border.width":2}),this._geometryVersion=0}),CW=(r4("Polyline",VW,{_icon:"polyline_icon",_22Q:function(){return QZ},getUIClass:function(){return sa},setClosePath:function(T){},setTall:function(T){var B,G,H,f,v=this;v.beginTransaction(),v._55I||v._24Q||yw||!v.getTall()||(v._24Q=1,B=v._54O,1!=(G=T/v.getTall())&&(H=v.toPoints(),f=new $,H.each(function(T){f.add({x:T.x,y:T.y,e:T.e==ft?T.e:(T.e-B)*G+B})}),v.setPoints(f),v.fs()),delete v._24Q),kW.superClass.setTall.call(v,T),v.endTransaction()},setElevation:function(T){this.beginTransaction(),this._55I||this._24Q||yw||(this._24Q=1,0!=(T-=this._54O)&&this.shiftPointsElevation(T),delete this._24Q),kW.superClass.setElevation.apply(this,arguments),this.endTransaction()},fireShapeChange:function(){var T=this,B=T._59O;if(!T._55I&&!T._24Q&&!yw){var G=B.size();if(G){for(var H=1,f=B.get(0),v=T._54O,J=(f.e==ft&&(f.e=v),f.e),M=0;H<G;H++){(f=B.get(H)).e==ft&&(f.e=v);var Y=Jt(J,f.e),m=Gt(J+M,f.e),J=Y,M=m-Y}T._24Q=1,T.setTall(M),T.setElevation(J+M*T._anchorElevation),delete T._24Q}}kW.superClass.fireShapeChange.apply(T,arguments)},onPropertyChanged:(O9={},["points","segments","thickness","position","elevation","rotation","rotationX","rotationZ","rotationMode","scale","scaleTall","s:shape.border.color","s:shape.border.gradient.color","s:shape.border.pattern","s:shape.dash","s:shape.dash.color","s:shape.dash.pattern","s:shape.dash.offset","s:3d.clip.direction","s:repeat.uv.length","s:rotate.vs.length","s:rotate.uv.length","s:body.color","s:shape3d","s:shape3d.visible","s:shape3d.image","s:shape3d.smooth","s:shape3d.resolution","s:shape3d.color","s:shape3d.blend","s:shape3d.side","s:shape3d.start.angle","s:shape3d.sweep.angle","s:shape3d.top.cap","s:shape3d.top.image","s:shape3d.top.visible","s:shape3d.top.color","s:shape3d.bottom.cap","s:shape3d.bottom.image","s:shape3d.bottom.visible","s:shape3d.bottom.color","s:shape3d.uv.union"].forEach(function(T){O9[T]=!0}),function(T){kW.superClass.onPropertyChanged.call(this,T),O9[T.property]&&this._geometryVersion++})}),L.SubGraph=function(){O1(CW,this)}),aW=(r4("SubGraph",LW,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){CW.superClass._8I.call(this),this.eachChild(function(T){r(T)&&T._8I()})}}),vt.loadingRefGraph=0,L.RefGraph=function(){O1(aW,this)}),Ta=(r4("RefGraph",nW,{_icon:"refGraph_icon",getRef:function(){return this._ref},setRef:function(T){var B=this._ref;this._ref=T,this.fp("ref",B,T),this.updateRef()},_21I:function(T){aW.superClass._21I.apply(this,arguments),this.updateRef()},updateRef:function(){var G,B,H=this;vt.loadingRefGraph++,H.clearChildrenFromDataModel(),vt.loadingRefGraph--,H._ref&&H._dataModel&&(H._xhrLoadHandler&&(H._xhrLoadHandler.cancel=!0),G=yw,(B=H._xhrLoadHandler=function(T){var B;T&&H._dataModel&&(vt.loadingRefGraph++,B=H._pendingUpdateInfo={needToRestore:G},G&&(B.p3=H.p3(),B.s3=H.s3(),B.r3=H.r3(),B.anchor3d=H.getAnchor3d(),B.scale3d=H.getScale3d()),H.r3(0,0,0),H.setScale3d(1,1,1),H.setAnchor3d(.5,.5,.5),H.p3(0,0,0),B=vt.parse(T),(T=H._dataModel.deserialize(B,H,{justDatas:!0})).each(function(T){T._refGraph=H}),H.checkPendingUpdateInfo(),vt.loadingRefGraph--,vt.handleRefGraphLoaded(H,T,B))}).xhrLoadCalled=!1,vt.load(H._ref,function(T){B.cancel||(B.xhrLoadCalled?B(T):I2(function(){B(T)}))}),B.xhrLoadCalled=!0)},checkPendingUpdateInfo:function(){var B,T=this,G=T._pendingUpdateInfo;G?(B=!0,this.eachChild(function(T){(T._pendingCheckImageJSON||T._pendingUpdateInfo)&&(B=!1)}),B&&(vt.loadingRefGraph++,T._pendingUpdateInfo=null,T.updateFromChildren(),G.needToRestore&&(T.setAnchor3d(G.anchor3d),T.setScale3d(G.scale3d),T.r3(G.r3),T.p3(G.p3)),this.getParent()instanceof aW&&this.getParent().checkPendingUpdateInfo(),T.onPendingUpdated&&T.onPendingUpdated(),vt.loadingRefGraph--)):T.onPendingUpdated&&(vt.loadingRefGraph++,T.onPendingUpdated(),vt.loadingRefGraph--)},getSerializableProperties:function(){var T=aW.superClass.getSerializableProperties.call(this);return T.ref=1,T}}),L.EdgeGroup=function(T,B){this._70O=T,this._siblings=B;for(var G,H=0,f=T.size(),v=Ft[le];H<f;H++)if((G=T.get(H).getOwnStyle(le))!=ft){v=G;break}for(v==ft&&(v=!0),(B=(B=vt.edgeGroupAgentFunc)&&B(T))&&B!==T.get(0)&&(T.remove(B),T.add(B,0)),H=0;H<f;H++)T.get(H).s(le,v)},r4("EdgeGroup",N,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(T){return this._70O.get(T)},indexOf:function(T){return this._70O.indexOf(T)},each:function(T,B){this._70O.each(T,B)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(B,G){this._siblings.each(function(T){T._70O.each(B,G)})}}),S1(vt,{setConnectAction:function(T,B,G){var H=ow[T]={type:T,action:B};if(G)for(var f in G)H[f]=G[f]},getConnectAction:function(T,B){if(!B){if(!T)return null;B=T.getCurrentConnectActionType()}return ow[B]},doConnectAction:function(B,T,G,H){if(H=H||B.getCurrentConnectActionType(),!(H=ow[H]))return!1;var f=H.action;return!!f&&(T instanceof V.Group?B.sm().getSelection().each(function(T){f.call(null,B,T,G)}):f.call(null,B,T,G),!0)},doDeleteConnectionAction:function(B,T,G){if(G=G||B.getCurrentConnectActionType(),!(G=ow[G])||!G.delete)return!1;var H=G.delete.action;return!!H&&(T instanceof V.Group?B.sm().getSelection().each(function(T){H.call(null,B,T)}):H.call(null,B,T),!0)}}),L.JSONSerializer=function(T,B){this.dm=this._dataModel=T,vt.forceHierarchicalSerialization?this._hierarchical=!0:this._hierarchical=B==ft?T.isHierarchicalRendering():B}),Ba=(r4("JSONSerializer",N,{ms_ac:["hierarchical"],serialize:function(T){return vt.stringify(this.toJSON(),T)},toJSON:function(){var T,B,G=this,H=G.dm,f=H.getRoots(),v=G.json={v:vt.getVersion(),p:{},a:{},d:[]},J=H.getSerializableAttrs();for(B in(T=H.getInit())&&(v.init=T),(T=H.getName())&&(v.p.name=T),(T=H.getBackground())&&(v.p.background=T),(T=H.getLayers())&&(v.p.layers=T),(T=H.getEnvmap())&&(v.p.envmap=T),(T=H.getEnvmapType())&&(v.p.envmapType=T),v.p.autoAdjustIndex=H.isAutoAdjustIndex(),v.p.hierarchicalRendering=H.isHierarchicalRendering(),J){var M=H.a(B);M!==Ht&&G[NB](B,M,v.a)}return _1(v.a)&&delete v.a,G._hierarchical?f.each(G.serializeData,this):H.each(function(T){G.serializeData(T)}),H.fireSerializeEvent({type:"serialize",json:v}),H.getPostProcessingData()&&(v.p.postProcessingData=H.getPostProcessingData()),v},isSerializable:function(T){return!0},getProperties:function(T){return T.getSerializableProperties()},getStyles:function(T){return T.getSerializableStyles()},getAttrs:function(T){return T.getSerializableAttrs()},serializeData:function(T){var B=this;if(B.isSerializable(T)&&!T._refGraph){var G,H,f,v,J,M=new(e2(T.getClassName())||T.getClass()),Y={c:T.getClassName(),i:T.getId(),p:{},s:{},a:{}};for(G in B.json.d.push(Y),B.getProperties(T))/^_/.test(G)?(J=T[G],"_width"!==G&&"_height"!==G||J!=ft&&-1!==J||(v==Ht&&(f=(T.s("layout.h")||T.s("layout.v"))&&T.getHost()||T instanceof L.Node&&(f=T.getParent())&&f instanceof L.Block||T.s("fullscreen"),v=T.hasInheritedSize()),f&&v&&(J=T[G]="_width"===G?T.getWidth():T.getHeight())),J!==M[G]&&B[NB](G.substr(1),J,Y.p)):T[H=H1(G)]&&(J=T[H]())!==M[H]()&&B[NB](G,J,Y.p);for(G in B.getStyles(T))(J=T.s(G))!==M.s(G)&&B[NB](G,J,Y.s);for(G in B.getAttrs(T))(J=T.a(G))!==M.a(G)&&B[NB](G,J,Y.a);_1(Y.p)&&delete Y.p,_1(Y.s)&&delete Y.s,_1(Y.a)&&delete Y.a}B._hierarchical&&T.getChildren().each(B.serializeData,B)},serializeValue:function(T,B,G){E1(B)?B={__a:B._as}:B instanceof WJ?B={__i:B.getId()}:B instanceof sJ&&(B={__dm:B.serialize(0)}),G[T]=B},deserialize:function(T,B,G){var H=this;if(!Et(T)||!/.json$/.test(T))return H.deserializeImpl(T,B,G);vt.xhrLoad(T,function(T){H.deserializeImpl(T,B,G)})},deserializeImpl:function(T,B,G){var H=this.dm,f=(H.setDeserializing(!0),G=J1(G)?{setId:G}:Y1(G)?{finishFunc:G}:G||{},T=this.json=Et(T)?vt.parse(T):T,!G.justDatas&&T.a&&T.a.onPreDeserialize&&!G.disableOnPreDeserialize&&T.a.onPreDeserialize(T,H,G.view),H.beginTransaction(),yw++,this._82I={},new $),v=new $,J=0,M=T.d.length;if(G.justDatas||(!G.disableInit&&Y1(T.init)&&T.init(H),H.setInit(T.init)),!G.justDatas){for(var Y in T.a)H.a(Y,this[QB](T.a[Y]));for(var m in T.p)H[f1(m)](T.p[m])}for(;J<M;J++){var E=T.d[J],Z=new(e2(E.c)),R=E.i;G.setId&&R!=ft&&(Z._id=R),this._82I[R]=Z,f.add(Z),v.add(E)}for(J=0;J<M;J++)this.deserializeData(f.get(J),v.get(J));return f.each(function(T){B&&!T.getParent()&&T.setParent(B),H.add(T)}),G.__innerHandler__&&G.__innerHandler__(T,H,G.view,f),H.fireSerializeEvent({type:"deserialize",json:T}),yw--,H.endTransaction(),!G.justDatas&&T.a&&T.a.onPostDeserialize&&!G.disableOnPostDeserialize&&T.a.onPostDeserialize(T,H,G.view,f),G.finishFunc&&G.finishFunc(T,H,G.view,f),H.setDeserializing(!1),f},deserializeData:function(T,B){for(var G in B.p)T[f1(G)](this[QB](B.p[G]));for(G in B.s)T.s(G,this[QB](B.s[G]));for(G in B.a)T.a(G,this[QB](B.a[G]))},deserializeValue:function(T){if(M1(T)){var B,G=T.__i;if(G!=ft)return this._82I[G];if((G=T.__dm)!=ft)return(B=new L.DataModel).deserialize(G),B;if(G=T.__a,m1(G))return new $(G)}return T}}),S1(sJ,{serialize:function(T,B){return new Ta(this,B).serialize(T)},toJSON:function(T){return new Ta(this,T).toJSON()},deserialize:function(T,B,G){return new Ta(this).deserialize(T,B,G)}}),L.OverlappingBox=function(T){this.gv=T,this.boxes={}}),Ga=(r4("OverlappingBox",N,{clear:function(){var T,B=this.boxes;for(T in B)B[T].length=0},isOverlapping:function(T,B){var G,H,f,v,J=this.boxes,M=J[T];for(M?(G=M.rects,H=M.length):M=J[T]={rects:G=[],length:H=0},f=0;f<H;f++)if((v=G[f]).x<B.x+B.w&&v.x+v.w>B.x&&v.y<B.y+B.h&&v.h+v.y>B.y)return!0;return G.length<=H?(G.push(B),M.length++):G[M.length++]=B,!1}}),S1(vt,{fetch:function(T,B){T.open((B=B||{}).method||"GET",B.url||"",!(null!=B.sync&&B.sync)),"json"===B.dataType&&T.setRequestHeader("Content-Type","application/json"),B.responseType&&(T.responseType=B.responseType),T.send(B.data)},convertImageSrc:function(T,B){(B=B&&"function"==typeof B?B:function(){})(T)}}),L.Request=function(){}),Ha=(r4("Request",N,{_mimeType:Ht,getXhr:function(){return this._xhr||(this._xhr=new XMLHttpRequest,this.overrideMimeType("text/plain")),this._xhr},send:function(T){var B=this.getXhr();T.mimeType&&this.overrideMimeType(T.mimeType),B.onload=this.onload,B.onerror=this.onerror,vt.fetch(B,T)},onload:function(){},onerror:function(){},getResponseType:function(){return this.getXhr().responseType},setOverrideMimeType:function(T){this.overrideMimeType(T)},getMimeType:function(){return this._mimeType},overrideMimeType:function(T){this.getXhr().overrideMimeType(this._mimeType=T)},getResponseHeader:function(T){return this.getXhr().getResponseHeader(T)},getResponseText:function(){var T=this.getXhr();return T.response||T.responseText},getStatus:function(){return this.getXhr().status}}),{}),fa={},va={},Ja={},Ma=function(T){for(var B in va)va[B]&&!T["_loading_"+B+"_"]&&(Ja[B][T["_loading_"+B+"_"]=i2()]=T)},Ya=function(v,M){function Y(T,B){var G,H;if((G=A(T,B))&&(B=G),Z[T]=B,delete E[T],_1(E)&&J){for(var f in J)(H=J[f]).invalidateAll&&H.invalidateAll(Ht,v+"Loaded",T),H.redraw&&H.redraw(),H.iv(),delete H["_loading_"+v+"_"];J=Ja[v]={}}else if(B&&!_1(J))for(var f in J)(H=J[f]).invalidateAll&&H.invalidateAll(Ht,v+"Loading",T),H.redraw&&H.redraw(),H.iv()}var m,E=va[v]={},Z=Ha[v]={},J=Ja[v]={},R=v.charAt(0).toUpperCase()+v.substr(1),A=(M=M||Qw).handleLoaded||jw,G="load"+R+"ByURL";fa[G]=function(G,H){if((H=H||G)&&!E[G]){var f=new Ga,v=!(E[G]={request:f,url:H});if("string"==typeof H&&(v=cw.test(H),H=vt.beforeLoadURL(H,G)),H.data){var T=H.data;v&&T&&(T=vt.parse(T)),Y(G,T),T&&vt["handle"+R+"Loaded"](G,T)}else{f.onload=function(T){var B;200===this.status||0===this.status?(B=f.getResponseText(),v&&(B=vt.parse(B)),Y(G,B),vt["handle"+R+"Loaded"](G,B)):Y(G,vt["handleUnfound"+R](G,H)||ft)},f.onerror=function(T){Y(G,vt["handleUnfound"+R](G,H)||ft)};var B={};if(B.url=encodeURI(H),B.sync=!1,M.loadingParam)for(var J in M.loadingParam)B[J]=M.loadingParam[J];f.send(B)}}},vt["get"+R]=function(T){var B=Z[T];return B===Ht&&fa[G](T),B},vt["get"+R+"Map"]=function(){return Z},"shader"==v?(m=function(T,B){B&&null!==B.data&&(Z[T]=null,XE[T]=null),fa[G](T,B)},vt.setShader=function(T,B,G){var H,f,v,J;Et(B)&&B.match(/\/\/ *FS/i)?(XE[T]=null,Z[T]=B):Et(B)&&Et(G)?(v=0,J=function(){0<v||(E[T]=null,m(T,H&&f?{data:H+"\n// FS\n"+f}:{data:null}))},B.match(/void\s+main/i)?H=B:(v++,vt.xhrLoad(B,function(T){H=T,v--,J()})),G.match(/void\s+main/i)?f=G:(v++,vt.xhrLoad(G,function(T){f=T,v--,J()})),v&&(E[T]={}),J()):m(T,B)}):vt["set"+R]=function(T,B){Et(B)&&B.substr(0,12)==Mw&&(B=vt.parse(B)),Y1(B)||M1(B)?Z[T]=B:fa[G](T)},vt["handle"+R+"Loaded"]=function(T,B){},vt["handleUnfound"+R]=function(T,B){}},ma=(vt.registerResourceLoader=function(T,B){Ya(T,B)},nJ.GraphView=function(T){var B=this;B._24I={},B._34I=new $,B.enableDirtyRect(),B._25I={},B._56I={},B._view=j1(1,B),B._canvas=X1(B._view),B.dm(T||new sJ),this._coreInteractor=new ua(this),B.setEditable(!1),B.setScrollBarVisible(vt.graphViewScrollBarVisible),B._initView()},T("GraphView",N,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:[GB,HB,TB,BB,"resettable","editInteractor",ae,"zoomable","pannable","rectSelectable","autoScrollZone",EB,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","anchorEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_zoomable:vt.graphViewZoomable,_resettable:vt.graphViewResettable,_pannable:vt.graphViewPannable,_rectSelectable:vt.graphViewRectSelectable,_autoScrollZone:vt.graphViewAutoScrollZone,_rectSelectBackground:vt.graphViewRectSelectBackground,_rectSelectBorderColor:vt.graphViewRectSelectBorderColor,_editPointSize:vt.graphViewEditPointSize,_editPointBorderColor:vt.graphViewEditPointBorderColor,_editPointBackground:vt.graphViewEditPointBackground,_scrollBarColor:j4,_scrollBarSize:W,_autoHideScrollBar:G2,_autoMakeVisible:U4,_currentActionType:null,getCoreInteractor:function(){return this._coreInteractor},getLayers:function(){return this._dataModel.getLayers()},setLayers:function(T){this._dataModel.setLayers(T)},setEditable:function(T){var B,G=this,H=G.__interactorMap__;H||(B=nJ.XEditInteractor,H=G.__interactorMap__={scrollBar:new oa(G),select:new Ia(G),edit:new(B||da)(G),text:new ha(G),move:new Da(G),default:new ia(G),touch:new ea(G,{editable:!1})}),T?(G._uieditable=!0,G.setInteractors([H.scrollBar,H.select,H.text,H.edit,H.move,H.default,H.touch])):(G._uieditable=!1,G.setInteractors([H.scrollBar,H.select,H.move,H.default,H.touch]))},getCanvas:function(){return this._canvas},_33I:function(T){var B=T.getUIClass();return B?new B(this,T):ft},getDataUI:function(T){var B=this._25I[T._id];return B===Ht&&(B=this._33I(T),this._25I[T._id]=B),B},getNodeRect:function(T){return vt.getNodeRect(this,T)},getFullscreenDatas:function(){return this._dataModel.getFullscreenDatas()},getEdgeInfo:function(T){return(T=this.getDataUI(T))?(T._79o(),T._78o):null},getEdgeSourcePosition:function(T){var B=(T=this.getDataUI(T)).s,T=T._data._40I;return QJ(this,T,B("edge.source.position"),B("edge.source.offset.x"),B("edge.source.offset.y"),B("edge.source.anchor.x"),B("edge.source.anchor.y"))},getEdgeTargetPosition:function(T){var B=(T=this.getDataUI(T)).s,T=T._data._41I;return QJ(this,T,B("edge.target.position"),B("edge.target.offset.x"),B("edge.target.offset.y"),B("edge.target.anchor.x"),B("edge.target.anchor.y"))},invalidateAll:function(T){var B=this;if(T){for(var G in B._25I)(G=B._25I[G])&&G.dispose();B._25I={},B._56I={},B._24I={},B._34I.clear(),B.redraw()}else B.dm().each(function(T){B.invalidateData(T)})},invalidateSelection:function(){var B=this;B.sm().each(function(T){B.invalidateData(T)})},invalidateData:function(T){this._24I[T._id]=T,this._21Q(T),this.iv()},_21Q:function(T){var B,G=this._24I;Z1(T)&&ew[T.s(Ke)]&&((B=T.getSourceAgent())&&B.getAgentEdges().each(function(T){G[T._id]=T}),(B=T.getTargetAgent())&&B.getAgentEdges().each(function(T){G[T._id]=T}),this.iv())},redraw:function(T){this._32I||(T?this._34I.add(T):(this._32I=1,this._34I.clear()),this.iv())},each:function(T,B){var G=0,H=this.getLayers(),f=this._dataModel,v=f._datas._as,J=v.length;if(H)for(var M={},Y=(f.isHierarchicalRendering()&&f.eachByHierarchical(function(T){R=T._layer,(Z=(Z=M[R])||(M[R]=[])).push(T)}),H.length);G<Y;G++){var m,E,Z,R=H[G];if(M1(R)&&(R=R.name),f.isHierarchicalRendering()){if((Z=M[R])&&0<(m=Z.length))for(var A=0;A<m;A++)if(E=Z[A],!1===(B?T.call(B,E):T(E)))return}else for(A=0;A<J;A++)if((E=v[A])._layer===R&&!1===(B?T.call(B,E):T(E)))return}else if(f.isHierarchicalRendering())this._dataModel.eachByHierarchical(T,null,B);else for(;G<J;G++)if(E=v[G],!1===(B?T.call(B,E):T(E)))return},reverseEach:function(T,B){var G,H=this._dataModel,f=H._layers,v=H._datas._as,J=v.length;if(f){var M={};for(H.isHierarchicalRendering()&&H.reverseEachByHierarchical(function(T){Z=T._layer,(E=(E=M[Z])||(M[Z]=[])).push(T)}),G=f.length-1;0<=G;G--){var Y,m,E,Z=f[G];if(M1(Z)&&(Z=Z.name),H.isHierarchicalRendering()){if((E=M[Z])&&0<(Y=E.length))for(var R=0;R<Y;R++)if(m=E[R],!1===(B?T.call(B,m):T(m)))return}else for(R=J-1;0<=R;R--)if((m=v[R])._layer===Z&&!1===(B?T.call(B,m):T(m)))return}}else if(H.isHierarchicalRendering())H.reverseEachByHierarchical(T,null,B);else for(G=J-1;0<=G;G--)if(m=v[G],!1===(B?T.call(B,m):T(m)))return},getViewRect:function(){return this._29I},getContentRect:function(){var T,B,G=this,H=G._84I;return H||(T=this.dm().a("width"),B=this.dm().a("height"),0<T&&0<B?G._84I={x:0,y:0,width:T,height:B}:(G.each(function(T){G.isVisible(T)&&(H=V2(H,G.getDataUIBounds(T)))}),G._84I=H||Uw)),G._84I},getScrollRect:function(){return V2(this.getContentRect(),this._29I)},makeCenter:function(T,B,G){var H,f,v,J,M=this;M.getWidth()&&M.getHeight()?(M.makeVisible(T),M.validate(),(f=M.getDataUIBounds(T))&&(J=M.getWidth(),H=M.getHeight(),v=f.x+f.width/2,f=f.y+f.height/2,v=-v*M._zoom+J/2,J=-f*M._zoom+H/2,M.setTranslate(v,J,B))):G||I2(M.makeCenter,M,[T,B,!0],500)},fitData:function(B,G,H,f,T){var v,J=this;J.getWidth()&&J.getHeight()?(v=function(){J.makeVisible(B),J.validate();var T=J.getDataUIBounds(B);T&&(T=o2(T),Bs(T,H==ft?20:H),J.fitRect(T,G,f))},G?vt.callWhenLoaded(v):v()):T||I2(J.fitData,J,[B,G,H,f,!0],500)},fitContent:function(B,G,H,T){var f,v=this;v.getWidth()&&v.getHeight()?(f=function(){v.validate();var T=o2(v.getContentRect());Bs(T,G==ft?20:G),v.fitRect(T,B,H)},B?vt.callWhenLoaded(f):f()):T||I2(v.fitContent,v,[B,G,H,!0],500)},fitRect:function(T,B,G){var H=this,f=H.getWidth(),v=H.getHeight(),J=T.x+T.width/2,M=T.y+T.height/2,Y=Jt(f/T.width,v/T.height),J=-J*(T=H._zoom)+f/2,f=-M*T+v/2;0===Y||isNaN(Y)||(G&&(Y=Jt(1,Y)),B?(H._65I&&(delete H._65I.finishFunc,H._65I.stop(!0)),H._14o&&H._14o.stop(!0),H.setTranslate(J,f,{finishFunc:function(){H.setZoom(Y,B)}})):(H.setTranslate(J,f),H.setZoom(Y)))},fitSelection:function(T,B,G){var H=this,f=H.sm(),v=null;f.size()&&(f.each(function(T){v=V2(H.getDataUIBounds(T),v)}),T&&Bs(v,T),H.fitRect(v,B,G))},toCanvas:function(T,B,G){B=B||this._zoom,this.validateImpl();var H=this.getContentRect(),G=(G&&Bs(H,G),H.width||(H.width=10),H.height||(H.height=10),X1()),f=H.x*B,v=H.y*B,J=Math.ceil(H.width*B),H=Math.ceil(H.height*B),M=(b1(G,J,H,1),G0(G)),J=((T=T||this._dataModel.getBackground())&&k0(M,0,0,J,H,T),f0(M,-f,-v),M.scale(B,B),this._zoom);return this._zoom=B,this._42(M),this._zoom=J,M.restore(),this.redraw(),G},toDataURL:function(T,B,G,H){return this.toCanvas(T,G,H).toDataURL(B||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(J,M){var T,B,Y=this,G=Y.dm().getBackground(),H=(G&&(T=Y.dm().a("width"),B=Y.dm().a("height"),0<T&&0<B&&k0(J,0,0,T,B,G)),Y.__htmlOrderList),m=[],E=Y._forcedLayoutHTML;if(Y._93db(J,M),Y.each(function(T){var B,G,H,f,v=Y.getDataUI(T);v&&(B=Y._56I[T._id],f=v._htmlView,B&&(G=v._79o(),f=v._htmlView,L.HtmlNode&&T instanceof L.HtmlNode?v._42(J):(T=Y.getViewRect(),H=f&&f.layoutHTML,!M||C2(M,G)?(H&&(f.layoutHTML(),v.__outerLayout&&delete v.__outerLayout),v._42(J)):C2(T,G)||!H||v.__outerLayout&&!E||(f.layoutHTML(),v.__outerLayout=!0))),f&&(m.push(f),(f=f.getView?f.getView():f).style.display=B?"block":Ee))}),H&&0<m.length){var f=!1;if(H.length!==m.length)f=!0;else for(var v=0;v<m.length;v++)if(m[v]!==H[v]){f=!0;break}f&&(m.forEach(function(T){!1!==T.autoAdjustIndex&&Y.appendHTML(T,!0)}),this.__htmlOrderList=m)}else this.__htmlOrderList=m;Y._92db(J,M)},disableDirtyRect:function(){this._shouldRedrawAll=S},enableDirtyRect:function(){var T=this;T._shouldRedrawAll=function(){return T._32I}},validateImpl:function(){this.tryUpdateRootData();var G,B,H,T,f,v,J,M=this,Y=M.tx(),m=M.ty(),E=M._zoom,Z=M._canvas,R=this.getWidth(),A=this.getHeight(),g=M._29I,F={x:-Y/E,y:-m/E,width:R/E,height:A/E},W={},s=M._34I,S=M._24I,y=M._shouldRedrawAll(),x=M._23I;for(G in M._24I={},R===Z.clientWidth&&A===Z.clientHeight||(b1(Z,R,A),M._forcedLayoutHTML=y=1),y||q1(F,g)||(M._forcedLayoutHTML=y=1),M._29I=F,M.each(function(T){G=T._id;var B=W[G]=M.isVisible(T);B!==M._56I[G]&&(S[G]=T,(H=M.getDataUI(S[G]))&&H._84o(B),M._84o(T,B))},M),S)(H=M.getDataUI(S[G]))&&(!y&&M._56I[G]&&(T=H._79o())&&s.add(T),H.invalidate()),M._83I=1;if(M._56I=W,!y)for(G in S)W[G]&&(H=M.getDataUI(S[G]))&&(T=H._79o())&&s.add(T);y?B=F:(s.each(function(T){C2(F,T)&&(B=V2(B,T))}),B&&(Bs(B,Gt(1,1/E)),B.x=pt(B.x*E)/E,B.y=pt(B.y*E)/E,B.width=qt(B.width*E)/E,B.height=qt(B.height*E)/E,B=a2(F,B))),(M._74O=B)&&0!==B.width&&0!==B.height&&(g=G0(Z),Z=B.x,f=B.y,v=B.width,J=B.height,Z=Math.floor((Z*E+Y)*B2),f=Math.floor((f*E+m)*B2),v=Math.ceil(v*E*B2)+1,J=Math.ceil(J*E*B2)+1,y||(B.x=(Z/B2-Y)/E,B.y=(f/B2-m)/E,B.width=v/B2/E,B.height=J/B2/E),g.beginPath(),g.rect(Z,f,v,J),g.clip(),g.clearRect(Z,f,v,J),H0(g,Y,m,E),M._42(g,B),g.restore(),delete M._74O),s.clear(),delete M._32I,delete M._forcedLayoutHTML,x&&0<R&&0<A&&((H=M.getDataUI(x))&&(T=H._79o(),f=(Z=M._29I).x,v=Z.y,J=Z.width,Y=Z.height,E=M._zoom,T&&!C2(T,Z)&&(T.x+T.width<f&&M.tx(-T.x*E),T.x>f+J&&M.tx(-(T.x+T.width-J)*E),T.y+T.height<v&&M.ty(-T.y*E),T.y>v+Y&&M.ty(-(T.y+T.height-Y)*E))),delete M._23I),M._83I&&(delete M._83I,delete M._84I),M._98O(),M.countFrame(),_1(M._24I)||I2(M.iv,M)},isValidGuideLineSource:function(T){return!0},tryUpdateRootData:function(){if(!this._rootDataUpdating){this._rootDataUpdating=!0;var T,B,G=this.getFullscreenDatas();for(B in G)T=G[B],this.scaleRootData(T);this.onRootDataUpdated&&this.onRootDataUpdated(),this._rootDataUpdating=!1}},scaleRootData:function(T){if("uniform"===(Z=T.s("fullscreen"))||"fill"===Z){T.getRotation()&&T.setRotation(0);var B=T.s("fullscreen.gap")||0,G=this.getWidth(),H=this.getHeight();if(G&&H){var G=G-2*B,H=H-2*B,f=T.getAnchor(),v=(J=T.getScaledSize()).width,J=J.height;if(m=T.s("fullscreen.lock"))return"uniform"===Z?v/J<G/H?(E=H/J,v=J*G/H):(E=G/v,J=v*H/G):"v"===m?(v=G/(E=H/J),T.getWidth()!==v&&T.setWidth(v)):(J=H/(E=G/v),T.getHeight()!==J&&T.setHeight(J)),this.setZoom(E),M=B-(T.getX()-f.x*v)*E,Y=B-(T.getY()-f.y*J)*E,M!==this.tx()&&this.tx(M),void(Y!==this.ty()&&this.ty(Y));var M=this.tx(),Y=this.ty(),m={x:(-M+B)/(E=this._zoom),y:(-Y+B)/E,width:G/E,height:H/E},E=("uniform"===Z&&(M=v/J,B=(Y=Math.min(m.width,m.height*M))/M,m.x+=.5*(m.width-Y),m.y+=.5*(m.height-B),m.width=Y,m.height=B),G=m.width/T.getScaleX(),H=m.height/T.getScaleY(),T.getWidth()==G&&T.getHeight()===H||T.setSize(G,H),m.x+f.x*m.width),Z=m.y+f.y*m.height;E===(v=T.getPosition()).x&&Z===v.y||T.setPosition(E,Z)}}},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(T){var B=this;T!==B.isScrollBarVisible()&&(T?(K1(B._view,B._79O=r1()),K1(B._79O,B._27I=r1()),K1(B._79O,B._28I=r1())):(vs(B._79O),delete B._79O,delete B._27I,delete B._28I),B.fp("scrollBarVisible",!T,T))},getDebugTip:function(){return""},showScrollBar:function(){var T=this;T._79O&&(T._85I||(jt(function(){T._86I()},g2),T.iv()),T._85I=new Date)},_86I:function(){var T=this;T._85I&&((new Date).getTime()-T._85I.getTime()>=g2?(delete T._85I,T.iv()):jt(function(){T._86I()},g2))},getVScrollBar:function(){return this._27I},getHScrollBar:function(){return this._28I},_98O:function(){var T=this._27I,B=this._28I;if(this._79O){if(this._autoHideScrollBar&&!this._85I)return T.style.visibility=ne,void(B.style.visibility=ne);var G=this.getScrollBarColor(),H=this._zoom,f=this.getScrollBarSize(),v=this.getViewRect(),J=this.getScrollRect(),M=v.height*H,Y=J.height*H,m=v.width*H-f-2,E=M*((v.y-J.y)*H/Y),Z=M/Y*M,R=T.style,Y=(M<Y-.5?(Z<F2&&(M<(E=(E=E+Z/2-F2/2)<0?0:E)+F2&&(E=M-F2),Z=F2),D(T,m,E,f,Z),R.visibility=$e,R.background=G,R.borderRadius=f/2+Ze):R.visibility=ne,v.width*H),M=J.width*H,E=v.height*H-f-2,m=Y*((v.x-J.x)*H/M),T=Y/M*Y,R=B.style;Y<M-.5?(T<F2&&(Y<(m=(m=m+T/2-F2/2)<0?0:m)+F2&&(m=Y-F2),T=F2),D(B,m,E,T,f),R.visibility=$e,R.background=G,R.borderRadius=f/2+Ze):R.visibility=ne}},setDataModel:function(T){var B=this,G=B._dataModel,H=B._selectionModel;G!==T&&(G&&(G.ump(B.handleDataModelPropertyChange,B),G.umm(B.handleDataModelChange,B),G.umd(B.handleDataPropertyChange,B),G.removeIndexChangeListener(B._75O,B),G.removeHierarchyChangeListener(B.handleHierarchyChange,B),H||G.sm().ums(B.handleSelectionChange,B)),(B._dataModel=T).mp(B.handleDataModelPropertyChange,B),T.mm(B.handleDataModelChange,B),T.md(B.handleDataPropertyChange,B),T.addIndexChangeListener(B._75O,B),T.addHierarchyChangeListener(B.handleHierarchyChange,B),H?H._21I(T):T.sm().ms(B.handleSelectionChange,B),B.invalidateAll(!0),B.fp(qB,G,T),B.updateBackground())},getLayersInfo:function(){var T;return this._layersInfo===Ht&&((T=this.getLayers())?(this._layersInfo={},T.forEach(function(T){var B=M1(T)?T.name:T;this._layersInfo[B]=T},this)):this._layersInfo=null),this._layersInfo},calculateEdgePosition:function(T,B,G){T instanceof L.Data?(H=this.getDataUI(T),M=CJ(H)):(M=CJ(null,T,arguments[1]),B=arguments[2],G=arguments[3]);var M,H,f=function(G){var H=1/0,f=0,v=new b;function T(T){var B;return 0<=T&&T<=1&&(v=GW(M,100*T),(B=(G.x-v.x)*(G.x-v.x)+(G.y-v.y)*(G.y-v.y))<H&&(H=B,f=T,1))}for(var B=0;B<100;++B)T(B/100);for(var J=.005;.001<J;)T(f-J)||T(f+J)||(J/=2);return f}(B=2===B.length?new b(B[0],B[1]):B),v=GW(M,100*f);if(!G)for(var J=H?HW(H):HW(T,arguments[1]),Y=new b(v.x,v.y),m=49/(this._zoom*this._zoom),E=0,Z=J.length;E<Z;E++)if(Y.distanceToSquared(J[E])<m)return{index:E,point:J[E],distance:Math.sqrt((J[E].x-B.x)*(J[E].x-B.x)+(J[E].y-B.y)*(J[E].y-B.y))};return{percent:f,point:v,distance:Math.sqrt((v.x-B.x)*(v.x-B.x)+(v.y-B.y)*(v.y-B.y))}},getPercentPositionOfPath:function(T,B){var G;return T instanceof L.Data?(G=this.getDataUI(T),G=CJ(G)):(G=CJ(null,T,arguments[1]),B=arguments[2]),GW(G,B)},getNeareastPositionOfPath:function(){return this.calculateEdgePosition.apply(this,arguments)},getPointsOfPath:function(T){for(var B,G,H,f,H=T instanceof L.Data?(B=this.getDataUI(T),G=(B=kJ(B)).points,B.segments):(G=T,arguments[1]),v=T instanceof L.Shape?T.getPointsMatrix2d():new l.Matrix2d,J=[],M=-1,Y=-1,m=0,E=(H||G).length;m<E;m++)5!==(f=H?H.get(m):1)&&(Y++,3===f?(qN(J,G,M+1,Y,"C",v),qN(J,G,M+2,Y,"M",v),M+=2):4===f?(qN(J,G,M+1,Y-1,"R",v),qN(J,G,M+2,Y,"L",v),qN(J,G,M+3,Y,"M",v),M+=3):(qN(J,G,M+1,Y,"M",v),M+=1));return J},calculateAttachPoint:(_9=new b,p9=new b,q9=new b,function(T,B){var G=this.getAttachPoints(T);if(!G||!G.length)return null;q9.set(B.x,B.y);for(var H,f,v,J,M=1/0,Y=0,m=G.length;Y<m;Y++)v=G[Y],p9.x=v.x,p9.y=v.y,_9.x=v.offsetX||0,_9.y=v.offsetY||0,v=QJ(this,T,0,_9.x,_9.y,p9.x,p9.y),(f=q9.distanceToSquared(v))<M&&(H=Y,M=f,J=v);return M=Math.sqrt(M),"close"===(B=this.getAttachStyle(T))&&T.s("attach.close.threshold")/this._zoom<M?null:{index:H,distance:M,info:G[H],point:J}}),getAttachPoints:function(T){var B=T.s("attach.points");return B||((B=z(T._image))?n(B.attachPoints,T,this)||null:void 0)},getAttachStyle:function(T){var B=T.s("attach.style");return B||((B=z(T._image))?n(B.attachStyle,T,this)||"close":void 0)},updateLayers:function(){this._layersInfo=Ht,this.invalidateSelection(),this.redraw()},updateBackground:function(){var T=this.dm().a("width"),B=this.dm().a("height");this._canvas.style.background=!(0<T&&0<B)&&this.dm().getBackground()||""},handleDataModelPropertyChange:function(T){var B,G;"background"===T.property?(B=this._canvas.style.background,G=T.newValue||"",this.updateBackground(),this.fp("canvasBackground",B,G),this.redraw()):"a:width"===T.property||"a:height"===T.property?(this._83I=1,this.updateBackground(),this.redraw()):"layers"===T.property?this.updateLayers():"hierarchicalRendering"===T.property&&this.redraw()},handleDataPropertyChange:function(T){this.dm().isHierarchicalRendering()&&"parent"===T.property&&T.data.hasChildren()&&this.redraw(),this.invalidateData(T.data)},onPropertyChanged:function(T){var B,G=T.property;this.redraw(),"zoom"===G?(B=this.sm().getSelection()).size()&&B.each(function(T){T.invalidate()}):"dataModel"===G&&(this._83I=1),OJ[G]?this.showScrollBar():G===ae&&this.onCurrentSubGraphChanged(T)},onCurrentSubGraphChanged:function(T){this.sm().cs(),this.reset()},handleDataModelChange:function(T){var B,G,H,f=this,v=T.kind,T=T.data;f._83I=1,"add"===v?(f.invalidateData(T),Z1(T)&&T.getEdgeGroup()&&T.getEdgeGroup().eachSiblingEdge(f.invalidateData,f),T.getHost&&T.getHost()&&T.getHost().updateLayoutAttaches()):v===xe?(f._21Q(T),B=T._id,(G=f._25I[B])&&(f._56I[B]&&(H=G._79o())&&f.redraw(H),G.dispose(),delete f._25I[B],delete f._24I[B],delete f._56I[B]),T===f._currentSubGraph&&f.setCurrentSubGraph(ft)):v===we&&(f.invalidateAll(!0),f.setCurrentSubGraph(ft))},_75O:function(T){this.invalidateData(T.data)},handleHierarchyChange:function(T){this.dm().isHierarchicalRendering()&&T.data.hasChildren()&&this.redraw(),this.invalidateData(T.data)},adjustIndex:function(T){if(this.isVisible(T)){this.dm().beginTransaction();for(var B=T;B._parent&&this.isVisible(B._parent);)B=B._parent;B&&B!==T&&this._dataModel.adjustIndex(B),this._dataModel.adjustIndex(T),this.dm().endTransaction()}},getImage:function(T){return T.getImage?T.getImage():Ht},getSelectWidth:function(T){var B=z(this.getImage(T));return B&&n(B.disableSelectedBorder,T,this)?0:T.s("select.width")},getSelectColor:function(T){return T.s("select.color")},isSelectable:function(T,B){return!!this.isSelected(T)||!(!B&&T.getParent()instanceof nW&&this.isSelectable(T.getParent(),!0)&&T.getParent().isSyncSize())&&((!(B=(B=this.getLayersInfo())&&B[T._layer])||!1!==B.selectable)&&(T.s("2d.selectable")&&this.sm().isSelectable(T)))},isMovable:function(T){if(Z1(T)&&T.getStyle(Ke)!==De)return!1;var B=this.getLayersInfo();return(!(B=B&&B[T._layer])||!1!==B.movable)&&(!!T.s("2d.movable")&&(!this._movableFunc||this._movableFunc(T)))},isEditable:function(T){if(L._uiSerializing)return this._uieditable;if(!this._editInteractor||!this.isSelected(T))return!1;if(R1(T)){var B=this.getDataUI(T);if(!B||B._88I)return!1}return(!Z1(T)||T.getStyle(Ke)===De)&&((!(B=(B=this.getLayersInfo())&&B[T._layer])||!1!==B.editable)&&(!!T.s("2d.editable")&&(!this._editableFunc||this._editableFunc(T))))},handleDelete:function(T){this._editInteractor&&(this._editInteractor.handleDelete?this._editInteractor.handleDelete():this.removeSelection())},isPointEditable:function(T){return(!r(T)||0===T.getRotation())&&(!this._pointEditableFunc||this._pointEditableFunc(T))},isRectEditable:function(T){return!this._rectEditableFunc||this._rectEditableFunc(T)},isAnchorEditable:function(T){return!this._anchorEditableFunc||this._anchorEditableFunc(T)},isRotationEditable:function(T){return!(!T.setRotation||!1===T.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(T))},isSourceTargetEditable:function(T,B,G){return!0},getRotationPoint:function(T){var B=T.getAnchor(),G=T.getScale(),H=this._zoom,B=g4(T.getRotation(),0,-T.getHeight()*G.y*B.y-(G.y<0?-1:1)*($t?32:16)/H),G=T.p();return B.x+=G.x,B.y+=G.y,B},getLogicalPoint:function(T){return Gs(T,this._canvas,this.tx(),this.ty(),this._zoom,this._zoom)},getScreenPoint:function(T,B){var G;return"object"==typeof T?B=T.x!==Ht?(G=T.x,T.y):(G=T[0],T[1]):G=T,Hs(G,B,this._canvas,this.tx(),this.ty(),this._zoom,this._zoom)},getSelectedDataAt:function(T){var B=this;return this.getDataAt(T,function(T){return B.isSelected(T)})},getDataInfoAt:function(T,B,G){var H=this.lp(T),f=this.getDataAt(H,B,G);if(f){var v={data:f,ui:T=this.getDataUI(f),point:H},J=T._38o;if(J){var M,Y=J.icons;for(M in Y){var m=Y[M],E=J.rects[M];if(E)for(var Z=n(m.names,f,this),m=Z?Z.length:0,R=E.rotation,A=m-1;0<=A;A--){var g=Z[A],F=E[A];if(P2(F,H,R))return v.part="icons",v.name=M,v.icon=g,v.rect=F,v.index=A,v.rotation=R,v}}}if(this.isNoteVisible(f)){if(T.note2Info&&P2(T.note2Info.clickRect,H,ft,T.note2Info.scale))return v.part="note2",v;if(T.noteInfo&&P2(T.noteInfo.clickRect,H,ft,T.noteInfo.scale))return v.part="note",v}if(this.isLabelVisible(f)){if(T.label2Info&&P2(T.label2Info.rect,H,T.label2Info.rotation,T.label2Info.scale))return v.part="label2",v;if(T.labelInfo&&P2(T.labelInfo.rect,H,T.labelInfo.rotation,T.labelInfo.scale))return v.part="label",v}if(f.isInRect&&f.isInRect(H))return v.part="body",v}return v},getDataAt:function(B,G,H){B.target&&(B=this.lp(B));var f,v=this._zoom;return this.reverseEach(function(T){if((G?G(T):this.isSelectable(T))&&this.rectIntersects(T,G1(B.x,B.y,H,v)))return f=T,!1},this),f},getIconInfoAt:function(T,B){if(T.target&&(T=this.lp(T)),B=B||this.getDataAt(T)){var G=this.getDataUI(B);if(G&&G._38o){var H=G._38o,f=new $;for(J in H.icons)f.add(J);for(var v=f.size()-1;0<=v;v--)for(var J=f.get(v),M=H.rects[J],Y=M.rotation,m=M.length-1;0<=m;m--){var E=M[m],Z=E.width,R=E.height,A={x:T.x-E.x-Z/2,y:T.y-E.y-R/2};if(Y!=ft&&(A=g4(-Y,A.x,A.y)),P2(E={x:-Z/2,y:-R/2,width:Z,height:R},A))return{key:J,index:m,name:H.icons[J].names[m],rect:M[m],point:T,rotation:Y,relativeRect:E,relativePoint:A,data:B}}}}return ft},getDatasInRect:function(B,G,H){H===Ht&&(H=1);var f=this,v=new $;return f.reverseEach(function(T){H&&!f.isSelectable(T)||(G?f.rectIntersects(T,B):f.rectContains(T,B))&&v.add(T)}),v},moveSelection:function(T,B){this.dm().beginTransaction(),x4(this.sm().toSelection(this.isMovable,this),T,B),this.dm().endTransaction()},moveDatas:function(T,B,G){this.dm().beginTransaction(),T instanceof $||(T=new $(T)),x4(T,B,G),this.dm().endTransaction()},getDataUIBounds:function(T){return(T=this.getDataUI(T))?T._79o():ft},drawData:function(B,T,G){var H,f=this.getDataUI(T);f&&(H=f._79o(),G&&!C2(G,H)||(f._42(B),T instanceof L.Block&&T.eachChild(function(T){this.isVisible(T)&&this.drawData(B,T,G)},this)))},getBoundsForGroup:function(T){return T.s(pe)?this.getDataUIBounds(T):ft},isPixelPerfect:function(T){return T.s("pixelPerfect")},rectIntersects:function(T,B){this.validate();var G=ft;if(this._56I[T._id]&&(f=this._25I[T._id])){var H=f._79o();if(k2(B,H))G=!0;else if((B=a2(B,H))&&(G=f.rectIntersects?f.rectIntersects(B):G)==ft){if(!this.isPixelPerfect(T))return!0;var H=B.x,f=B.y,v=B.width,J=B.height,M=this._zoom,Y=v*J*M*M,m=((m=vt.hitMaxArea)<Y&&(M*=Math.sqrt(m/Y)),H*=M,f*=M,j0(v=(v*=M)<2?2:v,J=(J*=M)<2?2:J));f0(m,-H,-f),m.scale(M,M),this._drawForChecking=!0,this.drawData(m,T,B),this._drawForChecking=!1;try{for(var E=0,Z=m.getImageData(0,0,v,J).data;E<Z.length;E+=4)if(0!==Z[E+3]){G=!0;break}m.restore()}catch(T){N0=ft,G=!1}}}return!!G},rectContains:function(T,B){return!(!this._56I[T._id]||!(T=this._25I[T._id]))&&k2(B,T._79o())},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(T){var B,G,H,f,v;vt.isInput(T.target)||(G=(v=(B=this)._focusData)&&B._25I[v._id],f=0,H=B._dataModel._datas,v&&v._enabled&&v._editable&&G&&G.onKeyDown&&!0===G.onKeyDown(T)||(9===T.keyCode&&(v&&(f=H.indexOf(v),l2(T)?-1==--f&&(f=0):++f===H.size()&&(f=0)),B._focusData=v=H.get(f),B.sm().setSelection(v)),w0(T)?B.selectAll():o0(T)&&B.isResettable()&&B.reset(),B.sm().isEmpty()?B._editing||(G=B.tx(),H=B.ty(),f=!1,v=l2()?100:10,i0(T)&&(G-=v,f=!0),I0(T)&&(H-=v,f=!0),D0(T)&&(G+=v,f=!0),h0(T)&&(H+=v,f=!0),f&&B.setTranslate(G,H)):(O0(T)&&B.handleDelete(T),v=l2()?10:1,i0(T)&&(B.moveSelection(-v,0),B.fi({kind:"moveLeft"})),I0(T)&&(B.moveSelection(0,-v),B.fi({kind:"moveUp"})),D0(T)&&(B.moveSelection(v,0),B.fi({kind:"moveRight"})),h0(T)&&(B.moveSelection(0,v),B.fi({kind:"moveDown"})))))},handleScroll:function(T,B){if(_2(T),this.isZoomable()){if(!this.getEditInteractor()){var G=this.getDataAt(T);if(G){var H=z(this.getImage(G));if(H&&n(H.scrollable,G,this))return}}var f,v=this.getFullscreenDatas();for(f in v)if(v[f].s("fullscreen.lock"))return;H=this.lp(T),0<B?this.scrollZoomIn(H):B<0&&this.scrollZoomOut(H)}},handlePinch:function(T,B,G){!this.isZoomable()||Math.abs(B-G)<vt.pinchZoomThreshold||(G<B?this.pinchZoomIn(T):this.pinchZoomOut(T))},checkDoubleClickOnNote:function(T,B){var G=this.lp(T),H=this.getDataUI(B),f=H.note2Info;return f&&B.s("note2.toggleable")&&P2(f.clickRect,G)?(B.s(Ue,!B.s(Ue)),this.fi({kind:"toggleNote2",event:T,data:B}),!0):!!((f=H.noteInfo)&&B.s("note.toggleable")&&P2(f.clickRect,G))&&(B.s(Xe,!B.s(Xe)),this.fi({kind:"toggleNote",event:T,data:B}),!0)},_84o:function(T,B){},isNoteVisible:function(T){return.15<this._zoom},isLabelVisible:function(T){return.15<this._zoom},isEditVisible:function(T){return.15<this._zoom},autoScroll:function(T,B){var G=this,H=G.getAutoScrollZone(),f=H/G.getZoom(),v=H/4,J=G._29I,T=G.lp(T),M={x:G.tx(),y:G.ty()};return T&&0<H&&J&&(T.x-J.x<f?G.translate(v,0):J.x+J.width-T.x<f&&G.translate(-v,0),T.y-J.y<f?G.translate(0,v):J.y+J.height-T.y<f&&G.translate(0,-v)),M.x=G.tx()-M.x,M.y=G.ty()-M.y,B&&(B.x+=M.x,B.y+=M.y),M},getMoveMode:function(T,B){return(B=B.s("2d.move.mode"))||(Iw[88]?"x":Iw[89]?"y":"xy")},getSerializableProperties:function(){return{scrollBarColor:1,scrollBarSize:1,autoMakeVisible:1,autoHideScrollBar:1,editable:1,resettable:1,pannable:1,rectSelectable:1,autoScrollZone:1,visibleFunc:1,movableFunc:1,editableFunc:1,pointEditableFunc:1,rectEditableFunc:1,anchorEditableFunc:1,rotationEditableFunc:1,rectSelectBackground:1,rectSelectBorderColor:1,editPointSize:1,editPointBorderColor:1,editPointBackground:1,hoverDelay:1,dataModel:1,selectionModel:1,currentSubGraph:1,zoom:1,translateX:1,translateY:1}},serializeProperty:function(T,B,G){return"currentSubGraph"===B?{__i:T.getId()}:G.serializeProperty(T,B,this)},deserializeProperty:function(T,B,G){return"currentSubGraph"===B?this.dm().__idMap[T.__i]:G.deserializeProperty(T,B,this)},setDefaultCursor:function(T,B){this._defaultCursor=T,!1!==B&&this.setCursor(T)},getCurrentConnectActionType:function(){return this._currentActionType},setCurrentConnectActionType:function(T){return!(T!==ft&&!vt.getConnectAction(null,T)||(this._currentActionType=T,this.redraw(),0))},getEditStyle:function(T){var B=this.getEditInteractor();return B?B.getStyle(T):Ht},setEditStyle:function(T,B,G){var H=this.getEditInteractor();return!!H&&(H.setStyle(T,B,G),!0)},isConnectActionVisible:function(T){var B=vt.getConnectAction(this);return!!B&&(B=B.visible,Y1(B)?B(this,T):B)},isInteractive:function(T){if(this._drawForChecking)return!1;var B=z(this.getImage(T));return!(!B||!n(B.interactive,T,this))||T.s("interactive")},getRenderingStyleIconName:function(){return Ea},appendHTML:function(T,B){var G=this.getView();if(!(B||T&&T.parentNode!==G))return!1;var H=T.getView&&T.getView(),f=T.beforeCanvas;return!(!B&&H&&H.parentNode===G)&&((T.getView||T.isSelfViewEvent)&&(T=T.getView()),B=this.getEditInteractor(),f?G.insertBefore(T,this.getCanvas()):B&&B._canvas?G.insertBefore(T,B._canvas):this.isScrollBarVisible()?G.insertBefore(T,this.getView().lastChild):K1(G,T),!0)},_layoutHTMLImpl:function(T,B,G){var H,f,v,J,M,Y;1<arguments.length?(f=this._zoom,(B=B.getView?(H=B).getView():B).style.position="absolute",G?(v=T.getRect(),D(H||B,this.tx()+v.x*f,this.ty()+v.y*f,v.width*f,v.height*f)):(G=new Q9,v=T.getAnchorRect(),J=T.getPosition(),M=T.getScale(),Y=B.style,D(H||B,v),G.appendTranslate(this.tx(),this.ty()),G.appendScale(f,f),G.append(new Q9(T.getRotation(),J.x,J.y,M.x,M.y)),T0(Y,"transform","matrix("+G.a.toFixed(5)+", "+G.b.toFixed(5)+", "+G.c.toFixed(5)+",\n    "+G.d.toFixed(5)+", "+G.tx.toFixed(5)+", "+G.ty.toFixed(5)+")"),T0(Y,"transformOrigin",(-v.x).toFixed(5)+"px "+(-v.y).toFixed(5)+"px"),B.updateAppendMatrix=!0)):this._layoutHTML&&this._layoutHTML()},getTextEditInfo:function(T){if(T instanceof $W)return{name:"text",accessType:"s",font:T.s("text.font"),isMultiline:!0}},getState:function(T){var B=T.s("state");return B||((B=z(T._image))?n(B.state,T,this)||null:void 0)},getShape:function(T){return T.getStyle(se)}}),N.defineProperties(nJ.GraphView.prototype,{layoutHTML:{get:function(){return this._layoutHTMLImplBind||(this._layoutHTMLImplBind=this._layoutHTMLImpl.bind(this)),this._layoutHTMLImplBind},set:function(T){this._layoutHTML=T}}}),function(T,B){this.gv=T,this.s=function(T){return B.getStyle(T)},this._data=B,this._87I=new $}),Ea=ft,Za=(Es(ma,N,{_6I:ft,ms_icons:1,_84o:function(T){},dispose:function(){},isShadowed:function(){return this.s("shadow")||this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},getSelectWidth:function(){return!this.gv.isSelected(this._data)||this.isShadowed()?0:this.gv.getSelectWidth(this._data)},getSelectColor:function(){return this.gv.getSelectColor(this._data)},getBodyColor:function(T){var B=this._data;return this.gv.getBodyColor(B)||(T?B.getStyle(T):ft)},_2Q:function(T){return this.s(T)},_1Q:function(T,B,G,H){var f,v=this.s,J=v("2d.gray"),M=v(B+".dash.color");J&&(M=vt.toGrayColor(M)),T.strokeStyle=M,T.lineWidth=G,T.stroke(),v(B+".dash.3d")&&(f=v(B+".dash.3d.color"),V0(T,M,J?vt.toGrayColor(f):f,G,this.gv._zoom,v(B+".dash.3d.accuracy"))),Ns(T,H)},invalidate:function(){this._6I=ft},_79o:function(){var T,B,G=this;return G._6I||(T=G._data,B=G.gv,G.labelInfo=G.label2Info=G.noteInfo=G.note2Info=G._38o=ft,G._87I.clear(),G.interactiveInfo=B.isInteractive(T)?{}:ft,G._3O(),G._55O=B.isEditable(T)?{_42O:B.isRectEditable(T),_43O:B.isPointEditable(T),_56O:B.isRotationEditable(T)}:ft,G._6I=G._81o()),G._6I},_3O:function(){},getPosition:function(T,B,G,H){return Uw},_68o:function(T,B){var G,H;T&&this._87I.add(B?(B=new L9(B),G=T.width/2,H=T.height/2,(B=$2([B.tf(-G,-H),B.tf(G,-H),B.tf(G,H),B.tf(-G,H)])).x+=T.x+G,B.y+=T.y+H,B):T)},_81o:function(){var B,T,G,H,f=this,v=f.s;return f._24O(ce,"getLabel"),f._24O(te,"getLabel2"),f._26O(de,"getNote"),f._26O(Ne,"getNote2"),f._15O(),f._55O&&f._48O(),f._87I.each(function(T){B=V2(B,T)}),B&&v("shadow.interactable")&&(T=f.isShadowed(),G=v("shadow2"),H=o2(B),G?(H.x+=v("shadow2.offset.x"),H.y+=v("shadow2.offset.y"),Bs(H,v("shadow2.blur"))):T&&(H.x+=v("shadow.offset.x"),H.y+=v("shadow.offset.y"),Bs(H,v("shadow.blur"))),B=V2(B,H)),f._87I.clear(),B},_42:function(T){var B,G,H,f,v,J,M,Y=this,m=Y._data,E=Y.gv,Z=Y.s,R=Z("opacity"),A=this.isShadowed(),g=Z("shadow2");(A||g)&&(B=T.shadowOffsetX,G=T.shadowOffsetY,H=T.shadowBlur,f=T.shadowColor,v=E.getZoom()*vt.devicePixelRatio,T.shadowOffsetX=Z((J=A?"shadow":"shadow2")+".offset.x")*v,T.shadowOffsetY=Z(J+".offset.y")*v,T.shadowBlur=Z(J+".blur")*v,T.shadowColor=A?Y.getSelectColor():Z(J+".color")),R!=ft&&(M=T.globalAlpha,T.globalAlpha=R),Y._80o(T),E.isLabelVisible(m)&&(E._drawForChecking&&!Z("label.selectable")||rJ(T,Y.labelInfo),E._drawForChecking&&!Z("label2.selectable")||rJ(T,Y.label2Info)),E.isNoteVisible(m)&&(XJ(T,Y.noteInfo),XJ(T,Y.note2Info)),Y._99O(T),R!=ft&&(T.globalAlpha=M),(A||g)&&(T.shadowOffsetX=B,T.shadowOffsetY=G,T.shadowBlur=H,T.shadowColor=f)},_80o:function(T){},_47O:function(T){},_24O:function(T,B){var G,H,f,v=this._data,J=this.gv,M=this.s,Y=J[B](v);Y!=ft&&(G=M(T+".scale"),f=M(T+".max"),H=M(T+".position"),J=this[T+"Info"]={label:Y,scale:G,color:J[B+"Color"](v),font:M(T+".font"),opacity:M(T+".opacity"),align:M(T+".align"),decoration:M(T+".decoration"),rotation:this.getRotation(M(T+".rotation"),!1,H),background:J[B+"Background"](v)},B=z1(J,Y),0<f&&f<B.width&&(J.labelWidth=B.width,B.width=f),1!==G&&(B.width*=G,B.height*=G),v=this.getPosition(H,M(T+".offset.x"),M(T+".offset.y"),B,M(T+".position.fixed")),B.x=v.x-B.width/2,B.y=v.y-B.height/2,this._68o(J.rect=B,J.rotation),1!==G&&(Y=B.width/G,f=B.height/G,J.rect={x:v.x-Y/2,y:v.y-f/2,width:Y,height:f}))},_26O:function(T,B){var G,H,f,v,J,M=this.gv,Y=this._data,m=this.s,E=M[B](Y);E!=ft&&(G=m(T+".scale"),M=this[T+"Info"]={note:E,scale:G,data:Y,view:M,expanded:m(T+".expanded"),font:m(T+".font"),color:m(T+".color"),opacity:m(T+".opacity"),align:m(T+".align"),icon:m(T+".icon"),backgroundImage:m(T+".backgroundImage"),borderWidth:m(T+".border.width"),borderColor:m(T+".border.color"),background:M[B+"Background"](Y)},H=(B=this.getPosition(m(T+".position"),m(T+".offset.x"),m(T+".offset.y"))).x,B=B.y,M.expanded?(f=m(T+".max"),(J=(J=m(T+".backgroundImage"))?(J=z(J),{width:ks(J,Y),height:Cs(J,Y)}):z1(M,E)).width+=6,J.height+=2,0<f&&f<J.width&&(M.labelWidth=J.width,J.width=f),f=J.width,v=J.height+8,M.clickRect={x:H-f*G/2,y:B-v*G,width:f*G,height:v*G*J.height/v}):(v=(E=m(T+".icon"))?(E=z(E),f=ks(E,Y),Cs(E,Y)):(f=12,18),M.clickRect={x:H-f*G/2,y:B-v*G,width:f*G,height:v*G}),M.rect={x:H-f/2,y:B-v*G/2-v/2,width:f,height:v},J=qt(M.borderWidth/2)*G,this._68o({x:H-f*G/2-J,y:B-v*G-J,width:f*G+2*J,height:v*G+2*J}))},_48O:function(){},_99O:function(T){var B=this._38o;if(B){var G,H=this.gv,f=this._data,v=B.icons,J=this.interactiveInfo;for(G in J&&(J._38o={}),v){var M=v[G],Y=B.rects[G];if(Y){J&&(J._38o[G]=[]);var m,E=n(M.opacity,f,H),Z=n(M.names,f,H),R=Z?Z.length:0,A=Y.rotation;E!=ft&&(m=T.globalAlpha,T.globalAlpha*=E);for(var g=0;g<R;g++){var F,W,s=Z[g],s=z(s),S=Y[g],y=(A&&(F=S.x+S.width/2,W=S.y+S.height/2,T.save(),f0(T,F,W),v0(T,A),f0(T,-F,-W)),J&&J._38o[G].push(T.interactiveInfo={compInfos:[],matrix:A?new Q9(A,F,W).appendTranslate(-F,-W):new Q9}),Ea);Ea=G,u2(T,s,n(M.stretch,f,H),S.x,S.y,S.width,S.height,this._data,this.gv),Ea=y,T.interactiveInfo=ft,A&&T.restore()}E!=ft&&(T.globalAlpha=m)}}}}}),function(T,B){O1(Za,this,[T,B])}),Ra=(Es(Za,ma,{_checkEmptyRect:!0,_40O:function(T,B){var G,H=this.s,f=T.rect,v=((T.borderColor=this.gv.getBorderColor(this._data))&&(T.borderType=H("border.type"),T.borderWidth=H("border.width"),T.borderPadding=H("border.padding"),B=Gt(B,T.borderPadding+T.borderWidth/2)),this._data.getScale()),v=Gt(1,Gt(it(v.x),it(v.y)));(T.selectWidth=this.getSelectWidth())&&(G=this.gv._zoom,T.selectType=H("select.type"),T._97o=this.getSelectColor(),T.selectPadding=H("select.padding"),B=Gt(B,(T.selectPadding+T.selectWidth/2/G)/v)),0<B&&(B*=v,f=o2(f),Bs(f,B)),this._68o(f)},_39O:function(T,B){var G,H,f,v,J,M=B.rect;0<B.borderWidth&&(J=B.borderPadding,T.strokeStyle=B.borderColor,T.lineWidth=B.borderWidth,C0(T,B.borderType,{x:M.x-J,y:M.y-J,width:M.width+2*J,height:M.height+2*J}),T.stroke()),0<B.selectWidth&&(H=this.gv._zoom,J=B.selectPadding,T.strokeStyle=B._97o,T.lineWidth=B.selectWidth/H,B.rotation!=ft&&(T.save(),T.translate(B.position.x,B.position.y),T.rotate(B.rotation),G=(H=this._data).getWidth(),H=H.getHeight(),f=B.scale,v=B.anchor,M={x:f.x*(-G*v.x),y:f.y*(-H*v.y),width:f.x*G,height:f.y*H}),C0(T,B.selectType,{x:M.x-J,y:M.y-J,width:M.width+2*J,height:M.height+2*J}),B.rotation!=ft&&T.restore(),T.stroke())},dispose:function(){var T=this._htmlView;Za.superClass.dispose.call(this),T&&(T.onHTMLRemoved&&T.onHTMLRemoved(),vs(T))},_3O:function(){var T,B=this,G=B.s,H=B._data,f=B.gv,v=f.getShape(H),J=B.getBodyColor(),M=G("shape.border.color"),Y=((J=(M=B._83o=v?{shape:v,_53o:B.getBodyColor("shape.background"),_27Q:z(G("shape.repeat.image"),J),shapeRepeatImageStretch:G("shape.repeat.image.stretch"),shapeRepeatImageRotation:G("shape.repeat.image.rotation"),shapeGradientPack:G("shape.gradient.pack"),shapeBorderGradientPack:G("shape.border.gradient.pack"),_54o:G("shape.border.width"),_55o:M,shapeBorderRepeatImage:z(G("shape.border.repeat.image"),M),shapeBorderRepeatImageStretch:G("shape.border.repeat.image.stretch"),shapeBorderRepeatImageRotation:G("shape.border.repeat.image.rotation"),_56o:G("shape.border.3d"),_57o:G("shape.border.3d.color"),_58o:G("shape.border.3d.accuracy"),shapeGradient:G("shape.gradient"),_59o:G("shape.gradient.color"),_60o:G("shape.border.pattern"),_61o:G("shape.border.cap"),_62o:G("shape.border.join"),shapeForeground:G("shape.foreground"),bodyColor:J,gray:G("2d.gray")}:{img:z(f.getImage(H),J),bodyColor:J,gray:G("2d.gray"),stretch:G("image.stretch")}).img)&&J.renderHTML?(B._htmlInfo&&B._htmlInfo.img!==J&&(B._htmlInfo=ft),B._htmlInfo||(B._htmlInfo={img:J,cache:{}}),Y=J.renderHTML(H,f,B._htmlInfo.cache)):B._htmlInfo=ft,B._htmlView&&B._htmlView!==Y&&(B._htmlView.onHTMLRemoved&&B._htmlView.onHTMLRemoved(),vs(B._htmlView.getView?B._htmlView.getView():B._htmlView)),(B._htmlView=Y)&&f.appendHTML(Y)&&(Y.onHTMLAddedSync&&Y.onHTMLAddedSync(),Y.onHTMLAdded&&I2(Y.onHTMLAdded)),M.rect=H.getRect(),M.position=H.p(),M.scale=H.getScale(),M.anchor=H.getAnchor(),M.rotation=H.getRotation(),v===j&&(M._63o=G("shape.depth")),0);v?(Y=l0(ft,M._54o/2,M._62o),B.s("shape.dash")&&(Y=Gt(Y,(B.s("shape.dash.width")||M._54o)/2))):J&&J.boundExtend&&(Y=n(J.boundExtend,H,f),J.boundExtendAbsolute?(T=H.getScale(),Y/=f._zoom*Gt(1,Gt(it(T.x),it(T.y)))):n(J.fitSize,H,f)||(T=n(J.width,H,f),J=n(J.height,H,f),Y*=Gt(H.getWidth()/T,H.getHeight()/J))),B._40O(M,Y),(f=G("clip.percentage"))!=Ht&&(M.clipRect=e1(H.getAnchorRect(),G("clip.direction"),f)),v&&((T=G("shape.fill.clip.percentage"))!=Ht&&(M.shapeClipRect=e1(H.getAnchorRect(),G("shape.fill.clip.direction"),T)),(J=G("shape.foreground.clip.percentage"))!=Ht&&(M.shapeForegroundClipRect=e1(H.getAnchorRect(),G("shape.foreground.clip.direction"),J))),G("clip.host")&&H.getHost()&&(M.clipHost=!0)},getPosition:function(T,B,G,H){return(T=p4(T,this._83o.rect,H)).x+=B,T.y+=G,T},clipHost:function(G){var B,H,T,f,v,J,M,Y,m,E,Z,R,A=this.gv,g=this._data.getHost(),F=A.getDataUI(g)._83o,A=A.getShape(g);return g instanceof VW?(M=g.getPoints().toArray(),J=g.getSegments().toArray(),B=g.getMatrix(),H=g.p(),M=M.map(function(T){return(T=o2(T)).x-=H.x,T.y-=H.y,B.apply(T)}),n0(G,M,J)):A?("roundRect"===A?E=g.s("shape.corner.radius"):"polygon"===A?(E=g.s("shape.polygon.side"),T=g.s("shape.corner.radius"),f=g.s("shape.regular")):"arc"===A&&(E=g.s("shape.arc.from"),T=g.s("shape.arc.to"),f=g.s("shape.arc.close"),v=g.s("shape.arc.oval")),M=F.position,R=F.rotation,J=F.anchor,Y=F.scale,(m=g.getSize()).x=-m.width*J.x,m.y=-m.height*J.y,G.save(),f0(G,M.x,M.y),v0(G,R),J0(G,Y.x,Y.y),A4[A](G,m.x,m.y,m.width,m.height,E,T,f,v),G.restore()):(J=g.s("host.clip.padding"),Y=(M=g.getCorners().map(function(T){return new b(T)}))[0],A=M[3],m=M[2],E=M[1],Z=new b(Y.x+(m.x-Y.x)/2,A.y+(E.y-A.y)/2),R=F.rotation,J&&(R&&M.forEach(function(T){T.rotateAround(Z,-R)}),Y.x+=J,Y.y+=J,A.x-=J,A.y+=J,m.x-=J,m.y-=J,E.x+=J,E.y-=J,R&&M.forEach(function(T){T.rotateAround(Z,R)})),M.forEach(function(T,B){B?G.lineTo(T.x,T.y):G.moveTo(T.x,T.y)})),!0},_80o:function(T){var B,G,H,f,v,J,M,Y,m,E,Z,R,A,g=this,F=g.s,W=g.gv,s=g._data,S=g._83o,y=S.rect,x=S.position,w=S.rotation,O=S.anchor,_=S.scale,p=S.shape,q=S.clipHost,u=S.clipRect;(!g._checkEmptyRect||0<y.width&&0<y.height)&&(q&&(T.save(),T.beginPath(),g.clipHost(T)&&T.clip()),(y=s.getSize()).x=-y.width*O.x,y.y=-y.height*O.y,T.save(),f0(T,x.x,x.y),v0(T,w),J0(T,_.x,_.y),u&&(T.beginPath(),T.rect(u.x,u.y,u.width,u.height),T.clip()),W._drawForChecking&&S.img&&!1===n(S.img.pixelPerfect,s,W)?k0(T,y.x,y.y,y.width,y.height,"#888888"):g.freeDraw?g.freeDraw(T,y,S):p?(O=S._60o,u=ds(T,O),Z=S._27Q,B=S._54o,A=S.shapeGradientPack,G=S.gray,H=T.lineJoin,f=T.lineCap,m=function(T){return G?vt.toGrayColor(T):T},"roundRect"===p?v=F("shape.corner.radius"):"polygon"===p?(v=F("shape.polygon.side"),J=F("shape.corner.radius"),M=F("shape.regular")):"arc"===p&&(v=F("shape.arc.from"),J=F("shape.arc.to"),M=F("shape.arc.close"),Y=F("shape.arc.oval")),T.lineJoin=S._62o,T.lineCap=S._61o,(E=m(S._53o))||Z||A?((R=S.shapeClipRect)&&(T.save(),T.beginPath(),T.rect(R.x,R.y,R.width,R.height),T.clip()),C0(T,p,y,v,J,M,Y),A?K0(T,A,function(T){return r0(T,S.bodyColor)},!1,y):Z?T4(T,Z,m(S.bodyColor),null,s,W,S.shapeRepeatImageStretch,y,S.shapeRepeatImageRotation):a0(T,E,S.shapeGradient,m(S._59o),y),T.fill(),A&&T.restore(),R&&T.restore(),T!==u&&C0(u,p,y,v,J,M,Y)):C0(u,p,y,v,J,M,Y),(Z=S.shapeForeground)&&(T.save(),(A=S.shapeForegroundClipRect)&&(T.beginPath(),T.rect(A.x,A.y,A.width,A.height),T.clip()),C0(T,p,y,v,J,M,Y),a0(T,Z,F("shape.foreground.gradient"),m(F("shape.foreground.gradient.color")),y),T.fill(),T.restore()),0<B&&((R=F("shape.border.width.absolute"))&&(T.save(),T.setTransform(1,0,0,1,0,0)),T.lineWidth=B,A=m(S._55o),(Z=S.shapeBorderGradientPack)?K0(T,Z,m,!0,y):S.shapeBorderRepeatImage?B4(T,S.shapeBorderRepeatImage,A,null,s,W,S.shapeBorderRepeatImageStretch,y,S.shapeBorderRepeatImageRotation):T.strokeStyle=A,T.stroke(),Z&&T.restore(),R&&T.restore(),S._56o&&V0(T,A,m(S._57o),B,W._zoom,S._58o)),Ns(T,O),F("shape.dash")&&0<(Z=F("shape.dash.width")||B)&&(O=F("shape.dash.pattern"),(u=ds(T,O,g._2Q("shape.dash.offset")))!==T&&C0(u,p,y,v,J,M,Y),g._1Q(T,"shape",Z,O)),M4(T,E,S._63o,y),T.lineJoin=H,T.lineCap=f):((R=g.interactiveInfo)&&(T.interactiveInfo=R.bodyInfo={compInfos:[],matrix:new Q9(w,x.x,x.y,_.x,_.y)}),S.gray&&(T.compGray=!0),(A=S.img)&&A.cacheRule!=ft&&(A=VJ(T,A,S.stretch,y.width,y.height,s,W,S.bodyColor)),u2(T,A,S.stretch,y.x,y.y,y.width,y.height,s,W,S.bodyColor),T.compGray=!1,T.interactiveInfo=ft),T.restore(),q&&T.restore()),g._39O(T,S)},_48O:function(){},_47O:function(T){}}),function(T,B){O1(Ra,this,[T,B])}),Aa=function(T,B,G,H){var f=n2(T,B);return G=(H?Jt:UJ)(G,f),f?G/=f:G=0,{x:T.x+(B.x-T.x)*G,y:T.y+(B.y-T.y)*G}},ga=(Es(Ra,ma,{_3O:function(){var T,B,G,H,f,v,J,M,Y,m=this,E=m._data,Z=m.gv,R=m.s,A=R(Ke),g=E.isLooped(),F=R("edge.width"),W=m.getBodyColor("edge.color"),s=R("edge.center"),S=R("edge.offset"),y=Z.getBorderColor(E),x=y?R("border.width"):0,w=m.getSelectWidth(),O=E._40I,_=E._41I;(W=m._78o=O&&_?{looped:g,type:A,width:F,center:s,color:W,repeatImage:z(R("edge.repeat.image"),W),borderColor:y,borderWidth:x,_97o:w?m.getSelectColor():ft,selectWidth:w,pattern:R("edge.pattern"),cap:R("edge.cap"),join:R("edge.join"),is3d:R("edge.3d"),_67o:R("edge.3d.color"),_66o:R("edge.3d.accuracy"),gray:R("2d.gray")}:ft)&&((y=vt.getEdgeType(A))?(y=y(E,KJ(m,Z,E,g,A),Z,m._19Q)).points&&1<y.points.size()?(W.edgeTypeInfo=y,T=$2(W.edgeTypeInfo.points)):y[ke]&&y.rect&&(T=(W.edgeTypeInfo=y).rect):(y=R("edge.source.anchor.x"),v=R("edge.source.anchor.y"),H=R("edge.target.anchor.x"),f=R("edge.target.anchor.y"),B=NJ(Z,E,"source"),G=NJ(Z,E,"target"),A===De?(M=(J=W.points=R(be)||gJ).size(),W.segments=R("edge.segments"),y=y!==Ht||v!==Ht||Z1(O),v=H!==Ht||f!==Ht||Z1(_),s||(S?(y||(B=Aa(B,M?J.get(0):G,S,M)),v||(G=Aa(G,M?J.get(M-1):B,S,M))):(y||(Y=I1(B,M?J.get(0):G,yJ(Z,O)))&&(B={x:Y[0],y:Y[1]}),v||(Y=I1(M?J.get(M-1):B,G,yJ(Z,_)))&&(G={x:Y[0],y:Y[1]}))),T=V2($2(W.points),$2(B,G))):(H=KJ(m,Z,E,g,A),m._19Q||(H=-H),g?((B=o2(B)).x=Z.getNodeRect(O).x,W.radius=H,T={x:B.x-H,y:B.y-H,width:2*H,height:2*H}):(f=n2(B,G),v={x:y=UJ(S,f),y:H},J={x:f-y,y:H},M=ct(G.y-B.y,G.x-B.x),_=W.mat=new L9(M),W.orienAngle=M,W.angle=G.x<B.x?M+o:M,W.rect={x:v.x,y:v.y,width:J.x-v.x,height:0},W.origin=B,(v=_.tf(v)).x+=B.x,v.y+=B.y,(J=_.tf(J)).x+=B.x,J.y+=B.y,s?((Y=_.tf(Y={x:f,y:0})).x+=B.x,Y.y+=B.y,T=$2([B,v,J,Y]),W.c1=B,W.c2=Y):T=$2(v,J),B=v,G=J)),W.sourcePoint=B,W.targetPoint=G,E._lastSourcePoint=B,E._lastTargetPoint=G),A=0,R("edge.dash")&&(A=R("edge.dash.width")||F),g="square"===W.cap?.71:.5,l0(T,Gt(A*g,F*g+x+w),W.join),m._68o(T))},getRotation:function(T,B,G){T=T||0;var H=this._78o;if(H){var f,v=H.angle,J=H.points,M=H.edgeTypeInfo;if(v!=ft)return B?H.orienAngle+T:v+T;if(M&&M[ke])return M.getRotation?M.getRotation(this,T,B,G):0;if(M&&M.points)return f=(v=M.points).size(),wJ[G]?f&&f%2==0?lJ(v.get(f/2-1),v.get(f/2),B,T):T:xJ[G]?lJ(v.get(0),v.get(1),B,T):lJ(v.get(f-2),v.get(f-1),B,T);if(J)return f=J.size(),wJ[G]?f&&f%2==0?lJ(J.get(f/2-1),J.get(f/2),B,T):0===f?lJ(H.sourcePoint,H.targetPoint,B,T):T:xJ[G]?lJ(H.sourcePoint,f?J.get(0):H.targetPoint,B,T):lJ(f?J.get(f-1):H.sourcePoint,H.targetPoint,B,T)}return T},getPosition:function(T,B,G,H,f){var v=this._78o;if(v){var J=v.type,M=v.points,Y=v.edgeTypeInfo,m=v.sourcePoint,E=v.targetPoint;if(!J)return v.looped?{x:m.x-v.radius+B,y:m.y+G}:(f&&m&&E&&(m.x>E.x||m.x===E.x&&m.y>E.y)&&(T=_4[T],G=-G),(Z=p4(T,v.rect,H)).x+=B,Z.y+=G,(Z=v.mat.tf(Z)).x+=v.origin.x,Z.y+=v.origin.y,Z);if(Y&&Y[ke])return Y.getPosition?Y.getPosition(this,T,B,G,H,f):{x:(m.x+E.x)/2,y:(m.y+E.y)/2};if(M){var Z,R,A=M.size();if(wJ[T]){if(A){if(0==(R=A%2))return bJ(M.get(A/2-1),M.get(A/2),T,B,G,H,f);Z=M.get((A-R)/2)}else Z={x:(m.x+E.x)/2,y:(m.y+E.y)/2};return(Z=p4(T,{x:Z.x,y:Z.y,width:0,height:0},H)).x+=B,Z.y+=G,Z}return xJ[T]?bJ(m,A?M.get(0):E,T,B,G,H,f):bJ(A?M.get(A-1):m,E,T,B,G,H,f)}if(Y)return A=(J=Y.points).size(),wJ[T]?0==(R=A%2)?bJ(J.get(A/2-1),J.get(A/2),T,B,G,H,f):(Z=J.get((A-R)/2),(Z=p4(T,{x:Z.x,y:Z.y,width:0,height:0},H)).x+=B,Z.y+=G,Z):xJ[T]?bJ(J.get(0),J.get(1),T,B,G,H,f):bJ(J.get(A-2),J.get(A-1),T,B,G,H,f)}return Uw},_42:function(T){this._78o&&Ra.superClass._42.call(this,T)},drawPath:function(B,T){B.beginPath();var G,H,f,v,J=T.type,M=T.points,Y=T.segments,m=T.edgeTypeInfo;!J||M?(G=(H=T.sourcePoint).x,H=H.y,f=(v=T.targetPoint).x,v=v.y,J?Y?((J=new $({x:G,y:H})).addAll(M),J.add({x:f,y:v}),n0(B,J,Y)):(B.moveTo(G,H),M.each(function(T){B.lineTo(T.x,T.y)}),B.lineTo(f,v)):T.looped?B.arc(G,H,T.radius,0,mt,!0):T.center?(B.moveTo(T.c1.x,T.c1.y),B.lineTo(G,H),B.lineTo(f,v),B.lineTo(T.c2.x,T.c2.y)):(B.moveTo(G,H),B.lineTo(f,v))):m&&(m.points?n0(B,m.points,m.segments):m[ke]&&m[ke](B,m))},_80o:function(T){var B=this.s,G=this._78o,H=G.width,f=G.selectWidth,v=G.borderWidth,J=G.repeatImage,M=T.lineJoin,Y=T.lineCap,m=G.gray,E=G.pattern,Z=(T.lineJoin=G.join,T.lineCap=G.cap,this.drawPath(ds(T,E),G),B("edge.width.absolute")),f=(Z&&(T.save(),T.setTransform(1,0,0,1,0,0)),f&&(T.strokeStyle=G._97o,T.lineWidth=H+2*(v+f),T.stroke()),v&&(T.strokeStyle=m?vt.toGrayColor(G.borderColor):G.borderColor,T.lineWidth=H+2*v,T.stroke()),m?vt.toGrayColor(G.color):G.color);J?B4(T,J,f,null,this._data,this.gv):T.strokeStyle=f,T.lineWidth=H,T.stroke(),G.is3d&&(v=m?vt.toGrayColor(G._67o):G._67o,V0(T,f,v,H,this.gv._zoom,G._66o)),B("edge.dash")&&(E=B("edge.dash.pattern"),(J=ds(T,E,this._2Q("edge.dash.offset")))!==T&&this.drawPath(J,G),this._1Q(T,"edge",B("edge.dash.width")||H,E)),Z&&T.restore(),Ns(T,E),T.lineJoin=M,T.lineCap=Y},_48O:function(){},_47O:function(T){}}),function(T,B){O1(ga,this,[T,B])}),Fa=(Es(ga,Za,{_3O:function(){var B,G,T,H,f,v,J,M,Y,m,E,Z,R,A,g,F,W=this.s,s=this._data,S=this.gv;this._88I=ft,s.isExpanded()&&s.eachChild(function(T){r(T)&&(T=S.getBoundsForGroup(T))&&((G=G||[]).push(T),B=V2(B,T))}),B?(v=S.getLabel(s),f=W("group.type"),H=(T=W("group.border.width")||0)/2,W("group.border.width.absolute")&&(T/=S._zoom),Y=G,m=B,B="oval"===(M=f)?(E=0,R=m.height/m.width,Z=R*R,g=m.x+m.width/2,F=m.y+m.height/2,WN(Y).forEach(function(T){var B=T.x-g,T=T.y-F;E<(B=B*B+T*T/Z)&&(E=B)}),R*=E=ut(E),{x:g-E,y:F-R,width:2*E,height:2*R}):"circle"===M?(A=0,g=m.x+m.width/2,F=m.y+m.height/2,WN(Y).forEach(function(T){var B=T.x-g,T=T.y-F;A<(B=B*B+T*T)&&(A=B)}),A=ut(A),{x:g-A,y:F-A,width:2*A,height:2*A}):("roundRect"===M&&Bs(m,Jt(m.width,m.height)/16),m),eJ(B,s,"group.padding",1),Bs(B,T),s=this._88I={type:f,rect:B,_64o:B},f||v==ft||(f=this.labelInfo={label:v,color:W("group.title.color"),font:W("group.title.font"),align:W("group.title.align")},R=(v=z1(f,v)).width+T,v=v.height+T,Y=W("group.title.align"),(M=W("group.title.orientation"))===Ge||M===He?(B.height+=T,R>B.width&&(B.width=R)):M!==Te&&M!==Be||(B.width+=T,R>B.height&&(B.height=R)),Y=Y===Te?B.x:Y===Be?B.x+B.width-R:B.x+B.width/2-R/2,M===He?(s.titleRect={x:B.x,y:B.y+B.height,width:B.width,height:v},s.rect={x:B.x,y:B.y,width:B.width,height:B.height+v},f.rect={x:Y,y:B.y+B.height,width:R,height:v}):M===Te?(J=s.titleRect={x:B.x-v,y:B.y,width:v,height:B.height},s.rect={x:B.x-v,y:B.y,width:B.width+v,height:B.height},f.rect={x:J.x+v/2-B.height/2,y:J.y+B.height/2-v/2,width:B.height,height:v},f.rotation=-Math.PI/2):M===Be?(J=s.titleRect={x:B.x+B.width,y:B.y,width:v,height:B.height},s.rect={x:B.x,y:B.y,width:B.width+v,height:B.height},f.rect={x:J.x+v/2-B.height/2,y:J.y+B.height/2-v/2,width:B.height,height:v},f.rotation=Math.PI/2):(s.titleRect={x:B.x,y:B.y-v,width:B.width,height:v},s.rect={x:B.x,y:B.y-v,width:B.width,height:B.height+v},f.rect={x:Y,y:B.y-v-H,width:R,height:v+T})),this._40O(s,W("group.border.width")/2)):ga.superClass._3O.call(this)},getPosition:function(T,B,G,H){var f=this._88I;return f?((T=p4(T,f.rect,H)).x+=B,T.y+=G,T):ga.superClass.getPosition.apply(this,arguments)},_24O:function(T,B){var G=this._88I;G&&!G.type&&"label2"!==T||ga.superClass._24O.call(this,T,B)},_80o:function(T){var B=this._88I;if(B){var G=this._data,H=this.s,f=this.gv,v=B.type,J=B.rect,M=B._64o,Y=B.titleRect,m=this.getBodyColor(),E=z(H("group.image"),m),Z=H("group.image.stretch"),R=this.getBodyColor("group.background"),A=z(H("group.repeat.image"),m),g=H("group.gradient.pack"),F=H("group.gradient"),W=H("group.gradient.color"),s=H("group.border.width"),S=H("group.border.color"),y=H("group.border.pattern"),x=H("group.title.orientation"),w=H("group.depth"),O=H("group.border.radius"),_=H("group.border.join"),p=H("group.border.cap"),q=(H("group.border.width.absolute")&&(s/=f._zoom),S),u=H("group.border.repeat.image");if((u=u&&z(u,S))&&(q=G4(T,u,S,null,G,f,H("group.border.repeat.image.stretch"),J)),v)u=T.lineJoin,S=T.lineCap,T.lineJoin=_,T.lineCap=p,E?(T.save(),C0(T,v,J,O),T.clip(),u2(T,E,Z,J.x,J.y,J.width,J.height,G,f,m),T.restore(),0<s&&(i=ds(T,y),C0(i,v,J,O),T.lineWidth=s,T.strokeStyle=q,T.stroke(),Ns(T,y))):(i=ds(T,y),R||A||g?(C0(T,v,J,O),g?K0(T,g,function(T){return r0(T,m)},!1,J):A?T4(T,A,m,null,G,f,H("group.repeat.image.stretch"),J,H("group.repeat.image.rotation")):a0(T,R,F,W,J),T.fill(),g&&T.restore(),T!==i&&C0(i,v,J,O)):C0(i,v,J,O),0<s&&(T.lineWidth=s,T.strokeStyle=q,T.stroke()),Ns(T,y),v===j&&M4(T,R,w,J)),T.lineJoin=u,T.lineCap=S;else{var i,g=H("group.title.background");if((!O||O<0)&&(O=0),E)u2(T,E,Z,M.x,M.y,M.width,M.height,G,f,this.getBodyColor());else if(R||A)if(A?T4(T,A,m,null,G,f,H("group.repeat.image.stretch"),J,H("group.repeat.image.rotation")):a0(T,R,F,W,M),0===s)C0(T,j,M),T.fill(),M4(T,R,w,M);else{switch(T.beginPath(),x){case He:v4(T,M.x,M.y,M.width,M.height,O,O,0,0);break;case Te:v4(T,M.x,M.y,M.width,M.height,0,O,0,O);break;case Be:v4(T,M.x,M.y,M.width,M.height,O,0,O,0);break;case Ge:v4(T,M.x,M.y,M.width,M.height,0,0,O,O)}T.fill()}if(Y&&g)if(0===s)k0(T,Y.x,Y.y,Y.width,Y.height,g),M4(T,g,w,Y);else{switch(T.beginPath(),T.fillStyle=g,x){case He:v4(T,Y.x,Y.y,Y.width,Y.height,0,0,O,O);break;case Te:v4(T,Y.x,Y.y,Y.width,Y.height,O,0,O,0);break;case Be:v4(T,Y.x,Y.y,Y.width,Y.height,0,O,0,O);break;case Ge:v4(T,Y.x,Y.y,Y.width,Y.height,O,O,0,0)}T.fill()}0<s&&(i=ds(T,y),C0(i,"roundRect",J,O),T.save(),T.lineWidth=s,T.strokeStyle=q,T.lineJoin=_,T.lineCap=p,T.closePath(),T.stroke(),Y&&H("group.splitLine")&&(v=Y.x,u=Y.y,S=Y.width,E=Y.height,T.beginPath(),x===He?(T.moveTo(v,u),T.lineTo(v+S,u)):x===Te?(T.moveTo(v+S,u),T.lineTo(v+S,u+E)):x===Be?(T.moveTo(v,u),T.lineTo(v,u+E)):(T.moveTo(v,u+E),T.lineTo(v+S,u+E))),T.stroke(),T.restore(),Ns(i,y))}this._39O(T,B)}else ga.superClass._80o.call(this,T)}}),function(T,B){O1(Fa,this,[T,B])}),Wa=(Es(Fa,Za,{_80o:function(T){this._39O(T,this._83o)}}),function(T,B){O1(Wa,this,[T,B])}),sa=(Es(Wa,Za,{_3O:function(){var T=this._data,B=this.s,G=this.gv,H=T.getPoints(),f=G.getBorderColor(T),v=f?B("border.width"):0,J=this.getSelectWidth(),M=B("shape.border.width"),Y=T.getRect(),m=T.getAnchorRect(),G=G.getBodyColor(T),E=B("shape.border.color");(H=this._99o=H.isEmpty()?ft:{rect:Y,rotation:T.getRotation(),fillRule:B("shape.fill.rule"),scale:T.getScale(),position:T.p(),points:H,segments:T.getSegments(),bodyColor:G,borderColor:f,borderWidth:v,_94o:B("shape.border.3d"),_95o:B("shape.border.3d.color"),_96o:B("shape.border.3d.accuracy"),_97o:J?this.getSelectColor():ft,selectWidth:J,_53o:B("shape.background"),_27Q:z(B("shape.repeat.image"),G),shapeRepeatImageStretch:B("shape.repeat.image.stretch"),shapeRepeatImageRotation:B("shape.repeat.image.rotation"),shapeGradientPack:B("shape.gradient.pack"),shapeBorderGradientPack:B("shape.border.gradient.pack"),_54o:M,_55o:E,shapeBorderRepeatImage:z(B("shape.border.repeat.image"),E),shapeBorderRepeatImageStretch:B("shape.border.repeat.image.stretch"),shapeBorderRepeatImageRotation:B("shape.border.repeat.image.rotation"),shapeGradient:B("shape.gradient"),_59o:B("shape.gradient.color"),_60o:B("shape.border.pattern"),_61o:B("shape.border.cap"),_62o:B("shape.border.join"),shapeForeground:B("shape.foreground"),gray:B("2d.gray")})&&(m.x+=H.position.x,m.y+=H.position.y,H.gradientRect=m,f=T.getScale(),G=Gt(1,Gt(it(f.x),it(f.y))),B("shape.dash")&&B("shape.dash.width")>M&&(M=B("shape.dash.width")),(E=B("shape.border.width.absolute")?(M+v+J)/this.gv._zoom/G:M*("square"===H._61o?.71:.5)+v+J/this.gv._zoom/G)&&(E*=G,Y=o2(Y),l0(Y,E,H._62o)),this._68o(Y),(m=B("clip.percentage"))!=Ht&&(H.clipRect=e1(T.getAnchorRect(),B("clip.direction"),m)),(f=B("shape.fill.clip.percentage"))!=Ht&&(H.shapeClipRect=e1(T.getAnchorRect(),B("shape.fill.clip.direction"),f)),(M=B("shape.foreground.clip.percentage"))!=Ht&&(H.shapeForegroundClipRect=e1(T.getAnchorRect(),B("shape.foreground.clip.direction"),M)))},getPosition:function(T,B,G,H){var f=this._99o;return f?((T=p4(T,f.rect,H)).x+=B,T.y+=G,T):Uw},_42:function(T){this._99o&&Wa.superClass._42.call(this,T)},_80o:function(T){function B(T){return _?vt.toGrayColor(T):T}var G,H,f,v=this,J=v.s,M=v._99o,Y=M.position,m=M.scale,E=M.rotation,Z=M.borderWidth,R=v.gv._zoom,A=M.selectWidth/R,g=M._27Q,F=M.shapeGradientPack,W=M._54o,s=M.clipRect,S=M.shapeClipRect,y=M.points,x=M.segments,w=v._data.isClosePath(),O=M.fillRule,_=M.gray,p=B(M._53o),q=p||g||F,E=(T.save(),f0(T,Y.x,Y.y),v0(T,E),J0(T,m.x,m.y),s&&(T.beginPath(),T.rect(s.x,s.y,s.width,s.height),T.clip()),q&&S&&(T.save(),T.beginPath(),T.rect(S.x,S.y,S.width,S.height),T.clip()),L.Default.extractShapeTranslation?((y=o2(y)).forEach(function(T){T.x-=Y.x,T.y-=Y.y}),M.gradientRect.x-=Y.x,M.gradientRect.y-=Y.y):f0(T,-Y.x,-Y.y),J("shape.border.width.absolute")),m=M._60o,s=(E&&m&&(m=m.map(function(T){return T*R})),ds(T,m)),u=T.lineJoin,i=T.lineCap,I=(T.lineJoin=M._62o,T.lineCap=M._61o,B(M.bodyColor));q?(n0(T,y,x,w),F?K0(T,F,function(T){return r0(T,M.bodyColor)},!1,M.gradientRect):g?((f=M.shapeRepeatImageStretch)&&(G=$2(y)),T4(T,g,I,null,v._data,v.gv,f,G,M.shapeRepeatImageRotation)):a0(T,H=I||p,M.shapeGradient,B(M._59o),M.gradientRect),T.fill(O),F&&T.restore(),S&&(T.restore(),f0(T,-Y.x,-Y.y)),s!==T&&n0(s,y,x,w)):n0(s,y,x,w),(q=M.shapeForeground)&&(T.save(),(g=M.shapeForegroundClipRect)&&(f0(T,Y.x,Y.y),T.beginPath(),T.rect(g.x,g.y,g.width,g.height),T.clip(),f0(T,-Y.x,-Y.y)),n0(T,y,x,w),a0(T,q,J("shape.foreground.gradient"),B(J("shape.foreground.gradient.color")),M.gradientRect),T.fill(O),T.restore()),E&&(T.save(),T.setTransform(1,0,0,1,0,0)),A&&(T.strokeStyle=M._97o,T.lineWidth=W+2*(Z+A),T.stroke()),Z&&(T.strokeStyle=B(M.borderColor),T.lineWidth=W+2*Z,T.stroke()),W&&(H=B(M._55o),(F=M.shapeBorderGradientPack)?K0(T,F,B,!0,M.gradientRect):M.shapeBorderRepeatImage?((f=M.shapeBorderRepeatImageStretch)&&!G&&(G=$2(y)),B4(T,M.shapeBorderRepeatImage,H,null,v._data,v.gv,f,G,M.shapeBorderRepeatImageRotation)):T.strokeStyle=H=!p&&I?I:H,T.lineWidth=W,T.stroke(),F&&T.restore(),M._94o&&V0(T,H,B(M._95o),W,R,M._96o)),Ns(T,m),J("shape.dash")&&0<(S=J("shape.dash.width")||W)&&(m=J("shape.dash.pattern"),E&&(m=m.map(function(T){return T*R})),(s=ds(T,m,v._2Q("shape.dash.offset")))!==T&&n0(s,y,x,w),v._1Q(T,"shape",S,m)),E&&T.restore(),T.lineJoin=u,T.lineCap=i,T.restore()},_48O:function(){},_47O:function(T){}}),function(T,B){O1(sa,this,[T,B])}),Sa=(Es(sa,Wa,{getRotation:(D9=new b,h9=new b,o9=new Q9,function(T,B,G){T=T||0;var H,f,v=this._data,J=v.getPoints(),M=J.size();return 1<M?(f=v.p(),v=v.getScale(),o9.identity().translate(-f.x,-f.y).scale(v.x,v.y).translate(f.x,f.y),f=wJ[G]?(H=J.get((v=(M-M%2)/2)-1),J.get(v)):xJ[G]?(H=J.get(0),J.get(1)):(H=J.get(M-2),J.get(M-1)),o9.apply(H,D9),o9.apply(f,h9),lJ(D9,h9,B,T)):T}),getPosition:(u9=new b,i9=new b,I9=new b,function(T,B,G,H,f){var v=this._data,J=v.getPoints(),M=J.size();if(1<M){if(v=v.getPointsMatrix2d(),wJ[T]){var Y=M%2,m=(M-Y)/2,E=J.get(m-1),m=J.get(m);if(0!=Y)return(Y=p4(T,Uw,H)).x+=B,Y.y+=G,v.apply(E,u9),v.apply(m,i9),v.identity().rotate(I9.copy(i9).sub(u9).angle()).apply(Y,u9).add(i9)}else m=xJ[T]?(E=J.get(0),J.get(1)):(E=J.get(M-2),J.get(M-1));return v.apply(E,u9),v.apply(m,i9),bJ(u9,i9,T,B,G,H,f)}return Uw})}),function(T,B){O1(Sa,this,[T,B])}),ya=(Es(Sa,Za,{_3O:function(){Sa.superClass._3O.call(this);var T=this.s,B=this._83o;this._82o=B.img||B.shape?ft:{background:this.getBodyColor("grid.background"),depth:T("grid.depth"),rect:B.rect,_88o:T("grid.cell.depth"),cellBorderColor:T("grid.cell.border.color"),_89o:T("grid.row.count"),_90o:T("grid.column.count"),block:T("grid.block"),_91o:T("grid.block.color"),_92o:T("grid.block.padding"),_93o:T("grid.block.width")}},_80o:function(T){var B=this._82o;if(B){var G,H,f=this._data,v=B.background,J=B.rect,M=B.block,Y=B._91o,m=B._92o,E=B._93o,Z=B._88o,R=B.cellBorderColor,A=B._89o,g=B._90o;if(v)if(k0(T,J.x,J.y,J.width,J.height,v),M4(T,v,B.depth,J),Z)for(G=0;G<A;G++)for(H=0;H<g;H++)(J=f.getCellRect(G,H))&&M4(T,v,Z,J);else if(R){for(T.beginPath(),G=0;G<A;G++)for(H=0;H<g;H++)(J=f.getCellRect(G,H))&&T.rect(J.x,J.y,J.width,J.height);T.strokeStyle=R,T.lineWidth=1,T.stroke()}if("h"===M)for(G=0;G<A;G++)J=V2(f.getCellRect(G,0),f.getCellRect(G,g-1)),Bs(J,m),J4(T,Y,J.x,J.y,J.width,J.height,E);else if("v"===M)for(H=0;H<g;H++)J=V2(f.getCellRect(0,H),f.getCellRect(A-1,H)),Bs(J,m),J4(T,Y,J.x,J.y,J.width,J.height,E);this._39O(T,this._83o)}else Sa.superClass._80o.call(this,T)}}),function(T,B){O1(ya,this,[T,B])}),xa=R?X1().getContext("2d"):ft,H=(Es(ya,Za,{_checkEmptyRect:!1,_81o:function(){var J,T,M,B,G,H,Y,m,f,v,E,Z,R,A,g,F=this._data,W=ya.superClass._81o.call(this),s=F.s("text");return s!=ft&&(s+="",J=F.s("text.font"),A=F.s("text.align"),T=F.s("text.vAlign"),Z=F.s("text.wrap"),E=F.s("text.vertical"),M=F.s("text.vertical.gap"),g=F.s("text.letter.gap")||0,B=F.getWidth(),G=F.getHeight(),null==M&&(M=1),E?(Y=((R=Z?n1(s,G,J,g,E,M):[s]).length-1)*g,m=0,xa.textBaseline=Ge,xa.font=J,R.forEach(function(T){for(var B=T.length,G=0,H=(B-1)*M,f=0;f<B;f++){var v=xa.measureText(T[f]);H+=v.fontBoundingBoxDescent||Q2(J,T[f]).height,G=Gt(G,v.width)}Y+=G,m=Gt(H,m)}),R.length,R.forEach(function(T){}),H={width:Y,height:m}):1<(Z=(R=Z?n1(s,B,J,g,E,M):s.split("\n")).length)?(E=Q2(J,s).height,Y=0,m=E*Z+M*(Z-1),R.forEach(function(T){Y=Gt(Y,Q2(J,T).width)}),H={width:Y,height:m}):(H=Q2(J,s),g&&(H.width+=(s.length-1)*g)),E=H.width,Z=H.height,R=F.getAnchor(),"left"===A?f=-B*R.x:"center"===A?f=-B*R.x+(B-E)/2:"right"===A&&(f=B*(1-R.x)-H.width),"top"===T?v=-G*R.y:"middle"===T?v=-G*R.y+(G-Z)/2:"bottom"===T&&(v=G*(1-R.y)-H.height),s=F.getMatrix(),g=$2([s.tf(f,v),s.tf(f+E,v),s.tf(f+E,v+Z),s.tf(f,v+Z)]),(W=V2(W,g))&&F.s("text.shadow")&&((A=o2(W)).x+=F.s("text.shadow.offset.x"),A.y+=F.s("text.shadow.offset.y"),Bs(A,F.s("text.shadow.blur")),W=V2(W,A))),W}}),nJ.Interactor=function(T){this.gv=this._graphView=T}),wa=(T("Interactor",N,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(T){this.gv.fi(T)},setCursor:function(T){$t||this.gv.setCursor(T)},startDragging:function(T){this._lastClientPoint=K2(T),this._lastLogicalPoint=this.gv.lp(T),fs(this,T)},clearDragging:function(T){this._lastClientPoint=this._lastLogicalPoint=this._logicalPoint=ft},autoScroll:function(T){return this.gv.autoScroll(T,this._lastClientPoint)}}),ft),Oa=function(T){wa.handleWindowTouchMove(T)},_a=function(T){wa.handleWindowTouchEnd(T),Bt(Q,Gw,Oa),Bt(Q,Hw,_a),wa=ft},pa=function(T){wa.handleWindowMouseMove(T)},qa=function(T){wa.handleWindowMouseUp(T),Bt(Q,CB,pa),Bt(Q,aB,qa),wa=ft},ua=function(T){var B=this;B.gv=T,B._is2d=T instanceof nJ.GraphView,B._eventListeners={},["mousedown","mousemove","mouseleave","touchstart","touchmove","touchend","mouseup",Jw,"wheel"].forEach(function(T){B.addListener(T)}),B.initImageResource()},ia=(Es(ua,H,{enableVR:function(T){!!this._vrEnable!==T&&((this._vrEnable=T)?this.gv.vr.mp(this.onVRControllerChange,this):this.gv.vr.ump(this.onVRControllerChange,this))},onVRControllerChange:function(T){var B=T.property,G=(T=T.newValue).id,H=this.gv.vr.getController(G).getRay();if(H)switch(H.controllerId=G,this.gv.vr.getRayEventType(H,B,T[uB])){case"down":this.handle_mousedown(H);break;case"up":wa&&qa(H);break;case"move":this.handle_mousemove(H),wa&&this.handleWindowMouseMove(H)}},setPreventEventDefault:function(T,B){var G=this._eventListeners[T];G?G._prevent=B:this._eventListeners[T]=G={_removal:Ht,_prevent:B}},removeListener:function(T){(T=this._eventListeners[T])&&T._removal&&(T._removal(),T._removal=Ht)},addListener:function(B){var T,G=this,H=G._eventListeners[B];H||(G._eventListeners[B]=H={_removal:Ht,_prevent:!0}),H&&H._removal||(T=function(T){H._prevent&&vt.preventDefault(T),G.disabled||G.gv._48Q||("wheel"===B?y1(G,T):G["handle_"+B](T))},Tt(G.gv.getView(),B,T),H._removal=function(){Bt(G.gv.getView(),B,T)})},handleWindowTouchMove:function(T){this.handleWindowMouseMove(T)},handleWindowMouseMove:function(T){!this.downInfo||R0(T)&&1!==X2(T)?this.isDragging&&(this.handleDownInfo("onEndDrag",T),this.isDragging=!1):this.isDragging?this.handleDownInfo("onDrag",T):(this.handleDownInfo("onBeginDrag",T),this.isDragging=!0)},handleWindowTouchEnd:function(T){this.handleWindowMouseUp(T)},handleWindowMouseUp:function(T){if(this.isDragging&&(this.handleDownInfo("onEndDrag",T),this.isDragging=!1),this.downInfo){var B=this.handle("onUp",T);if(B&&B.data===this.downInfo.data){this.handleMissingUp(T);var G=this,H=2===T.button?"onContextMenu":"onClick";if(B.data.s("disableDoubleClick")||!G._dbclickTimer)return void(G._dbclickTimer=jt(function(){delete G._dbclickTimer,G.handleClick(T,H,B),this.downInfo=ft},vt.clickDelay));rt(G._dbclickTimer),delete G._dbclickTimer,H="onDoubleClick",G.handleClick(T,H,B)}else this.handleDownInfo("onUp",T);this.downInfo=ft,this.downComps=ft}},handle_mouseleave:function(T){var B=this,G=B.gv,H=(B._hoverTimer&&(rt(B._hoverTimer),delete B._hoverTimer),B.currentInfo?B.currentInfo.data:ft);if(H){if(H.s("onLeave")&&H.s("onLeave")(T,H,G),B.fire("data","onLeave",T,H),G=B.currentInfo?B.currentInfo.hits:ft)for(var f in G)B.handleLeave(T,f);B.currentInfo=ft}},handle_mousewheel:function(T){T.scrollDelta=T.wheelDelta/40,this.handle("onScroll",T)},handle_DOMMouseScroll:function(T){T.scrollDelta=2===T.axis?-T.detail:0,this.handle("onScroll",T)},handle_touchstart:function(T){this.handle_mousedown(T)},handle_touchmove:function(T){this.handle("onMove",T)},handle_mousedown:function(T){var B;this.isDragging&&(this.handleDownInfo("onEndDrag",T),this.isDragging=!1),this.downComps=[],this.downInfo=this.handle("onDown",T),this.downInfo&&this!==wa&&(B=R0(T),wa?B?wa.handleWindowTouchEnd(T):wa.handleWindowMouseUp(T):B?(Tt(Q,Gw,Oa),Tt(Q,Hw,_a)):(Tt(Q,CB,pa),Tt(Q,aB,qa)),wa=this)},handle_touchend:function(T){this.handle_mouseup(T)},handle_mouseup:function(T){this.downInfo||this.isDragging||this.handle("onUp",T)},handle_mousemove:function(T){var B=this,G=B.gv;if(B._hoverTimer&&(rt(B._hoverTimer),delete B._hoverTimer),!G._panning&&!G._moving){var H,f,v,J=B.handle("onMove",T),M=this.currentInfo?this.currentInfo.data:ft,Y=this.currentInfo?this.currentInfo.hits:ft;if(J&&(f=J.data,v=J.hits,B._hoverTimer=jt(function(){rt(B._hoverTimer),delete B._hoverTimer,B.handle("onHover",T,J)},G.getHoverDelay()||vt.hoverDelay)),f!==M){if(M&&(M.s("onLeave")&&M.s("onLeave")(T,M,G),this.fire("data","onLeave",T,M)),f&&(f.s("onEnter")&&f.s("onEnter")(T,f,G),this.fire("data","onEnter",T,f)),Y)for(H in Y)this.handleLeave(T,H);if(v)for(H in v){var m,E,Z=v[H];(E=(m=f._interactPrefix=Z.prefix)&&f.a(m+"onEnter")||Z.target.onEnter)&&E.call(Z.target,T,f,G,Z.point,Z.width,Z.height),this.fire(Z.type,"onEnter",Z.event,Z.data,Z.image,Z.comp,Z.point,Z),f._interactPrefix=null}}else{if(Y)for(H in Y)v&&v[H]||this.handleLeave(T,H);if(v)for(H in v)Y&&Y[H]||(Z=v[H],(E=(m=f._interactPrefix=Z.prefix)&&f.a(m+"onEnter")||Z.target.onEnter)&&E.call(Z.target,T,f,G,Z.point,Z.width,Z.height),this.fire(Z.type,"onEnter",Z.event,Z.data,Z.image,Z.comp,Z.point,Z),f._interactPrefix=null)}this.currentInfo=J}},handle:function(T,B,G){var H,f=this.gv;if(this._is2d){if((G=G||f.getDataInfoAt(B))&&f.isInteractive(G.data))return(H=G.ui.interactiveInfo)&&((J=G.data).s(T)&&J.s(T)(B,J,f),this.fire("data",T,B,J),"body"===G.part&&H.bodyInfo?G.hits=this.handleImage(v="body",f.getImage(J),T,B,J,G.point,H.bodyInfo):"icons"===G.part&&H._38o&&(E=H._38o[G.name])&&E[G.index]&&(v="icons|"+G.name+"|"+G.index,G.hits=this.handleImage(v,G.icon,T,B,J,G.point,E[G.index]))),G}else{if(!G)if(B&&B instanceof L.Math.Ray&&f.isVREnabled()){var v=f.vr.intersectWorld(B),J=v.data,M=v.intersect;if(f.vr.renderRayDuringInteraction(B,J,M),!J)return;if(!(H=(Y=f.getData3dUI(J)).interactiveInfo))return;G={data:J,part:M.part,ui:Y}}else{if(!(G=f.getDataInfoDuringInteract(B)))return;G=G&&{data:G.data,part:G.part}}if(f.isInteractive(G.data)){if(!M){J=G.data;var Y=f.getData3dUI(J);if(!(H=(G.ui=Y).interactiveInfo))return G}if(J.s(T)&&J.s(T)(B,J,f),this.fire("data",T,B,J),!M&&!(M=f.intersectObject(B,J)))return G;var m,E=M.part;return(m=(m="body"!==E?J.s(E+".image")||J.s("shape3d."+E+".image"):m)||J.s("all.image")||J.s("shape3d.image"))&&(H="object"==typeof m?H[m.uuid]:H[m])&&H.bodyInfo&&(G.part="body",G.interactiveInfo=H,G.point=this._convertUVToPoint(M.uv,H,J,E,m),G.image=m,G.hits=this.handleImage("body",m,T,B,J,G.point,H.bodyInfo)),G}}},_handleLeaveOrMissing:function(T,B,G){var H,f,v,J,M,Y="leave"===T?this.currentInfo:this.downInfo;Y&&(H=Y.interactiveInfo||Y.ui.interactiveInfo)&&(f=Y.data,this._is2d?(J=this.gv.lp(B),"body"===Y.part&&H.bodyInfo?(M="body","leave"===T?this.handleLeaveImage(G,M,this.gv.getImage(f),B,f,J,H.bodyInfo):this.handleMissingUpImage(M,this.gv.getImage(f),B,f,J,H.bodyInfo)):"icons"===Y.part&&H._38o&&(v=H._38o[Y.name])&&v[Y.index]&&(M="icons|"+Y.name+"|"+Y.index,"leave"===T?this.handleLeaveImage(G,M,Y.icon,B,f,J,v[Y.index]):this.handleMissingUpImage(M,Y.icon,B,f,J,v[Y.index]))):H.bodyInfo&&(J=(M=this.gv.intersectObject(B,f))&&M.uv?this._convertUVToPoint(M.uv,H,f,M.part,Y.image):{x:1/0,y:1/0},"leave"===T?this.handleLeaveImage(G,"body",Y.image,B,f,J,H.bodyInfo):this.handleMissingUpImage("body",Y.image,B,f,J,H.bodyInfo)))},handleClick:function(T,B,G){var H,f,v,J,M=this.downInfo;M&&G&&(H=G.interactiveInfo||G.ui.interactiveInfo,f=G.data,J=this.gv,f.s(B)&&f.s(B)(T,f,J),this.fire("data",B,T,f),H&&(this._is2d?M.part===G.part&&(v=J.lp(T),"body"===G.part&&H.bodyInfo&&this.handleClickImage("body",J.getImage(f),B,T,f,v,H.bodyInfo,G)):H.bodyInfo&&(J=J.intersectObject(T,f))&&(v=this._convertUVToPoint(J.uv,H,f,J.part,M.image),this.handleClickImage("body",M.image,B,T,f,v,H.bodyInfo,G))))},handleDownInfo:function(T,B){var G,H,f,v,J,M,Y,m;this.downInfo&&(G=this.downInfo,H=this.gv,(f=G.interactiveInfo||G.ui.interactiveInfo)&&((J=G.data).s(T)&&J.s(T)(B,J,H),this.fire("data",T,B,J),this._is2d?(M=H.lp(B),"body"===G.part&&f.bodyInfo?this.handleDownInfoImage(v="body",H.getImage(J),T,B,J,M,f.bodyInfo):"icons"===G.part&&f._38o&&(Y=f._38o[G.name])&&Y[G.index]&&(v="icons|"+G.name+"|"+G.index,this.handleDownInfoImage(v,G.icon,T,B,J,M,Y[G.index]))):f.bodyInfo&&("onBeginDrag"===T?(m=H._raycaster.intersectObjectAndRecordTriangle(B,J))&&(f.beginDragIntersectInfo=m.triangleInfo):m=H.intersectObject(B,J),(m=m||("onDrag"!==T&&"onEndDrag"!==T||!f.beginDragIntersectInfo?m:H._raycaster.intersectLastTriangle(B,f.beginDragIntersectInfo)))&&(M=this._convertUVToPoint(m.uv,f,J,m.part,G.image),this.handleDownInfoImage("body",G.image,T,B,J,M,f.bodyInfo)))))},fire:function(T,B,G,H,f,v,J,M){this.gv.fi({kind:B,type:T,event:G,data:H,image:f,comp:v,view:this.gv,point:J,width:M?M.width:Ht,height:M?M.height:Ht})},handleImage:function(T,B,G,H,f,v,J){var M={};if(B=B&&z(B))for(var Y,m=this.gv,E=J.rect,Z=((g=this.convertPoint(v,J)).inRect&&(B[G]&&B[G](H,f,m,g,E.width,E.height),this.fire("image",G,H,f,B,Ht,g,E),M[T+"|image"]={target:B,type:"image",image:B,data:f,event:H,point:g,width:E.width,height:E.height}),J.compInfos),R=B,A=Z.length-1;0<=A;A--){var g,F=(W=Z[A]).comp;if((g=this.convertPoint(v,W,R,F,m,f)).inRect){var W,E=W.rect,s=(W=f._interactPrefix=W.prefix)&&f.a(W+G)||F[G];if(s&&(Y=s.call(F,H,f,m,g,E.width,E.height)),this.fire("comp",G,H,f,B,F,g,E),!0!==Y&&(B=E.image)&&(B[G]&&(Y=B[G](H,f,m,g,E.width,E.height)),this.fire("image",G,H,f,B,Ht,g,E)),f._interactPrefix=null,M[T+"|"+A]={target:F,type:"comp",comp:F,image:B,data:f,event:H,point:g,width:E.width,height:E.height,prefix:W},this.downComps&&this.downComps.push(F),B&&(M[T+"|"+A+"|image"]={target:B,type:"image",image:B,data:f,event:H,point:g,width:E.width,height:E.height,prefix:W}),!0===Y)break}}return M},handleLeave:function(T,B){return this._handleLeaveOrMissing("leave",T,B)},handleMissingUp:function(T){return this._handleLeaveOrMissing("missing",T)},handleLeaveImage:function(T,B,G,H,f,v,J){if(G=G&&z(G))for(var M,Y=this.gv,m=J.rect,E=this.convertPoint(v,J),Z=(T===B+"|image"&&(G.onLeave&&G.onLeave(H,f,Y,E,m.width,m.height),this.fire("image","onLeave",H,f,G,Ht,E,m)),J.compInfos),R=G,A=Z.length-1;0<=A;A--){var g=(F=Z[A]).comp,E=this.convertPoint(v,F,R,g,Y,f),m=F.rect,F=f._interactPrefix=F.prefix;if(T===B+"|"+A&&((F=F&&f.a(F+"onLeave")||g.onLeave)&&(M=F.call(g,H,f,Y,E,m.width,m.height)),this.fire("comp","onLeave",H,f,G,g,E,m)),!0!==M&&(G=m.image)&&T===B+"|"+A+"|image"&&(G.onLeave&&(M=G.onLeave(H,f,Y,E,m.width,m.height)),this.fire("image","onLeave",H,f,G,Ht,E,m)),!(f._interactPrefix=null)===M)break}},handleMissingUpImage:function(T,B,G,H,f,v){var J="onUp",M=this.downInfo.hits;if(M&&B&&(B=z(B)))for(var Y,m=this.gv,E=v.rect,Z=(!(g=this.convertPoint(f,v)).inRect&&M[T+"|image"]&&(B.onUp&&B.onUp(G,H,m,g,E.width,E.height),this.fire("image",J,G,H,B,Ht,g,E)),v.compInfos),R=B,A=Z.length-1;0<=A;A--){var g,F=(W=Z[A]).comp;if(!(g=this.convertPoint(f,W,R,F,m,H)).inRect){var E=W.rect,W=H._interactPrefix=W.prefix;if(M[T+"|"+A]&&((W=W&&H.a(W+J)||F.onUp)&&(Y=W.call(F,G,H,m,g,E.width,E.height)),this.fire("comp",J,G,H,B,F,g,E)),!0!==Y&&(B=E.image)&&M[T+"|"+A+"|image"]&&(B.onUp&&(Y=B.onUp(G,H,m,g,E.width,E.height)),this.fire("image",J,G,H,B,Ht,g,E)),!(H._interactPrefix=null)===Y)break}}},handleDownInfoImage:function(T,B,G,H,f,v,J){var M=this.downInfo.hits;if(M&&B&&(B=z(B)))for(var Y,m=this.gv,E=J.rect,Z=this.convertPoint(v,J),R=(M[T+"|image"]&&(B[G]&&B[G](H,f,m,Z,E.width,E.height),this.fire("image",G,H,f,B,Ht,Z,E)),J.compInfos),A=B,g=R.length-1;0<=g;g--){var F=(W=R[g]).comp,Z=this.convertPoint(v,W,A,F,m,f),E=W.rect,W=f._interactPrefix=W.prefix,s=0<=["onDrag","onEndDrag"].indexOf(G);if((!s&&M[T+"|"+g]||s&&this.downComps&&0<=this.downComps.indexOf(F))&&((s=W&&f.a(W+G)||F[G])&&(Y=s.call(F,H,f,m,Z,E.width,E.height)),this.fire("comp",G,H,f,B,F,Z,E)),!0!==Y&&(B=E.image)&&M[T+"|"+g+"|image"]&&(B[G]&&(Y=B[G](H,f,m,Z,E.width,E.height)),this.fire("image",G,H,f,B,Ht,Z,E)),!(f._interactPrefix=null)===Y)break}},handleClickImage:function(T,B,G,H,f,v,J,M){var Y=this.downInfo.hits,m=M.hits;if(Y&&B&&(B=z(B)))for(var E,Z=this.gv,R=J.rect,A=this.convertPoint(v,J),g=(Y[T+"|image"]&&(B[G]&&B[G](H,f,Z,A,R.width,R.height),this.fire("image",G,H,f,B,Ht,A,R)),J.compInfos),F=B,W=g.length-1;0<=W;W--){var s=(S=g[W]).comp,A=this.convertPoint(v,S,F,s,Z,f),R=S.rect,S=f._interactPrefix=S.prefix;if(Y[T+"|"+W]&&m[T+"|"+W]&&((S=S&&f.a(S+G)||s[G])&&(E=S.call(s,H,f,Z,A,R.width,R.height)),this.fire("comp",G,H,f,B,s,A,R)),!0!==E&&(B=R.image)&&Y[T+"|"+W+"|image"]&&(B[G]&&(E=B[G](H,f,Z,A,R.width,R.height)),this.fire("image",G,H,f,B,Ht,A,R)),!(f._interactPrefix=null)===E)break}},initImageResource:function(){vt.setImage("coreInteractorRayHitImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",opacity:.3,rotation:-1.593,rect:[.73315,.6933,14.5337,14.61341]},{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",rotation:-1.593,rect:[3.56695,3.75073,8.8661,8.49856]}]})},_convertUVToPoint:function(T,B,G,H,f){if(!T)return{x:1/0,y:1/0};var v,B=B.bodyInfo.rect,H=(G&&f&&(H="body"===H?(v=G.s("shape3d.uv.scale"),G.s("shape3d.uv.offset")):(v=G.s(H+".uv.scale")||G.s("all.uv.scale"),G.s(H+".uv.offset")||G.s("all.uv.offset")),(v||H)&&(f=vt.getImage(f),G=l.isPOT(f.width)&&l.isPOT(f.height),f=T.x*(v?v[0]:1)+(H?H[0]:0),v=T.y*(v?v[1]:1)+(H?H[1]:0),G&&(f=f%1+(0<f?0:1),v=v%1+(0<v?0:1)),T.set(f,v))),T.clone());return(G=T.multiply({x:B.width,y:B.height})).local=H,G},convertPoint:function(T,B,G,H,f,v){var J=B.rect,M=B.matrix.applyInverse(T).sub(J);if(!(0<=M.x&&0<=M.y&&M.x<=J.width&&M.y<=J.height))return M;if(H&&n(H.pixelPerfect,v,f)){var Y=1,m=!1,T=(J=this._is2d?(Y=f.getZoom(),G1(T.x,T.y,Ht,Y)):G1(T.x,T.y)).x,E=J.y,Z=J.width,R=Z*(J=J.height)*Y*Y,A=((A=vt.hitMaxArea)<R&&(Y*=Math.sqrt(A/R)),T*=Y,E*=Y,j0(Z=(Z*=Y)<2?2:Z,J=(J*=Y)<2?2:J)),T=((R=new Q9(0,-T,-E,Y,Y)).append(B.matrix),f._drawForChecking=!0,H.transform=R,G.fitSize),E=(B.refRect&&B.refRect.fitSize?(H.refRect=B.refRect,G.fitSize=!0):G.fitSize=!1,G.comps);G.comps=[H],as(A,G,0,0,Z,J,v,self),G.comps=E,G.fitSize=T,delete H.refRect,delete H.unionRect,delete H.transform,f._drawForChecking=!1;try{for(var g=0,F=A.getImageData(0,0,Z,J).data;g<F.length;g+=4)if(0!==F[g+3]){m=!0;break}A.restore()}catch(T){N0=ft,m=!1}M.inRect=m}else M.inRect=!0;return M}}),nJ.DefaultInteractor=function(T){O1(ia,this,[T])}),Ia=(T("DefaultInteractor",H,{handle_mousedown:function(T){_2(T);var B,G=this.gv,H=G.getDataAt(T);!G.setFocus(T)||G._editing||G._scrolling||(U2(T)?G.handleDoubleClick(T,H):G.handleClick(T,H),B=j2(T),!o0()&&!B&&H&&(G.isMovable(H)||G._39Q(H))||!G.isPannable()||!L2(T)&&!B||b2(T)||(this._tx=G.tx(),this._ty=G.ty(),this.startDragging(T)))},handleWindowMouseUp:function(T){var B=this.gv;B._panning&&(delete B._panning,B.onPanEnded(),this.fi({kind:"endPan",event:T})),delete this._tx,delete this._ty,this.clearDragging()},handle_mousemove:function(T){var B=this,G=B.gv;B._hoverTimer&&(rt(B._hoverTimer),delete B._hoverTimer),B._hoverTimer=jt(function(){B.fi({kind:"hover",event:T}),rt(B._hoverTimer),delete B._hoverTimer},G.getHoverDelay()||vt.hoverDelay)},handle_mouseleave:function(T){this._hoverTimer&&(rt(this._hoverTimer),delete this._hoverTimer)},handleWindowMouseMove:function(T){var B=this.gv,T=(this.fi({kind:B._panning?"betweenPan":"beginPan",event:T}),B._panning=1,jJ(B,T,this._lastClientPoint));B.setTranslate(this._tx+T.x,this._ty+T.y)},handle_mousewheel:function(T){this.gv.handleScroll(T,T.wheelDelta)},handle_DOMMouseScroll:function(T){2===T.axis&&this.gv.handleScroll(T,-T.detail)},handle_keydown:function(T){this.gv.handleKeyDown(T)}}),nJ.SelectInteractor=function(T){O1(Ia,this,[T])}),Da=(T("SelectInteractor",H,{_42:function(){var T=this.gv,B=T.getZoom(),G=this.mark,H=this.div,f=(H||(H=this.div=r1(),K1(this.getView(),H)),{});f.x=G.x*B+T.tx(),f.y=G.y*B+T.ty(),f.width=G.width*B,f.height=G.height*B,D(H,f),this.intersects()?(H.style.border="",H.style.background=T.getRectSelectBackground()):(H.style.background="",H.style.border="1px solid "+T.getRectSelectBorderColor())},handle_mousedown:function(T){var B,G,H=this.gv;this._57I=ft,this.pendingClickThrough=ft,H._editing||H._scrolling||o0()||j2(T)||(B=H.getDataAt(T),G=H.sm(),B?b2(T)?G.co(B)?G.rs(B):G.as(B):G.co(B)?B instanceof nW&&B.isClickThroughEnabled()&&L2(T)&&(this.pendingClickThrough=K2(T)):G.ss(B):b2(T)||!H.isPannable()?L2(T)&&(b2(T)||G.cs(),H.isRectSelectable()&&(this.startDragging(T),H._77O=1)):L2(T)&&(this._57I=K2(T)))},handle_mouseup:function(T){var B,G=this.gv,H=this._57I;H&&(n2(H,K2(T))<=1&&G.sm().cs(),this._57I=ft),this.pendingClickThrough&&(n2(this.pendingClickThrough,K2(T))<=1&&(B=G.getDataAt(T))instanceof nW&&B.isClickThroughEnabled()&&(H=G.getDataAt(T,function(T){return T.getParent()===B&&G.isSelectable(T,!0)}))&&(T.clickThrough=!0,G.sm().ss(H)),this.pendingClickThrough=ft)},handleWindowMouseUp:function(T){this.clear(T)},handleWindowMouseMove:function(T){var B=this,G=B.gv;B._logicalPoint=G.lp(T),B.mark?(B.fi({kind:"betweenRectSelect",event:T}),G.isPannable()&&B.autoScroll(T),B.redraw()):B.fi({kind:"beginRectSelect",event:T}),B.mark=$2(B._lastLogicalPoint,B._logicalPoint),B.redraw()},intersects:function(){var T=this._lastLogicalPoint,B=this._logicalPoint;return T.x>B.x||T.y>B.y},clear:function(T){var B,G,H,f,v=this,J=v.gv,M=v.mark;v._57I=ft,v.pendingClickThrough=ft,v._lastLogicalPoint&&(M&&(0===M.width||0===M.height||(M=J.getDatasInRect(M,v.intersects())).isEmpty()||(B=J.sm(),G=B.toSelection(),H=l2(T),f=T.altKey,M.each(function(T){B.co(T)?H&&!f||G.remove(T):(!f||H&&f)&&G.add(T)}),B.ss(G)),vs(v.div),delete v.div,delete v.mark,v.redraw(),v.fi({kind:"endRectSelect",event:T}),J.onRectSelectEnded()),v.clearDragging(),delete J._77O)},redraw:function(){var T=this;T._draw||(T._draw=1,jt(function(){T.mark&&T._42(),delete T._draw},16))}}),nJ.MoveInteractor=function(T){O1(Da,this,[T])}),ha=(T("MoveInteractor",H,{handle_mousedown:function(T){var B,G=this.gv;!L2(T)||G._editing||G._scrolling||o0()||(!(B=G.getSelectedDataAt(T))||G._39Q(B)&&!G.isMovable(B)?G._focusData=ft:(this._data=B,G.handleMouseDown&&G.handleMouseDown(T,B),this.startDragging(T),G.isMovable(B)&&(G._moving=1)))},handleWindowMouseUp:function(T){var B=this.gv;B.handleMouseUp&&B.handleMouseUp(T,this._data),this.clear(T)},handleWindowMouseMove:function(T){var B,G,H,f,v=this,J=v._data,M=v.gv;M._93O&&M._93O(T,J)||M._moving&&(v._logicalPoint||v.fi({kind:"prepareMove",event:T}),B={kind:f=v._logicalPoint?"betweenMove":"beginMove",event:T},G=v._logicalPoint=M.lp(T),"beginMove"!=f||v._alreadyBeginTransaction||(v._alreadyBeginTransaction=!0,M.getDataModel().beginTransaction()),H=(f=v._calcShift(f,T)).x,f=f.y,(J=v.gv.getMoveMode(T,J))&&("x"===J?f=0:"y"===J?H=0:"xy"!==J&&(H=f=0)),M.moveSelection(H,f),v._lastLogicalPoint=G,v.autoScroll(T),v.fi(B))},_calcShift:function(T,B){var G=this._logicalPoint,H=this._lastLogicalPoint;return{x:G.x-H.x,y:G.y-H.y}},clear:function(T){var B=this.gv;this._lastLogicalPoint&&(this._lastLogicalPoint=this._data=B._moving=ft,this._logicalPoint&&(this.fi({kind:"endMove",event:T}),B.onMoveEnded()),this.clearDragging()),this._alreadyBeginTransaction&&(this._alreadyBeginTransaction=!1,B.getDataModel().endTransaction())}}),nJ.TextEditInteractor=function(T){O1(ha,this,[T]),this.init()}),oa=(T("TextEditInteractor",H,{setUp:function(){ha.superClass.setUp.call(this),this.gv.mp(this.handleGvPropertyChange,this)},teatDown:function(){ha.superClass.teatDown.call(this),this.gv.ump(this.handleGvPropertyChange,this)},handleGvPropertyChange:function(T){this._editTarget&&this.endTextEdit()},init:function(){function T(T){T.stopPropagation()}var G=this,B=this.input=R.createElement("input"),H=B.style,f=(B.text="text",H.border="1px solid #d8d8d8",H.position="absolute",H.padding="2px 3px",H.outline="none",H.marginLeft="-90px",H.marginTop="-16px",H.backgroundColor="rgba(255,255,255, 1)",H.fontSize="14px",H.width="180px",H.height="32px",H.boxShadow="0 0 13px rgba(16,142,233, 0.5)",H.textAlign="center",H.boxSizing="border-box",Tt(B,"keyup",function(T){e0(T)&&G.endTextEdit(),c0(T)&&G.endTextEdit(!0)}),Tt(B,"focus",function(T){B.select()}),this.textarea=R.createElement("textarea")),v=this.wrap=R.createElement("div");v.appendChild(f),(H=f.style).margin=0,H.padding="4px",H.overflow="hidden",H.boxSizing="border-box",H.position="absolute",H.outline="none",H.backgroundColor="transparent",H.resize="none",H.textAlign="center",H.fontSize="14px",H.borderWidth=0,H.width="100%",(H=v.style).boxSizing="border-box",H.margin=0,H.padding=0,H.position="absolute",H.boxShadow="0 0 13px rgba(16,142,233, 0.5)",H.border="1px solid #d8d8d8",H.backgroundColor="rgba(255,255,255, 1)",H.zIndex="10",Tt(f,"keydown",function(T){(l2()||b2())&&e0(T)?G.endTextEdit():c0(T)?G.endTextEdit(!0):G._editTarget instanceof $W||G.calculateTextareaHeight(String.fromCharCode(T.keyCode))}),Tt(f,"focus",function(T){f.select()}),Tt(B,"mousedown",T),Tt(B,"touchstart",T),Tt(f,"mousedown",T),Tt(f,"touchstart",T),Tt(f,"click",T),G.SIZING_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],G.HIDDEN_TEXTAREA_STYLE="visibility:hidden; min-height:0 !important;max-height:none !important;height:0 !important;visibility:hidden !important;overflow:hidden !important;position:absolute !important;z-index:-1000 !important;top:0 !important;right:0 !important",G.handleWindowClick=function(T){var B=G._editingDOM;B&&(B=B.getBoundingClientRect(),T=K2(T),P2(B,T)||G.endTextEdit())}},handle_mousedown:function(T){var B,G=this.gv;U2(T)&&!G._editing&&(T=G.getDataAt(T))&&(B=G.getTextEditInfo(T))&&(this._editInfo=B,this._editTarget=T,G._editing=!0,B.isMultiline?this.handleMultilineEdit():this.handleTextEdit())},handleMultilineEdit:function(){var T=this,B=T.gv,G=T._editTarget,H=T.getTargetValue(),f=T.textarea,v=T.wrap,J=this._editInfo;this.hiddenTextarea||this.createHiddenTextarea(),f.value=H=null!==H&&H!==Ht?H:"",J.font&&(f.style.font=J.font),T._editingDOM=f,B.appendHTML(v),this.layoutHTML(v,G),G instanceof $W?f.style.height="100%":(f.style.height="auto",this.calculateTextareaHeight()),jt(function(){f.focus(),Tt(Q,"mousedown",T.handleWindowClick),Tt(Q,"touchstart",T.handleWindowClick)},10)},handleTextEdit:function(){var T=this,B=T.gv,G=T._editTarget,H=T.getTargetValue(),f=T.input;f.value=H=null!==H&&H!==Ht?H:"",T._editingDOM=f,B.getView().appendChild(f),this.layoutHTML(f,G),jt(function(){f.focus(),Tt(Q,"mousedown",T.handleWindowClick),Tt(Q,"touchstart",T.handleWindowClick)},10)},layoutHTML:function(T,B){var G,H,f,v,J=this.gv,M=J.getZoom();B instanceof $W?(v=(f=J.getDataUI(B))._6I,H=B.getScale(),G=T.style,T.style.left=v.x*M+J.tx()+"px",T.style.top=v.y*M+J.ty()+"px",T.style.width=f._6I.width+"px",T.style.height=f._6I.height+"px",T0(G,"transform","scale("+M*H.x+","+M*H.y+")"),T0(G,"transformOrigin","0px 0px")):B instanceof LW?(H=(v=B.getRect()).width*M,T.style.left=(v.x+v.width/2)*M+J.tx()+"px",T.style.top=(v.y+v.height/2)*M+J.ty()+"px",T.style.width=H+"px",T.style.marginLeft=-H/2+"px"):B instanceof L.Edge&&(v=(f=J.getDataUI(B))._6I,T.style.left=(v.x+v.width/2)*M+J.tx()+"px",T.style.top=(v.y+v.height/2)*M+J.ty()+"px")},endTextEdit:function(T){var B=this,G=B._editInfo.isMultiline?B.wrap:B.input,H=B._editInfo.isMultiline?B.textarea:B.input;T||B.setTargetValue(H.value),B.gv.getView().removeChild(G),B.gv._editing=!1,delete B._editingDOM,delete B._editTarget,Bt(Q,"mousedown",B.handleWindowClick),Bt(Q,"touchstart",B.handleWindowClick)},setTargetValue:function(T){var B=this._editTarget,G=this._editInfo,H=G.accessType;(G=G.name)&&H||(H="p",G="name"),"p"===H?B[L.Default.setter(G)](T):"a"===H?B.a(G,T):B.s(G,T)},getTargetValue:function(){var T=this._editTarget,B=this._editInfo,G=B.accessType;return(B=B.name)&&G||(G="p",B="name"),"p"===G?T[L.Default.getter(B)]():"a"===G?T.a(B):T.s(B)},createHiddenTextarea:function(){this.hiddenTextarea=R.createElement("textarea"),this.hiddenTextarea.setAttribute("style","margin:0; padding:0; position:absolute; overflowY:scroll; resize:none; box-sizing:border-box;pointer-events: none;opacity:0;"),this.hiddenTextarea.setAttribute("rows","1"),this.gv.getView().appendChild(this.hiddenTextarea)},calculateHTMLStyle:function(T,B){if(B&&this.computedStyleCache)return this.computedStyleCache;var G=Q.getComputedStyle(T),T=G.getPropertyValue("box-sizing")||G.getPropertyValue("-moz-box-sizing")||G.getPropertyValue("-webkit-box-sizing"),H=parseFloat(G.getPropertyValue("padding-bottom"))+parseFloat(G.getPropertyValue("padding-top")),f=parseFloat(G.getPropertyValue("border-bottom-width"))+parseFloat(G.getPropertyValue("border-top-width")),H={sizingStyle:this.SIZING_STYLE.map(function(T){return T+":"+G.getPropertyValue(T)}).join(";"),paddingSize:H,borderSize:f,boxSizing:T};return B&&(this.computedStyleCache=H),H},calculateTextareaHeight:function(T){T=T||"";var B=this.textarea,G=this.hiddenTextarea,H=this.wrap,f=(M=this.calculateHTMLStyle(B,!1)).paddingSize,v=M.borderSize,J=M.boxSizing,M=M.sizingStyle,M=(G.setAttribute("style",M+";"+this.HIDDEN_TEXTAREA_STYLE),G.value=B.value+T,G.scrollHeight);"border-box"===J?M+=v:"content-box"===J&&(M-=f),B.style.height=M+"px",H.style.height=Math.max(M,32)+"px",H.style.marginTop=-.5*M+"px"}}),nJ.ScrollBarInteractor=function(T){O1(oa,this,[T])}),ea=(T("ScrollBarInteractor",H,{_41o:function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},_40o:function(){return this.gv.getViewRect().width<this.gv.getScrollRect().width},isV:function(T){var B=this.gv.getViewRect();return this._41o()&&(B.x+B.width-this.gv.lp(T).x)*this.gv.getZoom()<W2},isH:function(T){var B=this.gv.getViewRect();return this._40o()&&(B.y+B.height-this.gv.lp(T).y)*this.gv.getZoom()<W2},handle_mousemove:function(T){this.handle_touchmove(T)},handle_touchmove:function(T){var B;!g0&&L2(T)&&this.gv.isScrollBarVisible()&&(B=this.isV(T),T=this.isH(T),(B||T)&&this.gv.showScrollBar(),this.gv._scrolling=B||T)},handleWindowMouseUp:function(T){this.handleWindowTouchEnd(T)},handleWindowTouchEnd:function(T){this._state=this._cp=this._tx=this._ty=this.gv._scrolling=ft,this.fi({kind:"endScroll",event:T})},handle_mousedown:function(T){this.handle_touchstart(T)},handle_touchstart:function(T){var B,G=this;G.gv.setFocus(T),_2(T),G.handle_touchmove(T),1<X2(T)||!G.gv._scrolling||!G.gv.isScrollBarVisible()||(G._cp=K2(T),G._tx=G.gv.tx(),G._ty=G.gv.ty(),B=G.isV(T),G._state=B?"vScroll":"hScroll",fs(G,T),G.fi({kind:"beginScroll",event:T}))},handleWindowMouseMove:function(T){this.handleWindowTouchMove(T)},handleWindowTouchMove:function(T){var B=K2(T),G=this.gv.getViewRect(),H=this.gv.getScrollRect();"vScroll"===this._state?this.gv.ty(this._ty+(this._cp.y-B.y)*H.height/G.height):"hScroll"===this._state&&this.gv.tx(this._tx+(this._cp.x-B.x)*H.width/G.width),this.fi({kind:"betweenScroll",event:T})}}),nJ.TouchInteractor=function(T,B){(B=B||{}).selectable===Ht&&(B.selectable=!0),B.movable===Ht&&(B.movable=!0),B.pannable===Ht&&(B.pannable=!0),B.pinchable===Ht&&(B.pinchable=!0),B.editable===Ht&&(B.editable=!0),this.params=B,O1(ea,this,[T])});T("TouchInteractor",H,{ms_edit:1,setUp:function(){ea.superClass.setUp.call(this),$t&&this.params.editable&&this.gv.setEditInteractor(this)},tearDown:function(){ea.superClass.tearDown.call(this),$t&&this.params.editable&&this.gv.setEditInteractor(ft)},clear:function(T){var B=this,G=B.gv;G._moving&&(B.fi({kind:"endMove",event:T}),delete G._moving,G.onMoveEnded(),G.dm().endTransaction()),G._panning&&(B.fi({kind:"endPan",event:T}),delete G._panning,G.onPanEnded()),G._pinching&&(B.fi({kind:"endPinch",event:T}),delete G._pinching,G.onPinchEnded()),G._editing&&(B._46O(T),B._77I=B._node=B._edge=B._shape=B._rect=B._89I=B._index=G._editing=ft),B.pendingClickThrough=B._moving=B._panning=B._pinching=B._editing=B._57I=B._data=B._beginHistory=ft,B.clearDragging()},handle_touchstart:function(T){var B,G,H,f,v,J=this;J.gv._editing||(_2(T),J._57I=ft,J.pendingClickThrough=ft,B=J.params,H=(G=J.gv).sm(),f=G.getDataAt(T),1===(v=X2(T))?U2(T)?G.handleDoubleClick(T,f):(G.handleClick(T,f),f&&(G.handleMouseDown&&G.handleMouseDown(T,f),J._data=f),(f=B.selectable?f:ft)&&(H.co(f)?f instanceof nW&&f.isClickThroughEnabled()&&(J.pendingClickThrough=K2(T)):H.ss(f),B.editable&&G.isEditable(f)&&J._79I(T,f,!0)?(J._editing=1,J.startDragging(T)):B.movable&&G.isMovable(f)&&(J._moving=1,J.startDragging(T))),f&&(G.isMovable(f)||G._39Q(f))||(J._57I=K2(T),B.pannable&&G.isPannable()&&(J._panning=1,J.startDragging(T),J._translate={x:G.tx(),y:G.ty()}))):!B.pinchable||2!==v||!G.getEditInteractor()&&f&&(H=z(G.getImage(f)))&&n(H.scrollable,f,this)||(J._pinching=1,J.startDragging(T),B=G.getView(),v=G.getZoom(),H=B.getBoundingClientRect(),f=T.touches[0],B=T.touches[1],(f={x:(f.clientX+B.clientX)/2-H.left,y:(f.clientY+B.clientY)/2-H.top}).x-=G.tx(),f.y-=G.ty(),f.x/=v,f.y/=v,J._p=f,J._d=F4(T)))},handle_touchend:function(T){var B=this.gv,G=this._57I,H=this._data;G&&(n2(G,K2(T))<=1&&!B.getDataAt(T)&&B.sm().cs(),this._57I=ft),H&&B.handleMouseUp&&B.handleMouseUp(T,H),this.pendingClickThrough&&(n2(this.pendingClickThrough,K2(T))<=1&&(H=B.getDataAt(T))instanceof nW&&H.isClickThroughEnabled()&&(G=B.getDataAt(T,function(T){return T.getParent()===H&&B.isSelectable(T,!0)}))&&(T.clickThrough=!0,B.sm().ss(G)),this.pendingClickThrough=ft)},handleWindowTouchEnd:function(T){this.clear(T)},handleWindowTouchMove:function(T){var B,G,H=this,f=H.gv,v=X2(T);1===v?(B=K2(T),B=jJ(f,B,H._lastClientPoint),G=n2({x:0,y:0},B),H._editing&&(H._beginHistory||(H._beginHistory=1,f.dm().beginTransaction()),f._editing=1,H._78I(T)),H._moving?!f._moving&&G<vt.touchMoveThreshold||(H._beginHistory||(H._beginHistory=1,f.dm().beginTransaction()),H.handleMove(T)):!H._panning||!f._panning&&G<vt.touchMoveThreshold||(f.setTranslate(H._translate.x+B.x,H._translate.y+B.y),H.fi({kind:f._panning?"betweenPan":"beginPan",event:T}),f._panning=1)):2===v&&H._pinching&&(G=F4(T),f.handlePinch(H._p,G,H._d),H._d=G,H.fi({kind:f._pinching?"betweenPinch":"beginPinch",event:T}),f._pinching=1)},handleMove:function(T){var B=this.gv,G=B.lp(T);B._93O&&B._93O(T,this._data)||(B.moveSelection(G.x-this._lastLogicalPoint.x,G.y-this._lastLogicalPoint.y),this._lastLogicalPoint=G,this.autoScroll(T),this.fi({kind:B._moving?"betweenMove":"beginMove",event:T}),B._moving=1)}});var ca,V=(L=Q.ht).graph._editor={Math:L.Math,Guide:{},getStyle:function(T){var B=V.StyleMap;return B&&(B=B[T])!==Ht?B:V.DefaultStyleMap[T]},setStyle:function(T,B){(V.StyleMap||(V.StyleMap={}))[T]=B},inEdit:function(T){return!0===T._inXEdit},startEdit:function(T){T._inXEdit=!0,V.Inject.doInject(T)},_46O:function(T){T._inXEdit=!1,V.Inject.undoInject(T)},toScreenPosition:function(T,B){var G=T.tx(),H=T.ty(),T=T._zoom;return new V.Math.Vector2(B.x*T+G,B.y*T+H)},checkHit:function(T,B,G){return T.distanceTo(B)<G},toWorldPosition:function(T,B){var G=T.tx(),H=T.ty(),T=T._zoom;return{x:(B.x-G)/T,y:(B.y-H)/T}},setAntialias:function(T,B){for(var G,H=["imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","msImageSmoothingEnabled"],f=0,v=H.length;f<v&&!((G=H[f])in T);f++);T[G],T[G]=B},getTargetCornersOnScreen:function(B,T){if(!T)return null;var G=[];if(A1(T,B))var H=[{x:(H=yJ(B,T)).x,y:H.y},{x:H.x+H.width,y:H.y},{x:H.x+H.width,y:H.y+H.height},{x:H.x,y:H.y+H.height}];else{if(!T.getCorners)return null;H=T.getCorners()}return H.forEach(function(T){T=V.toScreenPosition(B,T),G.push(T.x,T.y)}),G},log:function(){},updateTipInfo:function(T,B,G){ca=G?((T=L.Default.getLogicalPoint(T,B._canvas)).x+=V.Icons.TipShiftX,T.y+=V.Icons.TipShiftY,{helperPos:T,text:G,size:G.length}):ft},drawTip:function(T,B){ca&&V.Icons.DrawIcon(B,T,V.Icons.TipHelper,ca)}},ta=V.Inject={_modules:[],registAsModule:function(G,H){var T,f={},B={};for(T in G){var v=H.prototype[T];f[T]=v}G.getBackup=function(T){return f[T]},G.getBackups=function(){return f},B.doInject=function(T){for(var B in G)"getBackup"!==B&&(H.prototype[B]=G[B])},B.undoInject=function(T){for(var B in G)"getBackup"!==B&&(H.prototype[B]=f[B])},ta._modules.push(B)},doInject:function(T){for(var B=ta._modules,G=0,H=B.length;G<H;G++)B[G].doInject(T)},undoInject:function(T){for(var B=ta._modules,G=0,H=B.length;G<H;G++)B[G].undoInject(T)}},da=H=L.graph.EditInteractor=function(T){var B=this,G=R.createElement("canvas");G.className="editCanvas",G.style.position="absolute",B._uuid=L.Math.generateUUID(),B._styleMap={},B._canvas=G,B._context=G.getContext("2d"),H.superClass.constructor.call(B,T),this._editDetail=!1,V.setAntialias(B._context,!1),B._subModules=B.initSubModule(),B._gridGuide=new V.Guide.Grid(B),B._rectGuide=new V.Guide.Rect(B),B._hoverGuide=new V.Guide.Hover(B)};L.Default.def(H,L.graph.Interactor,{ms_edit:1,ms_fire:1}),N.defineProperties(H.prototype,{editDetail:{get:function(){return!!this._editDetail},set:function(T){var B=this._editDetail;B!==T&&(this._editDetail=T,this.gv._editing=T,this.fp("editDetail",B,T),this.fp("pointsEditingMode",B,T),this.fi({kind:T?"beginEditPoints":"endEditPoints"}))}},gvEditing:{get:function(){return this.gv._editing},set:function(T){this._editDetail&&!T||(this.gv._editing=T)||(this.editDetail=!1)}},editing:{get:function(){return this._editing},set:function(T){this._editing=T,this.gvEditing=T}},editingModule:{get:function(){return this._editMod}},pointsEditingMode:{get:function(){return this.editDetail},set:function(T){this.editDetail!==T&&(T?this._tryEnterEditDetailMode():this._tryQuitEditDetailMode())}},gridEnabled:{get:function(){return!!this._gridEnabled&&(this.gv,!0)},set:function(T){T!==this._gridEnabled&&(this._gridEnabled=T,this._42())}},alignmentGuideEnabled:{get:function(){return this._agEnabled},set:function(T){T!==this._agEnabled&&(this._agEnabled=T,this._42())}},gridGuide:{get:function(){return this._gridGuide}},rectGuide:{get:function(){return this._rectGuide}},hoverGuide:{get:function(){return this._hoverGuide}}}),H.prototype.initSubModule=function(){return[new V.Anchor(this),new V.RotateX(this),new V.MoveDummy(this),new V.Rect(this),new V.Curve(this),new V.MoveHelper(this)]},H.prototype.getSubModule=function(T){for(var B,G=this._subModules,H=0,f=G.length;H<f;H++)if((B=G[H]).catalog===T)return B},H.prototype.invokeSubModule=function(T,B){for(var G,H,f=this._subModules,v=Array.prototype.slice.call(arguments,2),J=0,M=f.length;J<M;J++)if((H=(G=f[J])[T])&&H.apply(G,v)!=Ht&&B)return G},H.prototype.invokeSubModuleInverse=function(T,B){var G=this._subModules;if(G)for(var H,f,v=Array.prototype.slice.call(arguments,2),J=G.length-1;0<=J;J--)if((f=(H=G[J])[T])&&f.apply(H,v)!=Ht&&B)return H},H.prototype.setUp=function(){V.log("setUp");var T=this.gv,B=T.getView(),G=this._canvas;H.superClass.setUp.call(this),T.setEditInteractor(this),T._79O?B.insertBefore(G,T._79O):B.appendChild(G),V.startEdit(T),this.invokeSubModule("setUp"),T.dm().mm(this._onDataModelChanged,this),T.dm().md(this._onDataPropertyChanged,this)},H.prototype.tearDown=function(){V.log("tearDown");var T=this,B=T.gv,G=B.getView();T._resetCustomCursorStyle(),H.superClass.tearDown.call(T),B.dm().umm(T._onDataModelChanged,T),B.dm().umd(T._onDataPropertyChanged,T),B.setEditInteractor(null),G.removeChild(T._canvas),T._drawTimer&&(rt(T._drawTimer),T._drawTimer=null),V._46O(B),T.invokeSubModule("tearDown")},H.prototype._onDataModelChanged=function(T){("clear"===T.kind||"remove"===T.kind&&this.editDetail&&T.data===this.getSubModule("Curve").target)&&(this.editDetail=!1,this._42())},H.prototype._onDataPropertyChanged=function(T){var B,G;this.editDetail&&(B=this.getSubModule("Curve"),(G=T.data)!==B.target||G._writing||B._handleDataChanged(T))},H.prototype.clear=function(){V.log("clear")},H.prototype.redraw=function(){this._42()},H.prototype._42=function(){var T=this;T._drawTimer||(T._drawTimer=jt(function(){T._drawTimer=null,T.drawImpl()},0))},H.prototype.drawImpl=function(){for(var M in{_42:!0})break;return function(){var T=this._canvas,B=this.gv,G=B.getWidth(),H=B.getHeight(),f=this._context,v=L.Default.getInternal(),J=vt.devicePixelRatio,v=(T.width===G&&T.height===H||v.setCanvas(T,G,H,J),f.clearRect(0,0,T.width,T.height),this._getValidSelection());f.save(),f.scale(J,J),this._gridGuide._42(),this.invokeSubModuleInverse(M,!1,f,B,v),this._rectGuide._42(),this._hoverGuide._42(),f.restore()}}(),H.prototype._getValidSelection=function(){var B=this.gv,T=B.sm().getSelection(),G=[];return T.each(function(T){B.isVisible(T)&&B.isEditable(T)&&G.push(T)}),G},H.prototype.handle_touchmove=function(T){return this.handle_mousemove(T)},H.prototype.handle_mousemove=function(T){if(!L.Default.isDragging()&&(this.editDetail||!o0()&&!j2(T))&&!this.gv._externalEditing){if(this.gvEditing=!1,this._checkEdit(T))this.gvEditing=!0;else{if(!this.getStyle("hoverGuideVisible"))return;this.hoverData=this.gv.getDataAt(T)}this._42()}},H.prototype.handle_touchstart=function(T){return this.handle_mousedown(T)},H.prototype.handle_mousedown=function(T){_2(T);var B=this;if((B.editDetail||!o0()&&!j2(T))&&!B.gv._externalEditing){if(U2(T)&&!T.clickThrough){if(B.editDetail){if(B._tryQuitEditDetailMode(T))return}else if(B._tryEnterEditDetailMode())return;B.gv.dm().beginTransaction();var G=B.invokeSubModule("handleDoubleClick",!0,T);if(B.gv.dm().endTransaction(),G)return}(G=B._checkEdit(T))&&(B._downPosition=B._getLogicalPoint(T),B.gv.dm().beginTransaction(),G.startEdit(B,T),B.editing=!0)}},H.prototype._checkEdit=function(T){var B=this.gv,G=this._getLogicalPoint(T),B=this.invokeSubModule("check",!0,B,T,G)||null;return this._editMod=B},H.prototype.handleWindowTouchMove=function(T){return this.handleWindowMouseMove(T)},H.prototype.handleWindowMouseMove=function(T){var B=this._downPosition;if(B){if(this._getLogicalPoint(T).distanceTo(B)<this.getStyle("moveSensitivity"))return;delete this._downPosition}(B=this._editMod)&&B.handleEdit(this.gv,T),this.redraw()},H.prototype._getLogicalPoint=function(T){return T=L.Default.getLogicalPoint(T,this._canvas),new V.Math.Vector2(T)},H.prototype.handleWindowTouchEnd=function(T){return this.handleWindowMouseUp(T)},H.prototype.handleWindowMouseUp=function(){for(var B in{_46O:!0})break;return function(T){this.editing=!1,this.setCursor("default"),this.invokeSubModule(B,!1,T),this._42(),this.gv.dm().endTransaction()}}(),H.prototype.handle_mousewheel=function(T){_2(T),this.invokeSubModule("preHandleScroll",!0)||this.gv.handleScroll(T,T.wheelDelta)},H.prototype.handleDelete=function(){var T;if(!this.editDetail)return this.gv.dm().beginTransaction(),T=this.invokeSubModule("handleNormalStateDelete",!0),this.gv.dm().endTransaction(),void(T||this.gv.removeSelection());this.gv.dm().beginTransaction(),this.invokeSubModule("handleDelete",!0),this.gv.dm().endTransaction(),this._42()},H.prototype.handle_keydown=function(T){var B,G=this;return(T.metaKey||T.ctrlKey)&&G._42(),o0(T)&&!G.editing?(G.gvEditing=!1,G.setCursor("default"),void G._42()):(B=e0(T),G.editDetail?((B||c0(T))&&(G.editDetail=!1,G._42()),G.gv.dm().beginTransaction(),G.invokeSubModule("handle_keydown",!0,T),void G.gv.dm().endTransaction()):(G.gv.dm().beginTransaction(),G.invokeSubModule("handleNormalStateKeyDown",!0,T),G.gv.dm().endTransaction(),void(B&&G._tryEnterEditDetailMode())))},H.prototype.handle_keyup=function(T){this.gv.dm().beginTransaction(),this.invokeSubModule("handle_keyup",!0,T),this.gv.dm().endTransaction()},H.prototype._tryEnterEditDetailMode=function(){if(!this.editDetail&&this.invokeSubModule("canEnterEditDetailMode",!0)&&1===this._getValidSelection().length)return this.editDetail=!0,this._42(),!0},H.prototype._tryQuitEditDetailMode=function(T){return!(!this.editDetail||T&&!this.invokeSubModule("canQuitEditDetailMode",!0,T)||(this.editDetail=!1,this._42(),0))},H.prototype.setStyle=function(T,B,G){G?V.setStyle(T,B):this._styleMap[T]=B,"baseColor"===T&&(ja=B),this.fp("styleChanged",null,{key:T,value:B,base:G}),this._42()},H.prototype.getStyle=function(T,B){var G=this._styleMap[T];return G!==Ht?G:V.getStyle(T)},H.prototype.setCursor=function(T){this._resetCustomCursorStyle(),L.graph.EditInteractor.superClass.setCursor.call(this,T)},H.prototype._drawHostGuide=function(T){var B=this._context,G=this.gv,H=(V.Icons.DrawIcon(this,B,V.Icons.NodeHoverGuide,T.corners),T.host);if(H){var f=G.getAttachPoints(H);if(f&&f.length)for(var v=0,J=f.length;v<J;v++){var M=f[v],M=QJ(G,H,0,M.offsetX||0,M.offsetY||0,M.x,M.y);(M=V.toScreenPosition(G,M)).isAttach=T.attach===v,V.Icons.DrawIcon(this,B,V.Icons.AttachPoint,M)}}},H.prototype._resetCustomCursorStyle=function(){var T;this._customStyle&&((T=this.gv.getView()).classList&&T.classList.remove&&T.classList.remove(this._customStyle),this._customStyle=null)},H.prototype._setRotateCursor=function(T){var T=(this._cursorFactory||(this._cursorFactory=new V.CursorFactory(this))).getRotateCursor(T),B=this.gv.getView();this._resetCustomCursorStyle(),this._customStyle=T,B.classList&&B.classList.add&&B.classList.add(T)};((v=V.Group=function(T){this._entities=T,this._64O=0,this._position={x:0,y:0},this._scale={x:1,y:1},this._anchor={x:.5,y:.5},this._anchor2={x:.5,y:.5}}).prototype={}).constructor=v;var Na=null,Qa=null;v.findOrCreateGroup=function(T,B){return Qa===B&&Na&&Na.checkIsMe(T)?Na:(Qa=B,(B=new V.Group(T)).getKeyOb()?Na=B:void 0)},v.prototype.checkIsMe=function(T){var B=this._entities;if(B.length!==T.length)return!1;for(var G={},H=T.length,f=0;f<H;f++)G[T[f]._id]=!0;for(f=0;f<H;f++)if(!G[B[f]._id])return!1;return!0},v.prototype.getRotation=function(){return this._64O},v.prototype.getPosition=function(){return this._position},v.prototype.getAnchor=function(){return this._anchor},v.prototype.getWidth=function(){return this._width},v.prototype.getScale=function(){return this._scale},v.prototype.getSize=function(){return{width:this._width,height:this._height}},v.prototype.getHeight=function(){return this._height},v.prototype.getKeyOb=function(){for(var T=this._entities,B=T.length-1;0<=B;B--){var G=T[B];if(this.isNode(G))return G}},v.prototype.getAnchor2=function(){var T=this.rotateCenter;if(T)return T;if(!(T=this.getKeyOb()))return this._anchor;var B=this._anchor2;return T.getMatrix().tf({x:T.getWidth()*(B.x-T.getAnchor().x),y:T.getHeight()*(B.y-T.getAnchor().y)})},v.prototype.setAnchor2=function(T,B){var G=this.getKeyOb();G&&(B="number"==typeof T?{x:T,y:B}:T,T=G.getMatrix().tfi(B),this._anchor2={x:G.getAnchor().x+T.x/G.getWidth(),y:G.getAnchor().y+T.y/G.getHeight()})},v.prototype.setRotation=function(T){},v.prototype.beginRotate=function(T){this.rotateCenter=T.pos,this.rotateMode=T.groupRotateMode},v.prototype.endRotate=function(){delete this.rotateCenter,delete this.rotateMode},v.prototype.addRotation=function(T,B,G){return"batch"===B?this._addRotationInBatchMode(T,G):"block"===B?this._addRotationInBlockMode(T,G):void 0},v.prototype._addRotationInBlockMode=function(H,f){var v=this,J=v.rotateCenter||v.getPosition();v._entities.forEach(function(T){var B,G;!v.isNode(T)||f&&!f(T)||((B=T.getMatrix()).translate(-J.x,-J.y),B.rotate(H),B.translate(J.x,J.y),G=Math.sign(T.getScale().x),T.setRotation(ct(B.b*G,B.a*G)),T.setPosition(B.tx,B.ty))})},v.prototype._addRotationInBatchMode=function(f,v){var J=this,M=J._anchor2;J._entities.forEach(function(T){var B,G,H;!J.isNode(T)||v&&!v(T)||(B=T.getAnchor(),B=(H=T.getMatrix()).tf({x:T.getWidth()*(M.x-B.x),y:T.getHeight()*(M.y-B.y)}),(G=new V.Math.Matrix2d).set(H.a,H.b,H.c,H.d,H.tx,H.ty),G.translate(-B.x,-B.y),G.rotate(f),G.translate(B.x,B.y),H=Math.sign(T.getScale().x),T.setRotation(ct(G.b*H,G.a*H)),T.setPosition(G.tx,G.ty))})},v.prototype.setPosition=function(T){for(var B,G,H=this._position,f=T.x-H.x,v=T.y-H.y,J=this._entities,M=0,Y=J.length;M<Y;M++)B=J[M],r(B)&&(G=B.getPosition(),B.setPosition(G.x+f,G.y+v));this._position=T},v.prototype.setScale=function(T,B){var G=T/this._scale.x,H=B/this._scale.y;this._adjustChildScaleOrSize(G,H,"size"),this._scale={x:T,y:B}},v.prototype.getRect=function(){var T=this._position,B=this._width,G=this._height;return{x:T.x-B/2,y:T.y-G/2,width:B,height:G}},v.prototype.setSize=function(T,B){var T=Math.max(1,T),B=Math.max(1,B),G=T/this._width,H=B/this._height;this._adjustChildScaleOrSize(G,H,"size"),this._width=T,this._height=B},v.prototype._adjustChildScaleOrSize=function(T,B,G){for(var H,f=this._position,v=this._entities,J=new V.Math.Matrix2d,M=0,Y=v.length;M<Y;M++){var m,E,Z,R,A,g,F,W=v[M];this.isNode(W)&&(m=W.getPosition(),E=W.getRotation(),Z=W.getWidth(),R=W.getHeight(),g=(A=W.getScale()).x*Z,F=A.y*R,J.identity().scale(g,F).rotate(E).translate(m.x,m.y).translate(-f.x,-f.y).rotate(-this._64O),E=ct(J.b*Math.sign(g),J.a*Math.sign(g)),J.scale(T,B),F=Math.cos(E),m=Math.sin(E),g=Math.abs(F)<.001?(H=J.b/m,-J.c/m):(H=J.a/F,J.d/F),"scale"===G?W.setScale(H/Z,g/R):"size"===G&&(E=H/A.x,m=g/A.y,W.setScale(i1(H)*Math.abs(A.x),i1(g)*Math.abs(A.y)),W.setSize(Math.max(.1,Math.abs(E)),Math.max(.1,Math.abs(m)))),J.rotate(this._64O).translate(f.x,f.y),W.setPosition(J.tx,J.ty))}},v.prototype.getMatrix=function(){var T=this._position,B=L.Default.getInternal(),G=this._scale;return new B.Mat(this._64O,T.x,T.y,G.x,G.y)},v.prototype.toGlobal=function(T){return this.getMatrix().tf(T)},v.prototype.getCorners=function(){var T=this._width,B=this._height,G=-T*(H=this._anchor).x,H=-B*H.y,f=this.getMatrix();return[f.tf(G,H),f.tf(G,H+B),f.tf(G+T,H+B),f.tf(G+T,H)]},v.prototype.calcInfo=function(){for(var T,B,G=[],H=this._entities,f=this._64O,v=0,J=H.length;v<J;v++)B=H[v],this.isNode(B)&&B.getCorners&&G.push.apply(G,B.getCorners());if(G.length){for(var M=Math.cos(-f),Y=Math.sin(-f),m=1/0,E=-1/0,Z=1/0,R=-1/0,v=0,J=G.length;v<J;v++)A=(T=G[v]).x,g=T.y,T.x=M*A-Y*g,T.y=Y*A+M*g,m=Math.min(m,T.x),E=Math.max(E,T.x),Z=Math.min(Z,T.y),R=Math.max(R,T.y);this._width=(E-m)/this._scale.x,this._height=(R-Z)/this._scale.y;var M=Math.cos(f),Y=Math.sin(f),A=m+(E-m)*(f=this._anchor).x,g=Z+(R-Z)*f.y;this._position={x:M*A-Y*g,y:Y*A+M*g}}},v.prototype.isNode=function(T){return!(!r(T)||A1(T)&&T.size())},v.prototype._42=function(T,B,G){var H,f,v,J,M,Y=this._entities;for("batch"===this.rotateMode&&(M=this.getKeyOb()),H=0,f=Y.length;H<f;H++)v=Y[H],this.isNode(v)&&(J=v.getRect(),J={min:V.toScreenPosition(G,{x:J.x,y:J.y}),max:V.toScreenPosition(G,{x:J.x+J.width,y:J.y+J.height})},v===M&&(J.isKeyOb=!0),V.Icons.DrawIcon(T,B,V.Icons.GroupSubEntityRect,J))},((B=V.CurveActiving=function(T,B){for(var G in this._curve=T,this._interactor=T._interactor,this.silent=!0,B)this[G]=B[G];delete this.silent}).prototype={}).constructor=B,N.defineProperties(B.prototype,{point:{get:function(){return this._point},set:function(T){this._point=T,this.editingCtrl||this.silent||this._firePointChange()}},pairs:{get:function(){return this._pairs},set:function(T){this._pairs=T,this.editingCtrl&&!this.silent&&this._firePointChange()}}}),B.prototype._firePointChange=function(){var T,B,G=this.getCurrentEditingPoint(),H=this._interactor;G?(B=this._curve.target)&&(B=V.getDataMatrix(B).invert(),T=G.e,(G=B.apply(V.toWorldPosition(H.gv,G))).e=T,(B=this._lastFirePoint)&&Math.abs(G.x-B.x)<1e-5&&Math.abs(G.y-B.y)<1e-5&&(G.e==Ht&&B.e==Ht||Math.abs(G.e-B.e)<1e-5)||(this._lastFirePoint=G,H.fi({kind:"selectPoint",x:G.x,y:G.y,e:G.e}))):H.fi({kind:"selectPoint"})},B.prototype.dispose=function(){this._interactor.fi({kind:"selectPoint"})},B.prototype.getCurrentEditingPoint=function(){var T=this.editingCtrl;if(T){var B=this.pairs;if(B=(B=B&&B[T.pairId])&&B[T.type])return B}return this._point},(((T=V.CursorFactory=function(T){this._interactor=T,this._rotateCursorStyles={}}).prototype={}).constructor=T).prototype.getRotateCursor=function(T){T<0&&(T+=2*Math.PI);var B=(G=this._interactor).getStyle("rotateCursorSize"),G=G.getStyle("rotateCursorRound"),T=Math.round(T/Math.PI*180/G),H=this._rotateCursorStyles,f="htCustomRotateStyle_"+B+"_"+G+"_"+(T=360<=T*G?0:T);return H[f]||(this._produceRotateCursor(f,B,G,T),H[f]=!0),f},T.prototype._produceRotateCursor=function(T,B,G,H){this._interactor;var f=(f=this._canvas)||(this._canvas=R.createElement("canvas")),v=vt.devicePixelRatio,J=(f.width=f.height=B*v,f.style.width=f.style.height=B+" px",f.getContext("2d"));V.setAntialias(J,!1),J.scale(v,v);var M=(M=Math.round(B/2))+" "+M+",auto !important;",H=Math.PI/180*H*G;J.clearRect(0,0,B,B),J.save(),J.scale(B/32,B/32),J.translate(16,15),J.rotate(H+Math.PI/2),J.beginPath(),J.moveTo(-8,0),J.lineTo(-8,4),J.lineTo(-4,4),J.moveTo(8,0),J.lineTo(8,4),J.lineTo(4,4),J.moveTo(-8,4),J.quadraticCurveTo(0,-6,8,4),J.restore(),J.lineCap="round",J.lineJoin="miter",J.strokeStyle="white",J.lineWidth=4,J.stroke(),J.strokeStyle="black",J.lineWidth=2,J.stroke(),H="cursor:url("+(G=JSON.stringify(f.toDataURL()))+")"+M,1!==v&&(H=H+("cursor:url(data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+B+'px" height="'+B+'px"><image xlink:href='+G+' width="'+B+'" height="'+B+'"/></svg>'))+")"+M+"cursor:-webkit-image-set(url("+G+")"+v+"x,url("+G+")1x)"+M),(J=R.createElement("style")).textContent="body."+T+" *, ."+T+"{"+H+"}",R.head.appendChild(J)},((G=V.Guide.Grid=function(T){this._interactor=T,this._alignmentGuideId=0,this._xAlignmentGuide=[],this._yAlignmentGuide=[]}).prototype={}).constructor=G,N.defineProperties(G.prototype,{gridBlockSize:{get:function(){return this._gridBlockSize||this._interactor.getStyle("gridBlockSize")},set:function(T){this._gridBlockSize=T,this._interactor._42()}},gridThickLinesEvery:{get:function(){return this._gridThickLinesEvery||this._interactor.getStyle("gridThickLinesEvery")},set:function(T){this._gridThickLinesEvery=T,this._interactor._42()}},gridEnabled:{get:function(){return this._interactor.gridEnabled&&this.isValidGrid()}}}),G.prototype._42=function(){var T=this._interactor;this.gridEnabled&&this.drawGrid(),T.alignmentGuideEnabled&&this.drawAlignmentGuide()},G.prototype.makeMatrix=function(){var T=this._interactor.getStyle("gridAngle"),B=this._interactor.getStyle("gridRotation"),G=new V.Math.Matrix2d,H=Math.sin(T),T=Math.cos(T);return G.set(1,0,T,H,0,0),G.rotate(B),G},G.prototype.isValidGrid=function(){var T=Math.PI,B=this._interactor;return!(B.gv._zoom<B.getStyle("gridZoomThreshold"))&&(B=B.getStyle("gridAngle"),!((B=Math.abs(B%T/T*180))<1-1e-8||179.00000001<B))},G.prototype.drawAlignmentGuide=function(){var T=this._interactor,B=T.gv,G=T._canvas,H=T._context,f=G.width,v=G.height,J=B.tx(),M=B.ty(),Y=B._zoom;H.beginPath(),H.strokeStyle=T.getStyle("gridAlignmentGuideColor"),H.lineWidth=1,this._xAlignmentGuide.forEach(function(T){T=T.p*Y+J,H.moveTo(T,0),H.lineTo(T,v)}),this._yAlignmentGuide.forEach(function(T){T=T.p*Y+M,H.moveTo(0,T),H.lineTo(f,T)}),H.stroke()},G.prototype.drawGrid=function(){var T,B,G,H=this._interactor,f=this.gridBlockSize,v=this.gridThickLinesEvery,J=H.getStyle("gridThickColor"),M=H.getStyle("gridLightColor"),Y=H.gv,m=H._canvas,E=H._context,H=m.width,m=m.height,Z=this.makeMatrix(),R=Z.applyInverse(V.toWorldPosition(Y,{x:0,y:0})),A=Z.applyInverse(V.toWorldPosition(Y,{x:H,y:0})),g=Z.applyInverse(V.toWorldPosition(Y,{x:0,y:m})),H=Z.applyInverse(V.toWorldPosition(Y,{x:H,y:m})),F=Math.min(R.x,A.x,g.x,H.x),W=Math.max(R.x,A.x,g.x,H.x),s=Math.min(R.y,A.y,g.y,H.y),S=Math.max(R.y,A.y,g.y,H.y),m=Math.ceil(F/f),y=Math.floor(W/f),R=Math.ceil(s/f),x=Math.floor(S/f);function w(T,B,G,H){T=V.toScreenPosition(Y,Z.apply({x:T,y:B})),B=V.toScreenPosition(Y,Z.apply({x:G,y:H})),E.moveTo(T.x,T.y),E.lineTo(B.x,B.y)}for(Y.tx(),Y.ty(),Y._zoom,E.save(),E.lineWidth=1,E.beginPath(),E.strokeStyle=J,G=Math.ceil(m/v)*v;G<=y;G+=v)w(T=G*f,s,T,S);for(G=Math.ceil(R/v)*v;G<=x;G+=v)w(F,B=G*f,W,B);for(E.stroke(),E.beginPath(),E.strokeStyle=M,G=m;G<=y;G++)G%v!=0&&w(T=G*f,s,T,S);for(G=R;G<=x;G++)G%v!=0&&w(F,B=G*f,W,B);E.stroke(),E.restore()},G.prototype.getAlignmentGuides=function(){return{x:this._xAlignmentGuide,y:this._yAlignmentGuide}},G.prototype.addAlignmentGuide=function(T,B,G){var H,T="x"===T?this._xAlignmentGuide:this._yAlignmentGuide,B={p:B,id:G=G||++this._alignmentGuideId};return T.length?(H=this._findClosestAlignmentGuide(B.p,T)).dis<0?T.splice(H.index+1,0,B):T.splice(H.index,0,B):T.push(B),this._interactor._42(),G},G.prototype.findClosest=function(T,B,G){var H=this._interactor,f=H.gv,v=1/0,J=1/0,M=(T=G?V.toWorldPosition(f,T):T).x,Y=T.y;if(this.gridEnabled&&(E=this.gridBlockSize,T=(m=this.makeMatrix()).applyInverse(T),v=(T=m.apply({x:Math.round(T.x/E)*E,y:Math.round(T.y/E)*E})).x-M,J=T.y-Y,m=!0),H.alignmentGuideEnabled&&(E=this._findClosestAlignmentGuide(M,this._xAlignmentGuide).dis,T=this._findClosestAlignmentGuide(Y,this._yAlignmentGuide).dis,Math.abs(E)<Math.abs(v)&&(v=E,m=!0),Math.abs(T)<Math.abs(J)&&(J=T,m=!0)),m){var m=!1,M=f._zoom,Y=H.getStyle("smartGuideThreshold")/M,E={};if(Math.abs(v)<Y&&"y"!==B&&(E.x=G?v*M:v,m=!0),Math.abs(J)<Y&&"x"!==B&&(E.y=G?J*M:J,m=!0),m)return E}},G.prototype._findClosestAlignmentGuide=function(T,B){if(!B.length)return{dis:1/0};for(var G,H=0,f=B.length-1;1<f-H;)B[G=Math.floor((H+f)/2)].p<T?H=G:f=G;var v=B[H].p-T,J=B[f].p-T;return Math.abs(v)<=Math.abs(J)?{line:B[H],dis:v,index:H}:{line:B[f],dis:J,index:f}},G.prototype.removeAllAlignmentGuide=function(T){"y"!==T&&(this._xAlignmentGuide=[]),"x"!==T&&(this._yAlignmentGuide=[]),this._interactor._42()},G.prototype.removeAlignmentGuide=function(T){for(var B,G,H,f=this._xAlignmentGuide,v=0;v<2;v++)for(G=(f=(B=0)===v?this._xAlignmentGuide:this._yAlignmentGuide).length;B<G;B++)if((H=f[B]).id===T)return f.splice(B,1),this._interactor._42(),{axis:0===v?"x":"y",position:H.p};return!1},G.prototype.adjustAlignmentGuide=function(T,B){var G=this.removeAlignmentGuide(T);return!!G&&(this.addAlignmentGuide(G.axis,B,T),!0)},(((v=V.Guide.Rect=function(T){this._interactor=T}).prototype={}).constructor=v).prototype.gatherRects=function(){var H,f,v,J,M=this._interactor.gv,Y=[],m=[],T={x:Y,y:m},E={},B=M.getDataModel(),G=B.a("width"),Z=B.a("height");G&&Z&&(f=H=0,v=G,J=Z,Y.push({node:B,type:0,p:H},{node:B,type:1,p:H+v/2},{node:B,type:2,p:H+v}),m.push({node:B,type:0,p:f},{node:B,type:1,p:f+J/2},{node:B,type:2,p:f+J}),E[B._id||0]={x:H,y:f,width:v,height:J}),B.each(function(B){var G,T;r(B)&&!M.isSelected(B)&&M.isVisible(B)&&M.isValidGuideLineSource(B)&&(G=!1,M.sm().getSelection().each(function(T){G||(B.isHostOn(T)||B.isDescendantOf(T))&&(G=!0)}),G||(T=B.getRect(),H=T.x,f=T.y,v=T.width,J=T.height,Y.push({node:B,type:0,p:H},{node:B,type:1,p:H+v/2},{node:B,type:2,p:H+v}),m.push({node:B,type:0,p:f},{node:B,type:1,p:f+J/2},{node:B,type:2,p:f+J}),E[B._id]=T))}),Y.sort(function(T,B){return T.p-B.p}),m.sort(function(T,B){return T.p-B.p}),this._grid=T,this._87I=E},v.prototype.gatherLines=function(T,B,G){var H,f,v,J,M,Y,m,E,Z,R=[this.findClosest({x:T.x,y:T.y},B),this.findClosest({x:T.x+T.w/2,y:T.y+T.h/2},B),this.findClosest({x:T.x+T.w,y:T.y+T.h},B)],A={},g=this._87I;for(G=G||255,this._guideLine=[],H=0;H<2;H++)for(A={},m=0===H?(J="y",(Y=T.x)+T.w):(J="x",(Y=T.y)+T.h),f=0;f<3;f++)(M=R[f])&&isFinite(M[J])&&G&1<<3*H+f&&(A[Z=(M=M[J+"Line"]).node._id||0]||(A[Z]=!0,Z=g[Z],Z="y"===J?(E=Z.x,Z.x+Z.width):(E=Z.y,Z.y+Z.height),v=M.p,this._guideLine.push({type:J,a:Y,b:m,c:E,d:Z,p:v,center:1===M.type})))},v.prototype._binarySearchClosest=function(T,B){if(!B.length)return{dis:1/0};for(var G,H=0,f=B.length-1;1<f-H;)B[G=Math.floor((H+f)/2)].p<T?H=G:f=G;var v=B[H].p-T,J=B[f].p-T;return Math.abs(v)<=Math.abs(J)?{line:B[H],dis:v}:{line:B[f],dis:J}},v.prototype.findClosest=function(T,B,G){var H,f=(Y=this._interactor).gv,v=this._grid,J=(G&&(T=V.toWorldPosition(f,T)),this._binarySearchClosest(T.x,v.x)),T=this._binarySearchClosest(T.y,v.y),v=J.dis,M=T.dis,f=f._zoom,Y=Y.getStyle("smartGuideThreshold")/f,m={};if(Math.abs(v)<Y&&"y"!==B&&(m.x=G?v*f:v,m.xLine=J.line,H=!0),Math.abs(M)<Y&&"x"!==B&&(m.y=G?M*f:M,m.yLine=T.line,H=!0),H)return m},v.prototype._42=function(){var T=this._guideLine;if(T&&!L.Default.isCtrlDown()){var B=this._interactor;if(B.getStyle("guideLineVisible"))for(var G,H,f,v,J,M,Y,m,E,Z,R,A,g,F=B.gv,W=B._context,s=F.tx(),S=F.ty(),y=F._zoom,x=B.getStyle("guideLineTextSpacing"),w=0,O=T.length;w<O;w++)J=(G=T[w]).type,M=G.p,Y=G.a,m=G.b,E=G.c,Z=G.d,R=Math.min(Y,E),A=Math.max(m,Z),M="x"===J?(f=R*y+S,v=H=M*y+s,A*y+S):(H=R*y+s,v=A*y+s,f=M*y+S),V.Icons.DrawIcon(B,W,V.Icons.MoveLineGuide,{rect:[H,f,v,M],center:G.center}),Y<=Z&&E<=m||(R=Z<Y?Z:m,A=Z<Y?Y:E,"x"===J?(G.center2center||(v=H-=x),f=R*y+S,M=A*y+S,g=V.Icons.MoveLineGuideDistanceV):"y"===J&&(G.center2center||(M=f-=x),H=R*y+s,v=A*y+s,g=V.Icons.MoveLineGuideDistanceH),V.Icons.DrawIcon(B,W,g,{x0:H,y0:f,x1:v,y1:M,dis:A-R}))}},v.prototype.clear=function(){this._guideLine=null};((B=V.Guide.Hover=function(T){this._interactor=T}).prototype={}).constructor=B,N.defineProperties(B.prototype,{}),B.prototype._42=function(){var T,B,G,H=this._interactor;H.getStyle("hoverGuideVisible")&&!H.gvEditing&&(T=H.hoverData,G=H.gv,!r(T)||G.isSelected(T)?H.hoverData=null:(T=yJ(G,T),B=V.toScreenPosition(G,{x:T.x,y:T.y}),G=V.toScreenPosition(G,{x:T.x+T.width,y:T.y+T.height}),V.Icons.DrawIcon(H,H._context,V.Icons.HoverDataRect,{min:B,max:G,color:H.getStyle("hoverGuideColor")||H.getStyle("baseColor"),borderWidth:H.getStyle("hoverGuideBorderWidth")||1,borderPattern:H.getStyle("hoverGuideBorderPattern")||[1,4]})))},V.DefaultStyleMap={baseColor:"rgb(51,153,255)",pointSize:[24,9],checkSize:7,rotateCheckSize:10,moveSensitivity:10,moveDummyThreshold:32,moveDummyPosition:[0,0,-16,-16],moveDummyLineExtraShift:[-32,0],moveDummySensitivity:16,keepAspectRatio:!1,rotateRound:Math.PI/2,shiftRotateRound:Math.PI/12,rotateSensitivity:Math.PI/60,rotateAsClock:!1,rotateTipVisible:!0,shiftLineRotateRound:Math.PI/4,anchorMovable:!0,anchorVisible:!0,anchorHideThreshold:25,anchorOutsideVisibleThreshold:.25,anchorRound:.25,anchorSensitivity:.02,smartGuideThreshold:8,curveIntersectSize:5,curvePointIntersectSize:8,edgeHostDetectPerFrame:!0,edgeHostEdgeMaxDistance:12,edgeHostEdgeHighlighColor:"#5d5d5d",edgeHostPointHighlighColor:"red",edgeHostHighlighPeriod:1500,edgeElevationEditable:!1,attachThreshold:25,guideLineVisible:!0,guideLineTextSpacing:0,hoverGuideVisible:!1,hoverGuideColor:null,gridBlockSize:40,gridThickLinesEvery:10,gridThickColor:"#5d5d5d",gridLightColor:"#d0d0d0",gridZoomThreshold:.25,gridAlignmentGuideColor:"#ff0000",gridAngle:Math.PI/2,gridRotation:0,groupRotateModeDefault:"block",groupRotateModeKey:["ctrlKey","metaKey"],rotateCursorSize:32,rotateCursorRound:45,tipTextColor:"#ffffff",tipBackground:"#333333",curveHighlightColor:"#30599e",rectPointBackground:"white",rectPointBorderColor:"#666666",rectPointShadowColor:"rgba(0,0,0,0.35)",shapeCtrlPointBackground:"white",shapeCtrlPointBorderColor:null,shapeCtrlPointHighlightBorder:null,shapeHighlighPointBackground:"#30599e",curveElevationVisible:!0,curveElevationIntersectSize:8,curveElevationGuideShift:[20,0],curveTipVisible:!0,connectGuideVisible:!0,connectGuideShift:[1,.25,8,0],connectGuideIntersectSize:8,connectGuideGarbageIntersectsize:25,connectGuideGarbageShift:[1,1,-48,-48]};var f=V.Icons={},La=null,ja=V.DefaultStyleMap.baseColor,ra="rgb(255,204,153)",Xa=(L.Default.setImage("Icons.RectPoint",{width:6,height:6,comps:[{type:"rect",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return ja}},rect:[0,0,6,6]}]}),f.GroupSubEntityRect={comps:[{type:"shape",points:{func:function(){if(!(B=f.GroupSubEntityRect.data))return[];var T=B.min,B=B.max;return[T.x,T.y,T.x,B.y,B.x,B.y,B.x,T.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return f.GroupSubEntityRect.data.isKeyOb,ja}}}]},f.HoverDataRect={comps:[{type:"shape",points:{func:function(){if(!(B=f.HoverDataRect.data))return[];var T=B.min,B=B.max;return T.x-=4,T.y-=4,B.x+=4,B.y+=4,[T.x,T.y,T.x,B.y,B.x,B.y,B.x,T.y]}},segments:[1,2,2,2,5],background:null,borderWidth:{func:function(){return f.HoverDataRect.data.borderWidth}},borderColor:{func:function(){return f.HoverDataRect.data.color}},borderCap:"butt",borderPattern:{func:function(){return f.HoverDataRect.data.borderPattern}}}]},f.Line={comps:[{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[f.Line.data.P1.x,f.Line.data.P1.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[f.Line.data.P2.x,f.Line.data.P2.y],6,6]}}}]},f.NodeHoverGuide={comps:[{type:"shape",points:{func:function(){return f.NodeHoverGuide.data}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:"#3399FF"}]},f.Rect={comps:[{type:"shape",points:{func:function(){if(!(H=f.Rect.data))return[];var T=H.LT,B=H.LB,G=H.RB,H=H.RT;return[T.x,T.y,B.x,B.y,G.x,G.y,H.x,H.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return ja}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},rect:{func:function(){return[[f.Rect.data.LT.x,f.Rect.data.LT.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},rect:{func:function(){return[[f.Rect.data.LB.x,f.Rect.data.LB.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},rect:{func:function(){return[[f.Rect.data.RB.x,f.Rect.data.RB.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},rect:{func:function(){return[[f.Rect.data.RT.x,f.Rect.data.RT.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},visible:{func:function(){return!!f.Rect.data.L}},rect:{func:function(){return[[f.Rect.data.L.x,f.Rect.data.L.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},visible:{func:function(){return!!f.Rect.data.R}},rect:{func:function(){return[[f.Rect.data.R.x,f.Rect.data.R.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},visible:{func:function(){return!!f.Rect.data.T}},rect:{func:function(){return[[f.Rect.data.T.x,f.Rect.data.T.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return f.Rect.data.rotation}},visible:{func:function(){return!!f.Rect.data.B}},rect:{func:function(){return[[f.Rect.data.B.x,f.Rect.data.B.y],6,6]}}}]},L.Default.setImage("Icons.Anchor",{width:12,height:12,comps:[{type:"shape",borderWidth:1,borderColor:{func:function(){return ja}},borderCap:"round",shadowColor:"#1ABC9C",points:[.50928,6,11.49072,6,6,6,6,.50928,6,11.49072]},{type:"circle",borderWidth:1,borderColor:{func:function(){return ja}},shadowColor:"#1ABC9C",rect:[2.84391,2.84391,6.53697,6.53697]}]}),f.Anchor={comps:[{type:"image",name:"Icons.Anchor",rect:{func:function(){return[[f.Anchor.data.POS.x,f.Anchor.data.POS.y],16,16]}}}]},f.TipShiftX=12,f.TipShiftY=12,[8,28]);f.TipHelper={comps:[{type:"roundRect",rect:{func:function(){return[f.TipHelper.data.helperPos.x,f.TipHelper.data.helperPos.y,Xa[0]*f.TipHelper.data.size,Xa[1]]}},background:{func:function(){return La.getStyle("tipBackground")}},opacity:.6},{type:"text",text:{func:function(){return f.TipHelper.data.text}},rect:{func:function(){return[f.TipHelper.data.helperPos.x,f.TipHelper.data.helperPos.y,Xa[0]*f.TipHelper.data.size,Xa[1]]}},color:{func:function(){return La.getStyle("tipTextColor")}},font:"bold 12px Arial",align:"center"}]},f.ShapePoint={comps:[{type:"circle",visible:{func:function(){return!!f.ShapePoint.data.dynamicVisible}},rect:{func:function(){var T=f.ShapePoint.data.point,B=f.ShapePoint.data.size||7;return[T,B+10,B+10]}},background:{func:function(){var T=Date.now(),B=f.ShapePoint.data.dynamicPeriod||1500;return"rgba(27,124,22,"+.5*Math.sin(T%B/B*Math.PI)+")"}},borderWidth:0},{type:"circle",rect:{func:function(){var T=f.ShapePoint.data.point,B=f.ShapePoint.data.size||7;return[T,B,B]}},background:{func:function(){return f.ShapePoint.data.isEnd?"rgba(27,124,222,0.7)":"#ffffff"}},borderWidth:1,borderColor:{func:function(){return f.ShapePoint.data.color||ja}}},{type:"rect",visible:{func:function(){return!!f.ShapePoint.data.dynamicVisible}},background:"red",borderWidth:0,rotation:Math.PI/4,borderColor:{func:function(){return ja}},rect:{func:function(){return[f.ShapePoint.data.point,5,5]}}}]},f.ShapeBgCurve={comps:[{type:"shape",visible:{func:function(){return!!f.ShapeBgCurve.data.dynamicVisible}},points:{func:function(){return f.ShapeBgCurve.data.P}},segments:{func:function(){return f.ShapeBgCurve.data.S}},background:null,borderWidth:6,borderColor:{func:function(){var T=Date.now(),B=f.ShapeBgCurve.data.dynamicPeriod||1500;return"rgba(27,124,22,"+.3*Math.sin(T%B/B*Math.PI)+")"}}},{type:"shape",points:{func:function(){return f.ShapeBgCurve.data.P}},segments:{func:function(){return f.ShapeBgCurve.data.S}},background:null,borderWidth:1,borderColor:{func:function(){return f.ShapeBgCurve.data.color||ja}}}]},f.ShapeHighlighPoint={comps:[{type:"circle",rect:{func:function(){var T=f.ShapeHighlighPoint.data;return[[T.x,T.y],8,8]}},background:{func:function(){return La.getStyle("shapeHighlighPointBackground")}},borderWidth:0}]},f.ShapeHighlighRealPoint={comps:[{type:"circle",rect:{func:function(){var T=f.ShapeHighlighRealPoint.data;return[[T.x,T.y],10,10]}},background:"#ffffff",borderWidth:2,borderColor:{func:function(){return ja}}}]},f.ShapeHighlighCtrlPoint={comps:[{type:"shape",points:{func:function(){var T=f.ShapeHighlighCtrlPoint.data,B=T.x;return[B-4,(T=T.y)-4,B-4,T+4,B+4,T+4,B+4,T-4]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return La.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return La.getStyle("shapeCtrlPointBorderColor")||ja}}}]},f.ShapeHighlightCurve={comps:[{type:"shape",points:{func:function(){return f.ShapeHighlightCurve.data}},segments:[1,4],background:null,borderWidth:3,borderColor:{func:function(){return La.getStyle("curveHighlightColor")}}}]},f.ShapeGuideLine={comps:[{type:"shape",points:{func:function(){return f.ShapeGuideLine.data}},background:null,borderWidth:1,borderColor:"rgb(255,204,153)"}]},f.MoveLineGuide={comps:[{type:"shape",points:{func:function(){return f.MoveLineGuide.data.rect}},background:null,borderWidth:1,borderColor:{func:function(){return f.MoveLineGuide.data.center?"rgb(183,232,135)":ra}}}]},f.MoveLineGuideDistanceH={comps:[{type:"shape",points:{func:function(){var T=f.MoveLineGuideDistanceH.data,B=T.x0;return[B,(T=T.y0)-5,B,T+5]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:ra},{type:"shape",points:{func:function(){var T=f.MoveLineGuideDistanceH.data,B=T.x1;return[B,(T=T.y1)-5,B,T+5]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:ra},{type:"text",text:{func:function(){return Math.round(f.MoveLineGuideDistanceH.data.dis)}},rect:{func:function(){var T=f.MoveLineGuideDistanceH.data;return[[(T.x0+T.x1)/2,T.y0-10],20,20]}},color:ra,font:"12px Arial",align:"center"}]},f.MoveLineGuideDistanceV={comps:[{type:"shape",points:{func:function(){var T=f.MoveLineGuideDistanceV.data,B=T.x0;return[B-5,T=T.y0,B+5,T]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:ra},{type:"shape",points:{func:function(){var T=f.MoveLineGuideDistanceV.data,B=T.x1;return[B-5,T=T.y1,B+5,T]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:ra},{type:"text",text:{func:function(){return Math.round(f.MoveLineGuideDistanceV.data.dis)}},rect:{func:function(){var T=f.MoveLineGuideDistanceV.data;return[[T.x0-10,(T.y0+T.y1)/2],20,20]}},color:ra,font:"12px Arial",align:"center"}]},L.Default.setImage("Icons.EdgeElevationGuideImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[.5,.5,15,15]},{type:"shape",borderWidth:2,borderColor:"rgb(44,44,44)",borderCap:"round",points:[4,8,8,4,12,8,8,4,8,13],segments:[1,2,2,1,2]}]}),f.EdgeElevationGuide={comps:[{type:"image",name:"Icons.EdgeElevationGuideImage",rect:{func:function(){var T=(B=f.EdgeElevationGuide.data).x,B=B.y,G=La.getStyle("curveElevationIntersectSize"),H=La.getStyle("curveElevationGuideShift");return[(T+=H[0])-G,(B+=H[1])-G,2*G,2*G]}}}]},L.Default.setImage("Icons.ConnectGuideBgImage",{width:12,height:12,comps:[{type:"shape",background:"#3399ff",fillRule:"evenodd",shadowColor:"#1ABC9C",rotation:3.14159,points:[6.00001,11.99999,6.00001,11.99999,2.6863,11.99999,1e-5,9.30695,1e-5,5.99999,1e-5,5.99999,1e-5,2.68628,2.69305,-1e-5,6.00001,-1e-5,12.00001,-1e-5,11.99998,12.00001,6.00001,11.99999],segments:[1,2,4,2,4,2,2,2]}]}),L.Default.setImage("Icons.ConnectGuideHeaderImage",{width:12,height:12,comps:[{type:"oval",background:"#3399FF",borderColor:"#3399FF",shadowColor:"#1ABC9C",rect:[0,0,12,12]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.76,2.56,8.2,5.98,4.76,9.44]}]}),f.ConnectGuide={comps:[{type:"image",name:"Icons.ConnectGuideBgImage",rotation:{func:function(){return f.ConnectGuide.data.rotation}},rect:{func:function(){var T=f.ConnectGuide.data.connect,B=(T.x,T.y,La.getStyle("connectGuideIntersectSize"));return[[T.x,T.y],2*B,2*B]}}},{type:"image",name:"Icons.ConnectGuideHeaderImage",rect:{func:function(){var T=f.ConnectGuide.data.cursorPos||f.ConnectGuide.data.connect,B=La.getStyle("connectGuideIntersectSize");return[[T.x,T.y],2*B-2,2*B-2]}}},{type:"shape",background:null,borderColor:"#3399ff",borderWidth:2,segments:[1,4],points:{func:function(){var T=f.ConnectGuide.data.connect,B=f.ConnectGuide.data.cursorPos||T;return[T.x,T.y,T.x+.5*(B.x-T.x),T.y,B.x+.5*(T.x-B.x),B.y,B.x,B.y]}}}]},L.Default.setImage("Icons.ConnectGuideGarbageImage",{width:48,height:48,comps:[{type:"oval",background:"rgba(0,0,0,0.1)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,48,48]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[19.84721,19.69091,19.84721,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[24.10371,19.69091,24.10371,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[28.15279,19.69091,28.15279,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[11.23055,15.22377,36.76945,15.189,19.12302,15.17121,20.94722,11.5228,26.41985,11.5228,28.24406,15.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[15.48702,15.22377,17.02595,21.25344]}]}),L.Default.setImage("Icons.ConnectGuideDeletingImage",{width:56,height:56,comps:[{type:"oval",background:"rgba(232,0,0,0.75)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,56,56]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[22.67939,27.69091,22.67939,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[26.93588,27.69091,26.93588,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[30.98497,27.69091,30.98497,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",anchorX:0,anchorY:1,rotation:5.65062,points:[14.06272,23.22377,39.60163,23.189,21.9552,23.17121,23.7794,19.5228,29.25203,19.5228,31.07623,23.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[18.3192,23.22377,17.02595,21.25344]}]}),f.ConnectGuideGarbage={comps:[{type:"image",name:{func:function(){return f.ConnectGuideGarbage.data.hover?"Icons.ConnectGuideDeletingImage":"Icons.ConnectGuideGarbageImage"}},rect:{func:function(){var T=f.ConnectGuideGarbage.data,B=La.getStyle("connectGuideGarbageIntersectsize");return T.hover&&(B+=5),[[T.x,T.y],2*B,2*B]}}}]},f.ShapeActivingCtrl={comps:[{type:"shape",visible:{func:function(){return!!f.ShapeActivingCtrl.data.c1}},points:{func:function(){var T=f.ShapeActivingCtrl.data;return[T.point.x,T.point.y,T.c1.x,T.c1.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return ja}}},{type:"shape",visible:{func:function(){return!!f.ShapeActivingCtrl.data.c2}},points:{func:function(){var T=f.ShapeActivingCtrl.data;return[T.point.x,T.point.y,T.c2.x,T.c2.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return ja}}},{type:"shape",visible:{func:function(){return!!f.ShapeActivingCtrl.data.c1}},points:{func:function(){var T=(B=f.ShapeActivingCtrl.data.c1).x,B=B.y,G=3;return"c1"===f.ShapeActivingCtrl.data.hl&&(G+=.5),[T-G,B-G,T-G,B+G,T+G,B+G,T+G,B-G]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return La.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c1"===f.ShapeActivingCtrl.data.hl?La.getStyle("shapeCtrlPointHighlightBorder")||ja:La.getStyle("shapeCtrlPointBorderColor")||ja}}},{type:"shape",visible:{func:function(){return!!f.ShapeActivingCtrl.data.c2}},points:{func:function(){var T=(B=f.ShapeActivingCtrl.data.c2).x,B=B.y,G=3;return"c2"===f.ShapeActivingCtrl.data.hl&&(G+=.5),[T-G,B-G,T-G,B+G,T+G,B+G,T+G,B-G]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return La.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c2"===f.ShapeActivingCtrl.data.hl?La.getStyle("shapeCtrlPointHighlightBorder")||ja:La.getStyle("shapeCtrlPointBorderColor")||ja}}}]},f.RoundPoint={comps:[{type:"circle",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return ja}},rect:{func:function(){return[[f.RoundPoint.data.x,f.RoundPoint.data.y],6,6]}}}]},f.AttachPoint={comps:[{type:"rect",background:{func:function(){return f.AttachPoint.data.isAttach?"rgb(51,153,255)":"rgb(247,247,247)"}},borderWidth:1,rotation:Math.PI/4,borderColor:{func:function(){return ja}},rect:{func:function(){var T=f.AttachPoint.data.isAttach?10:6;return[[f.AttachPoint.data.x,f.AttachPoint.data.y],T,T]}}}]},f.SimpleRect={comps:[{type:"rect",background:null,borderWidth:{func:function(){return f.SimpleRect.data.borderWidth||1}},borderColor:{func:function(){return f.SimpleRect.data.color||ja}},rect:{func:function(){var T=f.SimpleRect.data;return[T.x,T.y,T.width,T.height]}}}]},L.Default.setImage("Icons.MoveDummyImage",{width:32,height:32,boundExtend:12,attachStyle:"close",comps:[{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",shadow:!0,shadowColor:"rgba(0,0,0,0.25)",shadowOffsetX:0,rect:[0,0,32,32]},{type:"shape",background:"rgb(51,153,255)",pixelPerfect:!0,points:[8.65079,11.90713,9.05502,11.46921,9.70629,11.46921,10.11052,11.90713,10.51476,12.28891,10.51476,12.92895,10.11052,13.34441,8.49359,14.97258,12.2889,14.97258,12.85034,14.97258,13.29949,15.42172,13.29949,15.99439,13.29949,16.57828,12.85034,17.0162,12.2889,17.0162,8.49359,17.0162,10.11052,18.6556,10.51476,19.0486,10.51476,19.7111,10.11052,20.09288,9.70629,20.50834,9.05502,20.50834,8.65079,20.09288,5.32709,16.76917,5.28217,16.71303,4.87794,16.32002,4.87794,15.67998,5.28217,15.26452,8.65079,11.90713,8.65079,11.90713,8.65079,11.90713,13.3444,10.09931,13.3444,10.09931,12.94017,10.50354,12.2889,10.50354,11.88467,10.09931,11.48043,9.69507,11.48043,9.0438,11.88467,8.63957,15.27574,5.25973,15.66874,4.86672,16.32001,4.86672,16.73547,5.25973,16.76917,5.31586,20.10409,8.63957,20.50832,9.0438,20.50832,9.68385,20.10409,10.09931,19.69986,10.49231,19.07105,10.50354,18.64436,10.09931,17.02742,8.45991,17.02742,12.26646,17.02742,12.83912,16.55581,13.31072,15.99438,13.31072,15.43295,13.31072,14.98379,12.83912,14.98379,12.26646,14.96134,8.45991,13.3444,10.09931,13.3444,10.09931,13.3444,10.09931,21.90069,13.33318,21.90069,13.33318,21.49646,12.91771,21.49646,12.27768,21.90069,11.89591,22.31615,11.45798,22.94497,11.45798,23.36043,11.89591,26.72904,15.2533,27.12205,15.66876,27.12205,16.3088,26.72904,16.7018,26.6729,16.75794,23.36043,20.08165,22.94497,20.49711,22.31615,20.49711,21.90069,20.08165,21.49646,19.69987,21.49646,19.03737,21.90069,18.64437,23.51763,17.00498,19.72231,17.00498,19.14965,17.00498,18.71173,16.56705,18.71173,15.98316,18.71173,15.41049,19.14965,14.96135,19.72231,14.96135,23.51763,14.96135,21.90069,13.33318,21.90069,13.33318,21.90069,13.33318,11.88467,23.32675,11.88467,23.32675,11.48043,22.94498,11.48043,22.27125,11.88467,21.88948,12.2889,21.48523,12.94017,21.48523,13.3444,21.88948,14.96134,23.52887,14.98379,19.7111,14.98379,19.14966,15.43295,18.67805,15.99438,18.67805,16.55581,18.67805,17.02742,19.14966,17.02742,19.7111,17.02742,23.52887,18.64436,21.88948,19.07105,21.48523,19.69986,21.48523,20.10409,21.88948,20.50832,22.27125,20.50832,22.94498,20.10409,23.32675,16.76917,26.65045,16.73547,26.72905,16.32001,27.13329,15.66874,27.13329,15.27574,26.72905,11.88467,23.32675,11.88467,23.32675,11.88467,23.32675],segments:[1,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2]}]}),f.MoveDummy={comps:[{type:"image",name:"Icons.MoveDummyImage",rect:{func:function(){var T=f.MoveDummy.data;return[[T.pos.x,T.pos.y],2*T.size,2*T.size]}}}]},V.Icons.DrawIcon=function(T,B,G,H){G.width=G.height=1e4,G.data=H,La=T,L.Default.drawImage(B,G,0,0,1e4,1e4),La=Ht},V.Icons.MapPoints=function(T,B){for(var G=0,H=T.length;G<H;G++)T[G]/=B},V.roundTo=function(T,B,G){var H=Math.abs(T%B);return H<G||B-H<G?B*Math.round(T/B):T},V.toFixed=function(T){return Math.round(100*T)/100},V.getDataMatrix=function(T){var B,G;return T instanceof L.Shape?(B=new L.Math.Matrix2d,G=T.getPosition(),B.translate(-G.x,-G.y).scale(T.getScale().x,T.getScale().y).rotate(T.getRotation()).translate(G.x,G.y),B):T.getMatrix?T.getMatrix():new L.Math.Matrix2d},(((T=V.Math.Curve=function(){this._curves=[]}).prototype={}).constructor=T).prototype.createFromHtShape=function(B,T,G){T instanceof L.List&&(T=T.toArray());for(var H,f,v,J,M=null,Y=null,m=0,E=V.Math.Vector2,Z=V.Math.CubicBezier,R=function(T){return new E(B[T],B[T+1],G?G[T/2]:Ht)},A=0,g=T.length;A<g;A++){switch(f=null,T[A]){case 1:M=Y=R(m),m+=2;break;case 2:H=R(m),m+=2,f=new Z(Y,Y.clone(),H.clone(),H),Y=H;break;case 3:v=R(m),H=R(m+2),m+=4,f=new Z(Y,v.clone().sub(Y).multiplyScalar(2/3).add(Y),v.clone().sub(H).multiplyScalar(2/3).add(H),H),Y=H;break;case 4:v=R(m),J=R(m+2),H=R(m+4),m+=6,f=new Z(Y,v,J,H),Y=H;break;case 5:if(!M)break;f=new Z(Y,Y.clone(),M.clone(),M),M=Y=null}f&&(f._index=this._curves.length,this._curves.push(f))}},T.prototype.checkPoint=function(T,B){for(var G,H,f,v=this._curves,J=0,M=v.length;J<M;J++)if((f=(H=v[J]).intersectRect(T,B,B)).length)return G=0,f.forEach(function(T){G+=T.t}),G/=f.length,(T=H.getPointAt(G)).t=G,{bezier:H,intersection:T}},T.prototype.insertKnot=function(T,B){B=T.insertKnot(B),this._curves.splice(T._index,1,B[0],B[1])},T.prototype._isCloseEnough=function(T,B){return Math.abs(T.x-B.x)<1e-6&&Math.abs(T.y-B.y)<1e-6},T.prototype._isSamePoint=function(T,B){return T===B},T.prototype.moveRealPoint=function(H,f){var v=this,T=v._curves,J=f.clone().sub(H);T.forEach(function(T){var B=T._p1,G=(T._p2,T._p3,T._p4);v._isSamePoint(B,H)&&(T._p2.add(J),T._p1=f),v._isSamePoint(G,H)&&(T._p3.add(J),T._p4=f)})},T.prototype.moveCtrlDueToRealPointMovement=function(H,B){function f(T){T.add(B),T.e&&B.e&&(T.e+=B.e)}var v=this;v._curves.forEach(function(T){var B=T._p1,G=(T._p2,T._p3,T._p4);v._isSamePoint(B,H)&&f(T._p2),v._isSamePoint(G,H)&&f(T._p3)})},T.prototype.moveCtrlPoint=function(T,G,H){var f,B,v=T[H];v&&(v.e!==Ht&&(G.e=v.e),B=(f=this)._curves,G.clone().sub(v),B.forEach(function(T){var B;"c2"===H?B="_p2":"c1"===H&&(B="_p3"),f._isSamePoint(T[B],v)&&(T[B]=G)}),T[H]=G)},T.prototype.deleteRealPoint=function(T,B){for(var G,H,f,v,J=this._curves,M={},Y=[],m=V.Math.CubicBezier,E=0,Z=J.length;E<Z;E++)H=(G=J[E])._p1,f=G._p2,G._p3,v=G._p4,!M[E]&&this._isSamePoint(H,T)||(this._isSamePoint(v,T)?E+1<Z&&this._isSamePoint(J[E+1]._p1,T)&&(B||Y.push(new m(H,f,J[E+1]._p3,J[E+1]._p4))):Y.push(G));this._curves=Y},T.prototype.findPairs=function(T,B){for(var G,H,f,v,J=this._curves,M={},Y=[],m=0,E=J.length;m<E;m++)G=(f=J[m])._p1,v=f._p2,H=f._p3,f=f._p4,!M[m]&&this._isSamePoint(G,T)&&(B?Y.push({point:G,r2:f}):Y.push({point:G,c2:v})),this._isSamePoint(f,T)&&(v=B?{point:f,r1:G}:{point:f,c1:H},m+1<E&&this._isSamePoint(J[m+1]._p1,T)&&(B?v.r2=J[m+1]._p4:v.c2=J[m+1]._p2,M[m+1]=!0),Y.push(v));return Y},T.prototype.toHtShape=function(){var f=this,T=f._curves,v=[],J=[],M={x:1/0,y:1/0};return T.forEach(function(T){var B=T._p1,G=T._p2,H=T._p3,T=T._p4;if(f._isCloseEnough(B,M)||(v.push(1),J.push(B.clone())),M=T,f._isCloseEnough(B,G)&&f._isCloseEnough(H,T))return v.push(2),void J.push(T.clone());v.push(4),J.push(G.clone(),H.clone(),T.clone())}),{segments:v,points:J}};(G=V.Math.CubicBezier=function(T,B,G,H){this._id=V.Math.CubicBezier._globalId++,this._p1=T,this._p2=B,this._p3=G,this._p4=H})._globalId=1,((G.prototype={}).constructor=G).prototype.toString=function(){return this._id},G.prototype.intersectRect=function(T,B,G){var B=B/2,G=G/2,H=T.x,T=T.y,f=new(v=V.Math.Vector2)(-B+H,-G+T),B=new v(B+H,G+T),H=new v(B.x,f.y),G=new v(f.x,B.y),T=this.intersectLine(f,H),v=this.intersectLine(H,B),H=this.intersectLine(B,G),B=this.intersectLine(G,f);return T.concat(v).concat(H).concat(B)},G.prototype.intersectLine=function(T,B){var G=T.clone().min(B),H=T.clone().max(B),f=this._p1,v=this._p2,J=this._p3,M=this._p4,Y=f.clone().multiplyScalar(-1),m=v.clone().multiplyScalar(3),E=J.clone().multiplyScalar(-3),M=Y.add(m).add(E).add(M);Y=f.clone().multiplyScalar(3),m=v.clone().multiplyScalar(-6),E=J.clone().multiplyScalar(3),J=Y.add(m).add(E),Y=f.clone().multiplyScalar(-3),m=v.clone().multiplyScalar(3);for(var E=Y.add(m),v=f.clone(),Y=new V.Math.Vector2(T.y-B.y,B.x-T.x),m=T.x*B.y-B.x*T.y,Z=this.getRoots(Y.dot(M),Y.dot(J),Y.dot(E),Y.dot(v)+m),R=new Array,A=0,g=Z.length;A<g;A++){var F,W=Z[A];W<0||1<W||((F=this.getPointAt(W)).t=W,T.x==B.x?G.y<=F.y&&F.y<=H.y&&R.push(F):T.y==B.y?G.x<=F.x&&F.x<=H.x&&R.push(F):F.x>=G.x&&F.y>=G.y&&F.x<=H.x&&F.y<=H.y&&R.push(F))}return R},G.prototype.solveTForPoint=function(T){for(var B=this._p1.x-T.x,G=this._p2.x-T.x,H=this._p3.x-T.x,f=this._p4.x-T.x,v=this.getRoots(f-3*H+3*G-B,3*H-6*G+3*B,3*G-3*B,B),J=Ht,M=1/0,Y=0,m=v.length;Y<m;Y++){var E,Z=v[Y];Z<0||1<Z||((E=this.getPointAt(Z)).t=Z,(Z=Math.abs(E.y-T.y))<M&&(M=Z,J=E))}return J},G.prototype.getPointAt=function(T){var B=this._p1,G=this._p2,H=this._p3,f=this._p4,B=B.clone().lerp(G,T),G=G.clone().lerp(H,T),H=H.clone().lerp(f,T),f=B.lerp(G,T),B=G.lerp(H,T);return f.lerp(B,T)},G.prototype.getPointByPercentage=function(T){var B=this.length*T,G=this._cacheLength,H=G.length;if(0==B)return G[0].point;if(1<=T)return G[H-1].point;for(var f=0;f<H;f++){var v,J=G[f];if(!(J.len<B))return v=G[f-1],J.point.clone().sub(v.point).setLength(B-v.len).add(v.point)}},G.prototype.getTByPercentage=function(T){var B=this.length*T,G=this._cacheLength,H=G.length;if(0==B||T<=0)return G[0].t;if(1<=T)return G[H-1].t;for(var f=0;f<H;f++){var v,J=G[f];if(!(J.len<B))return(B-(v=G[f-1]).len)/(J.len-v.len)*(J.t-v.t)+v.t}},G.prototype.getRoots=function(T,B,G,H){var f,v,J,M,Y=new Array,m=(Math.abs(T)<1e-6&&(0<(m=(f=G/(J=B))*f-H/J*4)?(v=Math.sqrt(m),Y.push(.5*(-f+v)),Y.push(.5*(-f-v))):0==m&&Y.push(.5*-f)),(B/=T)/3),T=(f=(2*B*B*B-9*(G/=T)*B+27*(H/=T))/27)*f/4+(J=(3*G-B*B)/3)*J*J/27,H=f/2;return 0<(T=Math.abs(T)<=1e-6?0:T)?(G=0<=(M=-H+(v=Math.sqrt(T)))?Math.pow(M,1/3):-Math.pow(-M,1/3),0<=(M=-H-v)?G+=Math.pow(M,1/3):G-=Math.pow(-M,1/3),Y.push(G-m)):T<0?(B=Math.sqrt(-J/3),f=Math.atan2(Math.sqrt(-T),-H)/3,v=Math.cos(f),G=Math.sin(f),J=Math.sqrt(3),Y.push(2*B*v-m),Y.push(-B*(v+J*G)-m),Y.push(-B*(v-J*G)-m)):(M=0<=H?-Math.pow(H,1/3):Math.pow(-H,1/3),Y.push(2*M-m),Y.push(-M-m)),Y},G.prototype._70I=function(){return this._p1.distanceToSquared(this._p2)<1e-10&&this._p3.distanceToSquared(this._p4)<1e-10},G.prototype.insertKnot=function(T){var B=this._p1,G=this._p2,H=this._p3,f=this._p4,v=B.clone().lerp(G,T),G=G.clone().lerp(H,T),H=H.clone().lerp(f,T),J=v.clone().lerp(G,T),G=G.clone().lerp(H,T),M=J.clone().lerp(G,T);return this._70I()?(B.clone().lerp(f,T),[new V.Math.CubicBezier(B,B.clone(),M.clone(),M),new V.Math.CubicBezier(M,M.clone(),f.clone(),f)]):[new V.Math.CubicBezier(B,v,J,M),new V.Math.CubicBezier(M,G,H,f)]},N.defineProperties(G.prototype,{length:{get:function(){if(!(T=this._cacheLength))for(var T=this._cacheLength=[],B=this._p1,G=0,H=0;G<=1;){var f=this.getPointAt(G+=.001);H+=f.clone().sub(B).length(),T.push({len:H,t:G,point:(B=f).clone()})}return T[T.length-1].len}},p1:{get:function(){return this._p1},set:function(T){this._p1=T,this._cacheLength=Ht}},p2:{get:function(){return this._p2},set:function(T){this._p2=T,this._cacheLength=Ht}},p3:{get:function(){return this._p3},set:function(T){this._p3=T,this._cacheLength=Ht}},p4:{get:function(){return this._p4},set:function(T){this._p4=T,this._cacheLength=Ht}}});var Ua,la,ba,Ka,Ra=L.Default.getInternal().ui().EdgeUI,za={_47O:function(T){var B=za.getBackups()._47O;V.inEdit(this.gv)||B.call(this,T)}},Za=(V.Inject.registAsModule(za,Ra),L.Default.getInternal().ui().NodeUI),na={_47O:function(T){var B=na.getBackups()._47O;V.inEdit(this.gv)||B.call(this,T)},getSelectWidth:function(){var T=this.gv,B=this._data;return T.isEditable(B)&&V.inEdit(T)?0:na.getBackup("getSelectWidth").call(this)}},$a=(V.Inject.registAsModule(na,Za),L.graph.GraphView),Va={_editPointSize:(B=L.Default.isTouchable,V.getStyle("pointSize")[B?0:1]),isPointEditable:function(T){if(V.inEdit(this))return!this._pointEditableFunc||this._pointEditableFunc(T);Va.getBackup("isPointEditable").call(this,T)},isEditable:function(T){var B=Va.getBackup("isEditable"),B=T instanceof V.Group||B.call(this,T);return V.inEdit(this)&&T instanceof L.Edge?!!T.s("2d.editable")&&(!(B=this.getEditableFunc())||B(T)):B},_42:function(T,B){Va.getBackups()._42.call(this,T,B),V.inEdit(this)&&this.getEditInteractor().drawImpl()}},Wa=(V.Inject.registAsModule(Va,$a),L.Default.getInternal().ui().ShapeUI),Pa={_47O:function(T){var B=Pa.getBackups()._47O;V.inEdit(this.gv)||B.call(this,T)}},ia=(V.Inject.registAsModule(Pa,Wa),L.graph.DefaultInteractor),ka={handle_mousewheel:function(T){var B=ka.getBackup("handle_mousewheel");V.inEdit(this.gv)||B.call(this,T)}},Da=(V.Inject.registAsModule(ka,ia),L.graph.MoveInteractor),Ca={_calcShift:function(T,B){var G=Ca.getBackup("_calcShift"),H=this.gv;return V.inEdit(H)&&H.getEditInteractor().getSubModule("Move").calcShift(T,B,this)||G.call(this,T,B)},clear:function(T){Ca.getBackup("clear").call(this,T);var B=this.gv;V.inEdit(B)&&B.getEditInteractor().getSubModule("Move").clear(T)}};V.Inject.registAsModule(Ca,Da),(((v=V.Rect=function(T){this.catalog="Rect",this._interactor=T}).prototype={}).constructor=v).prototype.gatherInfo=function(T,B){var G;return 1===B.length?(G=B[0])instanceof L.Shape&&G._70I()?this.gatherLine(T,G):!A1(G,T)&&this.gatherSingleTarget(T,G):1<B.length&&this.gatherMultiTargets(T,B)},v.prototype.gatherSingleTarget=function(T,B){if(B.getCorners){var G,H,f=this.info,v=(this.target=B,G=this.screenInfo={},B.getCorners());for(H in f.LT=new V.Math.Vector2(v[0]),f.LB=new V.Math.Vector2(v[1]),f.RB=new V.Math.Vector2(v[2]),f.RT=new V.Math.Vector2(v[3]),f.T=f.LT.clone().add(f.RT).divideScalar(2),f.B=f.LB.clone().add(f.RB).divideScalar(2),f.L=f.LT.clone().add(f.LB).divideScalar(2),f.R=f.RT.clone().add(f.RB).divideScalar(2),f)G[H]=V.toScreenPosition(T,f[H]);var J=this._interactor.getStyle("checkSize");return G.rotLT=(v=function(T,B,G){return B=B.clone().sub(T).setLength(-J),G=G.clone().sub(T).setLength(-J),B.add(G).add(T)})(G.LT,G.RT,G.LB),G.rotLB=v(G.LB,G.LT,G.RB),G.rotRB=v(G.RB,G.LB,G.RT),G.rotRT=v(G.RT,G.LT,G.RB),G.rotT=G.rotLT.clone().add(G.rotRT).divideScalar(2),G.rotB=G.rotLB.clone().add(G.rotRB).divideScalar(2),G.rotL=G.rotLT.clone().add(G.rotLB).divideScalar(2),G.rotR=G.rotRT.clone().add(G.rotRB).divideScalar(2),G.rotation=B.getRotation(),this.gatherConnectInfo(),!0}},v.prototype.gatherConnectInfo=function(){var T,B,G=this.target,H=this._interactor,f=this.screenInfo,v=H.gv;v.isConnectActionVisible(G)&&H.getStyle("connectGuideVisible")&&(T=(T=G.s?G.s("connectGuideShift"):T)||H.getStyle("connectGuideShift"),H=G.getAnchor(),B=G.getSize(),G=G.toGlobal({x:B.width*(T[0]-H.x),y:B.height*(T[1]-H.y)}),G=V.toScreenPosition(v,G),f.P1?G.add(f.P2.clone().sub(f.P1).setLength(T[2])):(G.add(f.RT.clone().sub(f.LT).setLength(T[2])),G.add(f.LB.clone().sub(f.LT).setLength(T[3]))),f.connect=G)},v.prototype.gatherMultiTargets=function(T,B){return!!(B=V.Group.findOrCreateGroup(B,this._interactor._uuid))&&(this.editing&&"rotate"!==this.editing.mode||B.calcInfo(),this.gatherSingleTarget(T,B))},v.prototype.gatherLine=function(T,B){this.target=B;var G=this.screenInfo={},H=B.getPoints(),B=V.getDataMatrix(B);return G.P1=V.toScreenPosition(T,B.apply(H.get(0))),G.P2=V.toScreenPosition(T,B.apply(H.get(1))),this.gatherConnectInfo(),!0},v.ResizeKeys=["LT","RB","LB","RT","L","R","B","T"],v.ResizeDirection=[{x:-1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],v.RotateKeys=["rotLT","rotRB","rotLB","rotRT","rotL","rotR","rotB","rotT"],v.prototype.check=function(T,B,G){if(L.Default.isLeftButton(B)){var H=this;if(H.editing=null,H.tipInfo=null,H.screenInfo){var f=H.target,v=T.isEditable(f),J=H.screenInfo;if(v&&J.connect)if(m=H._checkConnect(G))return m;if(J.P1)return H._checkLine(G);var M,Y,m,E=null,Z=(m=H._interactor).getStyle("checkSize");if(v&&T.isRectEditable(f))for(A=0;A<V.Rect.ResizeKeys.length;A++)if(Y=V.Rect.ResizeKeys[A],V.checkHit(G,J[Y],Z)){E=Y,M="resize";break}if(!E&&v&&T.isRotationEditable(f)&&!m.getStyle("rotateAsClock"))for(var R=m.getStyle("rotateCheckSize"),A=0;A<V.Rect.RotateKeys.length;A++)if(Y=V.Rect.RotateKeys[A],V.checkHit(G,J[Y],R)){E=Y,M="rotate";break}if(E){if("rotate"===M){if(v=T.lp(B),f instanceof V.Group){for(var g=m.getStyle("groupRotateModeKey"),F=!1,W=0,s=(g="string"==typeof g?[g]:g).length;W<s;W++)if(B[g[W]]){F=!0;break}var T=m.getStyle("groupRotateModeDefault"),S=F?"batch"===T?"block":"batch":T}T="batch"===S?f.getAnchor2():f.getPosition(),v=Math.atan2(v.y-T.y,v.x-T.x),m._setRotateCursor(v),H.editing={mode:M,key:E,pos:T,flipY:f.getScale().y<0,rotation:f.getRotation(),hitRot:v},S&&(H.editing.groupRotateMode=S)}else{var T=V.Rect.ResizeKeys.indexOf(E),v=V.Rect.ResizeDirection[T],S=Math.cos(f.getRotation()),T=Math.sin(f.getRotation()),y=v.x*Math.sign(f.getScale().x),v=v.y*Math.sign(f.getScale().y),S=Math.atan2(-T*y-S*v,S*y-T*v),y=(Math.round(S/(Math.PI/4))+8)%8,T=(this._interactor.setCursor(["ew-resize","nesw-resize","ns-resize","nwse-resize","ew-resize","nesw-resize","ns-resize","nwse-resize"][y]),f.getWidth()),v=f.getHeight(),S=f.getAnchor();H.editing={mode:M,key:E,rect:{x:-T*S.x,y:-v*S.y,width:T,height:v},anchor:S,matrix:f.getMatrix()}}return E}m.setCursor("default")}}},v.prototype._checkLine=function(T){this.screenInfo;var B,G=this._interactor.getStyle("checkSize");if(V.checkHit(T,this.screenInfo.P1,G))B="P1";else{if(!V.checkHit(T,this.screenInfo.P2,G))return void this._interactor.setCursor("default");B="P2"}return this.editing={mode:"line",key:B},B},v.prototype._checkConnect=function(T){var B,G,H=this.screenInfo,f=this._interactor,v=f.getStyle("connectGuideIntersectSize"),H=H.connect,J=T.x,M=H.x;if(J<M&&M-J<v&&Math.abs(H.y-T.y)<v||M<=J&&V.checkHit(T,H,v))return B=vt.getConnectAction(f.gv),this.editing={mode:"connect"},B&&B.delete&&(this.target instanceof V.Group?(G=!0,f.gv.sm().getSelection().each(function(T){B.delete.visible.call(null,f.gv,T)||(G=!1)}),this.editing.hasDeleteAction=G):B.delete.visible.call(null,f.gv,this.target)&&(this.editing.hasDeleteAction=!0)),f.setCursor("default"),"connect"},v.prototype._fireEditEvent=function(T,B){var G=this._interactor,H=this.editing;H&&(H="rotate"===(H=H.mode)?"Rotation":"connect"===H?"Connection":"resize"===H?"Rect":H[0].toUpperCase()+H.slice(1),G.fi({kind:T+"Edit"+H,event:B}))},v.prototype.startEdit=function(T,B){T.startDragging(B),this._interactor.fi({kind:"prepareEdit",event:B});var G,H=this.editing,f=this.target;if(H){if(this._fireEditEvent("begin",B),H.started=!0,"rotate"===H.mode)return H.groupRotateMode&&f.beginRotate(H),void T._42();"connect"===H.mode?H.hasDeleteAction&&(B=T.gv,G=this._interactor.getStyle("connectGuideGarbageShift"),H.garbageInfo={x:B.getWidth()*G[0]+G[2],y:B.getHeight()*G[1]+G[3],size:this._interactor.getStyle("connectGuideGarbageIntersectsize")},T._42()):("line"===H.mode||f&&0===f.getRotation())&&(this._inSmartGuide=!0,this._interactor.rectGuide.gatherRects())}},v.prototype._46O=function(T){var B,G,H=this,f=H.editing,v=H.target;if(f){if("connect"===f.mode&&!f.canceled&&!f.deleted)try{f.garbageInfo&&f.garbageInfo.hover?vt.doDeleteConnectionAction(H._interactor.gv,v):vt.doConnectAction(H._interactor.gv,v,f.target)}catch(T){console.error(T)}G=f.freezeFlag,B=H.editing.groupRotateMode,H._fireEditEvent("end",T),H.editing=null}H.tipInfo=null,H._inSmartGuide&&(H._interactor.rectGuide.clear(),H._inSmartGuide=!1),B&&v&&v.endRotate(),v instanceof L.Block&&(G===Ht?delete v._freezeSyncFromChildren:v._freezeSyncFromChildren=G,v.updateFromChildren())},v.prototype.handleNormalStateDelete=function(){var T=this.editing;if(T&&"connect"===T.mode&&!T.canceled&&!T.deleted){if(T.garbageInfo){try{vt.doDeleteConnectionAction(this._interactor.gv,this.target)}catch(T){console.error(T)}T.garbageInfo=null}return T.cursorPos=null,T.targetCorners=null,T.deleted=!0,this._interactor._42(),!0}},v.prototype.handleNormalStateKeyDown=function(T){var B=this.editing;if(B&&"connect"===B.mode&&!B.canceled&&!B.deleted)return L.Default.isEsc(T)?(B.cursorPos=null,B.targetCorners=null,B.canceled=!0,this._interactor._42(),!0):void 0},v.prototype.handleEdit=function(B,T){var G=this,H=G.editing;if(H){var f,v,J=G.target,M=H.key,Y=H.mode,m=B.lp(T),E=G._interactor;if("connect"===Y)return H.canceled?void 0:H.deleted?void 0:(H.cursorPos=E._getLogicalPoint(T),(S=H.garbageInfo)&&V.checkHit(H.cursorPos,S,S.size)?(S.hover=!0,H.target=null,H.targetCorners=null):(S&&(S.hover=!1),H.target=B.getDataAt(m,function(T){return!!B.isSelectable(T)&&!!r(T)})||null,H.targetCorners=V.getTargetCornersOnScreen(B,H.target)),void E._42());if("rotate"===Y){S=H.pos,S=Math.atan2(m.y-S.y,m.x-S.x),y=H.groupRotateMode?S-H.hitRot:(s=S-H.hitRot,H.rotation+s),(y%=2*Math.PI)<0&&(y+=2*Math.PI),L.Default.isCtrlDown(T)||(g=l2(T)?(Z=E.getStyle("shiftRotateRound"))/2:(Z=E.getStyle("rotateRound"),E.getStyle("rotateSensitivity")),y=V.roundTo(y,Z,g)),H.groupRotateMode?0!=(s=y-(H.lastRotation||0))&&(J.addRotation(s,H.groupRotateMode,function(T){return B.isRotationEditable(T)}),H.lastRotation=y):J.setRotation(y),E._setRotateCursor(S),y>Math.PI&&(y-=2*Math.PI);var Z=(y/Math.PI*180).toFixed(2)+"°"}else if("resize"===Y){var R,A,g=H.rect,F=g.x,W=g.y,s=g.width,S=g.height,y=H.anchor,x=H.matrix,w=J.s&&J.s("keepAspectRatio")||E.getStyle("keepAspectRatio"),O=(l2(T)&&(w=!w),G._unionPointMode1),_=G._unionPointMode2,_=(!G._inSmartGuide||L.Default.isCtrlDown(T)||w||("L"===M||"R"===M?R="x":"T"!==M&&"B"!==M||(R="y"),G._adsorbedToClosest(m,R),v=!0),p=x.tfi(m),"LT"===M?(g=O(p,{x:F+s,y:W+S},s,S,w),A=9):"T"===M?(g=_({x:F,y:p.y},{x:F+s,y:W+S},s,S,w,"v"),A=1):"RT"===M?(g=O(p,{x:F,y:W+S},s,S,w),A=33):"L"===M?(g=_({x:p.x,y:W},{x:F+s,y:W+S},s,S,w,"h"),A=8):"R"===M?(g=_({x:F,y:W},{x:p.x,y:W+S},s,S,w,"h"),A=32):"LB"===M?(g=O(p,{x:F+s,y:W},s,S,w),A=12):"B"===M?(g=_({x:F,y:W},{x:F+s,y:p.y},s,S,w,"v"),A=4):"RB"===M&&(g=O(p,{x:F,y:W},s,S,w),A=36),x.tf(g.x+g.width*y.x,g.y+g.height*y.y));J instanceof L.Block&&(H.hasOwnProperty("freezeFlag")||(H.freezeFlag=J._freezeSyncFromChildren,J._freezeSyncFromChildren=!0)),J.setPosition(_),J.setSize(g.width,g.height),v&&(f=J.getRect(),E.rectGuide.gatherLines({node:J,x:f.x,y:f.y,w:f.width,h:f.height},R,A)),Z=Math.round(g.width)+" * "+Math.round(g.height)}else if("line"===Y){if(l2(T)){var O=J.getPoints(),p="P1"===M?O.get(1):O.get(0),q=m.x-p.x,u=m.y-p.y,i=E.getStyle("shiftLineRotateRound"),I=G._shiftDirList;if(!I||G._shiftRotateRound!==i){G._shiftRotateRound=i,G._shiftDirList=I=[];for(var D=0;D<Math.PI;D+=i)I.push({x:Yt(D),y:Mt(D)})}for(var h,o=0,e=0,c=I.length;e<c;e++){var t=I[e],d=t.x*q+t.y*u;Math.abs(d)>Math.abs(o)&&(o=d,h=t)}m={x:p.x+h.x*o,y:p.y+h.y*o},E.rectGuide.clear()}else G._inSmartGuide&&!L.Default.isCtrlDown(T)&&(G._adsorbedToClosest(m),v=!0);s=V.getDataMatrix(J).applyInverse(m),J.setPoint("P1"===M?0:1,s,!0),w=(S=J.getPoints()).get(0),x=S.get(1),F=w.x-x.x,W=w.y-x.y,Z=" "+Math.round(Math.sqrt(F*F+W*W))+" ",v&&(f=J.getRect(),E.rectGuide.gatherLines({node:J,x:f.x,y:f.y,w:f.width,h:f.height}))}Z&&((y=L.Default.getLogicalPoint(T,E._canvas)).x+=V.Icons.TipShiftX,y.y+=V.Icons.TipShiftY,G.tipInfo={helperPos:y,text:Z,size:Z.length}),G._fireEditEvent("between",T)}},v.prototype._unionPointMode1=function(T,B,G,H,f){var v;return f&&G&&H&&(f=T.x-B.x,v=T.y-B.y,Math.abs(f*H)<Math.abs(v*G)?(v=Math.sign(v)*Math.abs(f*H/G),T.y=B.y+v):(f=Math.sign(f)*Math.abs(v*G/H),T.x=B.x+f)),L.Default.unionPoint(T,B)},v.prototype._unionPointMode2=function(T,B,G,H,f,v){var J,T=L.Default.unionPoint(T,B);return f&&G&&H&&("v"===v?(J=T.x+T.width/2,T.width=G*T.height/H,T.x=J-T.width/2):(J=T.y+T.height/2,T.height=H*T.width/G,T.y=J-T.height/2)),T},v.prototype._adsorbedToClosest=function(T,B){var G=(H=this._interactor).rectGuide.findClosest(T,B),H=H.gridGuide.findClosest(T,B),B=1/0,f=1/0;G&&(isFinite(G.x)&&(B=G.x),isFinite(G.y)&&(f=G.y)),H&&(isFinite(H.x)&&Math.abs(H.x)<Math.abs(B)&&(B=H.x),isFinite(H.y)&&Math.abs(H.y)<Math.abs(f)&&(f=H.y)),isFinite(B)&&(T.x+=B),isFinite(f)&&(T.y+=f)},v.prototype._42=function(T,B,G){var H=this,f=(H.info={},H.screenInfo=null,H._interactor);if(!f.editDetail&&H.gatherInfo(B,G)){var v=H.editing,G=v?v.groupRotateMode:null,J=H.screenInfo;if("block"!==G||!v||!v.started){if(J.P1?V.Icons.DrawIcon(f,T,V.Icons.Line,J):V.Icons.DrawIcon(f,T,V.Icons.Rect,J),J.connect&&(V.Icons.DrawIcon(f,T,V.Icons.ConnectGuide,{rotation:J.rotation,connect:J.connect,cursorPos:v?v.cursorPos:null}),v)){if(v.targetCorners){for(var M={x:1/0,y:1/0},Y={x:-1/0,y:-1/0},m=0,E=v.targetCorners.length;m<E;m+=2)M.x=Math.min(M.x,v.targetCorners[m]),Y.x=Math.max(Y.x,v.targetCorners[m]),M.y=Math.min(M.y,v.targetCorners[m+1]),Y.y=Math.max(Y.y,v.targetCorners[m+1]);V.Icons.DrawIcon(f,T,V.Icons.HoverDataRect,{min:M,max:Y,color:f.getStyle("hoverGuideColor")||f.getStyle("baseColor")})}v.garbageInfo&&V.Icons.DrawIcon(f,T,V.Icons.ConnectGuideGarbage,v.garbageInfo)}f.getStyle("rotateTipVisible")&&H.tipInfo&&V.Icons.DrawIcon(f,T,V.Icons.TipHelper,H.tipInfo)}H.target instanceof V.Group&&H.target._42(f,T,B)}},(((G=V.Anchor=function(T){this.catalog="Anchor",this._interactor=T}).prototype={}).constructor=G).prototype.gatherInfo=function(T,B){if(1!==B.length)return 1<B.length&&this.gatherMultiTargets(T,B);var G=B[0];return G.getAnchor&&!(G instanceof L.Shape&&G._70I()||A1(G,T))?this.gatherSingleTarget(T,B[0]):void 0},G.prototype.gatherSingleTarget=function(T,B){return this.info.POS=B.getPosition(),this.screenInfo.POS=V.toScreenPosition(T,this.info.POS),this.target=B,!0},G.prototype.gatherMultiTargets=function(T,B){return!!(B=V.Group.findOrCreateGroup(B,this._interactor._uuid))&&(this.screenInfo.POS=V.toScreenPosition(T,B.getAnchor2()),this.target=B,!0)},G.prototype.isVisible=function(){var T=this._interactor;if(!1===T.getStyle("anchorVisible"))return!1;var B=this.target;if(B){if(this.editing)return!0;var G=B.getAnchor(),H=T.getStyle("anchorOutsideVisibleThreshold");if(G.x<-H||G.x>1+H||G.y<-H||G.y>1+H)return!0;if(G=B.getSize(),H=B.getScale(),Math.min(Math.abs(G.width*H.x),Math.abs(G.height*H.y))*T.gv._zoom<T.getStyle("anchorHideThreshold"))return!1}return!0},G.prototype.check=function(T,B,G){if(L.Default.isLeftButton(B)&&(B=this._interactor,this.isVisible()&&!1!==B.getStyle("anchorMovable"))){this.editing=null,this.tipInfo=null;var H=this.target;if(H&&T.isAnchorEditable(H)&&T.isEditable(H)&&this.screenInfo&&(T=this.screenInfo.POS)&&V.checkHit(G,new V.Math.Vector2(T),B.getStyle("checkSize")))return H instanceof V.Group?this.editing={}:(G=H.getWidth(),T=H.getHeight(),B=H.getAnchor(),this.editing={rect:{x:-G*B.x,y:-T*B.y,width:G,height:T},anchor:B,matrix:H.getMatrix()}),!0}},G.prototype.startEdit=function(T,B){T.startDragging(B),T.fi({kind:"beginEditAnchor",event:B})},G.prototype._46O=function(T){this.editing&&(this.editing=null,this._interactor.fi({kind:"endEditAnchor",event:T})),this.tipInfo=null},G.prototype.handleEdit=function(T,B){var G=this.target;if(G&&(f=this.editing)){var T=T.lp(B),H=this._interactor;if(G instanceof V.Group)return G.setAnchor2(T),void H._42();var T=f.matrix.tfi(T),f=f.rect,v=(T.x-f.x)/f.width,T=(T.y-f.y)/f.height;L.Default.isCtrlDown(B)||(f=H.getStyle("anchorRound"),J=H.getStyle("anchorSensitivity"),v=V.roundTo(v,f,J),T=V.roundTo(T,f,J)),G.setAnchor(v,T,!0);(f=L.Default.getLogicalPoint(B,H._canvas)).x+=V.Icons.TipShiftX,f.y+=V.Icons.TipShiftY;var J=v.toFixed(2)+", "+T.toFixed(2);this.tipInfo={helperPos:f,text:J,size:J.length},H.fi({kind:"betweenEditAnchor",event:B})}},G.prototype._42=function(T,B,G){this.info={},this.screenInfo={};var H=this._interactor;H.editDetail||this.gatherInfo(B,G)&&this.isVisible()&&(V.Icons.DrawIcon(H,T,V.Icons.Anchor,this.screenInfo),this.tipInfo&&V.Icons.DrawIcon(H,T,V.Icons.TipHelper,this.tipInfo))},(((B=V.MoveDummy=function(T){this.catalog="MoveDummy",this._interactor=T}).prototype={}).constructor=B).prototype.gatherInfo=function(T,B){var G=this._interactor.getSubModule("Rect");if(G&&(Y=G.screenInfo)){var H=this._interactor;if(this.getMovableTarget(G.target)&&!1!==(G=H.getStyle("moveDummyThreshold"))){var f=Y.LT||Y.P1,v=Y.RT||Y.P2,J=Y.LB||f;if(f){var M,Y=Y.P1,m=Math.min(f.distanceTo(J),f.distanceTo(v));if(!(!0!==G&&G<m))return G=H.getStyle("moveDummyPosition"),m=v.clone().sub(f),v=J.clone().sub(f),J=G[2],M=G[3],(Y=Y&&H.getStyle("moveDummyLineExtraShift"))&&(J+=Y[0],M+=Y[1]),Y=f.clone().add(m.clone().multiplyScalar(G[0])).add(m.setLength(J)).add(v.clone().multiplyScalar(G[1])).add(v.setLength(M)),this.screenInfo.pos=Y,this.screenInfo.size=H.getStyle("moveDummySensitivity"),!0}}}},B.prototype.getMovableTarget=function(T){var B=this._interactor.gv;if(r(T)){if(B.isMovable(T))return T}else if(T instanceof V.Group)for(var G=T._entities,H=G.length-1;0<=H;H--){var f=G[H];if(r(f)&&B.isMovable(f))return f}return null},B.prototype.getMoveInteractor=function(){for(var T,B=this._interactor.gv.getInteractors(),G=0,H=B.length;G<H;G++)if((T=B.get(G))instanceof Da)return T},B.prototype.startEdit=function(T,B){T.startDragging(B);var G,H=this.getMoveInteractor();H&&(G=this.selectedTarget,(T=T.gv)._moving=1,H._data=G,T.handleMouseDown&&T.handleMouseDown(B,G))},B.prototype._46O=function(T){var B=this.getMoveInteractor();B&&(B.handleWindowMouseUp(T),this.selectedTarget=null)},B.prototype.handleEdit=function(T,B){var G=this.getMoveInteractor();G&&G.handleWindowMouseMove(B)},B.prototype.check=function(T,B,G){if(this.selectedTarget=null,L.Default.isLeftButton(B)&&!T._scrolling&&!o0()&&this.screenInfo&&(B=this.screenInfo.pos)&&!(G.distanceTo(B)>this.screenInfo.size))return T=this._interactor,this.selectedTarget=this.getMovableTarget(T.getSubModule("Rect").target),T.setCursor("default"),!0},B.prototype._42=function(T,B,G){this.screenInfo={};var H=this._interactor;H.editDetail||!this.gatherInfo(B,G)||H.editing&&!this.selectedTarget||V.Icons.DrawIcon(H,T,V.Icons.MoveDummy,this.screenInfo)},(((v=V.RotateX=function(T){this.catalog="RotateX",this._interactor=T}).prototype={}).constructor=v).prototype.gatherInfo=function(T,B){var G;return 1===B.length?!((G=B[0])instanceof L.Shape&&G._70I()||A1(G,T))&&this.gatherSingleTarget(T,G):1<B.length&&this.gatherMultiTargets(T,B)},v.prototype.gatherSingleTarget=(Ua=new L.Math.Vector2,la=new L.Math.Vector2,ba=new L.Math.Vector2,Ka=new L.Math.Vector2,function(T,B){var G,H;if(B.getCorners)return H=B.getCorners(),G=B.getPosition(),Ua.copy(H[0]),ba.copy(H[1]),Ka.copy(H[3]),la.copy(Ua).add(Ka).divideScalar(2).add(Ua.sub(ba).setLength(15/T.getZoom())),H=Math.max(uN(G,H[0]),uN(G,H[1]),uN(G,H[2]),uN(G,H[3])),this.info.POS=la.clone(),this.screenInfo.POS=V.toScreenPosition(T,this.info.POS),this.screenInfo.LEN=Math.sqrt(H)*T.getZoom()+15,this.screenInfo.CENTER=V.toScreenPosition(T,G),this.target=B,!0}),v.prototype.gatherMultiTargets=function(T,B){return!!(B=V.Group.findOrCreateGroup(B,this._interactor._uuid))&&this.gatherSingleTarget(T,B)},v.prototype.isVisible=function(){var T=this._interactor;if(!T.getStyle("rotateAsClock"))return!1;var B=this.target;return!B||!(!(T=T.gv).isEditable(B)||!T.isRotationEditable(B))},v.prototype.check=function(T,B,G){return((T=this._checkImpl(T,B,G))||this._clockPainted)&&this._interactor._42(),T},v.prototype._checkImpl=function(T,B,G){if(L.Default.isLeftButton(B)){var H=this;if(H.editing=null,H.tipInfo=null,H.screenInfo&&(f=H.screenInfo.POS)&&H.isVisible()){var f,v=H._interactor;if(V.checkHit(G,f,v.getStyle("checkSize")))return G=H.target,f=T.lp(B),T=G.getPosition(),B=Math.atan2(f.y-T.y,f.x-T.x),v._setRotateCursor(B),H.editing={pos:T,rotation:G.getRotation(),hitRot:B,groupRotateMode:"block",screenInfo:{CENTER:H.screenInfo.CENTER,LEN:H.screenInfo.LEN}},!0}}},v.prototype.startEdit=function(T,B){T.startDragging(B),T.fi({kind:"beginEditRotation",event:B}),this.target instanceof V.Group&&this.target.beginRotate(this.editing)},v.prototype._46O=function(T){this.editing&&(this.editing=null,this._interactor.fi({kind:"endEditRotation",event:T})),this.target instanceof V.Group&&this.target.endRotate(),this.tipInfo=null},v.prototype.handleEdit=function(B,T){var G,H,f,v,J,M,Y,m,E=this.editing;E&&(G=this.target,f=B.lp(T),H=this._interactor,J=E.pos,f=Math.atan2(f.y-J.y,f.x-J.x),M=(J=G instanceof V.Group)?f-E.hitRot:(v=f-E.hitRot,E.rotation+v),(M%=2*Math.PI)<0&&(M+=2*Math.PI),L.Default.isCtrlDown(T)||(m=l2(T)?(Y=H.getStyle("shiftRotateRound"))/2:(Y=H.getStyle("rotateRound"),H.getStyle("rotateSensitivity")),M=V.roundTo(M,Y,m)),J?0!=(v=M-(E.lastRotation||0))&&(G.addRotation(v,E.groupRotateMode,function(T){return B.isRotationEditable(T)}),E.lastRotation=M):G.setRotation(M),H._setRotateCursor(f),M>Math.PI&&(M-=2*Math.PI),Y=(M/Math.PI*180).toFixed(2)+"°",(m=L.Default.getLogicalPoint(T,H._canvas)).x+=V.Icons.TipShiftX,m.y+=V.Icons.TipShiftY,this.tipInfo={helperPos:m,text:Y,size:Y.length},H.fi({kind:"betweenEditRotation",event:T}))},v.prototype._42=function(T,B,G){var H=this,f=(H._clockPainted=!1,H.info={},H.screenInfo={},H._interactor);f.editDetail||H.gatherInfo(B,G)&&H.isVisible()&&(V.Icons.DrawIcon(f,T,V.Icons.RoundPoint,H.screenInfo.POS),f.getStyle("rotateTipVisible")&&H.tipInfo&&V.Icons.DrawIcon(f,T,V.Icons.TipHelper,H.tipInfo),H.editing&&H.drawClock(T))},v.prototype.drawClock=function(T){T.save(),this._clockPainted=!0;var B,G,H,f,v,J=this.editing||{},M=J.screenInfo||this.screenInfo,Y=M.LEN,m=Y+8,E=Y+18;T.save(),T.translate(M.CENTER.x,M.CENTER.y),T.beginPath(),T.strokeStyle="rgb(150, 150, 150)";for(var Z=0;Z<360;Z++)B=Z*Math.PI/180,Z%5==0&&(G=Mt(B)*Y,H=Yt(B)*Y,f=Mt(B)*m,v=Yt(B)*m,T.moveTo(G,H),T.lineTo(f,v)),Z%45==0&&(G=Mt(B)*Y,H=Yt(B)*Y,f=Mt(B)*E,v=Yt(B)*E,T.moveTo(G,H),T.lineTo(f,v));T.stroke(),T.rotate(-ot),M=J.lastRotation||this.target.getRotation(),T.beginPath(),T.fillStyle="rgba(255, 0, 0, 0.1)",T.strokeStyle="rgb(157, 157, 157)",T.moveTo(0,0),T.arc(0,0,E,0,M,!1),T.fill(),T.beginPath(),T.moveTo(0+E,0),T.arc(0,0,E,0,M,!1),T.stroke(),T.restore()},((T=V.Curve=function(T){this.catalog="Curve",this._interactor=T}).prototype={}).constructor=T,N.defineProperties(T.prototype,{activing:{get:function(){return this._activing},set:function(T){T?(this._activing=new V.CurveActiving(this,T),this.gatherSingleTarget(this._interactor.gv,this.target)):((T=this._activing)&&T.dispose(),this._activing=null)}}}),T.PointType={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3},T.prototype.setUp=function(){var T=this._interactor;T&&T.gv.mp(this._onGraphviewPropertyChanged,this)},T.prototype._onGraphviewPropertyChanged=function(T){"zoom"!==T.property&&"translateX"!==T.property&&"translateY"!==T.property||this._handleDataChanged()},T.prototype.tearDown=function(){var T=this._interactor;T&&T.gv.ump(this._onGraphviewPropertyChanged,this)},T.prototype.canEnterEditDetailMode=function(){var T=zJ(this._interactor);if(T)return this.target=T},T.prototype.canQuitEditDetailMode=function(T){var B=this._interactor._getLogicalPoint(T);if(!this._checkEditRealPoint(B))return this._interactor.gv.getDataAt(T)!==this.target||void 0},T.prototype.preHandleScroll=function(T){var B=this.editing;if(B&&B.inEdit)return!0},T.prototype.getCurrentSelectintStatus=function(){var G=this;if(G.activing&&!G.activing.selections){if(G.activing.status!=Ht)return G.activing.status;var T=function(T){var B=G.activing.status;G.activing.status=T,G._interactor.fp("shapePointStatus",B,T)},B=V.Curve.PointType,H=G.activing.point,f=G.activing.pairs;if(!f||1!==f.length)return T(B.Mirrored);var v=(f=f[0]).c1&&f.c1.isNearEnough(H),J=f.c2&&f.c2.isNearEnough(H);return f.c1&&f.c2?v&&J?T(B.Straight):v||J?T(B.Asymmetric):(v=f.c1.clone().sub(H),J=f.c2.clone().sub(H),1e-5<Math.abs(v.x*J.y-v.y*J.x)||0<v.x*J.x?T(B.Disconnected):1e-5<Math.abs(v.length()-J.length())?T(B.Asymmetric):T(B.Mirrored)):T(v||J?B.Straight:B.Disconnected)}},T.prototype.handle_keydown=function(T){var B;this._interactor.editDetail&&(B=V.Curve.PointType,"1"===T.key?this._setCurrentSelectionStatus(B.Straight):"2"===T.key?this._setCurrentSelectionStatus(B.Mirrored):"3"===T.key?this._setCurrentSelectionStatus(B.Disconnected):"4"===T.key&&this._setCurrentSelectionStatus(B.Asymmetric))},T.prototype.setCurrentSelectionStatus=function(T){var B=this._interactor;B&&((B=B.gv).dm().beginTransaction(),this._setCurrentSelectionStatus(T),B.dm().endTransaction())},T.prototype._setCurrentSelectionStatus=function(T){var B=this,G=B.activing;if(G){var H=B.getCurrentSelectintStatus();if(null!==H&&H!==T){G.status=T;var f=B.activing.point;if((v=B.activing.pairs)&&1===v.length){var v=v[0],J=B.screenInfo.curve,M=V.Curve.PointType,Y=B._interactor,m=function(){B._writeToHt(),Y.fp("shapePointStatus",H,T),B.check(Y.gv,null,new V.Math.Vector2(Y._lastLogicalPoint))};if(T===M.Straight)return J.moveCtrlPoint(v,f,"c1"),J.moveCtrlPoint(v,f,"c2"),void m();if(H===M.Straight)return Z=(E=J.findPairs(f,!0)[0]).r1||f,E=(E.r2||f).clone().sub(Z).multiplyScalar(.25),J.moveCtrlPoint(v,f.clone().sub(E),"c1"),J.moveCtrlPoint(v,f.clone().add(E),"c2"),void m();var E,Z=v.c1,R=v.c2;if(Z&&R){if(T===M.Mirrored)return J.moveCtrlPoint(v,f.clone().multiplyScalar(2).sub(R),"c1"),void m();if(T===M.Asymmetric&&H===M.Disconnected)return M=Z.clone().sub(f).length(),E=f.clone().sub(R).setLength(M).add(f),J.moveCtrlPoint(v,E,"c1"),void m()}G._firePointChange(),Y.fp("shapePointStatus",H,T),B.check(Y.gv,null,new V.Math.Vector2(Y._lastLogicalPoint))}}}},T.prototype._handleDataChanged=(aa="s:edge.points,s:edge.segments,points,segments,shape,position,rotation,scale".split(","),function(T){this.screenInfo&&this.target&&(T&&aa.indexOf(T.property)<0||(T=this._interactor,this.gatherSingleTarget(T.gv,this.target,!0),this.check(T.gv,null,new V.Math.Vector2(T._lastLogicalPoint)),T._42()))}),T.prototype.gatherSingleTarget=function(B,T,G){var H,f,v,J,M=this,Y=(M.screenInfo&&M.screenInfo.curve&&(H=M.screenInfo.curve._curves),M.editing),m=Y?M.screenInfo:M.screenInfo={},E=T instanceof L.Edge,Z=E?(J=T.s("edge.segments"),T.s("edge.points")||new L.List):(J=T._58O,T._59O),R=(m.S=J,m.P=[]),A=V.getDataMatrix(T);if(T instanceof L.Polyline||T instanceof L.Edge&&M._interactor.getStyle("edgeElevationEditable")?(f=T.getElevation&&T.getElevation()||0,m.E=[]):(v=!1,Z.each(function(T){T.e!==Ht&&(v=!0)}),v&&(m.E=[])),Z.each(function(T){m.E&&m.E.push(T.e!=Ht?T.e:f),T=A.apply(T),T=V.toScreenPosition(B,T),R.push(T.x,T.y)}),E&&(J=R.length,Z=V.toScreenPosition(B,T._lastSourcePoint||(J?{x:R[0],y:R[1]}:{x:0,y:0})),E=V.toScreenPosition(B,T._lastTargetPoint||(J?{x:R[J-2],y:R[J-1]}:{x:0,y:0})),R.splice(0,0,Z.x,Z.y),R.push(E.x,E.y),m.E&&((J=T.getSourceAgent())instanceof L.Edge?m.E.splice(0,0,T.s("edge.source.offset.elevation")):m.E.splice(0,0,((T.s("edge.source.anchor.elevation")||.5)-.5)*J.getTall()*J.getScaleTall()+J.getElevation()+T.s("edge.source.offset.elevation")),(Z=T.getTargetAgent())instanceof L.Edge?m.E.push(T.s("edge.target.offset.elevation")):m.E.push(((T.s("edge.target.anchor.elevation")||.5)-.5)*Z.getTall()*Z.getScaleTall()+Z.getElevation()+T.s("edge.target.offset.elevation")))),!m.S||!m.S.size()){m.S=new L.List,m.S.add(1);for(var g=0;g<R.length/2-1;g++)m.S.add(2)}Y&&!G||M.convertToCubicBezier(H),!M.activing||!G&&M.editing&&"realPoint"!==M.editing.type||(E=m.curve.findPairs(M.activing.point),M.activing.pairs=E)},T.prototype._convertToNewPoint=function(T,B,G,H){for(var f,v=0,J=B.length;v<J;v++){if((f=B[v])._p1.isNearEnough(T)&&(!H||H.indexOf(f._p1)<0))return f._p1;if(f._p4.isNearEnough(T)&&(!H||H.indexOf(f._p4)<0))return f._p4}if(G)for(v=0,J=Math.min(G.length,J);v<J;v++){if((f=G[v])._p1===T&&(!H||H.indexOf(B[v]._p1)<0))return B[v]._p1;if(f._p4===T&&(!H||H.indexOf(B[v]._p4)<0))return B[v]._p4}},T.prototype.convertToCubicBezier=function(B){var G,H,f,v,J,M=this,T=new V.Math.Curve,Y=M.screenInfo;T.createFromHtShape(Y.P,Y.S,Y.E),Y.curve=T,M.activing&&(G=T._curves,Y=M.activing.point,H=M._convertToNewPoint(Y,G,B),f=[],H&&(M.activing.point=H,f.push(H)),M.activing.selections&&(v=-1,(J=M.activing.selections).forEach(function(T){v++,(H=M._convertToNewPoint(T,G,B,f))&&(J[v]=H,f.push(H))})))},T.prototype.check=function(T,B,G){if(!B||L2(B)||j2(B)){var H=this;if(H._interactor.setCursor("default"),H.editing=null,H.highlight=null,H.tipInfo=null,H.edgeEditResult=null,H.screenInfo)return o0()||B&&j2(B)||H._checkEditCtrlPoint(G)||H._checkEditRealPoint(G)||H._checkEditElevation(G)||(B=H.screenInfo.curve.checkPoint(G,H._interactor.getStyle("curveIntersectSize")))&&((G=H.highlight={type:"insertKnot"}).bezier=B.bezier,G.point=B.intersection),H._interactor._42(),!0}},T.prototype.getAdjacentBeziers=function(T){var B=this.screenInfo;if(B){for(var G,H=B.curve._curves,f=[],v=Ht,J=0,M=H.length;J<M;J++)if(G=H[J],v===Ht){if(G._p4.isNearEnough(T))f.push(G),v=J;else if(G._p1.isNearEnough(T))return f.push(G),f}else{if(G._p1.isNearEnough(T))return f.push(G),f;G._p4.isNearEnough(T)&&(f[0]=G,v=J)}return f}},T.prototype.roundCorner=function(T){if(this.activing&&this.screenInfo){var B=this.screenInfo.curve._curves,G=(E=this.activing).point,H=this.getAdjacentBeziers(G);if(H&&2===H.length)var f=(v=H[1])._index,v=v.insertKnot(v.getTByPercentage(T/v.length))[1],J=(B[f]=v).p1,M=(Y=H[0])._index,Y=Y.insertKnot(Y.getTByPercentage(1-T/Y.length))[0],m=(B[M]=Y).p4;else{var E=E.pairs[0],Z=B.length;if(E.c1){if(E.c2)return;var M=(Y=H[0])._index,m=(Y=Y.insertKnot(Y.getTByPercentage(1-T/Y.length))[0]).p4,J=(J=(v=B[(M+1)%Z]).p1).clone().sub(G).setLength(T).add(G),f=M+1;if(1-Math.abs(m.clone().sub(G).normalize().dot(J.clone().sub(G).normalize()))<1e-8)return;B[M]=Y}else{if(f=(v=H[0])._index,J=(v=v.insertKnot(v.getTByPercentage(T/v.length))[1]).p1,m=(m=(Y=B[(f-1+Z)%Z]).p4).clone().sub(G).setLength(T).add(G),1-Math.abs(m.clone().sub(G).normalize().dot(J.clone().sub(G).normalize()))<1e-8)return;B[f]=v}}M=new V.Math.CubicBezier(m,(E=G).clone().sub(m).multiplyScalar(2/3).add(m),E.clone().sub(J).multiplyScalar(2/3).add(J),J),B.splice(f,0,M),this._writeToHt(),this.activing=null,this._interactor._42()}},T.prototype._checkEditRealPoint=function(T){var B,G,H,f,v,J,M=this.screenInfo.curve._curves,Y=this._interactor.getStyle("curvePointIntersectSize"),m=1/0;for(Y*=Y,H=0,f=M.length;H<f;H++)v=(B=M[H])._p1,(J=T.distanceToSquared(v))<m&&(m=J,G=v),v=B._p4,(J=T.distanceToSquared(v))<m&&(m=J,G=v);return!(Y<m)&&((Y=this.highlight={type:"changeRealPoint"}).point=G,this.editing={type:"realPoint",point:G,shiftGuide:{point:G.clone(),dir:"x",limit:0}},this._interactor.setCursor("crosshair"),!0)},T.prototype._checkEditElevation=function(T){if(!this._interactor.getStyle("curveElevationVisible"))return!1;if(this.target instanceof L.Edge&&!this._interactor.getStyle("edgeElevationEditable"))return!1;var B=this.activing;if(!B)return!1;if(!(B=B.getCurrentEditingPoint()))return!1;var G=this._interactor,H=G.getStyle("curveElevationGuideShift");return(G=G.getStyle("curveElevationIntersectSize"))*G<T.distanceToSquared({x:B.x+H[0],y:B.y+H[1]})?void 0:(this.highlight={type:"elevation"},G=new V.Math.Vector2(T.x,T.y,B.e),this.editing={type:"elevation",startPoint:G},this._interactor.setCursor("crosshair"),!0)},T.prototype._checkEditCtrlPoint=function(T){var B=this;if(B.activing&&!B.activing.selections&&(Y=B.getCurrentSelectintStatus())!==V.Curve.PointType.Straight){var G=B.activing.pairs;if(G){var H,f,v,J,M,Y=B._interactor.getStyle("curvePointIntersectSize");Y*=Y;for(var m,E,Z=1/0,R=0,A=G.length;R<A;R++)for(J=G[R],E=0;E<2;E++)J[M=0===E?"c1":"c2"]&&(m=T.distanceToSquared(J[M]))<Z&&(Z=m,H=J,f=R,v=M);return Y<Z?!1:(B.activing.hlpair=H,B.activing.hltype=v,(Y=B.highlight={type:"changeCtrlPoint"}).point=H[v],B.editing={type:"ctrlPoint",pair:H,pairId:f,ctrlType:v,direction:H[v].clone().sub(B.activing.point).normalize()},B._interactor.setCursor("crosshair"),!0)}}},T.prototype.startEdit=function(T,B){T.startDragging(B);var G,H,f,v,J=this;J.highlight&&"insertKnot"===J.highlight.type&&(J.insertKnot(),J.gatherSingleTarget(J._interactor.gv,J.target),J.activing=null,J._checkEditRealPoint(J._interactor._getLogicalPoint(B)));(Y=J._activing)&&("ctrlPoint"===(M=J.editing?J.editing.type:null)?Y.editingCtrl={pairId:J.editing.pairId,type:Y.hltype}:"realPoint"===M&&(Y.editingCtrl=!1));var M=J.highlight,Y=L.Default.isCtrlDown(B);if(!M||o0()||j2(B))return!(G=J._interactor.gv).setFocus(B)||G._scrolling?void 0:void(Y?J._multiSelect={startPoint:G.lp(B)}:G.isPannable()&&(L2(B)||j2(B))&&(J._pan={tx:G.tx(),ty:G.ty()},T.fi({kind:"beginPan",event:B})));"changeRealPoint"===M.type&&(G=J.activing?J.activing.point:null,H=J.activing?J.activing.selections:null,Y&&J.activing?G===M.point?(H?(J.activing={point:H[0]},1<H.length&&(H.splice(0,1),J.activing.selections=H)):J.activing=null,J.editing=null):H&&0<=(f=H.indexOf(M.point))?(1<H.length?H.splice(f,1):delete J.activing.selections,J.editing=null):H?(H.push(G),J.activing={point:M.point,selections:H}):J.activing={point:M.point,selections:[G]}:H?G!==M.point&&(0<=(f=H.indexOf(M.point))?(H.splice(f,1,G),J.activing={point:M.point,selections:H}):J.activing={point:M.point}):(G===M.point&&(v=J.activing.status),J.activing={point:M.point},v&&(J.activing.status=v)),T.fi({kind:"beginEditPoint",event:B}))},T.prototype.insertKnot=function(){var T=this.highlight;this.screenInfo.curve.insertKnot(T.bezier,T.point.t),this._writeToHt()},T.prototype._writeToHt=function(){var T,B,G,H=(v=this.screenInfo.curve.toHtShape()).points,f=[],v=v.segments,J=this._interactor.gv,M=(J.dm().beginTransaction(),this.target),Y=M instanceof L.Edge,m=V.getDataMatrix(M).invert();(M instanceof L.Polyline||Y&&this._interactor.getStyle("edgeElevationEditable"))&&(G=M.getElevation&&M.getElevation()||0);for(var E=0,Z=H.length;E<Z;E++)T=H[E],B=V.toWorldPosition(J,T),B=m.apply(B),isFinite(T.e)&&T.e!==G&&(B.e=T.e),f.push(B);M._writing=!0,Y?(M.s("edge.type","points"),M.setStyle("edge.segments",v),M.setStyle("edge.points",f.slice(1,f.length-1)),M.setStyle("edge.source.offset.x",0),M.setStyle("edge.source.offset.y",0),M.setStyle("edge.target.offset.x",0),M.setStyle("edge.target.offset.y",0),Y=this._nextChangeEdgeHost,delete this._nextChangeEdgeHost,Y&&("source"===Y.type?M.setSource(Y.host):M.setTarget(Y.host)),this._writeEdgeHostAnchor("source",f[0]),this._writeEdgeHostAnchor("target",f[f.length-1])):f.length?(M.setSegments(v),M.setPoints(f,!0)):M.removeFromDataModel(),J.dm().endTransaction(),delete M._writing},T.prototype._writeEdgeHostAnchor=function(T,B){var G=this.target,H=this._calcHostAnchor(G,T,B);H.index!==Ht?(G.setStyle("edge."+T+".index",H.index),G.setStyle("edge."+T+".percent",Ht),G.setStyle("edge."+T+".anchor.x",Ht),G.setStyle("edge."+T+".anchor.y",Ht),G.setStyle("edge."+T+".anchor.elevation",Ht),G.setStyle("edge."+T+".offset.elevation",B.e)):H.percent!==Ht?(G.setStyle("edge."+T+".percent",H.percent),G.setStyle("edge."+T+".index",Ht),G.setStyle("edge."+T+".anchor.x",Ht),G.setStyle("edge."+T+".anchor.y",Ht),G.setStyle("edge."+T+".anchor.elevation",Ht),G.setStyle("edge."+T+".offset.elevation",B.e)):(G.s("edge."+T+".anchor.x",H.x),G.s("edge."+T+".anchor.y",H.y),G.s("edge."+T+".anchor.elevation",H.e),H.offsetX||H.offsetY||H.offsetElevation?(G.s("edge."+T+".offset.x",H.offsetX),G.s("edge."+T+".offset.y",H.offsetY),G.s("edge."+T+".offset.elevation",H.offsetElevation)):(G.s("edge."+T+".offset.x",0),G.s("edge."+T+".offset.y",0),G.s("edge."+T+".offset.elevation",0)))},T.prototype._calcHostAnchor=function(T,B,G,H){H=H||("source"===B?T.getSource():T.getTarget());var f=this._interactor.gv;if(v=f.calculateAttachPoint(H,G))return v.info;if(Z1(H))return f.calculateEdgePosition(H,G);var v=H.getRotation(),J=H.getAnchor(),M=(A1(H,f)&&(v=0),H.getElevation()),Y=H.getTall()*H.getScaleTall(),M=((G.e||0)-T.s("edge."+B+".offset.elevation")-M)/Y+.5,T=H.getScale();return v||T.x<0||T.y<0?(B=H.getMatrix().tfi(G),Y=H.getSize(),{x:B.x/Y.width+J.x,y:B.y/Y.height+J.y,e:M}):(v=yJ(f,H),{x:(G.x-v.x)/v.width,y:(G.y-v.y)/v.height,e:M})},T.prototype._handlePanning=function(T){var B,G,H,f,v=this._pan;v&&(v.started=!0,G=(B=this._interactor).gv,H=B._lastClientPoint,f=K2(T),f=jJ(G,f,H),G.setTranslate(v.tx+f.x,v.ty+f.y),this.gatherSingleTarget(B.gv,this.target),B._42(),B.fi({kind:"betweenPan",event:T}))},T.prototype.handleEdit=function(T,B){var G,H,f,v,J,M,Y,m,E,Z,R,A,g,F,W,s,S,y,x=this,w=x.editing;if(x._pan)x._handlePanning(B);else{if(x._multiSelect)return x._multiSelect.endPoint=T.lp(B),void x._interactor.redraw();w&&(w.inEdit=!0,H=x._interactor._getLogicalPoint(B),F=L.Default.isCtrlDown(B),m=L.Default.isShiftDown(B),W=w.type,G=x.activing,x._guideInfo=null,"ctrlPoint"===W&&m?(E=x.editing.direction.clone(),R=G.point,g=E.dot(H.clone().sub(R)),H=E.setLength(g).add(R)):"ctrlPoint"!==W&&"realPoint"!==W||("realPoint"===W&&m&&(f=(m=x.editing.shiftGuide).point,A=Math.abs(H.x-f.x),(s=Math.abs(H.y-f.y))<A&&A>m.limit&&"y"===m.dir&&(m.dir="x"),A<s&&s>m.limit&&"x"===m.dir&&(m.dir="y"),"x"===(E=m.dir)?(H.y=f.y,m.limit=Math.max(m.limit,A)):"y"===E&&(H.x=f.x,m.limit=Math.max(m.limit,s))),F||((A=x._isEditEdgeSourceTarget())&&(Z=H.clone()),m=x._guidingToEdit(H,E),S=s=1/0,(W="realPoint"===W?x._interactor.gridGuide.findClosest(H,E,!0):null)&&(W.x&&(s=W.x),W.y&&(S=W.y)),E=!1,m&&(m.xList&&(Math.abs(m.x)<=Math.abs(s)?(E=!0,s=m.x):delete m.xList),m.yList&&(Math.abs(m.y)<=Math.abs(S)?(E=!0,S=m.y):delete m.yList),E&&(x._guideInfo=m)),isFinite(s)&&(H.x+=s),isFinite(S)&&(H.y+=S),E&&(m.v=H),A&&(W=E?H.clone():null,H.copy(Z),(s=x._editEdgeSourceTarget(A,H,F,W))&&(y=(x.edgeEditResult=s).tipText,s.isFixed&&(x._guideInfo=null))))),v=x.screenInfo.curve,"realPoint"===w.type?((R=w.point).e!==Ht&&(H.e=R.e),v.moveRealPoint(R,H),w.point=H,x.highlight.point=H,S=G.status,J=G.selections,x.activing={point:H,status:S},J&&(M=H.clone().sub(R),Y=0,J.forEach(function(T){var B=T.clone().add(M);v.moveRealPoint(T,B),J[Y++]=B}),x.activing.selections=J)):"ctrlPoint"===w.type?(m=G.pairs[w.pairId],v.moveCtrlPoint(m,H,w.ctrlType),((E=G.status)===(Z=V.Curve.PointType).Mirrored||E===Z.Asymmetric)&&m.c1&&m.c2&&(R=new V.Math.Vector2(G.point),A="c1"===w.ctrlType?"c2":"c1",E===V.Curve.PointType.Mirrored?v.moveCtrlPoint(m,R.clone().multiplyScalar(2).sub(H),A):E===Z.Asymmetric&&(g=m[A].clone().sub(R).length(),F=R.clone().sub(m[w.ctrlType]).setLength(g).add(R),isNaN(F.x)||v.moveCtrlPoint(m,F,A))),G._firePointChange()):"elevation"===w.type&&(W=(f=w.startPoint).e+(f.y-H.y)/T._zoom,x._setCurrentPointImpl("e",W),G._firePointChange(),y="E: "+V.toFixed(W)),(s=L.Default.getLogicalPoint(B,x._interactor._canvas)).x+=V.Icons.TipShiftX,s.y+=V.Icons.TipShiftY,y||(S=V.toWorldPosition(T,H),y=V.toFixed(S.x)+", "+V.toFixed(S.y)),x.tipInfo={helperPos:s,text:y,size:y.length},x._writeToHt(),x._interactor.fi({kind:"betweenEditPoint",event:B}))}},T.prototype._setCurrentPointImpl=function(T,B){var G=this._activing;if(!G)return!1;var H=this.target;if(!H)return!1;var f=G.getCurrentEditingPoint();if(!f)return!1;var v,J,M,Y,m,E,Z=G.editingCtrl;return Z||(v=f.clone()),"e"===T?f.e=B:("x"===T||"y"===T?(J=G._lastFirePoint,J="x"===T?{x:B,y:J?J.y:0}:{x:J?J.x:0,y:B}):"object"==typeof T?(J=T).e!==Ht&&(f.e=T.e):(J={x:T,y:B},arguments[2]!==Ht&&(f.e=arguments[2])),T=V.getDataMatrix(H),J=V.toScreenPosition(this._interactor.gv,T.apply(J)),f.x=J.x,f.y=J.y),Z||(M=v.multiplyScalar(-1).add(f),v1(f.e)&&v1(v.e)&&(M.e=f.e-v.e),(Y=this.screenInfo.curve).moveCtrlDueToRealPointMovement(f,M),(m=G.selections)&&(E=0,m.forEach(function(T){var B=T.clone().add(M);isFinite(M.e)&&(B.e=(isFinite(T.e)?T.e:H.getElevation()||0)+M.e),Y.moveRealPoint(T,B),m[E++]=B}),G.selections=m)),!0},T.prototype.setCurrentPoint=function(T,B){return!!this._setCurrentPointImpl(T,B)&&(this._writeToHt(),!0)},T.prototype._isEditEdgeSourceTarget=function(){if(!(this.target instanceof L.Edge))return!1;var T=this.editing.point,B=this.screenInfo.curve._curves;return T===B[0]._p1?"source":T===B[B.length-1]._p4&&"target"},T.prototype._editEdgeSourceTarget=function(B,T,G,H){var f,v,J,M,Y,m,E,Z,R,A=this,g=A.target;if(J="source"===B?g.getSource():g.getTarget())return f=A._interactor.gv,Y=V.toWorldPosition(f,T),(m=(m=(v=A._calcHostAnchor(g,B,Y,J)).index!==Ht||v.percent!==Ht?v.distance*f.getZoom()>A._interactor.getStyle("edgeHostEdgeMaxDistance"):!!A._interactor.getStyle("edgeHostDetectPerFrame")||v.x<0||1<v.x||v.y<0||1<v.y)&&f.getDataAt(Y,function(T){return!!f.isSelectable(T)&&!!f.isSourceTargetEditable(g,T,B)&&!!g.canSetSourceTarget(T,B)}))&&(E=A._calcHostAnchor(g,B,Y,m),A._nextChangeEdgeHost={type:B,host:J=m},v=E),m=!1,G||v.x===Ht?v.percent===Ht&&v.index===Ht||(m=!0,M=v.point):(E=A._interactor.getStyle("anchorRound"),G=A._interactor.getStyle("anchorSensitivity"),(Z=f.calculateAttachPoint(J,Y))?(v=Z.info,m=!0):((v=H?A._calcHostAnchor(g,B,V.toWorldPosition(f,H),J):v).x=V.roundTo(v.x,E,G),v.y=V.roundTo(v.y,E,G)),M=QJ(f,J,0,v.offsetX||0,v.offsetY||0,v.x,v.y)),M&&(Y=V.toScreenPosition(f,M),T.x=Y.x,T.y=Y.y),A._edgeHostGuideInfo={corners:V.getTargetCornersOnScreen(f,J),attach:Z?Z.index:-1,host:J},v.percent!==Ht?R="percent: "+v.percent.toFixed(2):v.index!==Ht?R="index: "+v.index:(R=v.x.toFixed(2)+", "+v.y.toFixed(2),(v.offsetX||v.offsetY)&&(R+=" offset: "+v.offsetX.toFixed(2)+", "+v.offsetY.toFixed(2))),{host:J,anchor:v,tipText:R,isFixed:m}},T.prototype._guidingToEdit=function(T,B){if(g=this.screenInfo.curve){var G,H,f,v,J,M,Y,m,E=g._curves,Z=1/0,R=1/0,A=[];for(this.editing&&"realPoint"===this.editing.type&&(m=this.editing.point),J=0,M=2*E.length;J<M;J++)Y=E[Math.floor(J/2)][J%2?"_p4":"_p1"],0<=A.indexOf(Y)||(A.push(Y),m&&m===Y||(f=Y.x-T.x,v=Y.y-T.y,Math.abs(f)<Math.abs(Z)?(Z=f,G=[Y]):f===Z&&G.push(Y),Math.abs(v)<Math.abs(R)?(R=v,H=[Y]):v===R&&H.push(Y)));var g=this._interactor.getStyle("smartGuideThreshold");if((Math.abs(Z)>g||"y"===B)&&(G=null),(Math.abs(R)>g||"x"===B)&&(H=null),(G||H)&&(g=!1,B={},G&&(g=!0,B.xList=G,B.x=Z),H&&(g=!0,B.yList=H,B.y=R),g))return B}},T.prototype._46O=function(T){var B=this;B.editing&&(B.editing=null,B._interactor.fi({kind:"endEditPoint",event:T})),B._guideInfo=null,B._edgeHostGuideInfo=null,B._pan&&(B._pan=null,B._interactor.fi({kind:"endPan",event:T})),B._multiSelect&&(B._handleMultiSelect(B._multiSelect,T),B._multiSelect=null),B.tipInfo=null,B.edgeEditResult=null},T.prototype._handleMultiSelect=function(T,B){if(T.startPoint&&T.endPoint){for(var G,H,f,v,J=this._interactor,M=J.gv,Y=V.toScreenPosition(M,T.startPoint),M=V.toScreenPosition(M,T.endPoint),m=L.Default.unionPoint(Y,M),E=this.screenInfo.curve._curves,Z=[],R=function(T){T.x>=m.x&&T.y>=m.y&&T.x<=m.x+m.width&&T.y<=m.y+m.height&&Z.indexOf(T)<0&&Z.push(T)},A=0,g=E.length;A<g;A++)R((f=E[A])._p1),R(f._p4);if(Z.length){var F=(T=this.activing||{}).selections||[],W=(T.point&&F.push(T.point),L.Default.isShiftDown(B)),s=B.altKey;if(s&&!W)for(v=Z,Z=[],A=0,g=v.length;A<g;A++)G=v[A],0<=(H=F.indexOf(G))&&Z.push(G);for(A=0,g=F.length;A<g;A++)G=F[A],0<=(H=Z.indexOf(G))?W&&!s||(Z[H]=Ht):Z.push(G);for(v=Z,Z=[],A=0,g=v.length;A<g;A++)v[A]&&Z.push(v[A]);0===(g=Z.length)?this.activing=null:1===g?this.activing={point:Z[0]}:(G=Z[g-1],this.activing={point:G,selections:Z.splice(0,g-1)}),J.redraw()}}},T.prototype._canDeletePoint=function(T,B){if(!(this.target instanceof L.Edge))return!0;var G=T._curves[0],T=T._curves[T._curves.length-1];return G._p1!==B&&T._p4!==B},T.prototype.handleDelete=function(){var B,G,H=this;H.activing&&H.screenInfo&&(B=L.Default.isShiftDown(),G=H.screenInfo.curve,H._canDeletePoint(G,H.activing.point)&&G.deleteRealPoint(H.activing.point,B),H.activing.selections&&H.activing.selections.forEach(function(T){H._canDeletePoint(G,T)&&G.deleteRealPoint(T,B)}),H.activing=null,delete H.editing,delete H.tipInfo,delete H.edgeEditResult,delete H._pan,delete H._multiSelect,H._writeToHt(),H._interactor.fp("deleteShapePoint",!1,!0))},T.prototype.handleDoubleClick=function(T){var B,T=this._interactor._getLogicalPoint(T);if(this.screenInfo&&this._checkEditRealPoint(T))return T=(T=this.getCurrentSelectintStatus())===(B=V.Curve.PointType).Mirrored?B.Straight:B.Mirrored,this._setCurrentSelectionStatus(T),this._interactor._42(),!0},T.prototype._drawHighlight=function(T){var B,G,H=this.highlight;H&&(G=H.bezier,B=this._interactor,G&&V.Icons.DrawIcon(B,T,V.Icons.ShapeHighlightCurve,[G._p1.x,G._p1.y,G._p2.x,G._p2.y,G._p3.x,G._p3.y,G._p4.x,G._p4.y]),(G=H.point)&&"insertKnot"===H.type&&V.Icons.DrawIcon(B,T,V.Icons.ShapeHighlighPoint,G))},T.prototype._drawGuide=function(T){var B=this._guideInfo;if(B)for(var G,H,f,v=B.v,J=0;J<2;J++)if(f=0===J?B.xList:B.yList)for(G=0,H=f.length;G<H;G++)V.Icons.DrawIcon(this._interactor,T,V.Icons.ShapeGuideLine,[v.x,v.y,f[G].x,f[G].y])},T.prototype._drawCurrentPoint=function(B){if(this.activing){var T=this.activing,G=this.getCurrentSelectintStatus(),H=this._interactor;if(G!==V.Curve.PointType.Straight){var f=T.pairs,v=(T.hlpair,T.hltype,T.selections),J=T.editingCtrl;if(f&&!v)for(var M,Y=0,m=f.length;Y<m;Y++)M=f[Y],J&&Y===J.pairId&&M[J.type]?V.Icons.DrawIcon(H,B,V.Icons.ShapeActivingCtrl,{point:M.point,c1:M.c1,c2:M.c2,hl:J.type}):V.Icons.DrawIcon(H,B,V.Icons.ShapeActivingCtrl,M)}V.Icons.DrawIcon(H,B,V.Icons.ShapeHighlighRealPoint,this.activing.point),v&&v.forEach(function(T){V.Icons.DrawIcon(H,B,V.Icons.ShapeHighlighRealPoint,T)})}},T.prototype.clear=function(){this.editing=null,this._guideInfo=null,this.activing=null,this.highlight=null},T.prototype._42=function(B){var T=this,G=(T.info={},T.editing||(T.screenInfo=null),T._interactor);if(G.editDetail){var H,f,v=G.gv;if(!T.target||!v.isSelected(T.target)||!v.isVisible(T.target))return G.editDetail=!1,void T.clear();T.gatherSingleTarget(v,T.target),V.Icons.DrawIcon(G,B,V.Icons.ShapeBgCurve,T.screenInfo),T._interactor.getStyle("curveElevationVisible")&&(T.target instanceof L.Polyline||T.target instanceof L.Edge&&T._interactor.getStyle("edgeElevationEditable"))&&T.activing&&(H=T.activing.getCurrentEditingPoint())&&"string"!=typeof H.e&&V.Icons.DrawIcon(G,B,V.Icons.EdgeElevationGuide,H),T._drawHighlight(B),T._drawCurrentPoint(B),T._getRealPoint().forEach(function(T){V.Icons.DrawIcon(G,B,V.Icons.ShapePoint,T)}),T._drawGuide(B),T.tipInfo&&T._interactor.getStyle("curveTipVisible")&&V.Icons.DrawIcon(G,B,V.Icons.TipHelper,T.tipInfo),T._edgeHostGuideInfo&&G._drawHostGuide(T._edgeHostGuideInfo),T.edgeEditResult&&T._drawEdgeHostHighlight(B,T.edgeEditResult.host,T.edgeEditResult.anchor),T._multiSelect&&T._multiSelect.endPoint&&((H=L.Default.unionPoint(V.toScreenPosition(v,T._multiSelect.startPoint),V.toScreenPosition(v,T._multiSelect.endPoint))).color=v.getRectSelectBorderColor(),B.save(),B.setTransform(1,0,0,1,0,0),v=vt.devicePixelRatio,f=H.borderWidth=Math.round(v),f/=2,H.x=Math.round(H.x*v)+f,H.y=Math.round(H.y*v)+f,H.width=Math.round(H.width*v),H.height=Math.round(H.height*v),V.Icons.DrawIcon(G,B,V.Icons.SimpleRect,H),B.restore())}else T.clear()},T.prototype._drawEdgeHostHighlight=function(T,B,G){this.drawEdgeHostHighlight(T,B,G),this._interactor.redraw()},T.prototype.drawEdgeHostHighlight=function(T,B,G){if(Z1(B)){for(var H,f,v=this._interactor,J=v.gv,B=J.getDataUI(B),M=kJ(B),Y=[],m=0,E=M.points.length;m<E;m++)f=V.toScreenPosition(J,M.points.get(m)),Y.push(f.x,f.y);M.segments&&(H=M.segments.toArray());for(var Z=v.getStyle("edgeHostHighlighPeriod"),R=v.getStyle("edgeHostEdgeHighlighColor"),A=(V.Icons.DrawIcon(v,T,V.Icons.ShapeBgCurve,{P:Y,S:H,color:R,dynamicVisible:G.index===Ht,dynamicPeriod:Z}),R=v.getStyle("edgeHostPointHighlighColor"),HW(B)),m=0,E=A.length;m<E;m++){var g=A[m],g=V.toScreenPosition(J,g);V.Icons.DrawIcon(v,T,V.Icons.ShapePoint,{point:{x:g.x,y:g.y},color:R,size:12,dynamicVisible:m===G.index,dynamicPeriod:Z})}}},T.prototype._getRealPoint=function(){var G,T=this.screenInfo,H=T.P,f=T.S,v=-1,J=[],M=-1,Y=f.length;return f.each(function(T){M++;var B=1;if(3===T)B=2;else if(4===T)B=3;else if(5===T)return;v+=B,G=Y<=M+1||1===f.get(M+1),J.push({point:{x:H[2*v],y:H[2*v+1]},segmentIndex:M,pointIndex:v,isEnd:G})}),J},T.prototype.getEditingPointsInfo=function(T){var B=this,G=B.activing;if(!G)return!1;var H=G.point;if(!H)return!1;var f=this._getRealPoint(),v=[{screen:H}];G.selections&&G.selections.forEach(function(T){v.push({screen:T})});var J,M,Y=f.length;return v.forEach(function(T){for(J=0;J<Y;J++)if(M=f[J],T.screen.isNearEnough(M.point)){T.segmentIndex=M.segmentIndex,T.pointIndex=M.pointIndex,T.point=B.target.getPoints().get(M.pointIndex);break}}),T&&v.sort(function(T,B){return T.segmentIndex-B.segmentIndex}),v};(((G=V.MoveHelper=function(T){this.catalog="Move",this._interactor=T}).prototype={}).constructor=G).prototype.calcShift=function(T,B,G){var H,f=this,v=f._interactor.gv,J=v.lp(B);if("beginMove"===T&&f._gatherGridInfo(G._lastLogicalPoint||J),T=f._target){if(G=T.downPosition){var M=f._interactor.getStyle("moveSensitivity")/v._zoom;if(G.distanceTo(J)<M)return{x:0,y:0};delete T.downPosition}L.Default.isShiftDown(B)&&(J=f._dealShiftDown(J),H=T.shiftGuide.dir);var Y,G=T.rawPos={x:T.pos.x+J.x-T.lp.x,y:T.pos.y+J.y-T.lp.y};if(L.Default.isCtrlDown(B))return Y=f._calcShiftByAddon(),f._target.node instanceof V.Group&&((E=f._target.node)._position.x+=Y.x,E._position.y+=Y.y),Y;if(M=f._interactor.rectGuide,T.node instanceof L.Data&&T.node.s("2d.attachable")&&(J=f._calcAttachNodeShift(T.node,G),M.clear(),J))return J;for(var m,E,Z=T.x+G.x,R=T.y+G.y,B={x:Z,y:R},J={x:Z+T.w/2,y:R+T.h/2},A={x:Z+T.w,y:R+T.h},g=f._interactor.gridGuide,F=[M.findClosest(B,H),M.findClosest(J,H),M.findClosest(A,H),g.findClosest(B,H),g.findClosest(J,H),g.findClosest(A,H)],W=1/0,s=1/0,S=0,y=F.length;S<y;S++)(m=F[S])&&(Z=m.x,R=m.y,isFinite(Z)&&Math.abs(Z)<Math.abs(W)&&(W=Z),isFinite(R)&&Math.abs(R)<Math.abs(s)&&(s=R));return isFinite(W)||(W=0),isFinite(s)||(s=0),Y=f._calcShiftByAddon(W,s),f._target.node instanceof V.Group&&((E=f._target.node)._position.x+=Y.x,E._position.y+=Y.y),M=T.node,A1(M,v)||f._interactor.rectGuide.gatherLines({node:M,x:T.x+(G.x+W),y:T.y+(G.y+s),w:T.w,h:T.h},H),Y}},G.prototype._calcShiftByAddon=function(T,B){var G=(H=this._target).rawPos,H=H.node.getPosition();return{x:G.x-H.x+(T=T||0),y:G.y-H.y+(B=B||0)}},G.prototype._dealShiftDown=function(T){var B=this._target.shiftGuide,G=this._target.lp,H=Math.abs(T.x-G.x),f=Math.abs(T.y-G.y),v=(f<H&&H>B.limit&&"y"===B.dir&&(B.dir="x"),H<f&&f>B.limit&&"x"===B.dir&&(B.dir="y"),B.dir);return"x"===v?(T.y=G.y,B.limit=Math.max(B.limit,H)):"y"===v&&(T.x=G.x,B.limit=Math.max(B.limit,f)),T},G.prototype._isAttachableLineShape=function(T){if(!T.getSegments)return!1;var B=T.getSegments();if(!B)return!0;for(var G=1,H=(B=B instanceof L.List?B.getArray():B).length;G<H;G++)if(2!==B[G])return!1;return!0},G.prototype._calcAttachNodeShift=(T8=new b,B8=new b,G8=new b,H8=new b,function(T,B){var G=this._interactor.gv,H=T.getHost(),f=G.getDataAt(B,function(T){return!!T.s("2d.hostable")});if(f&&H!==f&&T.setHost(f),!f)return this._edgeHostGuideInfo=null,T.setHost(null);var v,J,H=this._edgeHostGuideInfo={corners:V.getTargetCornersOnScreen(G,f),host:f,attach:-1};if(!this._isAttachableLineShape(f))return(v=G.calculateAttachPoint(f,B))?(J=v.point,H.attach=v.index,this._calcShiftByAddon(J.x-B.x,J.y-B.y)):void 0;for(var M,Y,m,E,Z,R,A=f.getPoints(),g=A.size(),F=f.getPointsMatrix2d(),W=1/0,s=0;s<g&&(s!==g-1||f.isClosePath());s++)0!==s?B8.copy(G8):F.apply(A.get(s),B8),F.apply(s===g-1?A.get(0):A.get(s+1),G8),T8.copy(B).sub(B8),H8.copy(G8).sub(B8),M=H8.length(),H8.divideScalar(M),(Y=T8.dot(H8))<0?Y=0:M<Y&&(Y=M),H8.multiplyScalar(Y).add(B8),(m=T8.copy(B).sub(H8).lengthSq())<W&&(W=m,R=s,E=Y,Z=M);return Math.sqrt(W)*G.getZoom()>this._interactor.getStyle("attachThreshold")?(T.s({"attach.index":-1}),void T.setHost(null)):(T.s("attach.offset.opposite")&&(E=Z-E),T.s({"attach.index":R,"attach.offset":T.s("attach.offset.relative")?E/Z:E}),{x:0,y:0})}),G.prototype._gatherGridInfo=function(T){var B,G,H=this._interactor;if((f=H._getValidSelection()).length){if(1===f.length){if(!(B=f[0]).getRect)return void(this._target=null)}else if(!(B=V.Group.findOrCreateGroup(f,H._uuid)))return void(this._target=null)}else{var f=H.gv.sm().getSelection();if(f.length&&!(B=f.get(0)).getRect)return void(this._target=null)}B&&(f=B.getPosition(),G=B.getRect(),this._target={node:B,x:G.x-f.x,y:G.y-f.y,w:G.width,h:G.height,lp:{x:T.x,y:T.y},pos:{x:f.x,y:f.y},shiftGuide:{dir:"x",limit:0},downPosition:new V.Math.Vector2(T)},H.rectGuide.gatherRects())},G.prototype.clear=function(){this._edgeHostGuideInfo=null,this._interactor.rectGuide.clear(),this._interactor._42()},G.prototype._42=function(){var T=this._edgeHostGuideInfo;T&&this._interactor._drawHostGuide(T)};var aa,T8,B8,G8,H8,f8,v8,J8,M8,Y8,m8,E8,Z8,R8,A8,g8,F8,W8,s8,S8,y8,x8,w8,O8,_8,p8,q8,u8,i8,I8,D8,h8,o8,e8,c8,t8,d8,N8,Q8,L8,Rt,j8,r8,X8,U8,l8,b8,K8,z8,n8,$8,V8,P8,k8,C8,a8,TA,BA,GA,HA,fA,vA,JA,MA,YA,mA,EA,ZA,RA,AA,gA,FA,WA,sA,SA,yA,xA,wA,OA,_A,pA,qA,uA,iA,IA,DA,hA,oA,eA,cA,tA,dA,NA,QA,LA,jA,rA,XA,UA,lA,bA,KA,zA,nA,$A,VA,PA,kA,CA,aA,TE,BE,GE,HE,fE,vE,JE,ME,YE,mE,EE,ZE,RE,AE,gE,FE,WE,sE,SE,yE,xE,wE,OE,_E,pE,qE,uE,iE,IE,DE,hE,oE,eE,cE,tE=L.WebGLConstants=N.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047}),dE=(f8="undefined"!=typeof WebGL2RenderingContext,v8={aliasedLineWidthRange:33902,aliasedPointSizeRange:33901,maxCombinedTextureImageUnits:35661,maxCubeMapTextureSize:34076,maxFragmentUniformVectors:36349,maxRenderBufferSize:34024,maxTextureImageUnits:34930,maxTextureSize:3379,maxVaryingVectors:36348,maxVertexAttribs:34921,maxVertexTextureImageUnits:35660,maxVertexUniformVectors:36347,maxViewportDIMs:3386},J8={max3DTextureSize:32883,maxArrayTextureLayers:35071,maxColorAttachments:36063,maxCombinedFragmentUniformComponents:35379,maxCombinedUniformBlocks:35374,maxCombinedVertexUniformComponents:35377,maxDrawBuffers:34852,maxElementIndex:36203,maxElementsIndices:33001,maxElementsVertices:33e3,maxFragmentInpuComponents:37157,maxFragmentUniformBlocks:35373,maxFragmentUniformComponents:35657,maxProgramTexelOffset:35077,maxSamples:36183,maxTextureLODBias:34045,maxTransformFeedbackInterleavedComponents:35978,maxTransformFeedbackSeparateAttribs:35979,maxTransformFeedbackSeparateComponents:35968,maxUniformBlockSize:35376,maxUniformBufferBindings:35375,maxVaryingComponents:35659,maxVertexOutputComponents:37154,maxVertexUniformBlocks:35371,maxVertexUniformComponents:35658,minProgramTexelOffset:35076},{for:function(T){var B=T._info;return B||(T._info=B=function(H,T){(T=T==Ht?{}:T).version=f8&&(H instanceof WebGL2RenderingContext||"[object WebGL2RenderingContext]"===N.prototype.toString.call(H))?2:1,T.extensions=function(){for(var T={},B=H.getSupportedExtensions(),G=B.length;G--;)T[B[G]]=function(T,B){var G=Ht;return function(){return G=G||T.getExtension(B)}}(H,B[G]);return T}();for(var B=N.keys(v8),G=0,f=B.length;G<f;++G)T[v=B[G]]=H.getParameter(v8[v]);if(1<T.version)for(var v,G=0,f=(B=N.keys(J8)).length;G<f;++G)T[v=B[G]]=H.getParameter(J8[v]);return T}(T,B)),B}}),NE=(M8="undefined"!=typeof Float32Array&&new Float32Array(4),B={viewport:{def:[0,0,NaN,NaN],getter:function(T){return T.getParameter(2978)},setter:function(T,B){var G=B[2]!=B[2]?T.drawingBufferWidth-B[0]:B[2],H=B[3]!=B[3]?T.drawingBufferHeight-B[1]:B[3];T.viewport(B[0],B[1],G,H)}},dither:{def:!1,getter:function(T){return T.isEnabled(3024)},setter:function(T,B){B?T.enable(3024):T.disable(3024)}},rasterizerDiscard:{def:!1,getter:function(T){return 1<dE.for(T).version&&T.isEnabled(35977)},setter:function(T,B){1!==dE.for(T).version&&(B?T.enable(35977):T.disable(35977))}},lineWidth:{def:1,getter:function(T){return T.lineWidth?T.getParameter(2849):1},setter:function(T,B){T.lineWidth&&T.lineWidth(B)}},color:{clear:{def:[0,0,0,0],getter:function(T){return T.getParameter(3106)},setter:function(T,B){T.clearColor(B[0],B[1],B[2],B[3])},parse:IN},mask:{def:[!0,!0,!0,!0],getter:function(T){return T.getParameter(3107)},setter:function(T,B){T.colorMask(B[0],B[1],B[2],B[3])}}},blend:{enabled:{def:!1,getter:function(T){return T.isEnabled(3042)},setter:function(T,B){B?T.enable(3042):T.disable(3042)}},color:{def:[0,0,0,0],getter:function(T){return T.getParameter(32773)},setter:function(T,B){T.blendColor(B[0],B[1],B[2],B[3])},parse:IN},equation:{def:[32774,32774],getter:function(T){return[T.getParameter(32777),T.getParameter(34877)]},setter:function(T,B){T.blendEquationSeparate(B[0],B[1])},parse:function(T){var B=T.length;return 1<B?T:(M8[1]=M8[0]=1===B?T[0]:T,M8)}},func:{def:[1,tE.ZERO,1,tE.ZERO],getter:function(T){return[T.getParameter(32969),T.getParameter(32968),T.getParameter(32971),T.getParameter(32970)]},setter:function(T,B){T.blendFuncSeparate(B[0],B[1],B[2],B[3])},parse:function(T){return 3<T.length?T:(M8[2]=M8[0]=T[0],M8[3]=M8[1]=T[1],M8)}}},cullFace:{enabled:{def:!1,getter:function(T){return T.isEnabled(2884)},setter:function(T,B){B?T.enable(2884):T.disable(2884)}},mode:{def:1029,getter:function(T){return T.getParameter(2885)},setter:function(T,B){T.cullFace(B)}},frontFace:{def:2305,getter:function(T){return T.getParameter(2886)},setter:function(T,B){T.frontFace(B)}}},scissor:{enabled:{def:!1,getter:function(T){return T.isEnabled(3089)},setter:function(T,B){B?T.enable(3089):T.disable(3089)}},box:{def:[0,0,NaN,NaN],getter:function(T){return T.getParameter(3088)},setter:function(T,B){var G=B[2]!=B[2]?T.drawingBufferWidth-B[0]:B[2],H=B[3]!=B[3]?T.drawingBufferHeight-B[1]:B[3];T.scissor(B[0],B[1],G,H)}}},depth:{enabled:{def:!1,getter:function(T){return T.isEnabled(2929)},setter:function(T,B){B?T.enable(2929):T.disable(2929)}},clear:{def:1,getter:function(T){return T.getParameter(2931)},setter:function(T,B){T.clearDepth(B)}},mask:{def:!0,getter:function(T){return T.getParameter(2930)},setter:function(T,B){T.depthMask(B)}},range:{def:[-1,1],getter:function(T){return T.getParameter(2928)},setter:function(T,B){T.depthRange(B[0],B[1])}},func:{def:513,getter:function(T){return T.getParameter(2932)},setter:function(T,B){T.depthFunc(B)}}},stencil:{enabled:{def:!1,getter:function(T){return T.isEnabled(2960)},setter:function(T,B){B?T.enable(2960):T.disable(2960)}},clear:{def:0,getter:function(T){return T.getParameter(2961)},setter:function(T,B){T.clearStencil(B)}},frontMask:{def:255,getter:function(T){return T.getParameter(2968)},setter:function(T,B){T.stencilMaskSeparate(1028,B)}},frontOp:{def:[7680,7680,7680],getter:function(T){return[T.getParameter(2964),T.getParameter(2965),T.getParameter(2966)]},setter:function(T,B){T.stencilOpSeparate(1028,B[0],B[1],B[2])}},frontFunc:{def:[519,0,255],getter:function(T){return[T.getParameter(2962),T.getParameter(2967),T.getParameter(2963)]},setter:function(T,B){T.stencilFuncSeparate(1028,B[0],B[1],B[2])}},backMask:{def:255,getter:function(T){return T.getParameter(36005)},setter:function(T,B){T.stencilMaskSeparate(1029,B)}},backOp:{def:[7680,7680,7680],getter:function(T){return[T.getParameter(34817),T.getParameter(34818),T.getParameter(34819)]},setter:function(T,B){T.stencilOpSeparate(1029,B[0],B[1],B[2])}},backFunc:{def:[519,0,255],getter:function(T){return[T.getParameter(34816),T.getParameter(36003),T.getParameter(36004)]},setter:function(T,B){T.stencilFuncSeparate(1029,B[0],B[1],B[2])}}},hint:{generateMipmap:{def:4352,getter:function(T){return T.getParameter(33170)},setter:function(T,B){T.hint(33170,B)}},fragmentShaderDerivative:{def:4352,getter:function(T){var B=dE.for(T);return 1!==B.version||B.extensions.OES_standard_derivatives?T.getParameter(35723):4352},setter:function(T,B){var G=dE.for(T);(1<G.version||G.extensions.OES_standard_derivatives)&&T.hint(35723,B)}}},pixelStore:{packAlignment:iN(4,3333,!1),unpackAlignment:iN(4,3317,!1),unpackFlipY:iN(!1,37440,!1),unpackPremultiplyAlpha:iN(!1,37441,!1),unpackColorspaceConversion:iN(37444,37443,!1),packRowLength:iN(0,3330,!0),packSkipPixels:iN(0,3332,!0),packSkipRows:iN(0,3331,!0),unpackRowLength:iN(0,3314,!0),unpackImageHeight:iN(0,32878,!0),unpackSkipPixels:iN(0,3316,!0),unpackSkipRows:iN(0,3315,!0),unpackSkipImages:iN(0,32877,!0)},polygonOffset:{enabled:{def:!1,getter:function(T){return T.isEnabled(32823)},setter:function(T,B){B?T.enable(32823):T.disable(32823)}},value:{def:[0,0],getter:function(T){return[T.getParameter(32824),T.getParameter(10752)]},setter:function(T,B){T.polygonOffset(B[0],B[1])}}},sampleCoverage:{enabled:{def:!1,getter:function(T){return T.isEnabled(32928)},setter:function(T,B){B?T.enable(32928):T.disable(32928)}},alpha:{def:!1,getter:function(T){return T.isEnabled(32926)},setter:function(T,B){B?T.enable(32926):T.disable(32926)}},value:{def:[1,!1],getter:function(T){return[T.getParameter(32938),T.getParameter(32939)]},setter:function(T,B){T.sampleCoverage(B[0],B[1])}}}},B=HJ.create(B,function(T){return"def"in T}),hN.prototype.reset=function(){for(var T=this._struct.children,B=T.length;B--;){var G=T[B],H=G.name;G.isLeaf?this[H]=G.desc.def:this._branches[H].reset()}},hN.prototype.save=function(T){T==Ht&&(T={});for(var B=this._struct.children,G=B.length;G--;){var H=B[G],f=H.name;H.isLeaf?T[f]=DN(this._record[f]):((H=T[f])==Ht&&(T[f]=H={}),this._branches[f].save(H))}return T},hN.prototype.sync=function(T,B){for(var G=this._struct.children,H=G.length;H--;){var f=G[H],v=f.name;f.isLeaf?!B&&this._leafSync[v]||(T?this._record[v]=f.desc.getter(this.gl):f.desc.setter(this.gl,this._record[v]),this._leafSync[v]=!0):this._branches[v].sync(T,B)}},hN.prototype.syncLoss=function(){for(var T=this._struct.children,B=T.length;B--;){var G=T[B];G.isLeaf?this._leafSync[G.name]=!1:this._branches[G.name].syncLoss()}},hN.prototype.apply=function(T){for(var B=this._struct.children,G=B.length;G--;){var H=B[G],f=H.name;f in T&&(H.isLeaf?this[f]=T[f]:this._branches[f].apply(T[f]))}},hN.prototype.append=function(T){var B,G=this._struct.childMap;for(B in T){var H=G[B];H&&(H.isLeaf?this[B]=T[B]:this._branches[B].append(T[B]))}},Y8=function M(f){var Y=[];function T(T,B){hN.call(this,f,T,B);for(var G=Y.length;G--;){var H=Y[G];this._branches[H._name]=new H._type(T,this._record[H._name])}}return EN(T,hN),f.forEach(function(T,B){var G,H,f=T.name,v=ZN(T.desc.def),J=v&&T.desc.def.length;T.isLeaf?(G=T.desc.setter,H=T.desc.parse,N.defineProperty(B,f,{configurable:!1,enumerable:!0,get:function(){return this._record[f]},set:v?function(T){H&&(T=H(T)),!function(T,B){for(var G=J,H=!1;G--;)T[G]!==B[G]&&(T[G]=B[G],H=!0);return H}(this._record[f],T)&&this._leafSync[f]||(G(this.gl,this._record[f]),this._leafSync[f]=!0)}:function(T){this._record[f]===T&&this._leafSync[f]||(G(this.gl,T),this._record[f]=T,this._leafSync[f]=!0)}})):(Y.push({_name:f,_type:M(T)}),N.defineProperty(B,f,{configurable:!1,enumerable:!0,get:function(){return this._branches[f]},set:function(T){this._branches[f].apply(T)}}))},T.prototype),T}(B),function(){var Y=[];if("function"==typeof Float32Array)for(var T=1;T<17;++T)Y[T]=new Float32Array(T);function m(T,B,G,H){if(T)if(T.length!=Ht)for(f=0;f<H;++f)B[G+f]=T[f];else T.toArray&&T.toArray(B,G);else for(var f=0;f<H;++f)B[G+f]=0}function G(T,B,G){var H=T[0];if(H<=0||0<H)return T;var f=B*G,v=Y[f];if(v==Ht&&(Y[f]=v=new Float32Array(f)),0!==B){m(H,v,0,G);for(var J=1,M=0;J!==B;++J)m(T[J],v,M+=G,G)}return v}function B(T,B){T.uniform1iv(this.addr,B)}function H(T,B){T.uniform2iv(this.addr,B)}function f(T,B){T.uniform3iv(this.addr,B)}function v(T,B){T.uniform4iv(this.addr,B)}var J=[0,1],M=[];function E(T,B,G){M[T]=[B,G]}E(5126,function(T,B){var G=this.cache;G[0]!==B&&(T.uniform1f(this.addr,B),G[0]=B)},function(T,B){T.uniform1fv(this.addr,B)}),E(35664,function(T,B){var G,B=B.x!=Ht?(G=B.x,B.y):(G=B[0],B[1]),H=this.cache;H[0]===G&&H[1]===B||(T.uniform2f(this.addr,G,B),H[0]=G,H[1]=B)},function(T,B){B=G(B,this.size,2),T.uniform2fv(this.addr,B)}),E(35665,function(T,B){B=(B="string"==typeof B?U0(B):B).x!=Ht?(G=B.x,H=B.y,B.z):B.r!=Ht?(G=B.r,H=B.g,B.b):B.red!=Ht?(G=B.red,H=B.green,B.blue):(G=B[0],H=B[1],B[2]);var G,H,f=this.cache;f[0]===G&&f[1]===H&&f[2]===B||(T.uniform3f(this.addr,G,H,B),f[0]=G,f[1]=H,f[2]=B)},function(T,B){B=G(B,this.size,3),T.uniform3fv(this.addr,B)}),E(35666,function(T,B){B=(B="string"==typeof B?U0(B):B).x!=Ht?(G=B.x,H=B.y,f=B.z,B.w):B.r!=Ht?(G=B.r,H=B.g,f=B.b,B.a):B.red!=Ht?(G=B.red,H=B.green,f=B.blue,B.alpha):(G=B[0],H=B[1],f=B[2],B[3]==ft?1:B[3]);var G,H,f,v=this.cache;v[0]===G&&v[1]===H&&v[2]===f&&v[3]===B||(T.uniform4f(this.addr,G,H,f,B),v[0]=G,v[1]=H,v[2]=f,v[3]=B)},function(T,B){B=G(B,this.size,4),T.uniform4fv(this.addr,B)}),E(5124,function(T,B){var G=this.cache;G[0]!==B&&(T.uniform1i(this.addr,B),G[0]=B)},B),E(35667,H,H),E(35668,f,f),E(35669,v,v),E(35670,function(T,B){var G=this.cache;G[0]!==(B=J[B?1:0])&&(T.uniform1i(this.addr,B),G[0]=B)},B),E(35671,H,H),E(35672,f,f),E(35673,v,v),E(35674,function(T,B){var G=Y[4];G.set(B,0),T.uniformMatrix2fv(this.addr,!1,G)},function(T,B){T.uniformMatrix2fv(this.addr,!1,G(B,this.size,4))}),E(35675,function(T,B){var G=Y[9];G.set(B,0),T.uniformMatrix3fv(this.addr,!1,G)},function(T,B){T.uniformMatrix3fv(this.addr,!1,G(B,this.size,9))}),E(35676,function(T,B){var G=Y[16];G.set(B,0),T.uniformMatrix4fv(this.addr,!1,G)},function(T,B){T.uniformMatrix4fv(this.addr,!1,G(B,this.size,16))}),E(35678,function(T,B){T.uniform1i(this.addr,this.slots[0]),T.activeTexture(33984+this.slots[0]),T.bindTexture(3553,B||T._emptyTexture)},function(T,B){T.uniform1iv(this.addr,this.slots);for(var G=this.slots.length;G--;)T.activeTexture(33984+this.slots[G]),T.bindTexture(3553,B[G]||T._emptyTexture)}),E(35680,function(T,B){T.uniform1i(this.addr,this.slots[0]),T.activeTexture(33984+this.slots[0]),T.bindTexture(34067,B||T._emptyCubeTexture)},function(T,B){T.uniform1iv(this.addr,this.slots);for(var G=this.slots.length;G--;)T.activeTexture(33984+this.slots[G]),T.bindTexture(34067,B[G]||T._emptyCubeTexture)});var S=/([\w\d_]+)(\])?(\[|\.)?/g;function y(T,B,G,H,f){this.name=T,this.addr=B,this.cache=[],this.size=H?G.size:0,this.activeInfo=G,this.setter=M[G.type][H?1:0],this.slots=function(T,B,G){switch(T.type){case 35678:case 35680:if("uSampler"===G)return[0];if("uBlendSampler"===G)return[1];for(var H=T.size,f=new Int32Array(H),v=0;v<H;++v)f[v]=B.usedTextureSlot++;return f}return Ht}(G,f,T),GJ(this)}function x(T,B,G){this.gl=B,this._program=G,this._leaves={},this._branches={},this._struct=T}function Z(T,B){for(var G=T.getProgramParameter(B,35718),H={},f={usedTextureSlot:2};G--;){var v=T.getActiveUniform(B,G),J=v.name,M=(W=A=F=m=void 0,v),Y=T.getUniformLocation(B,J),m=H,E=f,Z=M.name,R=Z.length;for(S.lastIndex=0;;){var A=S.exec(Z),g=S.lastIndex,F=A[1],W="]"===A[2];if(W&&(F|=0),(A=A[3])===Ht||"["===A&&g+2===R){m[F]=new y(F,Y,M,A!==Ht,E);break}(W=m[F])==Ht&&(m[F]=W={}),m=W}}var s=function f(v){var J=[];function T(T,B){x.call(this,v,T,B);for(var G=J.length;G--;){var H=J[G];this._branches[H._name]=new H._type(T,B)}this.uuid=l.generateUUID()}return EN(T,x),v.forEach(function(T,B){var G,H=T.name;T.isLeaf?(G=RN("d.setter(this.gl, v);",["v"],["d"],[T.desc]),N.defineProperty(B,H,{configurable:!1,enumerable:!0,get:function(){return G},set:G})):(J.push({_name:H,_type:f(T)}),N.defineProperty(B,H,{configurable:!1,enumerable:!0,get:function(){return this._branches[H]},set:function(T){this._branches[H].apply(T)}}))},T.prototype),T}(HJ.create(H,function(T){return"addr"in T}));return N.defineProperty(s.prototype,"textureCount",{configurable:!1,enumerable:!1,writable:!1,value:f.usedTextureSlot}),new s(T,B)}return x.prototype.apply=function(T,B){for(var G=this._struct.children,H=G.length;H--;){var f,v=G[H],J=v.name,M=v.desc.activeInfo;if(B){if((f=B(T,J,M?M.type:null))===Ht)continue}else{if(!(J in T))continue;f=T[J]}v.isLeaf?this[J]=f:this._branches[J].apply(f)}},x.prototype.append=function(T){var B,G=this._struct.childMap;for(B in T){var H=G[B];H&&(H.isLeaf?this[B]=T[B]:this._branches[B].append(T[B]))}},function(T,B){var G=B._uniforms;return G||(B._uniforms=G=Z(T,B)),G}}()),QE=function(){for(var f=[],T=1;T<17;++T)f[T]=new Fs(T);function m(T,B,G,H){for(var f=G?1:0,v=B.addr,J=T._4MQ,M=0;M<H;M++)(J[v+M]||0)!==f&&(J[v+M]=f,T.vertexAttribDivisor(v+M,f))}var H=[],E="undefined"!=typeof WebGLBuffer&&WebGLBuffer.prototype;function B(T,J,M,Y){H[T]=function(T,B,G,H,f,v){this.addr==Ht||this.addr<0||(B==Ht||!1===B?Y(T,this.addr):BJ(B)===E?M(this,T,B,B.glType,H,f,v):(Y(T,this.addr),J(this,T,B)))}}function G(T,B){T.disableVertexAttribArray(B)}function M(T,B,G){this.name=T,this.addr=B,this.activeInfo=G,this.setter=H[G.type],GJ(this)}function Y(T,B,G){this.gl=B,this.program=G,this._branches={},this._struct=T}return B(5126,function(T,B,G){B.vertexAttrib1f(T.addr,G)},function(T,B,G,H,f,v,J){B.bindBuffer(34962,G);var M=T.addr;B.enableVertexAttribArray(M),m(B,T,G.instanced,1),B.vertexAttribPointer(M,1,H||5126,!!f,v||0,J||0),B.bindBuffer(34962,null)},G),B(35664,function(T,B,G){var H;G.x!=Ht?B.vertexAttrib2f(T.addr,G.x,G.y):((H=f[2]).set(G,0),B.vertexAttrib2fv(T.addr,H))},function(T,B,G,H,f,v,J){B.bindBuffer(34962,G);var M=T.addr;B.enableVertexAttribArray(M),m(B,T,G.instanced,1),B.vertexAttribPointer(M,2,H||5126,!!f,v||0,J||0),B.bindBuffer(34962,null)},G),B(35665,function(T,B,G){var H;G.x!=Ht?B.vertexAttrib3f(T.addr,G.x,G.y,G.z):G.r!=Ht?B.vertexAttrib3f(T.addr,G.r,G.g,G.b):G.red!=Ht?B.vertexAttrib3f(T.addr,G.red,G.green,G.blue):((H=f[3]).set(G,0),B.vertexAttrib3fv(T.addr,H))},function(T,B,G,H,f,v,J){B.bindBuffer(34962,G);var M=T.addr;B.enableVertexAttribArray(M),m(B,T,G.instanced,1),B.vertexAttribPointer(M,3,H||5126,!!f,v||0,J||0),B.bindBuffer(34962,null)},G),B(35666,function(T,B,G){var H;(G="string"==typeof G?U0(G):G).x!=Ht?B.vertexAttrib4f(T.addr,G.x,G.y,G.z,G.w):G.r!=Ht?B.vertexAttrib4f(T.addr,G.r,G.g,G.b,G.a):G.red!=Ht?B.vertexAttrib4f(T.addr,G.red,G.green,G.blue,G.alpha):((H=f[4]).set(G,0),B.vertexAttrib4fv(T.addr,H))},function(T,B,G,H,f,v,J){B.bindBuffer(34962,G);var M=T.addr;B.enableVertexAttribArray(M),m(B,T,G.instanced,1),B.vertexAttribPointer(M,4,H||5126,!!f,v||0,J||0),B.bindBuffer(34962,null)},G),B(35674,function(T,B,G){G=G.el||G;for(var H=0,f=0;H<2;++H)B.vertexAttrib2f(T.addr,G[f++],G[f++])},function(T,B,G,H,f,v,J){var v=v||16,J=J||0,M=T.addr;B.bindBuffer(34962,G),B.enableVertexAttribArray(M),B.vertexAttribPointer(M,2,H||5126,!!f,v,J),B.enableVertexAttribArray(M+1),B.vertexAttribPointer(M+1,2,H||5126,!!f,v,J+8),m(B,T,G.instanced,2),B.bindBuffer(34962,null)},function(T,B){T.disableVertexAttribArray(B),T.disableVertexAttribArray(B+1)}),B(35675,function(T,B,G){G=G.el||G;for(var H=0,f=0;H<3;++H)B.vertexAttrib3f(T.addr,G[f++],G[f++],G[f++])},function(T,B,G,H,f,v,J){var v=v||36,J=J||0,M=T.addr;B.bindBuffer(34962,G);for(var Y=0;Y<3;Y++)B.enableVertexAttribArray(M+Y),B.vertexAttribPointer(M+Y,3,H||5126,!!f,v,J+12*Y);m(B,T,G.instanced,3),B.bindBuffer(34962,null)},function(T,B){T.disableVertexAttribArray(B),T.disableVertexAttribArray(B+1),T.disableVertexAttribArray(B+2)}),B(35676,function(T,B,G){G=G.el||G;for(var H=0,f=0;H<4;++H)B.vertexAttrib4f(T.addr,G[f++],G[f++],G[f++],G[f++])},function(T,B,G,H,f,v,J){var v=v||64,J=J||0,M=T.addr;B.bindBuffer(34962,G);for(var Y=0;Y<4;Y++)B.enableVertexAttribArray(M+Y),B.vertexAttribPointer(M+Y,4,H||5126,!!f,v,J+16*Y);m(B,T,G.instanced,4),B.bindBuffer(34962,null)},function(T,B){T.disableVertexAttribArray(B),T.disableVertexAttribArray(B+1),T.disableVertexAttribArray(B+2),T.disableVertexAttribArray(B+3)}),Y.prototype.disable=function(){for(var T=this._struct.children,B=T.length;B--;){var G=T[B],H=G.name;G.isLeaf?this[H]=Ht:this._branches[H].disable()}},Y.prototype.apply=function(T,B){for(var G=this._struct.children,H=G.length;H--;){var f,v=G[H],J=v.name;if(B){if((f=B(T,J,v))===Ht)continue}else{if(!(J in T))continue;f=T[J]}v.isLeaf?this[J]=f:this._branches[J].apply(f)}},Y.prototype.append=function(T){var B,G=this._struct.childMap;for(B in T){var H=G[B];H&&(H.isLeaf?this[B]=T[B]:this._branches[B].append(T[B]))}},function(T,B){var G=B._attribs;return G||(B._attribs=G=function(T,B){for(var G=T.getProgramParameter(B,35721),H={};G--;){var f=T.getActiveAttrib(B,G),v=f.name,J=T.getAttribLocation(B,v);0<=J&&(H[v]=new M(v,J,f))}return new(function f(v){var J=[];function T(T,B){Y.call(this,v,T,B);for(var G=J.length;G--;){var H=J[G];this._branches[H._name]=new H._type(T,B)}}return EN(T,Y),v.forEach(function(T,B){var G,H=T.name;T.isLeaf?(G=RN("d.setter(this.gl, v);",["v"],["d"],[T.desc]),N.defineProperty(B,H,{configurable:!1,enumerable:!0,get:function(){return G},set:G})):(J.push({_name:H,_type:f(T)}),N.defineProperty(B,H,{configurable:!1,enumerable:!0,get:function(){return this._branches[H]},set:function(T){this._branches[H].apply(T)}}))},T.prototype),T}(HJ.create(H,function(T){return"addr"in T})))(T,B)}(T,B)),G}}(),At=function(T){var B;N.defineProperties(this,{gl:{configurable:!1,enumerable:!1,value:T,writable:!1},glState:{configurable:!1,enumerable:!1,value:((B=(T=T)._state)||(T._state=B=new Y8(T)),B),writable:!1}}),this._currProgram=Ht,this._currUniforms=Ht,this._currAttribs=Ht,this._sync=!0},LE=(N.defineProperties(At.prototype,{program:{configurable:!1,enumerable:!1,get:function(){return this._currProgram},set:function(T){this._sync&&T===this._currProgram||(this.gl.useProgram(T),this._currProgram=T,this._currUniforms=NE(this.gl,T),this._currAttribs=QE(this.gl,T),this._sync=!0)}},uniforms:{configurable:!1,enumerable:!1,get:function(){return this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currUniforms},set:function(T){this._currUniforms&&(this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currUniforms.apply(T))}},attribs:{configurable:!1,enumerable:!1,get:function(){return this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currAttribs},set:function(T){this._currUniforms&&(this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currAttribs.apply(T))}}}),At.prototype.useProgram=function(T){this._sync&&T===this._currProgram||(this.gl.useProgram(T),this._currProgram=T,this._currUniforms=NE(this.gl,T),this._currAttribs=QE(this.gl,T),this._sync=!0)},At.prototype.directState=function(){return this.glState},At.prototype.directUniforms=function(){return this._currUniforms},At.prototype.directAttribs=function(){return this._currAttribs},At.prototype.syncLoss=function(){this._sync=!1,this.glState.syncLoss()},At.for=function(T){var B=T._renderState;return B||(T._renderState=B=new At(T)),B},"light.color"),jE=4294967295,rE=0,XE={},UE={},lE=function(T){var B;if(T=vt.convertShape3dModelName(T),M1(T)){if(T.modelType){if(T.uuid){if(B=uw[T.uuid])return B}else T.uuid=L.Math.generateUUID();return B!==Ht||Cx&&Cx[T.uuid]||Go(T.uuid,T),Ht}return T}return B=uw[T],T&&B===Ht&&tw.test(T)&&(Cx&&Cx[T]||Bo(T,T)),B},bE="undefined"!=typeof WebGLTexture&&WebGLTexture.prototype,KE=function(T){return T&&BJ(T)===bE},zE=function(T,B){T.frameStack?T.frameStack.push(B):T.frameStack=[B],T.bindFramebuffer(36160,B)},nE=function(T){var B=T.frameStack;if(B){if(B.pop(),B.length)return void T.bindFramebuffer(36160,B[B.length-1]);T.frameStack=null}T.bindFramebuffer(36160,null)},$E=(S1(vt,{graph3dViewAttributes:ft,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:o/60,graph3dViewSortable:!1,graph3dViewOpaqueSortable:!1,graph3dViewBlockSelectable:!0,graph3dViewEditHelperDisabled:!1,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:Tw,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewRotateMaxPhi:o,graph3dViewRotateMinPhi:0,graph3dViewShadowDisabled:!0,graph3dViewShadowQuality:"high",graph3dViewShadowIntensity:.3,graph3dViewShadowBias:-.005,graph3dViewShadowRadius:.1,graph3dViewShadowType:"hard",graph3dViewShadowDegreeX:30,graph3dViewShadowDegreeZ:-10,graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewSyncEyeWithOrthoWidth:!1,graph3dViewFovy:o/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewDataNumWarningLine:1e4,graph3dViewHeadlightDirection:"camera",graph3dViewHeadlightRange:0,graph3dViewHeadlightGroup:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewHeadlightAmbientIntensity:.7,graph3dViewHeadlightRatioForPhysicalMaterial:.5,graph3dViewFogDisabled:!0,graph3dViewFogMode:"linear",graph3dViewFogDensity:5e-4,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewPickerResolution:.5,graph3dViewDashDisabled:!0,graph3dViewUvClipEnabled:!1,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,graph3dViewBatchInstancedDisabled:!0,graph3dViewFlowBlendMode:"addRGB",graph3dViewEnvmapType:"legacy",graph3dMaxVectorCacheTime:50,graph3dEnvmapCapabilityRequire:8,setShape3dModel:function(T,B){Et(B)&&tw.test(B)?Bo(T,B):M1(B)&&B.modelType?Go(T,B):B===Ht?delete uw[T]:uw[T]=B},getShape3dModel:lE,convertShape3dModelName:function(T){return T},getShape3dModelMap:function(){return uw},getCachedShape3dModelMap:function(){return iw},createMatrix:function(T,B){for(var G=(T=m1(T)?T:[T]).length-1;0<=G;G--){var H=T[G];B=os(H.mat,H.s3,H.r3,H.rotationMode,H.t3,B)}return B},transformVec:_s,glBindFrame:zE,glUnbindFrame:nE,createBoxModel:function(){return{vs:Mo,ns:Eo,uv:mo,is:Yo}},createRoundRectModel:function(T,B){return Oo.roundRect(T,B)},createStarModel:function(T,B){return Oo.star(T,B)},createRectModel:function(T,B){return Oo.rect(T,B)},createTriangleModel:function(T,B){return Oo.triangle(T,B)},createRightTriangleModel:function(T,B){return Oo.rightTriangle(T,B)},createParallelogramModel:function(T,B){return Oo.parallelogram(T,B)},createTrapezoidModel:function(T,B){return Oo.trapezoid(T,B)},createSmoothSphereModel:function(T,B,G,H,f,v,J){return vW(new eW(T,B,G,H,f,v,J))},createSphereModel:function(T,B,G,H,f,v,J){return T?go(T,B,G,H,f,v,J):vt.createSmoothSphereModel()},createSmoothConeModel:function(T,B,G,H,f){return yo(T,B,G,H,f)},createConeModel:function(T,B,G,H,f,v,J,M){return T?xo(T,B,G,H,f,v,J,M):yo(v)},createSmoothCylinderModel:function(T,B,G,H,f,v,J,M){return vW(new oW(T,B,G,H,f,v,J,M))},createCylinderModel:function(T,B,G,H,f,v,J,M){return T?So(T,B,G,H,f,v,J,M):so(v,J)},createSmoothTorusModel:function(T,B,G,H,f,v){return vW(new cW(T,B,G,H,f,v))},createTorusModel:function(T,B,G,H,f,v,J,M){return T?Wo(T,B,G,H,f,v,J,M):Fo(v,J)},createExtrusionModel:function(T,B,G,H,f,v,J,M){return wo(T,B,G,H,f,v,J,M)},createSmoothRingModel:function(T,B,G,H,f,v){for(var J=[],M=0;M<T.length-1;M+=2)J.push({x:T[M],y:T[M+1]});for(T=$0(J,B,G)[0],J=[],M=0;M<T.length;M++){var Y=T[M];J.push(new Zt(Y.x,0,Y.y))}return vW(new NW(J,v,H,f))},createTextGeometry:function(T,B){var G=vW(new QW(T,B));if(B.cube)for(var B=(T=function(T){for(var B,G,H,f,v,J,M=m1(T)?T:[T],Y=1/0,m=1/0,E=1/0,Z=-1/0,R=-1/0,A=-1/0,g=["vs","top_vs","bottom_vs"],F=0,W=M.length;F<W;F++)for(J=M[F],B=0,G=g.length;B<G;B++)if(v=J[g[B]])for(H=0,f=v.length;H<f;H+=3)Y=Jt(Y,v[H]),m=Jt(m,v[H+1]),E=Jt(E,v[H+2]),Z=Gt(Z,v[H]),R=Gt(R,v[H+1]),A=Gt(A,v[H+2]);return T.boundingBox={min:{x:Y,y:m,z:E},max:{x:Z,y:R,z:A}}}(G)).min,T=T.max,H=B.x,f=B.y,v=B.z,J=T.x-H||1,M=T.y-f||1,Y=T.z-v||1,m=["vs","top_vs","bottom_vs"],E=0,Z=m.length;E<Z;E++){var R=G[m[E]];if(R)for(var A=0,g=R.length;A<g;A+=3)R[A]=(R[A]-H)/J-.5,R[A+1]=(R[A+1]-f)/M-.5,R[A+2]=(R[A+2]-v)/Y-.5}return G},loadFontFace:function(T,H){vt.xhrLoad(T,function(B){if(!B)return H();var G;try{G=JSON.parse(B)}catch(T){G=JSON.parse(B.substring(65,B.length-2))}_W.loadFace(G),H&&H(G.familyName.toLowerCase())},H?null:{sync:!0})},createRingModel:function(T,N,Q,B,G,H,f,v,J,M){for(var Y=[],m=0;m<T.length-1;m+=2)Y.push({x:T[m],y:T[m+1]});H=H||vt.shapeSide,f=f||0,v=v||H;var E,Z,R,A,g,F,W,s,S,y,x,w,O,_,p,q,u,i=[],I=[],D=J?[]:ft,h=J?[]:ft,o=M?[]:ft,e=M?[]:ft,c=B?[]:ft,L=B?[]:ft,j=G?[]:ft,r=G?[]:ft,T=$0(Y,N,Q),X=N1(T),t=0,d=2*Math.PI/H;return T.forEach(function(T){if(1<(R=T.length)){if(A=T[0],B)for(F=A.x,s=A.y,m=f;m<v;m++)O=(x=m+1)*d,_=Mt(w=m*d),p=Yt(w),q=Mt(O),u=Yt(O),c.push(_*F,s,-p*F,q*F,s,-u*F,0,s,0),L.push(.5-.5*_,.5-.5*p,.5-.5*q,.5-.5*u,.5,.5);for(y=0;y<R;y++){for(g=T[y],F=A.x,W=g.x,s=A.y,S=g.y,E=t/X,t+=n2(A,g),Z=t/X,m=f;m<v;m++)O=(x=m+1)*d,_=Mt(w=m*d),p=Yt(w),q=Mt(O),u=Yt(O),i.push(_*W,S,-p*W,q*W,S,-u*W,_*F,s,-p*F,q*W,S,-u*W,q*F,s,-u*F,_*F,s,-p*F),I.push(m/H,Z,x/H,Z,m/H,E,x/H,Z,x/H,E,m/H,E),J&&m===f&&(D.push(0,s,0,0,S,0,_*W,S,-p*W,_*W,S,-p*W,_*F,s,-p*F,0,s,0),h.push(0,.5-s,0,.5-S,2*W,.5-S,2*W,.5-S,2*F,.5-s,0,.5-s)),M&&x===v&&(o.push(0,s,0,q*W,S,-u*W,0,S,0,q*W,S,-u*W,0,s,0,q*F,s,-u*F),e.push(1,.5-s,1-2*W,.5-S,1,.5-S,1-2*W,.5-S,1,.5-s,1-2*F,.5-s));A=g}if(G)for(F=A.x,s=A.y,m=f;m<v;m++)O=(x=m+1)*d,_=Mt(w=m*d),p=Yt(w),q=Mt(O),u=Yt(O),j.push(q*F,s,-u*F,_*F,s,-p*F,0,s,0),r.push(.5-.5*q,.5+.5*u,.5-.5*_,.5+.5*p,.5,.5)}}),{vs:i,uv:I,bottom_vs:j,bottom_uv:r,top_vs:c,top_uv:L,from_vs:D,from_uv:h,to_vs:o,to_uv:e}}},!0),S1(Ft,{"3d.move.mode":Ht,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"3d.clip.direction":null,"3d.clip.percentage":1,"3d.reflectable":!0,"shape.border.gradient.color":Ht,"edge.gradient.color":Ht,"edge.source.t3":Ht,"edge.target.t3":Ht,"light.type":"point","light.group":0,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":o/4,"light.range":0,"light.exponent":1,"light.intensity":1,"light.rotation.enable":!1,"light.size":[100,100],"light.specular.disable":!1,"light.mask":jE,"headlight.ambientIntensity":Ht,"wf.visible":!1,"wf.width":1,"wf.fog":!0,"wf.group":0,"wf.color":Q4,"wf.short":!1,"wf.mat":Ht,"wf.boundingBox":!1,"wf.material":null,"wf.geometry":!1,"wf.loadQuadWireframe":!1,"wf.combineTriangle":!0,"wf.normEpsilon":Ht,batch:Ht,static:Ht,"static.group":0,"transparent.mask":!1,"transparent.separate":!1,brightness:Ht,"select.brightness":.7,"repeat.uv.length":Ht,"rotate.uv.length":Ht,"rotate.vs.length":Ht,"shadow.cast":!0,"shadow.receive":!0,"3d.clipbox":Ht,"3d.clipbox.mask":jE,"3d.clipbox.group":0,"3d.clipbox.shape":"cube","effect.flow":!1,"effect.flow.gradient":"spread.horizontal","effect.flow.uvshape":"rect","effect.flow.size":512,"effect.flow.group":0,"effect.flow.intensity":1,"effect.flow.blend":Ht,"effect.flow.mask":jE,bloom:!1,envmap:0,"envmap.probe":0,roughness:0,renderTextureSamples:4,alphaTest:.4,autorotate:!1,fixSizeOnScreen:!1,"texture.cache":!1,"hide.overlapping.group":Ht,"vector.dynamic":!1,"vector.dynamic.maxsize":2048,"texture.scale":1,"geometry.cache":!1,"highlight.mode":!1,"highlight.type":"hard","highlight.visible":!0,"highlight.width":.8,"highlight.color":"rgba(190, 210, 250, 1)","highlight.glow":.8,"highlight.strength":2,"color.empty":[0,0,0,0],matDef:Ht,"shape3d.material":Ht,"shape3d.top.material":Ht,"shape3d.bottom.material":Ht,"shape3d.from.material":Ht,"shape3d.to.material":Ht,"all.material":Ht,"all.material":Ht,"label.face":Ct,"label.t3":Ht,"label.r3":Ht,"label.texture.scale":2,"label.rotationMode":gW,"label.light":!1,"label.blend":Ht,"label.reverse.flip":!1,"label.reverse.color":q4,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":Ct,"label2.t3":Ht,"label2.r3":Ht,"label2.texture.scale":2,"label2.rotationMode":gW,"label2.light":!1,"label2.blend":Ht,"label2.reverse.flip":!1,"label2.reverse.color":q4,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":Ct,"note.t3":Ht,"note.r3":Ht,"note.texture.scale":2,"note.rotationMode":gW,"note.light":!1,"note.blend":Ht,"note.reverse.flip":!1,"note.reverse.color":q4,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":Ct,"note2.t3":Ht,"note2.r3":Ht,"note2.texture.scale":2,"note2.rotationMode":gW,"note2.light":!1,"note2.blend":Ht,"note2.reverse.flip":!1,"note2.reverse.color":q4,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,"part.boundingBox":!1,shape3d:Ht,"shape3d.color":g,"shape3d.top.color":Ht,"shape3d.bottom.color":Ht,"shape3d.from.color":Ht,"shape3d.to.color":Ht,"shape3d.image":Ht,"shape3d.image.projection":Ht,"shape3d.top.image":Ht,"shape3d.bottom.image":Ht,"shape3d.from.image":Ht,"shape3d.to.image":Ht,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":Ht,"shape3d.side.to":Ht,"shape3d.smooth":Ht,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":Ht,"shape3d.opacity":Ht,"shape3d.reverse.flip":!1,"shape3d.reverse.color":q4,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":Ht,"shape3d.uv.scale":Ht,"shape3d.uv.rotation":Ht,"shape3d.uv.anchor":Ht,"shape3d.uv.union":Ht,"shape3d.top.uv.offset":Ht,"shape3d.top.uv.scale":Ht,"shape3d.top.uv.rotation":Ht,"shape3d.top.uv.anchor":Ht,"shape3d.bottom.uv.offset":Ht,"shape3d.bottom.uv.scale":Ht,"shape3d.bottom.uv.rotation":Ht,"shape3d.bottom.uv.anchor":Ht,"shape3d.from.uv.offset":Ht,"shape3d.from.uv.scale":Ht,"shape3d.from.uv.rotation":Ht,"shape3d.from.uv.anchor":Ht,"shape3d.to.uv.offset":Ht,"shape3d.to.uv.scale":Ht,"shape3d.to.uv.rotation":Ht,"shape3d.to.uv.anchor":Ht,"shape3d.top.cap":Ht,"shape3d.bottom.cap":Ht,"shape3d.start.angle":0,"shape3d.sweep.angle":mt,"shape3d.point.epsilon":1e-6,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"shape3d.transmission":Ht,"shape3d.reflector":!1,"shape3d.reflector.color":"rgb(128,128,128)","shape3d.reflector.blur":0,"shape3d.reflector.blur.iterations":1,"shape3d.reflector.background":null,"shape3d.reflector.clip":.003,"shape3d.reflector.shadow":"scene","camera.type":"perspective","camera.aspect":1,"camera.fovy":Ht,"camera.ortho.width":Ht,"camera.near":Ht,"camera.far":Ht,"camera.background":0,"camera.clear":!0,"camera.renderSky":!0,"camera.renderShadowMap":!0,"camera.renderAxis":!1,"camera.renderGrid":!1,"camera.renderEdit":!1,"camera.onlySky":!1,"camera.skybox.blur":Ht,"skybox.blur.size":0,"skybox.blur.resolution":0,"texture.mipmap.max":Ht,"texture.filter":Ht,"texture.filter.min":Ht,"texture.filter.mag":Ht,"texture.wrap":Ht,"texture.flipY":!1,"points.image":"rect","points.color":"white","points.transparent":!1,"points.size":20,"points.opacity":1,"points.uv.scale":[1,1],"points.uv.offset":[0,0],"points.discard.selectable":!1,"all.light":!0,"all.visible":!0,"all.color":g,"all.image":Ht,"all.blend":Ht,"all.opacity":Ht,"all.reverse.flip":!1,"all.reverse.color":q4,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":Ht,"all.uv.offset":Ht,"all.uv.scale":Ht,"all.uv.rotation":Ht,"all.uv.anchor":Ht,"all.uv.union":Ht,"all.discard.selectable":!0,mat:Ht,"left.mat":Ht,"right.mat":Ht,"top.mat":Ht,"bottom.mat":Ht,"front.mat":Ht,"back.mat":Ht,"edge.source.anchor.elevation":Ht,"edge.target.anchor.elevation":Ht,"edge.source.offset.elevation":0,"edge.target.offset.elevation":0,"3d.bone.visible":!1},!0),[0,0,0,0]),VE=function(T){return T instanceof Co},PE=function(T){return[T.x,T.e||0,T.y]},kE=function(T,B,G){for(var H=(B=U0(B||0))[0],f=B[1],v=B[2];G--;)T.push(H,f,v)},CE=function(T,B,G){for(var H=(B=U0(B||0))[0],f=B[1],v=B[2],J=B[3];G--;)T.push(H,f,v,J)},aE=function(T,B,G){if(B)for(var H,f,v,J=B[0],M=B[1],Y=B[2],m=B[4],E=B[5],Z=B[6],R=B[8],A=B[9],g=B[10],F=B[12],W=B[13],s=B[14],S=G.length,y=0,y=0;y<S;y+=3)H=G[y],f=G[y+1],v=G[y+2],T.push(J*H+m*f+R*v+F,M*H+E*f+A*v+W,Y*H+Z*f+g*v+s);else W1(T,G);return T},T$=function(T,B,G){var H=B.s("light.intensity"),f=(J=U0(B.s(LE)))[0],v=J[1],J=J[2],H=(1!==H&&(f*=H,v*=H,J*=H),B.s("light.disabled"));T.push(f,v,J,H?1:0),G.c.push(f,v,J),G.g.push(H?-1:B.s("light.group")),G.e.push(H?1:0)},B$=(i8=new Zt,I8=new $9,function(T,B){return i8.copy(T).applyEuler(B.getEuler(I8)),[i8.x,i8.y,i8.z]}),G$=function(T,B,G,H){if((H=H===Ht?T._headlightAmbientIntensity:H)!==B._lastHeadlightAmbientIntensity&&(B.uHeadlightAmbientIntensity=B._lastHeadlightAmbientIntensity=H),G!==B._lastLightMask&&(B._lastLightMask=G,H=T._lastLightUploadInfo)){for(var f,v=H.g,J=H.e,M=v.length,Y=new Array(M),m=!1,E=0;E<M;E++)f=v[E],(Y[E]=!(f<0||32<=f)&&G&1<<f?0:1)!==J[E]&&(m=!0);if(m){H.e=J=Y;var Z,R=H.c,H=(B.uHeadlightColor=[R[0],R[1],R[2],J[0]],T._59O),A=T._spots,T=T._dirs,g=3,F=1;if(M=H.length){for(E=0,Z=[];E<M;E++)Z.push(R[g++],R[g++],R[g++],J[F++]);B.uPointColor=Z}if(M=A.length){for(E=0,Z=[];E<M;E++)Z.push(R[g++],R[g++],R[g++],J[F++]);B.uSpotColor=Z}if(M=T.length){for(E=0,Z=[];E<M;E++)Z.push(R[g++],R[g++],R[g++],J[F++]);B.uDirColor=Z}}}},H$=function(T,B){return Math.max(T.getRotateMinPhi()+Rs,Math.min(T.getRotateMaxPhi()-Rs,B))},f$=function(){return.05+tt()/2},v$=function(T,B,G,H){var f=T.getEye(),T=(T.isOrtho()?((v=Ws(T.getCenter(),f))[0]+=H[0],v[1]+=H[1],v[2]+=H[2]):v=f,B),f=G,B=H,G=v,H=Ss(T,f),v=Ws(G,B,!0),T=Ss(v,f);return it(T)<Rs?ft:(G=(H-Ss(B,f))/T,[B[0]+v[0]*G,B[1]+v[1]*G,B[2]+v[2]*G])},J$=function(T,B){return{x:2*T.x-B.x,y:2*T.y-B.y}},M$=function(T,B,G,H){if(!T)return v=ct(B.y-G.y,G.x-B.x),{x:B.x+H*Yt(v),y:B.y+H*Mt(v)};if(!G)return v=ct(T.y-B.y,B.x-T.x),{x:B.x+H*Yt(v),y:B.y+H*Mt(v)};var f,v,J,M,Y=Ws([T.x,T.y,0],[B.x,B.y,0],!0),m=Ws([G.x,G.y,0],[B.x,B.y,0],!0),E=-(Y[0]+m[0])/2,Z=-(Y[1]+m[1])/2,R=ut(E*E+Z*Z);return R<Rs?(v=ct(T.y-B.y,B.x-T.x),{x:B.x+H*Yt(v),y:B.y+H*Mt(v)}):(f=T.x-B.x,T=T.y-B.y,J=G.x-B.x,M=G.y-B.y,f=ut(f*f+T*T),T=ut(J*J+M*M),v=It(Ss(Y,m))/2,J=0<Y[1]*m[0]-Y[0]*m[1]?-1:1,E/=R,Z/=R,M=H/Yt(v),Y=Gt(f,T)/Mt(v),R=Math.min(M,Y),m={x:B.x+J*R*E,y:B.y+J*R*Z},G.b&&M>T/Mt(v)&&(m.adjust=!0),m)},Y$=function(T){var B=T[0],G=T[1],H=T[2],f=T[3],v=T[4],J=T[5],M=T[6],Y=T[7],m=T[8],E=T[9],Z=T[10],R=T[11],A=T[12],g=T[13],F=T[14],W=T[15],s=B*J-G*v,S=B*M-H*v,y=B*Y-f*v,x=G*M-H*J,w=G*Y-f*J,O=H*Y-f*M,_=m*g-E*A,p=m*F-Z*A,q=m*W-R*A,u=E*F-Z*g,i=E*W-R*g,I=Z*W-R*F,D=s*I-S*i+y*u+x*q-w*p+O*_;if(!D)return ft;T[0]=(J*I-M*i+Y*u)*(D=1/D),T[1]=(H*i-G*I-f*u)*D,T[2]=(g*O-F*w+W*x)*D,T[3]=(Z*w-E*O-R*x)*D,T[4]=(M*q-v*I-Y*p)*D,T[5]=(B*I-H*q+f*p)*D,T[6]=(F*y-A*O-W*S)*D,T[7]=(m*O-Z*y+R*S)*D,T[8]=(v*i-J*q+Y*_)*D,T[9]=(G*q-B*i-f*_)*D,T[10]=(A*w-g*y+W*s)*D,T[11]=(E*y-m*w-R*s)*D,T[12]=(J*p-v*u-M*_)*D,T[13]=(B*u-G*p+H*_)*D,T[14]=(g*S-A*x-F*s)*D,T[15]=(m*x-E*S+Z*s)*D},m$=function(T,B){var G,H;B&&(G=B[0],H=B[1],B=B[2],T[12]=T[0]*G+T[4]*H+T[8]*B+T[12],T[13]=T[1]*G+T[5]*H+T[9]*B+T[13],T[14]=T[2]*G+T[6]*H+T[10]*B+T[14],T[15]=T[3]*G+T[7]*H+T[11]*B+T[15])},E$=function(T,B){var G,H;B&&(G=B[0],H=B[1],B=B[2],T[0]=T[0]*G,T[1]=T[1]*G,T[2]=T[2]*G,T[3]=T[3]*G,T[4]=T[4]*H,T[5]=T[5]*H,T[6]=T[6]*H,T[7]=T[7]*H,T[8]=T[8]*B,T[9]=T[9]*B,T[10]=T[10]*B,T[11]=T[11]*B)},Z$=function(T,B,G){var H=B[0],f=B[1],v=B[2],J=B[3],M=B[4],Y=B[5],m=B[6],E=B[7],Z=B[8],R=B[9],A=B[10],g=B[11],F=B[12],W=B[13],s=B[14],B=B[15],S=G[0],y=G[1],x=G[2],w=G[3];return T[0]=S*H+y*M+x*Z+w*F,T[1]=S*f+y*Y+x*R+w*W,T[2]=S*v+y*m+x*A+w*s,T[3]=S*J+y*E+x*g+w*B,S=G[4],y=G[5],x=G[6],w=G[7],T[4]=S*H+y*M+x*Z+w*F,T[5]=S*f+y*Y+x*R+w*W,T[6]=S*v+y*m+x*A+w*s,T[7]=S*J+y*E+x*g+w*B,S=G[8],y=G[9],x=G[10],w=G[11],T[8]=S*H+y*M+x*Z+w*F,T[9]=S*f+y*Y+x*R+w*W,T[10]=S*v+y*m+x*A+w*s,T[11]=S*J+y*E+x*g+w*B,S=G[12],y=G[13],x=G[14],w=G[15],T[12]=S*H+y*M+x*Z+w*F,T[13]=S*f+y*Y+x*R+w*W,T[14]=S*v+y*m+x*A+w*s,T[15]=S*J+y*E+x*g+w*B,T},R$=function(T,B,G,H){var f,v,J,M,Y=B[0],m=B[1],B=B[2],E=H[0],Z=H[1],H=H[2],R=G[0],A=G[1],G=G[2];return it(Y-R)<Rs&&it(m-A)<Rs&&it(B-G)<Rs?Os(T):(M=1/ut((R=Y-R)*R+(A=m-A)*A+(G=B-G)*G),(M=ut((f=Z*(G*=M)-H*(A*=M))*f+(H=H*(R*=M)-E*G)*H+(E=E*A-Z*R)*E))?(f*=M=1/M,H*=M,E*=M):E=H=f=0,(M=ut((Z=A*E-G*H)*Z+(v=G*f-R*E)*v+(J=R*H-A*f)*J))?(Z*=M=1/M,v*=M,J*=M):J=v=Z=0,T[0]=f,T[1]=Z,T[2]=R,T[3]=0,T[4]=H,T[5]=v,T[6]=A,T[7]=0,T[8]=E,T[9]=J,T[10]=G,T[11]=0,T[12]=-(f*Y+H*m+E*B),T[13]=-(Z*Y+v*m+J*B),T[14]=-(R*Y+A*m+G*B),T[15]=1,T)},A$=function(T,B,G,H,f){var B=1/et(B/2),v=1/(H-f);return T[0]=B/G,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=B,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=(f+H)*v,T[11]=-1,T[12]=0,T[13]=0,T[14]=2*f*H*v,T[15]=0,T},g$=function(T,B,G,H,f,v,J){var M=1/(B-G),Y=1/(H-f),m=1/(v-J);return T[0]=-2*M,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=-2*Y,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=2*m,T[11]=0,T[12]=(B+G)*M,T[13]=(f+H)*Y,T[14]=(J+v)*m,T[15]=1,T},F$=function(T,B){var G=B[0],H=B[1],f=B[2],v=(v=G*G+H*H+f*f+(B=B[3])*B)?1/v:0;return T[0]=-G*v,T[1]=-H*v,T[2]=-f*v,T[3]=B*v,T},W$=function(T,B){var G=B[0]+B[5]+B[10],H=0;return 0<G?(H=2*Math.sqrt(G+1),T[3]=.25*H,T[0]=(B[6]-B[9])/H,T[1]=(B[8]-B[2])/H,T[2]=(B[1]-B[4])/H):B[0]>B[5]&B[0]>B[10]?(H=2*Math.sqrt(1+B[0]-B[5]-B[10]),T[3]=(B[6]-B[9])/H,T[0]=.25*H,T[1]=(B[1]+B[4])/H,T[2]=(B[8]+B[2])/H):B[5]>B[10]?(H=2*Math.sqrt(1+B[5]-B[0]-B[10]),T[3]=(B[8]-B[2])/H,T[0]=(B[1]+B[4])/H,T[1]=.25*H,T[2]=(B[6]+B[9])/H):(H=2*Math.sqrt(1+B[10]-B[0]-B[5]),T[3]=(B[1]-B[4])/H,T[0]=(B[8]+B[2])/H,T[1]=(B[6]+B[9])/H,T[2]=.25*H),T},s$=function(T,B,G){var H=B[0],f=B[1],v=B[2],J=v+v,M=H*(E=H+H),Y=H*(Z=f+f),H=H*J,m=f*Z,f=f*J,E=(B=B[3])*E,Z=B*Z,B=B*J;return T[0]=1-(m+(v=v*J)),T[1]=Y+B,T[2]=H-Z,T[3]=0,T[4]=Y-B,T[5]=1-(M+v),T[6]=f+E,T[7]=0,T[8]=H+Z,T[9]=f-E,T[10]=1-(M+m),T[11]=0,T[12]=G[0],T[13]=G[1],T[14]=G[2],T[15]=1,T},S$=function(T,B){if(T.isVREnabled()){var G=T.vr.getViewMatrix(B);if(G)return G}return T._camera?T._camera.getViewMatrix(B):R$(B||ys(),T._eye,T._center,T._up)},y$=function(T,B){if(T.isVREnabled()&&(H=T.vr.getProjectMatrix()))return H;if(T._camera)return T._camera.getProjectMatrix();if(!B&&T._computedProjectMatrix)return ws(T._computedProjectMatrix);var G,H=T.getAspect(),B=T._near,f=T._far,v=ys();return T._ortho?(G=T._orthoWidth/2,g$(v,-G,G,-(G/=H),G,B,f)):A$(v,T._fovy,H,B,f),v},x$=function(T,B){if(!T)return ft;var G=[],H=0,f=T.length,v=f/3;if(B){for(;H<f;H++)G[H]=0;for(H=0;H<B.length;H+=3){var J=[],M=[];(m=[])[0]=T[3*B[H+1]+0]-T[3*B[H]+0],m[1]=T[3*B[H+1]+1]-T[3*B[H]+1],m[2]=T[3*B[H+1]+2]-T[3*B[H]+2],J[0]=T[3*B[H+2]+0]-T[3*B[H+1]+0],J[1]=T[3*B[H+2]+1]-T[3*B[H+1]+1],J[2]=T[3*B[H+2]+2]-T[3*B[H+1]+2],M[0]=m[1]*J[2]-m[2]*J[1],M[1]=m[2]*J[0]-m[0]*J[2],M[2]=m[0]*J[1]-m[1]*J[0];for(var Y=0;Y<3;Y++)G[3*B[H+Y]+0]+=M[0],G[3*B[H+Y]+1]+=M[1],G[3*B[H+Y]+2]+=M[2]}}else for(H=0;H<v;H+=3){var m,J=[],M=[];for((m=[])[0]=T[3*(H+1)+0]-T[3*H+0],m[1]=T[3*(H+1)+1]-T[3*H+1],m[2]=T[3*(H+1)+2]-T[3*H+2],J[0]=T[3*(H+2)+0]-T[3*(H+1)+0],J[1]=T[3*(H+2)+1]-T[3*(H+1)+1],J[2]=T[3*(H+2)+2]-T[3*(H+1)+2],M[0]=m[1]*J[2]-m[2]*J[1],M[1]=m[2]*J[0]-m[0]*J[2],M[2]=m[0]*J[1]-m[1]*J[0],Y=0;Y<3;Y++)G[3*(H+Y)+0]=M[0],G[3*(H+Y)+1]=M[1],G[3*(H+Y)+2]=M[2]}for(H=0;H<f;H+=3){var E=[],Z=(E[0]=G[H+0],E[1]=G[H+1],E[2]=G[H+2],ut(E[0]*E[0]+E[1]*E[1]+E[2]*E[2]));0===Z&&(Z=Rs),E[0]=E[0]/Z,E[1]=E[1]/Z,E[2]=E[2]/Z,G[H+0]=E[0],G[H+1]=E[1],G[H+2]=E[2]}return new Fs(G)},w$=function(T,B,G,H,f){return H=H||B.createTexture(),G&&(f?(f.image=G,T.createTexture(f,H)):T.createTexture({image:G},H)),H},O$=function(T,B,G){return G=new Uint8Array(G||4),B=B||T.createTexture(),T.activeTexture(33984),p$(T,B),q$(T,10241,9729),T.texImage2D(3553,0,6408,1,1,0,6408,5121,G),B},_$=function(T){return T.createBuffer()},p$=function(T,B){T.bindTexture(3553,B||T._emptyTexture)},q$=function(T,B,G){T.texParameteri(3553,B,G)},u$=function(T,B){(T=At.for(T).directState()).polygonOffset.enabled=!0,T.polygonOffset.value=B},i$=function(T){At.for(T).directState().polygonOffset.enabled=!1},I$=function(T,B){return T=At.for(T).directState().color.clear,B&&T?T.slice(0):T},D$=function(T,B){B&&(At.for(T).directState().color.clear=U0(B))},h$=function(T,B,G){if(B._lastClipboxVersion!==T._boxClipperVersion)B._lastClipboxVersion=T._boxClipperVersion;else if(G===B._lastClipboxEnabled)return;var H=T._boxClipperGroups,f=T._boxClipperShape,v=H?H.length:0,J=new Array(v);if(G)for(var M=0;M<v;M++)J[M]=G&1<<H[M]?f[M]:0;B._lastClipboxEnabled=G,B.uClipperShape=J},o$=h$,e$=function(T){var B=(T=At.for(T)).directUniforms(),T=T.directAttribs();B.uFix=!0,T.aNormal=!1},c$=function(T){At.for(T).directUniforms().uFix=!1},t$=function(T,B,G,H,f,v,J){var M=(Y=At.for(T)).directState(),Y=Y.directUniforms();T._picking||(B?(Y.uBlend=!0,Y.uBlendColor=B):Y.uBlend=!1,Y.uLight=Y.uFog=G==ft||G,v1(H)&&1!==H&&(Y.uPartOpacity=H),Y.uReverseFlip=f!=ft&&f,Y.uFixPickReverseColor=v||q4),M.cullFace.enabled=!!J},d$=function(T){T._picking||(At.for(T).directUniforms().uPartOpacity=1)},N$=(u8=[1,0,0,0,1,0,0,0,0],function(T,B,G,H,f,v,J,M,Y,m){var E=(Z=At.for(T)).directUniforms(),Z=Z.directAttribs();if(!B)return E.uSampler=T._emptyTexture,void(E.uBlendSampler=T._emptyBlendTexture);E.uTexture=!0,E.uDiscardSelectable=!J1(G)||G,Z.aUv=K$(T,H,f,ft,2),m?(E.uBlendTexture=!0,E.uBlendSampler=m):(E.uBlendTexture=!1,E.uBlendSampler=T._emptyBlendTexture),E.uSampler=B,E.uUvMatrix=v||J||M||Y?Ax(M,v,J,Y):u8}),Q$=function(T,B){var G=(H=At.for(T)).directUniforms(),H=H.directAttribs();T.activeTexture(33984),p$(T,ft),T.activeTexture(33985),p$(T,ft),B&&(H.aUv=!1,G.uTexture=!1,G.uSampler=T._emptyTexture,G.uBlendTexture=!1,G.uBlendSampler=T._emptyBlendTexture)},L$=function(T,B,G,H){var f=B.getBrightness(G),v=G.s("alphaTest"),J=At.for(T),M=J.directUniforms(),Y=B._picking,m=!0;return f!=ft&&1!==f&&(M.uBrightness=f),M.uAlphaTest=v,M.shadowReceive=!Y&&G.s("shadow.receive"),M.shadowCull=!Y&&!!G.s("shadow.cull"),o$(B,M,G.s("3d.clipbox")?rE:G.s("3d.clipbox.mask")),(f=G.s("3d.clip.direction"))?(0===(v=G.s("3d.clip.percentage"))&&(m=!1),f=B.getData3dUI(G)._formatClipUniforms(f,v,G),M.uClipPercent=f[1],M.uClipDirection=f[0]):M.uClipDirection=0,M.blackout=!(!T._blooming||G.s("bloom")),Y||(B._flowObjects.length&&B.flowMap.resetDataFlowEnabld(G,M),H||(v=G.s("envmap"),M.uUseEnvMap=!!v,M.roughness=G.s("roughness"),B._setEnvmapByProbeId(M,G.s("envmap.probe"),v||.01),G$(B,M,G.s("light.mask"),G.s("headlight.ambientIntensity"))),M.uFog=G.s("shape3d.light")!=ft),H||!!G._flipSide!=(2===G._forceSingleFace)&&(J.directState().cullFace.frontFace=2304),m},j$=function(T,B,G,H,f){var v=(J=At.for(T)).directUniforms(),J=J.directAttribs();!B||lt||Kt||T.lineWidth(B),G&&!T._picking&&(v.uFixPickReverseColor=G),H&&(J.aPosition=K$(T,H,f,ft))},r$=function(T,B,G,H){T&&(H&&(G*=H),T.calls++,T.vertices+=G,B==ft||4===B?T.faces+=G/3:1===B?T.lines+=G/2:B===tE.POINTS?T.points+=G:5===B||6===B?T.faces+=G-2:3===B?T.lines+=G-1:2===B&&(T.lines+=G))},X$=function(T,B,G,H,f){m8&&(H=T[m8]),f?T.drawArraysInstanced(H==ft?4:H,B,G,f):T.drawArrays(H==ft?4:H,B,G),r$(T._renderInfo,H,G,f)},U$=function(T,B,G,H,f,v){m8&&(H=T[m8]),v?T.drawElementsInstanced(H==ft?4:H,G,f==ft?5123:f,B==ft?0:2*B,v):T.drawElements(H==ft?4:H,G,f==ft?5123:f,B==ft?0:2*B),r$(T._renderInfo,H,G,v)},l$=function(T,B,G,H,f){return T.bindBuffer(34962,B),G&&T.bufferData(34962,G,35044),B},b$=function(T,B,G,H,f){return(B=K$(T,B,G,H,f)).instanced=!0,B},K$=function(T,B,G,H,f){return G?$$(T,34962,B,G):l$(T,B,G)},z$=function(T,B,G){T.bindBuffer(34963,B),G&&T.bufferData(34963,G,35044)},n$=function(T,B,G){$$(T,34963,B,G)},$$=function(T,B,G,H){var f,v=H._bufId||(H._bufId=L.Math.generateIncreasingID()),J=T._4NQ;return(G=J[v])&&G._buf?T.bindBuffer(B,G._buf):(f=_$(T),G=J[v]={_buf:f},T.bindBuffer(B,f),T.bufferData(B,H,35044),J=5126,H instanceof Uint16Array?J=5123:H instanceof Int16Array?J=5122:H instanceof Uint32Array?J=5125:H instanceof Int32Array?J=5124:H instanceof Int8Array?J=5120:(H instanceof Uint8Array||H instanceof Uint8ClampedArray)&&(J=5121),f.glType=J),G._fid=T._renderInfo.frame,G._buf},V$=function(T,B){B!=ft&&0<=B&&T.disableVertexAttribArray(B)},P$=function(T,B){var G=T.getGL(),G=At.for(G).directUniforms();T._7O=T._8O.pop(),T._modelMatrix=T._modelMatrixStack.pop(),B&&(G.uModelViewMatrix=T._7O,T._6O=B,G.uNormalMatrix=B)},k$=function(T,B){var G,H,f,v,J,M;return(G=B=B||ys())[0]=T[0],G[1]=T[1],G[2]=T[2],G[3]=T[3],G[4]=T[4],G[5]=T[5],G[6]=T[6],G[7]=T[7],G[8]=T[8],G[9]=T[9],G[10]=T[10],G[11]=T[11],G[12]=T[12],G[13]=T[13],G[14]=T[14],G[15]=T[15],Y$(B),T=(G=B)[1],H=G[2],f=G[3],v=G[6],J=G[7],M=G[11],G[1]=G[4],G[2]=G[8],G[3]=G[12],G[4]=T,G[6]=G[9],G[7]=G[13],G[8]=H,G[9]=v,G[11]=G[14],G[12]=f,G[13]=J,G[14]=M,B},C$=function(T,B){var G=T.getGL(),H=T._7O,G=At.for(G).directUniforms();B?(T._8O.push(ws(H)),T._modelMatrixStack.push(ws(T._modelMatrix)),G.uModelMatrix=Z$(T._modelMatrix,T._modelMatrix,B),T._7O=Z$(H,H,B)):G.uModelMatrix=T._modelMatrix=ws(xs),G.uModelViewMatrix=H,G.uNormalMatrix=k$(H,T._6O)},a$={body:0,label:1,label2:2,note:3,note2:4,symbol:5},Tx=function(T,B,G,H,f,v){var J,M=G?((G=H._pickId)||(G=H._pickId=B._pickIdUsed,B._pickIdUsed+=10),null!=(M=a$[f])?J=G+M:(J=(G=(G=H._pickExtraPartMap)||(H._pickExtraPartMap={}))[f])||(J=G[f]=B._pickIdUsed++),B[J]||(B[J]={data:H.data,part:f}),gZ(J)):$E;return v||(At.for(T).directUniforms().uFixPickReverseColor=M),M},Bx=Tx,Gx=function(T,B,G){var H,f="target"===(G="target"!==G?"source":G)?B.getTargetAgent():B.getSourceAgent(),G="edge."+G+".";if(r(f))return S=B.s(G+"anchor.x"),J=B.s(G+"anchor.elevation"),W=B.s(G+"anchor.y"),H=hs(f,T.getMat(f)),y=f.getAnchor3d(),(S=_s([(S===Ht?.5:S)-y.x,(J===Ht?.5:J)-y.y,(W===Ht?.5:W)-y.z],H))[1]+=B.s(G+"offset.elevation"),S;var v=B.s(G+"index"),J=T.getData3dUI(f);if(!J.info||!J.info.list)return!1;if(0<=v){for(var M,Y,m,E=(s=J.info._lastPointsSegments).points,Z=s.segments,R=-1,A=-1,g=0,F=(Z||E).length;g<F;g++){if(3===(Y=Z?Z.get(g):1))m=2;else if(4===Y)m=3;else{if(5===Y)continue;m=1}if(R+=m,++A===v){M=E.get(R);break}}return[(M=M||E.get(E.length-1)).x,(M.e||0)+B.s(G+"offset.elevation"),M.y]}var W=B.s(G+"percent")||0,W=Math.max(0,Math.min(W,1));if(!J||!J.getCache)return!1;var s,S,y=J.getCache(),F=y[y.length-1].length;return[(S=(s=T.getLineOffset(f,W*F)).point).x,S.y+B.s(G+"offset.elevation"),S.z]},Hx=(q8={center:function(T,B,G,H,f){var v=-B[1]/2,v={x:-B[0]/2,y:v,width:B[0],height:B[1]};return[(B=p4(T,v,G)).x+H,-B.y-f,vt.getPosition3dGap()]},front:function(T,B,G,H,f){var v=-B[1]/2,v={x:-B[0]/2,y:v,width:B[0],height:B[1]};return[(T=p4(T,v,G)).x+H,-T.y-f,B[2]/2+vt.getPosition3dGap()]},back:function(T,B,G,H,f){var v={x:-B[0]/2,y:-B[1]/2,width:B[0],height:B[1]};return[-(T=p4(T,v,G)).x-H,-T.y-f,-B[2]/2-vt.getPosition3dGap()]},left:function(T,B,G,H,f){var v=-B[1]/2,v={x:-B[2]/2,y:v,width:B[2],height:B[1]},T=p4(T,v,G);return[-B[0]/2-vt.getPosition3dGap(),-T.y-f,T.x+H]},right:function(T,B,G,H,f){var v={x:-B[2]/2,y:-B[1]/2,width:B[2],height:B[1]},T=p4(T,v,G);return[B[0]/2+vt.getPosition3dGap(),-T.y-f,-T.x-H]},top:function(T,B,G,H,f){var v={x:-B[0]/2,y:-B[2]/2,width:B[0],height:B[2]};return[(T=p4(T,v,G)).x+H,B[1]/2+vt.getPosition3dGap(),T.y+f]},bottom:function(T,B,G,H,f){var v=-B[2]/2,v={x:-B[0]/2,y:v,width:B[0],height:B[2]};return[(T=p4(T,v,G)).x+H,-B[1]/2-vt.getPosition3dGap(),-T.y-f]}},function(T,B,G,H,f,v){return q8[H](T,B,G,f||0,v||0)}),fx=function(T,B,G,H,f,v,J,M,Y,m){return f&&(B[0]+=f[0],B[1]+=f[1],B[2]+=f[2]),m$(T,G),M?(f=ys(),lW(f,Y,m),_s(B,f),m$(T,B),T.auto=M,T.pos=_s([0,0,0],T),v&&(G=T.mat2=ys(),lW(G,v,J))):(lW(T,Y,m),m$(T,B),H===Te?Is(T,-ot):H===Be?Is(T,ot):H===Ge?is(T,-ot):H===He?is(T,ot):H===at&&Is(T,o),lW(T,v,J)),T},vx=function(T,B){var G,H,f=B.auto,v=B.mat2,T=T.gv;f?(G=ys(),H=[0,0,0,0],f="string"==typeof f?[(f.indexOf("x")<0?T._eye:T._center)[0],(f.indexOf("y")<0?T._eye:T._center)[1],(f.indexOf("z")<0?T._eye:T._center)[2]]:T._eye,W$(H,R$(ys(),f,T._center,T._up)),s$(G,F$(H,H),B.pos),v&&Z$(G,G,v),C$(T,G)):C$(T,B)},Jx=function(T,B,G,H,f){var v=T.s,J=T.gv,M=J.getGL(),Y=J._buffer,m=J._1O,E=At.for(M).directAttribs();w$(J,M,N0,m),vx(T,G),t$(M,v(B+".blend"),v(B+".light"),v(B+".opacity"),v(B+".reverse.flip"),v(B+".reverse.color"),T.data._forceSingleFace||v(B+".reverse.cull")),N$(M,m,f,Y.uv,fo),E.aPosition=K$(M,Y.vs,H,ft),E.aNormal=K$(M,Y.ns,vo,ft),n$(M,Y.is,Jo),U$(M,0,Jo.length),Q$(M,m),d$(M),P$(J)},Mx=function(T,B,G){var H=T.gv,f=T.data,v=H.getFaceMaterial(f,B),T=T[B]={blend:H.getBodyColor(f)||H.getFaceBlend(f,B),light:H.getFaceLight(f,B),color:H.getFaceColor(f,B),opacity:H.getFaceOpacity(f,B),transparent:v?mx(v):H.getFaceTransparent(f,B),reverseFlip:H.getFaceReverseFlip(f,B),reverseColor:H.getFaceReverseColor(f,B),reverseCull:H.getFaceReverseCull(f,B),texture:H.getFaceImage(f,B),blendTexture:H.getFaceBlendImage(f,B),discardSelectable:H.getFaceDiscardSelectable(f,B),material:v};return"csg"!==B&&(T.uv=H.getFaceUv(f,B)||G&&G[B+"Uv"],T.uvScale=H.getFaceUvScale(f,B)||G&&G[B+"UvScale"],T.uvOffset=H.getFaceUvOffset(f,B)||G&&G[B+"UvOffset"],T.uvRotation=H.getFaceUvRotation(f,B)||G&&G[B+"uvRotation"],T.uvAnchor=H.getFaceUvAnchor(f,B)||G&&G[B+"uvAnchor"],(v=H.getFaceMat(f,B))&&(G=hs(f,v),f.appendAnchorMatrix3d(G),T.mat=G)),T},Yx=function(T,B,G,H,f){var v,J,M,Y,m=T[H];m&&(v=T.data,!(T=T.gv)._picking&&m.material?(J={mesh:{vs:m.vs,ns:m.ns,uv:m.tuv},mat:m.material},T._prefabRenderer.render(B,J,v)):f(m.transparent)&&(J=T._buffer,f=T.getTexture(m.texture,v,H),H=T.getTexture(m.blendTexture,v),M=(Y=At.for(B)).directUniforms(),Y=Y.directAttribs(),N$(B,f,m.discardSelectable,J.uv,m.tuv,m.uvOffset,m.uvScale,m.uvRotation,m.uvAnchor,H),t$(B,m.blend,m.light,m.opacity,m.reverseFlip,m.reverseColor,v._forceSingleFace||m.reverseCull),m.cs&&!T._batchColorDisabled?(M.uBatchColor=!0,Y.aBatchColor=K$(B,J.batchColor,m.cs,G.aBatchColor,4)):M.uDiffuse=m.color||Ft["color.empty"],Y.aPosition=K$(B,J.vs,m.vs,ft),Y.aNormal=K$(B,J.ns,m.ns,ft),X$(B,0,m.vs.length/3),m.cs&&!T._batchColorDisabled&&(M.uBatchColor=!1,V$(B,G.aBatchColor)),d$(B),Q$(B,f)))},mx=function(T){return!!T&&!(!(T="string"==typeof T?vt.getMaterial(T):T)||!T.transparent)},Ex=(w8=new Zt,O8=new Zt,_8=new Zt,p8=new j9,function(T,B,G,H,f){T.identity();var v=B.rotationOffset,J=B.rotationPivot,M=B.scalingOffset,Y=B.scalingPivot,G=(w8.fromArray(G||B.translation),v&&w8.add(O8.fromArray(v)),J&&w8.add(O8.fromArray(J)),T.makeRotationFromQuaternion(p8.fromArray(H||B.rotation)).setPosition(w8),w8.set(0,0,0),J&&w8.sub(O8.fromArray(J)),M&&w8.add(O8.fromArray(M)),Y&&w8.add(O8.fromArray(Y)),0===w8.x&&0===w8.y&&0===w8.z||T.translate(w8),f||B.scale);return 2!==B.inheritType&&G&&(_8.fromArray(G),1===_8.x&&1===_8.y&&1===_8.z||T.scale(_8)),Y&&T.translate(O8.multiplyScalar(-1)),T}),Zx=function(T,B,H){var f,v,J,M;m1(T)?T.forEach(function(T){Zx(T,B,H)}):Et(T)?Zx(oo(B,T),B,H):M1(T)?T.model3d?vt.traverse(T,function(T,B){f=T.position,v=T.scale,(J=T.quaternion)||(J=T.euler)&&(M=M||[0,0,0],J=l.eulerArrayToQuaternionArray(J,M));var G=T._matrixWorld;(G=G||(T._matrixWorld=new K)).composeFromArray(f,J,v),B&&G.premultiply(B._matrixWorld),(B=T.mesh)&&("string"==typeof B&&(B=vt.getMesh(B)),H.push({matrix:G,mesh:B}))},null,"comps"):T.shape3d?Zx(T.shape3d,B,H):H.push({mesh:T}):H.push({mesh:T})},Rx=(x8=new l.Matrix2d,function(T,B,G,H,f){return(f=f||x8).identity(),H&&f.translate(-H[0],-H[1]),G&&f.scale(G[0],G[1]),T&&f.rotate(T),H&&f.translate(H[0],H[1]),B&&f.translate(B[0],B[1]),f}),Ax=(S8=[1,0,0,0,1,0,0,0,1],y8=[1,0,0,0,1,0,0,0,1],function(T,B,G,H){return T||B||G||H?(s8=T?(W8=Yt(T),Mt(T)):(W8=0,1),F8=G?(g8=G[0],G[1]):g8=1,E8=s8*g8,Z8=W8*g8,R8=-W8*F8,s8*=F8,F8=H?(A8=H[0]-(E8*H[0]+R8*H[1]),H[1]-(Z8*H[0]+s8*H[1])):A8=0,B&&(A8+=B[0],F8+=B[1]),y8[0]=E8,y8[1]=Z8,y8[3]=R8,y8[4]=s8,y8[6]=A8,y8[7]=F8,y8):S8}),gx=function(T,B,G,H){var f,v,J,M,Y,m;H?(T.center=B.max.clone().add(B.min).multiplyScalar(.5).toArray(),f=T.center[0],v=T.center[1],J=T.center[2]):f=v=J=0,G?(m=H?(M=(G=B.max.clone().sub(B.min).toArray())[0],Y=G[1],G[2]):(M=2*Math.max(Math.abs(B.min.x),Math.abs(B.max.x)),Y=2*Math.max(Math.abs(B.min.y),Math.abs(B.max.y)),2*Math.max(Math.abs(B.min.z),Math.abs(B.max.z))),0===M&&(M=Math.min(Y,m)/1e3||.001),0===Y&&(Y=Math.min(M,m)/1e3||.001),0===m&&(m=Math.min(M,Y)/1e3||.001),T.rawS3=[M,Y,m],T.scale=[1/M,1/Y,1/m]):M=Y=m=1,H&&(T.position=[-f/M,-v/Y,-J/m])},Fx=function(T,B,G,H,f,v){for(var J,M,Y,m,E,Z,R,A,g,F=[H-B,f-G],W=T?T.length:0,s=0;s<W;s++){for(M=2,Y=(J=T[s])[0],m=J[1];M+1<J.length;){if(E=J[M],Z=J[M+1],D1(B,G,H,f,Y,m,E,Z,!0)){A=n2(R=[E-Y,Z-m]),R[0]/=A,R[1]/=A,A=Ss(F,R),g=[R[0]*(A=0<A?v:-v),R[1]*A];break}Y=E,m=Z,M+=2}if(g)break}if(g)for(H=B+g[0],f=G+g[1],s=0;s<W;s++)for(M=2,Y=(J=T[s])[0],m=J[1];M+1<J.length;){if(E=J[M],Z=J[M+1],D1(B,G,H,f,Y,m,E,Z,!0))return[0,0];Y=E,m=Z,M+=2}return g||[H-B,f-G]},Wx=function(T){return"nearest"===T?9728:"linear"===T?9729:T},sx=L.graph3d={WebGLConstants:tE},v=function(T,B,G){Es("ht.graph3d."+T,B,G)},Sx="~!<yfusfw!+!yjsubNudfkpsQv!>!opjujtpQ`mh!\v?zepc/tw/qbNxpmg=!fevmdoj$\v!\v?zepc/tw/qbNxpebit=!fevmdoj$\v!\vgjeof$\v!~!<fdobutjEfojMb!>!fdobutjEfojMw!|!*itbEv)!gj!\vITBE!gfegj$\v!\vgjeof$\v!~!<ttfouihjsCidubCb!>!ttfouihjsCidubCw!|!*ttfouihjsCidubCv)!gj!\vTTFOUIHJSCIDUBC!gfegj$\v!\vgjeof$\v!~!<eofmCidubCb!>!eofmCidubCw!|!*eofmCidubCv)!gj!\vEOFMCIDUBC!gfegj$\v!\vgjeof$\v!~!<spmpDidubCb!>!spmpDidubCw!|!*spmpDidubCv)!gj!\vSPMPDIDUBC!gfegj$\v!\vgjeof$\v!~!<**1/2!-wVb)4dfw!+!yjsubNwVv)3dfw!>!wVw!|!*fsvuyfUv)!gj!\vftmf$\v!<*y/wVb!-**1/2!-wVb)4dfw!+!yjsubNwVv)3dfw)4dfw!>!wVw!\vQJMD`WV!gfegj$\v!<*efnspgtobsu!+!yjsubNmfepNv)4dfw!>!opjujtpQemspXw!<*yfusfw)4dfw!>!opjujtpQwNw!\vgjeof$\v!<**1/2!-mbnspOudfkcp)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!\vftmf$\v!<**1/2!-mbnspOudfkcp)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!ftmf!~!<**1/2!-mbnspOw!+!n)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!<**^3]n!-^3]n)upe!-*^2]n!-^2]n)upe!-*^1]n!-^1]n)upe)4dfw!0!mbnspOudfkcp!>!mbnspOw!<*!efdobutoJyjsubNb!)4ubn!>!n!4ubn!|!*fdobutoJftVv)!gj!\vFDOBUTOJIDUBC!gfegj$\v!<efnspgtobsu!+!yjsubNxfjWmfepNv!>!yfusfw!5dfw!\vgjeof$\v!~!<efnspgtobsu!+!efdobutoJyjsubNb!>!efnspgtobsu!|!*fdobutoJftVv)!gj!\vFDOBUTOJIDUBC!gfegj$\v!<*mbnspOb)4dfw!>!mbnspOudfkcp!4dfw!<*opjujtpQb)4dfw!>!opjujtpQmbdpMw!<*1/2!-opjujtpQb)5dfw!>!efnspgtobsu!5dfw!|!*)ojbn!ejpw!\v?ebfi/tw/qbNxpmg=!fevmdoj$\v!\v?ebfi/tw/qbNxpebit=!fevmdoj$\v!\vgjeof$\v!<fdobutjEfojMw!ubpmg!hojzsbw!<fdobutjEfojMb!ubpmg!fuvcjsuub!<itbEv!mppc!nspgjov!\vITBE!gfegj$\v!\vgjeof$\v!<^TUIHJM`UPQT`NVO]opjudfsjEupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]opjujtpQupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]spmpDupqTv!5dfw!nspgjov!\v1!?!TUIHJM`UPQT`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`UOJPQ`NVO]opjujtpQuojpQv!4dfw!nspgjov!<^TUIHJM`UOJPQ`NVO]spmpDuojpQv!5dfw!nspgjov!\v1!?!TUIHJM`UOJPQ`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`SJE`NVO]opjudfsjEsjEv!4dfw!nspgjov!<^TUIHJM`SJE`NVO]spmpDsjEv!5dfw!nspgjov!\v1!?!TUIHJM`SJE`NVO!gj$\v!<opjujtpQmbdpMw!4dfw!hojzsbw!<opjujtpQemspXw!4dfw!hojzsbw!<opjujtpQwNw!4dfw!hojzsbw!<mbnspOw!4dfw!hojzsbw!<yjGv!mppc!nspgjov!\vgjeof$\v!\v?ebfi/tw/hojdobutoj=!fevmdoj$\v!\vHOJDOBUTOJ`FTV!fojgfe$\v!<fdobutoJftVv!mppc!nspgjov!\vFDOBUTOJIDUBC!gfegj$\v!\vgjeof$\v!<wVw!3dfw!hojzsbw!\vftmf$\v!<wVw!4dfw!hojzsbw!\vQJMD`WV!gfegj$\v!\vgjeof$\v!<eofmCidubCw!4dfw!hojzsbw!<eofmCidubCb!4dfw!fuvcjsuub!<eofmCidubCv!mppc!nspgjov!\vEOFMCIDUBC!gfegj$\v!\vgjeof$\v!<ttfouihjsCidubCw!ubpmg!hojzsbw!<ttfouihjsCidubCb!ubpmg!fuvcjsuub!<ttfouihjsCidubCv!mppc!nspgjov!\vTTFOUIHJSCIDUBC!gfegj$\v!\vgjeof$\v!<spmpDidubCw!5dfw!hojzsbw!<spmpDidubCb!5dfw!fuvcjsuub!<spmpDidubCv!mppc!nspgjov!\vSPMPDIDUBC!gfegj$\v!<wVb!3dfw!fuvcjsuub!<opjujtpQb!4dfw!fuvcjsuub!<mbnspOb!4dfw!fuvcjsuub!<yjsubNmbnspOv!5ubn!nspgjov!<yjsubNxfjWmfepNv!5ubn!nspgjov!<yjsubNmfepNv!5ubn!nspgjov!<yjsubNxfjWv!5ubn!nspgjov!<yjsubNudfkpsQv!5ubn!nspgjov!<yjsubNwVv!4ubn!nspgjov!<fsvuyfUeofmCv!mppc!nspgjov!<fsvuyfUv!mppc!nspgjov!\vYJGFSQ$!00^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",yx=(S1(vt,{setBatchInfo:function(T,B){qw[T]=B},getBatchInfo:function(T){return qw[T]},getBatchInfoMap:function(){return qw},setBatchInfoMap:function(T){qw=T}},!0),[1,1,1]),xx=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],wx=[1,0,0,0,0,1,0,1,1,1,1,0],Ox=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],_x=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],px=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],qx=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],ux=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],ix=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],Ix=function(T,B){T._40Q.each(function(T){T.ivBatch(B)})},Dx=function(T,B,G,H){var f=B[G=G._id];if(f){var v=(s=T[Y=f.batch]).ds,J=f.index;if(s.invalidate=!0,delete B[G],v.splice(J,1),p1(v))return!1!==(G=H.getBatchInfo(Y)||Qw).keepData&&s.ms&&s.ms.length&&G.instanced&&!H.isBatchInstancedDisabled()?(s.ms=[],s.ics&&(s.ics=[]),void(s.ps&&(s.ps=[]))):void delete T[Y];for(var G=J,H=f.begin,M=f.size;J<v.length;J++)(f=B[v[J]._id]).index--,f.begin-=M;if(s.ms&&s.ms.length)return s.ms.splice(16*G,16),s.ics&&s.ics.splice(4*G,4),void(s.ps&&(s.ps.splice(4*G,4),s.ps._invalidateThisFrame=!0));var T=3*H,Y=3*M,G=4*H,m=4*M,E=s.vs,Z=s.ps,R=s.uv,A=s.cs,g=s.bs,F=s.rs,W=s.ns,s=s.ls;E.splice(T,Y),Z.splice(G,m),Z._invalidateThisFrame=!0,R&&R.splice(2*H,2*M),A&&A.splice(G,m),g&&g.splice(T,Y),F&&F.splice(H,M),W&&W.splice(T,Y),s&&s.splice(H,M)}},hx=function(T,B,G,H,f){if(!H)return ft;var v,J,M=B[H];return M||(J=(v=f.getBatchInfo(H)||Qw).image||v.material?[]:ft,f=v.instanced&&!f.isBatchInstancedDisabled(),M=B[H]={vs:[],ns:[],uv:J,cs:J||v.color?ft:[],bs:v.blend?[]:ft,ps:[],rs:v.brightness?[]:ft,ds:[],ms:f?[]:ft,ics:J||v.color||!f?ft:[]}),M.invalidate=!0,T[G._id]={index:M.ds.length,begin:M.vs.length/3,batch:H},M.ds.push(G),M},ox=function(T,B){return B!=ft&&1!==B?[T[0]*B,T[1]*B,T[2]*B,T[3]]:T},ex=function(T){T&&(T._ctlineModel=[],T._lineModel=Ht)},cx=function(T,B,G){var w=T.getData3dUI(B);if((M=(M=w.shapeModel)||oo(w))||!w.shapeName){var H,f=B.s("wf.combineTriangle");if(G.geometry){if(!M&&!(M=B instanceof L.Node&&!(B instanceof L.Shape)?o8=o8||{vs:Mo,is:Yo,uv:mo}:[w.left,w.front,w.right,w.back,w.top,w.bottom]))return Ht;if(!(H=f?(H=B.s("wf.normEpsilon"),isNaN(H)&&(H=2),f=0|Math.min(3,Math.max(1,isNaN(f)?1:f)),MW[f-1](M,w,180/(Math.PI*H))):function(T){var B,G,H,f,v;if(E=T._lineModel)return E;for(var J,M,Y,m=["","top_","bottom_"],E=[],Z=[],R=(Zx(T,w,Z),l.requestVector3()),A=l.requestVector3(),g=l.requestVector3(),F=0,W=Z.length;F<W;F++)if((f=Z[F])&&(v=f.mesh))for(B=0,G=m.length;B<G;B++)if(H=v[m[B]+"vs"])for(var s=v[m[B]+"is"],S=f.matrix,y=s?s.length:H.length/3,x=0;x<y;x+=3)Y=s?(J=s[x],M=s[x+1],s[x+2]):(M=(J=x)+1,x+2),J*=3,M*=3,Y*=3,S?(R.fromArray(H,J).applyMatrix4(S),A.fromArray(H,M).applyMatrix4(S),g.fromArray(H,Y).applyMatrix4(S),E.push(R.x,R.y,R.z,A.x,A.y,A.z,A.x,A.y,A.z,g.x,g.y,g.z,g.x,g.y,g.z,R.x,R.y,R.z)):E.push(H[J],H[J+1],H[J+2],H[M],H[M+1],H[M+2],H[M],H[M+1],H[M+2],H[Y],H[1+Y],H[2+Y],H[Y],H[1+Y],H[2+Y],H[J],H[J+1],H[J+2]);return l.releaseVector3(R),l.releaseVector3(A),l.releaseVector3(g),T._lineModel=E}(M))||0===H.length)return}else H=G.short?Ao:Ro,B.s("wf.boundingBox")&&(f=w.getBoundingBox(!0))&&(M=(new K).scale(f.max.clone().sub(f.min)).setPosition(f.max.clone().add(f.min).divideScalar(2)).toArray(),H=aE([],M,H));var v,J,f=T.getBrightness(B),M=B.s("bloom"),Y=B.s("3d.reflectable"),m=U0(G.color||"white"),E=m[3]<1,Z=Math.ceil(G.width)||1,R=B.s("3d.clipbox")?rE:B.s("3d.clipbox.mask"),A=B.s("wf.fog"),g=B.s("wf.group"),F=B.getRenderLayer(),T=T._40Q.get(F),F=B.s("wf.material"),W=T.wireframeIndexMap,T=T.wireframeModelMap,s=B.s("batch"),S=B.s("3d.clip.direction");if(F||S){if(S){if(0===(J=B.s("3d.clip.percentage")))return;J=w._formatClipUniforms(S,J,B)}v="_"+B._id}else v=s?(E?"T":"O")+g+"_"+s:(E?"T":"O")+g+(M?"_1":"_0")+(Y?"1_":"0_")+R+"_"+Z+(A?"1_":"0_");S=(S=T[v])||(T[v]={vs:[],cs:[],ps:[],ds:[],T:E,B:M,clipboxMask:R,reflectable:!!Y,W:Z,batch:s,fog:A}),F&&(S.material=F),S.invalidate=!0,g=S.vs,T=S.cs,E=S.ds,M=W[B._id]={index:E.length,begin:g.length/3,batch:v},E.push(B),R=w.mat,G.geometry&&B instanceof L.Shape&&(vt.extractShapeTranslation||vt.extractPolylineTranslation||vt.extractVerticesTranslation)&&(Y=w._vsTranslation)&&R&&(R=(new l.Matrix4).fromArray(R).multiply(Y).toArray()),B instanceof L.Edge||!(!R||!G.geometry&&B instanceof L.Shape)||(R=hs(B,G.mat),B.appendAnchorMatrix3d(R)),J?(S.mat=ws(R),S.clipDirection=J[0],S.clipPercent=J[1],aE(g,null,H)):aE(g,R,H),Z=M.size=g.length/3-M.begin,CE(T,ox(m,f),Z)}},tx=function(T,B,G,H){if(B){var f=(G=G[B.batch]).ps,v=(G=G.ms&&G.ms.length)?4*B.index:4*B.begin,J=G?1:B.size;if(f[v]!==T[0]||f[v+1]!==T[1]||f[v+2]!==T[2]||f[v+3]!==T[3]){for(var M=0;M<J;M++)f[v++]=T[0],f[v++]=T[1],f[v++]=T[2],f[v++]=T[3];f._invalidateThisFrame=!0}}},dx=(D8=new L.Math.Vector3,h8=new L.Math.Vector3,function(T,B){var G=B+["32"],H=T[B],f=T[G];if(H){if(vt.extractBatchTranslation||vt.extractVerticesTranslation)if("vs"!==B||T.ms&&T.ms.length){if("ms"===B&&T.ms&&T.ms.length){for(h8.set(0,0,0),J=H.length,M=12;M<J;M+=16)h8.add(D8.fromArray(H,M));for(h8.divideScalar(J/16),Y=h8.x,m=h8.y,E=h8.z,Z=new Array(J),M=0;M<J;M+=16){for(var v=0;v<12;v++)Z[M+v]=H[M+v];Z[M+12]=H[M+12]-Y,Z[M+13]=H[M+13]-m,Z[M+14]=H[M+14]-E,Z[M+15]=H[M+15]}H=Z,T.translate=[Y,m,E]}}else{h8.set(0,0,0);for(var J=H.length,M=0;M<J;M+=3)h8.add(D8.fromArray(H,M));h8.divideScalar(J/3);for(var Y=h8.x,m=h8.y,E=h8.z,Z=new Array(J),M=0;M<J;M+=3)Z[M]=H[M]-Y,Z[M+1]=H[M+1]-m,Z[M+2]=H[M+2]-E;H=Z,T.translate=[Y,m,E]}f&&f.length===H.length?(f.set(H),f._bufId=null):T[G]=new Fs(H)}else delete T[G]}),Nx=function(T,B,G,H,f,v,J,M){var Y,m,E=B instanceof L.Shape,Z=v[0],R=v.length;if(1<R)for(var Z=ws(Z),A=1;A<R;A++)Z$(Z,Z,v[A]);E&&(Y=B.p3(),m$(Z,Y)),W1(J.ms,Z),J.ics&&CE(J.ics,B.s("shape3d.color")||g,1),J.vs.length||(m=ws(xx),E&&m$(m,ss(Y)),Qx(T,B,G,H,f,[m],J,M))},Qx=function(B,G,T,H,f,v,J,M){if(m1(T))T.forEach(function(T){Qx(B,G,T,H,f,v,J,M)});else if(Et(T))Qx(B,G,oo(H,T),H,f,v,J,M);else if(M1(T)){var Y,m=n(T.mat,G,B),E=n(T.s3,G,B),Z=n(T.t3,G,B),R=n(T.r3,G,B);if((E||R||Z||m)&&(Y=os(m,E,R,n(T.rotationMode,G,B),Z),v.push(Y)),T.shape3d)Qx(B,G,T.shape3d,H,f,v,J,T);else{var m=H.s,A=(M=M||Qw,v[0]),g=v.length,E=m("shape3d.color",T.color,M.color);if(f=f||m("shape3d.blend",T.blend,M.blend),1<g)for(var A=ws(A),F=1;F<g;F++)Z$(A,A,v[F]);R=A?k$(A):ft,T.vs&&m(hB,T.visible,M.visible)&&Lx(A,J,T.vs,T.uv,T.is,T.ns,R,f,E),T.top_vs&&m(cB,T.topVisible,M.topVisible)&&Lx(A,J,T.top_vs,T.top_uv,T.top_is,T.top_ns,R,f,m("shape3d.top.color",T.topColor,M.topColor)||E),T.bottom_vs&&m(tB,T.bottomVisible,M.bottomVisible)&&Lx(A,J,T.bottom_vs,T.bottom_uv,T.bottom_is,T.bottom_ns,R,f,m("shape3d.bottom.color",T.bottomColor,M.bottomColor)||E),T.from_vs&&m(oB,T.fromVisible,M.fromVisible)&&Lx(A,J,T.from_vs,T.from_uv,T.from_is,T.from_ns,R,f,m("shape3d.from.color",T.fromColor,M.fromColor)||E),T.to_vs&&m(eB,T.toVisible,M.toVisible)&&Lx(A,J,T.to_vs,T.to_uv,T.to_is,T.to_ns,R,f,m("shape3d.to.color",T.toColor,M.toColor)||E)}Y&&v.pop()}},Lx=function(G,T,H,f,B,v,J,M,Y){var m,E=T.cs,Z=T.uv,R=T.bs,A=T.ns,g=T.vs,T=(v&&0!==v.length||(v=x$(H,B)),K.determinantOfArray(G)<0);B||T?(m=B?B.length:H.length/3,qs(B||m,T,function(T){var B=3*T;aE(g,G,[H[B],H[1+B],H[2+B]]),aE(A,J,[v[B],v[1+B],v[2+B]]),Z&&W1(Z,[f[2*T],f[2*T+1]])})):(m=H.length/3,aE(g,G,H),aE(A,J,v),Z&&W1(Z,f)),E&&CE(E,Y,m),R&&(M?kE(R,M,m):W1(R,yx,m))},jx=function(T,B,G){var H=T.data.p3();B=ws(B),m$(B,H),W1(G.ms,B),G.ics&&CE(G.ics,T.data.s("shape3d.color")||g,1),G.vs.length||(B=ws(xx),m$(B,ss(H)),rx(T,B,G))},rx=function(T,B,G){bx(T,Te,B,G),bx(T,Be,B,G),bx(T,Ct,B,G),bx(T,at,B,G),bx(T,Ge,B,G),bx(T,He,B,G),bx(T,"csg",B,G)},Xx=function(T,B,G,H,f,v){W1(G.ms,f),G.ics&&CE(G.ics,B.s("all.color")||g,1),G.vs.length||Ux(T,B,G,H,ws(xx),v)},Ux=function(T,B,G,H,f,v){Kx(T,B,G,H,f,v,Te,Ox),Kx(T,B,G,H,f,v,Be,_x),Kx(T,B,G,H,f,v,Ge,px),Kx(T,B,G,H,f,v,He,qx),Kx(T,B,G,H,f,v,Ct,ux),Kx(T,B,G,H,f,v,at,ix)},lx=function(T,B,G,H,f){H?f.instanced?T.gv.batchInstancedModel(T.data,H,T,T.getBodyColor(),[B],G):Qx(T.gv,T.data,H,T,T.getBodyColor(),[B],G):f.instanced?T.gv.batchInstancedShapeFace(T,B,G):rx(T,B,G)},bx=function(T,B,G,H){if(T=T[B]){var f=T.tuv;if(f){var B=T.uvScale,v=T.uvOffset,J=T.uvRotation,M=T.uvAnchor;if(B||v||J)for(var Y,m,E=(J=Rx(J,v,B,M)).a,Z=J.b,R=J.c,A=J.d,g=J.tx,F=J.ty,W=f.length,s=0;s<W;s+=2)Y=f[s],m=f[s+1],f[s]=E*Y+R*m+g,f[s+1]=Z*Y+A*m+F}Lx(G,H,T.vs,f,ft,ft,G?k$(G):ft,T.blend,T.color)}},Kx=function(T,B,G,H,f,v,J,M){var Y,m,E,Z,R,A,g,F,W,s,S,y,x,w,O,_=G.cs,p=G.uv,q=G.bs,u=G.vs,i=G.ns,I=x$(M);T.getFaceVisible(B,J)&&((G=T.getFaceMat(B,J))&&(f=hs(B,G),v=k$(f)),K.determinantOfArray(f)<0?(G=M.length/3,qs(G,!0,function(T){aE(u,f,[M[T*=3],M[1+T],M[2+T]]),aE(i,v,[I[T],I[1+T],I[2+T]])})):(aE(u,f,M),aE(i,v,I)),_&&CE(_,T.getFaceColor(B,J),6),p&&(G=T.getFaceUv(B,J)||H[J+"Uv"],_=T.getFaceUvScale(B,J)||H[J+"UvScale"],Y=T.getFaceUvOffset(B,J)||H[J+"UvOffset"],Z=T.getFaceUvRotation(B,J)||H[J+"UvRotation"],H=T.getFaceUvAnchor(B,J)||H[J+"UvAnchor"],R=(G=G?[G[6],G[7],G[0],G[1],G[2],G[3],G[2],G[3],G[4],G[5],G[6],G[7]]:wx)[0],A=G[1],g=G[2],F=G[3],W=G[4],s=G[5],S=G[6],y=G[7],x=G[8],w=G[9],O=G[10],G=G[11],(_||Y||Z||H)&&(Y=(Z=Rx(Z,Y,_,H)).a,_=Z.b,H=Z.c,m=Z.d,A=_*(R=Y*R+H*A+(E=Z.tx))+m*A+(Z=Z.ty),F=_*(g=Y*g+H*F+E)+m*F+Z,s=_*(W=Y*W+H*s+E)+m*s+Z,y=_*(S=Y*S+H*y+E)+m*y+Z,w=_*(x=Y*x+H*w+E)+m*w+Z,G=_*(O=Y*O+H*G+E)+m*G+Z),p.push(R,A,g,F,W,s,S,y,x,w,O,G)),q&&((_=T.getBodyColor(B)||T.getFaceBlend(B,J))?kE(q,_,6):W1(q,yx,6)))},zx=function(T,B,G,H){var f,v,J,M,G=T._picking?T.pickColorMap:null,Y=T.getGL(),m=T._buffer;if(!_1(B)){for(M in C$(T,xx),e$(Y),B){var E,Z,R,A,g,F,W,s,S,y=B[M],x=(A=y.batch?(E=(A=T.getBatchInfo(y.batch)||Qw).wfBloom===Ht?A.bloom:A.wfBloom,Z=A.wfReflectable===Ht?A.reflectable:A.wfReflectable,R=A.wfClipboxMask===Ht?A.clipboxMask:A.wfClipboxMask,A.width):(E=y.B,Z=y.reflectable,R=y.clipboxMask,y.W),!G&&y.material);!x&&(H&&!y.T||!H&&y.T||T.isReflecting(Y)&&!1===Z)||(W=G&&!T.drawFilter,y.invalidate?(y.invalidate=!1,dx(y,"vs"),dx(y,"cs"),dx(y,"ls"),W&&dx(y,"ps")):W&&y.ps&&y.ps._invalidateThisFrame&&(y.ps._invalidateThisFrame=!1,dx(y,"ps")),W=y.translate,f=y.clipDirection,x?("lines"!==(g=(x=y.material).renderMode)?x.renderMode="lines":g=null,T._prefabRenderer.render(Y,{position:W,mesh:{vs:y.vs32,aLineDistance:y.ls32,aBatchColor:y.cs32,_complete_:!0},mat:x},y),g&&(x.renderMode=g)):(W||f?(v=f?ws(y.mat):[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],W&&m$(v,W),J=ws(T._6O),C$(T,v)):v=null,x=y.vs32,g=G?y.ps32:y.cs32,j$(Y,A,ft,m.vs,x),F=(W=At.for(Y)).directUniforms(),W=W.directAttribs(),S=y.D,s=!T._dashDisabled&&S,F.uAlphaTest=Ft.alphaTest,Y._blooming&&!E&&(F.blackout=!0),f&&(F.uClipPercent=y.clipPercent,F.uClipDirection=f),o$(T,F,R===Ht?jE:R),s&&(F.uDash=!0,F.uDashDistance=S,F.uDashGapDistance=y.G,F.uDiffuse=y.A||Ft["color.empty"],W.aLineDistance=K$(Y,m.lineDistance,y.ls32,ft,1)),(S=!T._batchColorDisabled)&&g&&g.length?(F.uBatchColor=!0,W.aBatchColor=K$(Y,m.batchColor,g,ft,4)):(F.uBatchColor=!1,W.aBatchColor=!1),(y=!1!==y.fog)||(F.uFog=!1),N$(Y),X$(Y,0,x.length/3,1),Q$(Y),y||(F.uFog=!0),S&&(F.uBatchColor=!1,W.aBatchColor=!1),s&&(F.uDash=!1,W.aLineDistance=!1),Y._blooming&&!E&&(F.blackout=!1),v&&(f&&(F.uClipDirection=0),P$(T,J),F.uModelMatrix=xs)))}c$(Y),P$(T)}},nx=function(T,B){T.invalidate=!1,dx(T,"vs"),dx(T,"ns"),dx(T,"cs"),dx(T,"rs"),B&&dx(T,"ps"),dx(T,"bs"),dx(T,"uv"),dx(T,"ms"),dx(T,"ics")},$x=function(T,B,N,G,H,f){var v,J,M,Y,m,E,Z,G=T._picking?T.pickColorMap:null,R=T.getGL(),A=At.for(R),g=A.directUniforms(),F=A.directAttribs(),W=T._buffer;if(!_1(B)){var s,S,y,x=T._flowObjects.length?T.flowMap:null,w=T.drawFilter;for(v in C$(T,xx),B)if(!1!==(J=T.getBatchInfo(v)||Qw).visible)if((D=!G&&J.material)||!(H&&!J.transparent||!H&&J.transparent||T.isReflecting(R)&&!1===J.reflectable)){var O=J.renderLayerMask;if(EJ(f=f==ft?MJ:f,O=O==ft?MJ:O)&&(O=B[v],G||!J.transparentMask)){if(S=!1,w){if(!1===J.highlight)continue;if(s=O.ds){for(var _=0,p=s.length;_<p;_++)if(!w(s[_])){S=!0;break}if(!S)continue}}var q,u=H&&!0===J.autoSort&&(T._33Q||O.invalidate)&&!S,i=G&&!S,I=(O.invalidate?nx(O,i):i&&O.ps&&O.ps._invalidateThisFrame&&(O.ps._invalidateThisFrame=!1,dx(O,"ps")),O.ms32);if(I){if(!I.length)continue;y=!0}else y=!1;if(i=O.vs32,M=G?O.ps32:y?O.ics32:O.cs32,m=O.uv32,e=O.bs32,Y=O.rs32,Z=i.length/3,u&&((q=Px(i,T.getEye(),T,I))?(O.is=q.is,O.elementTypeUint=q.useUint32):(O.is=null,O.elementTypeUint=null)),Z){if((q=J.polygonOffset)&&u$(R,q),D&&!S){var D={vs:i,uv:m,ns:O.ns32,is:O.is,_complete_:!0},D={position:O.translate,mesh:D,mat:J.material};y&&(D.instances={aMatrixInstanced:O.ms32}),T._prefabRenderer.render(R,D,J)}else{(D=O.translate)&&C$(T,[1,0,0,0,0,1,0,0,0,0,1,0,D[0],D[1],D[2],1]),J.light,E=T.getTexture(J.image),t$(R,ft,J.light,J.opacity,J.reverseFlip,J.reverseColor,J.reverseCull),M?T._batchColorDisabled?(g.uBatchColor=!1,F.aBatchColor=!1):(g.uBatchColor=!0,F.aBatchColor=S?[0,1,1,1]:y?b$(R,W.instancedBatchColor,M,ft,4):K$(R,W.batchColor,M,ft,4)):(g.uBatchColor=!1,g.uDiffuse=J.color||Ft["color.empty"]);var h,o=J.alphaTest;g.uAlphaTest=o===Ht?Ft.alphaTest:o,g.shadowReceive=!G&&!1!==J.shadowReceive,o$(T,g,J.clipboxMask===Ht?jE:J.clipboxMask),G$(T,g,J.lightMask===Ht?jE:J.lightMask,J.headlightAmbientIntensity),x&&x.resetFlowUniform(J.effectFlowMask===Ht?jE:J.effectFlowMask,g),R._blooming&&!J.bloom&&(g.blackout=!0),J.envmap!==Ht?(g.uUseEnvMap=!0,g.roughness=J.roughness||0,T._setEnvmapByProbeId(g,J.envmapProbe||0,J.envmap)):(g.uUseEnvMap=!1,g.envMapIntensity=0);(o=e&&!T._batchBlendDisabled)&&(g.uBatchBlend=!0,F.aBatchBlend=K$(R,W.batchBlend,e,ft));var e=Y&&!T._batchBrightnessDisabled;if(e&&(g.uBatchBrightness=!0,F.aBatchBrightness=K$(R,W.batchBrightness,Y,ft,1)),m?N$(R,E,J.discardSelectable,W.uv,m,J.uvOffset,J.uvScale,J.uvRotation,J.uvAnchor):N$(R),F.aPosition=K$(R,W.vs,i,ft),F.aNormal=K$(R,W.ns,O.ns32,ft),y&&(g.uUseInstance=!0),S){for(y&&!(h=T._highlightInstancedFloatArray)&&(h=T._highlightInstancedFloatArray=new Fs(16)),_=0,p=s.length;_<p;_++)if(!w(s[_])){var c=N[s[_]._id];if(y){for(var t=0;t<16;t++)h[t]=I[16*c.index+t];d=b$(R,W.ms,h,ft),R.bufferSubData(34962,0,h),F.aMatrixInstanced=d,X$(R,0,Z,null,1)}else{var d=c.begin,Q=c.size;X$(R,d,Q)}}}else y&&(u&&(I=Vx(I,T.getEye())),F.aMatrixInstanced=b$(R,W.ms,I,ft)),O.is?(z$(R,W.is,O.is),U$(R,0,Z,null,O.elementTypeUint?5125:null,y?O.ms32.length/16:0)):X$(R,0,Z,null,y?O.ms32.length/16:0);m?Q$(R,E):Q$(R),M&&!T._batchColorDisabled&&(g.uBatchColor=!1,F.aBatchColor=!1),o&&(g.uBatchBlend=!1,F.aBatchBlend=!1),e&&(g.uBatchBrightness=!1,F.aBatchBrightness=!1),R._blooming&&!J.bloom&&(g.blackout=!1),y&&(g.uUseInstance=!1,F.aMatrixInstanced=Ht),d$(R),D&&(P$(T),g.uModelMatrix=xs)}q&&i$(R)}}}P$(T)}},Vx=function(G,H){for(var T,B,f,v=G.length/16,J=new Array(v),M=0;M<v;M++)J[M]=M;J.sort(function(T,B){return T=[G[16*T+12],G[16*T+13],G[16*T+14]],B=[G[16*B+12],G[16*B+13],G[16*B+14]],n2(H,B)-n2(H,T)});var Y=G._sortedByEye;for(Y&&Y.length===G.length||(Y=G._sortedByEye=new Fs(16*v)),M=0;M<v;M++)for(B=16*M,f=16*J[M],T=0;T<16;T++)Y[B+T]=G[f+T];return Y._bufId=null,Y},Px=function(H,f,T,B){var G=H.length/3,v=65535<G;if(!(T=T._glCapabilities.elementTypeUint&&v)&&v)return null;B&&B.length&&((v=l.requestMatrix4()).fromArray(B).invert(),f=X9(f).applyMatrix4(v).toArray(),l.releaseMatrix4(v));for(var J=new Array(G),M=G/3,Y=new Array(M),m=0;m<M;m++)Y[m]=m;for(Y.sort(function(T,B){var G=[(H[T=9*T]+H[3+T]+2*H[6+T])/4,(H[1+T]+H[4+T]+2*H[7+T])/4,(H[2+T]+H[5+T]+2*H[8+T])/4],B=[(H[T=9*B]+H[3+T]+2*H[6+T])/4,(H[1+T]+H[4+T]+2*H[7+T])/4,(H[2+T]+H[5+T]+2*H[8+T])/4];return 0<(T=n2(f,G)-n2(f,B))?-1:T<0?1:0}),m=0;m<M;m++){var E=3*m,Z=3*Y[m];J[E]=Z,J[1+E]=1+Z,J[2+E]=2+Z}return{useUint32:T,is:new(T?Uint32Array:As)(J)}},kx={obj:function(v,J){var T={mat:v.mat,model3d:v.model3d,matDef:v.matDef,s3:v.s3,r3:v.r3,rotationMode:v.rotationMode,t3:v.t3,cube:v.cube==ft||v.cube,center:v.center==ft||v.center,ignoreMtls:v.ignoreMtls,ignoreTransparent:v.ignoreTransparent,ignoreColor:v.ignoreColor,ignoreImage:v.ignoreImage,ignoreNormal:v.ignoreNormal,prefix:v.prefix,flipY:v.flipY,flipFace:v.flipFace,reverseFlipMtls:v.reverseFlipMtls,finishFunc:function(T,B,G){if(T){if(T.model3d)return T.json=v,void J(T);var H,B=[];for(H in T){var f=T[H];B.rawS3=f.rawS3,f.center&&(B.center=f.center),B.push(f),v.eachModel&&v.eachModel(H,f)}B.json=v,J(B)}else J()}};vt.loadObj(v.obj,v.mtl,T)},bin:function(T,H){vt.loadBin(T.url,{finishFunc:function(T,B,G){T?H(T):H()}})},fbx:function(G,H){var T={matDef:G.matDef,flipY:G.flipY,cube:G.cube,center:G.center,shape3d:G.shape3d,playAutomatically:G.playAutomatically,animations:!1!==G.animations,rotationInterpolation:G.rotationInterpolation,finishFunc:function(B){var T;B?(T=(B.json=G).animationSources)&&T.length?vt.asyncEach(T,function(T,G){Bo(T,T,function(T,B){I2(function(){G(null,B)})})},function(T){H(vt.completeFbxAnimation(G.url,B,G.animations,T))}):H(vt.completeFbxAnimation(G.url,B,G.animations)):H()}};vt.loadFbx(G.url,T)},gltf:function(B,G){var T={matDef:B.matDef,flipY:B.flipY,cube:B.cube,center:B.center,shape3d:B.shape3d,path:B.path,playAutomatically:B.playAutomatically,finishFunc:function(T){T?(T.json=B,G(T)):G()}};vt.loadGltf(B.url,T)}},Cx=(vt.getModelTypeHandlers=function(){return kx},vt.setModelTypeHandler=function(T,B){kx[T]=B},vt.getModelTypeHandler=function(T){return kx[T]},vt.handleModelLoaded=function(T,B){},vt.handleUnfoundModel=function(T,B,G){},ft),ax=ft,To=function(T){Cx&&!T._loadingModelView_&&((ax=ax||{})[T._loadingModelView_=i2()]=T)},Bo=function(G,H,f){var v,T=(Cx=Cx||{})[G];if(T){if(T.url===H)return;T.request.onload=jw,T.request.onerror=jw}return H.indexOf(".bin")===H.length-4?Go(G,{modelType:"bin",url:H},H,f):H.indexOf(".fbx")===H.length-4?Go(G,{modelType:"fbx",url:H},H,f):H.indexOf(".gltf")===H.length-5||H.indexOf(".glb")===H.length-4?Go(G,{modelType:"gltf",url:H},H,f):void((H=vt.beforeLoadURL(H)).data?(T=vt.parse(H.data),Go(G,T,H,f)):(v=new Ga,Cx[G]={request:v,url:H},v.onload=function(T){var B;200===this.status||0===this.status?(delete Cx[G],B=vt.parse(v.getResponseText()),Go(G,B,H,f)):Ho(G,vt.handleUnfoundModel(G,H)||ft,f)},v.onerror=function(T){Ho(G,vt.handleUnfoundModel(G,H)||ft,f)},(T={}).url=encodeURI(H),T.sync=!1,v.send(T)))},Go=function(B,G,H,f){var T=G.modelType;if(!T)return Ho(B,G,f),void vt.handleModelLoaded(B,G);(T=vt.getModelTypeHandler(T))?(Cx=Cx||{})[B]||(Cx[B]=!0,T(G,function(T){T?(Ho(B,T,f),vt.handleModelLoaded(B,T)):Ho(B,vt.handleUnfoundModel(B,H,G)||ft,f)})):Ho(B,vt.handleUnfoundModel(B,H,G)||ft,f)},Ho=function(T,B,G){if(delete Cx[T],Et(B)&&tw.test(B))Bo(T,B,G);else{if(uw[T]=B,G&&G(T,B),_1(Cx)&&(Cx=ft,ax)){for(var H in ax)(f=ax[H]).invalidateAll&&f.invalidateAll(Ht,"modelLoaded",T),f.redraw&&f.redraw(),f.iv(),delete f._loadingModelView_;ax=ft}if(B&&ax)for(var H in ax){var f;(f=ax[H]).invalidateAll&&f.invalidateAll(Ht,"modelLoading",T),f.redraw&&f.redraw(),f.iv()}}},fo=new Fs([0,0,0,1,1,1,1,0]),vo=new Fs([0,0,1,0,0,1,0,0,1,0,0,1]),Jo=new As([0,1,2,2,3,0]),Mo=new Fs([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),Yo=new As([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),mo=new Fs([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),Eo=x$(Mo,Yo),Zo=(new Fs([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new As([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[Te,Ct,Be,at,Ge,He]),Ro=[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5],Ao=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],go=function(T,B,G,H,f,v,J){T=T||16,B=B||0,G=G||T;var M,Y,m,E,Z,R,A=[],g=[],F=mt/T,W=o/(v=v||16);for(S=0;S<v;S++)for(Y=S*W,R=(m=S+1)*W,M=B;M<G;M++)O=M*F,Z=(E=M+1)*F,A.push(.5*Yt(Y)*Mt(O),.5*Mt(Y),-.5*Yt(Y)*Yt(O),.5*Yt(R)*Mt(Z),.5*Mt(R),-.5*Yt(R)*Yt(Z),.5*Yt(Y)*Mt(Z),.5*Mt(Y),-.5*Yt(Y)*Yt(Z),.5*Yt(Y)*Mt(O),.5*Mt(Y),-.5*Yt(Y)*Yt(O),.5*Yt(R)*Mt(O),.5*Mt(R),-.5*Yt(R)*Yt(O),.5*Yt(R)*Mt(Z),.5*Mt(R),-.5*Yt(R)*Yt(Z)),g.push(M/T,S/v,E/T,m/v,E/T,S/v,M/T,S/v,M/T,m/v,E/T,m/v);if(J)for(var s=[],S=0,y=A.length;S<y;S+=3)s.push(2*A[S],2*A[S+1],2*A[S+2]);if(H)for(var x=[],w=[],O=B*F,S=0;S<v;S++)Y=S*W,x.push(0,0,0,.5*Yt(R=(m=S+1)*W)*Mt(O),.5*Mt(R),-.5*Yt(R)*Yt(O),.5*Yt(Y)*Mt(O),.5*Mt(Y),-.5*Yt(Y)*Yt(O)),w.push(0,.5,B/T,m/v,B/T,S/v);if(f){var _=[],p=[],O=G*F;for(S=0;S<v;S++)R=(m=S+1)*W,_.push(0,0,0,.5*Yt(Y=S*W)*Mt(O),.5*Mt(Y),-.5*Yt(Y)*Yt(O),.5*Yt(R)*Mt(O),.5*Mt(R),-.5*Yt(R)*Yt(O)),p.push(1,.5,G/T,S/v,G/T,m/v)}return H={vs:A,uv:g,from_vs:x,from_uv:w,to_vs:_,to_uv:p},J&&(H.ns=s),H},Fo=function(T,B,G){(T=T||.17)<0?T=0:.25<T&&(T=.25);for(var H,f,v,J,M,Y=[],m=[],E=[],Z=mt/(G=G||18),R=mt/(B=B||12),A=.5-T,g=0;g<=B;g++)for(J=Mt(f=g*R-o),v=Yt(f),s=0;s<=G;s++)M=A+T*J,Y.push(Mt(H=s*Z)*M,v*T,-Yt(H)*M),m.push(s/G,1-g/B);for(g=0;g<B;g++)for(var F=g*(G+1),W=(g+1)*(G+1),s=0;s<G;s++)E.push(F+s,W+s+1,W+s,F+s,F+s+1,W+s+1);return{vs:Y,uv:m,is:E}},Wo=function(T,B,G,H,f,v,J,M){T=T||18,B=B||0,G=G||T,(v=v||.17)<0?v=0:.25<v&&(v=.25);var Y,m,E,Z,R,A,g,F,W,s=[],S=[],y=mt/T,x=mt/(J=J||12),w=.5-v,O=M?[]:Ht;for(q=0;q<J;q++)for(A=q*x-o,g=(E=q+1)*x-o,Y=B;Y<G;Y++)Z=Y*y,R=(m=Y+1)*y,F=w+v*Mt(A),W=w+v*Mt(g),s.push(Mt(Z)*F,Yt(A)*v,-Yt(Z)*F,Mt(R)*F,Yt(A)*v,-Yt(R)*F,Mt(R)*W,Yt(g)*v,-Yt(R)*W,Mt(Z)*F,Yt(A)*v,-Yt(Z)*F,Mt(R)*W,Yt(g)*v,-Yt(R)*W,Mt(Z)*W,Yt(g)*v,-Yt(Z)*W),S.push(Y/T,1-q/J,m/T,1-q/J,m/T,1-E/J,Y/T,1-q/J,m/T,1-E/J,Y/T,1-E/J),M&&O.push(Mt(Z)*Mt(A),Yt(A),-Yt(Z)*Mt(A),Mt(R)*Mt(A),Yt(A),-Yt(R)*Mt(A),Mt(R)*Mt(g),Yt(g),-Yt(R)*Mt(g),Mt(Z)*Mt(A),Yt(A),-Yt(Z)*Mt(A),Mt(R)*Mt(g),Yt(g),-Yt(R)*Mt(g),Mt(Z)*Mt(g),Yt(g),-Yt(Z)*Mt(g));if(H)for(var _=[],p=[],q=0;q<J;q++)g=(E=q+1)*x-o,Z=B*y,F=w+v*Mt(A=q*x-o),W=w+v*Mt(g),_.push(Mt(Z)*F,Yt(A)*v,-Yt(Z)*F,Mt(Z)*W,Yt(g)*v,-Yt(Z)*W,Mt(Z)*w,0,-Yt(Z)*w),p.push(.5+.5*Mt(A),.5-.5*Yt(A),.5+.5*Mt(g),.5-.5*Yt(g),.5,.5);if(f)for(var u=[],i=[],q=0;q<J;q++)g=(E=q+1)*x-o,Z=G*y,F=w+v*Mt(A=q*x-o),W=w+v*Mt(g),u.push(Mt(Z)*F,Yt(A)*v,-Yt(Z)*F,Mt(Z)*w,0,-Yt(Z)*w,Mt(Z)*W,Yt(g)*v,-Yt(Z)*W),i.push(.5-.5*Mt(A),.5-.5*Yt(A),.5,.5,.5-.5*Mt(g),.5-.5*Yt(g));return H={vs:s,uv:S,from_vs:_,from_uv:p,to_vs:u,to_uv:i},M&&(H.ns=O),H},so=function(T,B){for(var G,H,f,v,J,M=[],Y=[],m=[],E=[],Z=mt/16,R=0;R<=16;R++)v=.5*(H=Mt(G=R*Z)),f=Yt(G),M.push(v,-.5,J=.5*f,v,.5,J),m.push(H,0,f,H,0,f),Y.push(1-R/16,1,1-R/16,0);for(R=0;R<16;R++)E.push(2*R,2*R+1,2*R+3,2*R,2*R+3,2*R+2);if(B){var A=[],g=[],F=[];for(A.push(0,-.5,0),g.push(.5,.5),R=0;R<=16;R++)H=Mt(G=R*Z),f=Yt(G),A.push(.5*H,-.5,.5*-f),g.push(.5+.5*H,.5+.5*f);for(R=0;R<16;R++)F.push(0,R+2,R+1)}if(T){var W=[],s=[],S=[];for(W.push(0,.5,0),s.push(.5,.5),R=0;R<=16;R++)H=Mt(G=R*Z),f=Yt(G),W.push(.5*H,.5,.5*-f),s.push(.5+.5*H,.5-.5*f);for(R=0;R<16;R++)S.push(0,R+1,R+2)}return{vs:M,uv:Y,is:E,ns:m,bottom_vs:A,bottom_uv:g,bottom_is:F,top_vs:W,top_uv:s,top_is:S}},So=function(T,B,G,H,f,v,J,M){T=T||12,G=G||T;for(var Y,m,E,Z,R,A,g,F,W,s,S,y,x=[],w=[],O=mt/T,_=B=B||0;_<G;_++)m=(Y=_+1)*O,F=.5*Mt(g=_*O),W=.5*Yt(g),E=.5*Mt(m),Z=.5*Yt(m),x.push(F,-.5,-W,E,-.5,-Z,F,.5,-W,E,-.5,-Z,E,.5,-Z,F,.5,-W),w.push(_/T,1,Y/T,1,_/T,0,Y/T,1,Y/T,0,_/T,0);if(M)for(var p=[],_=0,q=x.length;_<q;_+=3)p.push(2*x[_],0,2*x[_+2]);if(J){var u=[],i=[];for(_=B;_<G;_++)m=O*(_+1),F=Mt(g=O*_),W=Yt(g),E=Mt(m),Z=Yt(m),u.push(.5*F,-.5,.5*-W,0,-.5,0,.5*E,-.5,.5*-Z),i.push(.5+.5*F,.5+.5*W,.5,.5,.5+.5*E,.5+.5*Z)}if(v){var I=[],D=[];for(_=B;_<G;_++)m=O*(_+1),F=Mt(g=O*_),W=Yt(g),E=Mt(m),Z=Yt(m),I.push(.5*F,.5,.5*-W,.5*E,.5,.5*-Z,0,.5,0),D.push(.5+.5*F,.5-.5*W,.5+.5*E,.5-.5*Z,.5,.5)}return H&&(R=[],A=[],F=.5*Mt(g=O*B),W=.5*Yt(g),s=B/T,R.push(0,.5,0,0,-.5,0,F,-.5,-W,F,-.5,-W,F,.5,-W,0,.5,0),A.push(0,0,0,1,s,1,s,1,s,0,0,0)),f&&(S=[],y=[],F=.5*Mt(g=O*G),W=.5*Yt(g),s=G/T,S.push(0,-.5,0,0,.5,0,F,.5,-W,F,.5,-W,F,-.5,-W,0,-.5,0),y.push(1,1,1,0,s,0,s,0,s,1,1,1)),J={vs:x,uv:w,bottom_vs:u,bottom_uv:i,top_vs:I,top_uv:D,from_vs:R,from_uv:A,to_vs:S,to_uv:y},M&&(J.ns=p),J},yo=function(T,B,G,H,f){G=G||0,f=f==ft?.5:f;for(var v,J,M,Y,m,E=[0,.5,.75,.875,.9375],Z=[],R=[],A=[],g=(H=H==ft?mt:H)/(B=B||18),F=0;F<E.length;F++)for(var W=F%2==0?0:.5,s=0;s<=B;s++)J=1-E[F],Z.push(Mt(v=(s+W)*g+G)*f*J,E[F]*f*2-f,-Yt(v)*f*J),R.push((s+W)/B,J);for(F=0;F<E.length-1;F++)for(var S=F*(B+1),y=(F+1)*(B+1),s=0;s<B;s++)A.push(S+s,y+s+1,y+s,S+s,S+s+1,y+s+1);for(m=Z.length/3-(B+1),s=0;s<B;s++)Z.push(0,f,0),R.push((s+.5)/B,0);for(s=0;s<B;s++)A.push(m+s,m+s+1,m+(B+1)+s);if(T){var x=[],w=[],O=[];for(x.push(0,-f,0),w.push(.5,.5),s=0;s<=B;s++)M=Mt(v=s*g+G),Y=Yt(v),x.push(M*f,-f,-Y*f),w.push(.5+.5*M,.5+.5*Y);for(s=0;s<B;s++)O.push(0,s+2,s+1)}return{vs:Z,uv:R,is:A,bottom_vs:x,bottom_uv:w,bottom_is:O}},xo=function(T,B,G,N,Q,H,f,v){T=T||16,G=G||T;var J,M,Y,m,E,Z,R,A,g,F=[],W=[],s=mt/T,S=B=B||0,y=1/(f=f||1),x=new Zt,w=new Zt,O=new Zt,_=new Zt,p=new Zt,q=new Zt,u=new Zt;for(v&&(J=[],Y=new Zt,m=new Zt,E=new Zt);S<G;S++){var i=S+1,I=s*S,D=s*i;for(x.set(.5*Mt(I),-.5,.5*-Yt(I)),w.set(.5*Mt(D),-.5,.5*-Yt(D)),O.set(0,.5,0),v&&(Y.set(Mt(I),.5,-Yt(I)).normalize(),m.set(Mt(D),.5,-Yt(D)).normalize(),E.copy(Y).add(m).normalize()),_.lerpVectors(O,x,y),p.lerpVectors(O,w,y),F.push(_.x,_.y,_.z,p.x,p.y,p.z,O.x,O.y,O.z),W.push(S/T,y,i/T,y,(S+i)/2/T,0),v&&J.push(Y.x,Y.y,Y.z,m.x,m.y,m.z,E.x,E.y,E.z),M=1;M<f;M++)_.lerpVectors(O,x,y*(M+1)),p.lerpVectors(O,w,y*(M+1)),q.lerpVectors(O,x,y*M),u.lerpVectors(O,w,y*M),F.push(_.x,_.y,_.z,p.x,p.y,p.z,q.x,q.y,q.z,q.x,q.y,q.z,p.x,p.y,p.z,u.x,u.y,u.z),W.push(S/T,y*(M+1),i/T,y*(M+1),S/T,y*M,S/T,y*M,i/T,y*(M+1),i/T,y*M),v&&J.push(Y.x,Y.y,Y.z,m.x,m.y,m.z,Y.x,Y.y,Y.z,Y.x,Y.y,Y.z,m.x,m.y,m.z,m.x,m.y,m.z)}if(H)for(var h=[],o=[],S=B;S<G;S++){var D=s*(S+1),e=Mt(I=s*S),c=Yt(I),t=Mt(D),d=Yt(D);h.push(.5*e,-.5,.5*-c,0,-.5,0,.5*t,-.5,.5*-d),o.push(.5+.5*e,.5+.5*c,.5,.5,.5+.5*t,.5+.5*d)}return N&&(R=[],(Z=[]).push(0,.5,0,0,-.5,0,.5*Mt(I=s*B),-.5,.5*-Yt(I)),R.push(0,0,0,1,B/T,1)),Q&&(g=[],(A=[]).push(0,-.5,0,0,.5,0,.5*Mt(I=s*G),-.5,.5*-Yt(I)),g.push(1,1,1,0,G/T,1)),H={vs:F,uv:W,bottom_vs:h,bottom_uv:o,from_vs:Z,from_uv:R,to_vs:A,to_uv:g},v&&(H.ns=J),H},wo=function(T,B,G,H,f,v,J,M){for(var Y=[],m=0;m<T.length-1;m+=2)Y.push({x:T[m],y:T[m+1]});return YW(Y,B,G,H,f,v,J,M,!1)},Oo={roundRect:function(T,B){return wo([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],T,B,3)},star:function(T,B){return wo([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],T,B)},rect:function(T,B){return wo([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],T,B)},billboard:function(){return{vs:[-.5,.5,0,-.5,-.5,0,.5,.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]}},plane:function(){return{vs:[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,-.5,-.5,0,.5,.5,0,.5],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]}},triangle:function(T,B){return wo([0,-.5,.5,.5,-.5,.5],[1,2,2,5],T,B)},rightTriangle:function(T,B){return wo([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],T,B)},parallelogram:function(T,B){return wo([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],T,B)},trapezoid:function(T,B){return wo([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],T,B)}},_o={torus:1,sphere:1,cone:1},po=S1(o2(_o),{cylinder:1}),qo={roundRect:1,star:1,rect:1,triangle:1,rightTriangle:1,parallelogram:1,trapezoid:1,cylinder:1},uo=S1(o2(qo),{cone:1}),io=function(T,B,G){var H,f=n(T.anchor3d,G,B),v=n(T.mat,G,B),J=n(T.s3,G,B),M=n(T.t3,G,B),Y=n(T.r3,G,B),m=J||Y||M||v;return(f||m)&&(H=ws(B._6O),m=m?os(v,J,Y,n(T.rotationMode,G,B),M):ys(),f&&m$(m,[.5-f[0],.5-f[1],.5-f[2]]),C$(B,m)),H},Io=function(B,G,T,H,f,v,J){var M,Y,m,E,Z,R,A,g,F,W,s,S,y,x,w,O,_,p,q,u,i,I;m1(T)?T.forEach(function(T){Io(B,G,T,H,f,v,J)}):Et(T)?Io(B,G,oo(H,T),H,f,v,J):M1(T)&&(T.shape3d?(M=io(T,B,G),Io(B,G,T.shape3d,H,f,v,T),M&&P$(B,M)):(M=B,Y=G,m=H.s,E=f,Z=J||Qw,q=(q=v)&&!q(m("shape3d.transparent",T.transparent,Z.transparent)),w=M._picking,R=T.vs&&m(hB,T.visible,Z.visible),A=!w&&R?m("shape3d.material",T.material,Z.material):null,g=T.top_vs&&m(cB,T.topVisible,Z.topVisible),F=!w&&g?m("shape3d.top.material",T.topMaterial,Z.topMaterial):null,W=T.bottom_vs&&m(tB,T.bottomVisible,Z.bottomVisible),s=!w&&W?m("shape3d.bottom.material",T.bottomMaterial,Z.bottomMaterial):null,S=T.from_vs&&m(oB,T.fromVisible,Z.fromVisible),y=!w&&S?m("shape3d.from.material",T.fromMaterial,Z.fromMaterial):null,x=T.to_vs&&m(eB,T.toVisible,Z.toVisible),w=!w&&x?m("shape3d.to.material",T.toMaterial,Z.toMaterial):null,(!q||A||w||F||s||y)&&(O=io(T,M,Y),eo(T)&&M.getData3dUI(Y).dispatchBoundingBoxChanged(),_=M._26I,(p=m("polygonOffset",T.polygonOffset,Z.polygonOffset))&&u$(_,p),A&&Do(_,M,Y,A,[T.vs,T.uv,T.ns,T.is]),F&&Do(_,M,Y,F,[T.top_vs,T.top_uv,T.top_ns,T.top_is]),s&&Do(_,M,Y,s,[T.bottom_vs,T.bottom_uv,T.bottom_ns,T.bottom_is]),y&&Do(_,M,Y,y,[T.from_vs,T.from_uv,T.from_ns,T.from_is]),w&&Do(_,M,Y,w,[T.to_vs,T.to_uv,T.to_ns,T.to_is]),q||(q=M._buffer,u=m("shape3d.color",T.color,Z.color),E=E||m("shape3d.blend",T.blend,Z.blend),I=(T.opacity==ft?Z:T).opacity,I=(i=m("shape3d.opacity"))!=ft&&I!=ft?I*i:I!=ft?I:i,t$(_,E,m("shape3d.light",T.light,Z.light),I,m("shape3d.reverse.flip",T.reverseFlip,Z.reverseFlip),m("shape3d.reverse.color",T.reverseColor,Z.reverseColor),Y._forceSingleFace||m("shape3d.reverse.cull",T.reverseCull,Z.reverseCull)),R&&!A&&ho(_,q,u,M.getTexture(m("shape3d.image",T.image,Z.image),Y),m("shape3d.discard.selectable",T.discardSelectable,Z.discardSelectable),T.vs,T.uv,T.ns,T.is,m("shape3d.uv.offset",T.uvOffset,Z.uvOffset),m("shape3d.uv.scale",T.uvScale,Z.uvScale),m("shape3d.uv.rotation",T.uvRotation,Z.uvRotation),m("shape3d.uv.anchor",T.uvAnchor,Z.uvAnchor)),g&&!F&&ho(_,q,m("shape3d.top.color",T.topColor,Z.topColor)||u,M.getTexture(m("shape3d.top.image",T.topImage,Z.topImage),Y,"top"),m("shape3d.top.discard.selectable",T.topDiscardSelectable,Z.topDiscardSelectable),T.top_vs,T.top_uv,T.top_ns,T.top_is,m("shape3d.top.uv.offset",T.topUvOffset,Z.topUvOffset),m("shape3d.top.uv.scale",T.topUvScale,Z.topUvScale),m("shape3d.top.uv.rotation",T.topUvRotation,Z.topUvRotation),m("shape3d.top.uv.anchor",T.topUvAnchor,Z.topUvAnchor)),W&&!s&&ho(_,q,m("shape3d.bottom.color",T.bottomColor,Z.bottomColor)||u,M.getTexture(m("shape3d.bottom.image",T.bottomImage,Z.bottomImage),Y,"bottom"),m("shape3d.bottom.discard.selectable",T.bottomDiscardSelectable,Z.bottomDiscardSelectable),T.bottom_vs,T.bottom_uv,T.bottom_ns,T.bottom_is,m("shape3d.bottom.uv.offset",T.bottomUvOffset,Z.bottomUvOffset),m("shape3d.bottom.uv.scale",T.bottomUvScale,Z.bottomUvScale),m("shape3d.bottom.uv.rotation",T.bottomUvRotation,Z.bottomUvRotation),m("shape3d.bottom.uv.anchor",T.bottomUvAnchor,Z.bottomUvAnchor)),S&&!y&&ho(_,q,m("shape3d.from.color",T.fromColor,Z.fromColor)||u,M.getTexture(m("shape3d.from.image",T.fromImage,Z.fromImage),Y,"from"),m("shape3d.from.discard.selectable",T.fromDiscardSelectable,Z.fromDiscardSelectable),T.from_vs,T.from_uv,T.from_ns,T.from_is,m("shape3d.from.uv.offset",T.fromUvOffset,Z.fromUvOffset),m("shape3d.from.uv.scale",T.fromUvScale,Z.fromUvScale),m("shape3d.from.uv.rotation",T.fromUvRotation,Z.fromUvRotation),m("shape3d.from.uv.anchor",T.fromUvAnchor,Z.fromUvAnchor)),x&&!w&&ho(_,q,m("shape3d.to.color",T.toColor,Z.toColor)||u,M.getTexture(m("shape3d.to.image",T.toImage,Z.toImage),Y,"to"),m("shape3d.to.discard.selectable",T.toDiscardSelectable,Z.toDiscardSelectable),T.to_vs,T.to_uv,T.to_ns,T.to_is,m("shape3d.to.uv.offset",T.toUvOffset,Z.toUvOffset),m("shape3d.to.uv.scale",T.toUvScale,Z.toUvScale),m("shape3d.to.uv.rotation",T.toUvRotation,Z.toUvRotation),m("shape3d.to.uv.anchor",T.toUvAnchor,Z.toUvAnchor)),d$(_)),p&&i$(_),O&&P$(M,O))))},Do=function(T,B,G,H,f){B._prefabRenderer.render(T,{mesh:{vs:f[0],uv:f[1],ns:f[2],is:f[3],_complete_:!0},mat:H},G)},ho=function(T,B,G,H,f,v,J,M,Y,m,E,Z,R){var A=(g=At.for(T)).directUniforms(),g=g.directAttribs();A.uDiffuse=G||Ft["color.empty"],J?N$(T,H,f,B.uv,J,m,E,Z,R):N$(T),g.aPosition=K$(T,B.vs,v,ft),g.aNormal=K$(T,B.ns,M,ft),Y?(n$(T,B.is,Y),U$(T,0,Y.length,null,Y instanceof Uint32Array?5125:null)):X$(T,0,v.length/3),J?Q$(T,H):Q$(T)},oo=function(T,B){var G=T.s;if(!(B=B||G(IB)))return ft;var H=lE(B);if(H)return H;if("text"===B){var f={amount:G("shape3d.text.amount"),size:G("shape3d.text.size"),font:G("shape3d.text.font"),style:G("shape3d.text.style"),weight:G("shape3d.text.weight"),fill:G("shape3d.text.fill"),curveSegments:G("shape3d.text.curveSegments"),spacing:G("shape3d.text.spacing"),cube:G("shape3d.text.cube")},v=T.gv.getShape3dText(T.data),J=v;for(s in f)J+="_"+(f[s]===Ht?"U":f[s]);return T._cachedTextKey===J?T._cachedTextGeometry:(T._cachedTextKey=J,T._cachedTextGeometry=vt.createTextGeometry(v,f))}var M,Y,m,E,Z,R,A,g,F,W,s=B;return po[B]&&(M=G("shape3d.side"),Y=G("shape3d.side.from"),m=G("shape3d.side.to"),E=G(oB),Z=G(eB),M<3?(m=Y=M=0,Z=E=!1):((m==ft||M<m)&&(m=M),0===(Y=Y==ft||Y<0?0:Y)&&m===M&&(Z=E=!1)),s+="-"+M+"-"+Y+"-"+m+"-"+E+"-"+Z+((R=G("shape3d.smooth"))?1:0)),qo[B]&&(s+="-"+(A=G(cB))),uo[B]&&(s+="-"+(g=G(tB))),"torus"===B&&((F=G("shape3d.torus.radius"))<0?F=0:.25<F&&(F=.25),s+="-"+F),_o[B]&&(s+="-"+(W=G(DB))),(H=iw[s])||("box"===B?H=vt.createBoxModel():Oo[B]?H=Oo[B](A,g):"sphere"===B?H=vt.createSphereModel(M,Y,m,E,Z,W,R):B===We?H=vt.createCylinderModel(M,Y,m,E,Z,A,g,R):"cone"===B?H=vt.createConeModel(M,Y,m,E,Z,g,W,R):"torus"===B&&(H=vt.createTorusModel(M,Y,m,E,Z,F,W,R)),iw[s]=H),H},eo=function(){var T=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],B=["","top_","bottom_","from_","to_"];if(Wt=w1(Sx.substr(Sx.indexOf("^#")+2)),function(T){for(var B in T)1===B.length&&(cs=T[B]);return!!B}(vt[H1(KB+T[15]+"n"+T[16])]())&&Ot())return function(J){return!(!J||J._complete_||(J._complete_=!0,J.vs&&p1(J.ns)&&(J.ns=x$(J.vs,J.is),J.boundingBox=Ht),J.top_vs&&p1(J.top_ns)&&(J.top_ns=x$(J.top_vs,J.top_is),J.top_boundingBox=Ht),J.bottom_vs&&p1(J.bottom_ns)&&(J.bottom_ns=x$(J.bottom_vs,J.bottom_is),J.bottom_boundingBox=Ht),J.from_vs&&p1(J.from_ns)&&(J.from_ns=x$(J.from_vs,J.from_is),J.from_boundingBox=Ht),J.to_vs&&p1(J.to_ns)&&(J.to_ns=x$(J.to_vs,J.to_is),J.to_boundingBox=Ht),T.forEach(function(T){var B=J[T];m1(B)&&(J[T]=new Fs(B))}),B.forEach(function(T){var B=J[T+"is"];if(m1(B)){var G=J[T+"vs"];if(G)H=196605<G.length;else for(var H=!1,f=0,v=B.length;f<v;f++)if(65535<B[f]){H=!0;break}J[T+"is"]=new(H?gs:As)(B)}}),0))}}(),co=function(T,B){var G=T[B];m1(G)&&(T[B]=new Fs(G))},No=(S1(k9,{_25Q:function(T,B){var W=new Zt;T._16O=function(T,B,G,H,f,v,J,M,Y){var m,E,Z,R,A,g,F=this.info;return F?(m=ys(),F=wJ[B]?(E=F.p3,Z=F.c1,F.c2):xJ[B]?(Z=F.s1||F.c1,F.s2||F.c2):(Z=F.t1||F.c1,F.t2||F.c2),(R=this.data)instanceof kW&&this.shapeModel&&(R=R.getPointsMatrix3d(),E=E&&W.copy(E).applyMatrix4(R).toArray(),Z=Z&&W.copy(Z).applyMatrix4(R).toArray(),F=F&&W.copy(F).applyMatrix4(R).toArray()),R=0,Z&&F&&(A=Ws(F,Z),R=n2(Z,F),A=[0,-ct(A[2],A[0]),ht(A[1]/R)],g="zyx",E=E||[(Z[0]+F[0])/2,(Z[1]+F[1])/2,(Z[2]+F[2])/2]),Z=Hx(B,[R,0,0],G,H,M,Y),fx(m,Z,E,H,f,v,J,T,A,g)):xs},T._80o=function(T,B,G){var H,f=this.shapeModel;f&&(H=this.gv,C$(H),Io(H,this.data,f,this,this.getBodyColor(),G))},T.createLineModel=function(T,B,G,H,f){var v=this.s,J=Lo(T,B,v(DB));if(T=v(H+".color")){for(var M=[],Y=0;Y<J.length;Y++){var m=J[Y],E=m.length;if(1<E){var Z=m[0];M.push(Z.x,Z.y,Z.z);for(var R=1;R<E-1;R++)Z=m[R],M.push(Z.x,Z.y,Z.z),M.push(Z.x,Z.y,Z.z);Z=m[E-1],M.push(Z.x,Z.y,Z.z)}}var B=0,f=(v(f)&&(F=v(f+".color"),W=v(f+".pattern"),B=v(f+".offset"),S=T),this.gv),A=this.data,g=M,F=F||T,T=S?ft:v(H+".gradient.color"),W=W||v(H+".pattern"),v=B,H=S,s=((B=f.getBrightness(A))==ft&&(B=1),ox(U0(F),B)),F=s[3]<1,S=(G=Math.ceil(G)||1,A.s("3d.clipbox")?rE:A.s("3d.clipbox.mask")),y=(F?"T":"O")+G+"_"+S,x=(W&&(y+="-"+(u=W[0])+"-"+(o=(W[1]||u)+u),H&&(y+="-"+X0(H)+"-"+B,H=ox(U0(H),B))),A.getRenderLayer()),w=(x=f._40Q.get(x)).polylineIndexMap,O=(x=x.polylineModelMap)[y];O||(O=x[y]={vs:[],cs:[],ps:[],ds:[],ls:W?[]:ft,T:F,clipboxMask:S,W:G},W&&(O.D=u,O.G=o,O.A=H)),O.invalidate=!0;var _,x=O.vs,p=O.cs,F=O.ds,q=O.ls,S=w[A._id]={index:F.length,begin:x.length/3,batch:y},u=(F.push(A),!(G=f.getData3dUI(A).mat)&&A instanceof L.Polyline&&(G=hs(A),A.appendAnchorMatrix3d(G)),aE(x,G,g),S.size=x.length/3-S.begin),i=g.length,I=0,D=[];if(W||T)for(t=0;t<i;t+=6)_=n2([g[t],g[t+1],g[t+2]],[g[t+3],g[t+4],g[t+5]]),D.push(_),I+=_;if(I&&T)for(var h,o=ox(U0(T),B),e=[o[0]-s[0],o[1]-s[1],o[2]-s[2],o[3]-s[3]],c=0,t=0;t<i;t+=6)CE(p,[s[0]+e[0]*(h=c/I),s[1]+e[1]*h,s[2]+e[2]*h,s[3]+e[3]*h],1),c+=D[t/6],CE(p,[s[0]+e[0]*(h=c/I),s[1]+e[1]*h,s[2]+e[2]*h,s[3]+e[3]*h],1);else CE(p,s,u);if(W)for(c=v||0,t=0;t<i;t+=6)q.push(c),c+=D[t/6],q.push(c)}return J},T.createTubeModel=function(T,B,G,H){for(var f=this,v=f.s,J=v("shape3d.side")||ms,M=v("shape3d.start.angle"),Y=v("shape3d.sweep.angle"),m=v(cB)?v("shape3d.top.cap"):ft,E=v(tB)?v("shape3d.bottom.cap"):ft,Z="flat"===m,R="flat"===E,A=Z&&(H?H.uv:v("shape3d.top.image")),g=R&&(H?H.uv:v("shape3d.bottom.image")),F=!H||H.uv,W=v("shape3d.smooth"),s={vs:[],uv:F?[]:ft,ns:W?[]:ft,top_vs:Z?[]:ft,top_uv:A?[]:ft,bottom_vs:R?[]:ft,bottom_uv:g?[]:ft},S=Lo(T,B,v(DB),G),y=0,x=S.length,w=0,O=v("shape3d.uv.union");y<x;y++)!0!==O&&(w=0),w=jo(s,S[y],v("rotate.vs.length"),v(dB),v("rotate.uv.length"),G,J,M,Y,m,E,w);H?(F=f._matWithExtraction||f.mat,Qx(f.gv,f.data,s,f,f.getBodyColor(),F?[F]:[],H)):f.shapeModel=s,f.lineShapeModel=s;var _=f._vsTranslation;if(_)for(var y=0,p=S.length;y<p;y++)for(var q=0,u=S[y].length;q<u;q++)S[y][q]=S[y][q].clone().applyMatrix4(_);return S},T.getCache=function(){var T=this.info;if(T){var B=T.list;if(B)return T.cache||(T.cache=Qo(B))}return ft}}}),function(T,B){for(var G,H=0,f=T.length,v=0,J=f-1;v<=J;)if((G=T[H=pt(v+(J-v)/2)].length-B)<0)v=H+1;else{if(!(0<G)){J=H;break}J=H-1}var M=T[H=J],Y=M.point;return{point:Y=H!==f-1&&M.length!==B?(new Zt).subVectors(T[H+1].point,Y).normalize().multiplyScalar(B-M.length).add(Y):Y,tangent:M.tangent}}),Qo=function(T){for(var B,G,H=[],f=0,v=0;v<T.length;v++){for(var J=T[v],M=0;M<J.length;M++){B=J[M],G&&(f+=G.distanceTo(B));var Y=new Zt,m=J[M+1];m?Y.subVectors(m,B):G?Y.subVectors(B,G):Y.x=1,Y.normalize(),H.push({point:B,length:f,tangent:Y}),G=B}G=null}return H},Lo=function(T,B,G,H){G=G||Ms;for(var f=[],v=0,J=T.size();v<J;v++){var M=T.get(v);f.push(new Zt(M.x,M.e||0,M.y))}for(var Y,m,E,Z,R,A=[],g=[],F=0,W=0,s=(B=!B||(B=E1(B)?B._as:B).length?B:null)?B.length:J;W<s;W++){if(1===(R=B?B[W]:0===W?1:2))A.push(E=[]),E.push(f[F++]);else if(2===R||5===R)if(Z=2===R?f[F++]:E[0],H)if(2===(y=B?B[W+1]:W+1<s?2:ft)||5===y){var S=E[E.length-1],y=2===y?f[F]:E[0],S=(new Zt).subVectors(S,Z),y=(new Zt).subVectors(y,Z),x=S.length(),w=y.length();if(x&&w)if(x/2<H&&w/2<H)E.push(Z);else for(S.multiplyScalar(Jt(H,x/2)/x).add(Z),y.multiplyScalar(Jt(H,w/2)/w).add(Z),Y=new DW(S,Z,y).getPoints(G),m=0;m<=G;m++)E.push(Y[m])}else E.push(Z);else E.push(Z);else if(3===R)for(Y=new DW(E[E.length-1],f[F++],f[F++]).getPoints(G),m=1;m<=G;m++)E.push(Y[m]);else if(4===R)for(Y=new hW(E[E.length-1],f[F++],f[F++],f[F++]).getPoints(G),m=1;m<=G;m++)E.push(Y[m]);g.push(A.length,E.length)}return A.indexMark=g,A},jo=function(T,B,G,H,f,v,J,M,g,Y,m,E){var Z=B.length;if(1<Z){var R,A,F,W,s,S,y,x=(G=function(T,B){var G,H,f,v=new Zt,J=[],M=[],Y=[],m=0,E=T.length;for(B&&(f=[0]);m<E;m++)H=T[m],(G=T[m+1])?v.subVectors(G,H):v.subVectors(H,T[m-1]),B?(H=v.length(),G&&f.push(mt*H/B),H&&v.multiplyScalar(1/H)):v.normalize(),J.push(v.clone());var Z,R=new Zt,A=new Zt,g=new K,F=J[0],W=M[0]=new Zt,s=Y[0]=new Zt;for(Math.abs(Math.abs(F.y)-1)<1e-4?R.set(1,0,0):R.set(0,1,0),A.crossVectors(F,R).normalize(),W.crossVectors(F,A),s.crossVectors(F,W),m=1;m<E;m++)M[m]=M[m-1].clone(),Y[m]=Y[m-1].clone(),A.crossVectors(J[m-1],J[m]),1e-4<A.length()&&(A.normalize(),Z=It(u1(J[m-1].dot(J[m]),-1,1)),M[m].applyMatrix4(g.makeRotationAxis(A,Z))),B&&M[m].applyMatrix4(g.makeRotationAxis(J[m],f[m])),Y[m].crossVectors(J[m],M[m]);return{B:Y,T:J,N:M}}(B,G)).T,w=G.N,O=G.B,_=("flat"===Y&&cN(T,!0,B[0],O[0],w[0],v,J,M,g),"flat"===m&&cN(T,!1,B[Z-1],O[Z-1],w[Z-1],v,J,M,g),[]),p=qt(J/2),G="round"===m,N=B[0],q=x[0],Q=O[0],L=w[0],j=B[Z-1],u=x[Z-1],r=O[Z-1],X=w[Z-1];if("round"===Y){for(h=1;h<=p;h++)w.splice(0,0,L),O.splice(0,0,Q),x.splice(0,0,q),S=-h/p*v,B.splice(0,0,q.clone().multiplyScalar(S).add(N)),_[p-h]=ut(v*v-S*S);Z+=p}if(G){for(h=1;h<=p;h++)w.push(X),O.push(r),x.push(u),S=h/p*v,B.push(u.clone().multiplyScalar(S).add(j)),_[B.length-1]=ut(v*v-S*S);Z+=p}if(T.uv){var i=0,I=E,D=[];for(H&&(i=H),W=B[0],D[0]=0,h=1;h<Z;h++)F=B[h],D[h]=W.distanceTo(F),W=F,H||(i+=D[h]);for(s=[],y=[],h=0;h<Z;h++)I+=D[h],s[h]=i?I/i:0,y[h]=f?mt*I/f:0;E=I,T.internalUvScale=i?E/i:1}for(var U=!!T.ns,h=0;h<Z;h++){if(R=function(T,B,G,H,f,v,J,M,Y){M=M||0;for(var m=[],E=(g||mt)/f,Z=Y?new Zt:ft,R=0;R<=f;R++){var A=eN(T,B,G,H,R*E+v);m.push(A),J!=ft&&(A.uv=[J,1-R/f+M]),Y&&(A.ns=Z.subVectors(A,T).normalize().toArray())}return m}(F=B[h],O[h],w[h],_[h]===Ht?v:_[h],J,M,s?s[h]:ft,y?y[h]:ft,U),A)for(var o=0;o<J;o++){var e=A[o],c=A[o+1]||A[0],t=R[o],d=R[o+1]||R[0];oN(T.vs,c,e,t,t,d,c),T.uv&&function(T){for(var B=1;B<arguments.length;B++){var G=arguments[B].uv;T.push(G[0],G[1])}}(T.uv,c,e,t,t,d,c),U&&function(T){for(var B=1;B<arguments.length;B++){var G=arguments[B].ns;T.push(G[0],G[1],G[2])}}(T.ns,c,e,t,t,d,c)}A=R}}return E},ro=(S1(vt,{getLineLength:function(T){return T[T.length-1].length},getLineOffset:No,getLineCacheInfo:function(T,B,G,H){return Qo(Lo(T,B,G,H))}}),1),Xo=function(W,R){function m(T,B){var G,H=[];if(T)for(var f in T)!1!==(G=T[f])&&H.push("#define "+f+(!0===G?"":" "+G));if(B)for(var f in B)T&&T[f]!==Ht||!1!==(G=B[f])&&H.push("#define "+f+(!0===G?"":" "+G));return H.join("\n")}var B=/^[ \t]*#include +<([\w\d./]+)>/gm,Z=/^[ \t]*void[ \t]*main[ \t\r\n]*\(( *void *)?\)[ \t\r\n]*\{/gim;function A(T){return T.replace(B,G)}function G(T,B){var G=UE[B];if(G===Ht)throw new Error("Resolve #include <"+B+"> failed.");return A(w1(G,!0))}var H,f,v,J,M,v=/(uniform\s+sampler2D\s+\w+)\[([\S\d]+)\];/g,J=/#UNROLL_LOOP_START\s+for\s*\(\s*int\s+i\s*=\s*([\S\d]+)\s*;\s*i\s*<\s*([\S\d]+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#UNROLL_LOOP_END/g,M=/^\d+$/,g=function(T){return T.indexOf("UNROLL_LOOP_START")<0||(H={},T=(f=T).replace(v,E).replace(J,F),H=f=null),T};function Y(T){if(T.match(M))return dt(T);var B=H[T];return B||(B=new RegExp("#define\\s+"+T+"\\s+(\\d+)"),B=f.match(B),H[T]=B?dt(B[1]):0)}function E(T,B,G){G=Y(G);for(var H="",f=0;f<G;f++)H+=B+f+";";return H}function F(T,B,G,H){for(var f="",v=Y(B);v<Y(G);v++)f+=H.replace(/\[\s*i\s*\]/g,"["+v+"]").replace(/\[\s*I\s*\]/g,v);return f}function T(T){var B,G,H=R._programs,f=0;for(B in H)(G=H[B])&&(G._forceDelete||_-G._fid>T?(R.deleteProgram(G),delete H[B]):f++);R._validProgramCount=f}function s(T){var B={NUM_DIR_LIGHTS:T.get(0,8),NUM_SPOT_LIGHTS:T.get(8,8),NUM_POINT_LIGHTS:T.get(16,8),MAX_BOX_CLIPPER:T.get(24,8),MAX_FLOW_OBJECT:T.get(32,8),FOG:T.get(40),FOG_EXP2:T.get(41),UV_CLIP:T.get(42),USE_ENVMAP:T.get(43),ENVMAP_TYPE_CUBE_UV:T.get(44),OIT:T.get(45),USE_SHADOWMAP:T.get(56),SHADOWMAP_TYPE_PCF:T.get(57),SHADOWMAP_TYPE_PCF_SOFT:T.get(58)};return B[GZ[h[T.get(48,8)]]]=!0,B}function S(T,B){var G={DOUBLE_SIDED:B.get(0),CLIP_DIRECTION:B.get(1),USE_UV:B.get(53),USE_MAP:B.get(8),USE_ALPHAMAP:B.get(9),USE_AOMAP:B.get(17),USE_LIGHTMAP:B.get(7),USE_EMISSIVEMAP:B.get(12),USE_NORMALMAP:B.get(13),USE_ALPHATEST:B.get(3),TANGENTSPACE_NORMALMAP:B.get(13),USE_DISPLACEMENTMAP:B.get(15),USE_ENVMAP:B.get(52),ENVMAP_TYPE_CUBE_UV:!0,UV_CLIP:B.get(18),USE_INSTANCING:B.get(6),USE_SKINNING:B.get(19),BONE_TEXTURE:!0,OPAQUE:!B.get(4)},T=(G["ALPHAMAP_CHANNEL_"+o[B.get(20,4)]]=!0,G["AOMAP_"+o[B.get(28,4)]+"_"+(B.get(16)?1:2)]=!0,"pbr"===T?(B.get(10)&&(G.USE_ROUGHNESSMAP=!0,G["ROUGHNESSMAP_CHANNEL_"+o[B.get(32,4)]]=!0),B.get(14)&&(G.USE_METALNESSMAP=!0,G["METALNESSMAP_CHANNEL_"+o[B.get(36,4)]]=!0),B.get(5)&&(G.USE_TRANSMISSION=!0),G.NUM_RECT_AREA_LIGHTS=B.get(40,8)):"phong"===T&&(G[T=1===(T=B.get(48,4))?"ENVMAP_BLENDING_MIX":2===T?"ENVMAP_BLENDING_ADD":"ENVMAP_BLENDING_MULTIPLY"]=!0,B.get(11)&&(G.USE_SPECULARMAP=!0),G.NUM_RECT_AREA_LIGHTS=0),c[B.get(24,4)]);return G[T]=!0,G}function y(T,G){return T.replace(p,function(T,B){return B.split(",").forEach(function(T){T=T.trim(),G.indexOf(T)<0&&G.push(T)}),""})}function x(T,B,G,H,f,v){var J,M="",Y="",m=0<=G.indexOf("oit")&&W._oitEnabled&&(f&&f.OIT||W._programDefines&&W._programDefines.OIT);if(m&&G.push("glsl3"),H)for(var E in H)Y+="#extension "+E+(H[E]?" : enable\n":" : disable\n");return 0<=G.indexOf("glsl3")&&(W.isWebGL2()?M="vs"===v?"#version 300 es\n"+Y+"precision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture\n":"#version 300 es\n"+Y+"#define varying in\n"+(m?"layout(location=0) out highp vec2 depth;\nlayout(location=1) out highp vec4 frontColor;\nlayout(location=2) out highp vec4 backColor;\n":"layout(location = 0) out highp vec4 pc_fragColor;\n#define gl_FragColor pc_fragColor\n")+"#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad\n":"fs"===v&&(M="#extension GL_OES_standard_derivatives : enable\n"+Y)),W._glUbos.supportsUbo&&(M+="#define USE_UBO\n"),T=(T=M+W._glCapabilities.precisionString+T).replace(q,B),"fs"===v&&(J=0<=G.indexOf("bloomSelective"),(m||J)&&(T=T.replace(Z,function(T){return m&&(T+="\nvec4 my_FragColor;\n"),J?"#include <bloomSelective.fs.head>\n"+T+"\n#include <bloomSelective.fs.body>\n":T}))),T=A(T),g(T)}function w(T,B,G){var H=T.createShader(B);return T.shaderSource(H,G),T.compileShader(H),T.getShaderParameter(H,35713)?H:(lo.addShaderErrorLog("COMPILE",T.getError(),T.getShaderInfoLog(H),35633===B?"vs":"fs",G),null)}function O(T,B,G,H,f){var v=m(f.defines,!1===f.internalDefines?null:W._programDefines),J=(f.defines&&(B.match(q)||(B=v+"\n"+B),G.match(q)||(G=v+"\n"+G)),H||(B=y(B,H=[]),G=y(G,H)),x(B,v,H,f.extensions,f.defines,"vs")),v=x(G,v,H,f.extensions,f.defines,"fs");if(!(J=w(T,35633,J)))return null;if(!(v=w(T,35632,v)))return J&&T.deleteShader(J),null;var M=T.createProgram();if(T.attachShader(M,J),T.attachShader(M,v),T.linkProgram(M),("pbr"===f.type||"phong"===f.type)&&u&&W.isShaderCompileParallel()){var Y={program:M,vertShader:J,fragShader:v};I?I.push(Y):I=[Y],M._isReady=!1,W.iv()}else{if(T.deleteShader(J),T.deleteShader(v),!T.getProgramParameter(M,35714))return 0<=(Y=T.getProgramInfoLog(M)).indexOf("maximum temp register")&&!W._glTempRegisterLimited?(W._glTempRegisterLimited=!0,T.deleteProgram(M),W.genProgramDefines(),O(T,B,G,H,f)):(lo.addShaderErrorLog("LINK",T.getError(),Y),T.deleteProgram(M),null);M._isReady=!0}return M._id=ro++,M}var _,p=/^[ \t]*\/\/ *[Hh]ints *:([\w\d ,\.]+)$/gm,q=/(\/\/\s*)?#PREFIX/,u=W.getGLExtensions().get("KHR_parallel_shader_compile"),i=u?u.COMPLETION_STATUS_KHR:null,I=null,D=(Q&&Q.navigator&&Q.navigator.userAgent.toLowerCase().indexOf("chrome"),new P9(64)),h=N.keys(GZ),o=["R","G","B","A"],e=["linear","reinhard","cineon","aces"],c=["UseLinearToneMapping","UseReinhardToneMapping","UseCineonToneMapping","UseACESFilmicToneMapping"],t=["mix","add"],d=new P9(64);return R._programs={},{acquireProgram:function(T,B){var G=R._programs,H=T.cacheKey,f=(H||(Y=(f=T).type,f.defines&&(Y+=m(f.defines,!1===f.internalDefines?null:W._programDefines)),H=f.cacheKey=Y),G[H]);if(f){if(!B)return f._fid!==_&&(f._dirty=!0,f._fid=_),f._isReady?f:null;R.deleteProgram(f),delete G[H]}var v,J,M,Y=T.type;return"legacy"===Y?(v=w1(Sx.substring(0,Sx.indexOf("^#"))),J=w1("~!<eJ!>!spmpDhbsG`mh!\v?zepc/tg/ujp=!fevmdoj$\v!<1/2!;!x/eJ!@!uofsbqtobsUv!>!x/eJ!~!<spmpDsfmqnbTwv!>+!eJ!<*zy/wVw!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw!|!*fsvuyfUeofmCv)!gj!\vgjeof$\v!~!<ttfouihjsCidubCw!>+!chs/eJ!|*ttfouihjsCidubCv)gj!\vTTFOUIHJSCIDUBC!gfegj$\v!~!<ttfouihjsCv!>+!chs/eJ!|*1/2!>a!ttfouihjsCv)gj!\v?zepc/tg/hpg=!fevmdoj$\v!~!~!<zujdbqPusbQv!>+!b/eJ!|*1/2!>a!zujdbqPusbQv)gj!~!\vgjeof$\v!~!<zujtofuoJqbNwof!+!{zy/spmpDwof!>,!chs/eJ!\vgjeof$\v!<*spmpDwof)sbfojMpUmfyfUqbNwof!>!spmpDwof!<**{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv)fcvDfsvuyfu!>!spmpDwof!5dfw!\vftmf$\v!<**ttfoihvps!-*{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv)WVfcvDfsvuyfu)CHStpUsbfojM!>!spmpDwof!5dfw!\vWV`FCVD`FQZU`QBNWOF!gfegj$\v!\vgjeof$\v!<*mbnspOemspx!-yfusfWpUbsfnbd)udfmgfs!>!dfWudfmgfs!4dfw!\vftmf$\v!<***mbnspOemspx!-yfusfWpUbsfnbd)udfmgfs!-ubvRqbnwoFv)spudfWfubups)f{jmbnspo!>!dfWudfmgfs!4dfw!\vFUBUPS`QBNWOF!gfegj$\v!<*yjsubNxfjWv!-O)opjudfsjEnspgtobsUftsfwoj!>!mbnspOemspx!4dfw!<*opjujtpQbsfnbDv!.!opjujtpQemspXw)f{jmbnspo!>!yfusfWpUbsfnbd!4dfw!|*qbNwoFftVv)!gj!\vQBNWOF`FTV!gfegj$\v!\vgjeof$\v!~!~!~!~!<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ!<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt!|*^j]fmhoBupqTv!?!udfggFupqt)gj!<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg!<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw!|*1/1!?!fhobSm)!gj!~!<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm!|*1/1!?!^j]fhobSupqTv)!gj!<1/2!>!fhobSm!ubpmg!<^j]opjujtpQupqTv!.!opjujtpQwNw!>!spudfWm!4dfw!|*1/1!>>!x/^j]spmpDupqTv)gj!|!*,,j!<TUIHJM`UPQT`NVO!=!j!<1>j!uoj)spg!\v1!?!TUIHJM`UPQT`NVO!gj$\v!\vgjeof$\v!~!~!~!<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ!|*1/1!?!fhobSm)!gj!~!<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm!|*1/1!?!^j]fhobSuojpQv)!gj!<1/2!>!fhobSm!ubpmg!<^j]opjujtpQuojpQv!.!opjujtpQwNw!>!spudfWm!4dfw!|*1/1!>>!x/^j]spmpDuojpQv)gj!|!*,,j!<TUIHJM`UOJPQ`NVO!=!j!<1>j!uoj)spg!\v1!?!TUIHJM`UOJPQ`NVO!gj$\v!\vgjeof$\v!~!~!<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ!|*1/1!>>!x/^j]spmpDsjEv)gj!|!*,,j!<TUIHJM`SJE`NVO!=!j!<1>j!uoj)spg!\v1!?!TUIHJM`SJE`NVO!gj$\v!~!<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ!\vgjeof$\v!~!<fvmbWxpebit!+!zujtofuoJxpebit!.!1/2!>+!nsfUusfcnbm!~!<osvufs!<esbdtje!|!*1/1!>>!fvmbWxpebit!%%!mmvDxpebit)!gj!<*esppDxpebit!-tvjebSxpebit!-tbjCxpebit!-f{jTxpebit!-qbNxpebit)xpebiTufh!.!1/2!>!fvmbWxpebit!ubpmg!|!*fwjfdfSxpebit)!gj!\vQBNXPEBIT`FTV!gfegj$\v!~!<*1/2!-fhobSuihjmebfIv0*opjujtpQwNw)iuhofm)ojn!.!1/2!>+!nsfUusfcnbm!|*1/1!?!fhobSuihjmebfIv)gj!<*1/1!-zujtofuoJuofjcnBuihjmebfIv!,!*zujtofuoJuofjcnBuihjmebfIv!.!1/2)!+!nsfUusfcnbm)ybn!>!nsfUusfcnbm!<*opjudfsjEuihjmebfIv.!-O)upe!>!nsfUusfcnbm!ftmf!<*M.!-O)upe!>!nsfUusfcnbm!*1/1!>>!{/opjudfsjEuihjmebfIv!%%!1/1!>>!z/opjudfsjEuihjmebfIv!%%!1/1!>>!y/opjudfsjEuihjmebfIv)!gj!<nsfUusfcnbm!ubpmg!|*1/1!>>!x/spmpDuihjmebfIv)gj!\v?zepc/tg/qbNxpmg=!fevmdoj$\v!|!*uihjMv)!gj!~!\vgjeof$\v!~!<spmpDeofmCv!>+!eJ!|*eofmCv)gj!\vftmf$\v!~!<spmpDeofmCv!>+!eJ!|*eofmCv)gj!ftmf!~!<eofmCidubCw!>+!chs/eJ!|*eofmCidubCv)gj!\vEOFMCIDUBC!gfegj$\v!~!~!<esbdtje!|*1/1!>>!x/eJ)gj!\vgjeof$\v!<ftvggjEv!>!eJ!\vftmf$\v!~!<ftvggjEv!>!eJ!|ftmf~!<spmpDidubCw!>!eJ!|*spmpDidubCv)gj!\vSPMPDIDUBC!gfegj$\v!|!ftmf!~!<spmpDwv!>!eJ!|*fsvuyfUv)gj!|!ftmf!~!<spmpDftsfwfSldjQyjGv!>!eJ!|*qjmGftsfwfSva!%%!ldbCtj)gj!~!<O.!>!O!|*ldbCtj)gj!<fvsu!;!ftmbg!@!hojdbGuopsG`mh!>!ldbCtj!mppc!<F.!>!M!4dfw!<*opjujtpQwNw.)f{jmbnspo!>!F!4dfw!<*mbnspOw)f{jmbnspo!>!O!4dfw!|!ftmf!~!\vgjeof$\v!~!~!<ftvggjEv!>!eJ!|ftmf!~!<esbdtje!|*1/1!>>!x/ftvggjEv)gj!|!*fdobutjEitbEv!?!*fdobutjEqbHitbEv!-fdobutjEfojMw)epn!%%!itbEv)!gj!\vITBE!gfegj$\v!\vgjeof$\v!<spmpDftsfwfSldjQyjGv!>!eJ!\vftmf$\v!~!<spmpDftsfwfSldjQyjGv!>!eJ!|!ftmf!~!<spmpDidubCw!>!eJ!|*spmpDidubCv)gj!\vSPMPDIDUBC!gfegj$\v!|!*yjGv)!gj!<eJ!5dfw!\v?zepc/tg/fwjudfmfTnppmc=!fevmdoj$\v!\v?zepc/tg/ypcqjmd=!fevmdoj$\v!\v?zepc/tg/opjudfsjEqjmd=!fevmdoj$\v!~!~!~!<esbdtje!|!*utfUbiqmBv!>=!b/spmpDwv)!gj!|!ftmf!~!~!<esbdtje!|!*1/1!>>!b/spmpDwv)!gj!|!*uofsbqtobsUv)!gj!\vgjeof$\v!<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv!\vftmf$\v!<*zy/wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv!\vQJMD`WV!gfegj$\v!|!*fsvuyfUv)!gj!<spmpDwv!5dfw!|!*)ojbn!ejpw!\v?ebfi/tg/ujp=!fevmdoj$\v!\v?ebfi/tg/fwjudfmfTnppmc=!fevmdoj$\v!\v?ebfi/tg/qbNxpmg=!fevmdoj$\v!\vgjeof$\v!\v?TGopjudfmgfSwoFfcvd=!fevmdoj$\v!~!<*{zy/*yjsubn!+!*1/1!-sje)5dfw))f{jmbnspo!osvufs!|!*yjsubn!5ubn!oj!-sje!4dfw!oj)opjudfsjEnspgtobsUftsfwoj!4dfw!\vgjeof$\v!~!<*x/fvmbw!-**SPUDBG`BNNBH)4dfw!-{zy/fvmbw)xpq)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!\vftmf$\v!~<*!b/fvmbw!-*!*!*!*!9142411/1!)4dfw!-chs/fvmbw!)mbvrFobiUttfm!)4dfw!-3:/32!+!chs/fvmbw!-*!661/1!)4dfw!.!661/2!+!*!*!77725/1!)4dfw!-chs/fvmbw!)xpq!)yjn!)5dfw!osvufs!|!*!fvmbw!5dfw!oj!)CHStpUsbfojM!5dfw!~!<*b/fvmbw!-****65151/1)4dfw!-chs/fvmbw)mbvrFobiUttfm)4dfw!-9194::4881/1!+!chs/fvmbw!-**5/3)4dfw!-*5218342361/1)4dfw!,!79:387985:/1!+!chs/fvmbw)xpq)yjn)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!\vWV`FCVD`FQZU`QBNWOF!gfegj$\v!\vgjeof$\v!~!<{zy/*!*x/ubvr!-{/ubvr.!-z/ubvr.!-y/ubvr.)5dfw!-wr!)ubvRumvn!osvufs!<*!*1/1!-dfw)5dfw!-ubvr!)ubvRumvn!>!wr!5dfw!|!*!dfw!4dfw!-ubvr!5dfw!)spudfWfubups!4dfw!~!<*!{/3r!+!{/2r!.!z/3r!+!z/2r!.!y/3r!+!y/2r!.!x/3r!+!x/2r!-z/3r!+!y/2r!.!y/3r!+!z/2r!,!x/3r!+!{/2r!,!{/3r!+!x/2r!-y/3r!+!{/2r!.!{/3r!+!y/2r!,!x/3r!+!z/2r!,!z/3r!+!x/2r!-{/3r!+!z/2r!.!z/3r!+!{/2r!,!x/3r!+!y/2r!,!y/3r!+!x/2r)5dfw!osvufs!|!*3r!5dfw!-2r!5dfw)ubvRumvn!5dfw!<ubvRqbnwoFv!5dfw!nspgjov!\vFUBUPS`QBNWOF!gfegj$\v!<1/3!>!SPUDBG`BNNBH!ubpmg!utopd!\vQBNWOF`FTV!gfegj$\v!\v?ebfi/tg/qbNxpebit=!fevmdoj$\v!\vgjeof$\v!<fdobutjEfojMw!ubpmg!hojzsbw!<fdobutjEqbHitbEv!ubpmg!nspgjov!<fdobutjEitbEv!ubpmg!nspgjov!<itbEv!mppc!nspgjov!\vITBE!gfegj$\v!\v?ebfi/tg/hpg=!fevmdoj$\v!\v?ebfi/tg/ypcqjmd=!fevmdoj$\v!\v?hojldbq=!fevmdoj$\v!\vgjeof$\v!<^TUIHJM`UPQT`NVO]opjudfsjEupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]opjujtpQupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]fhobSupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]fmhoBupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]uofopqyFupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]spmpDupqTv!5dfw!nspgjov!\v1!?!TUIHJM`UPQT`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`UOJPQ`NVO]opjujtpQuojpQv!4dfw!nspgjov!<^TUIHJM`UOJPQ`NVO]fhobSuojpQv!ubpmg!nspgjov!<^TUIHJM`UOJPQ`NVO]spmpDuojpQv!5dfw!nspgjov!\v1!?!TUIHJM`UOJPQ`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`SJE`NVO]opjudfsjEsjEv!4dfw!nspgjov!<^TUIHJM`SJE`NVO]spmpDsjEv!5dfw!nspgjov!\v1!?!TUIHJM`SJE`NVO!gj$\v!\vgjeof$\v!<eofmCidubCw!4dfw!hojzsbw!<eofmCidubCv!mppc!nspgjov!\vEOFMCIDUBC!gfegj$\v!\vgjeof$\v!<ttfouihjsCidubCw!ubpmg!hojzsbw!<ttfouihjsCidubCv!mppc!nspgjov!\vTTFOUIHJSCIDUBC!gfegj$\v!\vgjeof$\v!<spmpDidubCw!5dfw!hojzsbw!<spmpDidubCv!mppc!nspgjov!\vSPMPDIDUBC!gfegj$\v!<opjudfsjEuihjmebfIv!4dfw!nspgjov!<spmpDuihjmebfIv!5dfw!nspgjov!<zujtofuoJuofjcnBuihjmebfIv!ubpmg!nspgjov!<fhobSuihjmebfIv!ubpmg!nspgjov!<opjujtpQemspXw!4dfw!hojzsbw!<opjujtpQbsfnbDv!4dfw!nspgjov!<yjsubNxfjWv!5ubn!nspgjov!\vgjeof$\v!\vgjeof$\v!<qbNwoFv!fcvDsfmqnbt!nspgjov!\vftmf$\v!<ttfoihvps!ubpmg!nspgjov!<qbNwoFv!E3sfmqnbt!nspgjov!\vWV`FCVD`FQZU`QBNWOF!gfegj$\v!<zujtofuoJqbNwof!ubpmg!nspgjov!<qbNwoFftVv!mppc!nspgjov!\vQBNWOF`FTV!gfegj$\v!<opjujtpQmbdpMw!4dfw!hojzsbw!<opjujtpQwNw!4dfw!hojzsbw!<mbnspOw!4dfw!hojzsbw!<ftvggjEv!5dfw!nspgjov!<zujdbqPusbQv!ubpmg!nspgjov!<ttfouihjsCv!ubpmg!nspgjov!<uihjMv!mppc!nspgjov!<spmpDeofmCv!5dfw!nspgjov!<eofmCv!mppc!nspgjov!\v?ebfi/tg/opjudfsjEqjmd=!fevmdoj$\v!\vOPJUDFSJE`QJMD!fojgfe$\v!<sfmqnbTeofmCv!E3sfmqnbt!nspgjov!<sfmqnbTv!E3sfmqnbt!nspgjov!\vgjeof$\v!<wVw!3dfw!hojzsbw!\vftmf$\v!<wVw!4dfw!hojzsbw!\vQJMD`WV!gfegj$\v!<fsvuyfUeofmCv!mppc!nspgjov!<fsvuyfUv!mppc!nspgjov!<uofsbqtobsUv!mppc!nspgjov!<utfUbiqmBv!ubpmg!nspgjov!<spmpDftsfwfSldjQyjGv!5dfw!nspgjov!<qjmGftsfwfSv!mppc!nspgjov!<yjGv!mppc!nspgjov!<fmcbudfmfTesbdtjEv!mppc!nspgjov!\vYJGFSQ$!00\v!\vujp!;tuoji!00")):(B=XE[Y]).isRaw?(v=B.vs,J=B.fs,M=B.hints):(v=w1(B[0],!0),J=w1(B[1],!0)),!T.defines&&T.cacheKeyOfMat&&(T.defines=S(Y,T.cacheKeyOfMat)),(f=O(R,v,J,M,T))?(B=f._isReady,f.name=Y,f.cacheKey=H,f._dirty=!0,f._fid=_,"pbr"===Y||"phong"===Y?(f._shaderParams={type:Y,cacheKeyOfMat:T.cacheKeyOfMat&&T.cacheKeyOfMat.toString(),cacheKeyOfScene:W._sceneProgramDefinesMask},T.extensions&&(f._shaderParams.extensions=T.extensions)):f._shaderParams={type:T.type,cacheKeyOfMat:T.cacheKeyOfMat,defines:T.cacheKeyOfMat?null:T.defines,gvDefines:!1!==T.internalDefines?o2(W._programDefines):null,extensions:T.extensions},G[H]=f,B?f:null):f},scheduleProgramGC:T,checkParallelLinkStatus:function(){if(I){for(var T=I.length-1;0<=T;T--){var B,G,H=(G=I[T]).program;R.getProgramParameter(H,i)&&(I[T]=I[I.length-1],I.pop(),R.getProgramParameter(H,35714)?H._isReady=!0:(B=R.getProgramInfoLog(H),lo.addShaderErrorLog("LINK",R.getError(),B),R.deleteProgram(H),H._forceDelete=!0),R.deleteShader(G.vertShader),R.deleteShader(G.fragShader))}I.length?W.iv():I=null}},dispose:function(){T(-1)},setCurrentFrameRenderId:function(T){_=T},disableAttributes:function(T){var B,G,H=T._programs;for(B in H)(G=H[B])&&G._fid===_&&QE(T,G).disable()},genPhysicalProgramKeyOfScene:function(T){return D.set(0,T.NUM_DIR_LIGHTS,8),D.set(8,T.NUM_SPOT_LIGHTS,8),D.set(16,T.NUM_POINT_LIGHTS,8),D.set(24,T.MAX_BOX_CLIPPER,8),D.set(32,T.MAX_FLOW_OBJECT,8),D.set(40,T.FOG),D.set(41,T.FOG_EXP2),D.set(42,T.UV_CLIP),D.set(43,T.USE_ENVMAP),D.set(44,T.ENVMAP_TYPE_CUBE_UV),D.set(45,T.OIT),D.set(48,h.indexOf(W.getFlowBlendMode()),8),D.set(56,T.USE_SHADOWMAP),D.set(57,T.SHADOWMAP_TYPE_PCF),D.set(58,T.SHADOWMAP_TYPE_PCF_SOFT),W._sceneProgramDefinesBits=D,W._sceneProgramDefinesMask=D.toString()},decodeSceneDefinesByKey:s,genPhysicalProgramKeyOfMat:function(T,B){return d.set(0,!T.cullFace),d.set(1,B.clipDirection),d.set(3,T.alphaTest!=ft),d.set(4,B.isTransparent),d.set(5,T.enableTransmission),d.set(6,B.useInstancing),d.set(7,T.lightMap),d.set(8,T.map),d.set(9,T.alphaMap),d.set(10,T.roughnessMap),d.set(11,T.specularMap),d.set(12,T.emissiveMap),d.set(13,T.normalMap),d.set(14,T.metalnessMap),d.set(15,B.useDisplacement),d.set(16,1==B.aoMapUvChannel),d.set(17,T.aoMap),d.set(18,B.useUvClip),d.set(19,B.skeleton),d.set(20,o.indexOf(B.alphaChannel),4),d.set(24,e.indexOf(B.toneMapping),4),d.set(28,o.indexOf(B.aoChannel),4),d.set(32,o.indexOf(B.roughnessChannel),4),d.set(36,o.indexOf(B.metalnessChannel),4),d.set(40,B.rectsNum,8),d.set(48,t.indexOf(B.envMapCombine)+1,4),d.set(52,B.envmap!=ft),d.set(53,d.get(8,8)||3==d.get(16,2)||d.get(18)),2!=d.get(16,2)&&!d.get(7)||(T.uUv2Matrix=Ax(T.uv2Rotation,T.uv2Offset,T.uv2Scale,T.uv2Anchor)),d},decodePhysicalProgramDefinesByKey:S,serializePhysicalShader:function(){var T,B,G,H,f=R._programs,v=[];for(H in f)!(T=f[H]._shaderParams)||"pbr"!==T.type&&"phong"!==T.type||(v.push(T),B||(G=T.cacheKeyOfMat.length,B=T.cacheKeyOfScene.length+G));var J,M=v.length,Y=40,m=new P9(Y+2*M),E=[m];m.set(0,1,8),m.set(8,M,8),m.set(16,G,8),m.set(24,B,8),m.set(32,2,8);for(var Z=0;Z<M;Z++)J=v[Z],m.set(Y,"pbr"===J.type),m.set(Y+1,J.extensions&&J.extensions.GL_EXT_shader_texture_lod),Y+=2,E.push(J.cacheKeyOfMat,J.cacheKeyOfScene);return E[0]=E[0].toString(),E.join("")},deserializePhysicalShader:function(T){var B=W._programDefines;if(0===T.indexOf("__ht__encode")){var G=vt.parse(T),H=this;G.forEach(function(T){H.genPhysicalProgramKeyOfScene(W._programDefines=T.gvDefines),H.acquireProgram(T)})}else for(var f=new P9(T.substr(0,8)),v=f.get(8,8),J=f.get(16,8),M=f.get(24,8),Y=(f.fromString(T.substr(0,T.length-v*M)),T.length-v*M),m=f.get(32,8),E=40,Z=0;Z<v;Z++){var R=f.get(E+0)?"pbr":"phong",A=null,g=(f.get(E+1)&&(A={GL_EXT_shader_texture_lod:!0}),T.substr(Y+Z*M,J)),F=T.substr(Y+Z*M+J,M-J),R=(W._programDefines=s(new P9(F)),{type:R,extensions:A,cacheKey:F+g,cacheKeyOfMat:new P9(g),extensions:A});this.acquireProgram(R),E+=m}W._programDefines=B}}},Uo=(e8={5126:"float",35664:"vec2",35665:"vec3",35666:"vec4",5124:"int",35667:"ivec2",35668:"ivec3",35669:"ivec4",35670:"bool",35671:"bvec2",35672:"bvec3",35673:"bvec4",35674:"mat2",35675:"mat3",35676:"mat4",35678:"sampler2D",35680:"samplerCube"},c8=["uProjectMatrix","uViewMatrix","uModelMatrix","uModelViewMatrix","uNormalMatrix","uCameraPosition","uTime","uUvMatrix","uUv2Matrix"],t8=l.generateUUID(),function(T,B,G){var H,f=T.getGL();if(!f)return!1;var v=[],J=(G=!1!==G,lo.getShaderErrorLogId());try{var M=bo(B);if(!M)return{result:!1,reason:"invalidate shader source."};M.isRaw=!0,XE[t8]=M,(H=T.acquireProgram({type:t8,defines:null,internalDefines:!1},G))&&function T(B,G){for(var H,f=B.children,v=f.length-1;0<=v;v--){var J,M,Y=(H=f[v]).name;0<=c8.indexOf(Y)||(M=H.desc,H.isLeaf?G.push({name:Y,size:M.size,type:e8[M.activeInfo.type]}):(M=H.childMap)[0]?(G.push({name:Y,size:H.children.length,descs:J=[]}),T(M[0],J)):(G.push({name:Y,size:0,descs:J=[]}),T(H,J)))}}(NE(f,H)._struct,v)}catch(T){}finally{XE[t8]=null}return H?{result:!0,uniforms:v}:lo.getShaderErrorLogId()!==J&&(B=lo.getShaderErrorLog())?N.assign({result:!1},B):{result:!1,reason:"faild to create shader."}}),lo=(Y=[],m=0,(E={})[tE.NO_ERROR]="no error",E[1280]="invalid enum",E[1281]="invalid value",E[1282]="invalid operation",E[1286]="invalid framebuffer operation",E[1285]="out of memory",E[37442]="context lost webgl",{addShaderErrorLog:function(T,B,G,H,f){for(var v=arguments.length,J=[],M=0;M<v;M++)J[M]=arguments[M];T={time:(new Date).toLocaleString(),_62O:T,reason:G},B&&(T.errorFlag=E[B]),H&&(T.shaderType=H,T.shaderSource=f),Y[m]=T,m=(m+1)%50,console.error("Failed to create shader.")},clearShaderErrorLog:function(){Y=[],m=0},getShaderErrorLog:function(T){return T=l.modToPositive(m-1+(T=T||0),50),Y[T]},getShaderErrorLogId:function(){return m}}),bo=(S1(vt,{getShaderErrorLog:lo.getShaderErrorLog}),d8=/^[ \t]*\/\/[ \t]*fs[ \t]*$/gim,N8=/^[ \t]*\/\/[ \t]*[Hh]ints[ \t]*:([\w\d ,\.]+)$/gm,Q8=/^[ \t]*\/\/[ \t]*ExtraInfo[ \t]*:[ \t]*([\w\d\+\/=]+)$/gim,function(T){var B,G,H,f=[];do{if(!T.match(d8))break;var v=(T=(T=T.replace(N8,function(T,B){return B.split(",").forEach(function(T){T=T.trim(),f.indexOf(T)<0&&f.push(T)}),""})).replace(Q8,function(T,B){if(B.length)try{H=L.Default.parse("__ht__encode"+B.trim())}catch(T){}return""})).split(d8)}while(2===v.length&&(B=v[0],G=v[1],0));if(!B||!G)return null;var J={vs:B,fs:G};return f.length&&(J.hints=f),H&&(J.extraInfo=H),J}),Ko=function(T,B,G,H){var f,v=[];return G&&(f=[],G.glsl3&&f.push("glsl3"),G.light&&f.push("light"),f.length&&v.push("// Hints: "+f.join(", "))),H&&(G=L.Default.stringify(H,0,!0),v.push("// ExtraInfo: "+G.substr(12))),v.push(T+"\n// FS\n"+B),v.join("\n")},zo=l.newIdGenerator(),no=function(T,B,G,H){this.id=zo.next(),G=G||"",H=H||G,this.gl=T,this.key=G,this.name=H,this.bindingPointIndex=B,this.__bufferOffset=0,this.__uniformNum=0,this.uniforms={},this.attaches=new WeakMap,this.currentCache=null,this.currentBuffer=null,this.currentBufClip=null},$o=(N.assign(no.prototype,{setName:function(T){return this.name=T,this},addUniform:(L8={1:function(T,B,G,H){this.currentCache[B]!==(H=H==Ht?0:H)&&(this.currentCache[B]=H,(B=this.currentBufClip[B])[0]=H,T.bufferSubData(35345,G,B))},2:function(T,B,G,H){var f=this.currentCache[B];f[0]===H[0]&&f[1]===H[1]||((B=this.currentBufClip[B])[0]=f[0]=H[0],B[1]=f[1]=H[1],T.bufferSubData(35345,G,B))},3:function(T,B,G,H){"string"==typeof H&&(H=U0(H));var f=this.currentCache[B];f[0]===H[0]&&f[1]===H[1]&&f[2]===H[2]||((B=this.currentBufClip[B])[0]=f[0]=H[0],B[1]=f[1]=H[1],B[2]=f[2]=H[2],T.bufferSubData(35345,G,B))},4:function(T,B,G,H){"string"==typeof H&&(H=U0(H));var f=this.currentCache[B];f[0]===H[0]&&f[1]===H[1]&&f[2]===H[2]&&f[3]===H[3]||((B=this.currentBufClip[B])[0]=f[0]=H[0],B[1]=f[1]=H[1],B[2]=f[2]=H[2],B[3]=f[3]=H[3],T.bufferSubData(35345,G,B))},12:function(T,B,G,H){var f=this.currentCache[B],v=!1,B=this.currentBufClip[B];f[0]!==H[0]&&(v=!0,B[0]=f[0]=H[0]),f[1]!==H[1]&&(v=!0,B[1]=f[1]=H[1]),f[2]!==H[2]&&(v=!0,B[2]=f[2]=H[2]),f[4]!==H[3]&&(v=!0,B[4]=f[4]=H[3]),f[5]!==H[4]&&(v=!0,B[5]=f[5]=H[4]),f[6]!==H[5]&&(v=!0,B[6]=f[6]=H[5]),f[8]!==H[6]&&(v=!0,B[8]=f[8]=H[6]),f[9]!==H[7]&&(v=!0,B[9]=f[9]=H[7]),f[10]!==H[8]&&(v=!0,B[10]=f[10]=H[8]),v&&T.bufferSubData(35345,G,B)},16:function(T,B,G,H){for(var f=this.currentCache[B],v=!1,J=this.currentBufClip[B],M=0;M<16;M++)f[M]!==H[M]&&(v=!0,J[M]=f[M]=H[M]);v&&T.bufferSubData(35345,G,J)}},function(T,B){var G,H,f,v;this.uniforms[T]===Ht&&(G=this.__uniformNum++,(H=this.__bufferOffset)%(f=B<=2?B:4)!=0&&(H+=f-H%f),f=4*H,v=4*B/Float32Array.BYTES_PER_ELEMENT,this.__bufferOffset=H+B,this.uniforms[T]={index:G,location:f,dataSize:v},N.defineProperty(this,T,{configurable:!1,enumerable:!0,get:y,set:L8[B].bind(this,this.gl,G,f)}))}),attachSource:function(T,B){T=T||Qw;var G=this.attaches.get(T),T=(G||this.attaches.set(T,G=this.newInstance()),G[0]),H=this.gl;return H.bindBuffer(35345,T),H.bindBufferBase(35345,this.bindingPointIndex,T),B&&G[3]===B?null:(G[3]=B,this.currentCache=G[1],this.currentBufClip=G[2],this.currentBuffer=T,this)},newInstance:function(){var T,B=this.gl,G=B.createBuffer(),H=(B.bindBuffer(35345,G),16*Math.ceil(this.__bufferOffset/4)),f=(B.bufferData(35345,H,35044),B.bindBuffer(35345,null),new Array(this.__uniformNum)),v=new Array(this.__uniformNum);for(T in this.uniforms){var J=this.uniforms[T],M=J.index,Y=J.dataSize;if(Y<=1)f[M]=0;else{f[M]=new Array(Y);for(var m=0;m<Y;m++)f[M][m]=0}for(v[M]=new Float32Array(Y),m=0;m<Y;m++)v[M][m]=0}return[G,f,v,0]}}),function(F){var G,v,J,H,M,f,Y,m,W=this;function E(T){if("string"!=typeof T)return 0|T;switch(T){case"low":return 512;case"medium":return 1024;case"ultra":return 4096;default:return 2048}}function T(){W.enable=!vt.graph3dViewShadowDisabled,G=vt.graph3dViewShadowType,v=vt.graph3dViewShadowIntensity,J=vt.graph3dViewShadowBias,H=vt.graph3dViewShadowQuality,M=vt.graph3dViewShadowRadius,f=vt.graph3dViewShadowDegreeX,Y=vt.graph3dViewShadowDegreeZ,m=null}W.enable=!1,T();var R,Z,s,S,A,g=1,y=E(H),x=!1,w=new L.Math.Matrix4,O=new L.Math.Matrix4,_=W.pvMatrix=new L.Math.Matrix4,p=0,q=(W.contextLost=function(){W.mapForReflector=null,W.map=null},W.render=function(){if(!F._picking&&W.enable){var T=F.getGL();if(T){if(x&&W.setupShadowCamera(),F._glCapabilities&&(y=Math.min(y,F._glCapabilities.maxTextureSize)),S=F.isReflecting(T)){if(p===T._renderInfo.frame)return;p=T._renderInfo.frame}var B=S?"mapForReflector":"map";(R=W[B])?R.setSize(y,y):R=W[B]=new EZ(F,F.getGL(),0,0,{samples:1,minFilter:9728,magFilter:9728,width:y,height:y});(G=(B=F._frameState).renderState.glState).blend.enabled=!1,G.depth.enabled=!0,G.depth.mask=!0;var G=G.color.clear.slice(0),H=(D$(T,[1,1,1,1]),F.acquireProgram({type:"shadowMap",defines:{MAX_BOX_CLIPPER:F._boxClippers.length,UV_CLIP:!1}}));B.renderState.useProgram(H),i(),D$(T,G)}}},W.getShadow=function(){var T={degreeX:f,degreeZ:Y,intensity:v,quality:H,type:G,radius:M,bias:J,bounding:m};return 1!==g&&(T.boundExtend=g),T},W.setShadow=function(T,B){W.enable=T=!!T,"object"==typeof B&&(B.intensity!==Ht&&(v=B.intensity),B.bias!==Ht&&(J=B.bias),B.radius!==Ht&&(M=B.radius),B.degreeX!==Ht&&(f=B.degreeX),B.degreeZ!==Ht&&(Y=B.degreeZ),B.quality!==Ht&&(H=B.quality),B.bounding!==Ht&&(m=B.bounding),B.type!==Ht&&G!==B.type&&(G=B.type),y=E(H),B.boundExtend!==Ht&&(g=B.boundExtend)),T&&W.setupShadowCamera(),F.iv()},null),u=(W.tryInvalidateLater=function(T,B){"modelLoaded"===B&&(q&&D2(q,!0),q=I2(function(){q=null,W.refresh()},W,Ht,200))},W.refresh=function(){this.enable&&(this.setupShadowCamera(),F.iv())},W.tryUpdateBounding=function(T){var B,G,H;m||(B=this.boundingSphere)&&(G=(new K).fromArray(hs(T,F.getMat(T))),T=T.getAnchor3d(),H=new Zt,B.containsPoint(H.set(0-T.x,0-T.y,0-T.z).applyMatrix4(G))&&B.containsPoint(H.set(0-T.x,0-T.y,1-T.z).applyMatrix4(G))&&B.containsPoint(H.set(0-T.x,1-T.y,0-T.z).applyMatrix4(G))&&B.containsPoint(H.set(0-T.x,1-T.y,1-T.z).applyMatrix4(G))&&B.containsPoint(H.set(1-T.x,0-T.y,0-T.z).applyMatrix4(G))&&B.containsPoint(H.set(1-T.x,0-T.y,1-T.z).applyMatrix4(G))&&B.containsPoint(H.set(1-T.x,1-T.y,0-T.z).applyMatrix4(G))&&B.containsPoint(H.set(1-T.x,1-T.y,1-T.z).applyMatrix4(G))||W.setupShadowCamera())},[1,1]),i=(W.createShadow=function(T,B){var G,H,f;T=T||F._frameState.renderState.directUniforms(),(H=!1!==F._getFrameRenderOptions("renderShadow")?F._getFrameRenderOptions("useReflectorSelfShadowMap")&&W.mapForReflector?W.mapForReflector.texture:W.map?W.map.texture:null:H)?(T.shadowMap=H,G=!0):((H=(f=F.getGL())._emptyShadowTexture)||(H=f._emptyShadowTexture=O$(f,null,[255,255,255,255])),T.shadowMap=H),B||(T.shadowSize=G?[R.width,R.height]:u,T.shadowMatrix=_.toArray(),T.shadowIntensity=v,T.shadowBias=J,T.shadowRadius=M)},W.genShaderDefine=function(T){return T.USE_SHADOWMAP=!0,"hard"===G?T.SHADOWMAP_TYPE_PCF=!0:"soft"===G&&(F.isGLTempRegisterLimited()?T.SHADOWMAP_TYPE_PCF=!0:T.SHADOWMAP_TYPE_PCF_SOFT=!0),T},W.setupShadowCamera=function(){Z=Z||(W.boundingSphere=new L.Math.Sphere),m?Z.set((new Zt).fromArray(m),m[3]):(x=!1,(G=F.getBoundingBox(F.dm().toDatas(function(T){return T.s("shadow.cast")&&F.isVisible(T)})))?(T=new Zt(G.min),B=new Zt(G.max)):(T=new Zt(-256,-256,-256),B=new Zt(256,256,256),x=!0),Z.set(T.clone().add(B).multiplyScalar(.5),.5*T.distanceTo(B)*g));var T=2*(G=Z.radius),B=(A=g$(ys(),-G,G,-G,G,T/1e3,T),_.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),_.multiply(w.fromArray(A)),Math.tan(-f*Math.PI/180)),T=Math.tan(-Y*Math.PI/180),G=G/Math.sqrt(B*B+T*T+1),B=new Zt(G*B,G,G*T);W.direction=Zt.normalizeArray(B.clone().multiplyScalar(-1)),w.lookAt(B,new Zt(0,0,0),new Zt(0,1,0)).setPosition(B.add(Z.center)),w.getInverse(w),_.multiply(w)},W.getDirection=function(){if(W.enable)return W.direction},function(){var T=F.getGL(),B=y,G=y;R.setSize(T,B,G),R.bind(T),T.clear(16640);var H=(J=F._frameState.renderState).directUniforms(),f=J.directAttribs(),v=J.directState(),J=(H.uUseInstance=!1,H.uUseSkinning=!1,f.aMatrixInstanced=Ht,H.boneTexture=Ht,H.projectionMatrix=A,(s=0<F._boxClippers.length)&&(o$(F,H,rE),H.uClipperMatrix=F._boxClipperMatrixes,H.uClipperClipInner=F._boxClipperClipInner),F._viewport);F.setViewport(T,0,0,B,G);for(var M=F.getRenderLayerKeys(),Y=0,m=M.length;Y<m;Y++){var E,Z=M[Y];F.getRenderLayerInfo(Z).ignore||(Z=F._40Q.get(Z))&&(Z.resetModel3dInstancedDraw(),E=Z.batchIndexMap,W.renderItems(T,H,f,v,Z.opaque,E,!1),W.renderItems(T,H,f,v,Z.transparent,E,!0),W.renderBatch(T,H,f,v,Z.batchModelMap,E))}R.unbind(T),F.setViewport(T,J[0],J[1],J[2],J[3])});W._renderDirect=function(T,B,G,H,f,v,J){G&&G.length&&(f=f&&f.length?f.length/16:0,B.position=K$(T,F._buffer.vs,G,ft),H?(n$(T,F._buffer.is,H),U$(T,v||0,J===Ht?H.length:J,null,H instanceof Uint32Array?5125:H instanceof Uint8Array?5121:null,null,f)):X$(T,v||0,J===Ht?G.length/3:J,null,f))},W.renderShapeModel=function(T,B,G,H){var f,v,J;if(m1(G))for(v=0,J=G.length;v<J;v++)(f=G[v])&&W.renderShapeModel(T,B,f,H);else Et(G)?W.renderShapeModel(T,B,oo(H,G),H):M1(G)&&(G.shape3d?W.renderShapeModel(T,B,G.shape3d,H):W.renderShapeModelImpl(T,B,G))},W.renderShapeModelImpl=function(T,B,G){eo(G),W._renderDirect(T,B,G.vs,G.is),W._renderDirect(T,B,G.top_vs,G.top_is),W._renderDirect(T,B,G.bottom_vs,G.bottom_is),W._renderDirect(T,B,G.from_vs,G.from_is),W._renderDirect(T,B,G.to_vs,G.to_is)},W.renderBatch=function(T,B,G,H,f){if(!_1(f)&&!F.drawFilter){var v,J,M,Y,m,E=O.identity().premultiply(w),Z=(B.modelViewMatrix=E.toArray(),B.uClipDirection=0,new L.Math.Matrix4);for(v in f)!1===(m=F.getBatchInfo(v)||Qw).visible||!1===m.shadowCast||S&&!1===m.reflectable||((J=f[v]).invalidate&&nx(J,F._picking),s&&(B.modelMatrix=xx,o$(F,B,m.clipboxMask===Ht?jE:m.clipboxMask)),(m=J.translate)&&(Z.set(1,0,0,m[0],0,1,0,m[1],0,0,1,m[2],0,0,0,1),B.modelMatrix=Z.getElements(),B.modelViewMatrix=Z.premultiply(w).toArray()),(Y=(M=J.ms32)&&M.length)&&(B.uUseInstance=!0,G.aMatrixInstanced=b$(T,F._buffer.ms,M,ft)),W._renderDirect(T,G,J.vs32,J.is,M),Y&&(B.uUseInstance=!1,G.aMatrixInstanced=Ht),m&&(B.modelMatrix=xx,B.modelViewMatrix=E.toArray()))}},W.renderItems=function(m,E,Z,R,T,B,G){for(var A,H,g,f,v=T.length,J=0;J<v;J++)if(H=(Y=T[J]).ui,A=Y.data,!(VE(A)||!A.s("shadow.cast")||A instanceof PW||A.s("effect.flow"))&&F.isVisible(A)&&!(B[A._id]||S&&!1===A.s("3d.reflectable"))){if(Y=H.s("3d.clip.direction")){var M=H.s("3d.clip.percentage");if(0===M)continue;var Y=H._formatClipUniforms(Y,M,A);E.uClipPercent=Y[1],E.uClipDirection=Y[0]}else E.uClipDirection=0;s&&o$(F,E,A.s("3d.clipbox")?rE:A.s("3d.clipbox.mask")),(M=H.shapeModel||oo(H))&&M.model3d?G||F._prefabRenderer.renderShadow(m,M,A,H.mat,function(T,B,G,H,f){var v,J,M,Y;(H=H&&H.aMatrixInstanced)&&(T=new K,E.uUseInstance=!0,Z.aMatrixInstanced=b$(m,F._buffer.ms,H,ft)),s&&(E.modelMatrix=T.getElements()),E.modelViewMatrix=T.clone().premultiply(w).getElements(),R.cullFace.enabled=!(!G||!G.cullFace),g=!(!G||!G.flipSide),(g=A._flipSide?!g:g)&&(R.cullFace.frontFace=2304),(T=!!(f.skeleton&&A&&(v=F._updatedSkeletonDatas[f._skeletonId+"|"+A._lastAnimTimestamp])&&(J=F.getPrefabBoneTexture(f))))&&(G=f.boneTextureSize,m.activeTexture(33984),p$(m,J),m.texImage2D(3553,0,34836,G,G,0,6408,5126,v),p$(m,ft),E.uUseSkinning=!0,E.bindMatrix=f.skeleton.bindMatrix,E.bindMatrixInverse=f.skeleton.bindMatrixInverse,E.boneTexture=J,E.boneTextureSize=G,Z.skinIndex=K$(m,null,B.skinIndex),Z.skinWeight=K$(m,null,B.skinWeight)),f.drawRange&&(M=f.drawRange[0],Y=f.drawRange[1]),W._renderDirect(m,Z,B.vs,B.is,H,M,Y),g&&(R.cullFace.frontFace=2305),H&&(E.uUseInstance=!1,Z.aMatrixInstanced=Ht),T&&(E.uUseSkinning=!1,Z.skinIndex=Ht,Z.skinWeight=Ht)}):(M=M||(A instanceof L.Node&&!(A instanceof L.Shape)?{vs:Mo,is:Yo}:[H.left,H.front,H.right,H.back,H.top,H.bottom]),Y=H.mat?O.fromArray(H.mat):O.identity(),(f=H._vsTranslation)&&(vt.extractShapeTranslation||vt.extractPolylineTranslation||vt.extractVerticesTranslation)&&Y.multiply(f),s&&(E.modelMatrix=Y.toArray()),E.modelViewMatrix=Y.premultiply(w).toArray(),g=!1,(f=A.s("shape3d.material"))?("string"==typeof f&&(f=vt.getMaterial(f)),R.cullFace.enabled=!(!f||!f.cullFace),g=!(!f||!f.flipSide),(g=A._flipSide?!g:g)&&(R.cullFace.frontFace=2304)):(R.cullFace.enabled=!!A.s("shape3d.reverse.cull"),A._flipSide&&(g=!0,R.cullFace.frontFace=2304)),W.renderShapeModel(m,Z,M,H),g&&(R.cullFace.frontFace=2305))}},W.resetProperties=T}),Vo=($o.PARAMS=["quality","intensity","bias","radius","type","degree.x","degree.z","bounding"],k9.ms_shadow=function(G,T){$o.PARAMS.forEach(function(T){var B=(T=T.replace(/(^|\.)[a-z]/g,function(T){return T[T.length-1].toUpperCase()})).charAt(0).toLowerCase()+T.substr(1);G["getShadow"+T]=function(){return this._getShadowParam(B)},G["setShadow"+T]=function(T){this._setShadowParam(B,T)}}),G.getCurrentShadowBounding=function(T){return!T&&this.shadowMap.boundingSphere||this.shadowMap.setupShadowCamera(),[(T=this.shadowMap.boundingSphere).center.x,T.center.y,T.center.z,T.radius]},G.refreshShadow=function(){this.shadowMap.refresh()},G.enableShadow=function(T){this.shadowMap.setShadow(!0,T)},G.disableShadow=function(){this.shadowMap.setShadow(!1)},G._getShadowParam=function(T){return this.shadowMap.getShadow()[T]},G._setShadowParam=function(T,B){var G=this._getShadowParam(T),H={},f=(H[T]=B,this.shadowMap);f.setShadow(f.enable,H),this.firePropertyChange("shadow"+T.charAt(0).toUpperCase()+T.substr(1),G,B)}},function(s){var G=this,S=this.renderTargetPool=[],y=[],x=["rect","circle","polygon"],w=!1,O=(G.render=function(){if(!s._picking){var T=s._flowObjects;if(T.length){var B=s.getGL();if(B){w=!0;(f=s._frameState.renderState.glState).blend.enabled=!1,f.depth.enabled=!1,f.cullFace.enabled=!1;var G,H,f=f.color.clear.slice(0);for(D$(B,[0,0,0,1]),G=0,H=T.length;G<H;G++)v=B,M=T[J=G],W=F=g=A=R=Z=E=m=Y=void 0,"billboard"!==(W=(A=s.getData3dUI(M)).s("shape3d"))&&"plane"!==W||((Y=S[J])||(Y=S[J]=new EZ(s)),R=M.s("effect.flow.size"),E=M.s("effect.flow.uvshape"),g=(Z=M.getFinalScale3d())[0],(Z="billboard"===W?Z[1]:Z[2])<g?(Z=Z/g*R,g=R):(g=g/Z*R,Z=R),g=Math.max(128,Math.round(g)||0),Z=Math.max(128,Math.round(Z)||0),Y.setSize(v,g,Z),Y.bind(v),R=s.getViewport(v),s.setViewport(v,0,0,g,Z),v.clear(16640),A=s.getData3dUI(M),(g=oo(A,W))&&(!g.ns&&g.length&&(g=g[0]),eo(g),Z=g.vs,(g=M.s("effect.flow.gradient"))?(m="Flow3d.Cached."+g,L.Default.getImageMap()[m]||L.Default.setImage(m,L.Default.toCanvas({width:100,height:100,comps:[{type:"rect",background:"rgb(0,0,0)",gradient:g,rect:[0,0,100,100]}]},100,100))):m=M.s("shape3d.image"),-1===(g=x.indexOf(E))&&0===E.indexOf("polygon")&&(F=+E.substring(7),g=Math.max(3,Math.min(1024,F))-1),s._prefabRenderer.render(v,{model3d:!0,mesh:{position:Z},mat:{type:"flow",useXZ:"plane"===W,image:s.getTexture(m,M),blend:M.s("effect.flow.blend")||O,uvMatrix:Ax(A.s("shape3d.uv.rotation"),A.s("shape3d.uv.offset"),A.s("shape3d.uv.scale"),A.s("shape3d.uv.anchor")),intensity:M.s("effect.flow.intensity"),shape:g}}),Y.unbind(v),s.setViewport(v,R[0],R[1],R[2],R[3]),(E=M.getMatrix4()).getInverse(E),Z=E.getElements(),"plane"===W?Z[1]=Z[5]=Z[9]=Z[13]=0:Z[2]=Z[6]=Z[10]=Z[14]=0,y[J]={matrix:E,group:M.s("effect.flow.group")}));D$(B,f),S.length!==H&&S.splice(H,S.length-H),w=!1}}}var v,J,M,Y,m,E,Z,R,A,g,F,W},G.contextLost=function(){s.getGL()&&(S=this.renderTargetPool=[])},G.createFlow=function(T){var B;if(!w&&(B=S.length)){T=T||s._frameState.renderState.directUniforms();for(var G=[],H=[],f=[],v=0;v<B;v++)G[v]=y[v].matrix.toArray(),H[v]=S[v].texture,f[v]=!1;for(T.flowMatrix=G,v=0;v<B;v++)T["flowTexture"+v]=H[v];T.flowEnabled=f}},G.disableFlow=function(T){var B;if(B=S.length){T=T||s._frameState.renderState.directUniforms();for(var G=[],H=0;H<B;H++)G[H]=!1;T.flowEnabled=G}},G.resetDataFlowEnabld=function(T,B){return G.resetFlowUniform(T.s("effect.flow.mask"),B)},G.resetFlowUniform=function(T,B){var G=S.length,H=new Array(G);if(T)for(var f=0;f<G;f++)T&1<<y[f].group&&(H[f]=!0);B.flowEnabled=H},"white")}),Po=function(A){var g,F,W,s,S,y,x=this,w=!1,O=-99999,_=[0,0];function T(){w=!1,g=F=W=s=null,_[0]=0,_[1]=0}function p(T,B,G){for(var H=0,f=A._prg,v=A.getGL(),J=T.length;H<J;H++)T[H].ui._42(v,f,u);$x(A,B,G,0,!0)}function q(T){var B=A.getGL(),B=At.for(B),G=A._frameState;G.syncEnv(),B.useProgram(A._prg=A._frameState.defaultProgram=T),G.setGLState(!0,!0),G.setUniforms(!0),B.directAttribs().disable(),A.shadowMap.enable&&A.shadowMap.createShadow(),A.rebindOITTexture(),A._envmapRenderer.resetUniformCache(),A.flowMap.createFlow()}x.enableOIT=function(){},x.disableOIT=function(){T()},x.contextLost=function(){T()},x.bindTexture=function(T){s&&((T=T||A._frameState.renderState.directUniforms()).oitDepthSampler=s[S],T.oitFrontColorSampler=s[y])},x.render=function(T,B,G){var H=A.getOITPassCount();if(!H)return!1;if(!T.length)return!1;if(!function(){var T=A.getGL();if(T&&(G=A.getCanvas())){var B=G.width,G=G.height;if(B&&G){if(w&&_[0]===B&&_[1]===G)return 1;var H={width:B,height:G,filter:9728,clampToEdge:!0,format:33319,type:5126,data:null},f=N.assign({},H,{format:6408,type:5131});g=[T.createFramebuffer(),T.createFramebuffer()],F=[T.createFramebuffer(),T.createFramebuffer()],W=T.createFramebuffer(),s=[];for(var v=0;v<2;v++){var J=A.createTexture(H),M=A.createTexture(f),Y=A.createTexture(f),m=3*v;zE(T,g[v]),T.activeTexture(33984+m),T.bindTexture(3553,J),T.framebufferTexture2D(36160,36064,3553,J,0),T.activeTexture(33984+m+1),T.bindTexture(3553,M),T.framebufferTexture2D(36160,36065,3553,M,0),T.activeTexture(33984+m+2),T.bindTexture(3553,Y),T.framebufferTexture2D(36160,36066,3553,Y,0),nE(T),zE(T,F[v]),T.framebufferTexture2D(36160,36064,3553,M,0),T.framebufferTexture2D(36160,36065,3553,Y,0),nE(T),T.activeTexture(33984+m),p$(T,null),T.activeTexture(33984+m+1),p$(T,null),T.activeTexture(33984+m+2),p$(T,null),s.push(J,M,Y)}zE(T,W);var E=A.createTexture(f);return T.activeTexture(33990),T.bindTexture(3553,E),T.framebufferTexture2D(36160,36064,3553,E,0),p$(T,null),nE(T),s.push(E),_[0]=B,_[1]=G,w=!0}}}())return!1;A._programDefines.OIT=!0,A._glPrograms.genPhysicalProgramKeyOfScene(A._programDefines);var f=A._prg,v=(q(A.acquireProgram({type:"legacy"})),A.getGL()),J=At.for(v).directState(),M=I$(v,!0),Y=(Y=v.frameStack)&&Y.length?Y[Y.length-1]:null,m=(v.bindFramebuffer(36009,W),J.color.clear=[0,0,0,0],v.clear(16384),v.bindFramebuffer(36160,g[0]),v.drawBuffers([36064]),J.color.clear=[O,O,0,0],v.clear(16384),v.bindFramebuffer(36009,g[1]),J.color.clear=[-0,1,0,0],v.clear(16384),v.bindFramebuffer(36009,F[0]),v.drawBuffers([36064,36065]),J.color.clear=[0,0,0,0],v.clear(16384),v.bindFramebuffer(36009,F[1]),J.color.clear=[0,0,0,0],v.clear(16384),A.getPostProcessing().getRenderTarget());m&&m.isBinding(v)&&(m=m._blitDepthToSingle(v),v.bindFramebuffer(36160,g[0]),v.bindRenderbuffer(36161,m),v.framebufferRenderbuffer(36160,36096,36161,m),v.bindRenderbuffer(36161,null),v.bindFramebuffer(36160,null)),v.bindFramebuffer(36009,g[0]),v.drawBuffers([36064]),v.blendEquation(32776),S=3,y=4,x.bindTexture(At.for(v).directUniforms()),p(T,B,G);for(var E,Z=0,R=0;R<H;R++)v.bindFramebuffer(36009,g[Z=1-(E=R%2)]),v.drawBuffers([36064]),J.color.clear=[O,O,0,0],v.clear(16384),v.bindFramebuffer(36009,F[Z]),v.drawBuffers([36064,36065]),J.color.clear=[0,0,0,0],v.clear(16384),v.bindFramebuffer(36009,g[Z]),v.drawBuffers([36064,36065,36066]),v.blendEquation(32776),y=1+(S=3*E),x.bindTexture(At.for(v).directUniforms()),p(T,B,G),v.bindFramebuffer(36009,W),v.drawBuffers([36064]),v.blendEquation(32774),v.blendFuncSeparate(770,771,1,771),A.renderModel({type:"oitBackBlend",transparent:!0,uBackColor:s[3*Z+2]},{clear:!1});v.bindFramebuffer(36160,Y),v.blendFunc(1,771),A.renderModel({type:"oitFinal",transparent:!0,uFrontColor:s[3*Z+1],uBackColor:s[6]},{clear:!1}),J.blend.apply({equation:32774,func:[770,771,1,771]}),J.color.clear=M,delete A._programDefines.OIT,A._glPrograms.genPhysicalProgramKeyOfScene(A._programDefines),q(f)}},ko=function(T){this.gv=T,this.onMouseOver=this.onMouseOver.bind(this),this.resetProperties()};ko.Mode={Disable:0,Selection:1,MouseOver:2,Style:3},k9.ms_highlight=function(T){T.setHighlightMode=function(T){var B="selection"===T||"selected"===T?ko.Mode.Selection:"mouseover"===T||"hover"===T?ko.Mode.MouseOver:"style"===T?ko.Mode.Style:ko.Mode.Disable,G=this.getHighlightMode();this._highlightHelper.mode=B,this.firePropertyChange("highlightMode",G,T)},T.getHighlightMode=function(){var T=this._highlightHelper.mode;return T===ko.Mode.Selection?"selected":T===ko.Mode.MouseOver?"hover":T===ko.Mode.Style?"style":"disabled"},["type","color","width","glow","strength"].forEach(function(H){var f=H.replace(/(^|\.)[a-z]/g,function(T){return T[T.length-1].toUpperCase()});T["getHighlight"+f]=function(){return this._highlightHelper[H]},T["setHighlight"+f]=function(T){var B=this._highlightHelper,G=B[H];T!==G&&(B[H]=T,this.firePropertyChange("highlight"+f,G,T))}})},Es(ko,N,{onMouseOver:function(T){vt.preventDefault(T);var B=this.gv;B._48Q||(T=B.getDataAt(T))!==this.mouseOverData&&(this.mouseOverData=T,B.iv())},setFetchTargetFunc:function(T){this.fetchTargetFunc=T},_42:function(T,B){var G,H,f=this,v=f._mode,J=f.gv;if(!T._renderInfo.reflectDepth&&v!==ko.Mode.Disable){if(v===ko.Mode.Selection?G=J.sm().getSelection().toArray(function(T){return T.s("highlight.visible")}):v===ko.Mode.MouseOver&&f.mouseOverData&&f.mouseOverData.s("highlight.visible")&&(G=[f.mouseOverData]),f.fetchTargetFunc&&(G=f.fetchTargetFunc(G)),v===ko.Mode.Style)G=G||[],H=function(T){if(0<=G.indexOf(T))return!1;var B=J.getDataHighlightMode(T);return!1===B||!0!==B&&("selected"===B?!J.isSelected(T):"hover"!==B||T!==f.mouseOverData)};else{if(!G||!G.length)return;H=function(T){if(G.indexOf(T)<0)return!0}}var M,Y,m,v=J.isVRPresenting(),E=J._camera,Z=(E?(A=E.getSize(J),M=A[0],A=A[1]):(M=J.getWidth(),A=J.getHeight(),v&&(Y=J.getWidth,M/=2,J.getWidth=function(){return M},m=J.getViewport())),J.getDevicePixelRatio()),R=Math.floor(M*Z),A=Math.floor(A*Z),g=((Z=f._renderTarget)?Z.setSize(T,R,A):f._renderTarget=Z=new sx.RenderTarget(J,T,R,A),"soft"===f.type);Z.bind(T),g?(F=I$(T,!0),D$(T,[1,1,1,1]),T.clear(16384),D$(T,F)):T.clear(16384),J.setViewport(T,0,0,R,A),J.drawFilter=function(T){return!T.s("static")&&H(T)},Tx=function(T,B,G,H,f,v){return v?Bx(T,B,G,H,f,v):(B=[0,1,1,1],At.for(T).directUniforms().uFixPickReverseColor=B)},J.getRenderLists().each(function(T){T.beginFillHighlightMaskColor(H)});(F=T._blooming)&&(T._blooming=!1),J.renderPickScene(),F&&(T._blooming=!0),Tx=Bx,J.drawFilter=null,J.getRenderLists().each(function(T){T.endFillHighlightMaskColor()}),Z.unbind(T);var B=J._prg,F=(lt&&V$(T,B.aPosition),V$(T,B.aNormal),!E&&v&&(J.getWidth=Y,J.setViewport(T,m[0],m[1],m[2],m[3])),J.getHighlightColor());return f._lastHighlightColor!==F&&(Z=X0(f._lastHighlightColor=F),f._highlightColorData=[Z[0]/255,Z[1]/255,Z[2]/255,Z[3]/255]),g?f.renderSoftOutline(T,R,A):f.renderHardOutline(T,R,A),At.for(T).useProgram(B=J._prg=J.acquireProgram({type:"legacy",defines:{}})),lt&&(E=T,(v=B.aPosition)!=ft&&0<=v&&E.enableVertexAttribArray(v)),!0}},renderHardOutline:function(T,B,G){var H=this.gv,f=H._postProcessing;(T=At.for(T).directState()).blend.enabled=!0,T.depth.enabled=!1,f.blitScreen({type:"highlightHard",image:this._renderTarget.texture,textureSize:[B,G],edgeWidth:H.getHighlightWidth(),edgeColor:this._highlightColorData},{clear:!1}),T.blend.enabled=!1,T.depth.enabled=!0},renderSoftOutline:function(T,B,G){var H,f,v,J,M,Y=this,m=Y.gv,E=m._postProcessing,Z=Math.floor(B/2),R=Math.floor(G/2),B=Math.floor(B/4),G=Math.floor(G/4),A=Y._downSampleRenderTarget,g=(A?(H=Y._edgeDetectionRenderTarget,f=Y._blurV2,v=Y._blurH2,J=Y._blurV4,M=Y._blurH4,A.width===Z&&A.height===R||(A.setSize(Z,R),H.setSize(Z,R),f.setSize(Z,R),v.setSize(Z,R),J.setSize(B,G),M.setSize(B,G))):(A=Y._downSampleRenderTarget=new sx.RenderTarget(m,T,Z,R),H=Y._edgeDetectionRenderTarget=new sx.RenderTarget(m,T,Z,R),f=Y._blurV2=new sx.RenderTarget(m,T,Z,R),v=Y._blurH2=new sx.RenderTarget(m,T,Z,R),J=Y._blurV4=new sx.RenderTarget(m,T,B,G),M=Y._blurH4=new sx.RenderTarget(m,T,B,G)),I$(T,!0)),F=m.getViewport(),W=Y.width,s=Y.strength,S=Y.glow,y=(x=At.for(T).glState).depth,x=x.blend,w=y.enabled;D$(T,[1,1,1,1]),y.enabled=!1,x.apply({func:[770,1]}),E.blitScreen(A,{type:"blitScreen",image:Y._renderTarget.texture}),E.blitScreen(H,{type:"highlightEdgeDetection",image:A.texture,texSize:[Z,R],color:Y._highlightColorData}),E.blitScreen(v,{type:"highlightBlur",image:H.texture,direction:[1,0],texSize:[Z,R],radius:W}),E.blitScreen(f,{type:"highlightBlur",image:v.texture,direction:[0,1],texSize:[Z,R],radius:W}),E.blitScreen(M,{type:"highlightBlur",image:f.texture,direction:[1,0],texSize:[B,G],radius:W}),E.blitScreen(J,{type:"highlightBlur",image:M.texture,direction:[0,1],texSize:[B,G],radius:W}),x.apply({enabled:!0}),m.setViewport(T,F[0],F[1],F[2],F[3]),E.blitScreen({type:"highlightFinalBlend",image:Y._renderTarget.texture,edgeTexture1:f.texture,edgeTexture2:J.texture,edgeStrength:s*W,edgeGlow:S},{clear:!1}),x.apply({func:[770,771,1,771]}),y.enabled=w,D$(T,g)},resetProperties:function(){this.mode=ko.Mode.Style,this.type=Ft["highlight.type"],this.color=Ft["highlight.color"],this.width=Ft["highlight.width"],this.glow=Ft["highlight.glow"],this.strength=Ft["highlight.strength"]},contextLost:function(){this._renderTarget=null}}),N.defineProperties(ko.prototype,{mode:{get:function(){return this._mode},set:function(T){var B=this._mode;T!==B&&(this._mode=T,B=B===ko.Mode.MouseOver||B===ko.Mode.Style,(T=T===ko.Mode.MouseOver||T===ko.Mode.Style)&&B||(B&&Bt(this.gv.getView(),"mousemove",this.onMouseOver),T&&Tt(this.gv.getView(),"mousemove",this.onMouseOver)))}}});((T=sx.PrefabRenderer=function(T){this.gv=T}).prototype={}).constructor=T,Ya("model"),Ya("mesh"),Ya("material"),Ya("shader"),U8={},l8=[],b8=new K,K8=[0,0,0],z8={aPosition:"vs",aUv:"uv",aUv2:"uv2",aNormal:"ns"},n8={type:"fixColor",color:"gray"},$8={type:"fixColor",color:"black"},V8={5126:1,35664:2,35665:3,35666:4,35674:4,35675:9,35676:16},P8={triangles:4,triangleStrip:5,triangleFan:6,lines:1,lineLoop:2,lineStrip:3,points:tE.POINTS},k8={groundColor:[0,0,0]},C8=new K,a8=new K,T.prototype.render=function(N,T,Q,B){if(!1!==T.visible){var G,J=this.gv,N=XN(N,Q);if(G=T.matDef)for(var L in G)U8[L]=G[L];var H,f,j=QN().copy(b8),B=(B&&b8.fromArray(B),rN(T,Rt)),r=(b8.multiply(B),LN(B),!1),X=!1,U=!1;do{if(M=T.model){(M=vt.getShape3dModel(M)||vt.getModel(M))&&this.render(r8,M,Q);break}var l=T.mesh;if(!l)break;var v,b,M=J._picking;if(Rt&&Rt.s("static"))if((Y=(Y=J.getRenderLists().get(Rt.getRenderLayer()).getModel3dInstancedBatchMap())&&Y[J.getStaticInstancingKey(Rt)])&&Y.length){if(Y.rendered&&Y.rendered!==Rt._id)break;if(v=VN(J,Rt,b8,Y,!1),M){if(Y._highlightInvalid)break;b=function(T){var B=T.cachePick;if(B.length!==T.length||B.version!==T.csVersion){B.buffer=new Fs(4*T.length);for(var G=0,H=B.buffer,f=T.cs,v=4*T.length;G<v;G+=4)H[G]=f[G],H[G+1]=f[G+1],H[G+2]=f[G+2],H[G+3]=f[G+3];B.length=T.length,B.version=T.csVersion}return B.buffer}(Y)}Y.rendered=Rt._id}var Y=!1,m=null,K=!1,E=T.mat;if(E){if(E instanceof Array){var Z=T.subMeshes;if(Z){for(var z=Z._drawRangeGroupByMat||function(T){for(var B=[],G=0;G<T.length;G++){var H,f=T[G].materialIndex;(H=B[f])||(B[f]=H=[]),H.push(T[G].start,T[G].count)}return T._drawRangeGroupByMat=B}(Z),R=0;R<z.length;R++)this.render(r8,{mesh:l,mat:E[R],instances:T.instances,drawRange:z[R]},Q);break}}if("string"==typeof E){if(Z=jN(Rt,E)||U8[E]){if(Et(Z)&&!(Z=vt.getMaterial(Z)))break}else if(!(Z=vt.getMaterial(E)))break;E=Z}}else E=n8;var A,n=!0===E.transparent;if(!!J._45Q!=n)break;X8=BK[E.type];var g,F=!!(T.skeleton&&Rt&&(A=J._updatedSkeletonDatas[T._skeletonId+"|"+Rt._lastAnimTimestamp]));if(F&&(J.getPrefabBoneTexture(T)?(g=T.boneTextureSize,r8.activeTexture(33984),p$(r8,J.getPrefabBoneTexture(T)),r8.texImage2D(3553,0,34836,g,g,0,6408,5126,A),p$(r8,ft)):(g=T.boneTextureSize=Math.round(Math.sqrt(A.length/4)),J.setPrefabBoneTexture(T,J.createTexture({data:A,width:g,height:g,type:5126,filter:9728,clampToEdge:!0})))),!M||E.renderPickMap){var W=At.for(r8),s=E.type||"fixColor";if(!(O=XE[s])||O.isRaw)if(O)x=J.acquireProgram({type:s,cacheKey:s});else{if(!(O=vt.getShader(s)))break;if(!(O=bo(O))){XE[s]=XE.fixColor;break}O.isRaw=!0,XE[s]=O,x=J.acquireProgram({type:s,cacheKey:s},!0)}else{var S=Rt?Rt.s("3d.clip.direction"):0;switch(Rt&&r8._blooming&&!Rt.s("bloom")&&(s="fixColor",$8.cullFace=E.cullFace,$8.flipSide=E.flipSide,E=$8),s){case"fixColor":x=J.acquireProgram({type:"fixColor",defines:{CLIP_DIRECTION:!!S,USE_INSTANCING:!(!T.instances&&!v)}});break;case"pbr":case"phong":var $,y,V=1,P=((Rt||j8)&&-1!==(y=Rt?Rt.s("envmap.probe"):j8.envmapProbe||0)&&($=!0,(V=Rt?Rt.s("envmap"):j8.envmap||0)&&(V*=J._envmapRenderer._envmapIntensity[y],m=y)),$||!(m=E.envmap||E.envMap)||(y=J.getTexture(m))&&y!==r8._emptyTexture||(m=null),J._glPrograms.genPhysicalProgramKeyOfMat(E,{clipDirection:S,isTransparent:n,useInstancing:!(!T.instances&&!v),useDisplacement:!!E.displacementMap&&J._glCapabilities.vertexTextures,aoMapUvChannel:KN("aoUvChannel",E,X8)||1,useUvClip:!(!J._uvClipEnabled||"uv.left"!=S&&"uv.right"!=S),skeleton:F,alphaChannel:KN("alphaChannel",E,X8),aoChannel:KN("aoChannel",E,X8),roughnessChannel:KN("roughnessChannel",E,X8),metalnessChannel:KN("metalnessChannel",E,X8),toneMapping:J.getToneMapping(),rectsNum:J._87I.length,envMapCombine:KN("envMapCombine",E,X8),envmap:m})),x=J.acquireProgram({type:s,cacheKey:J._sceneProgramDefinesMask+P.toString(),cacheKeyOfMat:P,extensions:E.enableTransmission?{GL_EXT_shader_texture_lod:!0}:null});break;default:x=J.acquireProgram(E)}}if(!x)break;U=!0,W.useProgram(x);var w=W.directUniforms(),k=W.directState(),O=Rt&&Rt._forceSingleFace,_=(k.cullFace.enabled=!(!O&&!E.cullFace),!!E.flipSide);if(b8.determinant()<0&&(_=!_),k.cullFace.frontFace=(_=2===O?!_:_)?2304:2305,(K=(Y=x&&("pbr"===x.name||"phong"===x.name))&&J._glUbos.supportsUbo)?J._glUbos.updateAndBind("scene",x):(w.uProjectMatrix=J._projectMatrix,w.uViewMatrix=J._viewMatrix,w.uCameraPosition=J.getEye(),w.uTime=J.__uptime),x._dirty){if(x._dirty=Ht,Y){var p,q=Bt=D=p=I=i=_=O=u=void 0,u=J,O=w,_=(_=u._headlightDirection)&&3===_.length?_:"shadow"===_?u.shadowMap.getDirection():Ws(u.getCenter(),u.getEye()),q=u._lastLightUploadInfo.headlightColor;if(k8.color=bN(q,Math.PI*u._headlightRatioForPhysicalMaterial),O.hemisphereLight.direction=Zt.normalizeArray(u._transformDirectionToViewSpace(_)),O.hemisphereLight.groundColor=k8.groundColor,O._lastLightMask=Ht,O._lastHeadlightAmbientIntensity=Ht,p=u._59O){for(i=0,I=p.length,D=[];i<I;i++)D.push({position:u._transformPointToViewSpace(p[i].p3()),color:nN(p[i]),distance:p[i].s("light.range"),decay:1,enable:!1});O.pointLights=D}if(p=u._spots){for(i=0,I=p.length,D=[];i<I;i++){var C=p[i].s("light.angle");D.push({position:u._transformPointToViewSpace(p[i].p3()),color:nN(p[i]),direction:p[i].s("light.rotation.enable")?u._transformDirectionToViewSpace(B$([0,0,1],p[i])):u._transformDirectionToViewSpace(p[i].s("light.center"),p[i].p3()),decay:1,enable:!1,distance:p[i].s("light.range"),coneCos:Mt(C/2),penumbraCos:Mt(C/2*(1-p[i].s("light.exponent")))})}O.spotLights=D}if(p=u._dirs){for(i=0,I=p.length,D=[];i<I;i++)D.push({direction:p[i].s("light.rotation.enable")?u._transformDirectionToViewSpace(B$([0,0,1],p[i])):u._transformDirectionToViewSpace(null,p[i].p3()),color:nN(p[i]),enable:!1});O.directionalLights=D}if(p=u._87I){for(var a,Tt,Bt=new Zt,i=0,I=p.length,D=[];i<I;i++)K9.fromArray(hs(p[i])),K9.premultiply(z9.fromArray(u._viewMatrix)),z9.identity().extractRotation(K9),a=Bt.set(.5*-p[i].s("light.size")[0],0,0).applyMatrix4(z9).toArray(),Tt=Bt.set(0,.5*p[i].s("light.size")[1],0).applyMatrix4(z9).toArray(),D.push({position:u._transformPointToViewSpace(p[i].p3()),color:nN(p[i]),halfWidth:a,halfHeight:Tt,enable:!1,disableSpecular:p[i].s("light.specular.disable")});O.rectAreaLights=D,vt.LTC_FLOAT_1&&((q=u.getGL())._LTC_1||(q._LTC_1=u.createTexture(vt.LTC_FLOAT_1)),q._LTC_2||(q._LTC_2=u.createTexture(vt.LTC_FLOAT_2)),O.ltc_1=q._LTC_1,O.ltc_2=q._LTC_2)}}w.uClipperMatrix=J._boxClipperMatrixes,w.uClipperClipInner=J._boxClipperClipInner,K||(J._fogDisabled||(w.uFogColor=J._fogColor,w.uFogDensity=J._fogDensity,w.uFogNear=J._fogNear,w.uFogFar=J._fogFar),w.toneMappingExposure=J.getToneMappingExposure()),J.shadowMap.enable&&J.shadowMap.createShadow(w)}else J.shadowMap.enable&&J.shadowMap.createShadow(w,!0);J.rebindOITTexture(w),J.flowMap.createFlow(w),J._87I&&vt.LTC_FLOAT_1&&(w.ltc_1=r8._LTC_1,w.ltc_2=r8._LTC_2),E.enableTransmission&&"pbr"===x.name&&r8._transmissionRTT&&(w.transmissionSamplerMap=r8._transmissionRTT.texture,w.transmissionSamplerSize=r8._transmissionRTT.getSize()),E.uUvMatrix=Ax(E.uvRotation,E.uvOffset,E.uvScale,E.uvAnchor)}var h,_=v?{aMatrixInstanced:v,aBatchColor:b}:T.instances,o=function(T,B,v){var G=lN(B);if(!G)return 0;if(eo(G)||!G._4HQ)for(var H in G._4HQ=!0,G)"is"!==H&&m1(G[H])&&(G[H]=new Fs(G[H]));if(v&&!v._complete_)for(var H in v._complete_=!0,v)m1(v[H])&&(v[H]=new Fs(v[H]));(B=At.for(r8).directAttribs()).disable();var J,f=G.index||G.is,M=!f,Y=0;return B.apply(G,function(T,B,G){var H,B=z8[B]||B;if(v&&(H=v[B])!==Ht){if(!H.length)return null;var f=V8[G.desc.activeInfo.type];return Y=Y||H.length/f,b$(r8,null,H,null,f)}return(H=T[B])!=Ht&&H.length?(M&&(M=!1,J=H.length/V8[G.desc.activeInfo.type]),K$(r8,null,H)):null}),f?(n$(r8,T._buffer.is,f),{length:f.length,instances:Y,indexType:f instanceof Uint32Array?5125:f instanceof Uint8Array?5121:null,is:!0}):J||G.vs?{length:J||G.vs.length/3,instances:Y,is:!1}:0}(J,l,_);if(!o)break;o.instances&&(w=w||At.for(r8).directUniforms(),b&&(w.uBatchColor=!0),X=w.uUseInstance=!0),v?C$(J):(r=!0,C$(J,b8.getElements())),!M||E.renderPickMap?(w=w||W.directUniforms(),Rt?L$(r8,J,Rt,Y):j8&&(O=r8,q=J,H=j8,c=Y,h=f=void 0,f=At.for(O).directUniforms(),h=H.alphaTest,f.uAlphaTest=h===Ht?Ft.alphaTest:h,h=q._picking,f.shadowReceive=!h&&!1!==H.shadowReceive,o$(q,f,H.clipboxMask===Ht?jE:H.clipboxMask),f.blackout=!(!O._blooming||H.bloom),h||(q._flowObjects.length&&q.flowMap.resetFlowUniform(H.effectFlowMask===Ht?jE:H.effectFlowMask,f),c||(H.envmap!==Ht?(f.uUseEnvMap=!0,f.roughness=H.roughness||0,q._setEnvmapByProbeId(f,H.envmapProbe||0,H.envmap)):(f.uUseEnvMap=!1,f.envMapIntensity=0),G$(q,f,H.lightMask===Ht?jE:H.lightMask,H.headlightAmbientIntensity)),f.uFog=!0)),Y&&(Rt?$N(w,J,Rt._currentFaceLightMask!=ft?Rt._currentFaceLightMask:Rt.s("shape3d.light")?Rt.s("light.mask"):0,Rt.s("headlight.ambientIntensity")||J._headlightAmbientIntensity):j8?$N(w,J,j8.light==ft?j8.lightMask===Ht?jE:j8.lightMask:0,j8.headlightAmbientIntensity||J._headlightAmbientIntensity):$N(w,J,0,0),m!=ft&&($?(h=J._envmapRenderer._envmaps[m],w.envmap=h?h.texture:r8._emptyTexture):w.envmap=J._envmapRenderer.assureEnvmapFromEquirectangular(m),w.envMapIntensity=V*KN("envMapIntensity",E,X8)),F&&zN(w,T,J.getPrefabBoneTexture(T))),Y?function(T,B,G,H,f,v){var J,M,Y,m,E,Z,R,A,g,F,W,s=v.type,S=GK[s];if(G){if(!(W=(F=T._glUbos).attachUbo(s,v,T._renderId))){for(M=0,Y=S.length;M<Y&&-1!==(m=S[M]);M+=2)Z=v[m],E=S[M+1],Z&&(Z instanceof WebGLTexture||(Z=T.getTexture(Z,H)),f[m]=Z),M+=2*E;return F.updateAndBind(s,B)}}else W=f;for(J=!0,M=0,Y=S.length;M<Y;M+=2)if(-1===(m=S[M]))J=!1,M--;else{if(E=0,R=!1,-2===m?(E=(Y-M-1)/2,M--,R=!0):(Z=v[m],E=S[M+1],Z&&(!J||Z instanceof WebGLTexture||(Z=T.getTexture(Z,H)),J?f[m]=Z:W[m]=Z,R=!0)),R)for(g=(A=M+2)+2*E;A<g;A+=2)(Z=v[m=S[A]])===Ht&&(Z=S[A+1]),W[m]=Z;M+=2*E}W.uUvMatrix=v.uUvMatrix;var y=v.uUv2Matrix;y&&(W.uUv2Matrix=y),G&&F.updateAndBind(s,B)}(J,x,K,Rt,w,E):w.apply(E,function(T,B,G){if("envmap"!==B&&"envMapIntensity"!==B){if((f=(f=T[B])===Ht&&X8?X8[B]:f)&&(35678===G||35680===G)&&!(f instanceof WebGLTexture))if(m1(f))for(var H=f,T=H.length,f=new Array(T),v=0;v<H.length;v++)f[v]=J.getTexture(H[v],Rt);else f=J.getTexture(f,Rt);return f}})):F&&zN(w=w||At.for(r8).directUniforms(),T,J.getPrefabBoneTexture(T));var e,c,t=P8[E.renderMode];if(Rt&&J.onPreRenderData(Rt,r8),e=T.drawRange)for(var R=0,Gt=e.length;R<Gt;R+=2)o.is?U$(r8,e[R],e[R+1],t,o.indexType,o.instances):X$(r8,e[R],e[R+1],t,o.instances);else o.is?U$(r8,0,o.length,t,o.indexType,o.instances):X$(r8,0,o.length,t,o.instances)}while(Rt&&J.onPostRenderData(Rt,r8),F&&(w.uUseSkinning=!1),M&&((c=At.for(r8).directAttribs()).aNormal=!1,c.aUv=!1,c.skinIndex=!1,c.skinWeight=!1),0);r&&P$(J),X&&(w.uUseInstance=!1,w.uBatchColor=!1),U&&J._prg&&(W.useProgram(J._prg),W.directAttribs().disable(),k.cullFace.frontFace=2305,J.shadowMap.enable&&J.shadowMap.createShadow(null,!0),J.rebindOITTexture(),J._envmapRenderer.resetUniformCache(),J.flowMap.createFlow());var d=T.comps;if(d&&d.length)for(R=0,Gt=d.length;R<Gt;R++)this.render(r8,d[R],Rt);if(LN(b8),b8=j,G=T.matDef)for(var L in G)U8[L]=Ht;UN(N)}},T.prototype.renderShadow=function(T,B,G,H,f){if(!1!==B.visible){var v,T=XN(T,G),J=QN().copy(b8);if(H&&b8.fromArray(H),v=B.matDef)for(var M in v)U8[M]=v[M];H=rN(B,Rt),b8.multiply(H),LN(H);do{var Y,m=B.model;if(m){(m=vt.getShape3dModel(m)||vt.getModel(m))&&this.renderShadow(r8,m,G,null,f);break}if(!(m=lN(B.mesh)))break;if(Rt&&Rt.s("static")){var E=this.gv,Z=E.getRenderLists().get(Rt.getRenderLayer()).getModel3dInstancedBatchMap();if((Z=Z&&Z[E.getStaticInstancingKey(Rt)])&&Z.length){if(Z.rendered&&Z.rendered!==Rt._id)break;Y=VN(E,Rt,b8,Z,!0),Z.rendered=Rt._id}}if(eo(m),E=B.mat){if("string"==typeof E){if(Z=jN(Rt,E)||U8[E]){if(Et(Z)&&!(Z=vt.getMaterial(Z)))break}else if(!(Z=vt.getMaterial(E)))break;E=Z}}else E=n8;var R=Y?{aMatrixInstanced:Y}:B.instances}while(f(b8,m,E,R,B),0);var A=B.comps;if(A&&A.length)for(var g=0,F=A.length;g<F;g++)this.renderShadow(r8,A[g],Rt,null,f);if(LN(b8),b8=J,v=B.matDef)for(var M in v)U8[M]=Ht;UN(T)}};var Co=L.Light=function(){O1(Co,this),this.s(LE,Ft[LE]),this.s(IB,"sphere"),this.s("shape3d.reverse.cull",!0),this.s3(20,20,20)},ao=(r4("Light",LW,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(T,B,G){Co.superClass.onStyleChanged.apply(this,arguments),T===LE&&this.s("shape3d.color",G)}}),sx.FrameState=function(T,B){this.renderState=At.for(B),this.picking=!1,this.envmapReflectivity=.5,this.cameraPosition=Ht,this.projectMatrix=Ht,this.viewMatrix=Ht,this.view=T,this.defaultProgram=Ht,this.pickColorMap=Ht,this._pvStack=[],this._renderStateStack=[]}),TZ=(ao.prototype.savePV=function(){var T=this.view;this._pvStack.push([ws(this.projectMatrix),ws(this.viewMatrix),T._18Q,ws(T._7O)])},ao.prototype.restorePV=function(){var T,B=this._pvStack.pop();B&&(T=this.view,this.projectMatrix=T._projectMatrix=B[0],this.viewMatrix=T._viewMatrix=B[1],T._18Q=B[2],T._7O=B[3])},ao.prototype.setPV=function(T,B){var G,H=this.view,f=!1;T&&(this.projectMatrix=H._projectMatrix=T,f=!0),B&&(this.viewMatrix=H._viewMatrix=B,H._7O=ws(B),f=!0),f&&(T=H.getWidth(),f=H.getHeight(),G=ws(this.projectMatrix),H._18Q=Z$(G,G,B),H._18Q._wh=T/f)},ao.prototype.syncEnv=function(T){var B=this.view;this.envmapReflectivity=B._envmapReflectivity||.5,this.cameraPosition=B.getEye(),this.projectMatrix=B._projectMatrix,this.viewMatrix=B._viewMatrix,this.pickColorMap=T,this.picking=B.getGL()._picking},ao.prototype.setGLState=(TA=[0,0,0,0],BA=[!0,!0,!0,!0],GA=[-1,1],HA=[32774,32774],fA=[770,771,1,771],function(T,B){this.renderState.gl;var G=this.renderState.glState;G.dither=!1,B?G.color.mask=BA:G.color.reset(),G.pixelStore.reset(),G.blend.color=TA,G.blend.equation=HA,G.blend.func=fA,G.cullFace.enabled=!1,G.scissor.enabled=!1,G.depth.enabled=!0,G.depth.clear=1,G.depth.func=515,G.depth.range=GA,G.stencil.enabled=!1,G.polygonOffset.enabled=!1,T?(G.depth.mask=!1,G.blend.enabled=!0):(G.depth.mask=!0,G.blend.enabled=!1)}),ao.prototype.setUniforms=function(T){var B,G,H,f,v,J,M,Y,m,E,Z,R,A,g,F,W,s,S=this.view,y=this.renderState,x=y.gl;(y=y.uniforms).uBrightness=1,y.uOpacity=1,y.uPartOpacity=1,y.uUseSkinning=!1,y.uUseInstance=!1,y.uTexture=!1,y.uBlendTexture=!1,y.uAlphaTest=Ft.alphaTest,y.uTransparent=!!T,y.uFix=!1,y.uBatchColor=!1,y.uBatchBlend=!1,y.uBatchBrightness=!1,y.envMapIntensity=this.envmapReflectivity||.5,y.uCameraPosition=this.cameraPosition,y.uProjectMatrix=this.projectMatrix,y.uViewMatrix=this.viewMatrix,y.uEnvMap=null,o$(S,y,rE),y.uClipperMatrix=S._boxClipperMatrixes,y.uClipperClipInner=S._boxClipperClipInner,y.uEnvmapQuat=S._envmapExtraQuaternion,S._envmapRenderer.resetUniformCache(),this.picking||(B=S,T=x,T=At.for(T).directUniforms(),A=B._lastLightUploadInfo={c:[],g:[],e:[]},(x=B._headlightDirection)&&3===x.length?g=x:"shadow"===x&&(g=B.shadowMap.getDirection()),g=g?Zt.normalizeArray(B._transformDirectionToViewSpace(null,g)):[0,0,0],T.uHeadlightDirection=g,T.uHeadlightRange=B._headlightRange,x=T.uHeadlightAmbientIntensity=B._headlightAmbientIntensity,g=B._headlightIntensity,F=U0(B._headlightColor),1!==g&&(F=[F[0]*g,F[1]*g,F[2]*g]),T.uHeadlightColor=A.headlightColor=[F[0],F[1],F[2],(g=B._headlightDisabled)?1:0],A.c.push(F[0],F[1],F[2]),A.g.push(g?-1:B._headlightGroup),A.e.push(g?1:0),F=B._59O,g=B._spots,W=B._dirs,s=B._87I,F.length&&(G=[],H=[],f=[],F.forEach(function(T){T$(G,T,A),W1(H,B._transformPointToViewSpace(T.p3())),f.push(T.s("light.range"))}),T.uPointColor=G,T.uPointRange=f,T.uPointPosition=H),g.length&&(v=[],J=[],M=[],Y=[],m=[],E=[],g.forEach(function(T){T$(v,T,A),W1(J,B._transformPointToViewSpace(T.p3())),T.s("light.rotation.enable")?W1(m,B._transformDirectionToViewSpace(null,B$([0,0,1],T))):W1(m,B._transformDirectionToViewSpace(T.p3(),T.s("light.center"))),M.push(T.s("light.range")),Y.push(Mt(T.s("light.angle")/2)),E.push(T.s("light.exponent"))}),T.uSpotColor=v,T.uSpotRange=M,T.uSpotAngle=Y,T.uSpotExponent=E,T.uSpotPosition=J,T.uSpotDirection=m),W.length&&(Z=[],R=[],W.forEach(function(T){T$(Z,T,A),T.s("light.rotation.enable")?W1(R,B._transformDirectionToViewSpace(null,B$([0,0,1],T))):W1(R,B._transformDirectionToViewSpace(T.p3()))}),T.uDirColor=Z,T.uDirDirection=R),s.length&&s.forEach(function(T){T$([],T,A)}),T._lastLightMask=jE,T._lastHeadlightAmbientIntensity=x,S._fogDisabled||(y.uFogColor=S._fogColor,y.uFogDensity=S._fogDensity,y.uFogNear=S._fogNear,y.uFogFar=S._fogFar))},ao.prototype.drawLayer=function(T,B){return this.view.renderLayers(T,!0)},ao.prototype.drawData=function(T,B,G){var H,f,v,J,M,Y,m=this.view;m.isVisible(T)&&(f=(H=this.renderState).uniforms,(T=m.getData3dUI(T))&&(J=(v=H.gl)._picking,M=m._picking,Y=T._pickId,G&&(T._pickId=G),v._picking=m._picking=!!G,f.uTransparent=!!B,T._42(H.gl,H.program,B?u:x),v._picking=J,m._picking=M,T._pickId=Y))},sx.Graph3dView=function(T,B){var G,H,f=this;f.resetHeadlightProperties(),f.resetFogProperties(),f._webGLVersion=1,f._attributes=B||vt.graph3dViewAttributes,f._25I={},f._attributes&&(G=f._attributes.view)?G._ht=f:G=j1(1,f),f._view=G,f._attributes&&(H=f._attributes.canvas)||(H=X1(f._view)),f._canvas=H,f.__startTime=Date.now(),f.__uptime=0,Tt(H,"webglcontextlost",function(T){T.preventDefault(),f._26I&&(f._doBufferGC(f._26I,!0),b1(f._canvas,0,0),["_highlightHelper","shadowMap","flowMap","_envmapRenderer","_postProcessing","_depthPeelingRenderer"].forEach(function(T){(T=f[T])&&T.contextLost()}),f.dm().each(function(T){f.getData3dUI(T).contextLost()})),f._26I=ft,f._1o.onContextLost(),f._35O=!0}),Tt(H,"webglcontextrestored",function(T){f._35O=!1,f.iv()}),f._40Q=new mZ(f),f._43Q={},f._44Q=-1,f._boneViewMatrices=[],f._batchIndexMap={},f._batchModelMap={},f._wireframeIndexMap={},f._wireframeModelMap={},f._wireframeIndexMapSwap={},f._wireframeModelMapSwap={},f._polylineIndexMap={},f._polylineIndexMap={},f._polylineIndexMapSwap={},f._polylineIndexMapSwap={},f._8O=[],f._modelMatrixStack=[],f._7O=ys(),f._6O=ys(),f._modelMatrix=ys(),f._1o=new FZ(f),f._30O=new SZ(f),f._31O=new WZ(f),f._32O=new sZ(f),f._raycaster=new DZ(f),f._highlightHelper=new ko(f),f._postProcessing=new ZK(f),f._41Q=[],f._42Q=0,f._frameRenderOptionStack=[],sx.VR?(f.vr=new sx.VR(f),f.isVREnabled=function(){return this.vr.enable},f.isVRPresenting=function(){return this.vr.isPresenting()}):(f.vr={enable:!1,isPresenting:y},f.isVREnabled=y,f.isVRPresenting=y),f.shadowMap=new $o(f),f.flowMap=new Vo(f),f._33Q=!0,f._eye=o2(vt.graph3dViewEye),f._center=o2(vt.graph3dViewCenter),f._up=o2(vt.graph3dViewUp),f._lightChanged=!1,f._59O=[],f._spots=[],f._dirs=[],f._87I=[],f._boxClippers=[],f._boxClipperVersion=0,f._flowObjects=[],f._transmissionObjects=[],f._frameId=0,f._renderId=0,f._picking=!1,f._tempCameraQueue=[],f._batchInfoMap={},f._updatedSkeletonDatas={},f._renderLayerInfoMap={},f._renderLayerSettingsVersion=0,f._gatherRenderLayersByPriority(!0),f.overlappingBox=new Ba(f),f._envmapRenderer=new sx.EnvmapRenderer(this),f._prefabRenderer=new sx.PrefabRenderer(this),f.dm(T||new sJ),f._coreInteractor=new ua(this),f.setInteractors([new ZZ(f)]),f.enableQuickVisibleMode(),f._initView(),f._genBatchInstancedArrayFunc(),f.genProgramDefines(),f._setupPVMatrix()}),BZ={box:1,sphere:2},GZ={addRGB:"FLOW_BLEND_MODE_ADD_RGB",addRGBA:"FLOW_BLEND_MODE_ADD_RGBA",overrideRGBA:"FLOW_BLEND_MODE_OVERRIDE_RGBA",overrideRGB:"FLOW_BLEND_MODE_OVERRIDE_RGB",overrideA:"FLOW_BLEND_MODE_OVERRIDE_A",multiplyRGB:"FLOW_BLEND_MODE_MULTIPLY_RGB",multiplyRGBA:"FLOW_BLEND_MODE_MULTIPLY_RGBA"},HZ=0,fZ=(v("Graph3dView",N,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_shadow:1,ms_highlight:1,ms_quickVisible:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","editHelperDisabled","blockSelectable","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable","zoomToCenter",ae,TB,"firstPersonMode",EB,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightDirection","headlightColor","headlightIntensity","headlightAmbientIntensity","headlightRatioForPhysicalMaterial","headlightDisabled","headlightGroup","ortho","orthoWidth","syncEyeWithOrthoWidth","fovy","near","far",ve,fe,"up","aspect","fogDisabled","fogMode","fogDensity","fogColor","fogNear","fogFar","pickerResolution","dashDisabled","uvClipEnabled","batchColorDisabled","batchInstancedDisabled","batchBlendDisabled","batchBrightnessDisabled","flowBlendMode","hoverDelay","batchInfoMap","renderLayerInfoMap","rotateMinPhi","rotateMaxPhi","sortable","opaqueSortable","sortFunc","toneMapping","toneMappingExposure"],_editable:!1,_sortable:vt.graph3dViewSortable,_opaqueSortable:vt.graph3dViewOpaqueSortable,_editHelperDisabled:vt.graph3dViewEditHelperDisabled,_blockSelectable:vt.graph3dViewBlockSelectable,_devicePixelRatio:Ht,_boundaries:Ht,_parallelShaderCompile:!1,_moveStep:vt.graph3dViewMoveStep,_rotateStep:vt.graph3dViewRotateStep,_toneMapping:Ht,_toneMappingExposure:1,_rotateMinPhi:vt.graph3dViewMinPhi===Ht?vt.graph3dViewRotateMinPhi:vt.graph3dViewMinPhi,_rotateMaxPhi:vt.graph3dViewMaxPhi===Ht?vt.graph3dViewRotateMaxPhi:vt.graph3dViewMaxPhi,_pannable:vt.graph3dViewPannable,_rotatable:vt.graph3dViewRotatable,_walkable:vt.graph3dViewWalkable,_resettable:vt.graph3dViewResettable,_zoomable:vt.graph3dViewZoomable,_zoomToCenter:!0,_firstPersonMode:vt.graph3dViewFirstPersonMode,_mouseRoamable:vt.graph3dViewMouseRoamable,_gridVisible:vt.graph3dViewGridVisible,_gridSize:vt.graph3dViewGridSize,_gridGap:vt.graph3dViewGridGap,_gridColor:vt.graph3dViewGridColor,_originAxisVisible:vt.graph3dViewOriginAxisVisible,_centerAxisVisible:vt.graph3dViewCenterAxisVisible,_axisXColor:vt.graph3dViewAxisXColor,_axisYColor:vt.graph3dViewAxisYColor,_axisZColor:vt.graph3dViewAxisZColor,_ortho:vt.graph3dViewOrtho,_orthoWidth:vt.graph3dViewOrthoWidth,_syncEyeWithOrthoWidth:vt.graph3dViewSyncEyeWithOrthoWidth,_fovy:vt.graph3dViewFovy,_near:vt.graph3dViewNear,_far:vt.graph3dViewFar,_rectSelectable:vt.graph3dViewRectSelectable,_rectSelectBackground:vt.graph3dViewRectSelectBackground,_editSizeColor:vt.graph3dViewEditSizeColor,_autoMakeVisible:U4,_pickerResolution:vt.graph3dViewPickerResolution,_oitPassCount:3,_dashDisabled:vt.graph3dViewDashDisabled,_uvClipEnabled:vt.graph3dViewUvClipEnabled,_batchColorDisabled:vt.graph3dViewBatchColorDisabled,_batchInstancedDisabled:vt.graph3dViewBatchInstancedDisabled,_batchBlendDisabled:vt.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:vt.graph3dViewBatchBrightnessDisabled,_useOIT:!1,_oitEnabled:!1,_flowBlendMode:vt.graph3dViewFlowBlendMode,addCamera:function(T){var B=N.freeze({id:this._42Q++,priority:T.priority||0,ignoreInPick:!!T.ignoreInPick,render:T.render});T.switch3DStatus&&(this._43Q[B.id]=!0),this._41Q.push(B),this._41Q.sort(function(T,B){return T.priority!==B.priority?T.priority-B.priority:T.id-B.id})},setEye:function(T,B,G){1===arguments.length&&(B=T[1],G=T[2],T=T[0]);var H=this._eye;H[0]=T,H[1]=B,H[2]=G,this.fp(ve,ft,H)},setCenter:function(T,B,G){1===arguments.length&&(B=T[1],G=T[2],T=T[0]);var H=this._center;H[0]=T,H[1]=B,H[2]=G,this.fp(fe,ft,H)},setUp:function(T,B,G){1===arguments.length&&(B=T[1],G=T[2],T=T[0]);var H=this._up;H[0]=T,H[1]=B,H[2]=G,this.fp("up",ft,H)},setVisibleFunc:function(T){var B=this._visibleFunc;this._visibleFunc=T,this.fp("visibleFunc",B,T),T?this.isQuickVisibleMode()&&(this.disableQuickVisibleMode(),this._quickVisiblePending=!0):this._quickVisiblePending&&(this._quickVisiblePending=!1,this.enableQuickVisibleMode())},getDevicePixelRatio:function(){return this._picking?this._1o._resolution:this._devicePixelRatio||B2},isOITEnabled:function(T){return!!this._useOIT&&(!T||this._oitEnabled)},enableOIT:function(){var T=this;if(T._useOIT)return!0;if(T._useOIT=!0,!T.getGL())return!1;if(!T.isWebGL2())return!1;if(!T._glExtensions.get("EXT_color_buffer_float"))return!1;var B=Q.navigator;return!(B&&(/iPad|iPhone|iPod/.test(B.platform)||"MacIntel"===B.platform&&1<B.maxTouchPoints)||(T._oitEnabled=!0,T._depthPeelingRenderer||(T._depthPeelingRenderer=new Po(T)),T._depthPeelingRenderer.enableOIT(),T.iv(),0))},disableOIT:function(){return this._useOIT&&(this._useOIT=!1,this._oitEnabled&&(this._depthPeelingRenderer&&this._depthPeelingRenderer.disableOIT(),this._oitEnabled=!1,this.iv())),!0},setOITPassCount:function(T){this._oitPassCount=T,this.iv()},getOITPassCount:function(){return this._oitPassCount},rebindOITTexture:function(T){return!!this._oitEnabled&&this._depthPeelingRenderer.bindTexture(T)},isTransparentMask:function(T){return T.s("transparent.mask")},getCoreInteractor:function(){return this._coreInteractor},getHighlightHelper:function(){return this._highlightHelper},getRaycaster:function(){return this._raycaster},getAspect:function(){return this._aspect||this.getWidth()/this.getHeight()||1.2},getCanvas:function(){return this._canvas},setDataModel:function(T){var B=this,G=B._dataModel,H=B._selectionModel;G!==T&&(G&&(G.ump(B.handleDataModelPropertyChange,B),G.umm(B.handleDataModelChange,B),G.umd(B.handleDataPropertyChange,B),H||G.sm().ums(B.handleSelectionChange,B)),(B._dataModel=T).mp(B.handleDataModelPropertyChange,B),T.mm(B.handleDataModelChange,B),T.md(B.handleDataPropertyChange,B),H?H._21I(T):T.sm().ms(B.handleSelectionChange,B),B._postProcessing.handleDataModleChange(G,T),B._tryInvalidateEnvmap(),B.invalidateAll(!0),B.invalidateLight(),B.invalidateboxClipper(),B.invalidateFlowObjects(),B.invalidateTransmissionObjects(),B._49Q(),B.fp(qB,G,T),B._canvas.style.background=T.getBackground()||"")},handleDataModelPropertyChange:function(T){var B,G=T.property;"background"===G?(B=this._canvas.style.background,T=T.newValue||"",this._canvas.style.background=T,this.fp("canvasBackground",B,T)):"envmapType"===G?this._tryInvalidateEnvmap():"envmap"!==G&&"invalidateView"!==G||this.iv()},handleDataPropertyChange:function(T){var B=T.data,T=(this.invalidateData(B),T.property);VE(B)&&"s:light.type"===T?this.invalidateLight():"s:3d.clipbox"===T?this.invalidateboxClipper(B,!0):"s:effect.flow"===T?this.invalidateFlowObjects(B,!0):"s:shadow.cast"===T?this.shadowMap.tryUpdateBounding(B):"s:3d.visible"===T?this.invalidateQuickVisible(B):"s:shape3d.transmission"===T&&this.invalidateTransmissionObjects(B,!0)},invalidateboxClipper:function(T,B){var G=this._boxClippers,H=G.length;T?!!T.s("3d.clipbox")==(B=!!B)?G.indexOf(T)<0&&G.push(T):0<=(B=G.indexOf(T))&&G.splice(B,1):(G=this._boxClippers=[],this.dm().each(function(T){T.s("3d.clipbox")&&G.push(T)})),H!==(T=G.length)&&(this._updateBoxClipperMatrix(),o$=T?h$:jw),this.iv()},_setupPVMatrix:function(){this._projectMatrix=y$(this),S$(this,this._7O),this._viewMatrix=ws(this._7O)},_updateBoxClipperMatrix:function(){for(var T,B,G=this._boxClippers,H=this._boxClipperMatrixes=[],f=this._boxClipperClipInner=[],v=this._boxClipperGroups=[],J=this._boxClipperShape=[],M=new K,Y=0,m=G.length;Y<m;Y++)(T=G[Y]).appendAnchorMatrix3d(B=hs(T,this.getMat(T))),H.push(M.getInverse(M.fromArray(B)).toArray()),f.push("inner"===T.s("3d.clipbox")),v.push(T.s("3d.clipbox.group")),J.push(BZ[T.s("3d.clipbox.shape")]||1);this._boxClipperVersion++},_49Q:function(){this._4AQ||this._48Q||this.dm().size()<vt.graph3dViewDataNumWarningLine||(this._48Q=!0,console.log("Too many datas so than disable some feature to speed up.\nYou can set global Default.graph3dViewDataNumWarningLine to largeEnoughNum to avoid this, or call graph3dView.quitDataNumWarning() to quit.\n"),this.enableQuickVisibleMode(),this.getHighlightHelper().mouseOverData=null)},quitDataNumWarning:function(){this.disableQuickVisibleMode(),this._48Q=!1,this._4AQ=!0},invalidateFlowObjects:function(T,B){var G=this._flowObjects;T?!!T.s("effect.flow")==(B=!!B)?G.indexOf(T)<0&&G.push(T):0<=(B=G.indexOf(T))&&G.splice(B,1):(G=this._flowObjects=[],this.dm().each(function(T){T.s("effect.flow")&&G.push(T)})),this.iv()},invalidateTransmissionObjects:function(T,B){var G=this._transmissionObjects;T?!!T.s("shape3d.transmission")==(B=!!B)?G.indexOf(T)<0&&G.push(T):0<=(B=G.indexOf(T))&&G.splice(B,1):(G=this._transmissionObjects=[],this.dm().each(function(T){T.s("shape3d.transmission")&&G.push(T)})),this.iv()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(T){if(T=T.property,this.iv(),this._18Q=ft,"eye"===T)this._33Q=!0;else if("devicePixelRatio"===T)this._42(this.getDevicePixelRatio());else if("batchInstancedDisabled"===T){this._genBatchInstancedArrayFunc();var B,G=vt.getBatchInfoMap();for(B in G)G[B]&&G[B].instanced&&this.invalidateBatch(B);for(B in G=this._batchInfoMap)G[B]&&G[B].instanced&&this.invalidateBatch(B)}},_5O:function(T){var B=T._22Q();return B?new B(this,T):ft},getData3dUI:function(T){var B=this._25I[T._id];return B===Ht&&(B=this._5O(T),this._25I[T._id]=B),B},invalidateAll:function(T,B){var G=this;if(T){for(var H in G._25I)(H=G._25I[H])&&H.dispose();G._25I={},G.iv(),Ix(G)}else Ix(G),G.dm().each(function(T){G.invalidateData(T)});G.shadowMap.tryInvalidateLater(T,B)},invalidateSelection:function(){var B=this;B.sm().each(function(T){B.invalidateData(T)})},invalidateData:function(T){var B=this.getData3dUI(T);B&&(B.iv(),this.iv()),Ix(this,T)},getShape3dText:function(T){return T.getStyle("shape3d.text")||this.getLabel(T)},invalidateBatch:function(B){var G=this;G._40Q.each(function(T){G._invalidateBatch(B,T.batchModelMap,T.batchIndexMap),G._invalidateBatch("T"+B,T.wireframeModelMap,T.wireframeIndexMap),G._invalidateBatch("O"+B,T.wireframeModelMap,T.wireframeIndexMap),T.markBatchInvalid()}),G.iv()},_invalidateBatch:function(T,B,G){var H=this,f=B[T];if(f){f.ds.forEach(function(T){var B=H.getData3dUI(T);B&&(B.iv(),B.invalidateWireframe()),delete G[T._id]});var v=H.getBatchInfo(T)||Qw;if(!1!==v.keepData&&f.ms&&f.ms.length&&v.instanced&&!H.isBatchInstancedDisabled())return f.ds=[],f.ms=[],f.ics&&(f.ics=[]),void(f.ps&&(f.ps=[]));delete B[T]}},handleDataModelChange:function(T){var B,G,H=this,f=T.kind,T=T.data;"add"===f?(H.invalidateData(T),Z1(T)&&T.getEdgeGroup()&&T.getEdgeGroup().eachSiblingEdge(H.invalidateData,H),VE(T)&&H.invalidateLight(),T.s("3d.clipbox")&&H.invalidateboxClipper(T,!0),T.s("effect.flow")&&H.invalidateFlowObjects(T,!0),T.s("shape3d.transmission")&&H.invalidateTransmissionObjects(T,!0),H._49Q()):f===xe?(B=T._id,(G=H._25I[B])&&(G.dispose(),delete H._25I[B],H.iv()),T===H._currentSubGraph&&H.setCurrentSubGraph(ft),Ix(H,T),VE(T)&&H.invalidateLight(),T.s("3d.clipbox")&&H.invalidateboxClipper(T,!1),T.s("effect.flow")&&H.invalidateFlowObjects(T,!1),T.s("shape3d.transmission")&&H.invalidateTransmissionObjects(T,!1),T.isAnimationPlaying()&&T.stopAnimation()):f===we&&(H.invalidateAll(!0),H.setCurrentSubGraph(ft),Ix(H),H.invalidateLight(),H.invalidateboxClipper(),H.invalidateFlowObjects(),H.invalidateTransmissionObjects())},toCanvas:function(T,B,G){for(var H,f=this.getGL(),v=(this.validate(),T&&(H=f.getParameter(3106),D$(f,T)),this._42(1,{renderAxis:!1,renderEdit:!1,renderGrid:!1}),this.getWidth()||1),J=this.getHeight()||1,M=new Uint8Array(v*J*4),Y=X1(),m=Y.getContext("2d"),E=(f.readPixels(0,0,v,J,6408,5121,M),b1(Y,v,J,1),m.getImageData(0,0,v,J)),Z=E.data,R=0;R<Z.length;R+=4){var A=R/4,g=pt(A/v);Z[A=4*((J-1-g)*v+(A-g*v))]=M[R],Z[1+A]=M[R+1],Z[2+A]=M[R+2],Z[3+A]=M[R+3]}return m.putImageData(E,0,0),T&&D$(f,H),this._42(this.getDevicePixelRatio()),B&&G?(E=(m=X1()).getContext("2d"),b1(m,B,G,1),vt.drawImage(E,Y,0,0,B,G),m):Y},toDataURL:function(T,B){var G,H=this.getGL(),B=(this.validate(),T&&(G=H.getParameter(3106),D$(H,T)),this._42(1,{renderAxis:!1,renderEdit:!1,renderGrid:!1}),this._canvas.toDataURL(B||"image/png",1));return T&&D$(H,G),this._42(this.getDevicePixelRatio()),B},isWebGL2:function(){return 2===this._webGLVersion},getGL:function(){var T,B,G,H=this._26I;if(H)return H;if(!this._35O){var f=this,v=f._canvas,J=f._attributes;if(!J||!1!==J.requestWebGL2)try{(H=v.getContext("webgl2",J)||v.getContext("experimental-webgl2",J))&&(f._webGLVersion=2,f._26I=H)}catch(H){}if(!H)try{H=v.getContext("webgl",J)||v.getContext("experimental-webgl",J)}catch(H){throw new Error("WebGL not supported")}if(H)return f._26I=H,v=f._frameState=new ao(f,H),f._glExtensions=new tN(H),f._glCapabilities=new dN(H,f._glExtensions),f._glUbos=new NN(f,H,f._glCapabilities,J&&J.forceNoUniformBuffer),f._glPrograms=new Xo(f,H),f._2O={},H._emptyCubeTexture=(T=H,G=new Uint8Array(4),B=T.createTexture(),T.activeTexture(33984),T.bindTexture(34067,B),T.texParameteri(34067,10240,9729),T.texParameteri(34067,10241,9729),T.texImage2D(34069,0,6408,1,1,0,6408,5121,G),T.texImage2D(34070,0,6408,1,1,0,6408,5121,G),T.texImage2D(34071,0,6408,1,1,0,6408,5121,G),T.texImage2D(34072,0,6408,1,1,0,6408,5121,G),T.texImage2D(34073,0,6408,1,1,0,6408,5121,G),T.texImage2D(34074,0,6408,1,1,0,6408,5121,G),B),H._compiledShader={},H._emptyTexture=O$(H),H._emptyBlendTexture=O$(H),H._4NQ={},H._id=++HZ,H._4MQ=[],H._4KQ={},v.setGLState(),f._buffer={vs:_$(H),ns:_$(H),is:_$(H),uv:_$(H),batchColor:_$(H),batchBlend:_$(H),batchBrightness:_$(H),lineDistance:_$(H)},f._1O=w$(f,H),J=f._cube={vs:_$(H),ns:_$(H),is:_$(H),uv:_$(H)},l$(H,J.vs,Mo),l$(H,J.ns,Eo),l$(H,J.uv,mo),z$(H,J.is,Yo),f._genBatchInstancedArrayFunc(),H._renderInfo={calls:0,vertices:0,faces:0,lines:0,points:0,textureCache:{time:0,count:0,pixels:0},frame:0,cacheTimeCost:0,reflectDepth:0},H._renderTargetStack=[],H._dynamicTexturePool={},H;throw new Error("WebGL not supported")}},getGLCapabilities:function(){if(this.getGL())return this._glCapabilities},getGLExtensions:function(){if(this.getGL())return this._glExtensions},disposeAllPrograms:function(){this._glPrograms.dispose()},getShadowMap:function(){return this.shadowMap},invalidateShape3dAttribute:function(T,B){delete T._complete_,(T=T[B])&&T._bufId&&delete T._bufId},getEnvmap:function(){return this._glCapabilities&&this._glCapabilities.maxVertexTextures<vt.graph3dEnvmapCapabilityRequire?null:this.dm().getEnvmap()},getEnvmapType:function(){var T,B=this.dm();return(B?B.getEnvmapType():T)||"legacy"},setEnvmapExtraQuaternion:function(T){this._envmapExtraQuaternion=T instanceof l.Quaternion?T.clone().inverse().toArray():null},invalidateEnvmap:function(T){return this._envmapRenderer.invalidateEnvmap(T)},invalidateEnvmapUsedByMaterial:function(T){return this._envmapRenderer.invalidateEnvmapUsedByMaterial(T)},isEnvmapUsedByMaterialReady:function(T){return this._envmapRenderer.isEnvmapUsedByMaterialReady(T)},_setEnvmapByProbeId:function(T,B,G){return this._envmapRenderer.setEnvmapByProbeId(T,B,G)},_tryInvalidateEnvmap:function(){var T=this.getEnvmapType();T!==this._lastProgramEnvmapType&&(this._envmapRenderer.changeEnvmapType(this._lastProgramEnvmapType=T),this.iv())},acquireProgram:function(T,B){return this._glPrograms.acquireProgram(T,B)},renderModel:function(T,B,G,H,f){f&&!1===f.restoreViewport||G&&!1===G.restoreViewport||B&&!1===B.restoreViewport||(v=(v=this.getViewport())&&o2(v));var v,T=this._postProcessing.blitScreen(T,B,G,H,f);return v&&this.setViewport(this.getGL(),v[0],v[1],v[2],v[3]),T},renderPrefab:function(){return this.renderModel.apply(this,arguments)},isGLTempRegisterLimited:function(){return this._glTempRegisterLimited},getBrightness:function(T){var B=T.s("brightness"),T=this.isSelected(T)?T.s("select.brightness"):ft;return B==ft?T:T==ft?B:B*T},getDataHighlightMode:function(T){return T.s("highlight.mode")},getWireframe:function(T){var B=T.s("wf.visible"),G=T.s("wf.width");if(!0===B||0<G&&"selected"===B&&this.isSelected(T))return{color:T.s("wf.color"),width:G,short:T.s("wf.short"),mat:T.s("wf.mat")}},getPartPosition:function(T,B,G,H){return H=H||Qw,[(T=this.getData3dUI(T)._16O(H.autoRotate,B,ft,G||Ct,H.t3,H.r3,H.rotationMode))[12],T[13],T[14]]},_transformPointToViewSpace:function(T){return T=[T[0],T[1],T[2]],_s(T,this._viewMatrix),T},_transformDirectionToViewSpace:function(T,B){var T=T?[T[0],T[1],T[2]]:[0,0,0],B=(_s(T,this._viewMatrix),B?[B[0],B[1],B[2]]:[0,0,0]),G=(_s(B,this._viewMatrix),B[0]-T[0]),H=B[1]-T[1],B=B[2]-T[2];return(T=Math.sqrt(G*G+H*H+B*B))?[G/T,H/T,B/T]:[G,H,B]},getWireframeGeometry:function(T){if(T.s("wf.geometry"))return{color:T.s("wf.color"),width:T.s("wf.width"),mat:T.s("wf.mat"),geometry:!0}},getBodyColor:function(T){return T.s("body.color")},getMat:function(T){return T.getMat?T.getMat():T.s("mat")},getFaceMat:function(T,B){return T.getFaceMat?T.getFaceMat(B):T.s(B+".mat")},getFaceBlend:function(T,B){return T.s(B+".blend")||T.s("all.blend")},getFaceColor:function(T,B){return T.s(B+".color")||T.s("all.color")},getFaceImage:function(T,B){return T.s(B+".image")||T.s("all.image")},getFaceBlendImage:function(T,B){return T.s(B+".blend.image")||T.s("all.blend.image")},getFaceDiscardSelectable:function(T,B){return(B=T.s(B+".discard.selectable"))==ft?T.s("all.discard.selectable"):B},getFaceUv:function(T,B){return T.s(B+".uv")||T.s("all.uv")},getFaceUvOffset:function(T,B){return T.s(B+".uv.offset")||T.s("all.uv.offset")},getFaceUvScale:function(T,B){return T.s(B+".uv.scale")||T.s("all.uv.scale")},getFaceUvRotation:function(T,B){return T.s(B+".uv.rotation")||T.s("all.uv.rotation")},getFaceUvAnchor:function(T,B){return T.s(B+".uv.anchor")||T.s("all.uv.anchor")},getFaceLight:function(T,B){return(B=T.s(B+".light"))==ft?T.s("all.light"):B},getFaceVisible:function(T,B){return(B=T.s(B+".visible"))==ft?T.s("all.visible"):B},getFaceOpacity:function(T,B){return(B=T.s(B+".opacity"))==ft?T.s("all.opacity"):B},getFaceTransparent:function(T,B){return(B=T.s(B+".transparent"))==ft?T.s("all.transparent"):B},getFaceReverseColor:function(T,B){return T.s(B+".reverse.color")||T.s("all.reverse.color")},getFaceReverseFlip:function(T,B){return(B=T.s(B+".reverse.flip"))==ft?T.s("all.reverse.flip"):B},getFaceReverseCull:function(T,B){return(B=T.s(B+".reverse.cull"))==ft?T.s("all.reverse.cull"):B},getFaceMaterial:function(T,B){return(B=T.s(B+".material"))==ft?T.s("all.material"):B},isPicking:function(){return this._picking},renderPickScene:function(){var T=this.getGL();this.syncRenderState(),this._picking=T._picking=!0,this.renderScene(),this._picking=T._picking=!1},invalidateCachedGeometry:function(T){this.getData3dUI(T).invalidateCachedGeometry(),this.invalidateData(T)},invalidateCachedWireframe:function(G){var T,H;G instanceof L.Data?(T=(T=this.getData3dUI(G)).shapeModel||oo(T))&&(ex(T),G.iv()):G&&(ex(G),(H=this).dm().each(function(T){var B=H.getData3dUI(T);(B.shapeModel||oo(B))===G&&T.iv()}),this.iv())},isInteractive:function(T){return T.s("interactive")},redraw:function(){this.iv()},validateImpl:function(){var G,H,f,v,T=this,B=(T._lightChanged&&(T._lightChanged=!1,G=[],H=[],f=[],v=[],T.dm().each(function(T){var B;VE(T)&&("point"===(B=T.s("light.type"))?G.push(T):"spot"===B?H.push(T):"directional"===B?f.push(T):"rect"===B&&v.push(T))}),T._59O=G,T._spots=H,T._dirs=f,T._87I=v),T.getAspect());B!==T.__cachedAspect__&&(T._updateSkybox({property:"asceptChanged"}),T.__cachedAspect__=B),T._attributes&&!1===T._attributes.autoDraw||T._42(),T._1o.iv()},getRenderInfo:function(){var T=this.getGL();if(T)return T._renderInfo},getDebugTip:function(){var T,B,G=this.getRenderInfo();if(G)return T=(B=this.getGL())._validBufCount||0,T="Draw Calls: "+G.calls+"<br/>Vertices: "+G.vertices+"<br/>Faces: "+G.faces+"<br/>Lines: "+G.lines+"<br/>"+(G.points?"Points: "+G.points+"<br/>":"")+"Buffers: "+T+"<br/>Programs: "+(B._validProgramCount||0)+"<br/>Cache Models: "+N.keys(iw).length+"<br/>Shape3d Models: "+N.keys(uw).length,this.isVRPresenting()&&(T+="<br/>VR fps: "+this.vr.getFps()),G.textureCache&&(B=G.textureCache.count,T+="<br/>2D Dynamic Textures: "+G.textureCache.count,0<B&&(T+="<br/>2D Dynamic pixels: "+(1e6<(B=G.textureCache.pixels)?Math.round(B/1e6)+"M":1e3<B?Math.round(B/1e3)+"K":Math.round(B)))),T},getFrameState:function(){return this._frameState},isBoundingBoxInView:(OA=new L.Math.Box3,_A=new L.Math.Matrix4,function(T){if(!(T=T instanceof L.Data?this.getData3dUI(T):T).mat)return!0;var B=T.getBoundingBox(!0);return OA.copy(B).applyMatrix4(_A.fromArray(T.mat)),this.getFrustum().intersectsBox(OA)}),updateScene:function(){var B=this,G=(B.onPreUpdate(),B._81O=ft,B.overlappingBox.clear(),B.initSkeletonDatas(),B._40Q),H=(G.init(),B.getGL()),T=B.dm();if(T.isHierarchicalRendering())T.eachByHierarchical(function(T){(T=B.getData3dUI(T))&&T.update(B,H,G)});else for(var f,v=T.getDatas().getArray(),J=v.length,M=0;M<J;M++)f=v[M],(f=B.getData3dUI(f))&&f.update(B,H,G);this._updateBoxClipperMatrix(),G.onUpdated(),B.onPostUpdate()},_pushFrameRenderOptions:function(T){this._frameRenderOptionStack.push(this._currentFrameRenderOptions),this._currentFrameRenderOptions=T},_popFrameRenderOptions:function(T){this._currentFrameRenderOptions=this._frameRenderOptionStack.pop()},_getFrameRenderOptions:function(T){var B=this._currentFrameRenderOptions;return B&&B[T]},getRenderLists:function(){return this._40Q},_setCurrentFrameRenderId:function(T,B){var G=this._renderId++;T._renderInfo.renderId=G,this._glPrograms.setCurrentFrameRenderId(G),B&&this._glUbos.setCurrentFrameRenderId(G)},renderScene:function(T){var G,H=this,f=H.getGL(),v=H._picking,J=(v||H.onPreRender(),H._setCurrentFrameRenderId(f,!1),H.genProgramDefines(),H._frameState),B={},M=(v&&(B.BATCHINSTANCE=!H._batchInstancedDisabled||H._picking&&0<H._model3dInstancedBatchCount),H._prg=J.defaultProgram=H.acquireProgram({type:v?"pick":"legacy",defines:B}),H._pushFrameRenderOptions(T),!1!==H._getFrameRenderOptions("renderShadowMap")&&H.shadowMap.render(),H.flowMap.render(),H._envmapRenderer.onBeforeRender(f),H._44Q=-1,J.renderState),B=M.glState;function Y(T,B){J.setGLState(T,B),J.setUniforms(T),J.renderState.attribs.disable(),G=M.directUniforms(),M.directAttribs().disable()}var m,T=H._prg,E=(H._setupPVMatrix(),this._glUbos.setCurrentFrameRenderId(this._renderId),H.isReflecting(f)||Z$(H._projScreenMatrix=ys(),H._projectMatrix,H._viewMatrix),J.syncEnv(v?this.pickColorMap:Ht),M.useProgram(T),Y(!1,!0),f.clear(256),this._41Q),Z=0,R=E.length;function A(T){for(var B=!1;Z<R;Z++){var G=E[Z];if(!v||!G.ignoreInPick){if(G.priority>=T)break;H._43Q[H._44Q=G.id]&&!wt[Qe.length]||(G.render(f,H,J),Y(),B=!0)}}return B}if(A(vt.cameraPriority.skybox),v?(m=B.color.clear.slice(0),D$(f,[0,0,0,0])):(D$(f,[0,0,0,0]),B.blend.enabled=!1,B.depth.enabled=!1,B.depth.mask=!1,H._camera&&!1===H._camera.s("camera.renderSky")||H.drawSky(f,T),!1!==H._getFrameRenderOptions("renderReflector")&&H.drawReflectors(f)&&(H._setupPVMatrix(),J.syncEnv(),Y(),H._setCurrentFrameRenderId(f,!0)),B.blend.enabled=!1,B.depth.enabled=!0,B.depth.mask=!0,(G.uTransparent=!1)!==H._getFrameRenderOptions("renderGrid")&&H._31O._42(f)),!f.textureBatch||wt[(ONE_FRAME_TIME-6)/2]){v||(H.shadowMap.enable&&H.shadowMap.createShadow(G),H.rebindOITTexture(G),H.flowMap.createFlow(G));for(var g=H._sortedRenderLayers,F=0,W=g.length;F<W;F++){var s=g[F],S=H.getRenderLayerInfo(s);!(H._camera||!S.ignore||S.renderForBloom&&f._blooming)||H._camera&&!H._camera.isLayerVisible(s)||(A(S.priority)&&!v&&(H.shadowMap.enable&&H.shadowMap.createShadow(G),H.rebindOITTexture(G),H.flowMap.createFlow(G)),this.renderLayer(s))}A(vt.cameraPriority.infinity),v||(H._renderBonesForDebug(f,B),H.flowMap.disableFlow(G)),G$(H,G,0,vt.graph3dViewHeadlightAmbientIntensity),G.uHeadlightColor=[1,1,1,0],G.uUseEnvMap=!1,G.uHeadlightDirection=[0,0,0],G.uHeadlightRange=0,B.depth.enabled=!1,G.uTransparent=!1,G.shadowReceive=!1,o$(H,G,rE),v?H.drawFilter||H._30O._42(f):(H._highlightHelper._42(f),this._renderAxisAndEditHelper(!1!==H._getFrameRenderOptions("renderAxis"),!1!==H._getFrameRenderOptions("renderEdit")),B.blend.enabled=!1,B.depth.mask=!0),B.depth.enabled=!0,v&&D$(f,m),l$(f,ft),z$(f,ft),H._44Q=-1,H._popFrameRenderOptions(null),H._glPrograms.disableAttributes(f),v||H.onPostRender()}},_renderAxisAndEditHelper:function(T,B){var G,H,f,v;(T||B)&&(G=this.getGL(),H=(f=(v=this._frameState).renderState).glState,f=f.directUniforms(),v.renderState.attribs.disable(),H.depth.enabled=!1,f.uTransparent=!1,f.shadowReceive=!1,H.blend.enabled=!1,H.depth.mask=!0,(v=!this._fogDisabled)&&(f.uFog=!1),T&&this._32O._42(G),B&&this._30O._42(G),v&&(f.uFog=!0),l$(G,ft),z$(G,ft))},renderLayers:function(T,B){for(var G=0,H=(T=B?ZJ(T):T).length;G<H;G++)this.renderLayer(T[G])},renderSky:function(){var T=this._frameState,B=T.renderState,G=B.glState,H=this.getGL(),f=this._prg;this._setupPVMatrix(),Z$(this._projScreenMatrix=ys(),this._projectMatrix,this._viewMatrix),T.syncEnv(),B.useProgram(f),T.setGLState(!1,!0),T.setUniforms(!1),T.renderState.attribs.disable(),H.clear(256),D$(H,[0,0,0,0]),G.blend.enabled=!1,G.depth.enabled=!1,G.depth.mask=!1,this.drawSky(H,f),G.depth.mask=!0,G.depth.enabled=!0,l$(H,ft),z$(H,ft)},addRenderLayerListener:function(T,B,G){this._renderLayerNotifier||(this._renderLayerNotifier=new FJ),this._renderLayerNotifier.add(T,B,G)},removeRenderLayerListener:function(T,B){this._renderLayerNotifier&&this._renderLayerNotifier.remove(T,B)},fireRenderLayerEvent:function(T,B){var G=this._renderLayerNotifier;G&&G.fire({layer:T,phase:B})},renderLayer:function(T){var B=this,G=B._picking;if(F=B._40Q.get(T)){B.fireRenderLayerEvent(T,"prepare");var H,f,v,J=B.getGL(),M=B.getRenderLayerInfo(T),Y=(m=B._frameState.renderState).glState,m=m.directUniforms(),E=(!G&&B.isSortable()&&F.sort(B._sortFunc,B._projScreenMatrix,B.isOpaqueSortable()),F.resetModel3dInstancedDraw(),F.opaque),Z=F.transparent,R=F.batchModelMap,A=F.batchIndexMap,g=F.polylineModelMap,F=F.wireframeModelMap,J=B.getGL(),W=B._prg,s=(G||(Y.blend.enabled=!1,Y.depth.enabled=!0,Y.depth.mask=!0),(m.uTransparent=!1)!==M.clearDepth&&J.clear(256),this.drawFilter);if(s){for(H=0,f=(v=E).length;H<f;H++)!0!==s(v[H].data)&&v[H].ui._42(J,W,x);if(G)for(H=0,f=(v=Z).length;H<f;H++)v[H].ui._46Q(J);$x(B,R,A)}else{for(H=0,f=(v=E).length;H<f;H++)v[H].ui._42(J,W,x);if(G)for(H=0,f=(v=Z).length;H<f;H++)v[H].ui._46Q(J);$x(B,R,A),zx(B,g),zx(B,F)}if(G||(Y.blend.enabled=!0,Y.depth.mask=!1),B._45Q=m.uTransparent=!0,s){for(H=0,f=(v=Z).length;H<f;H++)!0!==s(v[H].data)&&v[H].ui._42(J,W,u);$x(B,R,A,0,!0)}else{if(G||!B._oitEnabled||B.isReflecting(J)||J._blooming){for(H=0,f=(v=Z).length;H<f;H++)v[H].ui._42(J,W,u);$x(B,R,A,0,!0)}else B._depthPeelingRenderer.render(Z,R,A);zx(B,g,0,!0),zx(B,F,0,!0)}B._45Q=null,B.fireRenderLayerEvent(T,"post")}},onPreFrame:jw,onPostFrame:jw,onPreUpdate:jw,onPostUpdate:jw,onPreRender:jw,onPostRender:jw,onPreRenderData:jw,onPostRenderData:jw,_42:function(T,B){var G=this;if(!G._35O&&(!p||wt(p))){var H=G.getWidth(),f=G.getHeight();if(H&&f){var v=G.getGL();if(v){var J=G._canvas,M=(T?M=!0:T=G.getDevicePixelRatio(),G._picking||!M&&H===J.clientWidth&&f===J.clientHeight||(b1(J,H,f,T),M=T,H&&1<Math.abs(v.drawingBufferWidth-H*T)&&(M=Math.min(M,v.drawingBufferWidth/H)),(M=f&&1<Math.abs(v.drawingBufferHeight-f*T)?Math.min(M,v.drawingBufferHeight/f):M)!==T&&(G.setDevicePixelRatio(T=M),b1(J,H,f,T)),G._18Q=null),G._attributes&&!1===G._attributes.autoClear||v.clear(16384),v._renderInfo);M.calls=0,M.vertices=0,M.faces=0,M.lines=0,M.points=0,M.textureCache={time:0,count:0,pixels:0},M.frame=++G._frameId,M.cacheTimeCost=0,M.reflectDepth=0,G.__uptime=(Date.now()-G.__startTime)/1e3,H=J.width,f=J.height,G._gatherRenderLayersByPriority(),G.onPreFrame(),G.syncRenderState(),G._glPrograms.checkParallelLinkStatus();do{if(G.isVREnabled()&&G.vr.render(v,H,f,B))break;G.updateScene();var Y=G._4JQ}while((Y||!G._postProcessing.render(v,H,f,B,0<G._transmissionObjects.length||G._oitEnabled))&&(G.setViewport(v,0,0,H,f),Y?G.renderPickScene(B):G.renderScene(B),0));G._33Q=!1,G.countFrame(),G.onPostFrame(),G._doBufferGC(v),G._glPrograms.scheduleProgramGC(G._shaderGCInterval||500)}}}},drawImmediately:function(T,B,G){if(T){var H=this.getGL();if(!H)return!1;zE(H,T),this._42(B,G),nE(H)}else this._42(B,G)},_4IQ:function(T){this._4JQ=T,this.iv()},syncRenderState:function(){var T;(T=this._frameState)&&(T=T.renderState)&&T.syncLoss()},drawReflectors:function(T){T._renderInfo.reflectDepth++;var B,G,H=this._dataModel.getReflectors(),f=!1;for(B in H)G=H[B],this.isVisible(G)&&(G=this.getData3dUI(G))&&G.drawReflector&&G.drawReflector(T)&&(f=!0);return T._renderInfo.reflectDepth--,f},isReflecting:function(T){return T._renderInfo.reflectDepth},isRenderSceneForBloom:function(){var T=this.getGL();return!!T&&!!T._blooming},getPostProcessing:function(){return this._postProcessing},enablePostProcessing:function(T,B){return this._postProcessing.enableModule(T,B)},getPostProcessingModule:function(T){return this._postProcessing.getModule(T)},getPostProcessingValue:function(T,B){return(T=this._postProcessing.getModule(T))?T[B]:Ht},setPostProcessingValue:function(T,B,G){var H=this.getPostProcessingValue(T,B),f=this._postProcessing.getModule(T);f&&H!==G&&("enable"===B?this.enablePostProcessing(T,G):f[B]=G,this.firePropertyChange("postProcessing."+T+"."+B,H,G))},setDofImageFromGraphView:function(T,B,G){return this._postProcessing.getModule("Dof").setImageFromGraphView(T,B,G)},setViewport:function(T,B,G,H,f){this._viewport=[B,G,H,f],At.for(T).directState().viewport=this._viewport},getRenderState:function(){return At.for(this._26I)},genProgramDefines:function(){var T=this,B=(B=T.getEnvmap())&&B.length,G=((B={NUM_DIR_LIGHTS:T._dirs.length,NUM_SPOT_LIGHTS:T._spots.length,NUM_POINT_LIGHTS:T._59O.length,MAX_BOX_CLIPPER:T._boxClippers.length,MAX_FLOW_OBJECT:T._flowObjects.length,FOG:!T._fogDisabled,FOG_EXP2:"exp2"===T.getFogMode(),UV_CLIP:!!T._uvClipEnabled,USE_ENVMAP:!!B,ENVMAP_TYPE_CUBE_UV:"legacy"!==T.getEnvmapType(),DASH:!T._dashDisabled,ENVMAP_ROTATE:null!=T._envmapExtraQuaternion,BATCHCOLOR:!T._batchColorDisabled,BATCHINSTANCE:!T._batchInstancedDisabled,BATCHBLEND:!T._batchBlendDisabled,BATCHBRIGHTNESS:!T._batchBrightnessDisabled})[GZ[T.getFlowBlendMode()]||GZ[vt.graph3dViewFlowBlendMode]]=!0,T.shadowMap.enable&&T.shadowMap.genShaderDefine(B),T._glPrograms);return G&&G.genPhysicalProgramKeyOfScene(T._programDefines=B),B},getViewport:function(){return this._viewport},setBufferGCInterval:function(T){this._bufferGCInterval=T},setShaderGCInterval:function(T){this._shaderGCInterval=T},_doBufferGC:function(T,B){var G,H,f=T._4NQ,v=0,J=0,M=T._renderInfo.frame,Y=this._bufferGCInterval||10;for(G in f)v++,(H=f[G])&&(B||M-H._fid>Y?(T.deleteBuffer(H._buf),H._buf=null,f[G]=null):J++);if(J<v/2&&128<v){var m={};for(G in f)f[G]&&(m[G]=f[G]);T._4NQ=m}T._validBufCount=J},_swapLineMap:function(){var T=this;Xt=T._polylineModelMap,T._polylineModelMap=T._polylineModelMapSwap,T._polylineModelMapSwap=Xt,Xt=T._wireframeModelMap,T._wireframeModelMap=T._wireframeModelMapSwap,T._wireframeModelMapSwap=Xt,Xt=T._polylineIndexMap,T._polylineIndexMap=T._polylineIndexMapSwap,T._polylineIndexMapSwap=Xt,Xt=T._wireframeIndexMap,T._wireframeIndexMap=T._wireframeIndexMapSwap,T._wireframeIndexMapSwap=Xt},_updateSkybox:function(T){var B,G,H,f,v,J,M,Y,m;this._skybox&&T&&(T=T.property,B=!1,G=this._skybox,"eye"!==T&&"forceUpdate"!==T||(H=this._camera?this._camera.getEye():this._eye,G.p3(H[0],H[1],H[2]),B=!0),"near"!==T&&"far"!==T&&"forceUpdate"!==T&&"asceptChanged"!==T||(H=(H=G.__cachedS3__)||(G.__cachedS3__=G.getFinalScale3d()),T=Jt(H[0],H[1],H[2])/2,f=("sphere"===G.s("shape3d")?Gt(H[0],H[1],H[2]):ut(H[0]*H[0]+H[1]*H[1]+H[2]*H[2]))/2,v=this._near,J=this._far,m=Math.tan(this.getFovy()/2)*v,M=this.getAspect()*m,M=ut(M*M+m*m+v*v),M=1.01*Gt(M,ut(3)*v),Y=1,T<M?Y=M/T:J<=f&&(Y=J*J/(v+J)/f),1!==Y&&(G.__updatingSkybox__=!0,m=H.map(function(T){return Y*T}),G.s3(m),G.setScale3d(1,1,1),B=!0,delete G.__updatingSkybox__)),B&&this.invalidateData(G))},getSkyBox:function(){return this.getSkybox()},setSkyBox:function(T){return this.setSkybox(T)},getSkybox:function(){return this._skybox},setSkybox:function(B){var G,T=this._skybox;T===B?B&&this._updateSkybox({property:"forceUpdate"}):(T&&(this._skyboxStyleMap&&T.setStyleMap(this._skyboxStyleMap),this._skyboxStyleMap=null,this._skyboxAnchor3d&&T.setAnchor3d(this._skyboxAnchor3d),this._skyboxAnchor3d=null,this._skyboxP3&&T.p3(this._skyboxP3),this._skyboxP3=null,this.handleDataModelChange({kind:xe,data:T})),this._skybox=B,this.ump(this._updateSkybox,this),B&&(B.removeFromDataModel(),this._skyboxStyleMap=L.Default.clone(B.getStyleMap()),this._skyboxAnchor3d=B.getAnchor3d(),B.setAnchor3d(.5,.5,.5),this._skyboxP3=B.p3().slice(0),B.s({"shape3d.reverse.flip":!0,"shape3d.reverse.cull":!1,"all.reverse.flip":!0,"all.reverse.cull":!1,"front.reverse.flip":!0,"front.reverse.cull":!1,"back.reverse.flip":!0,"back.reverse.cull":!1,"left.reverse.flip":!0,"left.reverse.cull":!1,"right.reverse.flip":!0,"right.reverse.cull":!1,"top.reverse.flip":!0,"top.reverse.cull":!1,"bottom.reverse.flip":!0,"bottom.reverse.cull":!1}),G=B.onPropertyChanged,B.onPropertyChanged=function(T){G.call(B,T),!B.__updatingSkybox__&&0<=["width","height","tall","scale","scaleTall"].indexOf(T.property)&&(B.__cachedS3__=Ht)},this.mp(this._updateSkybox,this),this._updateSkybox({property:"forceUpdate"})),this.fp("skybox",T,B))},drawSky:function(T,B){var G,H,f,v,J,M,Y,m,E,Z,R,A=this,g=A._skybox;g&&(f=H=0,A._camera&&!1===A._camera.s("camera.skybox.blur")||(H=g.s("skybox.blur.size"),f=g.s("skybox.blur.resolution"),0===H&&0===f||(M=f||A.getDevicePixelRatio(),A._blurRTT||(A._blurRTT=new sx.RenderTarget(A,null,null,{})),v=A.getWidth()*M,M=A.getHeight()*M,A._blurRTT.setSize(T,v,M),G=o2(A._viewport),A.setViewport(T,0,0,v,M),A._blurRTT.bind(T))),v=At.for(T).directUniforms(),M=A._headlightIntensity,J=U0(A._headlightColor),B=A._prg,1!==M&&(J=[J[0]*M,J[1]*M,J[2]*M]),v.uHeadlightColor=[J[0],J[1],J[2],1],(M=A.getData3dUI(g))&&((m=(Y=A.isOrtho())||this._computedProjectMatrix)&&(E=A._projectMatrix,Y&&(A._ortho=!1),v.uProjectMatrix=A._projectMatrix=y$(A,!0)),R=g.p3(),Z=(this._camera||this).getEye(),R[0]===Z[0]&&R[1]===Z[1]&&R[2]===Z[2]||(g._position.x=Z[0],g._54O=Z[1],g._position.y=Z[2]),M.validate(),M._42(T,B,S),m&&(Y&&(A._ortho=!0),v.uProjectMatrix=A._projectMatrix=E)),T.clear(256),v.uHeadlightColor=[J[0],J[1],J[2],A._headlightDisabled?1:0],0===H&&0===f||(A._blurRTT.unbind(T),0!==H&&(R=A.getPostProcessingModule("Blur"))&&R.drawImpl(T,A._blurRTT,H,!1,4<H?4:2<H?3:1<H?2:1),A.setViewport(T,G[0],G[1],G[2],G[3]),A.renderModel(null,{type:"blitScreen",image:A._blurRTT.texture,defines:{DITHERING:!1}},{clear:!1})))},getLogicalPoint:function(T){return Gs(T,this._canvas)},isRectOverlapping:function(T){return this.getData3dUI(T)._rectOverlapping},getHitFaceInfo:function(T){T.target&&(T=this.lp(T));var B=this.getDataInfoAt(T);return B&&(T=this.intersectObject(T,B.data))?{data:B.data,face:T.part}:ft},unproject:function(T,B){var G=this.getWidth(),H=this.getHeight(),G=((T=T.target?this.lp(T):T).x-G/2)/G*2,T=-1*(T.y-H/2)/H*2,H=(B=B||0,ys()),f=y$(this),v=S$(this);return Z$(H,f,v),Y$(H),[(f=ps([G,T,B,1],H))[0]/f[3],f[1]/f[3],f[2]/f[3]]},getDataAt:function(T){return(T=this.getDataInfoAt(T))?T.data:ft},getDataInfoAt:function(T,B,G){return T.target&&(T=this.lp(T)),this._1o.get(G1(T.x,T.y,B),!0,G)},getDataInfoDuringInteract:function(T,B){var G=this.getDataInfoAt(T);if(!this.isBlockSelectable()||!G||!G.data)return G;if(!B&&this.isSelected(G.data))return G;for(var H=G.data;(H=H.getParent())&&H instanceof L.Block&&this.isSelectable(H);){var f=this.isSelected(H);if(f&&B)break;if(G={data:H,part:G.part},f&&!B)break}return G},getDatasInRect:function(T,B){return this._1o.get(T,!1,B)},setEditable:function(T){var B=this._editable;this._editable=T,this.fp(FB,B,T)},isEditable:function(T){return T?!!this._editable&&!!r(T)&&!!T.s("3d.editable")&&(!this._editableFunc||this._editableFunc(T)):this._editable},isSelectable:function(T){return T.s("3d.selectable")&&this.sm().isSelectable(T)},isMovable:function(T){return(!Z1(T)||T.getStyle(Ke)===De)&&!!T.s("3d.movable")&&(!this._movableFunc||this._movableFunc(T))},isSizeEditable:function(T){return!!r(T)&&(!this._sizeEditableFunc||this._sizeEditableFunc(T))},isRotationEditable:function(T){return!(!r(T)||!1===T.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(T))},handleDelete:function(T){this._editable&&this.removeSelection()},zoomIn:function(T){this.setZoom(s2,T)},zoomOut:function(T){this.setZoom(1/s2,T)},setZoom:(SA=new Zt,yA=new Zt,xA=new Zt,wA=new Zt,function(T,B){if(1!==T){var G=this;G._14o&&G._14o.stop(!0);var H,f=1/T,v=(SA.copy(G.getCenter()),yA.copy(G.getEye()),G._ortho);if(v){if((H=G._orthoWidth)<G._moveStep&&1<T)return}else if(SA.distanceTo(yA)<G._moveStep&&f<1)return;var J=!1;if(!1===G._zoomToCenter&&G._lastZoomLP&&(xA.copy(yA).sub(SA).normalize(),G._81O=null,wA.copy(G.getHitPosition(G._lastZoomLP,SA.toArray(),xA.toArray())),J=!0,G._lastZoomHit=wA),B=s1(B))return B.action=function(T){G.fi({kind:G._zooming?"betweenZoom":"beginZoom"}),G._zooming=1,T=(f-1)*T+1,v&&G.setOrthoWidth(H*T),J?(G.setEye(xA.lerpVectors(wA,yA,T).toArray()),G.setCenter(xA.lerpVectors(wA,SA,T).toArray())):v||G.setEye(xA.lerpVectors(SA,yA,T).toArray())},B._37o=function(){delete G._14o,delete G._zooming,G.fi({kind:"endZoom"}),G.onZoomEnded()},G._14o=c2(B);v&&G.setOrthoWidth(H*f),J?(G.setEye(xA.lerpVectors(wA,yA,f).toArray()),G.setCenter(xA.lerpVectors(wA,SA,f).toArray())):v||G.setEye(xA.lerpVectors(SA,yA,f).toArray())}}),setOrthoZoom:function(T,B){return this.setZoom(T,B)},getPositionInfo:function(T){var B=this._eye,G=this._center,H=this.getAspect(),T=T?Ss(Ws(G,B,!0),Ws(T,B)):n2(B,G);return this._ortho?{length:T,height:(B=this._orthoWidth)/H,width:B}:{length:T,height:G=et(this._fovy/2)*T*2,width:G*H}},getCenterInfo:function(){return this._81O||(this._81O=this.getPositionInfo()),o2(this._81O)},rotate:function(G,H,T,f){var v=this;if(G||H){f==ft&&(f=v._firstPersonMode),v._88O&&v._88O.stop(!0);var B=v._center,J=v._eye,M=v.getCenterInfo().length,Y=f?B:J,m=f?J:B,E=Ws(Y,m),Z=ct(E[0],E[2]),R=ct(ut(E[0]*E[0]+E[2]*E[2]),E[1]),A=f?fe:ve;if(f&&(H=-H),T=s1(T))return T.action=function(T){v.fi({kind:v._rotating?"betweenRotate":"beginRotate"}),v._rotating=1;var B=Z+G*T,T=R+H*T,T=f?o-H$(v,o-T):H$(v,T);E[0]=M*Yt(T)*Yt(B),E[1]=M*Mt(T),E[2]=M*Yt(T)*Mt(B),Y[0]=m[0]+E[0],Y[1]=m[1]+E[1],Y[2]=m[2]+E[2],v.fp(A,ft,Y)},T._37o=function(){delete v._88O,delete v._rotating,v.fi({kind:"endRotate"}),v.onRotateEnded()},v._88O=c2(T);Z+=G,R+=H,R=f?o-H$(v,o-R):H$(v,R),E[0]=M*Yt(R)*Yt(Z),E[1]=M*Mt(R),E[2]=M*Yt(R)*Mt(Z),Y[0]=m[0]+E[0],Y[1]=m[1]+E[1],Y[2]=m[2]+E[2],v.fp(A,ft,Y)}},pan:function(T,B,G,H){if(T||B){var f,v,J=this;H==ft&&(H=J._firstPersonMode),J._89O&&J._89O.stop(!0);var T=[(M=S$(J))[0]*T,M[4]*T,M[8]*T],M=[M[1]*B,M[5]*B,M[9]*B],Y=T[0]+M[0],m=T[1]+M[1],E=T[2]+M[2],Z=J._center,R=J._eye;if(H&&(B=Fx(J.getBoundaries(),R[0],R[2],R[0]+Y,R[2]+E,ut(Y*Y+E*E)),Y=B[0],E=B[1]),G=s1(G))return f=o2(R),v=o2(Z),G.action=function(T){J.fi({kind:J._panning?"betweenPan":"beginPan"}),J._panning=1,Z[0]=v[0]+Y*T,Z[1]=v[1]+m*T,Z[2]=v[2]+E*T,R[0]=f[0]+Y*T,R[1]=f[1]+m*T,R[2]=f[2]+E*T,J.fp(ve,ft,R),J.fp(fe,ft,Z)},G._37o=function(){delete J._89O,delete J._panning,J.fi({kind:"endPan"}),J.onPanEnded()},J._89O=c2(G);Z[0]+=Y,Z[1]+=m,Z[2]+=E,R[0]+=Y,R[1]+=m,R[2]+=E,J.fp(ve,ft,R),J.fp(fe,ft,Z)}},walk:function(B,T,G){if(B){var H,f,v=this,J=(G==ft&&(G=v._firstPersonMode),v._90O&&v._90O.stop(!0),v._center),M=v._eye,Y=Ws(J,M,!0);if(G){if(G=Fx(v.getBoundaries(),M[0],M[2],M[0]+Y[0]*B,M[2]+Y[2]*B,it(B)),!(B=n2(G)))return;Y=[G[0]/B,0,G[1]/B]}if(T=s1(T))return H=o2(M),f=o2(J),T.action=function(T){v.fi({kind:v._walking?"betweenWalk":"beginWalk"}),v._walking=1,T*=B,M[0]=H[0]+Y[0]*T,M[1]=H[1]+Y[1]*T,M[2]=H[2]+Y[2]*T,J[0]=f[0]+Y[0]*T,J[1]=f[1]+Y[1]*T,J[2]=f[2]+Y[2]*T,v.fp(ve,ft,M),v.fp(fe,ft,J)},T._37o=function(){delete v._90O,delete v._walking,v.fi({kind:"endWalk"}),v.onWalkEnded()},v._90O=c2(T);M[0]+=Y[0]*B,M[1]+=Y[1]*B,M[2]+=Y[2]*B,J[0]+=Y[0]*B,J[1]+=Y[1]*B,J[2]+=Y[2]*B,v.fp(ve,ft,M),v.fp(fe,ft,J)}},handleScroll:function(T,B){_2(T);var G=this,H=G._moveStep,f=G.getDataInfoAt(T);if((f=f&&f.data)&&G.isInteractive(f)){var v=G.intersectObject(T,f);if(v&&(v=v.part,(v=z(f.s(v+".image")||f.s("shape3d."+v+".image")||f.s("all.image")||f.s("shape3d.image")))&&n(v.scrollable,f,G)))return}G.isFirstPersonMode()?G.isPannable()&&G.pan(0,0<B?H:-H):G.isZoomable()&&(G._lastZoomLP=G.lp(T),G.setZoom(B<0?1/S2:S2),G._lastZoomLP=G._lastZoomHit=null)},handlePinch:function(T,B){!this.isZoomable()||Math.abs(T-B)<vt.pinchZoomThreshold||this.setZoom(T<B?1/y2:y2)},reset:function(T){this.setUp(vt.graph3dViewUp),this.moveCamera(vt.graph3dViewEye,vt.graph3dViewCenter,T)},moveSelection:function(T,B,G){this.dm().beginTransaction(),x4(this.sm().toSelection(this.isMovable,this),T,B,G),this.dm().endTransaction()},getMoveMode:function(T,B){return(B=B.s("3d.move.mode"))?B:l2(T)||Iw[88]&&Iw[89]&&Iw[90]?"xyz":Iw[88]&&Iw[89]?"xy":Iw[88]&&Iw[90]?"xz":Iw[89]&&Iw[90]?"yz":Iw[88]?"x":Iw[89]?"y":Iw[90]?"z":"xz"},handleTick:function(){var T,B=this,G=!1,H=B._moveStep,f=H,v=-1*B._rotateStep;B.isWalkable()||(f=0),B.isPannable()||(H=0),B.isRotatable()||(v=0),B._32Q&&(f*=T=(Pw()-B._32Q)/50,H*=T,v*=T),B._31Q&&(D2(B._31Q),delete B._31Q,delete B._32Q),_0()&&B.pan(-H,0,!(G=!0),!0),q0()&&B.pan(H,0,!(G=!0),!0),u0()&&(G=!0,l2()?B.pan(0,H,!1,!0):B.walk(f,!1,!0)),p0()&&(G=!0,l2()?B.pan(0,-H,!1,!0):B.walk(-f,!1,!0)),i0()&&B.rotate(-v,0,!(G=!0),!0),D0()&&B.rotate(v,0,!(G=!0),!0),I0()&&B.rotate(0,-v/2,!(G=!0),!0),h0()&&B.rotate(0,v/2,!(G=!0),!0),G&&(B._32Q=Pw(),B._31Q=I2(B.handleTick,B))},handleKeyDown:function(T){!b2(T)&&t0[T.keyCode]?this.handleTick():w0(T)?this.selectAll():O0(T)?this.handleDelete(T):o0(T)&&this.isResettable()&&this.reset()},checkDoubleClickOnNote:function(T,B,G){if(G===de){if(B.s("note.toggleable"))return B.s(Xe,!B.s(Xe)),this.fi({kind:"toggleNote",event:T,data:B,part:G}),!0}else if(G===Ne&&B.s("note2.toggleable"))return B.s(Ue,!B.s(Ue)),this.fi({kind:"toggleNote2",event:T,data:B,part:G}),!0;return!1},checkDoubleClickOnRotation:function(T,B,G){return G===OZ?(B.setRotationX(0),!0):G===_Z?(B.setRotationY(0),!0):G===pZ&&(B.setRotationZ(0),!0)},onRotateEnded:function(){},onWalkEnded:function(){},getViewRatio:function(T){if(this.isOrtho())return this.getWidth()/this.getOrthoWidth();var B=this.getCenter(),G=this.getHeight(),H=this.getEye(),B=[B[0]-H[0],B[1]-H[1],B[2]-H[2]],T=[T[0]-H[0],T[1]-H[1],T[2]-H[2]];return G*Math.sqrt(B[0]*B[0]+B[1]*B[1]+B[2]*B[2])*(1/Math.tan(this.getFovy()/2))/(T[0]*B[0]+T[1]*B[1]+T[2]*B[2])},inViewSpace:function(T){var B,T=this._transformPointToViewSpace(T),G=this.getAspect(),H=this.getNear(),f=this.getFar();return!(-T[2]<H||-T[2]>f)&&(this.isOrtho()?(B=this.getOrthoWidth()/2,Math.abs(T[0])<=B&&Math.abs(T[1]*G)<=B):(B=Math.sqrt(T[0]*T[0]+T[1]*T[1]+T[2]*T[2])*Math.tan(this.getFovy()/2),Math.abs(T[1]<=B)&&Math.abs(T[0])<=B*G))},getPVMatrix:function(){var T;return(T=this._18Q)||(T=y$(this),this._18Q=Z$(T,T,S$(this)),this._18Q._wh=this.getWidth()/2/this.getHeight()),T},getFrustum:(FA=new K,WA=new X4,sA=new Array(16),function(){for(var T=this.getPVMatrix(),B=!1,G=0;G<16;G++)T[G]!==sA[G]&&(B=!0,sA[G]=T[G]);return B&&WA.setFromMatrix(FA.fromArray(T)),WA}),toViewPosition:function(T){var B=this.getWidth()/2,G=this.getHeight()/2,H=this.getPVMatrix();return{x:B+B*(T=ps([T[0],T[1],T[2],1],H))[0]/T[3],y:G-G*T[1]/T[3],z:T[2]/T[3]}},getHitPosition:function(T,B,G){var H=this.getWidth(),f=this.getHeight(),v=(T=T.target?this.lp(T):T).x-H/2,T=T.y-f/2,J=this.getCenterInfo(),M=S$(this),H=(B=B||[0,0,0],G=G||[0,1,0],v=v/H*J.width,T=-1*T/f*J.height,[M[0]*v,M[4]*v,M[8]*v]),f=[M[1]*T,M[5]*T,M[9]*T],J=[H[0]+f[0],H[1]+f[1],H[2]+f[2]],v=this.getCenter();return v$(this,B,G,[J[0]+v[0],J[1]+v[1],J[2]+v[2]])||[0,0,0]},intersectObject:function(T,B){return this._raycaster.intersectObject(T,B)},intersectObjects:function(T,B,G){return this._raycaster.intersectObjects(T,B,G)},serializePhysicalShader:function(){return this._glPrograms.serializePhysicalShader()},deserializePhysicalShader:function(T){return this._glPrograms.deserializePhysicalShader(T)},getLineLength:function(T){return this.validate(),(T=this.getData3dUI(T))&&T.getCache&&(T=T.getCache())?T[T.length-1].length:0},getLineOffset:function(T,B){var G=this.getData3dUI(T);if(G&&G.getCache&&(G=G.getCache())){var H,G=No(G,B);if(T.s("shape3d")!==We)return G;if(T.getScale3d&&1===(f=T.getScale3d())[0]&&1===f[1]&&1===f[2]&&(f=null),!(H=T.r3&&0===(H=T.r3())[0]&&0===H[1]&&0===H[2]?null:H)&&!f)return G;var f,B=new Zt(T.p3()),v=new Zt(G.point).sub(B),G=new Zt(G.tangent).add(v);return f&&(f=new Zt(f),v.multiply(f),G.multiply(f)),H&&(f=(new j9).setFromEuler(new $9(H,T.getRotationMode(),!0)),v.applyQuaternion(f),G.applyQuaternion(f)),{point:v.clone().add(B),tangent:G.sub(v).normalize()}}return ft},_genBatchInstancedArrayFunc:function(){var T=this._glCapabilities&&this._glCapabilities.instancedArray&&!this._batchInstancedDisabled,M=T?Nx:Qx,H=(this.batchInstancedModel=function(T,B,G,H,f,v,J){M(this,T,B,G,H,f,v,J)},T?jx:rx),v=(this.batchInstancedShapeFace=function(T,B,G){H(T,B,G)},T?Xx:Ux);this.batchInstancedFace=function(T,B,G,H,f){v(this,T,B,G,H,f)}},isLabelVisible:function(T){return!0},isNoteVisible:function(T){return!0},moveCamera:function(T,B,G){var H=this,f=[(f=H.getEye())[0],f[1],f[2]],v=[(v=H.getCenter())[0],v[1],v[2]];if(T=T||f,B=B||v,H._flyAnim&&H._flyAnim.stop(!0),!(G=s1(G)))return H.setEye(T[0],T[1],T[2]),H.setCenter(B[0],B[1],B[2]),delete H._flyAnim,!0;var J=[T[0]-f[0],T[1]-f[1],T[2]-f[2]],M=[B[0]-v[0],B[1]-v[1],B[2]-v[2]];return G.action=function(T){H.setCenter(v[0]+M[0]*T,v[1]+M[1]*T,v[2]+M[2]*T),H.setEye(f[0]+J[0]*T,f[1]+J[1]*T,f[2]+J[2]*T)},G._37o=function(){delete H._flyAnim},H._flyAnim=c2(G)},flyTo:(JA=new Zt,MA=new Zt,YA=new Zt,mA=new Zt,EA=new Zt,ZA=new K,RA=new L.Math.Quaternion,AA=new $9,gA=new b9,function(T,B,G){var H,f,v=this,J=(B=("boolean"==typeof B?{animation:B}:B)||{}).center,M=B.distance,Y=B.direction,m=B.worldDirection,E=G||B.ratio||.8,Z=B.xRatio||E,E=B.yRatio||E,R=((G!==Ht||B.duration||B.frames)&&(B={animation:B}),[]),G=M===Ht;if(J&&YA.fromArray(J),!J||G)if((T=1===(T=T||v.dm().getDatas()).length?E1(T)?T.get(0):T[0]:T)instanceof L.Node)J||YA.fromArray(T.p3()),G&&(PN(R,v,T),H=R.length);else{if(!T.length)return;if(!(!G&&J||(R=[],T.forEach(function(T){PN(R,v,T)}),H=R.length)))return;J||(gA.setFromPoints(R),YA.copy(gA.min).add(gA.max).multiplyScalar(.5))}v._flyAnim&&v._flyAnim.stop(!0),JA.fromArray(v.getEye()),MA.fromArray(v.getCenter()),v.setCenter(YA.x,YA.y,YA.z),mA.subVectors(JA,MA),(Y||m)&&(!m&&T instanceof L.Node?RA.setFromEuler(AA.set(T.r3(),T.getRotationMode(),!0)):RA.set(0,0,0,1),J=mA.length(),mA.fromArray(m||Y).applyQuaternion(RA).setLength(J));var A=new Zt(v.getUp()),g=l.fequal(A.x,0,1e-5)&&l.fequal(A.z,0,1e-5),F=(g&&0===mA.x&&0===mA.z&&(T=mA.y,mA.y=.999*T,mA.z=.001*Math.sign(T)),0);if(G){var W,s,S,y=Z,x=E;if(EA.copy(mA),v.isOrtho()){var w=-1/0;for(v._eye[0]=mA.x+YA.x,v._eye[1]=mA.y+YA.y,v._eye[2]=mA.z+YA.z,W=y$(v),Z$(W,W,S$(v)),f=0;f<H;f++)S=R[f],s=ps([S.x,S.y,S.z,1],W),w=Math.max(w,Math.max(Math.abs(s[0])/y,Math.abs(s[1])/x));F=v.getOrthoWidth()*w}else{for(var O,_,N=v.getNear(),p=10;p--;){for(v._eye[0]=mA.x+YA.x,v._eye[1]=mA.y+YA.y,v._eye[2]=mA.z+YA.z,W=y$(v),Z$(W,W,S$(v)),O=!0,_=-1/0,f=0;f<H;f++){if(S=R[f],(s=ps([S.x,S.y,S.z,1],W))[3]<N&&p){mA.multiplyScalar(2),O=!1;break}_=Math.max(_,Math.max(Math.abs(s[0])/y,Math.abs(s[1])/x)-s[3])}if(O)break}mA.setLength(_+mA.length())}mA.manhattanLength()<1e-6&&mA.copy(EA)}else mA.setLength(M);var q,u,i,I,D,h,o,e,c,t,d,Q,m=mA.add(YA);return(Y=s1(B.animation))?(v.setEye(JA.x,JA.y,JA.z),v.setCenter(MA.x,MA.y,MA.z),J=m.clone().sub(YA),(q=J.length())&&J.multiplyScalar(1/q),T=JA.clone().sub(MA),(u=T.length())&&T.multiplyScalar(1/u),G=(new K).lookAtDirection(T,A),Z=(new K).lookAtDirection(J,A),i=(new j9).setFromRotationMatrix(G),I=(new j9).setFromRotationMatrix(Z),D=(new Zt).subVectors(YA,MA),F&&(h=v.getOrthoWidth()),o=new Zt,e=new Zt,c=new Zt,t=Y.action,d=Y._37o,Q=MA.clone(),Y.action=function(T,B){e.copy(Q).addScaledVector(D,T);var G=i.clone().slerp(I,T);o.set(0,0,1).applyQuaternion(G).setLength(u+(q-u)*T).add(e),c.set(0,1,0).applyQuaternion(G),v.setCenter(e.x,e.y,e.z),v.setEye(o.x,o.y,o.z),v.setUp(c.x,c.y,c.z),F&&v.setOrthoWidth((F-h)*T+h),t&&t(T,B)},Y._37o=function(){delete v._flyAnim;var T=v.getUp(),B=g?vt.graph3dViewUp:A.toArray();T[0]===B[0]&&T[1]===B[1]&&T[2]===B[2]||v.setUp(B),d&&d()},{lastEye:JA,lastCenter:MA,eye:m,center:YA,orthoWidth:F,animation:v._flyAnim=c2(Y)}):(v.setEye(m.x,m.y,m.z),v.setCenter(YA.x,YA.y,YA.z),F&&v.setOrthoWidth(F),delete v._flyAnim,{lastEye:JA,lastCenter:MA,eye:m,center:YA,orthoWidth:F})}),getBoundingBox:(vA=new K,function(T){if(0===(T=(T=T||this.sm().getSelection())instanceof L.Node?[T]:T).length)return ft;var G=[],B=(T.forEach(function(T){var B;r(T)&&(B=G,vA.fromArray(hs(T,this.getMat(T))),T=T.getAnchor3d(),B.push((new Zt).set(0-T.x,0-T.y,0-T.z).applyMatrix4(vA)),B.push((new Zt).set(0-T.x,0-T.y,1-T.z).applyMatrix4(vA)),B.push((new Zt).set(0-T.x,1-T.y,0-T.z).applyMatrix4(vA)),B.push((new Zt).set(0-T.x,1-T.y,1-T.z).applyMatrix4(vA)),B.push((new Zt).set(1-T.x,0-T.y,0-T.z).applyMatrix4(vA)),B.push((new Zt).set(1-T.x,0-T.y,1-T.z).applyMatrix4(vA)),B.push((new Zt).set(1-T.x,1-T.y,0-T.z).applyMatrix4(vA)),B.push((new Zt).set(1-T.x,1-T.y,1-T.z).applyMatrix4(vA)))},this),[1/0,1/0,1/0]),H=[-1/0,-1/0,-1/0];return G.forEach(function(T){B[0]=Math.min(T.x,B[0]),B[1]=Math.min(T.y,B[1]),B[2]=Math.min(T.z,B[2]),H[0]=Math.max(T.x,H[0]),H[1]=Math.max(T.y,H[1]),H[2]=Math.max(T.z,H[2])}),{min:B,max:H}}),isShaderCompileParallel:function(){return!!this._parallelShaderCompile},enableShaderCompileParallel:function(){var T=this.getGLExtensions();return!!T&&!!T.get("KHR_parallel_shader_compile")&&void(this._parallelShaderCompile=!0)},disableShaderCompileParallel:function(){this._parallelShaderCompile=!1},setBatchInfo:function(T,B){var G=this._batchInfoMap[T];this._batchInfoMap[T]=B,this.fp("batchInfo",G,B)},getBatchInfo:function(T){return this._batchInfoMap[T]||qw[T]},getStaticInstancingKey:function(T,B){if(!B&&(H=T._lastInstancingKey))return H;var G,B=T.s("shape3d"),H=M1(B)?G=(G=B.uuid)?G:B.uuid=l.generateUUID():B;return H+=(T._flipSide?"_1_":"_0_")+T.s("static.group"),T._lastInstancingKey=H},setOrthoWidth:function(T){var B,G,H,f=this._orthoWidth;this._orthoWidth=T,this._syncEyeWithOrthoWidth&&(B=T/this.getAspect()/2/et(this.getFovy()/2),G=(new Zt).fromArray(this.getEye()),H=(new Zt).fromArray(this.getCenter()),G.sub(H).setLength(B).add(H),this.setEye(G.toArray())),this.fp("orthoWidth",f,T)},getCamera:function(T){var B=this,G=((T=(T=T||B._mainCamera)||(B._mainCamera=new L.Camera)).s({"camera.type":B.isOrtho()?"ortho":"perspective","camera.aspect":B.getAspect(),"camera.fovy":B.getFovy(),"camera.ortho.width":B.getOrthoWidth(),"camera.near":B.getNear(),"camera.far":B.getFar()}),B.getEye());return T.p3(G.slice()),T.lookAt(B.getCenter(),B.getUp()),T},syncFromCamera:function(T){var B=this,G=new Zt(B.getEye()),H=new Zt(B.getCenter()),f=new Zt,v=H.sub(G).length(),J=(B.setEye(T.p3()),T.getEuler());return f.set(0,0,-1).applyEuler(J),G.copy(f).setLength(v).add(H.copy(T.p3())),B.setCenter(G.toArray()),G.set(0,1,0).applyEuler(J),H.set(0,1,0),Math.abs(f.cross(G).dot(H))<1e-5?B.setUp(H.toArray()):B.setUp(G.toArray()),B.setOrtho("ortho"===T.s("camera.type")),B.setAspect(T.s("camera.aspect")),B.setFovy(T.s("camera.fovy")),B.setOrthoWidth(T.s("camera.ortho.width")),B.setNear(T.s("camera.near")),B.setFar(T.s("camera.far")),!0},resetHeadlightProperties:function(){this._headlightColor=vt.graph3dViewHeadlightColor,this._headlightIntensity=vt.graph3dViewHeadlightIntensity,this._headlightRange=vt.graph3dViewHeadlightRange,this._headlightDirection=vt.graph3dViewHeadlightDirection,this._headlightGroup=vt.graph3dViewHeadlightGroup,this._headlightAmbientIntensity=vt.graph3dViewHeadlightAmbientIntensity,this._headlightDisabled=vt.graph3dViewHeadlightDisabled,this._headlightRatioForPhysicalMaterial=vt.graph3dViewHeadlightRatioForPhysicalMaterial},resetFogProperties:function(){this._fogDisabled=vt.graph3dViewFogDisabled,this._fogMode=vt.graph3dViewFogMode,this._fogDensity=vt.graph3dViewFogDensity,this._fogColor=vt.graph3dViewFogColor,this._fogNear=vt.graph3dViewFogNear,this._fogFar=vt.graph3dViewFogFar},_gatherRenderLayersByPriority:function(T){if(T||!(this._renderLayerSettingsVersion>=fJ)){var B,G=this,H=(G._renderLayerSettingsVersion=fJ,G._sortedRenderLayers=N.keys(G._renderLayerInfoMap));for(B in vJ)0<=H.indexOf(B)||H.push(B);H.sort(function(T,B){return G.getRenderLayerInfo(T).priority-G.getRenderLayerInfo(B).priority})}},setRenderLayerInfo:function(T,B){YJ(0,T,this._renderLayerInfoMap);var G,H=this.getRenderLayerInfo(T),T=o2(H);for(G in B)"mask"!==G&&(H[G]=B[G]);this._gatherRenderLayersByPriority(!0),this.fp("renderLayerInfo",T,H)},getRenderLayerInfo:function(T){return this._renderLayerInfoMap[T]||vJ[T]},setRenderLayerInfoMap:function(T){var B,G=this._renderLayerInfoMap;for(B in this._renderLayerInfoMap={},T)this.setRenderLayerInfo(B,T[B]);this.fp("renderLayerInfoMap",G,this._renderLayerInfoMap)},getRenderLayerInfoMap:function(){return this._renderLayerInfoMap},getRenderLayerKeys:function(){return this._sortedRenderLayers}}),vt.registerTextureLoader=function(T){pA?pA.push(T):pA=[T]},vt.unregisterTextureLoader=function(T){if(pA)return 0<=(T=pA.indexOf(T))&&(pA.splice(T,1),0===pA.length&&(pA=null),!0)},function(T,B){return(5131!==B||T.isWebGL2()?B:null!==(T=T._glExtensions.get("OES_texture_half_float"))?T.HALF_FLOAT_OES:null)||5121}),vZ=function(T,B,G){if(!T.isWebGL2())return B;var H=B;return 6403===B&&(5126===G&&(H=33326),5131===G&&(H=33325),5121===G&&(H=33321)),33319===B&&(5126===G&&(H=33328),5131===G&&(H=33327),5121===G&&(H=33323)),6407===B&&(5126===G&&(H=34837),5131===G&&(H=34843),5121===G&&(H=32849)),6408===B&&(5126===G&&(H=34836),5131===G&&(H=34842),5121===G&&(H=32856)),33325!==H&&33326!==H&&34842!==H&&34836!==H||T._glExtensions.get("EXT_color_buffer_float"),H},JZ=l.newIdGenerator(),MZ=(N.assign(sx.Graph3dView.prototype,{getTextureMap:function(){return this._2O},setTextureStyle:function(T,B,G){return!(!(T=z(T))||!T.texture||(this.deleteTexture(T),T[B]=G,this.iv(),0))},setTexture:function(T,B,G){var H;G=G||"",(H=(H=this._2O[T])?H:this._2O[T]={})[G]=B},deleteTexture:function(T){if(this._2O){T&&T.uuid&&(T=T.uuid);var B=this._2O[T];if(B){delete this._2O[T];var G,H=this.getGL();for(G in B)H.deleteTexture(B[G])}}},invalidateCachedTexture:function(T,B){var G=this.getData3dUI(T).invalidateCachedTexture(this.getGL());!1===B&&!G||this.invalidateData(T)},invalidateShape3dCachedImage:function(T){this.invalidateCachedTexture(T)},getTextureFromLoader:function(T){if(pA)for(var B,G=0,H=pA.length;G<H;G++)if((B=pA[G]).checkType(T))return B.getTexture(this,T)},getGLTextureFromLoader:function(T){var B=this.getTextureFromLoader(T);return B&&(B=this.createTexture(B),this.setTexture(T,B),B)},getPrefabBoneTexture:function(T){var B=this._26I;return B?B._4KQ[T._4LQ||(T._4LQ=JZ.next())]:null},setPrefabBoneTexture:function(T,B){var G=this._26I;return G?(G._4KQ[T._4LQ||(T._4LQ=JZ.next())]=B,!0):null},textureToCanvas:(qA={type:"blitScreen",defines:{USE_LINEAR:!0}},uA={type:"blitScreen"},function(T,B,G,H){var f=KE(T)?T:this.getTextureFromLoader(T);if(f&&(G=G||f.width,H=H||f.height,G&&H))return(f=(B=B===Ht?"linear"===f.colorSpace:B)?qA:uA).image=T,B=new EZ(this,G,H),this.renderModel(B,f),B.releaseTexture(),f.image=null,B.toCanvas()}),createTexture:function(T,B){var G,H,f,v,J=this.getGL(),M=tE,Y=fZ(this,T.type),m=T.format||M.RGBA,E=vZ(this,m,Y);if(T.image?(G=(f=z(T.image)).naturalWidth||f.width,H=f.naturalHeight||f.height,!f||"VIDEO"!==f.tagName&&(!G||!H)):(v=!0,f=T.data,G=T.width,H=T.height,f===Ht||!G||!H))return J._emptyTexture;var Z,R,A,g=T.minFilter||T.filter||M.LINEAR,F=T.magFilter||T.filter||M.LINEAR,W=T.wrapS||T.wrap,s=T.wrapT||T.wrap,S=(W||s||(W=s=!l.isPOT(G)||!l.isPOT(H)||T.clampToEdge||f&&f.clampToEdge?M.CLAMP_TO_EDGE:M.REPEAT),this.isWebGL2());return S||W===M.CLAMP_TO_EDGE&&s===M.CLAMP_TO_EDGE&&(g===M.NEAREST||g===M.LINEAR)||l.isPOT(G)&&l.isPOT(H)||!f||v||(Z=T.scaleMode,R=l.nearestPOT(G),A=l.nearestPOT(H),"smaller"===Z?(G<R&&(R/=2),H<A&&(A/=2)):"larger"===Z&&(R<G&&(R*=2),A<H&&(A*=2)),f=vt.resizeImage(f,R,A),G=R,H=A),B=B||J.createTexture(),J.activeTexture(33984),p$(J,B),J.pixelStorei(37440,!0===T.flipY),J.pixelStorei(37441,!1),v?J.texImage2D(M.TEXTURE_2D,0,E,G,H,0,m,Y,f):J.texImage2D(M.TEXTURE_2D,0,E,m,Y,f),q$(J,10242,W),q$(J,10243,s),q$(J,10240,F),W!==M.CLAMP_TO_EDGE||s!==M.CLAMP_TO_EDGE?(q$(J,10241,9728===g?9984:9987),S&&T.mipmapMaxLevel!==Ht&&q$(J,33085,T.mipmapMaxLevel),J.generateMipmap(M.TEXTURE_2D)):q$(J,10241,g),p$(J,ft),B},getTexture:function(T,B,G,H){if(!T)return ft;var f,v=this,J=v.getGL(),M=v._2O[T];if(!(f=M?M[(Z=B?B.s("texture.mipmap.max"):Z)||""]||M.default:f)&&null===(f=v.getGLTextureFromLoader(T)))return J._emptyTexture;if(!f){if(!(M=z(T)))return J._emptyTexture;if(H=H||{},B&&(H.mipmapMaxLevel=Z=B.s("texture.mipmap.max"),m=B.s("texture.wrap"),H.clampToEdge="clampToEdge"===m||"repeat"!==m&&Ht,H.flipY=B.s("texture.flipY")),M.uuid||(M.uuid=L.Math.generateUUID()),M.tagName||M.texture){if((m=M.texture)&&!z(M.image))return J._emptyTexture;if(M.dynamic)return(E=J._dynamicTexturePool[M.uuid])||(E=J._dynamicTexturePool[M.uuid]=J.createTexture()),m?this.createTexture(M,E):w$(v,J,M,E,H);m?(f=v._2O[M.uuid])?f=f[""]:(f=this.createTexture(M),v.setTexture(M.uuid,f)):(f=w$(v,J,M,Ht,H),v.setTexture(T,f,Z))}else{var Y,m,E=B&&(B.s("texture.cache")||B.s("shape3d.image.cache")||M.textureCache);if((m=v.isVRPresenting())&&B&&(B._textureUpdateFrame===J._renderInfo.frame?E=!0:B._textureUpdateFrame=J._renderInfo.frame),E&&(f=(Y=v.getData3dUI(B)).getCachedTexture(G))&&Y.interactiveInfo&&f.interactiveInfo&&(Y.interactiveInfo[f.interactiveInfo.key]=f.interactiveInfo.info),!f){var Z=J._renderInfo.textureCache;if(E){if(Z.time>vt.graph3dMaxVectorCacheTime)return v.redraw(),J._emptyTexture;if(!p2(M,B))return J._emptyTexture}B&&(1!==B.s("texture.scale")?s=B.s("texture.scale"):1!==B.s("shape3d.texture.scale")&&(s=B.s("shape3d.texture.scale")));var R,A,g,F,W,s=s||1,S=(x=B&&(B.s("fixSizeOnScreen")||B.s("shape3d.fixSizeOnScreen")))?9728:9729;x?"number"==typeof x&&(s*=x<0?1:x):B&&(B.s("vector.dynamic")||B.s("shape3d.vector.dynamic"))&&(x=(Y=Y||v.getData3dUI(B)).getVectorDynamicSize());"billboard"===(y=B&&B.s("shape3d"))?R=B.getTall()/B.getWidth():"plane"===y&&(R=B.getHeight()/B.getWidth());var y=ks(M,B),x=x?(g=E?v._devicePixelRatio||B2:v.getDevicePixelRatio(),A=0<x[0]?x[0]*g:s*y*g,0<x[1]?x[1]*g:s*(R?Cs(M,B,v,Math.min(4096,y*R)):Cs(M,B))*g):(A=s*y,s*(R?Cs(M,B,v,Math.min(4096,y*R)):Cs(M,B)));1<=A&&1<=x&&(g=0,(E||m)&&(g=Date.now()),s=v._glCapabilities.maxTextureSize,A=Math.min(A,s),x=Math.min(x,s),y=L0(A,x),(Y=!Y&&B?v.getData3dUI(B):Y)&&Y.interactiveInfo&&("object"==typeof(F=T)&&(F=F.uuid||(F.uuid=L.Math.generateUUID())),W=Y.interactiveInfo[F]={},y.interactiveInfo=W.bodyInfo={compInfos:[],matrix:new Q9,rect:{x:0,y:0,width:A,height:x}}),as(y,M,0,0,A,x,B,v),y.interactiveInfo&&(y.interactiveInfo=null),y.restore(),Z.count++,Z.pixels+=A*x,B?(H.minFilter=Wx(B.s("texture.filter.min")||B.s("texture.filter"))||S,H.magFilter=Wx(B.s("texture.filter.mag")||B.s("texture.filter"))||S):H.minFilter=H.magFilter=S,E||m?(f=w$(v,J,N0,null,H),Y&&Y.setCachedTexture(f,G),Z.time+=Date.now()-g,W&&(f.interactiveInfo={key:F,info:W}),N0=null):f=w$(v,J,N0,v._1O,H))}}}return f}}),(((G=sx.EnvmapRenderer=function(T){this.gv=T,this._envmaps={},this._envmapHash={},this._probeCaptureTime={},this._envmapPoolCachedByImage=[],this._pingPongRenderTarget=null,this._equirectMaterial=null,this._blurMaterial=null,this._lastCaptureFrame=0,this._cubemapMaterial=null,this._envmapIntensity={}}).prototype={}).constructor=G).prototype.changeEnvmapType=function(T){"legacy"===T?(this.setEnvmapByProbeId=this.setEnvmapLegacy,this.onBeforeRender=this.onBeforeRenderLegacy):(this.setEnvmapByProbeId=this.setEnvmap,this.onBeforeRender=this.onBeforeRenderNew)},G.prototype.invalidateEnvmap=function(T){var B=this.gv;"legacy"!==B.getEnvmapType()&&B.getGL()&&(T?(delete this._envmapHash[T],delete this._probeCaptureTime[T]):(this._envmapHash={},this._probeCaptureTime={}),B.iv())},G.prototype.contextLost=function(){var T=this;T._envmaps={},T._envmapPoolCachedByImage=[],T._envmapHash={},T._pingPongRenderTarget=null,T._equirectMaterial=T._cubemapMaterial=T._blurMaterial=null,T._hdrDynamicComposeRTT=null,T._envmapLegacy=null,T._lastLegacyImage=null},G.prototype.onBeforeRenderLegacy=function(T){this.gv._picking||(this.assureTextureLegacy(T),this.assureEnvmapPoolForImage())},G.prototype.assureTextureLegacy=function(T){var B,G,H=this.gv.getEnvmap();H!==this._lastLegacyImage&&(this._envmapLegacy&&(T.deleteTexture(this._envmapLegacy),this._envmapLegacy=null),H?(B=vt.getImage(H))&&B.tagName&&(B=vt.resizeImagePOT(B,!0),G=this._envmapLegacy=T.createTexture(),T.activeTexture(33984),T.bindTexture(34067,G),T.texParameteri(34067,10240,9729),T.texParameteri(34067,10241,9729),T.texImage2D(34069,0,6408,6408,5121,B),T.texImage2D(34070,0,6408,6408,5121,B),T.texImage2D(34071,0,6408,6408,5121,B),T.texImage2D(34072,0,6408,6408,5121,B),T.texImage2D(34073,0,6408,6408,5121,B),T.texImage2D(34074,0,6408,6408,5121,B),T.bindTexture(34067,T._emptyCubeTexture),this._lastLegacyImage=H):this._lastLegacyImage=H)},G.prototype.setEnvmapLegacy=function(T,B,G){T.uEnvMap=this._envmapLegacy,T.envMapIntensity=G},G.prototype.onBeforeRenderNew=function(T){this.gv._picking||(this.assureTextureNew(T),this.resetUniformCache(),this.assureEnvmapPoolForImage())},G.prototype.isHDR=function(T){return"string"==typeof T&&(T.indexOf(".hdr")===T.length-4||T.indexOf(".HDR")===T.length-4)},G.prototype.isDynamicImage=function(T){return T&&T.comps&&T.comps[0]&&"__ht_envmap_bg__"===T.comps[0].type},G.prototype.isImageReady=function(T){var B;if(this.isHDR(T))B=vt.getHdrTexture(T);else if(B=vt.getImage(T),this.isDynamicImage(B)&&!this.isImageReady(B.comps[0].image))return!1;return B},G.prototype.assureTextureNew=function(T){var B=this,G=B.gv,H=G.getEnvmap(),f=B._envmapHash,v=B._envmaps,J=B._envmapIntensity,T=T._renderInfo.frame;if(this._lastCaptureFrame>=T||G._picking)for(M in H)m=H[M].intensity,J[M]=m==ft?1:m;else{for(var M in H){var Y=H[M],m=Y.intensity;switch(J[M]=m==ft?1:m,Y.type){case"sphere":(g=Y.image)!==f[M]&&(g?B.isImageReady(g)&&(f[M]=g,kN(v,M,B.fromEquirectangular(g))):(f[M]=g,kN(v,M,null)));break;case"cube":var E=Y.images;if(E&&6===E.length&&(g=E.join(","))!==f[M]){for(var Z=!0,R=!1,A=0;A<6;A++){if(!E[A]){R=!0;break}if(!vt.getImage(E[A])){Z=!1;break}}R?(f[M]=g,kN(v,M,null)):Z&&(f[M]=g,kN(v,M,B.fromCubemap(E)))}break;case"skybox":var g,F=G.getSkybox();if(F)if((g="sphere"===(y=F.s("shape3d"))?F._id+"_"+F.s("shape3d.image"):F._id+"_"+F.s("front.image"))!==f[M]){if("sphere"===y)Z=B.isImageReady(F.s("shape3d.image"));else for(var Z=!0,W=["front","back","left","right","top","bottom"],A=0;A<6;A++)if(!vt.getImage(F.s(W[A]+".image"))){Z=!1;break}Z&&(f[M]=g,kN(v,M,B.fromSkybox()))}break;case"probe":var s,S,y=Y.pos,x=Y.size;(g=y[0]+"_"+y[1]+"_"+y[2]+"_"+x)!==f[M]&&(s=this._probeCaptureTime[g],S=Date.now(),s||(this._probeCaptureTime[g]=s=S),S-s>vt.envmapProbeMinWaitTime&&!bw&&!Cx||S-s>vt.envmapProbeMaxWaitTime?(delete this._probeCaptureTime[g],f[M]=g,kN(v,M,B.fromSceneProbe(y,x,Y.filter))):G.iv())}}N.keys(v).forEach(function(T){H[T]===Ht&&(delete f[T],kN(v,T,null))})}},G.prototype.resetUniformCache=function(){this._frameUniformCache={}},G.prototype.setEnvmap=function(T,B,G){var H=T.uuid,f=this._frameUniformCache,v=(v=this._envmaps[B])&&v.texture;f[H]!==v&&(f[H]=v,T.uEnvMap=v),G&&(G*=this._envmapIntensity[B]||0),T.envMapIntensity=G},G.prototype.assureEnvmapPoolForImage=function(){for(var T=this._envmapPoolCachedByImage,B=0,G=T.length;B<G;B++)T[B][0]&&!T[B][1]&&this.isImageReady(T[B][0])&&(T[B][1]=this.fromEquirectangular(T[B][0]))},G.prototype.assureEnvmapFromEquirectangular=function(T){for(var B,G=this._envmapPoolCachedByImage,H=0,f=G.length;H<f;H++)if(G[H][0]===T)return(B=G[H][1])?B.texture:null;return G.push([T,null]),this.gv.iv(),null},G.prototype.invalidateEnvmapUsedByMaterial=function(T){if(T)for(var B=this._envmapPoolCachedByImage,G=0,H=B.length;G<H;G++)B[G][0]===T&&(B[G][1]=null);else this._envmapPoolCachedByImage=[];this.gv.iv()},G.prototype.isEnvmapUsedByMaterialReady=function(T){for(var B=this._envmapPoolCachedByImage,G=T==ft,H=0,f=B.length;H<f;H++)if(G){if(!B[H][1])return!1}else if(B[H][0]===T)return!!B[H][1];return G},G.prototype.fromEquirectangular=function(T){var B,G,H,f,v,J=this.isHDR(T)?(B=L.Default.getHdrTexture(T),"linear"):this.isDynamicImage(T)&&this.isHDR(T.comps[0].image)?(f=(G=T.comps[0]).image,G.image=null,H=this.gv.getTexture(T),G.image=f,f=this.gv.getTexture(f),v=(v=this._hdrDynamicComposeRTT)||(this._hdrDynamicComposeRTT=this._allocateTargets()),J=T.width,this.gv.renderModel(v,J,T.height,{type:"envmapDynamicCompose",offset:G.offset?(G.offset%1+1)%1:0,texture1:f,texture2:H}),v=v.texture,B=T,"linear"):(B=L.Default.getImage(T),"sRGB");return B?(this.rectSize=[1/B.width,1/B.height],T=v||this.gv.getTexture(T),this.fromTexture(T,null,J)):null},G.prototype.fromCubemap=function(T){for(var B=this.gv.getGL(),G=B.createTexture(),H=(B.activeTexture(33984),B.bindTexture(34067,G),B.texParameteri(34067,10240,9729),B.texParameteri(34067,10241,9729),[]),f=QA/3,v=0;v<6;v++)H[v]=vt.resizeImage(L.Default.getImage(T[v]),f);return B.texImage2D(34069,0,6408,6408,5121,H[0]),B.texImage2D(34070,0,6408,6408,5121,H[1]),B.texImage2D(34071,0,6408,6408,5121,H[2]),B.texImage2D(34072,0,6408,6408,5121,H[3]),B.texImage2D(34073,0,6408,6408,5121,H[4]),B.texImage2D(34074,0,6408,6408,5121,H[5]),B.bindTexture(34067,B._emptyCubeTexture),this.fromTexture(G,!0,"sRGB")},G.prototype.fromTexture=function(T,B,G){var H=this._allocateTargets(),f=(this._pingPongRenderTarget||(this._pingPongRenderTarget=this._allocateTargets()),this.gv),v=f.getGL(),J=At.for(v).directState(),M=J.depth.enabled,Y=(J.scissor.enabled=!0,J.depth.enabled=!1,f.getViewport(v));return this._textureToCubeUV(T,H,B,G),this._applyPMREM(H),f.setViewport(v,Y[0],Y[1],Y[2],Y[3]),J.depth.enabled=M,J.scissor.enabled=!1,H},G.prototype.fromSkybox=function(){return this._fromCamera(function(T){T.s({"camera.onlySky":!0,"camera.skybox.blur":!1})})},G.prototype.fromScene=function(B){return this._fromCamera(function(T){T.s({"camera.onlySky":!1}),B&&B(T)})},G.prototype.fromNode=function(T){var B,G=this.gv.getData3dUI(T),H=G._42,f=(G._42=jw,this.gv.getSkybox()),v=T.p3(),T=(f&&(B=f.p3(),f.p3(v)),this.fromScene(function(T){T.p3(v)}));return G._42=H,f&&f.p3(B),T},G.prototype.fromSceneProbe=function(B,G,H){var T,f,v=this.gv,J=v.getSkybox(),M=(J&&(T=J.p3(),J.p3(B)),H&&(f=v.isVisible,v.isVisible=function(T){var B=H(T);return B!==Ht?B:f.call(v,T)}),this.fromScene(function(T){T.p3(B),T.s("camera.near",G)}));return H&&(v.isVisible=f),J&&J.p3(T),M},G.prototype._fromCamera=function(T){var B=this.gv,G=B.getCamera(),T=(T&&T(G),new EZ(B,QA,QA,{cube:!0})),H=B.getGL(),f=B.getViewport(H),v=this.setEnvmapByProbeId,J=this.onBeforeRender,G=(this.setEnvmapByProbeId=function(T){T.envMap=H._emptyTexture},this.onBeforeRender=jw,G.attachRenderTarget(T),G.render(B),G.detachRenderTarget(),this.setEnvmapByProbeId=v,this.onBeforeRender=J,B.setViewport(H,f[0],f[1],f[2],f[3]),this.fromTexture(T.texture,!0,"sRGB"));return T.releaseTexture(),G},G.prototype._allocateTargets=function(T){return new EZ(this.gv,3*DA,3*DA,{textureType:5131})},G.prototype._textureToCubeUV=function(T,B,G,H){var f,v,J=this,M=J.gv,Y="sRGB"===H?"USE_SRGB":"USE_LINEAR",Y=(G?(null==J._cubemapMaterial&&(J._cubemapMaterial={}),null==(f=J._cubemapMaterial[Y])&&((v={})[Y]=!0,J._cubemapMaterial[Y]=f={type:"envmapCubemap",defines:v})):(null==J._equirectMaterial&&(J._equirectMaterial={}),null==(f=J._equirectMaterial[Y])&&((v={})[Y]=!0,J._equirectMaterial[Y]=f={type:"envmapEquirect",defines:v})),f.envMap=T,G||(f.texelSize=J.rectSize),tA[0]);M.renderModel(B,{model3d:!0,mesh:Y,mat:f,encoding:"linear"===H?1:0},{restoreViewport:!1,preRender:function(){J._setViewport(B,0,0,3*DA,2*DA)}})},G.prototype._applyPMREM=function(T){for(var B,G,H=1;H<oA;H++)B=Math.sqrt(NA[H]*NA[H]-NA[H-1]*NA[H-1]),G=cA[(H-1)%cA.length],this._blur(T,H-1,H,B,G)},G.prototype._setViewport=function(T,B,G,H,f){var v=this.gv;v.setViewport(v.getGL(),B,G,H,f),v.getRenderState().directState().scissor.box=[B,G,H,f]},G.prototype._blur=function(T,B,G,H,f){var v=this._pingPongRenderTarget;this._halfBlur(T,v,B,G,H,"latitudinal",f),this._halfBlur(v,T,G,G,H,"longitudinal",f)},G.prototype._halfBlur=function(T,B,G,H,f,v,J){var M=this,Y=M.gv,m=M._blurMaterial;if("latitudinal"===v||"longitudinal"===v){m||(M._blurMaterial=m={type:"envmapBlur",defines:{n:eA}});for(var E,Z=dA[G]-1,R=f/(Z=isFinite(f)?Math.PI/(2*Z):2*Math.PI/(2*eA-1)),A=isFinite(f)?1+Math.floor(3*R):eA,g=[],F=0,W=0;W<eA;++W)S=W/R,E=Math.exp(-S*S/2),g.push(E),0==W?F+=E:W<A&&(F+=2*E);for(W=0;W<g.length;W++)g[W]=g[W]/F;m.envMap=T.texture,m.samples=A,m.weights=g,m.latitudinal="latitudinal"===v,J&&(m.poleAxis=J),m.dTheta=Z,m.mipInt=IA-G;var s=dA[H],S=3*Math.max(0,DA-2*s),y=(0===H?0:2*DA)+2*s*(IA-iA<H?H-IA+iA:0),f=tA[H];Y.renderModel(B,{model3d:!0,mesh:f,mat:m},{restoreViewport:!1,preRender:function(T){M._setViewport(B,S,y,3*s,2*s)}})}},iA=4,IA=8,DA=Math.pow(2,IA),oA=IA-iA+1+(hA=[.125,.215,.35,.446,.526,.582]).length,eA=20,B=1/(G=(1+Math.sqrt(5))/2),cA=[new Zt(1,1,1),new Zt(-1,1,1),new Zt(1,1,-1),new Zt(-1,1,-1),new Zt(0,G,B),new Zt(0,G,-B),new Zt(B,0,G),new Zt(-B,0,G),new Zt(G,B,0),new Zt(-G,B,0)],G=function(){for(var T=[],B=[],G=[],H=IA,f=0;f<oA;f++){var v=Math.pow(2,H),J=(B.push(v),1/v);IA-iA<f?J=hA[f-IA+iA-1]:0==f&&(J=0),G.push(J);for(var M=-(J=1/(v-1))/2,Y=1+J/2,m=[],E=[],Z=[],R=0;R<6;R++){var A=R%3*2/3-1,g=2<R?0:-1;m.push(A,g,0,A+2/3,g,0,A+2/3,1+g,0,A,g,0,A+2/3,1+g,0,A,1+g,0),E.push(M,M,Y,M,Y,Y,M,M,Y,Y,M,Y),Z.push(R,R,R,R,R,R)}T.push({position:new Fs(m),uv:new Fs(E),faceIndex:new Fs(Z)}),iA<H&&H--}return{_lodPlanes:T,_sizeLods:B,_sigmas:G}}(),tA=G._lodPlanes,dA=G._sizeLods,NA=G._sigmas,QA=vt.EnvmapTextureSize,vt.setCompType("__ht_envmap_bg__",function(T,B,G,H,f){var v,J,M,Y=G.image;(Y=Y&&vt.getImage(Y))&&(v=B.x,J=B.y,M=B.width,B=B.height,0!=(G=((G.offset||0)%1+1)%1*M|0)&&(T.save(),T.beginPath(),T.rect(v,J,M,B),T.clip(),T.translate(G,0),vt.drawImage(T,Y,v-M,J,M,B,H,f)),vt.drawImage(T,Y,v,J,M,B,H,f),0!=G&&T.restore())}),["left","front","right","back","top","bottom"]),YZ=sx._RenderList=function(D){var h=[],o=[],e={},c={},t={},d={},N={},Q={},L={},j={};return{opaque:h,transparent:o,init:function(){for(var T in h.length=0,o.length=0,L={},j)j[T].length=0},push:function(T,B){if(B){var G,H,f,v,J=T,M=J.gv,Y=J.data,m=J.shapeModel;if(m)if(Y.s("static")&&(W=!0),m.model3d)F=G=H=!0;else{(A=Y.s("shape3d.top.material"))&&(mx(A)?H=!0:G=!0),(A=Y.s("shape3d.bottom.material"))&&(mx(A)?H=!0:G=!0),(A=Y.s("shape3d.from.material"))&&(mx(A)?H=!0:G=!0),(A=Y.s("shape3d.to.material"))&&(mx(A)?H=!0:G=!0),(A=Y.s("shape3d.material"))&&(mx(A)?H=!0:G=!0);var E,Z,R=Y.s("shape3d.transparent")||Y.s("points.transparent");for(m1(m)||(E=n(m.transparent,Y,M),m=[m]),f=0,v=m.length;f<v;f++)Z=m[f],(Z=(Z=(Z=n(Z.transparent,Y,M))===Ht?E:Z)===Ht?R:Z)?H=!0:G=!0}for(f=0,v=MZ.length;f<v;f++){var A,g=J[MZ[f]];g&&((A=M.getFaceMaterial(Y,MZ[f]))?mx(A)?H=!0:G=!0:g.transparent?H=!0:G=!0)}M.isLabelVisible(Y)&&(J.labelInfo&&(Y.s(ce+".transparent")?H=!0:G=!0),J.label2Info&&(Y.s(te+".transparent")?H=!0:G=!0)),M.isNoteVisible(Y)&&(J.noteInfo&&(Y.s(de+".transparent")?H=!0:G=!0),J.note2Info&&(Y.s(Ne+".transparent")?H=!0:G=!0)),J._38o&&(H=G=!0),J._renderParams={opaque:G=!H||G,transparent:H,model3d:F,staticModel3d:W}}var F=(B=T.data)._id;if(!L[F]){L[F]=!0;var W=T._renderParams;if(W&&!1!==W.visible){if(B.isAnimationPlaying()&&(T.shapeModel&&D.updateSkeleton(B,T.shapeModel),B.isAnimationPaused()||D.iv()),T={ui:T,model3d:W.model3d,data:B,z:0,id:F},D._glCapabilities&&D._glCapabilities.instancedArray&&W.staticModel3d&&T.ui.mat&&D.isVisible(B)&&B.s(hB)){for(var s=D.shadowMap.enable,S=D.getStaticInstancingKey(B,!0),y=j[S],x=0!==(S=(y=y||(j[S]={ms:[],ds:[],cs:[],highlightColors:[],length:0,msVersion:0,shadowVersion:0,csVersion:0,highlightVersion:0,shadow:[],cache:{version:-1,length:-1,id:-1,buffer:null},cacheShadow:{version:-1,length:-1,id:-1,buffer:null},cachePick:{version:-1,length:-1,buffer:null},cacheHighlight:{version:-1,length:-1,buffer:null}})).length),w=!1,O=16*S,_=0,p=y.ms,q=T.ui.mat;_<16;_++)p[O+_]!=q[_]&&(w=!0,p[O+_]=q[_]);w&&(y.msVersion=y.msVersion+1),y.ds[S]=F,s&&(s=B.s("shadow.cast"),!w&&y.shadow[S]===s||(y.shadow[S]=s,y.shadowVersion=y.shadowVersion+1));for(var u=Tx(null,D.pickColorMap,D.isSelectable(B),T.ui,ee,!0),w=!1,i=4*S,_=0,I=y.cs;_<4;_++)I[i+_]!==u[_]&&(w=!0,I[i+_]=u[_]);if(w&&(y.csVersion=y.csVersion+1),y.length++,D._model3dInstancedBatchCount++,x)return void(u&&(tx(u,c[F],e),tx(u,d[F],t),tx(u,Q[F],N)))}W.opaque&&h.push(T),W.transparent&&o.push(T)}}},getModel3dInstancedBatchMap:function(){return j},resetModel3dInstancedDraw:function(){for(var T in j)j[T].rendered=null},batchModelMap:e,batchIndexMap:c,polylineModelMap:t,polylineIndexMap:d,wireframeModelMap:N,wireframeIndexMap:Q,beginFillHighlightMaskColor:function(T){var B,G=D.dm();for(B in j){var H=j[B],f=H.ds;if(f&&H.length){for(var v=H.highlightColors,J=!1,M=!1,Y=0,m=H.length;Y<m;Y++)for(var E=T(G.getDataById(f[Y]),!0)?[0,0,0,0]:(M=!0,[0,1,1,1]),Z=4*Y,R=0;R<4;R++)v[Z+R]!==E[R]&&(J=!0,v[Z+R]=E[R]);J&&(H.highlightVersion=H.highlightVersion+1),H._csBackup=[H.cs,H.csVersion,H.cachePick],H.cs=H.highlightColors,H.csVersion=H.highlightVersion,H.cachePick=H.cacheHighlight,H._highlightInvalid=!M}}},endFillHighlightMaskColor:function(){for(var T in j){var B=(T=j[T])._csBackup;B&&(T.cachePick=B[2],T.csVersion=B[1],T.cs=B[0],T._csBackup=Ht,T._highlightInvalid=Ht)}},ivBatch:function(T){T?(Dx(e,c,T,D),Dx(t,d,T,D),Dx(N,Q,T,D)):(e=this.batchModelMap={},c=this.batchIndexMap={},t=this.polylineModelMap={},d=this.polylineIndexMap={},N=this.wireframeModelMap={},Q=this.wireframeIndexMap={}),this.markBatchInvalid()},ivModelBatch:function(T){T?Dx(e,c,T,D):(e=this.batchModelMap={},c=this.batchIndexMap={}),this.markBatchInvalid()},ivPolylineBatch:function(T){T?Dx(t,d,T,D):(t=this.polylineModelMap={},d=this.polylineIndexMap={}),this.markBatchInvalid()},ivWireframeBatch:function(T){T?Dx(N,Q,T,D):(N=this.wireframeModelMap={},Q=this.wireframeIndexMap={}),this.markBatchInvalid()},markBatchInvalid:function(){this._batchInvalid=!0},isBatchInvalid:function(){return this._batchInvalid},onUpdated:function(){this._batchInvalid=null},sort:function(T,B,G){var H=1<o.length;if(G=G&&1<h.length,H||G){for(var f,v,J,M,Y=B[2],m=B[6],E=B[10],Z=B[14],R=B[3],A=B[7],g=B[11],F=B[15],W=0;W<2;W++){if(0===W){if(!G)continue;M=h}else{if(!H)continue;M=o}for(var s=0,S=M.length;s<S;s++)(J=(v=M[s].data)._position)?(f=J.x,v=v._54O,J=J.y,M[s].z=(Y*f+m*v+E*J+Z)/(R*f+A*v+g*J+F)):M[s].z=0}G&&h.sort(function(T,B){var G=T.model3d;return G!==B.model3d?G?1:-1:T.z!==B.z?T.z-B.z:T.id-B.id}),H&&o.sort(T||CN)}}}},mZ=sx._RenderLists=function(H){var f={};function G(T,B){var G=f[T=T||"main"];return!G&&B?f[T]=new YZ(H):G}return{init:function(){for(var T in f)f[T].init();H._model3dInstancedBatchCount=0},onUpdated:function(){for(var T in f)f[T].onUpdated()},get:G,push:function(T,B){G(T.data.getRenderLayer(),!0).push(T,B)},each:function(T){for(var B in f)T(f[B])},lists:f}},EZ=sx.RenderTarget=function(T,B,G,H){var f,v=this;null!=B&&B.canvas?(f=B,B=G,G=H,H=arguments[4]):f=T.getGL(),H=H||{},H.cube?H.samples=0:H.samples=Math.min(T._glCapabilities.maxSamples,H.samples&&1<H.samples&&2===T._webGLVersion?H.samples:0),v.options=H,v.uuid=L.Math.generateUUID(),v.gv=T,v.init(T,f,H),v.format=H.format||6408,v.textureType=fZ(T,H.textureType),v.generateMipmaps=!!H.generateMipmaps,v.depthInternalFormat=H.depthFormat||33189,H.samples&&!T._glCapabilities._maxSamplesChecked?v.setSize(f,B||1,G||1):v.setSize(f,B,G)},Tw=(N.assign(sx.RenderTarget.prototype,{bind:function(T,B){var G,H,f,v=this.options;v.autoSize&&(G=(f=this.gv).getDevicePixelRatio(),H=f.getWidth()*G,f=f.getHeight()*G,this.setSize(T,H,f)),v.cube?zE(T,this.frame[B]):zE(T,this.options.samples?this._MSAAFbo:this.frame),T._renderTargetStack.push(this)},unbind:function(T){T._renderTargetStack.pop(),nE(T),this.options.samples&&(T.bindFramebuffer(36008,this._MSAAFbo),T.bindFramebuffer(36009,this.frame),T.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,16384,9728),T.bindFramebuffer(36008,null),T.bindFramebuffer(36009,null))},isBinding:function(T){if(!(T=T.frameStack)||!T.length)return!1;var B=T[T.length-1];if(this.options.cube){for(var G=0;G<6;G++)if(this.frame[G]===B)return!0;return!1}return B===(this.options.samples?this._MSAAFbo:this.frame)},_blitDepthToSingle:function(T){var B=this;if(!B.options.samples)return B.depth;var G=B._singleDepth||(B._singleDepth=T.createRenderbuffer());return B._singleDepthWidth===B.width&&B._singleDepthHeight===B.height||(T.bindFramebuffer(36160,B.frame),T.bindRenderbuffer(36161,G),T.renderbufferStorage(36161,B.depthInternalFormat,B.width,B.height),T.framebufferRenderbuffer(36160,36096,36161,G),T.bindRenderbuffer(36161,null),T.bindFramebuffer(36160,null),B._singleDepthWidth=B.width,B._singleDepthHeight=B.height),T.bindFramebuffer(36008,B._MSAAFbo),T.bindFramebuffer(36009,B.frame),T.blitFramebuffer(0,0,B.width,B.height,0,0,B.width,B.height,256,9728),T.bindFramebuffer(36008,null),T.bindFramebuffer(36009,null),G},isCube:function(){return this.options.cube},init:function(T,B,G){var H=G.samples,f=G.cube,v=this.texture=B.createTexture(),J=f?34067:3553,v=(B.activeTexture(33984),B.bindTexture(J,v),B.texParameteri(J,10242,G.wrapS||33071),B.texParameteri(J,10243,G.wrapT||33071),H?9728:9729);if(B.texParameteri(J,10241,G.minFilter||v),B.texParameteri(J,10240,G.magFilter||v),B.bindTexture(J,null),f){this.depth=[],this.frame=[];for(var M=0;M<6;M++)this.depth[M]=B.createRenderbuffer(),this.frame[M]=B.createFramebuffer()}else this.depth=B.createRenderbuffer(),this.frame=B.createFramebuffer();this.assureTexture()},assureTexture:function(){this.gv.setTexture(this.uuid,this.texture,"default"),L.Default.setImage(this.uuid,null)},releaseTexture:function(){this.gv.deleteTexture(this.uuid)},getUUID:function(){return this.uuid},getTexture:function(){return this.texture},getSize:function(){return[this.width,this.height]},setSize:function(T,B,G){var H=this;if(B=Math.round(B),G=Math.round(G),B&&G&&(H.width!==B||H.height!==G)){H.width=B,H.height=G;var f=36161,v=H.options.samples,J=H.options.cube,M=J?34067:3553;if(v){var Y=H.gv._glCapabilities;if(!Y._maxSamplesChecked){for(T.bindRenderbuffer(f,H.depth),T.getError();1<v&&(T.renderbufferStorageMultisample(f,v,H.depthInternalFormat,B,G),T.getError());)v=Math.floor(v>>1);v<=1&&(v=0,T.texParameteri(M,10241,H.options.minFilter||9729),T.texParameteri(M,10240,H.options.magFilter||9729),T.renderbufferStorage(f,H.depthInternalFormat,B,G)),Y._maxSamplesChecked=!0,Y.maxSamples=H.options.samples=v,T.bindRenderbuffer(f,ft)}}if(v&&(H._MSAAFbo||(H._MSAAFbo=T.createFramebuffer(),H._MSAARbO=T.createRenderbuffer()),T.bindRenderbuffer(f,H._MSAARbO),T.renderbufferStorageMultisample(36161,v,32856,B,G),zE(T,H._MSAAFbo),T.framebufferRenderbuffer(36160,36064,f,H._MSAARbO),T.framebufferRenderbuffer(36160,36096,f,H.depth),nE(T),T.bindRenderbuffer(f,null)),T.activeTexture(33984),T.bindTexture(M,H.texture),J)for(var m=0;m<6;m++)H.setupFrameBufferTextureAndDepth(T,H.frame[m],H.depth[m],34069+m);else H.setupFrameBufferTextureAndDepth(T,H.frame,H.depth,3553);H.generateMipmaps&&(2===gv._webGLVersion||l.isPOT(B)&&l.isPOT(G))&&(T.generateMipmap(M),Y=H.options.minFilter||(v?9728:9729),T.texParameteri(M,10241,9728===Y?9984:9987)),T.bindTexture(M,null)}},setupFrameBufferTextureAndDepth:function(T,B,G,H){var f,v=this.format,J=this.textureType;(f=this.options.data)&&(this.options.data=null),T.texImage2D(H,0,vZ(this.gv,v,J),this.width,this.height,0,v,J,f||null),zE(T,B),T.framebufferTexture2D(36160,36064,H,this.texture,0),this.setupRenderBufferStorage(T,G),nE(T)},setupRenderBufferStorage:function(T,B){T.bindRenderbuffer(36161,B);var G=this.options.samples;G?T.renderbufferStorageMultisample(36161,G,this.depthInternalFormat,this.width,this.height):(T.renderbufferStorage(36161,this.depthInternalFormat,this.width,this.height),T.framebufferRenderbuffer(36160,36096,36161,B)),T.bindRenderbuffer(36161,null)},readPixels:function(T,B,G,H,f){var v,J=this.gv.getGL();zE(J,this.frame),v=5121===this.textureType?(f=f||new Uint8Array(4*G*H),5121):(f=f||new Float32Array(4*G*H),5126);try{J.readPixels(T,B,G,H,6408,v,f)}finally{nE(J)}return f},readPixelsAsync:function(T,B,G,H,f,v){if(!this.gv.isWebGL2())throw new Error("readPixelsAsync only work on WebGL2");var J,M,Y,m,E,Z,R=this.gv.getGL();zE(R,this.frame),J=5121===this.textureType?(f=f||new Uint8Array(4*G*H),5121):(f=f||new Float32Array(4*G*H),5126);try{var A=_$(R),g=(R.bindBuffer(35051,A),R.bufferData(35051,f.byteLength,35041),R.readPixels(T,B,G,H,6408,J,0),R.bindBuffer(35051,null),R.fenceSync(37143,0));R.flush()}finally{nE(R)}M=R,Y=g,m=0,E=10,Z=function(T){R.deleteSync(g),T&&(R.bindBuffer(35051,A),R.getBufferSubData(35051,0,f),R.bindBuffer(35051,null)),R.deleteBuffer(A),v(T?f:null)},function T(){var B=M.clientWaitSync(Y,m,0);37149==B?Z(!1):37147==B?jt(T,E):Z(!0)}()},toCanvas:function(T,B){var G,H=this.width,f=this.height,v=this.readPixels(0,0,H,f),J=((B=B||R.createElement("canvas")).width!==H&&(B.width=H),B.height!==f&&(B.height=f),(G=T?((LA=LA||R.createElement("canvas")).width!==H&&(LA.width=H),LA.height!==f&&(LA.height=f),LA.getContext("2d")):B.getContext("2d")).createImageData(H,f));if(v instanceof Float32Array){for(var M=v.byteLength/v.BYTES_PER_ELEMENT,Y=new Uint8Array(M);0<=--M;){var m=v[M];m<0?m=0:1<m&&(m=1),Y[M]=255*m}v=Y}return J.data.set(v),G.putImageData(J,0,0),T&&(G=B.getContext("2d"),u2(G,{width:H,height:f,comps:[{scaleY:-1,type:"image",name:LA,rect:[0,0,H,f]}]},Ht,0,0,H,f)),B}}),sx.Interactor=function(T){this.gv=this.g3d=T}),ZZ=(v("Interactor",N,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()},fi:function(T){this.gv.fi(T)},startDragging:function(T){fs(this,T)}}),sx.DefaultInteractor=function(T){O1(ZZ,this,[T])}),RZ=(v("DefaultInteractor",Tw,{getState:function(){return this._62O},setState:function(T){this._62O=T},handle_contextmenu:function(T){_2(T)},handle_mousewheel:function(T){this.gv.handleScroll(T,T.wheelDelta/40)},handle_DOMMouseScroll:function(T){2===T.axis&&this.gv.handleScroll(T,-T.detail)},handle_keydown:function(T){this.gv.handleKeyDown(T)},handle_mousedown:function(T){this.handle_touchstart(T)},handle_touchstart:function(T){_2(T);var B=this,G=B.gv,H=L2(T),f=(v=G.getDataInfoDuringInteract(T))?v.data:ft,v=v?v.part:ft,J=G.sm(),M=y0(T),Y=X2(T);G.setFocus(T)&&(B._62O=ft,B._57I=ft,B.pendingClickThrough=ft,B.__lastClientPoint__=K2(T),f?b2(T)?J.co(f)?J.rs(f):J.as(f):J.co(f)?f instanceof nW&&f.isClickThroughEnabled()&&L2(T)&&(B.pendingClickThrough=K2(T)):J.ss(f):H&&(b2(T)?G.isRectSelectable()&&(B._62O=Ce):B._57I=K2(T)),B._31Q&&(D2(B._31Q),delete B._31Q,delete B._32Q),B._62O||(G.isFirstPersonMode()&&(l2(T)||j2(T)||2<Y?B._62O="pan":G.isMouseRoamable()||R0(T)?(B._62O="roaming",B.foward=M&&L2(T),B._32Q=Pw(),B._31Q=I2(B.tick,B)):H||(B._62O="roaming")),B._62O||(H&&M&&IZ[v]?(B._62O=v,B.p3=f.p3()):H&&M&&r(f)&&G.isSelected(f)?G.isMovable(f)?(B._62O="move",B.p3=f.p3(),B.movedata=f):G._39Q(f)&&(B._62O="none"):R0(T)&&(2<Y?B._62O="pan":2===Y&&(B.dist=F4(T),B._62O="pinch")))),B.point=G.lp(T),fs(B,T),U2(T)?G.handleDoubleClick(T,f,v):G.handleClick(T,f,v))},tick:function(){var T=this.gv,B=T._moveStep;this.point&&T.isWalkable()&&(this._32Q&&(B*=(Pw()-this._32Q)/50),T.walk(this.foward?B:-B),this._32Q=Pw(),this._31Q=I2(this.tick,this))},handle_mouseup:function(T){this.handle_touchend(T)},handle_touchend:function(T){var B=this._57I;B&&(n2(B,K2(T))<=1&&this.gv.sm().cs(),this._57I=ft),(B=this.pendingClickThrough)&&(n2(B,K2(T))<=1&&(B=this.gv.getDataInfoDuringInteract(T))&&B.data instanceof nW&&B.data.isClickThroughEnabled()&&(B=this.gv.getDataInfoDuringInteract(T,!0))&&(T.clickThrough=!0,this.gv.sm().ss(B.data)),this.pendingClickThrough=null)},handleWindowMouseMove:function(T){this.handleWindowTouchMove(T)},handleWindowTouchMove:function(B){var G,H,T=this,f=T.gv,v=T._62O,J=T.point,M=f.dm(),Y=f.lp(B),m=Y.x-J.x,E=Y.y-J.y,Z=f.getWidth(),R=f.getHeight();if(Z&&R){var A=K2(B),A=jJ(f,A,T.__lastClientPoint__),A=n2({x:0,y:0},A),g=-mt*m/Z,F=-mt*E/R;if("roaming"===v)T.rotate(B,g/2,F/2);else if(v===OZ||v===_Z||v===pZ)f._86O||M.beginTransaction(),f.fi({kind:f._86O?"betweenEditRotation":"beginEditRotation",event:B}),f._86O=1,f.sm().each(function(T){var B;r(T)&&f.isRotationEditable(T)&&(B=it(g)>it(F)?g:F,v===OZ?T.setRotationX(T.getRotationX()+B):v===_Z?T.setRotationY(T.getRotationY()+B):v===pZ&&T.setRotationZ(T.getRotationZ()+B))});else if("move"===v||IZ[v]){if(v===qZ||v===uZ||v===iZ)f._87O||M.beginTransaction(),f.fi({kind:f._87O?"betweenEditScale":"beginEditScale",event:B}),f._87O=1;else{if(!f._moving){if(A<vt.touchMoveThreshold)return;M.beginTransaction()}f.fi({kind:f._moving?"betweenMove":"beginMove",event:B}),f._moving=1}var W,s,A=T.p3,M=f.getPositionInfo(A),S=S$(f),y=v===yZ?"x":v===xZ?"y":v===wZ?"z":v===qZ?"sx":v===uZ?"sy":v===iZ?"sz":f.getMoveMode(B,T.movedata),m=m/Z*M.width,E=-1*E/R*M.height,Z=[S[0]*m,S[4]*m,S[8]*m],R=[S[1]*E,S[5]*E,S[9]*E],M=Z[0]+R[0],S=Z[1]+R[1],Z=Z[2]+R[2],R=[A[0]+M,A[1]+S,A[2]+Z],x=Ws(f.getEye(),R,!0);if("xyz"===y?(W=R,f.moveSelection(M,S,Z)):"xz"===y?(W=v$(f,A,[0,1,0],R))&&f.moveSelection(W[0]-A[0],0,W[2]-A[2]):"xy"===y?(W=v$(f,A,[0,0,1],R))&&f.moveSelection(W[0]-A[0],W[1]-A[1],0):"yz"===y?(W=v$(f,A,[1,0,0],R))&&f.moveSelection(0,W[1]-A[1],W[2]-A[2]):"x"===y||"sx"===y?(x[0]=0,(W=v$(f,A,x,R))&&(s=W[0]-A[0],"x"===y?f.moveSelection(s,0,0):f.sm().each(function(T){r(T)&&f.isSizeEditable(T)&&(G=T.getScaleX()+s/100,H=G/T.getScaleX(),T.setScaleX(G),l2(B)&&(T.setScaleY(T.getScaleY()*H),T.setScaleTall(T.getScaleTall()*H)))}))):"y"===y||"sy"===y?(x[1]=0,(W=v$(f,A,x,R))&&(s=W[1]-A[1],"y"===y?f.moveSelection(0,s,0):f.sm().each(function(T){r(T)&&f.isSizeEditable(T)&&(G=T.getScaleTall()+s/100,H=G/T.getScaleTall(),T.setScaleTall(G),l2(B)&&(T.setScaleY(T.getScaleY()*H),T.setScaleX(T.getScaleX()*H)))}))):"z"!==y&&"sz"!==y||(x[2]=0,(W=v$(f,A,x,R))&&(s=W[2]-A[2],"z"===y?f.moveSelection(0,0,s):f.sm().each(function(T){r(T)&&f.isSizeEditable(T)&&(G=T.getScaleY()+s/100,H=G/T.getScaleY(),T.setScaleY(G),l2(B)&&(T.setScaleX(T.getScaleX()*H),T.setScaleTall(T.getScaleTall()*H)))}))),!W)return;T.p3=W}else v===Ce?((M=T.div)||(M=T.div=r1(),K1(T.getView(),M),M.op=J,M.style.background=f.getRectSelectBackground()),f.fi({kind:f._rectSelecting?"betweenRectSelect":"beginRectSelect",event:B}),f._rectSelecting=1,M.rect=$2(M.op,Y),D(M,M.rect)):"pinch"===v&&2===X2(B)?(f.fi({kind:f._pinching?"betweenPinch":"beginPinch",event:B}),f._pinching=1,s=F4(B),f._lastZoomLP||(f._lastZoomLP=(Z=(S=B).touches[0],S=S.touches[1],x=Z.clientX,Z=Z.clientY,{x:(x+S.clientX)/2,y:(Z+S.clientY)/2})),f.handlePinch(s,T.dist),T.dist=s):"pan"===v||l2(B)||j2(B)?T.pan(B,m,E):"none"===v||f.isFirstPersonMode()||T.rotate(B,g,F);T.point=Y}},pan:function(T,B,G){var H,f,v=this.gv;v.isPannable()&&(f=v.getWidth(),H=v.getHeight(),f&&H&&(f=B/f*(B=v.getCenterInfo()).width,G=-1*G/H*B.height,v.fi({kind:v._panning?"betweenPan":"beginPan",event:T}),v._panning=1,v.pan(-f,-G)))},rotate:function(T,B,G){var H=this.gv;H.isRotatable()&&(H.fi({kind:H._rotating?"betweenRotate":"beginRotate",event:T}),H._rotating=1,H.rotate(B,G))},handleWindowMouseUp:function(T){this.handleWindowTouchEnd(T)},handleWindowTouchEnd:function(T){var B,G,H,f,v,J=this,M=J.gv,Y=M.dm(),m=J.div;m&&((B=M.getDatasInRect(m.rect)).isEmpty()||(G=M.sm(),H=G.toSelection(),f=l2(T),v=T.altKey,B.each(function(T){G.co(T)?f&&!v||H.remove(T):(!v||f&&v)&&H.add(T)}),G.ss(H)),vs(m)),M._moving&&(delete M._moving,M.fi({kind:"endMove",event:T}),M.onMoveEnded(),Y.endTransaction()),M._panning&&(delete M._panning,M.fi({kind:"endPan",event:T}),M.onPanEnded()),M._rotating&&(delete M._rotating,M.fi({kind:"endRotate",event:T}),M.onRotateEnded()),M._86O&&(delete M._86O,M.fi({kind:"endEditRotation",event:T}),Y.endTransaction()),M._87O&&(delete M._87O,M.fi({kind:"endEditScale",event:T}),Y.endTransaction()),M._pinching&&(delete M._pinching,M.fi({kind:"endPinch",event:T}),M.onPinchEnded()),M._rectSelecting&&(delete M._rectSelecting,M.fi({kind:"endRectSelect",event:T}),M.onRectSelectEnded()),M._walking&&(delete M._walking,M.fi({kind:"endWalk",event:T}),M.onWalkEnded()),M._lastZoomLP=M._lastZoomHit=null,J.dist=J.point=J._62O=J.p3=J.movedata=J.div=J._57I=J.pendingClickThrough=J._32Q=J._31Q=J.foward=ft,J.__lastClientPoint__=ft}}),sx.MapInteractor=function(T){O1(RZ,this,[T]),this._keepHorizon=!0,this._threshold=2,this._touchScaleThreshold=.05,this._touchRotateThreshold=.03,this._touchScaleCheckAccuracy=.01,this._panButton="right",this._minPhi=0,this._maxPhi=5*Math.PI/12}),AZ=(v("MapInteractor",Tw,{setUp:function(){RZ.superClass.setUp.call(this);var T=this.gv;this.__oldMinPhi__=T.getRotateMinPhi(),this.__oldMaxPhi__=T.getRotateMaxPhi(),T.setRotateMinPhi(this._minPhi),T.setRotateMaxPhi(this._maxPhi)},tearDown:function(){RZ.superClass.tearDown.call(this);var T=this.gv;T.setRotateMinPhi(this.__oldMinPhi__),T.setRotateMaxPhi(this.__oldMaxPhi__),delete this.__oldMinPhi__,delete this.__oldMaxPhi__},handle_contextmenu:function(T){_2(T)},handle_mousewheel:function(T){this.gv.handleScroll(T,T.wheelDelta/40)},handle_DOMMouseScroll:function(T){2===T.axis&&this.gv.handleScroll(T,-T.detail)},handle_keydown:function(T){this.gv.handleKeyDown(T)},handle_mousedown:function(T){this.handle_touchstart(T)},handle_touchstart:function(T){_2(T);var B,G,H,f=this.gv;f.setFocus(T)&&(B=(G=f.getDataInfoAt(T))?G.data:ft,G=G?G.part:ft,this.__lastClientPoint__=K2(T),H=this.editing={point:f.lp(T),data:B,part:G},R0(T)?H.touch=!0:(H.touch=!1,H.clickLeft=L2(T),j2(T)?H.pan=!0:H.pan="left"===this.panButton===H.clickLeft),B&&f._39Q(B)&&(H.preventDefault=!0),fs(this,T),U2(T)?f.handleDoubleClick(T,B,G):f.handleClick(T,B,G))},handle_mouseup:function(T){this.handle_touchend(T)},handle_touchend:function(T){},handleWindowMouseMove:function(T){this.handleWindowTouchMove(T)},handleWindowTouchMove:function(T){var B=this,f=B.gv,G=B.editing;if(G){var H=f.lp(T),v=G.point,J=H.x-v.x,v=H.y-v.y;if(!G.moved){if(Math.abs(J)<B.threshold&&Math.abs(v)<B.threshold&&!(T.touches&&1<T.touches.length))return;G.moved=!0}if(!G.preventDefault){G.point=H;var M,Y,m,E,Z,R,A=G.part;if(IZ[A]){var H=G.data,g=f.dm(),F=f.getWidth(),W=f.getHeight(),s=-mt*J/F,S=-mt*v/W;if(A===OZ||A===_Z||A===pZ){f._86O||g.beginTransaction(),f.fi({kind:f._86O?"betweenEditRotation":"beginEditRotation",event:T}),f._86O=1;var y=it(s)>it(S)?s:S;f.sm().each(function(T){r(T)&&f.isRotationEditable(T)&&(A===OZ?T.setRotationX(T.getRotationX()+y):A===_Z?T.setRotationY(T.getRotationY()+y):A===pZ&&T.setRotationZ(T.getRotationZ()+y))})}else{var x,w,O,_,H=H.p3(),J=J/F*(q=f.getPositionInfo(H)).width,v=-1*v/W*q.height,p=[(q=S$(f))[0]*J,q[4]*J,q[8]*J],q=[q[1]*v,q[5]*v,q[9]*v],p=[H[0]+(p[0]+q[0]),H[1]+(p[1]+q[1]),H[2]+(p[2]+q[2])],q=Ws(f.getEye(),p,!0);if(A===qZ||A===uZ||A===iZ)f._87O||g.beginTransaction(),f.fi({kind:f._87O?"betweenEditScale":"beginEditScale",event:T}),f._87O=1,(x=v$(f,H,q,p))&&(I=0,A===qZ?w="X":A===uZ?(w="Tall",I=1):A===iZ&&(w="Y",I=2),(O=["X","Y","Tall"]).splice(O.indexOf(w),1),_=l2(T),i=(x[I]-H[I])/100,f.sm().each(function(B){var T,G,H;r(B)&&f.isSizeEditable(B)&&(T=B["getScale"+w](),B["setScale"+w](G=T+i),_&&(H=G/T,O.forEach(function(T){B["setScale"+T](B["getScale"+T]()*H)})))}));else if(A===yZ||A===xZ||A===wZ){if(!f._moving){var u=K2(T),u=jJ(f,u,B.__lastClientPoint__);if(n2({x:0,y:0},u)<vt.touchMoveThreshold)return;g.beginTransaction()}f.fi({kind:f._moving?"betweenMove":"beginMove",event:T}),f._moving=1;var i,I=0;A===yZ?I=0:A===xZ?I=1:A===wZ&&(I=2),q[I]=0,(x=v$(f,H,q,p))&&(i=x[I]-H[I],(u=[0,0,0])[I]=i,f.moveSelection.apply(f,u))}}}else G.touch?2!==(g=T.touches.length)?B.pan(T,J,v):g<=1||(p=(q=T.touches)[0].clientX,x=q[0].clientY,u={x:(H=q[1].clientX)-p,y:(I=q[1].clientY)-x},g=G.lastCenter,q=Math.atan2(u.y,u.x),M=0,(m=G.theta)==ft?m=G.theta=q:(M=q-m,G.thetaStarted||Math.abs(M)>B.touchRotateThreshold?(G.thetaStarted=!0,G.theta=q):M=0),m=o*(x+I)/2/f.getHeight(),q=0,(Y=G.phi)==ft?Y=G.phi=m:(q=m-Y,G.phiStarted||Math.abs(q)>B.touchRotateThreshold?(G.phiStarted=!0,G.phi=m):q=0),Y=Math.sqrt(u.x*u.x+u.y*u.y),(m=G.vlen)?(u=p-g.x,Z=x-g.y,R=H-g.x,g=I-g.y,u=Math.sqrt(u*u+Z*Z),Z=Math.sqrt(R*R+g*g),(g=B._sign2(u-(R=m/2)))*(u=B._sign2(Z-R))<0||0===g&&0===u?(E=1,G.vlen=Y):(E=E||Y/m,G.scaleStarted||Math.abs(E-1)>B.touchScaleThreshold?(G.vlen=Y,G.scaleStarted=!0):E=1)):(m=G.vlen=Y,E=1),1!==E&&f.setZoom(E),(q||M)&&B.rotate(T,M,-q),G.lastCenter={x:(H+p)/2,y:(I+x)/2}):G.pan?B.pan(T,J,v):(F=f.getWidth(),W=f.getHeight(),F&&W&&(s=-mt*J/F,S=-mt*v/W,B.rotate(T,s,S)))}}},_sign2:function(T){return Math.abs(T)<this._touchScaleCheckAccuracy?0:0<T?1:-1},handleWindowMouseUp:function(T){this.handleWindowTouchEnd(T)},handleWindowTouchEnd:function(T){var B,G,H=this.editing;this.editing=null,H&&(B=this.gv,H.moved||!H.clickLeft&&!H.touch?(B._panning=null,B._rotating=null,B.fi({kind:H.pan?"endPan":"endRotate",event:T})):(G=(G=(H=B.getDataInfoDuringInteract(T))&&H.data)instanceof nW&&G.isClickThroughEnabled()&&(H=B.getDataInfoDuringInteract(T,!0))?H.data:G)?B.sm().setSelection([G]):B.sm().clearSelection(),H=B.dm(),B._moving&&(delete B._moving,B.fi({kind:"endMove",event:T}),B.onMoveEnded(),H.endTransaction()),B._86O&&(delete B._86O,B.fi({kind:"endEditRotation",event:T}),H.endTransaction()),B._87O&&(delete B._87O,B.fi({kind:"endEditScale",event:T}),H.endTransaction()))},pan:function(T,B,G){var H=this.gv;if(H.isPannable()){var f=H.getWidth(),v=H.getHeight();if(f&&v){var J=H.getCenterInfo(),B=-B/f*J.width,f=+G/v*J.height,G=(H.fi({kind:H._panning?"betweenPan":"beginPan",event:T}),H._panning=1,this.keepHorizon);if(!(G=(v=this.editing.touch)&&T.touches&&1<T.touches.length||!v&&l2(T)?!G:G))return H.pan(B,f);(B||f)&&(v=[(J=S$(H))[0]*B,J[4]*B,J[8]*B],T=[J[1],0,J[9]],(G=Math.sqrt(T[0]*T[0]+T[2]*T[2]))&&(T=[T[0]/G*f,0,T[2]/G*f]),B=v[0]+T[0],J=v[1]+T[1],G=v[2]+T[2],f=H._center,v=H._eye,f[0]+=B,f[1]+=J,f[2]+=G,v[0]+=B,v[1]+=J,v[2]+=G,H.fp(ve,ft,v),H.fp(fe,ft,f))}}},rotate:function(T,B,G){var H,f,v=this.gv;v.isRotatable()&&(f=v._center,H=v._eye,H=Ws(H,f),f=ct(ut(H[0]*H[0]+H[2]*H[2]),H[1]),G=H$(v,f+G)-f,v.fi({kind:v._rotating?"betweenRotate":"beginRotate",event:T}),v._rotating=1,v.rotate(B,G))}}),N.defineProperties(RZ.prototype,{panButton:{get:function(){return this._panButton},set:function(T){this._panButton=T}},minPhi:{get:function(){return this._minPhi},set:function(T){this.gv.setRotateMinPhi(this._minPhi=T)}},maxPhi:{get:function(){return this._maxPhi},set:function(T){this.gv.setRotateMaxPhi(this._maxPhi=T)}},keepHorizon:{get:function(){return this._keepHorizon},set:function(T){this._keepHorizon=T}},threshold:{get:function(){return this._threshold},set:function(T){this._threshold=T}},touchScaleThreshold:{get:function(){return this._touchScaleThreshold},set:function(T){this._touchScaleThreshold=T}},touchRotateThreshold:{get:function(){return this._touchRotateThreshold},set:function(T){this._touchRotateThreshold=T}}}),sx.GlobeInteractor=function(A,T){function H(T){return A._81O=null,T=A.getHitPosition(T,A.getCenter(),Z.copy(A.getEye()).sub(S.copy(A.getCenter())).toArray()),R.origin.copy(A.getEye()),R.direction.copy(T).sub(R.origin).normalize(),R.intersectEllipsoid(y)}function g(T,B){var G;s&&(G=Date.now(),s.deltaTime=s.lastTime?G-s.lastTime:1e3,s.lastTime=G,s.lastAxis=T,s.lastAngle=B),B&&(f.setFromAxisAngle(T,B),A.setEye(Z.copy(A.getEye()).applyQuaternion(f).toArray()),A.setCenter(Z.copy(A.getCenter()).applyQuaternion(f).toArray()),A.setUp(Z.copy(A.getUp()).applyQuaternion(f).toArray()))}function F(T){return Math.abs(T)<.01?0:0<T?1:-1}O1(AZ,this,[A]);var v,W=T.radius||6378137,M=this,s=null,f=(jA||((jA=r1()).style.border="",jA.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEyUlEQVRYR62XW0xcVRSG/58cmIG2HmstE9N4SX2xtVqBCISoFS/RmDSpKQSvTWNixUStQSqVyBQYJUGttrQVtYkPatuQPmhivMUHqbUBZ2itl1qjTzZpImNUZhDLsUeWWXgOOd2cgcGyk3mYs/de69trr70uxP8YIlJKMi0i9wIgyf0iEiM5PFdxzGeDiBQAuB7AjQBuALCN5NcGQDmANgBfeL8UyYnZ5M8KICJ3AXgAwAlfOMl/VHAQwPtveYAKuQLA2yQ/ngliRgAR2QogA2AvSdcUZAIE50VEYR4BsIDkC7kgQgFE5GIAuwDsJnkk1+aZAPw9IqLX1gjgcZK/m7KmAXjK4wBaSf4ZplxEIgCuA3Cz3gSAfgDHSf6dY/0FAJ4D0G5ChAEcAPBwmHIRqXNd90nLsiocx/k+k8n8oK/Atu2rIpHIStd1v7QsawfJd0Ouywawh6T609Q4B8C788NhZnddt29sbGxBd3f39q6urtNhJ43H48uam5u3lJSUjFiWdV8IxE0Aqki+6M9NAXjefjnJXsOZogBGBgYGttbU1Hw427PS+cHBwbVVVVUJAItJOoa8xwD8RPIT/T4J4L3zfQAeNL1dRMZra2ur+/v7/8pHub+mvr7+wr6+vs8KCgoWGABFAN4EsEHjhA9QBeA2ks8HF6vZk8nkQL4nNwGTyeTa8vLycsuy7jcg1Mk/IpnyAZoBaOQ6FHg+ddlsdqNt201zObm5NpvN7ly0aNHrJN8LyL4FwGqSr/gAOrnej3C60HXdw/F4PJ7L4fKFSiQSl7W0tLQVFRWtCQDoNRwguZ6aWABcorE9sEDf+QjJ1fkqmmmdiHwHoCToXyKiceR0rkhY5TjOq9FoVLPdeY/x8fG+SCSySe/cFKYWCFOyPJ1Or4zFYh3nrR3A8PBwe2lp6TcAfg4DmBYwAFyRTqdXxWKx9nkE+DYUIEyBiFQ6jvNaNBq9Zz4AZruCGIBlJI8ZXpolee18AORwwgoAp/xnqMmjPuilZ8+ePZRIJNo7OztD436+YB0dHZe2trY+W1hYWGsccD/JOh/gKQBHSWpanRwicnc2m91k2/bmfJWFrRsdHd29cOHCXSTfD8i+FcA1JHcEQ/HtJDVnTw3XdfcPDQ0dra6unto8F5hUKrWurKxslWVZG4L7RGQbgA9IDgWT0VsANprJaGJi4kxDQ8OagwcPjsxFeWNj49Le3l6N91qMTA2vmNnr6fovGXkmvxPAlST3hGz4LZVKbausrMzLEnryioqKNpJLzCpJRJ4AcJLkp6rHLEieBjBA8rB5Wtd1942NjS3p6el5qa2t7VSYNdThmpqaWoqLi38xze4dUku4CpLb/f1hJZnWBY+SzJpKRGSdV5LVOI5zIpPJnNQ1tm2viEQiV7uue8SyrJeDDhew8GIAO0me4w9hABdp8ahNBkktyacNr+Qu84pSndfX81VY6e6dXJV3AoiT/CMoMFcyUogeAG+Q/DyX8+VZlqvZHwKw2VQ+zQdCTL4FwBkPZFrJPUtjoildG5PC4J2bOvJpze7QWhHAj4HWbBImpDXTQsPvH5cDeMf39lxWnBXAU6TNqcZu7fn0lyB53GhOdf6ZQHN6bF6a0xxOuJTkrwbA5LdcJ831/V8SOUYQxYGhRwAAAABJRU5ErkJggg==)"),new j9),Z=new Zt,S=new Zt,Y=new Zt,R=new l9,J="number"==typeof W?{x:W,y:W,z:W}:W,y={center:new Zt(0,0,0),radius:J};M._showCrossIcon=function(T){K1(M.getView(),jA),D(jA,{x:T.clientX-16,y:T.clientY-16,width:32,height:32})},M._hideCrossIcon=function(){vs(jA)},M._scrollImpl=function(T,B){(s={point:A.lp(T),screen:K2(T),hit:H(T),type:"right"}).hitNormalize=s.hit?s.hit.clone().normalize():new Zt,T={clientX:s.screen.x,clientY:s.screen.y+10*B},M._handleMoveImpl(T),M._endMoveImpl(T)},M._startMoveImpl=function(T){v&&(v.stop(!0),v=null),(s={point:A.lp(T),screen:K2(T),hit:H(T)}).hitNormalize=s.hit?s.hit.clone().normalize():new Zt,R0(T)?1===T.touches.length?s.hit&&(s.type="left"):2===T.touches.length&&(s.type="touch2"):(L2(T)?s.hit&&(s.type="left"):r2(T)?s.type="right":j2(T)&&s.hit&&(s.type="middle"),!s.hit||"right"!==s.type&&"middle"!==s.type||M._showCrossIcon(T)),s.type&&fs(M,T)},M._handleMoveImpl=function(T){if(s)switch(s.type){case"left":return M._handleLeft(T);case"right":return M._handleRight(T);case"middle":return M._handleMiddle(T);case"touch2":return M._handleTouch2(T)}},M._endMoveImpl=function(T){var G,H,f;s&&(this._hideCrossIcon(),"left"!==s.type&&"middle"!==s.type||(G=s.lastAngle/(s.deltaTime||30)*1e3,H=s.lastAxis,f=s.lastTime,v=c2({action:function(){var T=Date.now(),B=(T-f)/1e3;f=T,G*=Math.pow(Math.abs(M.decelerationRate),3*B),Math.abs(G)<.01?(G=0,v&&v.stop()):g(H,G*B)},duration:5e3})),s=null)},M._handleLeft=function(T){if(!s.finished){var B=K2(T),G=function(T,B){A._81O=null,R.origin.copy(A.getEye());for(var G,H,f=A.getCenter(),v=Z.copy(A.getEye()).sub(S.copy(A.getCenter())).toArray(),J=1,M=16,Y=0,m=1,E={x:0,y:0};M--;){if(E.x=B.x+(T.x-B.x)*J,E.y=B.y+(T.y-B.y)*J,G=A.getHitPosition(E,f,v),R.direction.copy(G).sub(R.origin).normalize(),(H=R.intersectEllipsoid(y))&&1===J)return{hit:H};H?Y=J:m=J,J=(Y+m)/2}return{hit:H,out:J<1}}(B,s.lastScreen||s.screen);if(s.lastScreen=B,!G.hit)return s.finished=!0,void M._endMoveImpl(T);(B=G.hit).normalize();var H=s.hitNormalize,f=Math.acos(B.dot(H));g(B=B.cross(H).normalize(),f),G.out&&(s.finished=!0,M._endMoveImpl(T))}},M._handleRight=function(T){var B,G=(s.lastScreen||s.screen).y;(T=(s.lastScreen=K2(T)).y-G)&&(G=Math.min(.5,T*M.scaleSpeed),Z.copy(A.getEye()),T=(T=s.hit)||Z.clone().divide(J).normalize().multiply(J),S.copy(Z).lerp(T,G),A.setEye(S.toArray()),Z.copy(A.getUp()),S.normalize(),T=Z.clone().cross(S).normalize(),Y.copy(A.getCenter()),Y.sub(T.multiplyScalar(Y.dot(T))),A.setCenter(Y.toArray()),s.hit&&(G=H(s.screen),T=s.hitNormalize,G&&(G.normalize(),B=Math.acos(G.dot(T)),G=G.cross(T).normalize(),B&&g(G,B))))},M._handleTouch2=function(T){var B,G,H,f,v,J,M,Y,m,E,Z,R;2===T.touches.length&&(B=(T=T.touches)[0].clientX,G=T[0].clientY,R={x:(H=T[1].clientX)-B,y:(T=T[1].clientY)-G},E=s.lastCenter,J=Math.atan2(R.y,R.x),f=0,(v=s.theta)==ft?v=s.theta=J:(f=J-v,s.thetaStarted||.03<Math.abs(f)?(s.thetaStarted=!0,s.theta=J):f=0),v=Math.sqrt(R.x*R.x+R.y*R.y),(J=s.vlen)?(Z=B-E.x,Y=G-E.y,m=H-E.x,E=T-E.y,Z=Math.sqrt(Z*Z+Y*Y),Y=Math.sqrt(m*m+E*E),(E=F(Z-(m=J/2)))*(Z=F(Y-m))<0||0===E&&0===Z?(M=1,s.vlen=v):(M=M||v/J,s.scaleStarted||.05<Math.abs(M-1)?(s.vlen=v,s.scaleStarted=!0):M=1)):(J=s.vlen=v,M=1),R=S.copy(A.getEye()).clone(),1!==M&&A.setEye(R.setLength((R.length()-W)/M+W).toArray()),f&&g(R.normalize(),f),s.lastCenter={x:(H+B)/2,y:(T+G)/2})},M._handleMiddle=function(T){var T=K2(T),B=s.screen,G=((s.screen=T).y-B.y)/180*Math.PI*M.rollSpeed,H=(S.copy(A.getCenter()).sub(Z.copy(A.getEye())).normalize(),Z.copy(A.getUp()).cross(S).normalize(),S.copy(A.getEye()).sub(s.hit).applyAxisAngle(Z,G).add(s.hit),S.clone()),f=(S.copy(A.getCenter()).sub(s.hit).applyAxisAngle(Z,G).add(s.hit),S.clone()),v=S.copy(A.getUp()).applyAxisAngle(Z,G).clone(),J=!1,G=(0<G&&(Y.copy(v),S.copy(f).sub(H).normalize(),Z.copy(H).multiplyScalar(-1).normalize(),0<Z.dot(Y)-S.dot(Y)&&(J=!0)),J||0<=Y.copy(s.hit).sub(H).dot(s.hitNormalize)&&(J=!0),J||(A.setEye(H.toArray()),A.setCenter(f.toArray()),A.setUp(v.toArray())),-(T.x-B.x)/180*Math.PI*M.rotateSpeed);g(s.hitNormalize,G)}}),gZ=(v("GlobeInteractor",Tw,{handle_contextmenu:function(T){_2(T)},handle_mousewheel:function(T){this._scrollImpl(T,T.wheelDelta/40)},handle_DOMMouseScroll:function(T){2===T.axis&&this._scrollImpl(T,-T.detail)},handle_keydown:function(T){this.gv.handleKeyDown(T)},handle_mousedown:function(T){this.handle_touchstart(T)},handle_touchstart:function(T){_2(T);var B,G,H=this.gv;H.setFocus(T)&&((B=(G=H.getDataInfoAt(T))?G.data:ft)&&H.isInteractive(B)||this._startMoveImpl(T),G=G?G.part:ft,U2(T)?H.handleDoubleClick(T,B,G):H.handleClick(T,B,G))},handle_mouseup:function(T){this.handle_touchend(T)},handle_touchend:function(T){},handleWindowMouseMove:function(T){this.handleWindowTouchMove(T)},handleWindowTouchMove:function(T){this._handleMoveImpl(T)},handleWindowMouseUp:function(T){this.handleWindowTouchEnd(T)},handleWindowTouchEnd:function(T){this._endMoveImpl(T)}}),N.defineProperties(AZ.prototype,{rotateSpeed:{get:function(){return this._rotateSpeed||.3},set:function(T){this._rotateSpeed=T}},rollSpeed:{get:function(){return this._rollSpeed||.1},set:function(T){this._rollSpeed=T}},scaleSpeed:{get:function(){return this._scaleSpeed||.002},set:function(T){this._scaleSpeed=T}},decelerationRate:{get:function(){return this._decelerationRate||.04},set:function(T){this._decelerationRate=T}}}),function(T){return[((T|=2147483648)>>16&255)/255,(T>>8&255)/255,(255&T)/255,(T>>24&255)/255]}),FZ=function(T){this.gv=T,this.gv.pickColorMap={_pickIdUsed:2e3}},WZ=(Es(FZ,N,{_iv:!0,iv:function(){this._iv=!0},get:function(T,B,G){this.validate();var H=this.gv.getGL();if(!H)return ft;var f,v,J=this._resolution,M=Math.round(T.x*J),Y=Math.ceil(T.width*J),m=Math.ceil(T.height*J),T=this.height-Math.round(T.y*J)-m,E=pt(Y/2),Z=new Uint8Array(Y*m*4),R=0,A=Z.length,g=B?ft:new $,F=B?ft:{};if(zE(H,this.frame),H.readPixels(M,T,Y,m,6408,5121,Z),nE(H),B){for(;R<=E;R++)for(var W=E-R,s=E+R,S=W;S<=s;S++)for(var y=W;y<=s;y++)if((S===W||S===s||y===W||y===s)&&(f=this.info(Z,4*(S*Y+y)))&&(!G||!1!==G(f)))return f}else for(;R<A;R+=4)!(f=this.info(Z,R))||G&&!1===G(f)||F[(v=f.data)._id]||(g.add(v),F[v._id]=v);return g},info:function(T,B){return this.gv.pickColorMap[(T[B]<<16)+(T[B+1]<<8)+T[B+2]+((127&T[B+3])<<24)]},getResolution:function(){return this._resolution},onContextLost:function(){this.texture=null,this.width=this.height=-1},validate:function(T){var B,G,H,f=this,v=f.gv,J=v.getGL();J&&(G=f._resolution=v._pickerResolution*v.getDevicePixelRatio(),B=Math.round(G*v.getWidth()),G=Math.round(G*v.getHeight()),f.texture||(f.texture=w$(v,J),f.render=J.createRenderbuffer(),f.frame=J.createFramebuffer()),f.width===B&&f.height===G||(J.activeTexture(33984),p$(J,f.texture),J.texImage2D(3553,0,6408,B,G,0,6408,5121,ft),q$(J,10241,9729),J.bindRenderbuffer(36161,f.render),J.renderbufferStorage(36161,33189,B,G),zE(J,f.frame),J.framebufferTexture2D(36160,36064,3553,f.texture,0),J.framebufferRenderbuffer(36160,36096,36161,f.render),p$(J,ft),J.bindRenderbuffer(36161,ft),nE(J),f.width=B,f.height=G),f._iv&&(H=f._iv=!1,v._40Q.each(function(T){!H&&T.isBatchInvalid()&&(H=!0)}),H&&v.updateScene(),zE(J,f.frame),J.clear(16384),v.overlappingBox.clear(),v.setViewport(J,0,0,B,G),v.renderPickScene(),nE(J)))}}),function(T){this.gv=T}),sZ=(Es(WZ,N,{gap:0,size:0,_42:function(T){var B,G=this,H=G.gv,f=H._gridGap,v=H._gridSize;if(H._gridVisible){if(G.gap!==f||G.size!==v){for(var J=[],M=H._gridSize/2,Y=f*M,m=0;m<2*M+1;m++){var E=6*m,Z=6*(2*M+1)+E;J[E]=-Y,J[1+E]=0,J[2+E]=m*f-Y,J[3+E]=Y,J[4+E]=0,J[5+E]=m*f-Y,J[Z]=m*f-Y,J[1+Z]=0,J[2+Z]=-Y,J[3+Z]=m*f-Y,J[4+Z]=0,J[5+Z]=Y}G.vs=new Fs(J),G.gap=f,G.size=v}C$(H),e$(T),N$(T),(v=!H._fogDisabled)&&((B=At.for(T).directUniforms()).uFog=!1),j$(T,1,H._gridColor,H._buffer.vs,G.vs),X$(T,0,G.vs.length/3,1),v&&(B.uFog=!0),Q$(T),c$(T)}else G.vs=G.gap=G.size=ft}}),function(T){this.gv=T}),SZ=(Es(sZ,N,{_42:function(T){var B,G,H,f,v=this.gv,J=v._buffer.vs,M=v._axisXColor,Y=v._axisYColor,m=v._axisZColor,E=v._originAxisVisible,Z=v._centerAxisVisible;(E||Z)&&(G=lt?4:6,C$(v),e$(T),N$(T),E&&(H=v.getCenterInfo(),f=Jt(H.width,H.height)/5,j$(T,1.5,M,J,new Fs([0,0,0,f,0,0,E=.8*f,B=.05*f,0,E,0,B,E,-B,0,E,0,-B,E,B,0,0,0,0,0,f,0,B,E,0,0,E,B,-B,E,0,0,E,-B,B,E,0,0,0,0,0,0,f,B,0,E,0,B,E,-B,0,E,0,-B,E,B,0,E])),X$(T,0,2,1),X$(T,1,6,G),j$(T,ft,Y),X$(T,7,2,1),X$(T,8,6,G),j$(T,ft,m),X$(T,14,2,1),X$(T,15,6,G)),Z&&(E=(B=v._center)[0],G=B[1],Z=B[2],H=v.getPositionInfo(B),f=Jt(H.width,H.height)/20,j$(T,1.5,M,J,new Fs([E,G,Z,E+f,G,Z,E,G,Z,E,G+f,Z,E,G,Z,E,G,Z+f])),X$(T,0,2,1),j$(T,ft,Y),X$(T,2,2,1),j$(T,ft,m),X$(T,4,2,1)),Q$(T),c$(T))}}),function(T){this.gv=T}),yZ="edit_tx",xZ="edit_ty",wZ="edit_tz",OZ="edit_rx",_Z="edit_ry",pZ="edit_rz",qZ="edit_sx",uZ="edit_sy",iZ="edit_sz",IZ={},DZ=(IZ[yZ]=101,IZ[xZ]=102,IZ[wZ]=103,IZ[OZ]=104,IZ[_Z]=105,IZ[pZ]=106,IZ[qZ]=107,IZ[uZ]=108,IZ[iZ]=109,Es(SZ,N,{_42:function(T){var B,G,H,f,v,J,M,Y,m,E,Z,R,A,g,F=this,W=F.gv,s=W.sm().ld();!s||!W.isEditable(s)||W.isEditHelperDisabled()||!r(s)||W.isFirstPersonMode()&&(W.isMouseRoamable()||$t)||(C$(W),B=W.isMovable(s),G=W.isRotationEditable(s),H=W.isSizeEditable(s),f=W._axisXColor,v=W._axisYColor,J=W._axisZColor,M=W._editSizeColor,R=s.p3(),W=(Y=W.isOrtho()?(Y=W.getCenterInfo(),Jt(Y.width,Y.height)/8):n2(W.getEye(),R)/10)/(W.isPicking()?5:10),m=.4*(Y*=.7),E=R[0],Z=R[1],R=R[2],g=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],B&&F._17O(T,s,yZ,f,g,[E,Z-W,R,E+Y,Z-W,R,E+Y,Z,R,E+Y,Z,R,E,Z,R,E,Z-W,R,E,Z-W,R+W,E+Y,Z-W,R+W,E+Y,Z-W,R,E+Y,Z-W,R,E,Z-W,R,E,Z-W,R+W]),A=E+Y,H&&F._17O(T,s,qZ,M,g,[A,Z-W,R,A+m,Z-W,R,A+m,Z,R,A+m,Z,R,A,Z,R,A,Z-W,R,A,Z-W,R+W,A+m,Z-W,R+W,A+m,Z-W,R,A+m,Z-W,R,A,Z-W,R,A,Z-W,R+W]),A+=m,G&&F._17O(T,s,OZ,f,g,[A,Z-W,R,A+m,Z-W,R,A+m,Z,R,A+m,Z,R,A,Z,R,A,Z-W,R,A,Z-W,R+W,A+m,Z-W,R+W,A+m,Z-W,R,A+m,Z-W,R,A,Z-W,R,A,Z-W,R+W]),g=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],B&&F._17O(T,s,xZ,v,g,[E,Z,R,E,Z+Y,R,E-W,Z+Y,R,E-W,Z+Y,R,E-W,Z,R,E,Z,R,E,Z,R,E,Z,R-W,E,Z+Y,R-W,E,Z+Y,R-W,E,Z+Y,R,E,Z,R]),A=Z+Y,H&&F._17O(T,s,uZ,M,g,[E,A,R,E,A+m,R,E-W,A+m,R,E-W,A+m,R,E-W,A,R,E,A,R,E,A,R,E,A,R-W,E,A+m,R-W,E,A+m,R-W,E,A+m,R,E,A,R]),A+=m,G&&F._17O(T,s,_Z,v,g,[E,A,R,E,A+m,R,E-W,A+m,R,E-W,A+m,R,E-W,A,R,E,A,R,E,A,R,E,A,R-W,E,A+m,R-W,E,A+m,R-W,E,A+m,R,E,A,R]),g=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],B&&F._17O(T,s,wZ,J,g,[E,Z,R,E,Z,R+Y,E,Z-W,R+Y,E,Z-W,R+Y,E,Z-W,R,E,Z,R,E,Z-W,R,E-W,Z-W,R,E-W,Z-W,R+Y,E-W,Z-W,R+Y,E,Z-W,R+Y,E,Z-W,R]),A=R+Y,H&&F._17O(T,s,iZ,M,g,[E,Z,A,E,Z,A+m,E,Z-W,A+m,E,Z-W,A+m,E,Z-W,A,E,Z,A,E,Z-W,A,E-W,Z-W,A,E-W,Z-W,A+m,E-W,Z-W,A+m,E,Z-W,A+m,E,Z-W,A]),A+=m,G&&F._17O(T,s,pZ,J,g,[E,Z,A,E,Z,A+m,E,Z-W,A+m,E,Z-W,A+m,E,Z-W,A,E,Z,A,E,Z-W,A,E-W,Z-W,A,E-W,Z-W,A+m,E-W,Z-W,A+m,E,Z-W,A+m,E,Z-W,A]))},_17O:function(T,B,G,H,f,v){var J=this.gv,M=J._buffer,Y=(m=At.for(T)).directUniforms(),m=m.directAttribs();J._picking&&(J.pickColorMap[J=IZ[G]]={data:B,part:G},Y.uFixPickReverseColor=gZ(J)),t$(T,ft,!0,ft,!0,ft,!1),Y.uDiffuse=H,m.aPosition=l$(T,M.vs,new Fs(v)),m.aNormal=l$(T,M.ns,new Fs(f)),N$(T),X$(T,0,12),Q$(T),d$(T)}}),L.Raycaster=function(T){this.gv=T,this.maxTriangleTest=1/0,this.backfaceCulling=!0,this.triangleTestEpsilon=1e-9}),hZ=(r4("Raycaster",N,{getTriangleTestEpsilon:function(){return this.triangleTestEpsilon},setTriangleTestEpsilon:function(T){return this.triangleTestEpsilon=T,this},getBackfaceCulling:function(){return this.backfaceCulling},setBackfaceCulling:function(T){return this.backfaceCulling=T,this},intersect:function(T){var B=this.gv.getDataAt(T);return B?this.intersectObject(T,B):null},intersectObjects:function(B,T,G){var H,f,v,J,M=this,Y=1/0,m=B.origin||(new Zt).fromArray(M.gv.getEye()),E=M.maxTriangleTest,Z=[],R=(T.forEach(function(T){G&&!1===G(T)||!1!==T.s("intersect")&&Z.push(T)}),m.distanceToSquared2([0,0,0]));return Z.sort(function(T,B){return(T.p3?m.distanceToSquared2(T.p3()):R)-(B.p3?m.distanceToSquared2(B.p3()):R)}),M.countTriangles=0,Z.forEach(function(T){M.countTriangles>E||(H=M.intersectObject(B,T))&&(f=m.distanceToSquared(H.world))<Y&&(v=T,J=H,Y=f)}),M.countTriangles=0,{data:v,intersect:J}},intersectObjectAndRecordTriangle:function(T,B){return this._4GQ=!0,T=this.intersectObject(T,B),this._4GQ=!1,T},intersectLastTriangle:function(T,B){if((T=this.getRay(T)).applyMatrix4(B.inverseMatrix),!(T=T.intersectPlane(B.plane)))return null;var G=n9.uvIntersection(T,B.p1,B.p2,B.p3,B.uv1.clone(),B.uv2.clone(),B.uv3.clone());return{world:T.clone().applyMatrix4(B.matrixWorld),local:T.clone(),uv:G}},getRay:function(T){if(T instanceof l9)return T;var B,G=this.gv,T=G.unproject(T),H=new Zt,f=G.getEye(),v=new Zt;return G.isOrtho()?(B=new Zt(f),v.copy(G.getCenter()).sub(B).normalize(),G=H.copy(T).sub(B).dot(v),H.copy(v).setLength(-G).add(B.copy(T))):(H.copy(f),v.copy(T).sub(H).normalize()),new L.Math.Ray(H,v)},intersectObject:function(T,B){return this._intersectObjectImpl(this.getRay(T),B)},_intersectObjectImpl:(rA=new K,XA=new K,UA=new l9,lA=new Zt,bA=new Zt,KA=new Zt,zA=new Zt,nA=new Zt,$A=new Zt,VA=new Zt,PA=new Zt,kA=new b,CA=new b,aA=new b,TE=new Zt,BE={vs:Mo,is:Yo,uv:mo},(GE=Zo.slice(0)).push("csg"),function(T,B){var G,H,f,v,J,M,Y,m,E,Z,R,A,g,F=this.gv.getData3dUI(B),W=((o=B.mat||F.mat)?rA.fromArray(o):rA.identity(),XA.getInverse(rA),UA.copy(T).applyMatrix4(XA),"body");if(!(o=(o=(o=!(o=F.shapeModel)&&(B instanceof L.Polyline||B instanceof L.Edge)&&F.lineShapeModel?F.lineShapeModel:o)||oo(F))||(L.CSGNode&&B instanceof L.CSGNode||L.CSGShape&&B instanceof L.CSGShape?(f=!0,[F.left,F.front,F.right,F.back,F.top,F.bottom,F.csg]):B instanceof L.Node&&!(B instanceof L.Shape)?(G=!0,BE):(H=!0,[F.left,F.front,F.right,F.back,F.top,F.bottom]))))return console.log("Can not find shape model."),null;m1(o)||(o=[o]);var s,S,y,x,w,O,_=1/0,p=["","top_","bottom_"],q=!1,u=this.backfaceCulling,i=this.triangleTestEpsilon,I=[];for(Zx(o,F,I),v=0,J=I.length;v<J;v++)if((S=I[v])&&(S=S.mesh))for(M=0,Y=p.length;M<Y;M++)if(Z=S[(y=p[M])+"vs"],R=S[y+"is"],A=S[y+"uv"]||S[y+"tuv"],Z){if(x=S[y+"boundingBox"]){if(!(O=UA.intersectBox(x)))continue;if(UA.origin.distanceTo(O)>_)continue;w=!1}else S[y+"boundingBox"]=x=new L.Math.Box3,w=!0;for(m=0,E=R?R.length:Z.length/3;m<E;m+=3)this.countTriangles++,R?(bA.fromArray(Z,3*R[m]),KA.fromArray(Z,3*R[m+1]),zA.fromArray(Z,3*R[m+2])):(bA.fromArray(Z,3*m),KA.fromArray(Z,3*(m+1)),zA.fromArray(Z,3*(m+2))),w&&(x.expandByPoint(bA),x.expandByPoint(KA),x.expandByPoint(zA)),(g=UA.intersectTriangle(bA,KA,zA,u,i,lA))&&(s=UA.origin.distanceTo(g))<_&&(_=s,nA.copy(g),$A.copy(bA),VA.copy(KA),PA.copy(zA),""!==y?W=y.slice(0,-1):G?W=Zo[Math.floor(m/6)]:H?W=Zo[v]:f&&(W=GE[v]),A&&(q=!0,R?(kA.fromArray(A,2*R[m]),CA.fromArray(A,2*R[m+1]),aA.fromArray(A,2*R[m+2])):(kA.fromArray(A,2*m),CA.fromArray(A,2*(m+1)),aA.fromArray(A,2*(m+2)))))}if(!isFinite(_))return null;var D,h,T=nA.clone().applyMatrix4(rA),B=this._4GQ,o=(q&&(B&&(h={inverseMatrix:XA.clone(),matrixWorld:rA.clone(),p1:$A.clone(),p2:VA.clone(),p3:PA.clone(),uv1:kA.clone(),uv2:CA.clone(),uv3:aA.clone(),plane:(new L.Math.Plane).setFromCoplanarPoints($A,VA,PA)}),D=n9.uvIntersection(nA,$A,VA,PA,kA,CA,aA)),aN()),F=aN($A.applyMatrix4(rA),VA.applyMatrix4(rA),PA.applyMatrix4(rA)),T=((B=0<UA.direction.dot(o))&&(o.multiplyScalar(-1),F.multiplyScalar(-1)),{world:T,local:nA.clone(),worldNormal:F,normal:o,uv:D,part:W,backface:B});return h&&(T.triangleInfo=h),T})}),function(H,f){this.gv=H,this.s=function(T,B,G){return(B=B==ft?G:B)==ft?f.getStyle(T):n(B,f,H)},this.data=f}),oZ=(Es(hZ,N,{I3d:!0,ms_icons:1,_iv:!0,_cacheBoundingBox:Ht,iv:function(){this._iv=!0},update:function(T,B,G){var H=this,f=H.data;if(T||(B=(T=H.gv).getGL(),G=T._40Q),H.needValidate(B)&&T.isVisible(f)){var v,J,M,Y=f._id,m=f._47Q?null:H.s("batch"),E=f.getRenderLayer(),Z=(E=G.get(E,!0)).batchIndexMap,R=E.batchModelMap,A=T.getBrightness(f),g=A!=ft&&1!==A,R=hx(Z,R,f,m,T),m=m?T.getBatchInfo(m)||Qw:ft,F=H.validate(R,m);if(R&&(!m.ms||!m.ms.length)&&(v=(m=Z[Y]).size=R.vs.length/3-m.begin,M=R.rs))for(A=g?A:1,J=0;J<v;J++)M.push(A);(Z=T.getWireframeGeometry(f))?cx(T,f,Z):r(f)&&(Y=T.getWireframe(f))&&cx(T,f,Y),H.labelInfo=H.label2Info=H.noteInfo=H.note2Info=H._38o=ft,H._24O(ce,"getLabel"),H._24O(te,"getLabel2"),H._26O(de,"getNote"),H._26O(Ne,"getNote2"),H._15O(),H.interactiveInfo=T.isInteractive(f)?{}:ft,f instanceof L.Block?H._46Q(B):E.push(this,!0),!1!==F&&(H._iv=!1)}else f instanceof L.Block||G.push(this,!1)},clearWireframeGeometryCache:function(){this.gv.invalidateCachedWireframe(this.data)},invalidateWireframe:function(){var T=this.data,B=T.getRenderLayer();(B=this.gv._40Q.get(B))&&B.ivWireframeBatch(T)},_46Q:function(T,B){var G,H,f,v,J=this.data,M=this.gv;M.isVisible(J)&&(v=J._id,H=(G=M._40Q.get(J._renderLayer,!0)).batchIndexMap[v],f=G.polylineIndexMap[v],v=G.wireframeIndexMap[v],(H||f||v)&&(B=B==ft?Tx(T,M.pickColorMap,M.isSelectable(J),this,ee,!0):B)&&(tx(B,H,G.batchModelMap),tx(B,f,G.polylineModelMap),tx(B,v,G.wireframeModelMap)))},_42:function(T,B,G){var H=this,f=H.data,v=H.gv;if(v.isVisible(f)){var J,M,Y,m,E,Z,R,A,g,F,W=v._picking;if(W)J=v.pickColorMap;else{if(v.isTransparentMask(f)||v.isReflecting(T)&&!1===f.s("3d.reflectable"))return;J=Ht}if(hZ.getTitle===Ht)for(var s in hZ.getTitle=0,vt)if(s.length===te.length+1&&s[te.length]===JB[4].toUpperCase()&&s[te.length-1]===JB[te.length+1].toUpperCase()){hZ.getTitle=h1;break}if(!hZ.getTitle||wt[te.length+2]){if(hZ.getHead===Ht)for(var s in hZ.getHead=0,Y0){var S="box-sizing";6===s.length&&s[0]===JB[4]&&s[3]===S[0]&&s[4]===S[1]&&s[5]===S[2]&&(hZ.getHead=aw)}if(!hZ.getHead||wt[te.length]){if(hZ.getTitle2===Ht)for(var s in hZ.getTitle2=0,Y0)6===s.length&&s[0]===XB[1].toUpperCase()&&s[1]==="uv"[0]&&(hZ.getTitle2=Cw);hZ.getTitle2&&!wt[AB.length]||v[he[0]+MB[0]]&&v[he[0]+MB[0]].enable&&!wt[We[0]]||(H.s("shape3d.transmission")&&!W&&(T._transmissionRTT||(T._transmissionRTT=new EZ(v,0,0,{autoSize:!0})),(M=T._renderTargetStack[T._renderTargetStack.length-1]).unbind(T),v.renderModel(T._transmissionRTT,null,null,{type:"blitScreen",transparent:v._45Q,image:M.texture}),M.bind(T)),M=f._id,A=(Y=v._40Q.get(f._renderLayer,!0)).batchIndexMap,g=Y.batchModelMap,m=v.isSelectable(f),R=!(Z=!1),A=A[M],W&&(F=Tx(T,J,m,H,ee,A))&&!v._45Q&&(tx(F,A,g),tx(F,Y.polylineIndexMap[M],Y.polylineModelMap),tx(F,Y.wireframeIndexMap[M],Y.wireframeModelMap)),A||(Z||(Z=!0,R=L$(T,v,f)),R&&(W||!v._45Q||v._oitEnabled||v.isReflecting(T)||T._blooming||!H.s("transparent.separate")?H._80o(T,B,G):(g=At.for(T).directState().cullFace,f._forceSingleFace=2,g.frontFace=f._flipSide?2305:2304,H._80o(T,B,G),f._forceSingleFace=1,g.frontFace=f._flipSide?2304:2305,H._80o(T,B,G),f._forceSingleFace=Ht,g.frontFace=2305))),v.isLabelVisible(f)&&((E=H.labelInfo)&&(W&&Tx(T,J,m,H,ce),Z||(Z=!0,L$(T,v,f)),H._28O(E,ce,G)),(E=H.label2Info)&&(W&&Tx(T,J,m,H,te),Z||(Z=!0,L$(T,v,f)),H._28O(E,te,G))),v.isNoteVisible(f)&&((E=H.noteInfo)&&(W&&Tx(T,J,m,H,de),Z||(Z=!0,L$(T,v,f)),H._29O(E,de,G)),(E=H.note2Info)&&(W&&Tx(T,J,m,H,Ne),Z||(Z=!0,L$(T,v,f)),H._29O(E,Ne,G))),(E=H._38o)&&(Z||(Z=!0,L$(T,v,f)),H._99O(T,E,J,m,G)),Z&&((F=At.for(T).directUniforms()).uBrightness=1,F.uClipDirection=0,At.for(T).directState().cullFace.frontFace=2305,T._blooming&&(F.blackout=!1)))}}}},_formatClipUniforms:function(T,B,G){switch(T){case"uv.right":T=7;break;case"uv.left":T=8;break;case"left":T=2;break;case"top":T=3;break;case"bottom":T=4;break;case"front":T=5;break;case"back":T=6;break;default:T=1}var H,f,v;return T%2==0&&(B=1-B),7===T||8===T?(H=this.shapeModel)&&H.internalUvScale&&(B*=H.internalUvScale):G instanceof L.Shape?(H=G.s3(),f=G.p3(),v=G.getAnchor3d(),B=T<3?(B-v.x)*H[0]+f[0]:T<5?(B-v.y)*H[1]+f[1]:(B-v.z)*H[2]+f[2]):(B-=.5,(v=G._clipPercentageTranform)&&(B=(B+v[0])*v[1])),[T,B]},prepare:function(){var T=this,B=T.data;if(!(B instanceof nW)){var G,H,f,v=T.gv,J=v.getGL(),M=B._id,Y=T.s("batch"),m=v._batchIndexMap,E=v._batchModelMap,Z=v.getBrightness(B),R=Z!=ft&&1!==Z;if(T.needValidate(J)){J=hx(m,E,B,Y,v),E=Y?v.getBatchInfo(Y)||Qw:ft;if(T.validate(J,E),J&&(!E.ms||!E.ms.length)&&(G=(Y=m[M]).size=J.vs.length/3-Y.begin,f=J.rs))for(Z=R?Z:1,H=0;H<G;H++)f.push(Z);r(B)&&((E=v.getWireframeGeometry(B))?cx(v,B,E):(m=v.getWireframe(B))&&cx(v,B,m)),T.labelInfo=T.label2Info=T.noteInfo=T.note2Info=T._38o=ft,T._24O(ce,"getLabel"),T._24O(te,"getLabel2"),T._26O(de,"getNote"),T._26O(Ne,"getNote2"),T._15O(),T.interactiveInfo=v.isInteractive(B)?{}:ft,T._iv=!1}}},dispatchBoundingBoxChanged:function(){this._cacheBoundingBox=Ht},getBoundingBox:function(T){if(this._cacheBoundingBox)return this._cacheBoundingBox;HE||(HE={vs:Mo,is:Yo,uv:mo},fE=new Zt,vE=new Zt,JE=new Zt,ME=new Zt,YE=new Zt);var B,G,H,f,v,J,M,Y,m=this,E=m.data,Z=m.shapeModel;if((Z=(Z=!Z&&(E instanceof L.Polyline||E instanceof L.Edge)&&m.lineShapeModel?m.lineShapeModel:Z)||oo(m))||(L.CSGNode&&E instanceof L.CSGNode||L.CSGShape&&E instanceof L.CSGShape?(isCSG=!0,Z=[m.left,m.front,m.right,m.back,m.top,m.bottom,m.csg]):E instanceof L.Node&&!(E instanceof L.Shape)?Z=HE:(m.left||m.front||m.right||m.back||m.top||m.bottom)&&(Z=[m.left,m.front,m.right,m.back,m.top,m.bottom])),!Z)return Ht;m1(Z)||(Z=[Z]);var R,A,g,F,W,s,S=["","top_","bottom_"],y=new L.Math.Box3,x=!1,w=(m._needRecoverPosition?(ME.set.apply(ME,E.p3()),s=E.s3(),YE.set(1/(s[0]||1),1/(s[1]||1),1/(s[2]||1))):(ME.set(0,0,0),YE.set(1,1,1)),[]);for(Zx(Z,m,w),B=0,G=w.length;B<G;B++)if((R=w[B])&&(A=R.mesh))for(g=R.matrix,H=0,f=S.length;H<f;H++)if(M=A[(W=S[H])+"vs"],Y=A[W+"is"],M){if(!(F=A[W+="boundingBox"]))for(A[W]=F=new L.Math.Box3,v=0,J=Y?Y.length:M.length/3;v<J;v+=3)Y?(fE.fromArray(M,3*Y[v]),vE.fromArray(M,3*Y[v+1]),JE.fromArray(M,3*Y[v+2])):(fE.fromArray(M,3*v),vE.fromArray(M,3*(v+1)),JE.fromArray(M,3*(v+2))),g&&(fE.applyMatrix4(g),vE.applyMatrix4(g),JE.applyMatrix4(g)),fE.sub(ME).multiply(YE),vE.sub(ME).multiply(YE),JE.sub(ME).multiply(YE),fE.isNaN()||F.expandByPoint(fE),vE.isNaN()||F.expandByPoint(vE),JE.isNaN()||F.expandByPoint(JE);y.expandByBox(F),x=!0}return x?(this._cacheBoundingBox=y,N.freeze(y),N.freeze(y.min),N.freeze(y.max),T||Ix(m.gv,E),y):Ht},needValidate:function(T){return this._iv},validate:function(T,B){},_16O:function(T,B,G,H,f,v,J,M,Y){return xs},_80o:function(T,B,G){},dispose:function(){var T,B=this._pickId;B&&(T=this.gv.pickColorMap)[B]&&delete T[B]},getBodyColor:function(T){var B=this.data;return this.gv.getBodyColor(B)||(T?B.getStyle(T):ft)},contextLost:function(){this._cachedTextures&&this.gv.invalidateCachedTexture(this.data)},getCachedTexture:function(T){var B=this._cachedTextures;return B?B[T||"main"]:null},setCachedTexture:function(T,B){return(this._cachedTextures||(this._cachedTextures={}))[B||"main"]=T},invalidateCachedTexture:function(T){var B=this._cachedTextures;if(!B)return!1;var G,H=!1;for(G in B){var f=B[G];f&&(H=!0,T.deleteTexture(f))}return this._cachedTextures={},H},invalidateCachedGeometry:function(){},_24O:function(T,B){var G,H,f=this.data,v=this.gv,J=this.s,M=v[B](f);M!=ft&&(G=J(T+".scale"),H=J(T+".max"),B=(v=this[T+"Info"]={label:M,textureScale:J(T+".texture.scale"),color:v[B+"Color"](f),font:J(T+".font"),align:J(T+".align"),background:v[B+"Background"](f)}).rect=z1(v,M),0<H&&H<B.width&&(v.labelWidth=B.width,B.width=H),B.x=B.y=0,B.width*=G,B.height*=G,v.mat=this._16O(J(T+".autorotate"),J(T+".position"),B,J(T+".face"),J(T+".t3"),J(T+".r3"),J(T+".rotationMode")),f=B.width/2,M=B.height/2,v.vs=new Fs([-f,M,0,-f,-M,0,f,-M,0,f,M,0]),B.width/=G,B.height/=G)},_26O:function(T,B){var G,H=this.data,f=this.gv,v=this.s,J=f[B](H);J!=ft&&(G=v(T+".scale"),J=(f=this[T+"Info"]={note:J,textureScale:v(T+".texture.scale"),expanded:v(T+".expanded"),font:v(T+".font"),color:v(T+".color"),align:v(T+".align"),borderWidth:v(T+".border.width"),borderColor:v(T+".border.color"),background:f[B+"Background"](H)}).expanded?(B=v(T+".max"),(H=z1(f,J)).width+=6,H.height+=2,0<B&&B<H.width&&(f.labelWidth=H.width,H.width=B),{x:-H.width/2,y:-8-H.height,width:H.width,height:H.height+8}):{x:-6,y:-18,width:12,height:18},f.mat=this._16O(v(T+".autorotate"),v(T+".position"),ft,v(T+".face"),v(T+".t3"),v(T+".r3"),v(T+".rotationMode")),f.rect=J,1!==G&&((J=o2(J)).x*=G,J.height*=G,J.y=-J.height,J.width*=G),B=J.x,H=J.y,v=J.width,T=J.height,f.vs=new Fs([B,-H,0,B,-H-T,0,B+v,-H-T,0,B+v,-H,0]))},eachShapeModel:function(J,T){var M=this,B=M.data;!function T(B){var G,H,f,v;if(m1(B))for(H=0,f=B.length;H<f;H++)(G=B[H])&&T(G);else Et(B)?T(oo(M,B)):M1(B)&&(B.shape3d?T(B.shape3d):(eo(v=B),v.vs&&J(v.vs,v.is,v.ns,v.uv),v.top_vs&&J(v.top_vs,v.top_is,v.top_ns,v.top_uv),v.bottom_vs&&J(v.bottom_vs,v.bottom_is,v.bottom_ns,v.bottom_uv),v.from_vs&&J(v.from_vs,v.from_is,v.from_ns,v.from_uv),v.to_vs&&J(v.to_vs,v.to_is,v.to_ns,v.to_uv)))}(T=(T=T||M.shapeModel||oo(M))||(B instanceof L.Node&&!(B instanceof L.Shape)?{vs:Mo,is:Yo}:[M.left,M.front,M.right,M.back,M.top,M.bottom]))},_28O:function(T,B,G){var H,f,v;G(this.s(B+".transparent"))&&(G=T.rect,H=T.textureScale,v=G.width*H,f=G.height*H,1<=v&&1<=f&&(v=L0(v,f),1!==H&&(v.translate(G.x,G.y),v.scale(H,H),v.translate(-G.x,-G.y)),rJ(v,T),v.restore(),Jx(this,B,T.mat,T.vs,!0)))},_29O:function(T,B,G){var H,f,v,J,M;G(this.s(B+".transparent"))&&(G=T.rect,H=T.textureScale,f=G.x,v=G.y,M=G.width*H,J=G.height*H,1<=M&&1<=J&&(G.x=G.y=0,M=L0(M,J),1!==H&&M.scale(H,H),XJ(M,T),M.restore(),G.x=f,G.y=v,Jx(this,B,T.mat,T.vs,!1)))},_99O:function(T,B,G,H,f,v){if(G){var J,M=this.gv,Y=this.data,m=M._buffer,E=M._1O,Z=G.icons,R=At.for(T).directAttribs();for(J in Z){var A=Z[J],g=G.rects[J];if(g&&v(n(A.transparent,Y,M))){M._picking&&Tx(T,H,f,this,J);var F=n(A.shape3d,Y,M),W=F?[F]:n(A.names,Y,M),s=W?W.length:0,S=n(A.textureScale,Y,M)||1,y=n(A.light,Y,M);y==ft&&(y=!!F),t$(T,n(A.blend,Y,M),y,n(A.opacity,Y,M),n(A.reverseFlip,Y,M),n(A.reverseColor,Y,M),n(A.reverseCull,Y,M));for(var x=0;x<s;x++){var w,O,_,p=W[x],q=g[x];vx(this,q.mat),F?Io(M,Y,oo(this,F),this):(p=z(p))&&(w=q.width*S,O=q.height*S,1<=w&&1<=O&&(_=L0(w,O),u2(_,p,n(A.stretch,Y,M),0,0,w,O,Y,M),_.restore(),w$(M,T,N0,E),N$(T,E,n(A.discardSelectable,Y,M),m.uv,fo),R.aPosition=l$(T,m.vs,q.vs),R.aNormal=K$(T,m.ns,vo,ft),n$(T,m.is,Jo),U$(T,0,Jo.length),Q$(T,E))),P$(M)}d$(T)}}}}}),function(T,B){O1(oZ,this,[T,B])}),eZ=(Es(oZ,hZ,{_16O:function(T,B,G,H,f,v,J,M,Y){var m,E,Z=this.data,R=Z.getFinalScale3d(),A=((Z.hasOwnProperty("_anchor")||Z.hasOwnProperty("_anchorElevation"))&&(m=[-((m=Z.getAnchor3d()).x-.5)*R[0],-(m.y-.5)*R[1],-(m.z-.5)*R[2]]),Z.s("part.boundingBox")&&(A=this.getBoundingBox(!0))&&(E=A.max.clone().sub(A.min),A=A.max.clone().add(A.min).divideScalar(2),(m=m||[0,0,0])[0]+=A.x*R[0],m[1]+=A.y*R[1],m[2]+=A.z*R[2],R[0]*=E.x,R[1]*=E.y,R[2]*=E.z),Hx(B,R,G,H,M,Y));return m&&(A[0]+=m[0],A[1]+=m[1],A[2]+=m[2]),fx(ys(),A,Z.p3(),H,f,v,J,T,Z.getFinalRotation3d(),Z.getRotationMode())},clear:function(){var T=this;T.faceMat=T.mat=T.shapeModel=T.left=T.right=T.front=T.back=T.top=T.bottom=T.csg=ft},needValidate:function(T){return this._iv?(this._validateFrameId=T._renderInfo.frame,!0):!(!this.data._47Q||(T=T._renderInfo.frame,this._validateFrameId===T))&&(this._validateFrameId=T,!0)},invalidateUnstableWireframe:function(){this.data._47Q&&this.invalidateWireframe()},validate:function(T,B){var G,H,f,v=this,J=v.gv,M=v.data,Y=v.shapeName=v.s(IB),m=oo(v,Y),E=(v._updateAutoRotation(),v._updateFixSize2d(),v._updateOverlapping(),v.dispatchBoundingBoxChanged(),v.invalidateUnstableWireframe(),hs(M,J.getMat(M),!m||v.s("shape3d.scaleable"))),Z=(M.appendAnchorMatrix3d(E),m!==v.shapeModel);v.clear(),v.mat=M.mat=E,M._flipSide=K.determinantOfArray(E)<0,!m&&Y||(Y=null,(v.shapeModel=m)&&m.model3d&&((H=M.s("3d.clip.direction"))&&M.s("3d.clip.percentage")&&(f=m.position,G=m.scale,(f||G)&&(H="left"===H||"right"===H?0:"front"===H||"back"===H?2:1,Y=[f?-f[H]:0,G?1/G[H]:1])),Z&&m.playAutomatically&&!M.isAnimationPlaying()&&M.playAnimation()),M._clipPercentageTranform=Y,T?m?B.instanced?J.batchInstancedModel(M,m,v,v.getBodyColor(),[E],T):Qx(J,M,m,v,v.getBodyColor(),[E],T):(f=k$(E),B.instanced?J.batchInstancedFace(M,T,B,E,f):Ux(J,M,T,B,E,f)):m||(v._cubeUvs=null,v.vf(Te,0),v.vf(Be,16),v.vf(Ct,8),v.vf(at,24),v.vf(Ge,32),v.vf(He,40)))},_updateAutoRotation:(iE=new $9,IE=new K,DE=new Zt,hE=new Zt,oE=new Zt,function(){var T=this.data,B=this.s("autorotate")||this.s("shape3d.autorotate");if(B){var G=this.gv;if(DE.copy(this.s("shape3d.autorotate.up")||G._up),hE.copy(G._eye).sub(oE.copy(G._center)),"string"==typeof B){for(var H=0,f=B.length;H<f;H++)hE[B[H]]=0;G=hE.normalize().dot(oE.copy(DE).normalize()),1-Math.abs(G)<1e-5&&(B.indexOf("x")<0?hE.x+=1e-4:B.indexOf("y")<0?hE.y+=1e-4:B.indexOf("z")<0&&(hE.z+=1e-4))}IE.lookAtDirection(hE,DE),iE.set(0,0,0,T.getRotationMode(),!0).setFromRotationMatrix(IE),(G=T._dynamicRotation)&&Math.abs(G[0]-iE.x)<1e-5&&Math.abs(G[1]-iE.y)<1e-5&&Math.abs(G[2]-iE.z)<1e-5||(T._dynamicRotation=[iE.x,iE.y,iE.z])}else T._dynamicRotation&&delete T._dynamicRotation}),_updateFixSize2d:function(){var T,B,G,H,f,v,J=this.data,M=this.s("fixSizeOnScreen")||this.s("shape3d.fixSizeOnScreen");M?(G=this.gv,T=hs(J,G.getMat(J)),v=_s([0,0,0],T),v=G.toViewPosition(v),isNaN(v.x)||isNaN(v.y)||(B=_s([1,0,0],T),B=G.toViewPosition(B),T=_s([0,1,0],T),G=G.toViewPosition(T),T=B.x-v.x,B=G.y-v.y,T&&B&&(G=J._dynamicScale3d||[1,1,1],v=z(J.s("shape3d.image")),0<M[0]&&(H=M[0]),0<M[1]&&(f=M[1]),H&&f||(M=0<M?M:1,H=H||(ks(v,J)||J.getWidth())*M,f=f||(Cs(v,J)||J.getTall())*M),v=Math.abs(T/H),M=Math.abs(B/f),Math.abs(v-1)<.001&&Math.abs(M-1)<.001||(J._dynamicScale3d=[G[0]/v,G[1]/M,G[2]])))):J._dynamicScale3d&&delete J._dynamicScale3d},_updateOverlapping:function(){var T=this.s("hide.overlapping.group");if(T){for(var B,G=this.gv,H=this.data,f=hs(H,G.getMat(H)),v=1/0,J=1/0,M=-1/0,Y=-1/0,m=(H=H.getAnchor3d()).x,E=H.y,Z=H.z,R=0;R<8;R++){if(B=_s([(R>>2)-m,(R>>1&1)-E,(1&R)-Z],f),B=G.toViewPosition(B),isNaN(B.x)||isNaN(B.y))return;v=Math.min(v,B.x),M=Math.max(M,B.x),J=Math.min(J,B.y),Y=Math.max(Y,B.y)}this._rectOverlapping=G.overlappingBox.isOverlapping(T,{x:v,y:J,w:M-v,h:Y-J})}else this._rectOverlapping&&(this._rectOverlapping=Ht)},getVectorDynamicSize:function(){var H,f,v,J,M,Y,T,B,G,m,E=this.s("shape3d"),Z=this.data;if("billboard"===E||"plane"===E||(B=Z._currentCubeElementId)!=ft)return H=this.gv,f=hs(Z,H.getMat(Z)),T=Z.getAnchor3d(),v=.5-T.x,J=.5-T.y,M=.5-T.z,Y=Math.min(this.s("vector.dynamic.maxsize"),H._glCapabilities.maxTextureSize)/H.getDevicePixelRatio(),T=function(T,B){T[0]+=v,T[1]+=J,T[2]+=M,B[0]+=v,B[1]+=J,B[2]+=M;var T=H.toViewPosition(_s(T,f)),B=H.toViewPosition(_s(B,f)),G=T.x-B.x,T=T.y-B.y;return Math.min(Y,Math.sqrt(G*G+T*T))},"billboard"===E?(G=T([-.5,0,0],[.5,0,0]),m=T([0,-.5,0],[0,.5,0])):"plane"===E?(G=T([-.5,0,0],[.5,0,0]),m=T([0,0,-.5],[0,0,.5])):Z._currentCubeElementId!=ft&&(E=3*Yo[B+1],Z=3*Yo[B],B=3*Yo[B+2],G=T([Mo[E],Mo[1+E],Mo[2+E]],[Mo[B],Mo[1+B],Mo[2+B]]),m=T([Mo[E],Mo[1+E],Mo[2+E]],[Mo[Z],Mo[1+Z],Mo[2+Z]])),[G,m]},vf:function(T,B){if(this.gv.getFaceVisible(this.data,T)){(T=Mx(this,T)).mat&&(this.faceMat=!0);var G=T.uv;if(G)for(var H=(H=this._cubeUvs)||(this._cubeUvs=new Fs([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0])),f=0;f<8;f++)H[B+f]=G[f];return T}},_billboardInView:(OE=[-.5,-.5,0,-.5,.5,0,.5,-.5,0,.5,.5,0],_E=[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,.5],pE=new b9,qE=new Zt,uE=new K,function(T){if(!this.mat)return!0;var B=this.gv.getFrustum(),G="billboard"===T?OE:_E;pE.makeEmpty(),uE.fromArray(this.mat);for(var H=0,f=G.length;H<f;H+=3)pE.expandByPoint(qE.fromArray(G,H).applyMatrix4(uE));return B.intersectsBox(pE)}),_80o:function(T,B,G){var H=this;if(H._rectOverlapping)return!0;var f=H.shapeModel;if(f||!H.shapeName){if(("billboard"===(J=H.s("shape3d"))||"plane"===J)&&!H._billboardInView(J))return!0;var v,J=H.gv,M=H.data,Y=J._cube,m=At.for(T).directAttribs();if(f&&f.model3d)H.s(hB)&&H.gv._prefabRenderer.render(T,f,H.data,H.mat);else{if(C$(J,H.mat),!(!T._picking&&H.s("shape3d.reflector")||H.s("effect.flow")))if(f)Io(J,M,f,H,H.getBodyColor(),G);else for(m.aPosition=l$(T,Y.vs,ft),m.aNormal=l$(T,Y.ns,ft),z$(T,Y.is),v=0;v<6;v++)H._18O(T,Zo[v],6*v,G,!1);if(P$(J),H.faceMat)for(v=0;v<6;v++)H._18O(T,Zo[v],6*v,G,!0)}}},_18O:function(T,B,G,H,f){var v,J,M,Y,m,E,Z,R,A,g=this[B];g&&(v=this.data,!(Y=(J=this.gv)._picking?null:g.material)&&!H(g.transparent)||f&&!g.mat||!f&&g.mat||(v._currentCubeElementId=G,(H=v.s("polygonOffset"))&&u$(T,H),Y?(Y={mesh:{vs:Mo,is:Yo,ns:Eo,uv:g.uv?this._cubeUvs:mo,_complete_:!0},drawRange:[G,6],mat:Y},v._currentFaceLightMask=g.light?v.s("light.mask"):0,J._prefabRenderer.render(T,Y,v,f?g.mat:null),v._currentFaceLightMask=null,Y=J._cube,(M=At.for(T).directAttribs()).aPosition=l$(T,Y.vs,ft),M.aNormal=l$(T,Y.ns,ft),z$(T,Y.is)):(f&&C$(J,g.mat),M=At.for(T).directUniforms(),Y=J.getTexture(g.texture,v,B),B=g.uv,m=g.uvScale,E=g.uvOffset,Z=g.uvRotation,R=g.uvAnchor,A=g.discardSelectable,Y?B?N$(T,Y,A,J._buffer.uv,this._cubeUvs,E,m,Z,R):N$(T,Y,A,J._cube.uv,ft,E,m,Z,R):N$(T),t$(T,g.blend,g.light,g.opacity,g.reverseFlip,g.reverseColor,v._forceSingleFace||g.reverseCull),M.uDiffuse=g.color||Ft["color.empty"],U$(T,G,6),d$(T),Q$(T,Y),f&&P$(J)),H&&i$(T),v._currentCubeElementId=null))},contextLost:function(){oZ.superClass.contextLost.apply(this,arguments),this.data.s("shape3d.reflector")&&(this._reflectorRenderTarget=null,this._reflectNormal=null)},drawReflector:(mE=new Zt,EE=new Zt,ZE=new $9,RE=new K,AE=new Zt,gE=new Zt,FE=new Zt,WE=new Zt,sE=new K,SE=new K,yE=new U9,xE=new r9,wE=new r9,function(T){var B=this,G=(B._reflectorInfo=null,B.data);if(G._reflecting)return!1;var H=B.gv;if(H._picking)return!1;if(H._camera&&!H._camera.isLayerVisible(G.getRenderLayer()))return!1;var f,v=H._camera||H,J=G instanceof VW,M=B._reflectorRenderTarget,Y=H._canvas.width,m=H._canvas.height;if(M?M.setSize(T,Y,m):M=B._reflectorRenderTarget=new sx.RenderTarget(H,T,Y,m),J?(f=G.getPointsMatrix3d().getElements(),(Y=G.p3())[1]+=(1-G.getAnchorElevation())*G.getTall(),mE.copy(_s(Y,f))):mE.copy(G.p3()),EE.copy(v.getEye()),RE.makeRotationFromEuler(ZE.set(G.r3(),G.getRotationMode(),!0)),!B._reflectNormal){if(J&&G.getThickness()<0){if(!B.shapeModel||!B.shapeModel.top_vs)return!1;R={vs:B.shapeModel.top_vs,ns:B.shapeModel.top_ns}}else{if(!(R=oo(B,B.s("shape3d"))))return!1;!R.ns&&R.length&&(R=R[0])}if(!R.ns||!R.vs)return!1;B._reflectNormal=[R.ns[0],R.ns[1],R.ns[2]],B._reflectorModel={model3d:!0,mesh:{pos:R.vs},mat:{type:"reflector",cacheKey:"reflector"}}}if(AE.copy(B._reflectNormal),AE.applyMatrix4(RE),gE.subVectors(mE,EE),0<gE.dot(AE))return!1;gE.reflect(AE).negate(),gE.add(mE),FE.copy(v.getCenter()).negate().add(mE),FE.reflect(AE).negate(),FE.add(mE),WE.copy(v.getUp()),WE.reflect(AE);var E,Z,m=H._camera,R=0<(Y=H)._tempCameraQueue.length?Y._tempCameraQueue.pop():new L.Camera;H.getCamera(R),(H._camera=R).p3(gE.toArray()),R.lookAt(FE.toArray(),WE.toArray()),H._18Q=ft,M.bind(T),H.setViewport(T,0,0,M.width,M.height),(v=G.s("shape3d.reflector.background"))?(F=I$(T,!0),D$(T,v)):D$(T,[0,0,0,1]),At.for(T).glState.depth.mask=!0,T.clear(16640);var Y=(Y=G.s("shape3d.reflector.clip"))===Ht?.003:Y,A=y$(H),g=S$(H),Y=(yE.setFromNormalAndCoplanarPoint(AE,mE.add(AE.clone().multiplyScalar(Y))),yE.applyMatrix4(SE.fromArray(g)),xE.set(yE.normal.x,yE.normal.y,yE.normal.z,yE.constant),SE.fromArray(A).getInverse(SE),wE.set(Math.sign(xE.x),Math.sign(xE.y),1,1).applyMatrix4(SE),xE.multiplyScalar(2/xE.dot(wE)),G._reflecting=!0,G.s("shape3d.reflector.shadow")),g={renderAxis:!1,renderEdit:!1,renderGrid:!1};"disabled"===Y?(g.renderShadowMap=!1,g.renderShadow=!1):"scene"===Y?g.renderShadowMap=!1:g.useReflectorSelfShadowMap=!0,R.setProjectMatrix(A),H.renderSky(),A[2]=xE.x-A[3],A[6]=xE.y-A[7],A[10]=xE.z-A[11],A[14]=xE.w-A[15],R.setProjectMatrix(A),R.s("camera.renderSky",!1),H.renderScene(g),sE.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),sE.multiply(SE.fromArray(H._projectMatrix)),sE.multiply(SE.fromArray(H._viewMatrix)),v&&D$(T,F),M.unbind(T),H._tempCameraQueue.push(R),H._18Q=ft,H._camera=m,(Y=G.s("shape3d.reflector.blur"))&&(A=H.getPostProcessingModule("Blur"))&&A.drawImpl(T,M,Y,3<=Y,G.s("shape3d.reflector.blur.iterations")),(g=H.getPostProcessingModule("Glitch"))&&g.enable&&g.onlyReflector&&(M=g._42(T,M));var F=(v=B._reflectorModel).mat;return F.tDiffuse=M.texture,F.color=U0(G.s("shape3d.reflector.color")||"rgb(128,128,128)"),F.textureMatrix=sE.toArray(),F.modelMatrix=J?f:hs(G),F.viewMatrix=S$(H),F.projectionMatrix=y$(H),(m=this.s("shape3d.transparent"))&&(Z=(E=At.for(T).glState).depth.mask,E.depth.mask=!1),H.renderModel(v,{clear:!1,restoreViewport:!1}),m&&(E.depth.mask=Z),G._reflecting=!1,H.getRenderState().useProgram(H._prg),!0})}),function(T,B){O1(eZ,this,[T,B])}),cZ=(Es(eZ,oZ,{_80o:function(T){}}),function(T,B){O1(cZ,this,[T,B])}),tZ=(Es(cZ,hZ,{_25Q:1,validate:function(T,B){var G=this,H=G.s;if(H(IB)!==We||H("batch")!=ft||!G.info||G._geometryVersion!==G.data._geometryVersion){var f=G.gv,v=G.data,J=H("edge.width"),M=v._40I,Y=v._41I;if(G._geometryVersion=v._geometryVersion,G.shapeModel=G.info=G.lineShapeModel=ft,M&&Y){var m=v.isLooped(),E=H(Ke);if(i=vt.getEdgeType(E)){if(!(i=i(v,KJ(G,f,v,m,E),f,G._19Q)).points||i.points.isEmpty())return;for(var Z=G.info={},R=i.segments,A=(u=i.points).size(),g=M.getElevation(),F=Y.getElevation(),W=0;W<A;W++){var s=u.get(W);s.e==ft&&(s.e=g+(F-g)*W/(A-1))}var S=PE(u.get(0)),y=PE(u.get(A-1)),x=(A-(p=A%2))/2;Z.c1=PE(u.get(x-1)),Z.c2=PE(u.get(x)),0!==p&&(Z.p3=Z.c2),Z.s1=S,Z.s2=PE(u.get(1)),Z.t1=PE(u.get(A-2)),Z.t2=y}else{var w,O,_,p,q,u=new $,Z=G.info={},i=H("edge.offset"),Y=H("edge.center"),I=H("edge.source.t3"),D=H("edge.target.t3"),h=Gx(f,v,"source"),o=Gx(f,v,"target");if(!h||!o)return f.invalidateData(v),delete G.info,!1;I&&(h[0]+=I[0],h[1]+=I[1],h[2]+=I[2]),D&&(o[0]+=D[0],o[1]+=D[1],o[2]+=D[2]),E===De?(R=H("edge.segments"),(A=(I=Z.points=H(be)||gJ).size())?(S=PE(I.get(0)),y=PE(I.get(A-1)),!Y&&i&&(D=i,w=Ws(S,h,!0),i=Jt(D,n2(h,S)),h=[h[0]+w[0]*i,h[1]+w[1]*i,h[2]+w[2]*i],w=Ws(o,y,!0),i=Jt(D,n2(y,o)),o=[o[0]-w[0]*i,o[1]-w[1]*i,o[2]-w[2]*i]),1===A?Z.p3=S:(x=(A-(p=A%2))/2,O=PE(I.get(x-1)),_=PE(I.get(x)),0!==p&&(Z.p3=_),Z.s1=h,Z.s2=S,Z.t1=y,Z.t2=o)):(!Y&&i&&(w=Ws(o,h,!0),q=n2(h,o),i=UJ(i,q),h=[h[0]+w[0]*i,h[1]+w[1]*i,h[2]+w[2]*i],o=[o[0]-w[0]*i,o[1]-w[1]*i,o[2]-w[2]*i]),O=h,_=o),u.add({x:h[0],y:h[2],e:h[1]}),u.addAll(I),u.add({x:o[0],y:o[2],e:o[1]})):(D=KJ(G,f,v,m,E),G._19Q||(D=-D),m?(x=h[0],p=h[1],S=h[2],O=[x-D,p+(y=M.getTall()/2+D),S],_=[x+D,p+y,S],u.add({x:x-D,y:S,e:p}),u.add({x:x-D,y:S,e:p+y}),u.add({x:x+D,y:S,e:p+y}),u.add({x:x+D,y:S,e:p})):(w=Ws(o,h,!0),q=n2(h,o),I={x:h[0],y:h[2]},f={x:o[0],y:o[2]},E=(v=M$(ft,I,f,D)).x-I.x,m=v.y-I.y,i=UJ(i,q),w[0]*=i,w[1]*=i,w[2]*=i,O=[h[0]+w[0]+E,h[1]+w[1],h[2]+w[2]+m],_=[o[0]-w[0]+E,o[1]-w[1],o[2]-w[2]+m],Y?(u.add({x:h[0],y:h[2],e:h[1]}),u.add({x:O[0],y:O[2],e:O[1]}),u.add({x:_[0],y:_[2],e:_[1]}),u.add({x:o[0],y:o[2],e:o[1]})):(u.add({x:O[0],y:O[2],e:O[1]}),u.add({x:_[0],y:_[2],e:_[1]})))),Z.c1=O,Z.c2=_}Z._lastPointsSegments={points:u,segments:R},H(IB)===We?Z.list=G.createTubeModel(u,R,J/2,T):Z.list=G.createLineModel(u,R,J,"edge","edge.dash")}}},invalidateCachedGeometry:function(){this.info=ft}}),function(T,B){O1(tZ,this,[T,B]),this._needRecoverPosition=!0}),dZ=(Es(tZ,oZ,{_80o:function(T,B,G){var H=this._matWithExtraction||this.mat;if(H&&(!this.s("shape3d.reflector")||T._picking)){var f=this.gv,v=this.shapeModel;if(C$(f,H),v)Io(f,this.data,v,this,this.getBodyColor(),G);else for(var J=0;J<6;J++)Yx(this,T,B,Zo[J],G);P$(f)}},validate:function(T,B){var G,H,f,v=this,J=v.s,M=v.data,Y=M._thickness/2,m=M.isClosePath(),E=M.getPoints(),Z=M.getSegments(),R=J(DB),A=T&&T.uv;if(v.invalidateUnstableWireframe(),v.clear(),v.dispatchBoundingBoxChanged(),v._updateAutoRotation(),vt.extractShapeTranslation||vt.extractVerticesTranslation?(H=new l.Vector3(M.p3()),(E=o2(E)).forEach(function(T){T.x-=H.x,T.y-=H.z}),v._vsTranslation=(new l.Matrix4).setPosition(H),f=M.getShapeElevation,M.getShapeElevation=function(){return-(this.getTall()||0)*(this._anchorElevation-.5)}):v._vsTranslation=null,Y<0){v.s("shape3d.reflector")&&(v._reflectNormal=null);try{var g,F,W=J("shape3d.image.projection");W&&W[4]&&(g=(h=M.p3())[0],F=h[2],W=[g+W[0],W[1]+F,g+W[2],W[3]+F]),G=v.shapeModel=YW(E,Z,J(cB),J(tB),R,J(dB),M.getTall(),M.getShapeElevation(),m,W)}catch(T){G=v.shapeModel={}}J(hB)||(delete G.vs,delete G.ns,delete G.uv),J("shape3d.top.image")||J("shape3d.top.material")||delete G.top_uv,J("shape3d.bottom.image")||J("shape3d.bottom.material")||delete G.bottom_uv}else if(J(IB)===We)u=$0(E,Z,R,m),(G=v.shapeModel={vs:[],uv:[]}).sum=J(dB)||N1(u)||1,G.len=0,J(cB)&&!m&&(G.top_vs=[],G.top_uv=[]),J(tB)&&!m&&(G.bottom_vs=[],G.bottom_uv=[]),v._12O(u,Y);else{var s,S,y,x,w,O,_,p,q,u=$0(E,Z,R,m),i=v.vf(Ct,A,!1,B);if(Y&&(w=v.vf(at,A,!1,B),O=m?ft:v.vf(Te,A,!1,B),_=m?ft:v.vf(Be,A,!1,B),p=v.vf(Ge,A,!1,B),q=v.vf(He,A,!1,B)),Y){for(var I=0,D=u.length;I<D;I++)u[I]=v._tryRemoveBezierPoints(u[I],Y);v._12O(u,Y)}else i&&u.forEach(function(T){if(0<(x=T.length))for(s=T[0],y=1;y<x;y++)S=T[y],v.addV(i.vs,s,S),s=S});v._20Q(u),T||(i&&(i.ns=x$(i.vs),co(i,"vs"),co(i,Ve)),Y&&(w&&(w.ns=x$(w.vs),co(w,"vs"),co(w,Ve)),O&&(O.ns=x$(O.vs),co(O,"vs"),co(O,Ve)),_&&(_.ns=x$(_.vs),co(_,"vs"),co(_,Ve)),p&&(p.ns=x$(p.vs),co(p,"vs"),co(p,Ve)),q&&(q.ns=x$(q.vs),co(q,"vs"),co(q,Ve))))}var h=v.mat=M.getPointsMatrix3d().getElements();M._flipSide=K.determinantOfArray(h)<0,v._vsTranslation?h=v._matWithExtraction=(new l.Matrix4).fromArray(h).multiply(v._vsTranslation).toArray():v._matWithExtraction=null,T&&(lx(v,h,T,G,B),v.clear()),f!=ft&&(M.getShapeElevation=f)},_20Q:function(T){var B,G,H,f,v,J,M,Y,m,E,Z,R,A,g=this,F=g.front,W=g.back,s=g.top,S=g.bottom,F=F?F.tuv:ft,W=W?W.tuv:ft,s=s?s.tuv:ft,S=S?S.tuv:ft,y=0,x={front:0,back:0,top:0,bottom:0};(F||W||s||S)&&(A=g.s(dB),B=A||N1(T)||1,Z=g.s("all.uv.union"),T.forEach(function(T){if(0<(G=T.length)){for(E in x)(!1===(R=g.s(E+".uv.union"))||R==ft&&!1===Z)&&(x[E]=0,A||(B=N1([T])));for(J=T[0],H=1;H<G;H++){for(E in M=T[H],Y=n2(J,M),x)y=x[E],f=y/B,x[E]=y+=Y,v=y/B,"back"===E&&(m=f,f=1-v,v=1-m),g._14O(g[E],f,v);J=M}}}))},_14O:function(T,B,G){var H,f,v,J,M,Y,m,E;T&&(E=T.uv,(T=T.tuv)&&(E=E?(H=E[0]+(E[6]-E[0])*B,f=E[1]+(E[7]-E[1])*B,v=E[2]+(E[4]-E[2])*B,J=E[3]+(E[5]-E[3])*B,M=E[2]+(E[4]-E[2])*G,Y=E[3]+(E[5]-E[3])*G,m=E[0]+(E[6]-E[0])*G,E[1]+(E[7]-E[1])*G):(v=H=B,Y=J=1,m=M=G,f=0),T.push(v,J,M,Y,m,E,m,E,H,f,v,J)))},_13O:function(T){var B=T.uv;(T=T.tuv)&&(B?T.push(B[2],B[3],B[4],B[5],B[6],B[7],B[6],B[7],B[0],B[1],B[2],B[3]):T.push(0,1,1,1,1,0,1,0,0,0,0,1))},_tryRemoveBezierPoints:function(B,T){var G=B.length;if(G<4)return B;for(var H,f,v,J,M=!1,Y=function(T){return B[T]},m=function(T){return B[G-1-T]},E=0;E<=1;E++)for(H=(v=E?m:Y)(0),f=v(1),R=2;R<G-1;R++)(J=v(R)).remove||(J.b&&M$(H,f,J,T).adjust?M=J.remove=!0:(H=f,f=J));if(!M)return B;for(var Z=[],R=0;R<G;R++)B[R].remove||Z.push(B[R]);return Z},_12O:function(T,B){var G,H,f,v,J,M=this.s("shape3d.point.epsilon"),Y=this;T.forEach(function(T){if(0<(J=T.length))for(G={p:T[0],n:!0},v=1;v<J;v++)H=T[v],(f=v<J-1?T[v+1]:ft)&&Math.abs(H.x-f.x)<M&&Math.abs(H.y-f.y)<M||Y.addPoint(G,H,f,B,T)})},addPoint:function(T,B,G,H,f){var v,J,M,Y,m,E,Z=this,R=T.p,A=T.f,g=T.b,F=Z.s("shape3d.side")||ms,W=Z.s("shape3d.start.angle"),s=Z.s("shape3d.sweep.angle"),S=Z.shapeModel,y=Z.data.isClosePath();if(T.n&&(T.n=!1,A=y&&2<f.length?M$(f[f.length-2],R,B,H):M$(ft,R,B,H),g=J$(R,A),S?S.top_vs&&Z._10O(g,A,F,W,s,S.top_vs,S.top_uv):(v=Z.left)&&(Z.addV(v.vs,g,A),Z._13O(v))),y=G?M$(R,B,G,H):y&&2<f.length?M$(R,B,f[1],H):M$(R,B,ft,H),f=J$(B,y),S){var x,w,O=S.vs,_=S.uv,H=S.sum;for(_&&(x=S.len/H,S.len+=n2(R,B),w=S.len/H),M=Z._9O(g,A,F,W,s),Y=Z._9O(f,y,F,W,s),m=0;m<F;m++)W1(O,M[E=m+1]),W1(O,Y[m]),W1(O,M[m]),W1(O,Y[m]),W1(O,M[E]),W1(O,Y[E]),_&&_.push(x,E/=F,w,J=m/F,x,J,w,J,x,E,w,E);!G&&S.bottom_vs&&Z._10O(f,y,F,W,s,S.bottom_vs,S.bottom_uv,!0)}else!G&&(v=Z.right)&&(Z.addV(v.vs,y,f),Z._13O(v)),(v=Z.front)&&Z.addV(v.vs,A,y),(v=Z.back)&&Z.addV(v.vs,f,g),(v=Z.top)&&Z.addH(v.vs,A,y,f,g,!0),(v=Z.bottom)&&Z.addH(v.vs,g,f,y,A);T.p=B,T.f=y,T.b=f},_10O:function(T,B,G,H,f,v,J,M){for(var Y,m,E=this.data,Z=this._9O(T,B,G,H,f),R=(T.x+B.x)/2,A=(T.y+B.y)/2,g=E.getShapeElevation(),F=0,F=0;F<G;F++)M?(W1(v,Z[F]),W1(v,Z[F+1])):(W1(v,Z[F+1]),W1(v,Z[F])),W1(v,[R,g,A]),J&&(m=M?(Y=mt*(F+1)/G+H,mt*F/G+H):(Y=mt*F/G+H,mt*(F+1)/G+H),J.push(.5-.5*Mt(m),.5-.5*Yt(m),.5-.5*Mt(Y),.5-.5*Yt(Y),.5,.5))},_9O:function(T,B,G,H,f){var v,J,M=this.data,Y=[],m=(T.x+B.x)/2,E=(T.y+B.y)/2,Z=M.getTall()/2,R=M.getShapeElevation(),A=0;for(f==ft&&(f=mt);A<=G;A++)J=Mt(v=f*A/G+H),Y.push([m+(T.x-m)*J,R+Z*Yt(v),E+(T.y-E)*J]);return Y},addV:function(T,B,G){var H=B.x,B=B.y,f=G.x,G=G.y,v=(J=this.data).getShapeElevation(),J=J.getTall()/2;T.push(H,v-J,B,f,v-J,G,f,v+J,G,f,v+J,G,H,v+J,B,H,v-J,B)},addH:function(T,B,G,H,f,v){var J=(M=this.data).getTall()/2,M=M.getShapeElevation()+(v?J:-J);T.push(B.x,M,B.y,G.x,M,G.y,H.x,M,H.y,H.x,M,H.y,f.x,M,f.y,B.x,M,B.y)},vf:function(T,B,G,H){var f,v=this.gv.getFaceVisible(this.data,T);return(G||v)&&((f=Mx(this,T,H)).vs=[],f.tuv=v?[]:ft,f.visible=v),f}}),function(T,B){O1(dZ,this,[T,B])}),NZ={},QZ=(Es(dZ,oZ,{validate:function(){var T=this,B=T.gv,G=T.data,H=T.s,f=U0(H("points.color")),v=H("points.size"),J=H("points.uv.offset"),M=H("points.image"),Y=(!M||/\.(png|jpg|gif|jpeg|bmp|svg)$/i.test(M)||cw.test(M)||(NZ[M]||(NZ[M]=T._createCachedImage(M)),M=NZ[M]),G._modelDirty),m=H("points.model");if(m){if(T._lastShapeModel!==m||!T.shapeModel){var E=oo(T,m);if(!E)return;var Z=[],R={};T.eachShapeModel(function(T){for(var B=0,G=T.length;B<G;B+=3){var H=T[B],f=T[B+1],v=T[B+2],J=H+"_"+f+"_"+v;R[J]||(R[J]=!0,Z.push(H,f,v))}},E),T._setShapeModelPoints(new Fs(Z)),T._lastShapeModel=m,Y=!0}g=T.shapeModel.vs.length/3}else{var A=G.getPoints(),g=A.length;if(Y||G._pointsDirty||!T.shapeModel){for(var F=[],W=0;W<g;W++){var s=A[W];s&&F.push(s.x,s.e,s.y)}T._setShapeModelPoints(new Fs(F)),G._pointsDirty=!1,Y=!(T._lastShapeModel=null)}}if(E=H("points.transparent"),T.info={mat:hs(G),size:v,diffuse:f,opacity:H("points.opacity"),texture:M,transparent:E,alphaTest:E?0:H("alphaTest"),uvScale:H("points.uv.scale"),uvOffset:J,discardSelectable:H("points.discard.selectable")},Y||G._colorsDirty){var S=!1,y=G.getColors();if(y&&0<y.length)for(var x=[],W=0;W<g;W++)for(var w=y[W],N=w?(S=!0,U0(w)):f,Q=4*W,O=0;O<4;O++)x[Q+O]=N[O];T.shapeModel.cs=S?new Fs(x):null,G._colorsDirty=!1}if(Y||G._sizesDirty){var _=!1,p=G.getSizes();if(p&&0<p.length)for(var q,u=[],W=0;W<g;W++)0<=(q=p[W])?(u.push(q),_=!0):u.push(v);T.shapeModel.ss=_?new Fs(u):null,G._sizesDirty=!1}if(Y||G._offsetsDirty){var i=!1,I=G.getUvoffsets();if(I&&0<I.length)for(var D,h,o=[],W=0;W<g;W++)D=I[h=2*W],h=I[1+h],D!=Ht&&h!=Ht?(o.push(D,h),i=!0):o.push(0,0);T.shapeModel.os=i?new Fs(o):null,G._offsetsDirty=!1}if(Y||T._lastPointNumber!==g){this.dispose();for(var e=B.pickColorMap,c=T._startPickId=e._pickIdUsed,F=(e._pickIdUsed=c+g,[]),W=0;W<g;W++){var t=c+W,d=gZ(t);F.push(d[0],d[1],d[2],d[3]),e[t]||(e[t]={data:G,part:W})}T.shapeModel.ps=new Fs(F),T._lastPointNumber=g}G._modelDirty=!1,this.dispatchBoundingBoxChanged()},_setShapeModelPoints:function(T){var B=this.shapeModel,G=this.shapeModel={vs:T};return B&&(T=T.length,T=Math.round(T/3),B.cs&&B.cs.length==4*T&&(G.cs=B.cs),B.ss&&B.ss.length==T&&(G.ss=B.ss),B.os&&B.os.length==2*T&&(G.os=B.os),B.ps&&B.ps.length==4*T&&(G.ps=B.ps)),G},_createCachedImage:function(T){var B=X1(),G=B.getContext("2d"),G=(b1(B,128,128,1),as(G,{width:128,height:128,comps:[{type:T,background:"white",borderWidth:0,rect:[0,0,128,128]}]},0,0,128,128),L.Math.generateUUID());return _w[G]=B,G},_80o:function(T,B){var G,H,f=this.gv,v=f._picking;v&&!f.isSelectable(this.data)||(G=this.shapeModel,H=this.info,G&&G.vs&&G.vs.length&&(H={type:"points",renderMode:"points",renderPickMap:!0,transparent:H.transparent,modelMatrix:H.mat,modelViewMatrix:Z$([],f._viewMatrix,H.mat),projectionMatrix:f._projectMatrix,viewMatrix:f._viewMatrix,scale:f.getHeight()/2,size:H.size,diffuse:H.diffuse,opacity:H.opacity,map:f.getTexture(H.texture,this.data),alphaTest:H.alphaTest,resolution:f.getDevicePixelRatio(),discardSelectable:H.discardSelectable,uvScale:H.uvScale,blackout:T._blooming&&!this.data.s("bloom"),picking:v,useColor:!v&&G.cs!=ft,useSizeArray:G.ss!=ft,uUvOffset:H.uvOffset,useUvArray:!v&&G.os!=ft},f._prefabRenderer.render(T,{model3d:!0,mesh:{position:G.vs,pickColor:v?G.ps:null,color:v?null:G.cs,aUvOffset:!v&&G.os?G.os:null,sizeArray:G.ss},mat:H}),(v=At.for(T)).useProgram(B),v.directAttribs().disable(),f.shadowMap.enable&&f.shadowMap.createShadow(),f.rebindOITTexture(),f.flowMap.createFlow()))},dispose:function(){dZ.superClass.dispose.call(this);var T=this._startPickId,B=this._lastPointNumber;if(T&&B){for(var G=this.gv.pickColorMap,H=0;H<B;H++){var f=T+H;G[f]&&delete G[f]}delete this._startPickId,delete this._lastPointNumber}}}),function(T,B){O1(QZ,this,[T,B]),this._needRecoverPosition=!0}),LZ=(Es(QZ,hZ,{_25Q:1,needValidate:function(T){return oZ.prototype.needValidate.call(this,T)},_updateAutoRotation:function(){return oZ.prototype._updateAutoRotation.call(this)},invalidateUnstableWireframe:function(){this.data._47Q&&this.invalidateWireframe()},validate:function(T,B){var G,H,f,v,J,M=this,Y=M.data,m=M.s,E=Y.getPoints(),Z=E.size(),R=(M.dispatchBoundingBoxChanged(),M._updateAutoRotation(),M.invalidateUnstableWireframe(),Y.p3()),A=M.mat=ys(),g=(m$(A,R),lW(A,Y.getFinalRotation3d(),Y.getRotationMode()),Y.getScale3d()),F=Y._dynamicScale3d;F&&(g[0]*=F[0],g[1]*=F[1],g[2]*=F[2]),E$(A,g),m$(A,ss(R)),Y._flipSide=K.determinantOfArray(A)<0,m(IB)===We&&m("batch")==ft&&M.shapeModel&&M._geometryVersion===Y._geometryVersion||(M._geometryVersion=Y._geometryVersion,M.shapeModel=M.info=M.lineShapeModel=ft,1<Z&&(F=M.info={},g=Y.getSegments(),G=Y.getThickness(),H=PE(E.get(0)),f=PE(E.get(Z-1)),F.c1=PE(E.get((J=(Z-(v=Z%2))/2)-1)),F.c2=PE(E.get(J)),0!=v&&(F.p3=F.c2),F.s1=H,F.s2=PE(E.get(1)),F.t1=PE(E.get(Z-2)),F.t2=f,m(IB)===We?(vt.extractPolylineTranslation||vt.extractVerticesTranslation?(R=new l.Vector3(Y.p3()),(E=o2(E)).forEach(function(T){T.x-=R.x,T.e-=R.y,T.y-=R.z}),M._vsTranslation=(new l.Matrix4).setPosition(R),M._matWithExtraction=(new l.Matrix4).fromArray(A).multiply(M._vsTranslation).toArray()):(M._vsTranslation=null,M._matWithExtraction=null),F.list=M.createTubeModel(E,g,G/2,T)):F.list=M.createLineModel(E,g,G,"shape.border","shape.dash")))},invalidateCachedGeometry:function(){this.shapeModel=this.info=this.lineShapeModel=ft},_80o:function(T,B,G){var H,f,v,J,M,Y,m,E,Z,R,A=this,g=A.shapeModel;g&&(f=A.mat,(vt.extractPolylineTranslation||vt.extractVerticesTranslation)&&A._matWithExtraction&&(f=A._matWithExtraction),H=A.gv,C$(H,f),f=A.s("3d.clip.direction"),H._uvClipEnabled&&("uv.left"===f||"uv.right"===f)&&(v=A.s("3d.clip.percentage"))<1?(M=J=!0,eo(g),Y=g.top_vs,m=g.bottom_vs,E=g.vs,Z=(R=At.for(T)).directUniforms(),R=R.directAttribs(),"uv.left"==f?(v<1&&(J=!1),v<=0&&(M=!1)):(v<1&&(M=!1),v<=0&&(J=!1)),g.top_vs=g.bottom_vs=Ht,R.aUv=K$(T,H._buffer.uv,g.uv,ft,2),Io(H,A.data,g,A,A.getBodyColor(),G),R.aUv=!1,Z.uClipDirection=0,g.vs=Ht,J&&(g.top_vs=Y),M&&(g.bottom_vs=m),Io(H,A.data,g,A,A.getBodyColor(),G),g.vs=E,g.top_vs=Y,g.bottom_vs=m):Io(H,A.data,g,A,A.getBodyColor(),G),P$(H))}}),vt.meshTypeMap={box:function(){return vt.createBoxModel()},sphere:function(T){return vt.createSphereModel(T.side,T.sideFrom,T.sideTo,T.from,T.to,T.resolution,T.smooth)},cylinder:function(){return vt.createCylinderModel(side,sideFrom,sideTo,from,to,top,bottom,smooth)},cone:function(){return vt.createConeModel(side,sideFrom,sideTo,from,to,bottom,resolution,smooth)},torus:function(){return vt.createTorusModel(side,sideFrom,sideTo,from,to,radius,resolution,smooth)}});for(cE in S1(vt,{invalidateMeshAttribute:function(T){T&&T._bufId&&(T._bufId=null)},invalidateMesh:function(T,B){if(T){if(B)for(var G in T)vt.invalidateMeshAttribute(T[G]);delete T._4HQ,delete T._complete_}}}),S1(TZ,{invalidateMeshAttribute:function(T){vt.invalidateMeshAttribute(T),this.iv()},invalidateMesh:function(T,B){vt.invalidateMesh(T,B),this.iv()}}),Oo)LZ[cE]=Oo[cE];LZ.bone=(eE=new Array(5),function(T){for(var B=T.ratio||.1,G=T.resolution||8,H=null,f=0;f<5;f++){if(eE[f])return eE[f].ratio==B&&eE[f].resolution==G&&(eE[f].active=Date.now()),eE[f].mesh;H=f}if(!H)for(var v=1/0,f=0;f<5;f++)eE[f].active<v&&(v=eE[f].active,H=f);var J=[],M=[];for(B*=.5,J.push(0,0,0,0,0,.5),f=0;f<G;f++){var Y=f/G*Math.PI*2;J.push(Math.cos(Y)*B,Math.sin(Y)*B,B),0<f&&(M.push(0,f+2,f+1),M.push(f+1,f+2,1))}return M.push(0,2,G+1),M.push(G+1,2,1),eE[f]={active:Date.now(),resolution:G,ratio:B,mesh:{vs:J,is:M}},eE[f].mesh});var jZ,rZ,XZ,UZ,lZ=!(rZ=1),bZ={},KZ={},zZ={},nZ=function(){I2(nZ);var T=Date.now(),B=T-jZ;jZ=T;try{$Z(B/1e3)}catch(T){}},$Z=function(T){var B,G,H={};for(B in bZ){var f,v,J=(v=bZ[B]).speed,M=v.time,Y=(v.paused?f=v.time:(f=v.time+T*J,v.time=f),v.duration),m=v.loop,J=("once"===m?J<0&&f<=v.end||0<=J&&f>=v.end?(f=v.end,v.iteration=1):f=l.modToPositive(f,Y):(Math.floor(f/Y)!==Math.floor(M/Y)&&v.iteration++,"pingpong"===m?Y<(f=l.modToPositive(f,2*Y))&&(f=2*Y-f):f=l.modToPositive(f,Y)),G=v.animation,v.displayTime=l.roundFloat(f,3));J+=v.shift,(M=H[G])?M.push(B,J):H[G]=[B,J]}for(G in H){D=I=p=x=y=q=s=W=F=_=u=g=O=R=void 0;var E=G,Z=H[G],R=KZ[E][1];if(R){var A,g,F,W,s={},S=Z.length/2,y={},x=zZ[E];if(x){for(var w=x.clips,O=0,_=w.length;O<_;O++)s[w[O].time]=O;for(O=0;O<S;O++)(W=s[F=Z[2*O+1]])!==Ht&&(y[W]=!0)}else x=zZ[E]={clips:[]};for(var _=R.length,p=-1,q=0;q<S;q++)if(A=Z[2*q],(W=s[F=Z[2*q+1]])!==Ht)bZ[A].clip=x.clips[W];else{for(;y[++p];);(g=x.clips[p])?g.time=F:g=x.clips[p]={time:F,datas:[]};for(var u=g.datas,O=0;O<_;O++)for(var i=R[O].evaluate(F),I=(I=u[O])||(u[O]=[]),D=0,h=i.length;D<h;D++)I[D]=i[D];s[F]=p,bZ[A].clip=g}}}},VZ=l.newIdGenerator(),PZ={add:function(E,T,B,G,H){(f=E.tag)||(f=E.tag=VZ.next()),KZ[f]||(KZ[f]=function(){for(var T,B,G=E.tracks,H=G.length,f=new Array(H),v={},J=0;J<H;J++){var M=G[J],Y=M.type,m=M.name.split(".");switch((B=v[m[0]])||(B=v[m[0]]=[]),m[1]){case"scale":B[2]=J;break;case"quaternion":B[1]=J;break;default:B[0]=J}switch(Y){case"linear":T=new zK(M.times,M.values);break;case"quaternion":T=new nK(M.times,M.values);break;case"cubic":T=new $K(M.times,M.values);break;case"cubicSpline":T=new VK(M.times,M.values,3);break;case"cubicSplineQuaternion":(T=new VK(M.times,M.values,3)).isQuaternion=!0;break;default:T=new KK(M.times,M.values)}f[J]=T}return[v,f]}());var f,v=rZ++,J=E.duration;return T===Ht&&(T=E.speed||1),G===Ht&&(G=E.loop||"repeat"),bZ[v]={time:B||0,start:B||0,loop:G,shift:E.start||0,duration:J,animation:f,animationName:E.name,clip:H,iteration:0},TP(bZ[v],T),lZ||(lZ=!0,jZ=Date.now(),nZ()),v},stop:function(T){var B=bZ[T];return!!B&&(delete bZ[T],B)},changeAnimationInfo:function(T,B,G){return!!(T=bZ[T])&&("speed"===B?(TP(T,G),!0):"forwardTime"===B&&(T.time+=G,!0))},getAnimation:function(T){return bZ[T]},getAnimationMap:function(){return bZ},getAnimationTracks:function(){return KZ},getFrameAnimationData:function(){return zZ}},kZ=(S1(LW,{playAnimation:function(T,B,G,H){return!!(T=T||this.getDefaultAnimationName())&&(!!(T=this.getAnimation(T))&&(this._animationPlaying&&(f=PZ.stop(this._animationId)),T=this._animationId=PZ.add(T,B,G,H,f?f.clip:null),this._animationPlaying=!0,this._animationPaused=!1,this._lastAnimIteration=0,this.fp("animationStart",null,!0),T));var f},changeCurrentAnimationSpeed:function(T){return PZ.changeAnimationInfo(this._animationId,"speed",T)},forwardAnimation:function(T){return this.invalidateView(),PZ.changeAnimationInfo(this._animationId,"forwardTime",T)},backwardAnimation:function(T){return this.forwardAnimation(-T)},stopAnimation:function(){var T=this._animationId;return T&&PZ.stop(T),this._animationPlaying=!1,this._animationPaused=!1,this._animationId=Ht,this._lastAnimIteration=0,this.fp("animationStop",null,!0),T},pauseAnimation:function(){if(this._animationPaused)return!1;var T=this._animationId;return!!T&&(!!(T=PZ.getAnimation(T))&&(T.paused=!0,this._animationPaused=!0,this.fp("animationPause",null,!0),!0))},resumeAnimation:function(){var T;return!!this._animationPaused&&(!!(T=this._animationId)&&(!!(T=PZ.getAnimation(T))&&(T.paused=!1,this._animationPaused=!1,this.fp("animationResume",null,!0),!0)))},isAnimationPlaying:function(){return this._animationPlaying},isAnimationPaused:function(){return this._animationPaused},getAnimationNames:function(){return vt.getShapeModelAnimationNameList(this.s("shape3d"))},getAnimation:function(T){return vt.getShapeModelAnimation(this.s("shape3d"),T)},getDefaultAnimationName:function(){return vt.getShapeModelDefaultAnimationName(this.s("shape3d"))},getAnimations:function(){return vt.getShapeModelAnimations(this.s("shape3d"))},getCurrentAnimationState:function(T){var B=this._animationId;if(!B)return null;var G=PZ.getAnimation(B);if(!G)return null;switch(T){case"time":return G.displayTime||0;case"name":return G.animationName;case"loop":return G.loop;case"speed":return G.speed;case"duration":return G.duration;default:return{time:G.displayTime||0,name:G.animationName,loop:G.loop,speed:G.speed,duration:G.duration}}}}),S1(WJ,{isAnimationPlaying:y}),S1(vt,{getShapeModelAnimations:function(T){return(T=T&&lE(T))&&T.model3d&&(T=T.animations)?T:null},getShapeModelAnimation:function(T,B){var G=vt.getShapeModelAnimations(T);if(G)for(var H=0,f=G.length;H<f;H++)if(G[H].name===B)return G[H];return null},getShapeModelAnimationNameList:function(T){var B=vt.getShapeModelAnimations(T);if(!B)return null;for(var G=B.length,H=new Array(G),f=0;f<G;f++)H[f]=B[f].name;return H},getShapeModelDefaultAnimationName:function(T){var B,G=vt.getShapeModelAnimations(T);if(!G)return null;for(var H=0,f=G.length;H<f;H++){if(G[H].default)return G[H].name;!B&&0<G[H].duration&&(B=G[H].name)}return B}}),XZ={},{request:function(T){var B;return(B=XZ[T])?B.length?B.pop():new Float32Array(T):(XZ[T]=[],new Float32Array(T))},release:function(T){var B,G=T.length;(B=XZ[G])?B.push(T):XZ[G]=[T]}}),CZ=l.newIdGenerator(),aZ=(N.assign(sx.Graph3dView.prototype,{initSkeletonDatas:function(){var T,B=this._updatedSkeletonDatas;for(T in B)kZ.release(B[T]);this._updatedSkeletonDatas={},this._isSkeletonUpdated={},this._boneViewMatrices.length=0,this._boneViewMatrices._bufId=null},_renderBonesForDebug:function(T,B){0<this._boneViewMatrices.length&&(B.depth.enabled=!1,B.depth.mask=!1,this._prefabRenderer.render(T,{mesh:{type:"bone"},instances:{aMatrixInstanced:new Float32Array(this._boneViewMatrices)},mat:{type:"fixColor",color:"red",cullFace:!0}}))},updateSkeleton:function(T,J){var M=this;if(J||(J=lE(T.s("shape3d")))&&J.model3d){var B=T._animationId;if(B=PZ.getAnimationMap()[B]){var G=B.clip;if(G){var H=B.iteration,f=(H!==(v=T._lastAnimIteration||0)&&(T._lastAnimIteration=H,T.fp("animationIteration",v,H)),T._lastAnimTimestamp=B.time),v=B.animation+"|"+f;if(!this._isSkeletonUpdated[v]){this._isSkeletonUpdated[v]=!0;for(var Y,m,E,Z,R,A,g,F,W,s=T.s("3d.bone.visible"),S=(s&&(m=l.requestVector3(),E=l.requestVector3(),Z=l.requestMatrix4().fromArray(T.mat),(R=l.requestMatrix4()).composeFromArray(J.position,J.quaternion,J.scale),Z.multiply(R)),G.datas),y=PZ.getAnimationTracks()[B.animation][0],x=[],w={},O=(vt.traverse(J,function(T,B){var G,H,f,v;T.skeleton?x.push(T):((G=T.name)&&(f=y[G])&&((H=f[0])!==Ht&&(T.position=S[H]),(H=f[1])!==Ht&&(T.quaternion=S[H]),(H=f[2])!==Ht&&(T.scale=S[H])),(T.isBone||f||B&&B._touch)&&(T._touch=!0,(H=T.matrixWorld)||(H=T.matrixWorld=new K),v=T.transformData,f&&v?Ex(H,v,T.position,T.quaternion,T.scale):H.composeFromArray(T.position,T.quaternion,T.scale),B&&B!==J&&((f=B.matrixWorld)||(f=B.matrixWorld=(new K).composeFromArray(B.position,B.quaternion,B.scale)),H.premultiply(f),s&&B.isBone&&(v=M._boneViewMatrices,f.getPosition(m),m.applyMatrix4(Z),H.getPosition(E),E.applyMatrix4(Z),Y=2*m.distanceTo(E),R.lookAt(E,m).setPosition(E.set(0,0,0)).scale(E.set(Y,Y,Y)).setPosition(m),v.push.apply(v,R.getElements()))),w[G]=H))},function(T){T._touch=null},"comps"),s&&(l.releaseVector3(m),l.releaseVector3(E),l.releaseMatrix4(R),l.releaseMatrix4(Z)),M._updatedSkeletonDatas),_=0,p=x.length;_<p;_++){var q,u,i,I,D=(I=(i=x[_]).skeleton.bones).length;for((A=O[(F=(F=i._skeletonId)?F:i._skeletonId=CZ.next())+"|"+f])||(q=Math.sqrt(4*D),(u=l.nearestPOT(q))<q&&(u<<=1),u=Math.max(u,4),A=O[F+"|"+f]=kZ.request(u*u*4)),g=i.skeleton.boneMatrixInverses,W=0;W<D;W++)K.multiplyMatrixArray(A,w[I[W]],g,16*W,0,16*W)}}}}}}}),{cullFace:!1,flipSide:!1,transparent:!1,uvRotation:0,uvScale:[1,1],uvOffset:[0,0],uvAnchor:[0,0]}),TK=function(T,B){if(M1(B))return B;var G,H,f=Et(B);return(G=(G=f?T.s(B):G)||(f&&(H=T.s("matDef"))?H[B]:G))||(T=T.s("shape3d"),(T=Et(T)?vt.getShape3dModel(T):T)&&T.model3d&&(f||(G=T.mat),(H=T.matDef)&&(!G&&f?G=H[B]:Et(G)&&G in H&&(G=H[G])))),Et(G=G||B)?vt.getMaterial(G):G},BK=(S1(LW,{getMaterial:gW=function(T,B){if(T=TK(this,T),B===Ht||!T)return T;var G=T[B];return G===Ht&&(B in aZ?G=o2(aZ[B]):(T=BK[T.type])&&(G=o2(T[B]))),G},setMaterial:T=function(T,B,G){var H,f,v=TK(this,T);if(v){if(Et(B))H=v[B],f=v[B]=G;else if(M1(B)){for(var J in H={},B)H[J]=v[J],v[J]=B[J];f=B}this.fp("material",ft,{material:v,materialName:T,property:B,oldValue:H,newValue:f})}}}),S1(bW,{getMaterial:gW,setMaterial:T}),{}),GK=(S1(BK,{pbr:{diffuse:[1,1,1],emissive:[0,0,0],roughness:1,metalness:0,opacity:1,map:null,alphaMap:null,alphaChannel:"A",alphaTest:Ht,roughnessMap:null,roughnessChannel:"R",metalnessMap:null,metalnessChannel:"G",emissiveMap:null,aoMap:null,aoMapIntensity:1,aoChannel:"B",aoUvChannel:1,normalMap:null,normalScale:[1,1],lightMap:null,lightMapIntensity:1,envMap:null,envMapIntensity:1,displacementMap:null,displacementScale:1,displacementBias:0,rimColor:[0,0,0],rimPower:0,fresnelIntensity:1,enableTransmission:!1,transmission:1,thickness:0,ior:1.5,specularIntensity:1,specularColor:[1,1,1]},phong:{diffuse:[1,1,1],emissive:[0,0,0],specular:[17/255,17/255,17/255],shininess:30,opacity:1,map:null,alphaMap:null,alphaChannel:"A",alphaTest:Ht,specularMap:null,emissiveMap:null,aoMap:null,aoMapIntensity:1,aoChannel:"B",aoUvChannel:1,normalMap:null,normalScale:[1,1],lightMap:null,lightMapIntensity:1,envMap:null,envMapCombine:"add",envMapIntensity:1,refractionRatio:.98,displacementMap:null,displacementScale:1,displacementBias:0,fresnelIntensity:1}},!0),{}),HK={aoMap:["aoMapIntensity"],normalMap:["normalScale"],lightMap:["lightMapIntensity"],displacementMap:["displacementScale","displacementBias"],enableTransmission:["transmission","thickness","ior","specularIntensity","specularColor"]};for(UZ in BK){var fK,vK,JK=[],MK=[],YK=BK[UZ],mK={},EK=[];for(vK in YK)"envMap"!==vK&&"envMapIntensity"!==vK&&vK.indexOf("Channel")!==vK.length-7&&"enableTransmission"!==vK&&"envMapCombine"!==vK&&("map"===vK||vK.indexOf("Map")===vK.length-3?(fK=HK[vK])&&fK.length?(JK.push(vK,fK.length),fK.forEach(function(T){mK[T]=!0,JK.push(T,YK[T])})):JK.push(vK,0):(fK=HK[vK])&&fK.length?(mK[vK]=!0,MK.push(vK,fK.length),fK.forEach(function(T){mK[T]=!0,MK.push(T,YK[T])})):EK.push(vK));JK.push(-1),(JK=JK.concat(MK)).push(-2),EK.forEach(function(T){mK[T]||JK.push(T,YK[T])}),GK[UZ]=JK}L.Default.getMaterialDefaultStyle=function(){return BK},XE.pbr=["?0t0w!/Imjbodujtt;z!ihqm=t!mf4e-v!mmdjohji$u\v\v!!\v\vS0C0Q!!$fQoSjFgGfJeY$\v\v!","~0!0<!eIJj!o>u!ts;p!mhpmDthmb4s-G!`mmjhh!i\vu?-z!eppjcu/\vt!g\v/0u0j!p$=Q!SfFeGvJmYd\vo!j\v$$\ve!f\vg?jzoefp!cQ/CtSg\v/!h\vp$ge=f!gfjeovfm!dToUjB$O\vE!B\vS?Ez\ve!p\vc$/jtgge/fqgb!NVxTpFm`gU=S!BfOeTvNmJdToTjJ$P\vO!\v<!*\ve$Je)fmgfjyoffU!uJvPqSu\vv!P\vp$Uesfbgfjoojfm!!T>Q!FeDJV!M\vB?Sz\ve!p\vc$/ftoge/jhgo\vj!q\vq$bjNofdompvue=f!!f=edvpmndnopjo$?\v\v!!\v\v?$zjeopdcm/vtegf/!u=vqqbudvlpj=o!hf?e\vv!m\vd$ojjo$d\vm!v\vegfj!e=ovfc$p\vt!/<iufbbped?s\vb!f\vm$dj/gmobejfsgf!uVbTnF!`+V!CsPb\vm!vvdofjqgTpusbnp!dnsbbuf5m!dv!W,j!f*xdNdbGu!s+j!yu<b!pvdosjbgfpmsdn/!mwbfjds4f!uebjng!g.v!t1f/<2!)v!o+j!gupishnj!Mwhfodj4p!hfunvjpt!t>j!wufi<h!jvMohjogjppshnu!vgpm!p<b*ud!dsWpOvuhpieo!f-t1t:<G!uvbopjdgspbsfnm!dg/mmpbbjus!fnufbunb!m-o1fGtutb<p!dvsobjfgmpds/nm!bgjmspfbuub!np)qlbddjjmuizd<T!`vGo!j>g!pdsdnG!!w4fddf4w!!s<j*n*DspjmEpxsf<j!wv/ozjsgupfsnnp!fghm!p-bmub!nssjpnOQupbxpfdss<b!f\vm$dj/gzesfugf!nVpTfFh`)BuMpQeI)BfUuFbTsUv\vu!bvto!j>g!pdsdnW!Ogumppeb!uu!bbpmmqgi!b\vUUfBtPuD<S!B\vF$MfDo`eFjTgV\v!!g\vf$efgoje$j\vg!\v\v!g\vj$ejogfe$f\vg!!<VsTbFm`vVdWf\vq!Twobfsfzijto!h,!!wqfndp3D!zwhVswf<o!F\vo$fjfgietf!g+!!VuWi`hDjMMJhQo\vj!pwhbusvzpj!o>h!!ugimhpjbMuh!owjVpwhMupvdpb!m<V*<s!p\vm$pfDooefjfgi\vt!/\vm$bfjosefjugb\vn!)\v4$yjbgn!!e+f!g8j6o2f/e1)!V.T!F1`/M2J!H>I!UqNnBpQD*z!h}s}f!oeFfogfjfoifte!)uVbTpFm`gB!P\vNOBFQF*I\vT!`wFbTsVz!jgofhe!gwjf$d\v3!!<wfVdwo3b<j!e\vb$Sffowejjtgt\vj!n\vF$mjbguepfug!!,V!TsFb`mNvBdQf\vq!Tvmobjugppus!n,!!tfbtnvqgmgfjsE3mEb!unpbuq!<>!!\vu$ifhojeMjhgo\vj!p\vh$ujvgpe!f4gd!fVwT!F\v`?BzMeQpIcB/NtBgQ/\vo!pvjotjtgjpnstno!btsbun=q!mffesv3mEd!objm$q\vi!b<Nsbbqm<v!d\vf$qfTouedjfgs\vj!e\vo$jj/gueifhgj!MVeTfFu`dBfPmNgBfQs\v!!,v!osjbgmpvsdnf!qtTbundqfmsfjse3/Eu!ibhpjNMbeqf<u!d\vf$mjggfose!f>g!!sVbTmFv`dVfCqPT\vm!bvuopjug!p4sdnf!wg!m<pfbtuv!gbgpjNEbuqdJfosujfeootjj/uuzi<h!j\vM$effouedjfgm\vg!f\vs$!f,o!efjtgv\vg!g\vj$Ejugdeffsgj!eV/TuFi`hMjJMHeIfUuNdBfQm\vg!fvso!j>g!pfstnv!gtgbjnEqmmbfusp3uE!!4mdjfhwi!u\vN?bzqe<p!c\v/$tjgg/oqebfNgp!bV=T!Ff`eVvCmPd\vo!jv$o\vj!g<p*ssnf!xgpmQpnbjus!!m-jnhjisu)NxbpqqJ!o+u!fsoptmjpuDzn<j!s\v!$>f,o!efjdgo\vb!j\ve$bfSofewjjgt\vt!j\vn$Fjmgbeufpgu!!V<T*F*`sFjNEJxTfTjJwW/FzNsBuQf\vn!pvfohj!g-pmsbnn!stpbon/qzmsfusf3nEp!ffhn)jutptej)wtfcNbb!q.<!!1\v/$2f!o>enjjgs\v!!u\vb$pjmogd!m\vv?ezfe!p=cc/ttegg/to?p\vn!n\vp$Djtgueifhgj!mV=T!Ff`eOvPmSdNoBjM$N\vB!Q\v\v?!zveopjcg/ptsgn/!StCbQntqumifhsj3mE=!!ofpesvnmbdmoNjb$q\v<!!\v\vg$jjegoofe$f\vg!!<VcThFs`/VsCpPm\vp!Dvfowjjgtptsjnn!fw!f>d+3!!fodposbnjbembTSdfbwmjft<t!j\vn$Ffmobeujpgu\v!!<\v{$zfyo/e*jsgp\vm!p\vD$fjwgj!tatejfngfj)osfbef)oVjTMFp`UUCBHOSHtF!O>U!*c!h%s%/!s)pemfpgDjfowfjet)tUjBnOfH!F<O*UwTVQwB!D-Fq`bONPfSwNjBtMtNjBnQf*)!E}3}f!sevfugyjfouf!e>!!)sVpTmFp`DDfMwFjBtStDjPnBfU!`5OdPfSwN!B\vMQNBBNQF*W*J\vT!TwJfNdF4`!FqTfVs!ugvfsecgOjp$s\vn!b\vmg3jBesocf)$w\vf!d<4*!ofpzjfu`dqfpstj-E!fwdfbdg4!!-tOvqsbgn`!o-pmsbnn-s!pwof!d-4o!pnjbuqjOt-p!QgxmfpjbWuw!!g.b)dcfsEBj3smfbdnusjppOoc*s!v|u!swffqd!4>!!rm1b!n>s!pwof!d<4f)mebGdeTym)bfnzsfp`oq!p>t+/!yz*y-/!OeqGbeny!)<f1z/f2`!q.p!t1//z3*!-+!!e{Gzeyy/)*fwzVfw`!q-pqtb/N{m*b*n<s!pwof)dE43!frs2v!u>y!fwuf!d>4!)OeqGbenz!)4fdzffw`!q\vpQtB/NyM*B-N!SePGOe`zF)TfVz!fg`fqepgtj/$z\v*!-<!oepGjeuzj)tfpzQfw`Nqwp.t!/>{!*o*p<j!uwjftdp3Q!xtfuj1W!w>!!4edGfewy!)<wmVbwn/stpuo*!<>!!wmfbdn3s!ptOuz2s!u>f!nepGfehz!)4wdVfww/!t\vug*j<e!owff$d\v4!!<Oo!p>j!utdvfssgj`Eofpdsbng<!!+w!fmdb4n!srp2oq!f>s!qm!b>n!sdpsop!t\vtE)FrE2J-T!`OF*M<C!VwPfEd!4g!fre1gqjf$s\vq!!<>*!mdbsnpstptO)wO)-f!{rj1m*b<n!swpfod!4>!!Um!b>n!srp2oq!f4sdqf!w+!!<t1u/12/!y.!!,;!!r11/q2f!s@q!!h+o!jtdub2G/uyo<p!swGf`dm4h!!C>!!>o!prj2uqdffssqj!E+f!dtbug1!/uzb!p,m!gr!1\vqgfjseqo!f+$!\vt!u\v2g/jze<o!fg$m\vp!b<uc!/etftuf!o>m!bnubfyN)mefpyuf)uU!->!+U!*s-p!uedpbuG)tCt-f!oCm*b*u<f!ng!m\vp*bCu`!MtFdObOmBfI!D>`!Q)BeNfTuT!F>O>M!B1U/F1N*)!e@f!o1j/g1f!e;!!ggjbmdff$E\vj!s<fhd/utjtpfoo!m+b!ujfoNwmffsytffut!r>s+u!)sepfuud*b<G!tstffuovmsbou!fonp!s\vn*bHm`jM{FfO)OUB!I+D!`)QnBbNqTOT/FyO!M+B!UtFdNb)meff*o!j,g!fCe!!+g!j)mnfb$q\vO!/<zs!/+t!ttfdobmmbfu*f!N,m!fOy!f+u!!n>b+q!Os/p{u*d<b!G~t!t\vf$ofmobeujfgn\v!!\v\v*$Sj`gMeFfOgO!BVITDF``QSBPNVTHTIFOOFMTBTUNFBNQ)\ve!fvoojjggfpes!ng!jt$b\vn!q<m*fwsV3wE!!-sqpbvNhtitoffotmtbNubfqn<)!E\v3$ffsoveujygf\vu!!\v>$!jtgteffogm!bVuTfFN`mNfFyUfBuM!O5FdTfTwN!B\vQQ\vB!NvToTjFgOpMsBnU!FtNb`nFqTmVf!sg3fEe!gnjf$u\vb!m<otfttftoNmbbqu<f!n\v!$>f!osepjugd\vb!Gwtbtsfzojmobhu!fwnf!du4b!pwmOgp!s\vngbjme<o!fw$b\vs!z\vjgojhe!owff$d\v4!!<wcN/wtQtpftojiuhjvppoS<m!f\vy$fjug!!>e+f!gsjpoufdeb)GVtTtFf`oFiOhWvNpBsQ!*\v!*}C}`!MNFBOYO`BCIPDY``QDBMNJTQTQFFOSI!H?V!P1S!)}e}f!oejfggfjeo!fgej)mVfT$F\v`!U<ShB/OtTtNfJoTiThJvPpOS*m\vf!ywfbus!z>j+o!hs!pwufddb4G!twtXfposimhevQppst!j\vu*jHp`oM<F!O\vO$BfIoDe`jQgB\vN!T\vT$FjOgI!HeVfPgSj)oeffeo)jDgMfJeQ!`gEjJmSfF$D\vU!J<PsO/*t\vt!fwobishzvjpoShm!fwyffdu4!!>w+M!psdpbumdQbpGttjtufjopioh<v!p\vs$!f\vo*eSj`gM\vF!O\vO$BjIoDd`mQvBeNfT!T=FdOmIjHqVEPjSs)fedfuojjpgof/eg!tg/ji$f\vb!e<?*\vw!V\vw$!j-oqdbmNvtetff!o=idhmvjpqsc)pEy3/fgstv/uiyffbue!?>\v!!t\vt$fjooidhmvvpeSfm!f=ygfpuh!/5gdtf/wi!f\vbQeB?N\vT!T\vF$OjIoHdVmPvSe`fF!T=Vt!igbfeepgxjN$b\vq!/<gttt/fiofibhev?p\vs!!\v>$!jsopdumdvbeGft!t=fgomiphxvNpbsq!/ugbtp/migf!b\veg?j\ve!o\vf$$j\vo!d<mevsebfd!t=jfeo!d*puetjfoUhb?i\vq!m\vb$!j=o!dbm/vsepfm!p=DdfvtcvfgFgojweS)f!ggmjf!d\vuUjTpFoUGBTI?Q\vM!B\v`$FjToVd!mgvfeefg!j=$f\vo!w\vngbjqeQoifz$t\vj!d\vbgmj/egotf/$i\vf!b<ec?/\v*!w\vV$wj!o-dqmbvNebfi!q=mmbj)hEi3uftsDvpunynfpuo!/>g+t!/bi/fsbpem?p\vD!f\vt$vjgogdjmev!e\vf*!C=`mMjFhOiOuBtIQDC`SQ/BgNtB/IiQfMbBe)?e\vf!o\vj$gjfoed!mgvjemff!$=\vu!s<bho/t*nwjVtwt!j-pqob/Ngbti/qimfbb)eE?3\vf!s\vv$ujyofdum!v>e+f!!b=/usppomfpNDbfqtqvjgoghj/eg!t\v/*iHf`bMeF?O\vO!B\vI$Dj`oQdBmNvBeIfQ!M=Bp)jeuf/ogjtg/fief!bgej?m\vf!$w\vp!j<es!/n*bwjVow)!*-!q|b!N\vb$ijqomdbm)vEe3ff!s=vdumyjfquE!j>s+f!dbu/jsppom/pgDtf/tcvpgegzj?e\v!!\v\v*$Sj`oMdFmOvOeBfI!D=`dQmBjNqBcIpQyM/Bg)te/fcopjegzf?e\v!!gwjfmdf5$!\ve!j<gbg/v*twfVDwp!m-pqsb!N>b!iwqfmdb5))Ee3jfgsgvvutyff-u!!p>q+b!dbj/uszp*m<p!DSfftgvmgfgdjuef!e\vM*jBh`iMuF!OsOfBgImDf`dQuBfNeBMIjQhMiBu)!e>f!oSjfggfmef!dgujf$e\vM!j\vhQiBuN)BwIfQdM4B)`1F/T1V*!-g!fwefgdj4$)\v1!/\v1g*j-e!owff$d\v4!)<1s/p1m*p-D!mwffydf4u)!1>/+1!*s*p<m!pwDffdt4v!gugpjueb!m<F*nsjptmtpjDwmffSybfeuj)bsobdffo!j>M!pfUnCjHtSttj!w>f!<s!p\vm$pjDgmeffygf!uV!T<F*`wNVBwQ!\v-!qwbfnd)5E!3uffsyvfumyDfpum!p>s!"],XE.phong=["?0t0w!/Imjbodujtt;z!ihqm=t!mf4e-v!mmdjohji$u\v\v!!\v\vH0O0P!I$QQ!SfFoGjJgYf\ve!$\v","~0!0<!eIJj!o>u!ts;p!mhpmDthmb4s-G!`mmjhh!i\vu?-z!eppjcu/\vt!g\v/0u0j!p$=Q!SfFeGvJmYd\vo!j\v$$\ve!f\vg?jzoefp!cQ/ItPgO/Hh\vp!g\v=$!jfoedvmmvdeofj!$=\vd!p\vn?nzpeop?c\v/!t\vg$/jqobdNmxvpemfg!==!qfbedvlmjdoohj?$\v\v!!\v<$*jeoJd)mmvfeyff!U=uvvcqputv/PipfUbseb?f\vo!j\vm$!j>g!oeeJf!g\v!?VzTeFp`cV/CtPg\v/!hvoojjqgqpbsNnf!owpfud=4!!feejvgmgdvotjf$<\v!!v\vo?jzgeppscn/!twgf/du4v!qfunvjpt=t!jfwefv<m!dvoojj$g\vp!s\vn?!zwefpdc4/!ttgq/fhdovpmibQsq<b!nvwoojfg=p!sfne!vgmmdpobju$!\vt!i<jfodjoobfjtetb<S!fvwojjtgtpjsnnF!mgbmuppbuu!!,p!qsbbdmjvudzf<q!T\vu$djfgsejfego!jV/TuFi`hBjMMQeIfBuUdFfTmUg\vf!sv!o,j!gspbsmnv!dgfmqpTbuud!fbsmjqei/buUifhtjuM<e!f\vu$dffomegjfgs\v!!,v!ofjtgvpgsgnj!Ewufddf4s!jveDobjn/fusibhQjpMtejfuujdpfom<g!fvso!j,g!pfstnv!gngbjuE5u!dvfWsjjfex/NubiuhsjjMye<f!u\vd$ffmogefjsg!\v>!!\vu$ijhgjeMfhgo!jVpThFu`vVpW!\v4!dwfbws!z\vj?ozhe!pwcf/dt3g!/wqVbwN<p!b\v=$!jfgeevfmgd!oVjW$`\vD!M\vJ?Qz\ve!pwcb/stzgj/oohp!ngnmppDbtuu!iwhVjwmM=p!dfbemvVm<d!o\vj$$f\vo!e\vj?gz\ve!p\vc$/ftoge/jhgo\vp!i\vQ$tjugi!hejfmg=j!offeev)mVdToFj`$M\vJ!H\vIgUjNeBoQf*$!\v}!}<!cehfsg/jsopfmep)DVfTwFj`tBtPjNnBfQ!*>\v+!!wfbdsozbjjoehb!Swffwdj3t!twjVnwF3m<b!u\vp$uf!o<e{jzgy\v/!*\vs$pjmgpeDffgw!jVtTtFj`nNfB)Qs\vb!fvoojjMgppUsCnH!Sttb!n>q!mcfhss3/Es!pnmbpqD<f!w\vj$tftojenjfg!\v<!*\vw$Vjwg!e-fqgb!NVfTwFj`tBtMjQnIfB)NEB3Qf\vs!vvuoyjfgup!s>n!!stpbmnpqDmffwsj3tEt!jbnmfq!i5bdNfbwq!<\v!Q\vB$NfFoWeJjTgT\vJ!N\vF$`jFgTeVf!gg!fVeTgFj`$B\vP!N\vBgQj\ve!ovfo$j\vg!p<s*no!ptjbundqfmsfjsE3fEd!bbgp!N-bOqq<b!n\v!$-jmgbonesfpgo!!V-ToFp`jVuCjPt\vp!QvxofjjgWpws!n.!)gcmspBb3um!bbnpsNpbOqcJsovuufsoftqj!u>z!<m!b\vn$sfpooe!j<gf\vm!b\vd$Tfmobenjsgp\vo!!\v>$+j!gzeyf/gO!qVbTnF!`<M1J/H2I!U.N!B1Q/\v3!!v+o!j{gzpys/n*!wtVbwn!q-mqfbsN3mEb!nmsjphoi)uEN3bfqs<v!u\vy$fjug!o>e!fOgq!bVnT!F4`dVfCwP!\v\v!QvBoNjMgBpNsSnP!Og`mFpTbVu!!gmfjehgiju$N\vb!q<JoopujfuojttjpuQzw<N!w\v.$!f>o!eojpgj\vu!j\vt$pfQoxefjjgW\vw!!\v4$djfgwe!f<gm!bVnTsFp`oF!N>J!TmTbJnWsFpNOBzQs\vu!fvnopjfghp!s4nd!ftwb!n\vqgmjfeso3fE$!\vf!n<jotptjjuwdffNsbjqE<f!d\vb$gf!o+e!jmgb\vn!s\vp$oj!o>d!mmvbenfs!p=oc!t\veEgFtE?J\vT!`\vF$MjCgVePfEg!!gVfTeFg`jO$P\vS!N<B*MmNbBnQs\vp!Ovwo)jfg{pjsmnb!ntsbpnoq!m>f!sm3bEn!soppos!n4bdmfNwb!q<<1!/\v2$!j.g!o;e!f1g/!2V!T@F!`hVoCjPd\vb!GvuoojpgspGs`nm!hw!f>d!3o!pojpusdnfbsmjTEdfbdmbfg<!!u\vb$pfmoge!j\vgg\vj!e\vo$ff$o\ve!j<g1\v/!2\v!$>j!gi!uaheoffgsjuoTfseb)mVvTdFf`qUtB!O\vHfFtOmUf*$!\v%!%<!s)/esfbgmjvodffeq)TUmBfOyHfFuO!U>T!QiBuDhFo`fOsPuSTNsBbMmNvBdQf*q!t}!}<!*ewfVgwj!o-fqeb!N)sVbTmFv`dDfMqFtB)SED3PfBsUv`uOyPfSuN!B>M!NsBbQm*v*d\vf!qwTfmdf4y!fquf!s5udvfswc!O\vpQsBnNbSmB3MBVsDcF)QwTf`dF4T!Vf!zgff`eqgpjt$-\v!!w<fidu4h!otfvssugT`sobpmsvnd-f!qwtf!du4b!pnmbgq!O\v-g!jgemopfb$u\v!!g<bedsfbEdjtsjfed!u*juptof*U!b|i!qwmfbd!4=!!rb1/!s>p!mwpfDdf4t)vegGgejye))f!zgfj`!q\vpUtT/FyU*B-I!QeMGBe`yF)TfVz!fg`fqepgtj/$z\v*!-\v!gejGeeoyf)$f\vz!f\v`gqjpeto/f{$*\v*!<<!cw/f*dw4V!wr!2-!q>b!Nwbfidq4m)be)GEe3zf)sfvzufy`fqup!t>/+y!*b-/!sepGmepzD)fftzvfg`gqjpet!/\vz**C-`!MeFGOeOzB)IfDz`fQ`BqNpBtI/Q{M*B*)<e!fwofjdg3f!et!ug1j!m>f!$e\vG!e<yh)/w*VwwV/wt!u-*q<b!Nwbfidq3m!bt)uE23!f>s!veuGyefzu)!w>V+w!/bt/us*p<m!pwDffdt4v!gOg!j>e!!t\vv*sHg``MoFpOsOnB<I!Dw`fQdB4N!BrI2QqMfBs)qe!f>o!jdgsfpet!tg)jrm2f-$!\vO!*<<s!/w*fwdV4w!!r-1qqbfNsbqi!q>m!bd)sEp3tfts)vOu-y!fru1!*><+!!wbf/ds4p!mUp!D>f!trv2gqgfjseq!!\v+*!St`uM1F/OyO!B,I!Dr`1QqBfNsBqI!Q+M!Bt)ue2f/oyj<g!fwef!dg4j!mCf!$>\v!!r<2bq/f*swqV!w+!!-tqub1N/bzi!q,m!br)1Eq3ffssqv!u+y!ftuu!2>/+z!<b!/gsmppmbpuD!fetfvug!g>j!en!b\vy*)Be`pMuF)OUO-B!IUD*`-Q!BeNpBuI)QCM-B!)Ce*f*o<j!ggfmep!bguj!$t\vd!b\vmQfB!N>B!I)QeMfBu`!F>T>V!!1g/f1e*g!j@$!\v1!/\v1g!j;e!ogfb$d\vf!E<jsspfmdpuDjmpfoy!f+u!!j>o+w!fssptmfptDrfstuv)gegfjue*!<<!*ssfpumvpsDom!foypfsun)bsmbjf{ofj)MUp!U+C!H)Sntb!q>O!/syp!m+p!Dtmdfbymffu*!!<,*!wCV!w+!!-)qnbbnq)OE/3zf!s+v!utydfbum!f>*!!s,p!mOp!D+m!fnybfquO!/5{d*f<w!!~\v!Q\vB$Nf`oFeTjVg!\vg!fwebgsjz$j\vo!h<!fwwfjdt4t!jwnOfp!s>n!bfmd<o!bwjbesbzSjfowhj!twtfjdn4F!mwbNuwpQup!t4jdufjwp!o<<*!*\v1$/e1f)g4jdoffw!!F-O*W1N/B1Q)`4NdPfEwF!`-S*F1G/M1F)D4UdJfPwO!\v-!*\v1$/j1g)!4edffgwj)oufieh)jVMTeFf`uFdOfWmNgBfQS*!!>}!}u!iNhBjYM`eCfPuYd`fDmMgJfQsQ!FuSi!h?j!M1e\vf!uwdbfsmzgjfoSh!!<w*fzdu4j!dwbXqpps!m-efQtpvtgjgujjep)o5<d!f\vw$!f>o!esjpgm\vp!D\vf$tjvgg!gejfeg!j5odffew)!V\vT?Fz`eFpOcW/NtBgQ/*y\vp!cvqojjmgdp=s!nf!egvmmpdbouj!$f\vo!w\vN?bzqeJpocu/ftogt/joupzj<u!dvfosjjgEpqsjnm!dg=m!pfbeuv!mgdmojjq$F\vo!w|N!b*q)<o!j\vb$nj!geejfpgw!!F\vO?WeNbBfQi`/UtZgQ/Fu`jDpV=C!Ff\ve!vvmodjogjp$s\vn!!\vt?benbqfmif/stDgv/chfo!jfqoqwbnNbfqo<p!u\v=$!ffmetvfm\vd!ovjo$j\vg!p\vs?nT!Gtobpnjqumdffsm3gEf!SfwoowFnfbcqv<d!=\v!$ffeovemjdgo\vj!$\v\v$!j\vggojeefogf!$V\vT!F<`qVbCNPs\vb!mvvodjfgqpts!nE!3gsmfpmbqun!bstf!gnssbpdgujjopvo!S\vbQuBjNpS<B!M\vV$DfFoQeTj`gF\vT!V\v!$gffoeegjjg$\v\v!!\v\v$?jegb!feif/gtjgo/fheo)pDiMQJtQu`iEhJjSmF=D!UfJePvOm*d\vo!jw$b\vs!z\vj?oehb!fwif/dt4g!/woMppndnbpmDQtputijhujjmp=o!<f!e\vv$mfdooejj$g\v\v!!\v\v?$hjoojdempvdeoff!==!dfmejvqmEdjosjf$d\vu!j\vp?oe/bgfti//itfgb/eq?b\vN!x\vp$mjgo=d!mfveevfm!d=odjm$j\vq!c\vp?ye/bgfti//itfgb/eq?b\vN!x\vp$ejboidtm=v!effe!v=mgdpohj/$g\vt!/\vi?feb"],XE.hueSaturation=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gxp/ssnp!mtpbdn!q-m*fmst3iE)!cjhnsb3hmft<i!)w5bdsfzwj!o>h!!swpfmdp3D!hwbVswG<`!m\vh$!e<f*g!j*offh!oNbBSYt`tSfBoOuHiFh!j8m\v!!-\v^$1e]ftgtjfoofu!iShBjOmH!F-`{B/MmMt!i1)\vt!tvfoojugiphsjnm!`gqmbpnb!u-!*ifvhfo]bNSBoYp`jSuBbOsHvFu^b<t!!v-o^j1g]pospnj!ugbmspvbuub!tt!b-uzv/smbtuij)poop]jNuBbYs`vSuBbOtH`Fq^b<n!!v-o*jfghposbnS!fgvmip!b-u^!1m]jfhviiu!o-fyt/tm]tNiB)Yf`vSiB`OqHbFn^!<)!4gdmfpwb!u>!!nmbtqi`!i~v!f~)!g<mlpbbfus!cj!o<W^bsmfvufo-v!pgdm`pfbvui!]itvtffBomumi-h!jgmm!p>b!uf!hiovbfSStbtofhofu*i!h|j!mg!m<p^bsuf!uwobvmpvdf`!f>v!ij]ooWpbjmuvbfs!v,u!b)ti!v>f!Bfmhmo!b,S!oipvjfuSbbsovhufb*t!!0<!^3s/f1u<o!vjpgd!`)fwvbim]vffv!i=!!>1!/f1h*o!bsSffuvvis!o|!!w*bfmhvofb!s,!!>2>/!1s<f!ufomvtpfd!`jfgv!i))w!bgmjv!f|!!?*!,2,/s1f*u!osvfpudv`sfov!iw!b<mFvHfO!B.S!`2Y/B1N<!!=f!mstffu!osvfpudv`sfov!iw!b<m1v!f><!!s~f!ugomvppbdu`!fnvbiq!`utobju)v!ssbpugj!p<o2)!g,m!pfbhuo!bjso!W>b!mfvhfo-b!sg!m<p1b!u>!!tfbhuovbssb!u*j7p!o>B?m!mf-h!ogbmsp)b!ug!jt!b~u!v~s!b<uljbpfosScb!o<hsff*u!o|v!pgdm`pfbvui!!w>b!mfvhfo!b>s!!j|o!W*b6m/v1f!!,+!!*)s2f/u1o!v,p!dt`bfuvvis)buubjppmogB!m=m!!i,)!!tgbju!v|s!b*u,j,psofSuboovhpfd*`<f!vsif!u<vFsHoO!BdSm`bYnBqN)!w=b!msvffu-o!v1p/d1`-f!v2i/!1<*1<!!>~!!sgfmupobvup!dn`bfqv`im!juhoiju)o!fstptg)!g<mfphboub!SjtotWfbomuvifh-j!mg!m-pfbhuo!bmSjohpijuuobfstvtuBbmtm!--!fghmopbbSuf!vmij!huibupomfgt!t<S1b!o>h!ff*h!o|b!sg!mupobju!!<we!m>p!imtjfhsiiuuo`fftvtiB!mumb!p,m!gm!j<h1i/u7o!f+t!tyS/bmothif!<>!!jig!!u)bwp!m=g!!1</*1{*z!ys/fsupvmspod!)jmotWib3mcvhfs!!+>!!)mwt!i,!!42d/f1w*!<<!*fwmVtwf!!-sffhubvnsjo)!Ej3ofWsbvmuvyff!u,!!>)!ws!p+m!p)d2!/51d!f.w!!j|o!W*b)movjfb*n*!<e!j~p!wg!m~p!b<u*!mi!v-ft3!s-hic))4gdmfpwb!uo!sgv2u-f!sg!m~p!b<u1!/g73!-0!!gim!p>b!ui!!i~v!f<*1!/|7!!j>g,!!)ii!v|f!!*=1!/11/!1=*!!ii)v!fg!j,!>~!!2</b1u<m!ffEmdt!f0!!j*gh!!).i!vsf)!!?,!!21//15*!!>i!vif!!|.!>f!t2m/f1!<~!!g<mbpubmuf!Esdf!t0<!!*jsg!!.)!)c7)/!1,!!+1!/i3v!f>*!!i=!!|2!/*1y*b!Nsdf!t>!>>!!hg)2!!g,j!!)fgt3m!f.!!~g!2<*b!u+m!f7E/d1!!0+!!*icv!f.<!!hf)m!t>f!!ij!g|!!)*)y3b/N1d!!+>!>i!vsf)*!!g=j!!2</*1**o!jsNfdt!!,>!!ygb3N<d!)f!m.t!f1!/j3g)!!)0)!4b/u1m!f+E!di!v;f!**!o=j!N3d/!1,*!!ysbfNtd!)>!!0g!2b!u,m!f)Egd3!!@.!!6g/21*!!=+!!m)!)>3!/t1!!<0o!j4N/d1!*.!!.y!biNvdf!*>!!+b!u7m/f1E<d!!fumbtpfm!gs!f|t!!*>o!jgN2d<!!?s!fyubvNsdo)!!sgfjt!<<!1~/!3w!f0d!4*!oijtNmd3!s,h!cy)bwNfdd)4!!>i!tmm!*<!*|*!cw!f-dh4)!ysbhnc!<-!sj)gy!b)ni!t>m!/yzb!N>d>!!u1b/p1m*g!!|<!*s*hcc!!->h!)wofjdn4!)-ist)mo/j{n*!<>!!~o!jfNmdt!fu!b|p!mggm!p<bcu/!dg!3><!!cj!gu!b)pimtgm!/<{h!/=d!!1>/!6h*!!ugb3p!m>g!!i<tsm//d{!!>+!!s)!2u/b1p!m,g!!i<t1m//1z!*><!!mf!mutbfp!mgg3!!<>1!/i1t!m>/!{t!!,u!biptmmg/!z<!1./!2i.t!m>/!zi!!+u!biptmmg/!{|<!!*gdm!p4bduf!wg)2m!t>i!33c/h1s!!+4!diftwm!/~{!!<.c!hgs3!<o!ssvhucf/ss!!~>!!<i*v*f13/s4h0c1)/g22)-!!.g!3y-/!mittim!/-y3!g,!!-)22g/)1c0h4s/31f*v*i<!!>s!hcc//chh!s>!!<i*vyf/3msthic!)-g32g-!"],XE.blitScreen=["?$TjWoodfmfvsedfT!u=jcm","~v!o\vjggjpesonf!$t\vb!n<q*mcfhss3/Es!pjmnpbDhhfb<s!Gw`bmshz)jhoohj!swffidu3j!ew!V>w!<c!h\vs$/jsgpemfpgD!hVbTsFG``MmJhO!F\vBHSO\vJ!S\vF$IjUoJdEm!vgeffe!g=jf$o\vd!p\vegjjoeho?f\v$!\v\v!$<f*oweVjwg!\v-!f\vh$bjngje)fEg3!fEsJvUuIyFfSuJ!O>H!\vs!p\vm$pjDohdbmsvGe`fm!h=!d\vpfntnmpfo$?\v\v!!<w*f*dw4V!we!j-ufihfbsnjjo)hE)3wffsdv4u!ydfpum)pCsH*S!t|p!Ugsmbpfbouj!Mh!s>j!es`pqmpptDjhubjspGo`!m>h!!s\vbSoBeF)OhJmM``GFsTbVh!Dgpfpesgej/$y\vz!*|<!!*w)fodj4b!ne!jeujipfws!`\vtgijjegouf`$S\vH!C~!!><!CwHfSd`4u)g1j/i3t6`!s0f!i3u6j6e/!1,-!!s.p1m/p3d6!!o0s!v3u6f6s/!1<-*!o1p/j3u6j!t0p!q3`6e6j/s1h*!<-!CeHjSu`iufgsj`itti`jsgfui`uSjHeC!!+>!!1n/j3y.)!3-/C1H!S+`!uegjjuiitf`s"],XE.pick=["~0!0<!e$fQnSsFpGgJtYo\vb!svuo!j+g!pysjns!ucbpNpxmf!jvWUmffyeupvNsvf!<+!!vyojjsgupbsNnu!dnfbkup4s!QvvV!w>N!boupsjjuyj<t!pvQo`jmghp!s\vng!jnebouf5$!\vv!Q~s!p<ksfpdmupNDbiudsujbyC<b!!v>o!jsgppmspnD!indbuub5C!wv!N|p!e*fsmpNmbpuDsijdyu<b!Cvvo)j!ggpjs!n\v!SnPbMuP5D!IvDNUpBeCf!mgWfjefgxjN$b\vu!s\vjgyj<e!obfu$u\vs!j~c!v<u*f*!1w/f2d!4-!wbVObp)s4ndbfmw<!!+b!uyujssjucbvNuwfV!vw)f3dd4f!wb!Q>p!twjVuwj!p|o!<*!fbsuvuusyjfcUvvu)f!!gwjf!d\v3f!tbmVfw$<\v!!\v<$*jyg/ewfVgb!!C-B*U*D1I/D2P!M-PwSV\vb!)v4odjfgwp!s+n!!ycjpspumb!NvwCVbvu)d3idDfpwm)p4sd<f!wb!u>u!swjVcwv!u\vfQ!JwMfDd`5W!Vb!CgbfuedgijD$p\vm!p\vsg<j!ewobfs$z\vj!o<h*!ewffnds5p!gwtCobbusdui!D+p!mypjss<u!b\vN$mffoeepjNgv\v)!4\vd$fjwg!e>f!go!pVjWu`jDtMpJQQe\vm!swpbXswz!j\vo1h!!>waf!dS4F!QwQVJwM<D!`\vY$PfCm`tYfB\vN!!wgbjs$z\vj!o\vhg!jwefodf3$!\vw!V~w!<<!e\vf$nfsopegjtgo\vb!s\vu$!j+g!eeffgd!oCbBuUtDoIJJyOjTsUuBbONDbF!\v>!!veofjngsppsgnt!ocbpspum!!|v!V*tffdJoobtuutbooJdfft<V!v\v)$!egfjg!j\voFfD!OVBTUFT`OJJOITDUUBBOCD!JgOfHe\vg!j\v$$\vj!o~d!m\vv?ezfe!p=cj/ottwu/bhoodjjooohj/lwtt=/!iffebvem?d\vo!j\v$$\vf!o|e!j*gh\vo!jwobosjzljTofht!Vwvf)d!4g!jw!X<p*smmbenQspptOjbu)j4pdof<w!!w>b!smzbjnoshp!Owufddf4k!cwpM!p4ddbfmwQ!p<t*joupjjpuoj<t!p\vQ$be)f4gdjfowf!!>V!ToFp`jTuLjJtOpOQJmObHd\vp!M\vw$!e<f*g1j/o2f!!-CoPpOjFu`jUtFpYQUbV)S5Fd\vf!wv!o>j!gepfsnns!pcgptpomb!svuV!t5fdTflwj!o|o!j*oehj<p!w\v)$ojjobdnm!veejfp!w=!t\vl?jeobofjio/ht/w","~0!0~!!$<QeSsFbGdJtYj\ve!!v|o!j*g1p/s1n!!>c>p!pbm/!svpEmjptDdhbbsseGT`fmmhf)d!ugbjc!m\vfg<j!evoofj$g\vp!s<ns!pwmfpdD5f!tvsGfjwyfQSjlddljSQfywjfGsvt!f>D!psmppmsp<D!hvbosjGg`pmshn!!\vgfmtpmbfu$!\vv!B~m!q<isbpUmfptDuf<t!svfowjfgSplsdnj!QcypjpGmv!!v>U!ssbpomtpqDbhsbfsoGu`<m!hv!o|j!gfptsmnf!!c~p!p<ms!pvmUpfDyiudvusbfC<w!!\v>$!jsgpemfpgD!hVbWs`GD`MmJhQ!\v|!!w*bsspzmjpoDhi!dwufbdC4v!)w!Vgwj<!!\v\vS$PfMmPtDfI\vD!UwBbCs!zgjfoehg!jw$f\vd!3\v!?wzVewp<c!/\vt$gf/oyepjcgq\vj!mvdo=j!gfpesvnm!dtobjn$q\vm!f\vs?3zEe!pvcT/btngq/mofpsj<u!d\vf$sejfEgqjjomfd!=D!MfJeQv`mEdJoSjF$D\vU!J~P!O~\v!!~\v!$<jeosdbmdvtejfe!!=|d!m*juqtEfjUsbfidqumjBpvo!/>g=t!/bi/fsbpem?p\vD!wwvb)s!zgjjo!h|!!wfftdm4f!!w~M!p~d!b<meQspbtdjtujjep!o|<!!*w1b/s1z!j>o>h!!bw/fsdp4m!pwDXwpvs)m!egQjp!t|j!u*jupoof<s!b\vq$tjogbesfUgv!)C!BgUjD!I\vDgPjMePoSf\v$!\vv!o<j*gwpVswn!!-cspfpmmq!nvbCTbvu)dEi3Dfpsmvpusy<f!uw!b>s!zsjpomhp!Dwwfvd!5\v!fwtCmbfu$d\vi!D<p*mzpys/<w!V\vw$!f-osefjmgq\vn!b\vT$vj)oEd3mfvsevfu!y=fdum!j>q!csppym/pgDtw/vi!f\vbQeJ?M\vD!`wWpVj!eg!fnebgjjo$)\v*!!||!!*wffmdc5b!uvdwfDmpfmTpess<b!djtgj!E)vvaU!f%y%u!vfs"],XE.envmapDynamicCompose=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*g1p/s2n!!-tcbhnsq/m*fbsi3qEm!bu!f-ycuhvss/f32s<p!mvpodj!g-pcshns!/t2bsnpqmmpfds)3yEj!nu)f5ydufvws!f>3!<s!pvmopjDghpbssnG!`gmmhp!b<ub!/p3gsgptmfpud<!!>w!bbsizqjmobh!!uwbfpdm3g!!w<V*w*<w!V\vw$!j-o3dfmsvveufy!f=uf)oEd3pfesjvouhy?f\vu!)wspbjfeo!jnMbpjUoC)H*S!t|!!>w!f3ds5p!mdppdm!p5sd2f!w>!!<u*f*yzu/vwsVfw3!E-)uufftygugvps!f.2!-y!/wwfVdw3)"],XE.blurH=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jngvpts!n>!!tsbpnmqpmDfhsb3sEG!`jmnhb!h<f2<6!1w/b1s!z+j!o*h*!zw/fwdV3w!!w-Vfwv<m!bvwo!j+g!p1s/n5!!g,m!pyb/uw!Vwwb)m3vdff<w!!w-pfjheb!nnjb)jEo3)f*s!v|u!ywffud!5>!,t!vnnv!t>!!<w9f2d:51)/11/!1+*!<*!*tzv/nw!V,w>!!-uffvymubvws!f+3!E1)/j4n!b,h!fy-/!wwVfwd)33)dwfVww!/-yf!h.b!n5j/)1E!3+f!swvbumyvffu-!!>w,V!wn/vzt*!*<!6+5!313/21/612!<+!!t*v*nz!/,w>V!wu!f-yfuvvmsbfw3!E+)!j1n/b3h!f,-!!yw/fwdV3w))w3Vdwf/wy!!-.f!h4b/n1j!)+E!3wfbsmvvufy-f!uw!V>w,/!zn*v*t!!+<!214/612:/219!<+!!t*v*nz!/,w>V!wu!f-yfuvvmsbfw3!E+)!j1n/b2h!f,-!!yw/fwdV3w))w3Vdwf/wy!!-.f!h3b/n1j!)+E!3wfbsmvvufy-f!uw!V>w,/!zn*v*t!!+<!414/7223/315!6+<!!*t*vzn/!w,V>w!!u-fyy/uwvVswf)33Ed)fjwn!b-hffh-b!nwjf)dE33)fwsVvwu/yyf!u.!!>2,/!1n!v+t!!w<b2m4v6f2-/!1w!V+w!/*z*"],XE.blurV=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jngvpts!n>!!tsbpnmqpmDfhsb3sEG!`jmnhb!h<f2<6!1w/b1s!z+j!o*h*!fwvfmdb3w!!w+V!w1</!5v!o,j!gzp/swnV!wg!m-pyb/uw!Vwwb)m3vdff<w!!w-pfjheb!nnjb)jEo3)f*s!v|u!ywffud!5>!,t!vnnv!t>!!<w9f2d:51)/11/!1+*!<*!*tfvvnm!b,w>!!+u!f1y/u4v!s,f!3zE/)wjVnwb!h-fy-/!wwVfwd)33)dwfVww!/-yf-h!bwnVjw)/Ez3!f.s!v5u/y1f!u+!!>w,b!mnvvft*!*<!6+5!313/21/612!<+!!t*v*nf!v,m>b!wu!f+y!u1v/s3f!3,E!)zj/nwbVhwf!--!yw/fwdV3w))w3Vdwf/wy!--!fwhVbwn/jz)!E.3!f4s/v1u!y+f!uw!b>m,v!fn*v*t!!+<!214/612:/219!<+!!t*v*nf!v,m>b!wu!f+y!u1v/s2f!3,E!)zj/nwbVhwf!--!yw/fwdV3w))w3Vdwf/wy!--!fwhVbwn/jz)!E.3!f3s/v1u!y+f!uw!b>m,v!fn*v*t!!+<!414/7223/315!6+<!!*t*vzn/!w,V>w!!u-fyy/uwvVswf)33Ed)fjwn!b-hffh-b!nwjf)dE33)fwsVvwu/yyf-u!!w>V,w!/nzv!t.!!<22/416!2+/!1w!b+m!v*f*"],XE.blurDownSample=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j1g/p5s!n0!!t*b*n*q1m/f2s!3-E1!/j1n)b3hdff<w!!w+b!sfz{jjoThm!fwyffdu3!!,w!VwwV<w!!v-ofjhgbpnsjn)!Ew3ffds3v!uuyffyuf!m,T!j*{*f1</!2w.p!j-e1!/n1b)j3od)f*w!!|+!!hfm{`jGTsmbfhyDfpum!p,s!!w>V!w)!u-ffyhubvnsjf)3EE3)fjsnvbuhyff-u!!w,V!w*!*,1!/u1f!y-f1m/T2j.{)f3!d+f!ww!f+d!3f){2j/T1m-f!y1f/u1!*,*!!w,V!wu!f-yfuhvbsnfj3)E"],XE.flow=["~v!o<j*g1p/s2n!!-c1p/p1m!!-v1t/f3Y![+<!!wbVuwu)s5jdcfvwu!f>!!wofpdj4u!jqtpptQj`umjhp!o<<*!zw/bospzjjuojht!pwqf!d-3y!/woVpwj<u!jwtppjqe)!3ndbfjwo!)>*!!w|V!wj!gf!t)mvft!f<Y*[{*/!owpVjwu!j>t!pwqf!d-3y)/qopptjju","~d!p<oztuuj!tgomfpubouj!!q+j!3b!/>s!p7m/p3d9!4+2!9s6p4m<p!dv!o>j!gsppsmnp!DthbbnsqGm`fmsh3!E<!ejonfbmhcf!<+!!v*o*jzgyp/s*n*!1n/b2u!4-!wvvw)N4bdufswj!y+<!!yvjosjugbpNswnv!)j)o3ud!ftwi!b-qffh<b!nvjo)jEg3pfssnv!uwyffdu5!!>c!msfpomep<d!!v5odjfgwp!s~n!!<g*mfpmbhuo!bj!o-u!f*o3tjjqu!z+<!!fwmbhsozBjeophn!)wtfpdd3!!+w!V1w/<3!!w+p!j*ew!Vnwb)jiou)h*o!f|m!)w3fddf3w!!v>w!<w!vg!m<p6b/u1!!b+o!hqmffu!t>!!.b!u*bqof)uwtV!w-/fzm-h!owbV)we/pyn*!!>0!!fqmjh3o!B,e!p1n/!6u<b!pjmgg!!)<t*i2b!q,f!!f>q>b!i1t*)!u|b!pvmwg!!>0!!w1V/w2!!,>!!1q/f6u<t!!~u!bfpmmtgf!!|j!gf!t)mtfi!b~q!f<!*>f>m!h2o*b!!|-!1v/w3!!>+!!w*fwdV3w))mifuoh"],XE.fxaa=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jbg/p*swnV!wt!b-nfqhmbfnsj3)EE!3jfnsbvhufy<f!uv!o>j!gbp/ssnp!mwpfDdh3b!ssGf`tmphm!v<u*j!p*o1</!1w)b5sdzfjwo!h-!1w/f1d!3-!1w/V1w!<-!1\v/$1e!f-g4j4o9f1!/G1Y!B-B7`7R2V/B1M!J-U6Z8`/Q11!!-2*/11/\v1!)\v5$deffwg!j-o*f1!/G1Y)B5Bd`fRwV!B-M*J1U/Z1`)Q52d!f2w/!6-\vo!p\vj$uevfmgpjtoffs!!G-YfBhBb`nRjV!B-MfJhUbZn`jQ!3-!f3h/b1n\vj!!\v-$*e1f/g1j)o5fd!fGwY!B-Bw`VRwV!B)MsJfUeZb`iQT4m!f5y/j1Q\vb!b\vy$Ge!f>g!jsopfm!pGDYhBbBs`GR`VmBhM!J|U!Z*`)Qo5j!b2n3!/e1j\vp!w\v!$~e!f<g*jNobfn!vGmy!b-b{Czpyp/m*!Nctpppqm!\v-!y\vf$ue)fqgpjUoyff!UGbybbybGG)m5pubbup!mgGmbpbbyuG\v!!o\vs$veuffgsj!o<fo!hGjyTbibuGhmopfbmu!3+!!wyfjdq3c\vv!T\vu$fetfgggjPomff!yGjyqb!b>G,m!pzb/uN4t!pwqf!d*4o\vb!q\vT${esfpgij)ogfj!!G<yobhbjGTmipubhuo5f!mw!f+d!5y\vj!q\vc$veTfugfjtogfg!PGmyfbybjTqb!u>),y!*y!/dNmtbpnqq!)*yo-b!q1T/{1s-p!i2a/)1g*j\v!!<\v*$Ieyfjgqjcovft!!G-yebpbpUHfuyf!ttgbgnPqmmffysj3qE)\vy!b\vn$!e>f!gyjjoqfc!vGTyubfbtUgfgyPUmpfqy)juq-!!uqb*p!muGfbybuyvGs!f<31E/)1u!-;!!qu-f!t1g/g1P*m\vf!y\vj$qe!f@g!joobfq!TGeypbpbhU!f>y!Pegpgp)Huu-f!tqg-g!Ppm-f!ysj*q!!uufbypumvGsbfb3yEG)!u<-y!jqq!c,v!T)zpu!j+m!bsv*R-b!b1y/g1!*+\v!!HGyyjbqbcGvmtp!b>u!!IGyyjbqbcMvvtn!bu)bGpymbGbbGbmypGb!u<56!/s1h!c,b!**!*|q!dsSfiuuvhsoof!Msohbcqbt/.z)<!!+~!!uGtyeb)b!G>m!pubfut5g!gGPymbfbyQjjqy!fumbTpimbGebfbsy)G!!G<yGbybjGqmcpvbtu!3+!!qGpytj-q!cGvytb!b>G!mHpybjuq5c!vgty!bubbDppmoGtbpbmyfGQ!p<tQQopbtq-T!eGpypbhb!U;f!yO!oubfqyT-e!pGpyhb!b@U!fOyo!pgjyubdbfDspjoet!p>m!fo4b7q1TUefpypFhy!qmCpjpbCtbObfyhGP!o<f*-Q!uGtyeb!b-UOfuyt!eg)yobjbnD!p>o!tuptmef!4u7b1pUmfGybFbyyqGC!j<bQtuOtfeh!U=x!pO-u!tGey!b>b!GOmoppbjuu3d!fgsyjbeb!RmvpbpmCjbubzySGd!q<Gisubhnoff-M!oGbyqbtb0G1m/p2b!u>5!!qgdySbibuDhpooftMpombfqStd!quGbspbmnGfbPbqyuG-!!<Gpysbfb[GUmMpNbbun5v!mg!y>bab!D*p1o/t1p!m=f!SQdeqoGFsbbnnvfmP)q!u>3!-Q!oGbyqbTbeGpmpphb!um5p!pgCybbbbyDGp!o<t*pOmuft4e7!1,S!dQquGtseb)n!f>P!qiuu3h-o!fGMyobbbqGtm!pubbup!mgGybbbbyRGv!b<mpjsufz[TUvMcNqbjnyv-m!!G>yab!b*G1m/p1b!u=!!gOyebobFRbvnbvmmj)u!z>F!eOhofbUqiTsefptpihp!mmep-p!CGbybbybGG!m<pzb/uN!tgpyqb!b.R!vzb/mQjtupzqF!e>h!fQUuitsef!t*iopbmqeTN{jsop-i!aG)ygbjb!G<mzp/bOut!pgqy!b.b!Dzp/oNttppmqf!F>e!hOfuTtieb!s*qoobfqtTt{-s!pGiyab)bgGjm!p<byu/!Ngtypbqb!D.p!oyt/pQmtfpFqe!h>f!UQiustfet!iupbmpem-G!bGbyybGb!G<myp/bOut!pgqy!b.b!Dyp/oNttppmqf!F>e!hOfuUties!futbippmmGebNbjyoG-!!~G!y~b!b~G!m<p5bQu`5Z!UgJyMbBbVDRp`oBtBpYmGf!4+7!1zD/pQoOtgugEpj!s>!,*!!z|/!QGtypbqb!G*mQpfboup3e!aq)pgtjN!<<!5qQp`tZNU/JyM!B>V!Rq`pBtB/YyG<!!+q!pyt/NQ/Ozg!g>p!!q>p,t!/yz/<Q!tGpyqb!b*GQmfpobpue5a!)sghjc!z<N*!Q>f!oGpyebab)U!f}y}U!p*qO)fuofpye-a!)q!p>t!NQ*O<f!o\vp$ee!f<g5jQo`fZ!UmJvMnBbVNR!`sBhBcYzGN!/+z!\vz!/GQyObgbgGpm!p>b.u!!zm/vOntbpTq!!>*!OGfyobpbeMav)ngbj)!G<y5bQb`UZfUyJPMgBgV)Ru`fByB-Y!Gq!p+t!Ny-/!QGOygbgbpG!m>p.b!uy3/)O1t/p1q-!!*2O/f1o*p-e!ag)ygbjb!R<vebfmmjbudzTSudoqfGjsebbnsfh/!y>z?*!**<Q!eGoyFbbbnGvmmp)btuc!bm!v>n!bQFf!o>p!eG!y<bebfMmvbndbT)uGoyfbjbeUbfsyhP!g>g?)!u*fOye-o!FqbpntvNm-)!tGcybb!b>G!mOpfboup3e)!2</61/-1!!1+/!1O*O-b!ngvymb!b.R!vQbemojFubznSvdmq!G>s!bQnefo/Fybzn*v*m<!!*GQyfbobpGemap)bguj!!m<v6n/b1O!!+>!!OGOybbnbvMmv!n.b!)OGeyobFbbUnfvymP!g>g!)OuefoyF-b!nqvpmt!N*-O!fGoypbebaG)mgpjb!u<3*)*1z/y1/-Q.t2p/q1!*--y!fguy)bqbpRUvybfmUjbubzySGd)qbGnsvbMnbfb/yyGz!*>*!<Q!eGoyFbbbnGvmmp!b*uQ!fmovpnebaX)!g>j!!G<y*b*bzMyv/nObt)pGqy!b-byUffuy)PqgpgU)yuffUyb-b!yqGp)tbNn-v!MGbybbybGG!m>p!bOue3o)F.b2n/v1m-!!*1O/f1o*p-e!ag)ygbjb!R|v!b*mQjOufzoSpdeq)Ggsjb!n<f4/Qy`zZ*U*J<M!BGVyRb`bBGBmYpGb!u+!!nzb/yQTONg!g>p!!n>b,y!)zm/vQntbpTq-!!*mQvfnobpNe*a<)!gGjy!b<b4GQm`pZbUuJ!MnBjVoRT`NB!B>Y!Gn!j+o!)ym/vQnObgTg-p!!m>v,n!byN/*Q<t!pGqy!b*bQGfmoppbeua!)ngbjy!F<T*NQ!f>o!pnebay))!m}v}n!b*FO-f!onpbeyaT)N!*><!!QGOyfbobpGem!p<b4uQ!`nZjUoJFMTBNV!R>`!BnBjYoG)!m+v!nzb/FQ-O!gngjpo!T>N.*!<z!/GOytbpbqG!m*pObfuo!pnebay)XgOj!!><!4nQb`yZ)UmJvMnBbVOR-`!BmBvYnGb!X+*!<y!/GQyObgbgGpm!p>b.u!!yn/jOotXpOq!!>*!Onfjoop)emav)ngbjO!-<!emfvmnbbdXT*u<o!fGjyebbbsGhm!p>b?u!!*sQbeoohFfbNnbvym!)>t!cnbb!y>)!nQbfyoXpOe-!!<nebfymFbTdNT*u<o!fGjyebbbsGhm!p>b?u!!*sObeoohFfbNnjvom!)>t!cnbj!o>)!nOjfooXpOe-!!<n6j/o1F!T+N!*O<O!bGnyvbmb!G.m!pQbeuo!Fsbbnovhmf!N>b!yQTedobFmbfnev!m>!!*sQbfoohpfeNab)yg!j+!!<g6y/b1b!R+v!bOmOjbunzvFme!h.f!UOiesofFtbinpvmme!<>!!GOyebobFGbmnpvbmu!!*sObfoohpfe!a>)!gsjb!o<h*f*Nzbyy/!Q.t!psqb!o-hyffNuj)oq<p!UGyyfbUbbGbmypGb)ub!nsvbMobhbfyNGb!y>D!mQbenoqFfben!v>m!!n*bQyf)ogpyebab)Rgvjb!m<j*u*zzFye/hOftUpiqs!f-tyifpum)eqNpjUoy-f!UsbbboyhGf)NbbnyvTMdbbbmyfGe!*><!!OGeyobFbbCnpvpmm!!*fObfsompzeFay)jguj!!>|!!s*bQoOhffo!p=e!)sgbjo!h<f3NQb`yZDUmJbMnBqVfRe`<B!BjYgG)!f+b!szm/zQFOygjgup*!!>s,f!uzv/sQot!psqh!c*zQNf<o!pGeyab)bgGjm!p<b3uQ!`mZvUnJbMOBXV!R>`!BGByYbGb!M+v!nyb/)QGOygbgbpU!f>y,P!gyg/)Qutfpyq-!!*qQpftoNp-e!aG)ygbjb!G<m*pQbfuo3p)e.a2)/!1}-}.!2*/O1f*o-p!egay)b!b>R!vQbOmfjoupzeS!d<q3GQs`bZnUfJ/MyBzV*R*`<B!BGYyGb!b+G!mzp/bQuO!gmgvpn!b>T.F!!z>/!OGtypbqb!M*vOnfbo)pGeyab)bgUjf!y<P3gQg`)ZuUfJyM-B!VqRp`tBNB-Y!GG!y+b!byG/mQpObgug3p)!2>/.1!-y!/2O/t1p*q-!!*gOyfbobpRevab)mgjju!z<SedfqmGbsdbTnufo/fyjze*b*s<h!!G>y?b!b*GQmepobFub!nmvvmn)btOcFb!!>>!!GQyfbobpMev!n<be)fGmybbdbTUufoyfPjgegb)suhf!y>-?!!q*pOteNo-F!bGnyvbmb)Gtmcpbb!u>3!)O2f/o1p-e.!2</61/*1-!!+g!yObObbRnvvbmm!j.u!zQSedoqFGbsnbvnmf!/>y!zQ*e*o<F!bGnyvbmb!G*mQpfboup!emav)ngbjT!X<!6>/!1G!y+b!bOMOvbnnbv)mG!y.b!bOUefoyFPbgngv)mu!f>y!-O!eqopFtbNn-v!mG!y*bObfGomppebau)3g)j.!2</*1*-z!y2//Q1t*p-q!!g-yybfbuR)vqbpmUjyufzUSbdbqyGGs)bbnnfv/Mybzb*y*G<!!>G!yQbeboGFmbpnbvum!!m*vQnfboOpTe!a>)!gmjv!n<b*O*!z,y!/mOvtnpbqT!<-!yGfyub)bqGpmUpybfuU!bmbvynGb)XbFn!v>M!bmbvynGb!X>!!,O!emovFnbbnFv<m!!G*yObfboGpmepab)ug!jt!v|c!q*jQyOSfdoqpSeb)oghjf!!<>2!Q2`/Z1U0JsMbBoVhRf`<B!BGYyGb!b+G!mzp/bQuO!gtgvpc!q>j,y!OzT/XQFt!p>q!!m*vQnfboOpTe!a,)!gmjv!n<b2XQF`<Z!UGJyMbBbVGRm`pBbBuY!Gf!e+h!fyI/pQsO{g2g!p>!!>),.!3y//1Q!t+p!qm!v*nQbfNo*p!e,a!)mgvjn!b<O*TQ<f!oGpyebab)G!m}p}b!u*!OffeohpfeWaf)s!u>2!!Q>O!f)o.p3e/!1m!p+p!CmbvbnybGN!*<!2,Q!`mZvUnJbMXBFV<R!`GByBbYbGG!m+p!bzu/!QmOvgngbpO!F>T.F!!z>/!Omtvpnqb!O*FO!f,o!pmevan)bgTjF!<<!2GQy`bZbUGJmMpBbVuR!`mBvBnYbGO!X+O!Fy!/>Q!Omgvgnpb!O>X.!!,y!/mOvtnpbqO!F*<O!fGoypbebaG)mgpjb!u<!effemhbfdITpuso{f3j!e>b!s)h.!3>/?1!!*+Q!emovFnbbnFv*m!),t!cmbv!n>b!OQFfToFp<e!!GmypbpbCGbmbpybGu!!<feefhmfbWdfTsuuo3f!j>e!b)s.h3!/>1?!!+*!OmevonFbbOn*v!m,)!tmcvbn!b>O!XOOfFo<p!eG!ymbpbpGCmbpbbyuG!!m<v6n/b1O!X+T!XO!O>b!nmvvmn!b>O.X!!Q,e!omFvbnnbvTmX!<<!6G/y1b!b+G!mOpObbun!vmmv!n>b.T!XOTeFo!F>b!nmvvmn!b<T1X/!1,!!=m!vNnNbbTnFv<m!!G>y!bpbsGfm[pUbMuN!bfnevhmf!Imppsp{C5b!b>y!G)!b<cFty)jfqechvftI!p+s!{E2y*j!q+c!v3t/!1>*!!G,y!jbqcctv)tf!euhbfpImpGsb{b3y*G<!!<G6y/b1b!G+m!pObOub!nfvemh!f.W!fNsbun5v!m>!!>)!bNcNtb)nfvemh!fuWbfpsmuG2b*b!y+G!!3</11/*5!0,1!/b2c!t+)!fueohffjWefbssuh3!*><!!eGfymbbbdGTmupobfuj!efbeshhf!Iupbsp{m4G!b>b!y)G.!3</T1T!b+n!vmmv!n>b!XO*O!b,n!vmmv!n*bOOsXjTbXq<a!)Ggyjb!b<G*m*pQbtup!qf!e-hyffWuf)squp4U!y>f!U)b.b3y/G1)!b+n!vmMvbnbbyTG*!!>,!!QmevonFbbTnXvTmF!<u!bGpymbGbbGbmypGb!u<!DfyejhqfcIvpts!{+!!>D!ybjcqtc)vfte!h>f!IFpysj{q4c*v!t,!!ufbephmfGIbpbsy{G5!<<!*G*yObtbpGqm!p-byuf!uf)eqhpfUWyffsUub!b>y!Gb)cbtn)vfMebhbfyWGf!s>u!4O*e!o,F!bfnevhmf!Wufbspum5G<b!bGyyGb!b<G1m/p4b!u,!!t*vDcyqjjqycOvXtT+X*O1F/T3F.!)>)!!m>v!nEbyOjXqTcXv!t,!!umbvpnmbGObFbTyFG<!!<G1yQb`bZGUmJpMbBuV!Rm`fBoBhYuGi!T+j!hzo/!Q>O!gggypb!b,R!vzb/mCjtupzqS!d>q!Gzs/bQntfp/qy!<<!1GQy`bZbUCJpMpBmV!Ri`pBsB{YTGq!b+o!!y>/!QfOeghgfpI!p,s!{y!/?C>t!pfqe!h>f!Wyf/sQut<p!qG!y<bQbtGpmqp!b3uu!btpvmcGqbjbyyBG!!><!1tQv`cZqUjJyMOBTVXRF`!B+B!Y3G/!1+!!,z!/tQvOcgqgjpy!O.X!TzX/OCFtTpFq<!!>j!gz)/aOitppsq{!T<q1bQo`*Z!UmJvMnBbVOR!`>B!BmYvGn!b+X!<y!/jQgO)gagipp!s.{!Tyq/bCot*p!qm!v>n!byT/!O>t!pmqv!n<bOFt<p!qj!g3)uibppsm{GTbqbbyoG*!!<m6f/o1h!u+i!TojhhjoT!i>u!hgoyfbmb!R>v,b!mzj/uCztSpdqq!G*sobbnqfT/{zs<p!iG)ygbjb!G<m6p/b1u!!+t!vochqjjTyiCu!h>o!f)mt!v>c,q!jyy/BC!t+p!q)!2*/o1b0q2T3{/s1p*i*a!).g!jm!v<nzb/Nf<n!bGsyGbqbdGSmzpubjum!bhvsRbbebjyfgo!u;O!!1>/!1m!v@n!b*Oo!b.q!Tm{vsnpbiN)<!!>G!yzb/bQGOmgpgbpu!!<hys/bfenjbfsoGuqTd!S>z!umjvmnbbvTR!b.b!ymgv!n;b!N1</!1G!y@b!b*GombpqbTu{!smpvinab)O!O>!!>y!/mQvOngbgOp!!,<!QmOvgngbpN!<3!uGbypbmbGGbmbpybGu!!<mzv/nNbtTpTq!!>>!!mzv/nCbtTp!q,!!<myv/nNbtNp<q!!G>y!byb/CCptppmq!!q<bCjtspOq!!>3!ubbcptm)GhbsbbyeGj!f<o*ufOh*o!b?S>q!dbScytj)qhcsvbte!j+f!o*uCTy*j<q!cGvytb)btGcmbp)buub!ThbsbbyeGj!f>o!uD!y>j!qncbvyt)!bucbtp)mhGsbbbeyjGf!o<uoOh*j-T!ibuchto)fhms.b!e>j!foohujTT*i*u<h!ojfgm)!q*bOjs"],XE.points=["~v!o<j*g{p/sonp!jnubjut5p!Qnwpne!f.m!N0b!ufsmjbyd<t!)v!o>j+g!pfs{nj!Tnubouj5p!Qn`pmehf!m*WfjwfjxuNdbfuqstjsyf<Q!tvjo)j!ggpjs!n<!*n1b/u25!!.q!s>p>k!f^d!u4j!p]o^N!b3u!s]jyyj<s!uvboNjogppjsund!fnkbpus5q!)w!j>f!xfNwbjuusdjfyq<t!svfoQjtgjp!smnp!pgcm!p~b!u<!otpdjbumvfm<p!tvfosj!g+p!sfn{!jwtf!d>3!!fv{VjwTPugogjtpfQu`<m!hv!o|j!gfptsmnf!!c~p!p<mo!pvjtufvVmwpBtsfssb!z+<!!zbbusussBjfc{vjutf!!>w!ffd{4j!TqupotjjpuQj`pmoh<!!|v!o*jzgbpsssnB!fc{pjpTmf!tvvt)f!Dgpjm!p<so<p!jbuujutspjQcwvnu!f+!!wyfjds5u!bdNpomppjsu<d!fwkbpsszqj!o>h!!owpfjdu5j!twpDQp`mmphs!<<!obpujuusjjtcpvQuwfn!!w+f!dy3j!sbuVbwNPxgfgjtWfmuf<e!pwnb!s>z!joophj!uwjftdp3Q!wwnP!g<g*t1f/u2<!!-veofjngsppsgnt!ocbpspum)!5qdjfdwl!j>o!ho<p!jbuujutspjQcwvnu!f5!dwffwd!5<!*qojpdjluDjptmppqs)<4!dvfowj!g>p!senf!ngsmppgbtuo!btsju{!f4<d!fvwo!j~g!p<s*nu!fgtmgpgbPuw!Vsbf)t3pdmfvwu!j>p,o!<u!fvtogjggPpws!n|!!c*pzpbms!svBtwfVTfjt{vf)B!sgsjb!z<<*!ubfutugsgjPcwvVuvf)!3gdmfpwb!u>!!tujf{tfgBgsPswb!z~<!!<cspppmmp!dj!t>Q!fssptmqpfDdwu!j|w!f*NsbpumspjDyf)tnvb)u!5g!jn!*f!t|m!fs!f~u!v<ssop!mnp]D!l3d!j^q]!!>4!!s^p!m>p>D!w.!!|2!/*1h<o!j~l!dwjpqj)e!!gnjb!j|o!)*","~$!e~f!g<jsopfm!pVDTfFt`vNgBgQj\ve!!v>o!jsgppmspnD!hwbfsdG5`!mehj!g|g!vfttfm<f!!v~o!j<gsppsmnp!Dgwm!p>b!us!ppmqpbDdhjbuszG<`!mvho!j<gepssbnd!tgjmep!b*u1!/b1m!q>i>b!Ubf/tsup<m!pvDofjtgvpgsgnj!ec)p!pgmj!!v|t!f*Dhpomjplsd<j!qw)b!sgzjj!o<he!swbfddt5j!ew!D*pumtpfsU<b!ivqomjbg!p=s!nb!/cspppmmp!Dqfjtdvlgjgojhe<)!!vgojj!g\vpgsjne!ocfp$p\vm!!~e!j<t*dwbvs!e-Tqfbmnf)dEu3bfcsmvfu<y!f\vu$!j>o+d!msvpemfp!D=fctmvpgpgnjTef!m<fudfutjgwgfP/wg!t>/,i!fwbve!?<\vf!mvbodjTgwpvs!n+!!wefsdp3p!DvuwoTjdpbQm`fm<h!!w>b!swzvj!o3hd!fwwf!d|3!!*wfPmgcgbtufduf<m!f\vT$ejsgb!detfjgejao!f}e})!VhToFj`lNdBjQq*a\v)!!vgojj!g\vp*sQnB!Nt`bFnTqVm)fesf3oEj!gnfbeq!<g!j\v$$\vf!o~e!j<g*\vz!uwjpdjbeq!pn!b+j!ob)/*f!t|v!g\vg$jjeo!d-m{vzeyf/!f=tcvmgpgpjneT)f5mdffdwu!j>w!fs/pgmtp/Dcfptevzg?g\vj!ew!f|d!5f!temjfg!g~v!t<f*Dzpumjpdsb<q!pj!g+!!)ba/qsjpdmlpjDowh!!-%{%z!yv/tsfpDmppmDpws)*5!d|f!we!j>g!gsvptmfpD"],XE.bokeh=["?$TjWoodfmfvsedfT!u=jcm","~w!b\vsgzjjeoohf!$w\vf!d<31!/w2V!w><!!bv/osjpgmppsDnh!bcspGp`mm!hv!t\vfBEIfQqMuBi`<F!EvJoSjSgFpWsPn!!gtfbengqjm$f\vs!3<E1!/u2D5p!m0p!sm<p!dv!o>j!gsppsmnp!DthbbnsqGm`fmsh3!E<!*u5Esfvqmucig<p!ev!o+j!g*pusdnf!scspppdmu!dvftqftHb3!e+<!!*v5o/j1g!p-s1n/!1g)m3pdbfuw!)u!i,s!fztyi/pwmVew<!!-vsopjmgppDsun)!Eg3mfpsbvuu!ynfbuy!c>m,v!sm<p!dv!o<j*g5pssvnm!cggmppeb!u+!!b*qufdsfusvsspfd<u!dvfoqjtgbp!s+n!!*g:m3p/b1u.!!o-f:b3s/D1m.j)q3<d!fvwo)j!g,p!szny!/gwmVpwb!u-!sgpbmspDDmuj)qE<3!fvsovjugypfsun!!>g,m!pmbpud!!g<p*d5vstv<m!cvgopjeg!p+s!n*!ugdmfpsbsup!dbutdqffqdtub<!!+d!p*o1t/u1!!g-m5p/b1u.!)V3odqfbwd)l!E,p!xzoyt/dwbVmwf!!->s!p3m6p6D/u!)0E!33f6s7v/u<y!fdup!o>t,u!!mwpfdd!4<!*Q5bsdvlmGcbgdpuep!s+t!!*>u!dwffsds4p)d3u6d7f/q!t+b!!3+6!7*/:!3+/!13!6-7:/3-/!13.6)73/d!f+w!)3!6,7!/z-y!/3w6V7w/!*-<s!pdmppoDtuu)!Ew3ffds5v!uVyofqub!d>l,G!bmdpudp!s<t*!5>s!vVmocqgbpdel!E+p!x*outddfbsmsfp!d0u!dwffqdt5b)!Q+b!d*l5G/b1d.u!p-s1t/-1!)23/d*f<w!)g!m,p!bzuy!/vwoVqwb!d-lsSpHmCpBDUup)EEf3qfusiv)udypfout!u>!,j!om!pwdf!d<5*!5ws*v!m|c!gspfeu!v+s!o*!uedpfus)swp-d!uVdofqqbtdbl!G+b!d*u:p3s/t1*.<!!-~:!3g/m1p)b3ud!fhwf)u!E,f!qzuyi/)wdVpwo!t-us!pjmop!Dwuf)dE33!ftsdvsufyffouQ!p>t,j!umjppdo!*<!*|5!ssvfmucvgspoe!!v+o!q*buddlfSsHsCpBdUupdEffqqtubi!)+u!f*y1u/v1s!f-35E/)1u)E3fdqfuwi)-!!,t!dzsyf/fwoVQwp!t-jsupjmppoD*u*)<E!3~f!sgvmupybfuu!!q>f,s!tmqpfdd!u<j*w5fsEvfmqcugipUep!W+j!f*xu[d)fdspsoptduu!djfoq!tgbm!p+b!u*!:j3o/w1D!m-j:q3[/-1!)d3pdoftwu)!!j,o!!zgym/pwbVuw!!o-fsbpsm-p!Ddup)oEt3uf!sjvou!ygfmup!b>u,!!gmbpsd*!!<|*!8ssfvumvcsgop!e)!o+f!b*su!d+f!sgsbpsd*u!d0f!q)t)bg!b+s!!*.5!/o1f!b-s1*/!1+)!3jdofwwD)m!j,q![z!y./!wgVbws!*-<s!p~m!pgDmup)bEu3!fhsfvuuWyjffux![>),d!pmoptdu!!<j*o8!sgvmmpcbgup!ee!f+q!u*iu*d!f|s!sspfduuvdsfoq!tqbf!s+t!q*f:d3u/j1w.f!E-f:q3u/i1U.p)W3jdffxw[))!e,f!qzuyi/-w!Vowf!b-ssDpmmjpqD-u!)gEb3sfDsmvjuqy*f<u!!~>!,w!pmjped!!n<b*j8os)v*m!c|g!pwef!d+3!!*eupdgfcsmsvpsd<u!dwffqdt3b!!b+t!q*f1d/u1d!p-s5s/f1d.u)!3>d!fwwf)d!3,)!2z/y1/-w!Vbwt!q-fsdpum*p<D!uj)gE!3)fvstvfuEyffquu!i>*,!!|m!pgdm!p<b*u8!swvjmfcxg[p!e>!!+h!f*uuWdjffsxs[p)dhufdufEqftqbu!i+)!w*V:w3*/*1<!!-g:m3p/b1u.!)g3bddfuwp)s!!,>!!z)yg/pwdVvwt!!-,s!pwmjpfDxu[)*E<3!fespvgucymfvus!!>>,!!wmfpdd3!!<)*d8msbvnmqc)ggpbed!u+p!s*!u+d!fbsqsfpsduuvdsffq-t!b.!n+b!y*c5m/v1s.-!!-n1b/y1c)m3vdsf*w*)<!!,~!!zfym/twfV!w|!!-wsfpdm5p!Duuf)yEf3mf!s>v!uuyffyuu!v>s,f!3mEp)du!E<f*q8usiv-m!cwgfpde3!)+w!V*wu/dyf-s!s2p/d1u!d.f!qwtVbw!/+z!***:<3!/g1m.p!b-u:!3b/m1q)i3bd<f!wj)g!!,)!vztyf/Hw3Vew*!!-|s!pbmmpqDiub)!E>3!ftsnvpupyufiut!u>f,q!)mupids!f<t*i8psmvem-c!gupies!f+t!i*pumdef!s,s!p1d/u1d2f-q!tubf!y+f!m*/1b/*1<!!-~1!5f/m1t)f3!d|f!wb)m!q,i!bz!y>/!wuVfwy!f-ms/pbm<p!D~u!)eEp3gfcsmvvusy!f>u!!w>f,d!3m!p)dd!m<b*n8qs)vbmmcqgipbe!!++!!b*qufdsfusvsspfd-u!d.fnqbtybc!m+v!s*-:!3n/b1y!c-m:v3s/*1*)<3!d~f!ww)f!d,3!!zeyp/gwcVmwv!s-:s!p>m!peDpug)cEm3vfss!v+u!y1f/u:!<>!,w!fmdp3d!!e<p*g:csmvvmsc8g!p>e!!e+p!g*cumdvfss!s+p!d1u/d8f<q!twbf!d+3!!*e8p4g/c1m.v!s-56!2>/!1e)p3gdcfmwv)s!!,+!!z1y//5w<V!ww!f-ds5p!mdppDmu!)>E!3wffsdv5u)y1f/u1!*><,!!dmppmd!!,<>*!:usfvymucvgspfe3!E+)!u*Dupdmfpsss-p!dwuVdwf/qytzb*!<+!!d*p6m2!/,1>.!!u-f8y4u/v1s.f)33Ed)fuwD)p!m,p!sz-y!/wwVVww/!y-zs!p,m!p)Dwuf)dE33)f1s/v1u-y!f1u/!5>*,!!+m!pbdt!q<f*d:usdvpmscsgfpdeu!*+!!+*!uedpfgscsmpvdsu*d<f!qdtpbm!!+,!>*!6u2f/y1u!v-s8f43/E1))u3Ddpfmwp)s!-,!!wzVyw//wyVzw!!,-!s)pwmfpdD3u))1E/32f6s-v!u1y/f4u8!*>!,+!!mbptdq!f<d*u:dspvsmscfgdpue*!!++!!*eupdgfcsmsvpsd*u<d!fdqptmb!!,+>!!*u8f4y/u1v!s-f632E/)1u.D)p3mdpfsw-)!!w,V!wz/yy/zw!V,w!!)-wsfpdm3p)D1u/)3E:3-f!s1v/u3y:f*u!!+>!,b!tmqpfdd!u<d*p:sssvfmdcug*p!e+!!+e!p*gucdmfvsss*p<d!uddpfmq!t,b>!!+u!f*y8u4v/s1f.3!E-)6u2D/p1m.p)s3-d!fwwV)w!/,y!zz!y,/!w)Vwwf!d-3s)p.m1p/D4u8)-E!31f/s2v6u*y!f+u!!b>t,q!fmdpudd!p<s*s:fsdvum*c!g+p!ee!p+g!c*muvdsf*s<s!pddpumd!f,q>t!bu!f+y!u*v6s2f/31E.)!u-D8p4m/p1s)-3!dwfVww)/!y,z!!z,y!/)wwVfwd!3-)s1p/m5p1D-u!)1E/31f*s!v+u!ybftuq!f>d,u!dmppsds!f<d*u:*s!v+m!cegppgec!m+v!s**u<d!fdspsmp!d,u>d!fuqftybu!v+s!f*36E2)/u1D!p-m8p4s/-1!.w)V3wd/fywz)!!,,!!)zwyf/dw3V)w1!/-4s8p-m!p.D1u/)2E63*f!s+v!ubytfquf!d>u,d!pmspsdf!d<u**:!s+v!mecpggpcem!v+s!**<u!ddfpsms!p,d>u!duffqytubv!s+f!3*E8)4u/D1p!m-p6s2-/!1w)V3wd/fywz)!!,,!!)zwyf/dw3V)w1!/-3s:p-m!p.D1u/)3E:3*f!s+v!ubytfquf!d>u,d!pmspsdf!d<u**s!v+m!cegppgec!m+v!s**u<d!fdspsmp!d,u>d!fuqftybu!v+s!f*38E4)/u1D.p!m-p6s2-/!1w)V3wd/fywz)!!,,!!)zwyf/dw3V)w.!1-/s2p6m-p!D.u1)/E438f*s!v+u!ybftuq!f>d,u!dmppsds!f<d*us*v!m+c!geppeg!c+m!v*su*d<f!sdsppmd!u,d>f!qutfby!u+v!s*f:33E/)1u.D!p-m:p3s/-1!.w)V3wd/fywz)!!,,!!)zwyf/dw3V)w1!/-1s-p!m.p1D/u5)*E!3+f!sbvtuqyffduu!d>p,s!smfpddu!*<!*+s!vempcggcpmev!s+*!<*!uddpfms!s,p>d!uudffyqutvbs!f+3!E*)6u2D/p1m.p!s--8!4w/V1w./)y3zd!f,w!))!w,f!dz3y)/.w1V/w2!6--s!p1m/p4D8u*)!E+3!fbstvqufydfuud!p>s,s!fmdpud*!!<+*!sevpmgccgmpves!*+<!!*dupdmf!s,s>p!duufdyfuqvtsbf!3+E!)*u1D/p1m!p-s5-/!1w.V)w3/dyfzw!),!!,)!wzfyd/3w)V.w1!/-3s:p-m!p1D/u3):E*3!f+s!vbutyqffud!u>d,p!smspfdd!u<**!s+v!mecpggpcem!v+s!**<u!ddfpsms!p,d>u!duffqytubv!s+f!3*E6)2u/D1p!m-p8s4-/!1w)V3wd/fywz)!!,"],XE.glitch=["?$TjWoodfmfvsedfT!u=jcm","~v!o~j!g<p*swnV!wj!o-uf!hcbznqj<)!!vEo3jfgspvsuny!ftub>nsqpmmfpsD3hEb!sjGn`bmhhf!<|!!vfotjmgfp!s~n!!<txbpnoqtm!f,ss3pEm!puDEhjbtsqG<`!mvho!j>g!psspnm!pgDmhpbbsuG!`bmnhp!v<o*u3</!1v+o*j*g/p1s6n+!egfmfptb!u+!!btozh-meff<f!tv!o+j!gtpys)n3!dgfmwp)beuo!btsf)f5ed<f!wv+oujogvppsnnb!+g/m1p1b3u!!>t!fxfpeo`ty!<5!dvfowj!g<p*sbn/!bghmdp!b-uc!/tcfdf!e-`hz/<b!hvdo!j-gsp/ssnd!)g5mdpfbwu!!>e!jstpumppsDuhjbpsoG``ym<h!!v<o*jugfptsgng!pg!m.p!bqu!!-efjhtbunpjs)uEj3pfos`vzu<y!fvuo!j>g!pcsdn!!5gdmfpwb!u<!*dqp!m-`fth<b!nwjb)sEz3jfoshv!uwyffdu3!!>w!Vbwh<d!!d5pdoftwu!!<g*mupfbtug!gVpo!q,b!dql!E-pfxhobtndjb)mEf3!f>s!v3u6y6f/u!!0>!!3s6d7!/5<d!fdwp!o<t*u*!fwmfhdo4b!)Qobjdtl!G-b*dfumphsotb!)>t!pwdf)d34d)f3w6!7+/!!u+o!v3p6n7b/!!>+!!u3f6t7g/g-p!!336d7f/w!!+<!*3/6670/e-f!f3t6)7+/z*`<e!fdfpto+tmub!nwsfpdo5>!,Vzo/qqb!d<l*G/b6d0uepfsftt!)>+!yV`oeqfbfdtl+Empbxnostpdob>m,fy!/0q!!w~f!d~5!)<Q*byd`loGpbjduusppsutt-j!e2!/,*!<y!/gqm)p!b.u!!/v2o!q>b!dyl/SqH!C|B!UfptEmffq!u~i!)<dyp`ootpuj!ujsop!uwtfjde5>!yw/*q!!||!*s/f1u?vzs`oe!fefptu))gwj-!!|V!o*qebfdfltG+btd`umppsdt.*z<`!o~p!jgumsppbuut!jseb?oye/)qw!f%d%3!!td`pm*p|d!,szf`uovpsjou!sgpsubtdjue)=tyj/oq))egpju!)~d!p~/!y<zz!`-owpfjdu3s)p2u3t/j:e9!:>9!-z8/9q/!3|4!4f*t*m*f!!+~!!5<4*8z6`9o/p6j5u6s4p*u<t!j~e!!w,p!jze/!qn)b!j.o!)/*2!!|>!!jzg/!q)!c|z*q/=12?*y!`|e!fwfftd)3g!jq!!|>!!*weVfwf<t!+gtm`pmbpud!.yyt`!o>p!jgumspppust)jhem?`zG/sqb!h%D%p!pts`em/pyd!,0y!`1o/p6j*u<s!pgumtpjbeu=!zz/tq!)>g!jg!m<p*p*se)fhfmt`+GesfbfhtD+pqp!s-eq/tzj!E0u!)1!/E63*f<s!vgumypfbuu)!ioupqsfnEbpmU!B>C!HvSolqdb"],XE.bloomBlur=["?$TjWoodfmfvsedfT!u=jcm","~w!b\vsgzjjeoohf!$w\vf!d<3*!bw/Vywj<Q!fvsovjugypfsun!!-tnbvnTqumifhsj3fEx!!d0p!mnpvsTUfftyvugvgsjfe<)!5vdofjwg!p>s!ns!pwmfpdD3h!busfGy`Tmjh{!f\v<f!tvmofj$g\vp!s<n*!1w/f2d!3-!nevjTsufidhujjfpxo!<0!!gnmvpTbfut!vhgbgvjtet)j5bdofQwe!g>)!jsop!mgpmDphbbus!Gy`-m!hj!o\v!BgImQpMbBu`!FtEjJhSnSbF*W!P|!!gsffeugvjs$o\v!!1~/!4<:x9!:+5!!1+/!3f!y>q,)!.n1v/T6u!i+h!jyf!x+!!<yx!!0+!!)*t3jfhmnqbn!b+t!!t,j!h2nfbm*q*n!b0t!)t!j>h,n!bn<v!T~f!twvpgjgej!en!b<jcoh)s*/!*|u!fwtfgdg3P!wjvo!w.T!jw{Vfw!!>-!f2s/v1u!y0f!UusfpymTpjd{)fE<3!fgsmvpubyuf!ug!T>j!h3nfbm!q>n!bgtm!p4bduf)wT!J<HcNhBs*/<*!ugfmtpgbguP!wxvf!j,h!iwuVTwv!n-!f>s!vhubyvftUtsjpbmopQde)gE)31f/s1v-u!ygfTuj!h>n!b2*f<m!qwnfbdt5!!4udffywu!v<syf!Q+j!yf!{>j!Tuwfoyju!v+s!fo3pEj)uddpfmspjseU!f>y!uuvfstfg-g!PwwVvw!*3<d!fwwf!d<4*!benjhgjgTvgt!f-Tyv)ng!e>Q!oubfjytutvvsbfhQ!j>y!/xs!hucb!p+m!gx!f<j*hji)uuTbvpnm<g!!g>p!sy!!)ujbopum!gj!!|>!!*2,<,!jj!!<=T!VLJFESBOSF`M"],XE.bloomHighPass=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gbpisqnm!bt!b-nmqfmyffsu3!E-!supEmjpgDguvvtqfu<v!pv)oyjjgnp!s>n!!sgpmmppbDuh!bmsvGn`jmohp!t<j*uwz!U-iisufetjiXpimuep<p!nvto!j,g!pesmnp!igtmfpsbiuU!ztunjptppuoijXnjvemu!i-<e!mwpbistzfjsoihU!zwufjdt3p!owjVnwv<m!)wqpfjuet!inubpjpon)t*!!>|!!bwifqdm5b!!uufbypfmmg!!><!*u1f/y1u!v-s1f/31E!)-u1E/j1g!g-v1t/f1-)!5wdVfww*!<>!!wsfpdm4p!Dmuvvnqbu!v>p!!w5fddf4w)!1</*3b:n:v-m!!1-/{6z9y8/-m!f1y/f2u2)5u*p<e!!g>m!pwb!u"],XE.bloomComposite=["?$TjWoodfmfvsedfT!u=jcm","~w!b<s*z*jwoVhw!!w-f6df3s!vwuVywf<U!svvomjcg)pEs3nf!stvbunyqfmuf!s+3!E*!1c/m2v!s-UsfpymupvDsufo2j<U!nvpopjmgcp)s5nd!ftwb!n+q!m*f3s/31E)!scpmuvdsbUGfnypupvmsCfq3s<f!mv!o,j!g*pwsVnw!!t-b5nfqsmvfusy3fEU!scvmmvcs)UEf3yfusvvsufy4f<u!!v+o!j*g1p/s2n!!-tsbpnmqpmDfuso3jEU!ncpmpvmscU)f5ydufvws!f+5!<*!5v/o1j)gsppsund!btGbnnpqpmmfCsq3sEf!mc!m,v!s*UwfVywu!v-s4ff6s<v!uvyofjUgspvsmnc!)tEb3nfqsmvfusy3fEu!!e+j!s*u1U/f2y!u-vsspfm<p!DvuoojjgUpnspnp!mgcm)p5bduf!wc!m+p!p*n7T/u1s)fsophuudib<G!nvpopjmgCpqssnf!mg!m,p!b*uw!Vcwm!p-p3nfSsbveujyvftU<s!vvmocj)gEp3sfns!vwufydf4u!!c+m!p*p1n/U2j!o-usDppmmppDsu<o!jgUmnppbpum!cm)f5sdqfCwm!p+p!n*G9b/d1u)pssp)uddpboGtnup!pjmoC!qgsmfpmb!u,!!g*bwdVuwp!s-*2!f|s!vgumypfbUus!vnmjcs)sEp3sfGsbvduuypfsu!!>+!!2*/13/!2.!!-gsbpdmuppDsu<o!jsUfnupvpsmoc!)n5jdyf)wg!b+d!u*p1s/-2!)nsjpsusdpbsGGnbpdpumpCsq-s!fcmm)p!p+n!Sibuehjovfts*u<T!n~p!pwmpcj!e>!!nsbpjmop)D*h!b|s!Gh`m"],XE.highlightHard=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jsgppmspnD!fthbenfq!m>f!ss3pEm!pjDnhbbhsfG<`!mvho!j~g!p<sens!bwdftdj3e!!u|f!y*u6v/s1f!T=j!{ffh<e!fv)o!jggjp!s<n*!fghmepfb!u-!1f/e2h!f-X:j/e1u)iq<f!uvtoijugpppsnnt!!w>f!df5h!effe!h<f*Dwp!m+p!sw<!!,w!bis!z+j!oih)!uwsfrdt3!!>w!Vfwh<e!fg!mupbbpum!gh!f<uuDiphmj)Swqfpdu3,!udiphpjsse+*1!/|3!,sufiuhvjsSon!puufuypucv,sufg3fEM)qjpnub.hufg-f!md+p1p/s3e.*u/gbf<M!n~p!uwuppjce.!!n>b!jio!)u*b!p|m!gw!f<du3i!hdjdS!n>p!uwuVpwc<,!ngpmupubpuc!+d1f/o3u,fusg!f>M!nhpfuuuDppcm,)udidh*j<S!qgpmup.bqup!ue+y1!/>3!.fueghffMXqjpeuu.i!!>0!!wu!fuybupvmsgf!T<j*{*fz/ey!<-!ygem)p3bduf!we,zd!d>)!mfpeDhuffXhj!e>u!iu!i0h!juSfnypuuvuspfcT!ju{bfp/mzg<!!<w*f*dz3e!!d-p1p/s1e)<3!dgfmwp,bdud!)umppqDMuffghu!!>>!!nhpfuuuDppcm!)udbdp,mwgf!d<3*)*.zeey!--!y.ee.z)*3*d<f!wg,mdpdb)um!puDpuqf!h>!!>h!fuugDfpMmn)pdudu,pwcf!du3b)p1m/g1!-<!*.*e1z/*1*!<-!ygem)p3bduf!wu,pdqdS)jmhpiDuu!f>h!!h>f!uuDiphmj)sd!du,bwpfmdg3!)<e*y*-1!/.1e!z-*y*e<.!)g3mdpfbwu,!dmdf)gmup!D>u!fh"],XE.highlightEdgeDetection=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gep)s5nd!ftwb!n+q!msfpsm3pEd!!j>n!bshpfm<p!DwhbbsszGj`omhh!!w<f*d*33!gwgVjwe<!!-v2ogjggjpes)n3!dwffwd)3i!uuhfoyfTmj!{>f!<e!!vuobjpgmpgs!n<!6w/f1d+5*!sd/p5mdp!s.<!!sw/p4jde)!!n>b!j3og)g*j!e|!!uwbfpdm3g!!j<o6w/T1j+{*fs!/>3!d2!/.1!!s0/!2udf)y!T>j!{2fg<g!jwef!du5b!pvmwgP!g<g*txfzu/!u>f!twgfgdP5w)v2!/.1!-w!V1w/!1--f!h1b/n1j-)!E23/f1s*v!u+y!fwuf!d>5!)5jdo!w5Tdjf{wf!-<!*jxozw/Tujf{tfg*g<P!wwvf!d,5!!wdV2w!!>-!fuhfbynujv)sEf33fEs)vjunybfhuf!->!!w4Vdw!!5,d!fvww!P<g*gztyf/uu/fytzg*g<P!wwvf!d.5!!wdV3w!!>-!fuhfbynujv)sEf3"],XE.highlightBlur=["?$TjWoodfmfvsedfT!u=jcm","~$!e<fngvjToufi!hNjBfYx`!S0B!EnJvVTTf!t5v\vg!gwjbes!z>j!oshp!mwpfDdh3b!swGV`wm<h!!v~o!j<gbpusmnf!et!b>n,q!muffst3gEg!Pjwnvb!h<f*<x!!v+o!j1g/p3s)n!!>w,f!dn3v!TuufiyhTjjf{xf!<<!*vxo!j+g!p*s3nf!mwqfndb3t!!e,j!s2ffdmuqjnpbot<)!)v!o>j,g!pnsvnT!fgtmvpgbguj!es!b<e*juvftt<g!ggPmwpvb!u.!!hwbVvwt!t-jfbhobQnejg))Ej3of!sgvmupybfuu!!y>-!!3jfom!qgnmbptb!u5!dtfjwh!n<b**u!f|t!gsgfPuwvvs!o,!!1w/V4w:!9-:f5h!b+n!jf)yEq3)f.s1v/u6y!f+u!!y>!!+2!fym!q0n!b)tt!j5hdnfbw!!+<!*ttjvhjnebb*s*!!-0y!/tujfhtngbg<P!w~v!)wgpejQeo!bnjbtjtov)b*h!!|>!!wxf!du3b!pjmogw!T|j!{*f,!,>j!!2</T1V!J0E!BuSf`yYTBjN{!f><=!!gjm!p<b2u!!>x!fjj!huioujT)v!ns!p>g!!h<bbvutmtfjeb!o>Q!eugf)t1g/g1P-w!vs!b3edjfvwt!*<<*!TwVfJdE5B!Se`jYgBgNv)tufbTpvmng!!>0!!utfvyjuevbssf!3+E!)fj{njbThwfo-j!!w+V!wo*p!j+u!dxffsjjhei!u>T!vbnu<m!fwef!d3"],XE.highlightFinalBlend=["?$TjWoodfmfvsedfT!u=jcm","~w!b<sszpjmophD!mwbfodj3g!!w>V!ws<p!mvpoDjhgbpssGn`!mthb!n<qfmvfmsb3WEf!hjenfb!h+f!<w!wv!o+j!gipushno!ftsbunTqfmhfesf3!E>!!fsephmfpUDfmybuovjsgf!25<d!fvwo!j<gsp/s*nw!Vtwb!n-qfmhfbsn3jE)!Ef3efhsfvUufyyfuuv!s>f!3w<w!!vuobjpgmpgs!n<!xgpmmpHbfuh!effe!h+f!T3ufsvfmobhWufih<e!fv!o,j!g2pfsvnm!bgWmfphbeuf!!f>e!hffvHmmbpWxf<h!ewfp!j5ed!fnwb!j<o*)w*V!w|!!-w3ffds5v!ufyefhUffWhbemfv)fE23!f>s!vuufyyfuuv!s>f!33Ef)vfmebhWffUhfeyfu!v5sdff2w-!!<w*Vw"],XE.fixColor=["~b!u<u*s1j/c2v!u-fe!fwnfsdp4g!tboQbpstuj)u5jdpfow<!!+\v!$yjjosdumbvNexff!j=WjmofteupbNovd!j+o!hy/jwstu/biNfubdef?k\vp!svQovj!g>p!sonp!jnubjut5p!Qv`Nmphe!f\vmgWjjefoxfN$b\vu!s<j*yo<p!jvuojjtgppQsbn)!4ndbfuw5!!>v!NoppejfumjNtbpuQsmjbyd<p!Mvwo!j\vggpjseno!fn$b\vu!5<!*vyQ/swpVkbf!d-u*N*b1u/s2j!y-<w!V\vb$)j4gd!fNwB!Y+`!CyPjYs`uDbMNJwQVQvF)S3!d?f!w1)\v4!dwfbws!z>j!owhV!ww!f\vdQ4J!MwDX`pWsVm!egQfpetgjju$j\vp!o\v<*!O\vP$JfUoDeFjSgJ\vE!`\vQ$JjMgD!)eeffgojjogffee)!DgMjJ$Q\v`!E\vJgSjFeDoUfJ$P\vO!*<\v*!*w1b/s2z!j-oehf!nwsfpdg4t!owbMspud)b5mdQfpwt!j+u!jypjos<u!b\vN$mjfgeepfNgv!)V4Wd`fDwM!J>Q!\vo!pbjuuujstjpcQveumfs!pwXfwd!3\v!1b!V?w!<S!FvQoQjJgMpDs`nY!PnCb`uY4B!Nv!VgwjN$b\vu!s\vjgyj<e!owfb$s\vz!j<o*h*!1w/f2d!4-!ewfVnws<p!g\vt$ofboseuj)g5\vd!f\vw$!f+o!eejfgd\vo!bwuptjoeJ!ynjbsjuob)N*b!)|4!dwffwd!4>!!uesfbnostpggptsonbfseu!!>\v!HwOfJdD4O)BbUQTpOtJj`uFjTpVo!*g<f!e\vg$j","~v!o<jsgppmspnd!!w>f!ds5p!mdppDmhpbss<G!`\vm$hj!g\v!?NzBeYp`cC/PtYg`/DyMpJcQqQjFmSd!=?!!f1e\vv!mwdbosjz$j\vo!h\v!?wzfedp4c!/wtXgp/sompejQupdtfjsujjEpqoj<m!d\v=$!ffoeevjmgd\vo!j\v$$\vj!g|!!e*f)gojjobfne!)eDjMpJwQ!`\vE?JeSbFfDiU/JtPgO/*y\vp!cwqbjsmzdj=o!hf!ewvfmdd4o!jw$M\vp!d\vb?meQbpftij/utjgp/oo<p!j\vu$djfgsejfEgq!jVmWd`=D!MfJeQv\vm!dwobjs$z\vj!o\vhg!jwefodf4$!\vw!V\vwg<j!e\vo$f"],XE.shadowMap=["~0!0<!o$pQjSuFjGtJpYQ\vw!nv!o+j!gypjssnu!bnNboup5j!undpfekfpmsWqj!f>x!Nobpujsujjyt<p!Qv`omjhg!p\vsgnj!enobfu$5\v!!q<s*pekffndsupjgptooNbbsuus!j+y!<y!jbsuuubsNjmcfveupfn!)w4fddf4w!!q>p!tojpujjupjot<p!QveomjsgppXswn!!\vc1p!p?m!!SvFVQtQfJJMoDt`uYbPoCd`fY<B!Nb!ugujs$j\vc!v<ueff!nnsbpug5t!obbNsbuu!s+j!yyJjostuubbNoxdffjeW<m!f\ve$pjng!!>N!BoYp`jCuPjYt`pDQMwJnQ!Q5FdSf!w?!!~1!\v<!evfonjsgppgstno!bnsbuu!5+!!nepfedfombNubtuosJjyyj<s!uwbbNsbz!j>o!he!fwnfsdp4g!twoXbpssum!e|Q!p*tfjduojbpuot<o!J\vf$tfVove)j!gg\vj!!\v~$!e<f*g1j/o2f!!-V{TzFy`/T*LeJfOoOoJjOlHt\v!!+\v!$fetfsgfjwoofJ!yCjPsOuFb`NUeFoYjUcV)S)F5\vd!fvwo!j>g!pesfnn!scppgptmo!bvsVut!f<Txl/juoiohjjofhX<o!j\vl$tj!o+d!myvfeufs!f=Wtoljjloto!j+o!hX/uwbtN/fiofpbce!?>\v,!!webfsozojjolht!!w<f{d/4u!iwhMjpfdXbomjQlptt!j+u!jypfou<s!fwWpojjel!tn!b+j!o[)u*b!N|f!owpfcd!5>!,u!sebfootogjplstn!f<ez!/>u!iwhfjdf5X)oqjplttj!u+j!pyof-u!s2f/W1o*j<l!tw!M+p!dZbumbQNpftojpucj!p>o,!!>e!fwofodj4l)tq!p<tyj/uujiphoj*f<X!ojjgl!t)!v+V!tyffTulsjfoWoojjolht*!!+|!!YnubbuN5f!ocppco!f>N,b!ueYf!o>o!jhlftu!C<p*o1f/N1b)u5sdjfyw)!t>l!jeofJoooejflyt/!y5*d<f!wn!b<ue5f!ncsppogftNobbusZu!!>+!!hyfjusCupboNfeNobjucs!j>y!)ytflujsofJWooejflyt/!z5*d<f!wn!b<uy5j!scupboNfeNobjuc[!!+>!!yhjfsuuCbpNoofjNlbtu!s+j!yf)ttslfjwooJJoyejfsyu/b{N*e<o!jncb!u>5!!ycjpsoufbNNboujXl!t>!!<hXfuubCNpfoofpNcb!u+s!jxy/)utilhjjofJXooejflyt/!x>*,<!!ynjbsuu5b!NtoljjlotN!b<u[sujbyN!f>o!pncb!u+5!){1//u1i*h<j!ftXlojjolNtb!u>s,j!yy!j,s>u!btNlojjolXtf!j<hZiuub/Nyf!o+p!cc!p+o!fzN/buuiYh<j!ftXlojjolNtb!u>s,j!y","~0!0<!*${Q/SeFsGpJpYD\vh!b\vs$Ge`fmghj)oBfC!HDSMpJUQi`uEqJfSEFlDdUbJqP!O>\v!!swpbmspzDjhobhs!Gw`fmdh4!!\vw?Mzpedpbcm/Qtpgt/jyupjcpqoj<m!d\v=$!jfoedvmmvdeofj!$=\vq!b\vd?lzjeophc?/\vt!g\v/$ojpojdumdvfesfj!E=qdjmmjdq=E!jfsefvdmudjopjo$/\vg!t|/!i*f)boej?b\vn!!\ve$jjpowd!m\vvgejfe!o=fd$m\vj!q<coppyj/ugjtt/piQfebmes?p\vX!w\v!$4jdgf!wN!BhYo`jCzPsYb`wD!M\vJ1Q!Q?F!S"],XE.reflector=["~b!u<u*s1j/c2v!u-ft!pwqf)d54d!fqwp!t+<!!yvjosjugbpNsmnf!enpbnu!5+!!uyfjysuuvbsNfxNfbjuws!j+y!<y!jvsoujbgNpospnj!undbfuk5p!snqp!e>f!moNpbjuusjjtyp<Q!`vmohj!g<p*s1n/!2n!b-ut5p!qw)j5fdxfNwb!u+s!jyyj<s!uvboNjmgfpespnn!!n+b!uy5j!squsbpNkffsdvuujypfouN!b>u!swjVyw<!!|w!b*s)zojjobhn!!wefjdp5w!!w<Vw","~v!o<j*gbp/sfnt!bwcf!d-4*!sdppmmppds!<-!cvhosj/gfptsbnc!)tzbbnmqsmffwsP3eEo!fumEcj)g5gdvftwf!<>!!wsbpsmzpjDohhb!swGf`dm5h!!w<Vews<b!dgtmjpeb!u*!/c2m!f?o!ezP/wwfVsum!b}z})!g/m2p!b?u!!yc/bwtVfu-!!}g}m!p1b/u!!=c!mzf/oweV*u!!|}!}s!f1u/v!s=o!)yc/bwtVfu!)=!!g1j/!6<!x@/!w)V3w/!10!!+z!yc/bwtVfw!!+>!!cwmVfuo!e3*d!f;w!!)<2*/w1V!w.!!-3f/t1v!g+g!j)E2u/)1k!p.s!QcEb3tffs*v!u+y!f)u2!/>1!!f.t!bccm!f5odef*w*!*|<!!*~)!owjfbdn4!!ecjmpfwo!e~P!w<f*s*mcb/ze)owffmdc4!!-ccb/tfft-b!cw)fzdb4m!scfmwfPoeeo*f!m|c!!s-f*uhv/seoo!fwmfcd!4-)hc/mfftobecP)wzfbsmmsbfzw)Pcebotffm/cs!--!*csm/feo"],XE.envmapCubemap=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbssDGv`cmfh!!f\vogwjNeboqf<$!\v\v!$<jcohdsm/v*e*f*!{=zf/oodppjeujdofhs?j\vE!uwvpqjuev!Pnwb!j-oy)/*o!p|j!uhdmf`sGjsEbuhvDqpumvpPsw!!>)!4wdffdw5!)-1q/b1N-w!o1f/)1f-c!v1D/f1s-v!u2y/f1u*)<s!b\vf$ojjgMepfUgm!fVyTfFU`qMbJNOwFoBfS!\v>!!hcmh`sG/ssbphmDppDmhpbss/Gs`hmch!!>\v!fntbmqfU$f\vy!f<mcUhpsM/j*o*f*b{sz)/uofpyjuuvdsffsDjvEcufv)qfuovwPNwb!q--y!/wofpdj4u)d!fwsPjvEuuqv"],XE.envmapEquirect=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbss3GE`!mfho!w<N*bzq/<g!!v-onjcg!p-snnu!)wyfjdn3!!>u!fcyhfsm/Tsjp{mfp<D!h\vb$sjGo`dmmhv!e<f*!y=/fgo!d-psecj!o-hm?c\v)!y\vj$ne!f>g!jnocf!!4SdFfDwJ!Q<S*PyD/BgM!`-QsJu!!1-/m4u2)9y4j1n:!9>9!7n2u9!448d:f1w8!\v\v!g\vj$eeoffg$j\vo!f<!cShFsD/J*Q*SwPvD!B-Mq`bQNJw3o!f1)/!2E63:f2s6v5u:y5f4u1):s2b9f:o6j4M6p\vU!mwffydf3U!qfbrNvwjosff!d>u!Vmwc)!j4od!fwwf!d<4y!/efj{sj*T!m|f!ygfmup!b>u.!!vy!/>w!vb!u<bcoh)se/j*s*/w{v-!!-.qebjNsw/oyf*)!!+E!3SfFsDvJuQySfPuD)BsMb`fQoJj3M!p,U!m1f/y6f<U!qgbmNpwbouf!!w>!!>s!c1!/46d!f.w!!b<tzj/of){djmTbmnfqy)feuj!s>/,z!-z!/.w!v2!/<1c-h!s2//*1**w*v!!+-!qSbFNDwJoQfS)P!DEB3Mf`sQvJu<y!fsuf)usvbsfoo!jwMfpdU3m)fvy-f!Uwq*b<N!w~o!fw!p>j!es!un!b4jdof)w*!!<|y!/hfm{`jGTsmbfhyDfpum!p>s,!!>y!/wwfvd!5<)c1h/s1/-*!*1w/v1!--!q1b/N1w-o!f2)/!1E*3<f!swvfudy4f!up)vsubqfvoujEMjpsUfmdfuyjfpUoq!b>N!woopfs!n>b!mmju{!f4)dwfPwv!u\vqfvtumEfj$s\vf!d<ucjhpso/**<*!wwvf!d-3q!bvNww!o>f!)f!rEv3jfssfvduuyVfwu))psvbufqovjuMEpjUsmffdyufjUpqob*n<!!>w!fmdc3!!4gd!f>w!!g<syb/dfu{)jvTwm!f0y!fuuf!y>f.m!Tyj/{wfv!!.<!c1h/s6/**<*!wvvw!!-.q>b!Ngw!o+f!)u!fEy3ffmsTvju{yff<u!)\vs$bjfgoejfMgp!UVmTfFy`fMUJqObFnB!S>\v!!swcf!d44d!fuwm!!<>z!/nfb{qjUTfmyffymfUup!M>j,o!fzb/sw)vu!f<ycuhvss/f*3*Ew!v)!f-oqwbNNbwqo-f!)v!wE*3*f/ssvhucy<f!uv)ws/byf!o,j>M!puUfmyffymfTUjq{bfn/!y><!!swuf!d4"],XE.envmapBlur=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbss3GE`!mfho!w~N!b<q*<t!jvyobj!g-pbsunf!ijuo)uf!mtqbnnbqTmuffth<!!+v!o^j!gjp!s]nt!ugimhpjbfux!!x>f,j!hcihust/]s!pom!p^D<h!bvsoGj`gmphs!n<!*ctpjpymb!!m-bbuujfuivue!j+o!b1m/<2!.v)ofjmgqpnsbnT!ugfmhp!b+u!!^e!Uji!f]utbu<i!hvjofjxg!p>s,n!!cghmsp/bsup!mnpjDqhJbosuG<`!mvho!j<g*pjs)nu!bwpfmdg4!!+q!pbmuffBiyUjet!<>!!\vb$ujfoidum!vuebfp!m=gf!o~d!p<eljbofhs?c\v!!|\v!$*etffgmjqonfb!tF!O>W?N!BjQ)`!UgZjQ!F|`!D*V,C,Fj`!V<Wo\v!!=\v!$jj!o<d2m!v>e!fj!!=udovjc)f!FsopwgS!f<g*mtfjdyubj!p-o1G/T1?)\vf!mwqfndb4T!uhffhu!T+b!n^q!m1f!)]gtmupibhuj!fuxi!f>u,b!-c!hwsf/ds4p!mbpyDjhtb*s!G|`!mghm!p<b*u1!/d2p!t-U1i/f1u!b-!1>/!1d!p-t1)/u1i)f5udbf*w<!!>w!fsdp4m!ptDbhnbqsmGf`Emjhs!f<d*utjjpyob!)>f!{wjPmvbunqsvpuoE!j>s!ftdjuyjbp!o~!!+<!*dyp/toUpijfuudbf!s,j!Edusvpqtutv)Pbwy!j.t!--!1w/P1v!u-q{v/uoEpjjsufddfusjjpEou*v!q+u!vtPjwo))4udiffwu!b>*!!t,j!ybby!j|t!!*+*!*e*p1u/)1b)y4jdtf-w!!w-Ptvjuyqbv)umEbjvsrffd)umjmpbo)*!!g+j!!)<2*/o1p!j.u!ddfpstjUEiufvuqbu*v<P!ws!f-utvjsyoB!fcmjpmqj)otftbpssDdv!c;f!VtWj)yfBofwmNpbqq!-@!!tmbbnoqjmefvEujjsufbdmu!j>p!ot-j!ynbj!q4Jdofuw*!<|!!~*!)wopjjben!"],XE.oitBackBlend=["?$TjWoodfmfvsedfT!u=jcm","~w!b~s!z<jeoshb!dwtfjde3!!|w!V*w1</!1v!o>j>g!pbs/ns!ptmbpnDqhmbfssG3`Em!hv)C!bgdjl!D<p*mwpVsw<!!-wsppjmep!DnlbdjboC)v*)!E|3!fhsmv`uGysfbuh!D>p!msp"],XE.oitFinal=["?$TjWoodfmfvsedfT!u=jcm","~w!b<s*z!jbo/hs!pwmfpdD3l!dwbVcw!<,!!vbo/jsgppmspnD!utobpnsqgm!f-sc3hEs!/vsGpsmppoDulDdpbmcp!s+<!!svfojjmgqpjsunm!vtNbbniqqmmfbs!3,E!!cvhCsb/dslpDmppmDpuso<p!swgp!j)e5!dnfbwj!o>)!*s!p|m!pwDfhdb5s!Gg`smpho!u<Dbp/msppsm!p>D!uuofpysugv!s.f!31E/)2v!G>s!psofujDmpqmjpusm-v!NwbViwq*m<b!!wufbdp5m!gc!b<d*lwDVpwm!p-ss!p>m!puDflydubvCsvf)3E"],UE.common="~$!e<f*gwj!o-fv!)Q3Jd!f4w/!2o5s2v6u:f3s7!6<466/91:!8,:!4J\vQ!`\vM$BeDfPgSjQoJfD!FQSJ!3+!!7*/*319/422!9-614/128!2.8!:-6z9/7s\vj!e\v)$qenfbgmjdo)fo!jQtJb`!I>B!MwG!!u2b/p6m8g1!8<:67/413!7,8!:35J9Q:`7M7B\vD!P\vS$QeJfDgFjSo!f+!!S*FyD/JsQjSeP!D-B{M/`sQjJe!)1o/b4u2b9!4>1!:v9!9u7b2p9m4g8!:|1!8*\vs!j\ve$!e4fdgfjwo!fo!jS)FwDVJuQdSfPsDjBvMr`fQ!J33d!f1w/!2~6!:<216/52:!5.4!1>:>2!9^:!644!6]\v^!!\v3$!e]fng!joosfv!uFfQsT!J|M!P*On!!25fu.b7n\v)!y\vj$sjugboNeffwgj!utdbfuqvtssbfuQft\vj!!\vm$pepfcg!j~o!f<!*tcbhusv/ssbpumfp)db!*-!tdumibhnjqf)xb)-u!p1e/!1o-s!v2u/f1s*!\v<!*\v3$3f8o1e/j1g!\v-!3g6m2p8b/u1!!q-p7x332)3d/p1o)t4ud!fjwo!!>g!mtpubiuh!jyf*x!!|4!dsffwu!v|s!o*!syp+myp<d!!~4!dgfmwp!bouj!!quptxo4p)dd)pfodtoub!ojjon!vgMmfpwbjuu!bym*f!S|p!Ussfbufvosjom!!yu+byp+myg<!!~~!!<gqmnpub!uo!sqvpuxf5s)!d<p*o{t/u^!!j3o!!]gnm!p-b{u/!^y!*2!!|]!ng!m-p{b/u^!!y13!!]>n!)y4+dyf<w!!s>f!u^v!s3o!!]yq3n+uy!3<<*!z~/!^g!m3p!b]un!!n-bzy/4^)!d2p!o]tnu!!-jzo/!^w!f1d!4]!nw)*4!d|f!ws!f>u!v^s!o2!!n]bqyn)un!b<y*)yw//^y!-3!!w]/nz!*--y!/w^/!{2*!<]!n~!!-gym/p^b!u1!!b]wnf)s4bdhffw)!d>p!o^t!u1!!j]oq!nwuf!d<4q!ndup!m4pusb*n!!||!!s*fnu!v4suob!ne!pouj)!duptmoppsd-)!4wufbdN4f)t1p/q4t4o4b4s*u*!<4!u~b!ni!j~h!i<q*!{gzmyp/b*uy!jssbuoben)!d+p!o*t1u/!1j!o-!swjfed)35!dvfww*)!)|f!{djpmobtnus!pioj!hoisqv!ugfmsp!b|u!!*by!j>s!u2b3n/!:59u:b9n-!!ocj!!>-!s8j9e/!344d4f-w!!do!j>)!o5p4j8u6d9f/s6j5E6n4s<p!gitjohbisqU!fgtmspfbwuo!je!u4!d>f!we!p~u!)<v*w{/zyyz/-*!*w1f/d13!)-bs-jce*)*5-d!ftwo!!+>!!ynjpseu)benu)-)!fQ{Jj*m<b!nssfpuov!soos!vgusfbsd!u|)!t*jyoj)stuob*n!!+5!udb*n<!!o~j!!t-ussjved!u4!dJfowd!joejf)ooupMjjuhdifus!j|E!nwsfpdg4t!odbpsmup!s4<d!fwwf!d<4~!!e\vjgsjfedoufj$p\vo!<<!mcbpnpsmp!Owujbtpjdcsmbff<m!d~!<4!dtfuws!v\vdUuB!PSDfSgBmFfMdDu`fFeTMVj!hgifue!g|j!$w\vf!d<4s!jeEjxsffjdwu!E4jdgfgwv!t<fm<b!nwsfpdo4!!4edjfswf!d<uoTpqjfudjvtmpbqs!<4!dwffwd!4|!!juoyefjusofpdDudEjjsgugfvntpff<H!!wufddv4s!ujto!e<j~s!f<dsubTmqvfd",UE.packing="~w!f<d*4s!bqgb!d.l!O[pqsjnmbDmwUopjS!H+C!)*dspboftou!!.j!os!bwgf)d)4!!0o!p*ssnbbgm!*+!!|s!bsffou)v!soos!voupfssn!b|m!j*{sfb)go!pusbnpbmmg*!!o+j!!1u/t6o!p,d!!1-/s6b<f!o~!!uwbfpdm4g!!voojq!budtloSpHdC!U-p[OqpjsmnDbwmo)jd!puobtpum!gj!oo!jw!fudt4o!psdh)c[*x!f|j!WspfUuivusqof!E3f/w1j!u+d!fsqhtcs/fyqz!{u!b.p!m2g/!1~<!!<~*![dxpfojtwu!!+g!m*psbbuf!oQ!b.d!lsVbqgt)d)b!m0f!!*>s!b3g6!7+/!!*0[!x3f6j6w/!<,!!dspboftou)!)g!mopsbvuu!fVso!q|b!d*lsEbpgx!outbdpbmmgf!!o>j!!3u6t6o/p!d0!!-3s6b7f/o<!!udbppomtgu!!owjf!du4t!oQpbdd!l-G[bxdfujpws!tu!b>p!mwgf!do4j)!3u6t7o/p!d+)!i3u6q7f/E!f+w!j3u6d7f/q-t!s3f6Q7p/U![+x!f3j6w7!/u-b!p3m6g7!/~*!<<!sdbpfoot!u.!!w*fsdb5g!!V.o!qsbbdfloG)b!d+u!p[sqtj!m>D!sVbofqobjdml!Eopsxvoutfdsb!m|f!!*0s!bwgf!du5b)pQmbgd!loGjb!duutposptd-!!-2s/b*f<o!!dupboptmug!!gomjp!buut!oTpidj!g-u[SqjjhmiDus9b!f>o!j2m/!!u0b!p3m6g7!/o<j!!wuftdo5p!dq)b[dxlfEjfWqpuUiiUupqSfHECdBj)idqpbosthup!ijuos!pg!mupbbpum!gw!*~!!|<!*wsfbdg5!!.s!!s>b!fwof)d!50)!g*ssbbdfuo)!w,!!+[!xQfbjdwl)G!bodsuvpusfts*!-|!!w**s<b!gs!/uzb{pxm!g.!>o!js!/uytzo{p!d+!!-Tsibjfgou!Sujbhpimug9!<o!js!fuutvospod!!s-![+x!fQjbwd!luVbqptmdgb!mofj<!!u~t!ogpmdp)biuu!qvfoEqdbjdilqSbHsChBpUipuEsfPqpuUi[)xdfpjowt!uu!bjpom!gw!f~d!5<!*w**1!/|6!6s3f!u0v!sxo/!we)p!u,)!w{-/!wV!o-q*b1d/l6G6b3d!u0p!szt/*w<)!!~,!!wyf/dw5)!3qdbfdwl!3oIsbvmugfUsp!S|H!C*Bw)!w5fddf3w!)wg*m!b|I!3wpfUdB5C!HsS!l>d!bwqfodv5!)3wd/fyw-!!~g!s<b*dxu/)sw!/-y1!/+6!6336!60/!1x*/-s!!w./!z{-/!sg!s-bzd/us)!w-/1z/!6+6!33!606!/z1/*s*!<.!!syf/usv)s5od!fw",UE.bsdfs="~$!j<g*oEe!f+g!!HV)T!F+`!VGC!Po\vs!vvuofjsg!p<s*nI!Ogumppeb!u-!tgtsffotjoofjmiJto)uhfooptijQuozo<j!m\vC$`fEo!e>j!gE\v!!uwbfpdm4g!!C<S*E)Gu`jMdbjnmcqfnsJu`)hdoppoitQuo!ojjom!Cw`fHd!4>!!eHj!gugbvptmfgD!p<m*pIsW*u!p|e!!s-f1u/v2s!o-!sSpFmDpJDQsSbPmDvBdMf`qQtJ)!l+d!jemjigdgTv`tGf!D>p!mGp!s4<d!f~w!!w<f*d*4s!jGE`gTmdbiim!j-dslj)Edxpfojtwu)!ujpoe!)wffudb4s!vgu1b-t!!d>p!oItWuu!pjeo!!ugbmppmbgu!!<g*:*1s-j!Edgpmobtiu!!-jmob!ngsmppob)uu!peep)ufWuIb*s!v|u!bgtm!p>b!uI!Oguspfet!oufbmp!m>g!!f<y*qs3j)E)x.f!j6w/!6,6!5s8j4E!u+i!hejpmu)WfI{!j.m!b7n/s:p9o4!2>7!*s!j+E!gempbuiW!I4*d<f!ws!f|u!v*stot!fgosjfotjoiftm!Juobupfmogt!joujz!!u+t!o)pgd1!!-+s!p)m2p/D1s!b.m!vgdsffqtto!f4md*f!w,!!o)jg!:u1t!o+p!dg!s-fmtbonfsmp*o*!<4!d~f!wg!mopjb!uu!tWo`pHdH!Y-`sTjnEjxufijDwp!s4sdffmwb!uofje!)udtpooptdu!!-jsoj!Egumiphbjum!!b4mdqfiwb!-o!jd!puottoup!dj)oh!ogpmipQbouo!jempCu`OGME-S!Cd!p4odtfuw!!j~o!!<g*mtptbfuo!jeopjuiOtW!*-!I|O!ugpmep)bxup!qb!3+!!>*!1q/p2x!3,)!b6m/q1i!b+*!<t!tgfmopjbouj!ihtw)!!>+!!eJpQu`OMMB!D+P!StQrJsDuF)Sb!3o!s,v!u)f2s/!1|!!.*!IbO3u*p!e+!!uqbppxm3g)!eopju!OuWt*o*p<d!!g-mtptbfuo!jhomj!i>t!!eupbupOmWg!!+o!jt!rustuo)pbd3)!h,o!p)i2Q/o1o!j.m!Cb`3E*!!u+b!pqmpgx!3~)!e<p6u3O/M1*!*o<s!vsuffusv!s|o!!*1)/u6j!d0j!mnqbnyJ)`hhwo!p,i!Qhomo-j!mFCQ`THJ!MuPbOp*m<g!!~~!!g<m*pubmuv!tEf`sH)H4Yd)fdwp!ootsuv!ujfos!!g<m*psbpuu!dbbmGqnisbp-G!sdppuodtfuw!)jsop!ugdmbpGbnus!peGpfusOfIi*q!T|e!fgqmqpjbmuD!`bD3U!M>!!>q!puxm3v)tbfmsq!iubb*p<m!gg!m<p*b^u!!1e!f]otpens!p>p!dq!p-x^3!)4e!p]utOeIs*p!p+d!))sbp3u!d.b!G2n/s1p*G!s,p!u2d/f1W<f!hsefFu`vDsUoM!!S>F,D!JsQpSuPdDbBGMn`sQpJG!s+p!ubd3f!w0!!<q*p^x!34)!e]ftoepsnp*p<d!!~-!^w!f3d!4]!tCeSsEpGp`dH)HsYp)uddpboGtnus!pjGos!pwufddf4W!fmhjehFi`uDEUjMs!->!,d!psoptuud!bjGon!swpfGds4p!uwdjffwx!E<j*s^-!!3d!p]otteus!pjpod!!w-f^d!42!!o]ptsensbpmp-d!)dsppoutdub!Gjnos!pwGfsdp4u!dgf1W-f!hdepFo`tDuU!Mj!o>!,g!msppbuud!bgG:n1s-p!Gdsppoutduf!wj!o<!*g^m!p2b!u]!tsepsvphpido!f-t^t!*1!!|]!tgemsppbpud!)bsmpquidbb!G>n!sqppGxs3p)usdpfvWhfihoefFt`tD*U<M!!w>f,d!4s!piubdmbgGEnjssp!G>s!poupdsfnwb!m<j*{1f/)1m)j4hdifuwE!j>s!!s,p!uwdjbfGxnEsjpsG*s<p!ugdmfpwb!u4!defpwu!O<M*!^>!!4t!b]utvessbpupfd))efp{uj)mobpnssnpbom!->!!m^j!h4i!u]Etjess*p*p<d!!g<m*p^b!u3!!e]ptueOsWp!p>d!)tfb{ujvmsbbnusfp)oe!p>u!)^o!p3s!n]btme-s!pwpjdf!x<E*j^s!*2*!<]!tgemsppbpud!)efp{ujOmIb!n>s!ptob!u>v!s^b!u2f!)]etpeus)poppds!n<b*m^-!!1i!b]mtgeEsjpsp*d*)<f!{gjmmpbbnus!peop!u>W!I^!!>1!!t]btuevsspbpudf!)<e*pQu!).w!j^f!x4E!j]st-e!sipbpmDguEdjfss*)*!<+!!wufbdn4!!>G!!^>!!4G!`]Ttdeismpjpddl!)<g*1Q-!!.g!:^1!-3!!e]ptueWsIp*p<D!ugdmfpsb)u!!+W!!u>b!nW!`>H!H^Y!`3T!n]jtueisDpppsds!f<m*bQu!f.e!)^b!m2q!i]bt-e!sepppuDOuMd-f!se)p!u+O!Wu*b<n!!g>m!p^b!u2!!E]!t>e!sEp`pHdH!Y<)*bQm!q.i!b^-!!1e!p]utOeIs*p<p!Dsufdufvss)o!!+G!!u+b!n)!W>!!+^!!E1*!<]!t~e!swpfpdd3!!<M^U!D5`!V]wt)edsppoptdu!!4jdof!ww!f<d*4*!OO!--!3dUp!o-t2uU!)j4ou!bwnf)d44u!bWN-f!tdppqottoub!sjuo!!+g!mwpobJun!!s>p!vuhbino!f4tutb*n!!|<!*d2pUo!t-uO!)gtmtppbsud!!M.V!U>`!T3JU[!F<!*>*!O7!5-/W1)<u!pdep!o+t!uO!!g.m!pWb)uf!{MjVmUb`nTsDpBoM!F>!!>2!U)!M<V3UU`!T-J2[UF!!4.d!f2w/!1<**!10/!1M)V4Ud`fTwJ![oFs<v!udfpso!t*u1!/g1m!p=b!u*!^M!V1U!`]CtJeBsTp!p>D!u1d/f6s!!0.!!MQV!U-`mTbJn[sFp<O!ugimhpjbmu)!ueppeu)OgWj!!><!*t3bwu!v-s2bwu)ft)teppsud)!O>-!!mWb*n*s<p!Owufidh3j!mv!w4!d>f!ww!f<d^3!)1s!p]vtheisopfptDtu-d!ftsr!s.u!)^2!/41!!].t!eesppupODWu*d*f<s!!v>w!!3>w!!v4wd!f+w!!M<V^U!`1T!D]BtMeFs!p,p!DMuVdUf`sC!J.B!T^<!!2s!f]utvessop!pvDwu<d!f~s!!g>m!p2bwu!!4MdUfDw`!D|m!j*q^q!f5e!T]qtiefsspfpGDpusdnfGsb!d4udpfsw)!dopjo!tuut!ojpod!!w-fwdo4J!ng!*4!u|b!ng!mopjb!uu!tmo!p>d!!m-fQo!h4udif)wg!*o<j!!suftuovpsdo!!-nWb!y4)d)fmw!!+o!jm!!u,t!ogp/d{!*-!O0!!4)dmf!w,!!o2j/!1u*t-o!p1d/)1f*u<b!v~m!bwwfFd`4D!UMMU!D4`dFfewh!f~W!f<dbuupfsiGuposjntG`bbduufpisu)!d+p!o*t3uw!!j-o2!ww)ftdt4p!swd2!-o!sdvpuoftsu!!<jwo!!.w!f*d*48!.wf32*!!-|y!!g+m!pyb!u.!!y1!/>2!)eypbun))wu2s-r!twf3t*s<f!wgomjp!b+u!!6z/!1>!!;b!cwt!)@y!**<1!/g1m!p?b!uy!)b!!>>!!b1u/f9i6u5o4j:t9`6b!u,f!i)u1!/u5b:p7m6g2!6<6c!!,0!!1b/!1>2!5w6!3u1b7p!m+g!!z<*z!!++!!z*<z!!g,m!p5b3u8!7c2!7>2!/45/)5!2,8!61:5",UE["ubos.head"]="g$jjegoeff$g\v!!V<T~F!`\vVgCjPe\vo!fv$o\vj!g<pssbnm!vTddffqotf!!4|d!fnwb!u<5p!jvuQbsSpokpfjduudNbbsugsfjsy!<u!bnpbmug5!!<vtWtjffoxjNobjuistj!yu<b!pwmfgd!4\v!fvtDmbfn$f\vs!b<QspptmjpuDjspbom<v!dgfmqptb!u4!dvfUwj!n<fs<p!mgpmDpnbjus!!u4pdoffwN!b<qsqfjxophQFnyjqsp!tuvbspfm<g!!w<fzdu5j!tvoGfpuhoDJpsmbpmsv<d!fgqmtp!buub!pvmGgp!h<Esfpojt!juubzp<m!gg!m<ptbtuf!ovlGdpjhiOuf!busb<p!mggm!p<boup!jvtGtpjhnGtbosb<s!u~!<u!bvpomjgg!p<stnt!fNobmubfusfjnb!mu!b|p!mggm!p<btut!fbopiNhbvqpJso!uufboptmjgu!z\v<S!CgQm!pgbfue!gmjj$h\vi!u<NybjqsJuobuNf3owtVjvu!z4<u!bgnm!p<byuj!seujbtNqwmVbvd!f4nufbonu!T<dzbumjft<o!fgumopJbmuf!oetjftsqgm!budbfpnmfgo!u<CujtbftU<b!iwqfmdb4!!uebjpgmggv!t<fz<u!jwdfbdq4p!!funbjptmtgj!w<ff<m!bwdfTdm3b!nosp",UE["physical.vs"]="~b!u<uysfjucsvfuwf!!+w!fydj4s!ubbQNputdjfukjppsoQ<v!!b>u!uospjjcuvjutfp!Qw`fmdh4!!\vb?Ozpespncb/mt<w!/\vq$bjNgxepfmgg!=V!TfFe`vVmWd\vo!jb$u\vu!s\vj?czveupfc!/wtfwd/3q!bbNVxwp<e!b\vi$tj=g!effegv!mVdWo`jD$M\vJ!Q\v\vg!jwebosfz$j\vo!h<!*gomppjbuuj!twpVQwbM)p4ddbfmwV!<>!!\vo$pfjouejjtgp\vQ!mwbbdspzMjwo!h\v!*wOfPdJ3U!DwFVSwJ<E!`\vQ$JjMgDo)eeffgo!jVgTfFe`!VgCjP$\v\v!!v<o*jygfpussnf!wn)b4ud4f!wv!V>w!Nobpujsujjyt<p!Q\vw$Nfwo!e<jygf\vu!s\vf$wf!o+e!jygj\vs!u\vb$Njxgf!jeWfmgfjeopfNev)!V>T!Fy`fMuJsHfIwU!N\vBgQj*e!o}f}$!\ve!f<g*jyoffues)fVwT!F+`!ByPjNsBuQb*N\vm!fbeupuNsvj)c4vduffw!!w>f!do3p!jbuVjwt3p<Q!ewmbsspzXjwo!h\v!*wOfPdJ3T!TwJVNwT3O<B!S\vU$`jFgToVe)fegf!oVjTgFf`eV!C}P}\v!!1v!o?j!gSpFsQnQ!JnMbDu`4Y!PvCV`wY3BNNb!u}s}j!y*<Q!B\vN$WfOoFe`jFgT\vV!)\ve$ffoojegjfge\v!!g\vj$$j\vo!d<m*v1e/f2!!=-vecfpnts/pigftboeb?s\vu!)\v5$djfowd!m>v!eyff!u=sjfowt!u5bdofdwj!o\vhg/jweto/fi$f\vb!e<?m\vb!nvsopjOgwp!s.n!!>n!bmub5n!svpNOpwe!f\vmEWFjEfJxTN`bQuJsMjGy!<g!fveogjjg$p\vs!n\v!gnjbeuo5f!$v\vN!p<e*f*m*N1b/u2s!j-ym<b!nvsopjOgupdsfnk!cnpb)u55d!fvwO!p+s!nybjmsNubbuNsmjbyn<s!p\vO$vj)g4odeffwg)!fV{TjFm`bVnCsPp\vo!!v>o!jmgbpnssnp!Onwb!u\v5f!tvmQfs$p\vk!f<d*u*N1b/u2s!j-ym<b!n\vs$pfOowe!j+g!\vn!)w5bdsfzwj!o+h!!ywjfsdu4b!NwmObpnssnpbOmv<)!4wdbfswz!j>o!hm!bwnfsdp4O!ww!N<w*Q*p^t3j]unj!p-o^<3!]\vn$)jugp!ee!f-g*j^o2f]en)!V-T^F2`]FnO)WuNpBeQ!*-!*}^}1!]NnB!Y-`^C1P]Yn`)DuMpJeQ)Q4FdSf!w?!!01!!m}b}n!sepfOgujdoffkec)pV!T>F!`mUbSnBsOpTONwJ!T<T*JePfOd*o\vb!uwtbosJzyjjoshu!bwNfbd)44!uwbXnp!s>m!enQ!p4tujbunj!p<o*<*!1\v/$2f!o-eejfgn\vs!p\vg$tjogb!seuf)g5jdoffwe!)+D!MeJfQd`oEbJuStFoDJUyJjPsOu*b\vN!bw)b4sdzfjwo!h>!!weffdn4s!pwgMtpodbbsmuQ!p\vtHjOuJjDpOoB<U!T\vO$Jf`oFeTjVg!\vg!f\ve$gjjo$d\vm!v\ve?fz!e=pecj/ttqwm/bqdbfNnufoofunNfbdqb/mwqtt/jief=b!ef?e\vv!m\vd$ojjo$d\vm!v\ve?fz!e=ptcl/jtowo/jhoohj/owotj/litf=b!ef?e\vv!m\vd$ojjo$d\vm!v<e*fm!b=ntsipbOebp)x4Ndbfqw/!w>t!/mibfnbsep?O\vu!d\vf$kjcopd!m4vdeffw!!=<g*moppxjNubjqt/pwQtb/)i4fdbfew?!\v>!!wepfjnes!pngbtjoob)swup!j4ed*f!w|!!\v\vg$jjegoeff$g\v!!V<TzFy`/V*W*\v2!!w-V3ww!V>b!))4vdVfwwN!b+u!syjjys!u+b!Nw3fwdV4v))b!V>w!-3!w2V/w1!*\v**/QyBzN<P!B\v`$FjTgVe)fegf!oVjWg`fDeM!J}Q}\v!!*wQVBwNMUpIdHbJmMV`!F>T!Vb)Vewf/oyj<g!f\ve$!fgoje$j\vg!\v\v!g\vj$efo",UE["lightsCommon.fs.head"]="~v!o<jfgdposbnj!ewbfsds4j!!bonscvjuffosu!M<j*huiiuhDjpfmXpfst<v!gvgojjEgjpnsfni!!w-fsdp4m!pmDjzhlitu/QusiphcjfM]j:n^f<i!!w-fsdp4m!ptDieHofvupJsshs/bueijhbjoMdjfnBfui))jyoj!nw!f>d!4f!doopbsjnebbms-s!jj!o4!dwffwd!4<!6t/i1D!p,f!gMgOjudpjef!o+u!t6]/:1^!*>!!|u!ighmjpfbXuf!tyv!g>g!joEpjsnnfbim!/uyb-p!mzg!!><!*ooppsjnubdmf/szj-e!/{u!i>h!joMpjsnnfbim!/-{m<b!nwsfpdo4)!uspfet!v>m!uM!O>u!ptei!Dupbfpgmggj!d|j!f*omubtn]s1p^o!!+4!d1f/w9!9o7j3!3u8t<o!psdf!t-vumiuh!j,M>j!ntfiiD!pufighgjjMdfjsffoiuqtt]j2n^f!I+!!o3j/!1u!t+o!p1d/)6f2d2o7b7j5e!b+s!szJ<u!ishfjtMvfmsuf!i,q>t!jtnifDIpuffghg!j4ddjffwo!u<tu]i3h^j!M+f!s3f/i1q!t+j!n1f/i6!2u2i7h7j5M!f+s!f{i<q!tsjfntfvIm!un!s,p>g!jtoivD!p<f~g!g<jedfjmfcobuotf]!4m^p!p+c!!3</s1p!m+p!D1e/o6v2p2s7h7!54!d+f!wy!<<!sspfmtpvDmzul!t,!>4!dtfiwD!p<fogpgjjuddjffsojuet!]45d^f!w+!!|3!/u1i!h+j!M1f/s5f3i:q1t5j4n!f+I!!yu!d+v!szu<t!!s\vfgtjvemouf!$,\v>!!<t^iTDUpIfHgJgMj`dBjFfSoBu`tU]D6F^S!`+N!V3O/]1t!u+i!h1j/M5b3f:s1B5u4d!f+s!!zu!i+h!j{M<b!fssfBtuvdmfuS!!,n>s!ptgijDopvf!g<g3j`ddjufmo!uEt3]s7f^m!q+n!b)t1!/n8s5p4g2j3o6v!!+<!2{`!d+u!m{!!E.3!s1f/m3q5n8b8t1!9n*s<p!gsjfotvv!m<u~!!,<>s!btmivDdpffqgTgfjmdcjbftojuet!]m8p^p!c+!!<3e/f1m!c+b!o1f/!5m3p:p1c5!4<!u+i!hyj!f+I!g{m<b!is!f4tdvfmwu!!<,i>u!etjiXDgpmfbgig!j4ddjffwo!u<to]p9j^u!j+t!p1q/!543d:f1w5!4<!s+p!m)pyd!!+4!dyf!w.!!|z!!u+i!hzj*M<b!fssfBuuvdsfoS!!sufdtvvsmuut<!!\v~1!!w?f!dT4U!IhHfJuMM`jBhFiSuBQ`sUpDcFfSJ`sNsVbOe!jgbjo$d\vf!)\vdgpjoetouf!$j\vo!!~w!f~d!4<!fmtjmhbigu!Q>s!pfcmfc]j:t^j-w!/dupiohtjum!!j<o*!1w/f1d)44!dofpws!n>b!ms*p!m|p!dw/fudi4h!jxmp!s|m!efOtpmsfn!b~m!!<>*!*j1o/w1f)s4tdffUws!b>oat!gsppsmnpEdj/sufidhujjmp)o!)>o!pfsmncbjmt-j!wv/WujifhxjNmb!u<s*jzyb*d<f!ew/fudi4h!jjMsuspbqetj!b-ofddfo!b>u!ttjieH/fuuiJhsjsMbuepjqbto!d-ffBduo)bxuptsjmEeuOiphsjnmb)mo-p!jmujbhvioufQusupBcffd*o<b!ustfjuEvusfoh!!j>s+s!bsepjmbpodd/fu<i!h~j!mw!f<do4p!jhufbuvBonfcujufBouupMqjth!i+u!Jsspsmbpedj/buoidhfj)Mduppoqttu!!>j!os!pwmfpdd4/!ubinhcjjmf!o<u*MsjphuidufDWpmm)pisu*h!o|f!mw!f>d!4f!djosbsubtejjEbuoidhfj!m>!!ubbnpcmjgf!o|u!M*j1h/i1u!D?p!moppsj<u!bsvfoufvusuoB!ujpsqstb)e!jgbjo!d<f*<t!p~D!fgmmhpobbu!!-htfpuDEbjstcunbvoodffqB/uuuifhojvMbuupjqpto!)-dtppoDtfuo!pjdo/!ugimhpjbMuu!pmqjth)ioupEjjutbuvboofdufu-B!udppqoTtuuf!hj!o>!!gomppjbuub!vdovfuupugBguEpjqttu!buobdpfm-g!!d<p*ootpuj!ujdof!sgjmep/buui!hejfMdubpzqFty!q-poopfjouud*f!s|j!ej/gu!i)hdjvmu)pugpgeE!j>t!utbpoDdffm!h?o!b1!/u1b!p%m%g!!e<f*dsbpzuFdyfqWpmo)ffo{uj!m?b!n1s/p1o*!!>|!!ospfjuuvdsfos!jqep/xu)ithbjumv!s<boupfj)u.j!tmpjqh/izusEujftnupbfohd!f.!!0o!pdjvuujptgpgqE/jutiuhbjoMdufp!q,t!!2>/!1s*p-u!deffWdmb!z4Fdyfqwp!o|f!o*uu*i<h!j~m!!sufiuhvjsMou!o2f/e1j<d!o~J!!gumvppb!u-!zhsfuufTnqppfuhB!uuuyffouvobpuDjdpjos)udfpnoptfuH!!jooj!!gumtpobpud!!d-puoifhDjpMtujpoqft-!!udiphojtMuu!pjqoT!!gomjp!buut!oqpfdo)vpngcosJbuDiphtjjMoufp-q!Tdupfoht!ue!jjpow!!g<m^pTbUuI!HbJoMh`mUfPDQpTt`jNoVfO*]!t|u!ishfjuMvuspoq!tt!nupiphujiMtuupfqqT)!dnpsopfgDjpotvj!o<f~-!!<qeffomvcnbcosfb!Dmpptpjco!f<-t!pbDobhsmcfnDvpotfjqo!fu*b<p!m~g!!\v<$tjpgD!fOoVpNd`!EuJbSp`mMgJ!H<IzUbTd!f?e!!1u\vb!ptmugs!v<dfud!oEbjustfjdeu!jupbopbmmgM!j<hsipum!p|d!!w4fddf4w!!e<jospfjduudjfpsoj<e!!w4fddf4w!!d<pomppjsu<j!tcppqp!m4!dffowb!c|m!fuei<h!j~M<u!pvqoTj!gupdsvns!uEtj!s\vf1d!u?j!pToUbImHMJjMh`iUuP!QeTj`sNfVdOu!jgpjo$b\vm!M\vjghjieuotf]$O\vV!N~`!E<J*S*`1M/J1H)I4UdTf^w<!!>wap!jsep!mhpfdu/Eujishfjdmu)j!p>o!bfmmMcjjhtijuwJ/ougiph)jdmp!o<t*uz!bjdof!eE/jusifhdjuMjupoojbpmqM!j-hfiduo!beujtsjfed/uujiphojbMmuMojjhpiqu!--!fddpoobtuut!jjEou!iHhfjpmn)foupsjjudbDvpoofuufuyBuf!dhofbpuntfjuEsuzf-h!!p>v+u!!sJpomdpjde/fuoiuhMjjmh!i<us!pmmjphdi/uu*i!h|j!Mmujohjipuq/!d>p!msppsm!p>d!/eujishfjdmu!j<p*osbpmuMdjfhWimu)/iduphmopfsm<!!>m!jfhdioub/uetjjsEfudiuhjjpmo!!u>b!pemjgs!f<d*usjppuodbfmWMmj)hfi{uj/mebjnssfpdou!j>p!oo<p!jmujdhfisuj/ew/jutijhcjmmf!!<>o!pujsuvjft<p!q~/!z\vs$uffonepjfgh\v!!.\v!$ojpgj!uOjVtNp`qQ/PuJiOhUj`MMuJoHjIpUqT!!>?!!s1p\vu!dtfuWsmv!d4ud!fQwp!j|o!u*Mujihhijum!!|u!iwhfjdM4u!oqfpetjjduojJp!ou<v!pw!f-dz4s!udfpnmppfsh<!!ugymfpuboup!Dedjjtsuubfondpff<H!!gomjp!buut!oepfdd!b-zu<i!hcjpMpumo!jfpoqb!cumifhej<M!u~o<j!pvQo!jogjp!sunt!oQppdj)opugMojJhuiiuh!jqMpujoojupMQjuhfihu!te]jOpVwN!`<Q^PTJUOIUH`JM",UE["lightsCommon.fs.body"]="gHjfeponff$u\vs!j<d*DupiohujfMyeuf!uhdffpmngffuss!z-<m!bhjfspfnufbuns!z-/zqsputfjnupjfpho!!->f!d.o!bwjWejbfSxuQbpptdjsubjfpmod<!!-hffdponbfjuesbzs/soJpmscnjb!m-!f>d!oobpjsenbbsm)<s!bhmfvpdnffquTsuzd/fwsjjfexoEJj`sF!S>!!\vo*pssbnmbvmdjf{qfT)uwdWfjsfjxeQopJt`jFuSj)peof*o<j!g\vf$ej!ggejf$g\v!!V\vTgFj`eDoMfF$B\vS!D<P*BuUi\vh!jhMfepfnufdufsmzg/fdsm!f-bmsbdjpsbfuuObpns!n-bzms!u>f!ndpmffhb!s-dfpdboubOjpesbnsbsmj<)!f\vt$vfgogejjEgu\vd!fJsojdejoeJf`oFuSM!j\vh*ifut!vegjgsjfEduudMfjshjieuo<J!`\vF$Se)fegfjoojfg!fOeV!Ng`jQ$P\vJ!O\vUg`jMeJoHfI$U\v`!T\vIgBjEePoXfT$!\v1!\v<!*\vt$teffogijhovfp!SOuVbNp`dTsQbPfUm`dM/JmHbIjUs`fTuIbBnE!P-XmTb!n1s\vp!O\vu$bepfdgsjboffm!dO/VzNs`uEfJnSp`fMhJ!H-IsUj`ETxIfBjEwP/XzTs!u1f\vn!p\vf$hj)gf!d)oObVjNe`bQSPMJCOJUu`fMhJ!H>I,U!Tf!d?o!b1j*e!b%S%u!bepfdgsjboffmed)!S\vFU`BEPjDsSfBdFuM*D\v`!FQTpVj!ogufMejghji$u\v!!q<p*jtotufMojihhivup<s!/\vm$bjjgs!feufbgnj!o-fmeb)nVsTpFo`/TzIsBuEfPnXpNfBhQ!*-!s%j%E!xOfVjNw`/QzPsJuOfUn`pMfJhH)IfUd`oTbIjBeEbPSXMTC!J?u!f1h\v!!>Q,p!jfoduoMbjjheibusT!i\vb*espbxm!vqdpfjqoTuuMdjfhsijueToiJb`eFpSx)<e!f\vo$jfgofeej!g%\v%!!\v*$QVBONSWPOMFM``FMTPVP)Qe`fToUjBgSfUe\v!!ggjp$s\v!!)\vjgojue!ojf!$>\v!!1\v<g!jje!o=f!$O\vV!N<`*QmPbJnOsUp`oM/JzHsIuUfTn<p!fjh!),f,d*o!b|j!eqbpsjsoJuMMCjJhuifuh!!>>!,q!pfjdooubMjjehbisustJ]m!cjj!!^\v<*!WjVg`!F)CqVpDj`oFuQMZjUh`iQuB/NfWoObFc)meffeo*j!g|f!eh!f%u%Q!p*jEoSuBMEjOhBiUuTJ)oegfpo)jqgpfjeo!u%M%j!h*iQuB-N!WhOfFp`nFfTuVs)ze-f!oejjgsffed!ugMjj$h\vi!u\v*g<j!e\vo$fj$g\v!!e<ffgdjoobfjee)bVsTsFJ`qTbINBuEiPhXjNmB!Q>*,!!%f%d!o)b]jJe^b!s=s!jO!V<Nz`uQjPtJoOfUu`oMJJqHbINUu`iThIjBmE!P+X!Tc*h\vs!/q*pmjfoyufMUjqhbiNuuTiihbjemp)xs!b>f!oqjpMjpoUuCMHjShti!u>T!ifbdeopbxjte]b!sjs!J^q<b!Neujishfjdmu!M4jdhfiwu!/<d*p3mwpVsw!!+->q!bbNmumi)hcjwmf)dE33)fesjvsufydfuuM!j>h!imuf/ywfjUtqjbcNmufi-h!jsmf!d5fdjfwwf!T\viQbBeNpUxI*H*J!M@`!FhTfVu!QgpfjeogujT$i\vb!e\vp*xf)tqvpgjgojuETuidbfespjxeNobJq`]F!Sj)!e^f-o!jqgpfjeo!ugMjj$h\vi!u\vTgijbeeopfx$/\vt!i<b*e1p/x1N)b4qdTfjw{!f>-!!fqdpojbojueMbjShuibupTdisbbefpmxd/!t4idbfewp!x<C*j1b/t1-)!4qdpfjwo!u>M!jfhdioubTjiebbesp!x4/dtfiwb!e\vp*xsSbbmevjdvftq-T!uwdQfpsjjoeuoTJi`bFeSp)xeDfpopjsgef]e!!jg!j^$-\v!!q\vpgjjoeuoMfj$h\vi!u~T!i<b*eupixh/jtMiebfeupdxfDmbgnffss!b-Omfbbjss-f!uqbpnj!o-uzMsjuhfinupTfihb!e-puxi/htjiMbuedpfxsDjben)fusdbfGsbjsE*`!F;S!!2\v/g1j<e!o\vf$$f\vo!e~j!g<\vf!vSmFb`WExjpsefbdiut)!e+j!szfudjutMojfhuiouJ-x!phefbpintf!u.s!z1-/!2n!b>u+f!ssjpbmmp-d!/sufighmjfMduudffesMjjeh!i~u!*<<o!s~v!u~f!s\v!$<VeOsSbPdMtMj`eM!P|P!Q*`1F/O1E!\v>!>\v!$ffvomebjWgx\vp!e\vb$ijtg!!%)%O!VmNm`vTDQxPpUe`bMiJtH)I!UgTj!!?<!*1e*s!p%p%D!xepfegbjiotf!e-)tSvFj`eEbjSsxfpdeub*i\vt!!T-qtpbujMCjxhpieub!ittq!p-ufM{jjhTixup<e!b\vi$tj!g-!qebfNgxjpoefbei)tV)TxFp`eTbIiBTEuPfXhN!B.Q!*1!/%2%!!>O!VfNv`mTbQWPxUp`eMbJiHtI!Uu`bTpImBgE!P|X!T*!f?w!j1f\vd!fTSqxppueMbjihti)u!Tgijb!e\vpQxB!NtXqPpEuBMIjTh`iFuTTVi!bgefpexg<j!$\v\v$!f<ofevjsgu\v!!>\v!$fVmOcSjPtMjMw`/MuPiPhQj`MTuUdBfSsUj\ve!!g<posp!j)ujdofus!jje!/>u!i1h<j!Mjf!s=f!iOqVtNj`nTfQiP!U>`!MoJpHjIuUdTf<s!jje!/,u,i*h!j|M!utdqfpsujMej!h<i<u*!m>b!ntsqppou/Mzjshuifuntp]f!hj!!-^u<i!hjjgM!f)stfqipqutMjjnhfiiu)/ffdoobbcjmefbes*s!J|u!ihhfjuMTfqspfuiMqjthjinufJIougfph)!t,q!psupMmjphDiuui-h!jhMfuponffjucsnzb-!!>e!jsspfmdpudM/juhiihuj*M<u!d\vf$sjjge!!e|f!g*jeoffmec)bVoTfF/`uTiIhBjEMPfXsNfBiQq*t!j%n%f!i))]!Jg^j!!=\v!*OuVdNf`sTjQEP`UF`SM)JeHfIoUj`gTfIeB!EgPjX$T\v*!\v\v!gtjqepoufM$j\vh!i<u*Tmibbnesppxo!/>z!stuqfpnupMfjhh!i-ufTcipbseQpuxith]j!mj)!f^d<o!bejjesbfsdsuJMfjchpisuQ/udiphmjpMsu!f+h>!!>b,m!mf)dcowbfjde3b)sesjjs!f<d*u1M/j1h)i4ud/fwwj!t>j!cfmdfo-b!jsefbdsfsjjw!f4Tdifbwe!p<x**1*/!1@)!4hdffuwT!i>b!efpdxo)btjqepbusTsiJbmecpjx!N4bdqf]w!!j\v!*^f-t!vtgqgpjuEMujdhfisujTeiobJe`pFxS/)teifboejpgxfNeb!qgTjj${\vf!-\v!gtjqepoufM$j\vh!i\vuETOiFb`eQpPxP/Mt`iMbMePpSxOCVj$b\vt!-~!!t~q!p<u*MujihhijuMTeifbuedpfxm/gtfisb!e-pmxbSjbsefjuvbtn-!!-wzTsqupfunTpifbhe!p-xuDiphpjsMeb]f!sjB!u^d*f!s;)!b2f/s1B<u!d\vf$Sf`ouedjfgs\vj!ES`FF`SE!j|s!f*deuf)mecjbsoffd/uuMijhhjiMub-f!shBfupdnffsu)s!zg-j!!n<b^ujf]stjubimh-j!MsbffgsmBfudduffse!M>j!huiiuh*j<M!b~f!s~B!u\vd$fVsO!S|P!M*M,`,MjP!P<QT`UFIOHEJ\vM!`\vB$FfSoBe`jUgD\vF!S\v`$NjVgO!!)=O!VjN!`<E1J!S>`!MjJ!HuIoUjT)!!?s!p1g*!!\v%U%S!BeUfTg`jQoPfPeM)`SMFM`PESjOsVf$d\vu!*<\vu!iEhjjsMfbdfusjBpuodbfmsM!juhiihuj!MebjfssfBduudjfpSo!b\vm*MbjfhsiBuu<d!f\vS$`jugd!fesfjgEj`oFfSe))eVfToFj`gTfIeB!E%P%X!N*B1Q!*?!!%T%U!IOHVJNM``EBJFSS`BM`JUHDIFUS``TNIVBOE)P!XgTj!$?\v!!1\v\vg!jEejosff$d\vu!j\vpEoObFm`MQjPhPiMu`TMiMbPeSpOxV!$e\vj!s~f!d~u!j<p*oubimhMjjMheifuuTdifbmegpfxs<!!-\vm$bfjosefjugb\vn!!\v-$zVsOuSfPnMpMf`hM!P-PuQi`hTjUMBuSdUf\vs!jgep)su!d)fjsojuE!`jF!S>!!\v1g<j!ejo!f=$!\vO!V<N1`/E2J!S;`!M*J^H!IjU!T]<e!sjp!p,D,x*p!e|b!ieTjmsbfodpujjupdofbsmjMEjwh!i-ut!v>j!eebjSsxfpdeubjipto/bxmpMejbhiiTuuti]h!jjM!m^b<o!pjjgu!d)fesjjsef!d-utjbpjoCbxmpMejbhiitu//xfpoebbcimTfuei*h!j|M!mhbfoupEjjusdffdsujjep!o-bfm{MjjThqibuNJxopgepb)ietj/sxfpdeubjipToubimhMjjMhmibuo-p!jhufdpfnsfjues!z--^!!ejj!s]fqdbuNMxjpheibui*T<m!b\vo$pjjgu!deffsgjjeo)fxep)eVbTiFT`uTfIhB!E@P!X*N*BxQp*e!b%i%T!f)w]jJf^d!f=s!!O-VfNm`cEjJtSj`wM/JuHiIhUj`MTuIdBfEsPjXeT)*3\vd!fewjcs)fmdmubj!p>o+b!msMpjmhpidu/TuiibhejpMxu!d>f!sejjes!f<d^u!jjp!o]btmxMpjehbiiuT",UE["lightsPBR.fs.head"]="~t!u<s*vodpuj!tQvimzdtdjPdubomfNjbcunfbs!j,b!m1!/|2!!w.f!d*4*!1e/j2g!g.v!ttftDfpomiphsv<p!sg!m+p!b1u/!7s2p!v.h)i3oqfytft!<-!owpfjdt4v!mtdqdfPduvomfbjscDnpbm!p,s!<W!Ogumppeb)ux!ptqq)ffduvbmsbvsuGb:t1!<o!s\vv$ujfgse!f|g!!*VtTtFf`oDiMhFvBpSsD!PuBbUp\vm!gg!mopjb!uu!tdompfdb!s-doppbjut<v!mgdmdpPbuuo!fdjmcfnbbs!dupbbpumSgp!vohji!oufttotp<d!!w-fWdO4u!pdem!fubbspdmpgb!uoGj1!<u!tgomppdb)uo!pdjmtfvbmsdddpPbsubGm:v1d<f!q\vT$ffuoveqjngp\vd!!\vu$bjpgmegf!g\v!mVbTdFj`tTzIiFQF`Os\vb!mwvfddf4q!TtuidfffsojDepomJp`sF<S!!gsmbpmbvud!ftqiTfufdofSspjvehoiJo`fFtSt!<f!o\vj$gffoee$j\vg!\v\v!m\vb$djjgtezfigQ!`JfPtSv\vg!ggjmEpubduf!sjjpeso<J!`\vF$Sf!ofetjvgg\vg!j\vE$ujdgfesfjge!oVJT`FF`SU!SfBoOjTgNfJeT$T\vJ!P\vOm\vb!dgjmtpzbiuQ!`ubsfbsoBtundjftSt`jupdof<s!jgEm`pFbSu!!bufssbBoutdnfjSt`tujdpfosBjmEq`iFbS<!!fgomjpgbfue!$u\vi!j\vdmlbodfjtttz<i!Qg`mupdbfus!jbEu`uFfSo!vubdufjspjoEE`jFtSu!bfoodjfg<f!ew$f\vd!4\v!gbjueuoffo$v\vb!u~j!p<o*Dtpemsppsp<D!u\vd$ffso!e-j*g1\v/!2~)<4!uwbfnd!4-!odpmjfubjstdppqb!u-TsqjfEdxvfmjbws!!->m!bwnfsdp4o))1f/u1b*v<m!bwwfFd`4D!UtMi!f+f!osTpqmfpdDvfmtbvsg!g>j!ew/fmdb4j)s1f/u1b*n<!!+g!msppbmup!DJuCiMhTjimf!f>o,C!SfEtGv)gdgpjoEtuud!fjsoj!ew/fudi4h!joMpesfnubdmf-m!gdfpso!t~u!!<j*ot!ewsfpdp4D!uwdjffsx!E-jwso-J!nd!p-ootpuj!ujjot!pgqm!p-bsuj!Esxpfvjhwi!o-fmtbtn*s!p|o!)gfmupbbvum!bewpFu`ODWU!M>!!+t!bmufvostbfusfg)!e+p!us)pomppsDnubimh-j!mw!j>f,x!Esjbsm*v*d<f!qgTmupdbfus!jse3/!u>i!hsjpMvehfiuodfftmtg!f+s!!s<p*vzh/i3ouf!t+t!<*!sgpmmppbDus!bbm!v>d!fsqptv/hmibojfstftu!b=n!!1./!3*61!/@2!).44d4f:w/)3!!,+!!ys/33!u,!!+2!7s2p/m5p!D+s!bsmpvvdhfiqotf/tmtb!j.s!f3u6b/n:)!!;>!!.m9f/o5t9f!s+g!!s43d!f,w!!2<5*/!4*!x+/!2sup!v-h1i!o-f{t/t2!u.)!4:d/f:w6!<-!*g1m!p-b2u!!-c1!!>)!4sdpfvwh!i-o*fzt/t2!u=!!-11/!3-6y!/@2!u5)54/d1f!w+!!)s43u!b.n!!3>4!/w8o!J+n!!s4puvbhni!o<f*twtv!!,-!34`/d3u7m!);E!32f/s:v8u!y+f!us!3>!!.3!u4!/53d8f!w+!!<s*pwvvh!i-o2f`tdtu!m,)!E13/f8s3v<u!ygfmup!b>u!!2EuH!!5>d!ffwy!q<)*bt!t+f!oeiphuvOpWs!/,m!bcj*s!f,u!b)ns!p-vshjiEoxfftjtw!!=-!m1b/n3s6p!o@)!w1V/`1D!U;M!!1>/!2w!v+!!3)dsfpwv!h|i!o*fstbtm!v.d!f1q/T3f6m*c*b<t!jsef/uuvishoj!MtbbfusvBsubduffs)aE)H!!g+j!!S<FuDiJhQjSfPIDgBmMb`iQ!J,*!<i!u~e!jwXfgdm3b!iE!G,H!BtqpqQsupiyh)jdmp!o>t!u^!!j4o!!]wtfeds4p!poDpusdnfbsm!-<!udiphojtfuI!gjmob!iw!f,d!4i!uwejjfXxgEmjbsi-!!.d!ptoptQuu!ijhoj!mg!m>p!b^u!!3s!p]vtheisopfptDtu*d!f|s!!g<mupibhuj!feIpgumObWi!!>.!!tibuuevjsXbgumfb)ie!p.u!)toppQsunibhmj-m!!w>j!f^x!E2j!s]*t*e<s!pdppDoutduf!sw!f<du5i!hdj1f!I>g!mwbfid!5.)!.i!u2e-j!X.g!m1b/i1!3,8!6t-p!Q.u!i1h/j6m8!3>-!!^1!/11!3]3t*e<s!pdppDoutduf!sw!f<d^5!!5d!2]!t>e!swpfpdD5u)d2f-s!!14/d1f5w3!6<-s!p2m/p1d5/-u!i.h!j1M/b1f5s*B<u!dwffsd!5>!!ss!p>m!psDpuvihhijomf!t4td!f+w!!d<1u!i,h!jdf2I<g!mgbmip/buui!hbj1M1b5f!s>B!undjfos)!s>/!yu!i+h!jsf/Iyg-m!bfiy!q43d)f.w!!:</i3u9e!j+X!gempbuiO/Wu*i*h!j+M!bsf/syB!u,d!fss/!z><!!iwufedj3X!ggmbbci!!>4!dwffwd!3<)o.p!j2u/j1t5p-q!/2u/i1h5j*M!b+f!sbB1u1d5f!s,!!>s!/t{pxQ<u!ishfjumv!s4od!fgwb!c<<o!p~j!uwjftdp4q!/Fzoswujfsnppofnhf!o>u!CoSpEjGu)jdtppoqt!u4!djfow!!w<fsdj4E!xofpjswn/bzms-u!fdnppofthu!!>j!os!jwEfxdf4j!ww!j4fdxfEwj!s<-m!bdnpsoptou/!zjsou!fwnfpdf4h!!t>q!fmdbvnmsbpsoD!p4mdpfsw-!!|d!p*outiuh!jjMoe!fgumdpfbmug!ftsq!fudivhmjbMseGf:u1d-f!mdgpfoSt!uu!vjpoo!jg!m-pmbbuj!ssfpuvbhni!omfbtjts*f!u|b!Nwmfbdd3j!tgzbicQ!!>o!jE!GuHtBoqpqds!p-yz)soupfsnnpbfmh-!!uwyjffuxoEpjDsd-j!ssupfvnhpifoHf!totj*!<u!tsofpudv!s-ou!ithqjfMdbvfmsbBsuDdpfmsp!su!i+h!jgMbbcf/syB!u,d!ftSq!fodjv!mubtsoGp:d1)!m+b!dgjbtcz/izQ<`!b~f!swBpujdef!Sd`pundqfvsujfEN`vFmSu!jetjdpbwu!u\vf1s!j?o!hT)UdIpHoJtMu`!BjFoS!Bw`fUdD4F!So`pNsVnOb!mg-j!$d\vp!o~t!u<!fjdoo!bwjfedb4s!swJjeffxuEijhsj-f!Xdfpoojttup!dj!o+!!wfftdv4g!gtjqef!d>v,m!bfstDvpgmgpjsE-u!ddfpsojteuo!jj/ou!ighmjpMbeuf!utdqffmdgvfmsb!s<Gf:d1o-b!jdepbostsuJ!ejfou!ighmjpfbXuf!osjptvphdi!o+f!thto-j!sjfoupuvbud!Twjfudm4v!nt!j>o,h!msfbTmdvbdufuqfTsu-d!fjsojpevouj!/wufidh4j!MnevfmuudjfTmdgbfusu!f<sh*o!j|s!fwufudb3d!Tgfbmch!o>j!tE!G+H!Bfqdqosbpjye)bosp!s>n,b!ms-b!mwvjdffxqETjusd-f!ssjpevohji/oufithtj*M<e!fwufddf4m!gGftst!F<t*t*!h>o!jtsqffuduvbmdbTsjDupmmvpns!!,+!!hgobjcs/fyu!u,b!dtTqffmdhvomjbts)G!:.1!!1+/!2g)b!c+/!zs<p!mgpmDpfbtuv!gFgtjte!/>m!bgjbscf/uyb!n,!!>g!bfct/vzg<g!jgem!p4bduf!wF!n<t*!h>o!j2s/f1u!u.b!dFTtjtu<m!vwnf!d-4h!oGjbswfhu!u>b!dtTqffmdhvomjbts!D-ptmtpfso!i,h!v)p2s//1m!b.j!stfqufbdnv!m-b1s:DGpsmbpmsv*d!f+q!t1//m1b5j8s7f2u:b<n!!w-fsdp4m!pGDnstb!m>v!dGftqttF/tmtb!j+s!fGubbwnh!!-0s!j)E2x/f1j!w./!zFsnutf!n+p!fGhb!w-hm*b<n!stpjoo/hzmsfuTfdnbpufuhf)sh!o,j>s!fGututbFdtttj<u!mnvvNmfuujvTqdnbpudu!f<sJ!Q,`>M!BGDnPtS!Q+J!DFFnSt!<+!!~f!dwopbjjee!bSsFs`jE!j>s!ffdduo`bQjiezbtsjsdJbemf)udiphojtfuX!fjooj!tJpodd!j4edffowu!M<j*h1i/u1!)e4jdsffwd!u>M!jhhoijus-f!udupbodtTuj!ujmov!nH!f4pdnffwu!s<j*d1D/p1o)u4fdyfuw!!h>f!phnofjussfzu-u!bddpToftmuh!ojjot!!Q4idzftwj!d\vbgmjNebouff$s\vj!b<m*!tntbfuofishjvbpmS-o!fjfoiptv/um!bSjfsgfmufbdnu!f-esMjjEhxifuj!ws/fzgsmuffdnupffehM!j-hmibun*s!p|o!/gzmspubfun!pefphu)OGME!S>C!otfbfuivTsMbCuJf!)+e!psup)mhpfDponfffuistz//mobpjssnfbumb-n!!e+j!sffddoubMjjehbisus/je!j>s,f!dsubjmpvod*f*q<T!owfffdi4t!!j\vsOsFbFeIjTb`oFdTfV!!>g!feepgujO$M\v!!+\v!gejjesoffd$u\vM!j<h*itut/fdopimhpvsp<S!u\vb$pjdgsebffgm!dV/TmFb`jDsMfFuBbSnD!P-B1U:\vG!ugbmppdbsub!fempdu/OmMbdjds!f>u!btnb!u-v1sGbuubfp)despbuf)mhdf/pmnbfjussfzu/bdnm!f-bssjdEpxbfujOwp/sznsbumf-n!pefjhs!f-dmubMnjshpiOuu/bepjdssfbdfumjdp/oz*s*u<f!nwpffdh4)!GdEdSJCsusobfenjobposdjfw!o>F!!e+p!ufOdModbdj!e+b!SeujbspfddsubMfjmhdi!u>/,d!psmbpmsv<d!fdqmTfubbspddpsbbufTmqdf!d\vvUmBbPsD!S,B>F!MdDd`JFsTsVb!egjfbeogdjf$!\v+!!|C!S*EuGi`hHjHMYe)feujdsffmdgufMsj!huiiuh/jeMjesffuddufjmpgof-S!!hufvppnofju!s-zm/bwjjsffxuEbjns!-m!bhjfspfnufbuNsmzb/ddjmtfzbisQd!pobju!Ouptsonpbdm!--!znsbuuffnspjfbhm!/udymffubospdDpdbjusGu1f-n!pnfbHu!fosjj!bumt/odpmdf!b-sfddpobbujGe:b1S-u!bnpbdusfbsfjmbdm!/4ddmffwb!sodjp!buutSoppvdh!i-offdtotb*j<e!b\vs$sfjo!e4jdgf\vw!!\vo$jj!guetfogp!dV!T-Ff`dToIbFjFeOb\vs!!t4idfffwo!Toqjf!duvtmobpsd!),m>b!djjstszbieQj`bsobdmfv!d+f!qCTSuEdGf`sTjiefofJo`)FeSj!sefjdpuwM!j~h!i<u*/sepjmspfDdfutjvpgog-j!eh/fmpbnjfsufsuzb/nw)jufsxfEcjnsb-M!`hGfEpSnCf!u+s!zf/doopbsjnebbms-s!jn!b>u,f!sfjtbvmg/gtjiEfufdofDspjmeposj-/!unibhujfMsejfbumd/ftmigfffso!S|p!v*huiiohfjtMte*f<u!d\vf$mfgofesj!gu\vi!hsjfMgemffudduffmegMfjSh!iuuv/peojjs!f-dmubTjqsffduvbmnb!sm!b,j>s!fjusbsNbmebjdbjotdzfi!Q+!!oCjS!EuGt`oHpHdY!)-ezjssuffdnupMfjhh!iuuy/feujospfDddujjspuof-n!phffHp!nofju!suzt/owpjdf!x-Efjdso-b!jhefbpsnsfju!s4zd/fowp!sonjb!mu-t!onpbdu)fmsbjdbjmt/ztiqQf`dfvtmvbgsgDjpEmupdsf-s!jnebouJf`sFjSb!me/jtpqwf!d~v!m<b*ssGp:m1p-D!fntbvugfgsjjeb/mm/bsjpsvfhuibonf)tuts*f<c!nsbfMg`mGfEdSuCf!e+M!jfhdioub/jeejbssfsdju!E>j,g!gfvt",UE["lightsPBR.fs.body"]="gQjiezotfj$d\vb!m\vNgbjuefosfj$b\vm!!<nbb/u*fwsVjwb!m-<q!bnNbtutffsojibhmv/peSjogfgfvittf)DEp3mfpssv!u>y!feuj!g>g+v!ttftDfpomiphsv/psShocf!f+i!t)/2m/b1j!s.f!unbfnu!b\vmQoBfNtTtTGFbOdIuHpVsP*S<O!FwFfIdT4`!FeTyVz!!g>f!engbjy$)\vb!c<t*)1e/G2e!y-)8h1f/p1n!f-utstzfOopishnvbpmS*o*f-f!ibtc)tq)nebGmedz!)>h!ftptnffouishzvOppSsonfbfmi*t*/*m<b!jgsmfpubbun!!h\vfgpjnefoufs$z\vS!p<vchhiso/f*t*tw!V>w!!n-bqyb)Nnsbpym)peDyozf/fyi-t!)eEy3zf/szv*u-y!feuy)zs/b{f*o<j!MnpbUumffsyjfbUmq/bsNpsvphmipoDfotftf!i>t!!n>b+y!)ssppmvphDiooffftittG/bmdbujpssf-u!b1n/!1\v6Q3B6N*S<P!MnPbDuOfFsFjIbTm`/FsTpVv!hgifoefgtjt$!\v,!><!shpfmppnDfoufsfziStp!v>h!isopfmtptD<o!fnfbiutf/smjbbjms/fsupbvnh!i\voOfFtFtI!T>`!FnTjVo!)gnfbeugfjs$j\vb!m\v/gsjpevohfi$o\vf!t<t*-1!/22/!1-*t<t!fnobiuhfvspjSbumb/ptdqsfbdfvmmdb/smDbpjmspfsu!b>n!)nojjyn)!w>f!dt4t)f1o/i1h5v*p-S!uebjpgdgsvbtffmDdp/mmpbsj/ssfhucb-n!!n<ftutbfmooifhtvtpGSbzdsuupfsn*p<f!hn!b>u,f!stjtbfmo/ithqvfpdSvumbbpsdGs:b1f!m>d!/2m/b1j<s!f\vu$bjng!e<f*g6!3J6P1S/\v1!!n-btutffsojibhmv/pjSpusb!p>d!sjbpfsm<d!/\vm$bjjgseffugb!nT)QyFbDnV!M>B!St\vt!fgomiphbvup!StuqbfpddvsmbbfsmJdo/umfbojtsjfuuzbGnb!d<u*pusb!p>d!stbqffmddv/mmbbsjJsofuufbont)jfuuzb<s!vwufbdt4!!>t!qufbdpvdmsbbsfDmpdm/pmsbGjbsdfuupbsn!!>\v!gtjqefodfv$m\vb!s<Dzp/m*pwsV<w!!n-bqubfNstjtbfmo/ithqvfpdSvumbbpsdGs:b1f!m>d!)nEj3yf)stvqufydfvum!b>s+J!otutffootijhuvzpGSbudbuppdss-b!f2m/d1/-m!bnjfsufbumbonf!t\vtQGBbNdTuTpFsO*I<H!V\vP$Sf`mUtBfP\vD!SgBmFpMbDu`!FtTqVf!dgvfmebgsjJ$o\vu!f\vogtjjeuozfG$b\vd!u<pys/!*>w!V2w/!1-<q!bwNfudb4p!dtsqbffdmvdm)bEs3DfpsmvpusyGfbud!u>p+s!!u>b!pwdfsdb4f)m2d//1m*b<j!snfbuubfns!j\vbQmB/NtUqBfPdDvSmBbFsMGD:`1F!T>V!!2g/f1e<g!j\v$$\vf!o<e1j/g2\v!!>n!b1u:fGsujbbpmd/stbqffmddv/mmbbsjDspfmupbsn!!><!*n5j1y/)1n)j4od)fqwp!x>3!)1)Gnubbupfdssjbbfmm/dj/pmsb!j.s!f2u/b1n*!!<0t!t)fnobiuhfvspjSbumb/pjdpssb!f,m!d2!/>1!*t*t!f+o!ithqvfpdSvumbbpsdDspbmfpmsdG/bmdbujpssf-u!bwnf!d<4u)b2p/d1s*b*f!m+d!!t>q!fudbvpmdbssbJfomudf/omtbjjuszfGubbdnu!p\vsU-B!PeDjSgBgFvMtDf`DFpTmVp!sg/fsehgcj-$!\vn!f\vugbjmeoofft$t\vG!b<d1u/p2s!*><!!1\v:$Gfsmbtmfv\vd!fnqbtu/fmsbjjbsmf/utbqnf!d<v*msbpsuDdpbmGptst!f>o!mnbjuyf)nw!f-dc4h)s1//s1p5m*p-D!fetjvgg",UE["toneMapping.fs.head"]="g$jjego!fa$e\vf!g~j!o<f*es)pVmTpFd`)VfCuPb*s!v%u%b!t)!eofsgvjuoffse!)<VstpfmMpjdo!f+b!suUbpNoufvNqbuqvqPjToFhD*B!!}>}!!sepfmgpjdo!f<e*)sVptmfpSdf)juojiGbUsEePUepooBfUNSbSq!q>j!oshp*m!p}d}!!<esfpgmjpodf!e+)!VutbfNDujvoqfopJoTUFpDoBf!N>b!qsqpjmophd*!!<}7}/!1e!f0g!jfosfvet)pVqtyfFBhDoFjTqGqjbmNnfjodpUup!o>f+N!bsqpqmjpodh!*<**\v!!*v3o1j7g8p1s/n2!!g-m6p1b7u1!1u/p1o.f!N-b8q7q4j8o1h/F1y.q)p4tdvfswf!<-!*\v7$8f3o8e1j/g1\v.!!\v-$4j2g9!1e2f/g2j!o-f9e1)2V4t6f/M1j.o)f4bdsfUwp!o-f*N8b3q4q1j1o/h1*.\v!!-w9f1d341!2M/j1o.f!b-s6U8p5o1f7N/b2q)q4jdofhw)!w)f4du4b!nd!p>m!pusb*N!u|v!qsufvuPvTsFoD!Bu!p4oufbNnb!quqtjoophdF!y<q*p!t*v8s8f8!4+9!/d1p!m-p7s7<6!2~1!/\v1$!f-o4e3j9g5\v1!/\v1$)j4gd!fewf!g-j*o4f9e4)4V2t/f1S!f-j5o4i9b1s:e/U1p!o-f9N6b5q6q4j/o1h)*4\vd!fwwf!d-4*!1S5f9j3o1i/b1s!e-U1p1o7f8N1b/q1q!j-o:h2)8w:f6d/41!)d4pdmfpws!*)!4|u!bdnp!m>p!su!b+N>u!vuqpooJfTNFbDqBq!j4ouhbFny!qupttovpsdf!<|!!s*fsupvmspod!!t4bdufvws)bhuofj)qdqpbmNpfso!p0U!d)jwnfmdj4G)T2F/D1B*!!4,d!fdwp!m~p!s<*c*!<0!!~b!!\vo$sfvouefjsg!\v<!2\v9$1j9g4!3e/f1g!j,o!f*e1)2V6t:f3D4j5o/f1p!o,U!pwo!f+N!b:q3q8j4o9h:*/\v1!)w!f+d!4w!!P>q!ucj!n4jd{ffwe!D<j8o4f6p1o:U1p1o1f1N/b1q!q.j!o*h7)9w8f6d543!1d/p1m!p,s!*w!)|!!+d!pwm!p>s!!b+!>4!dufpwo!f|N!b*qwq!j4odhfFwy)qupjtGvUsEfP<e!odBpUmSpSs!!4>d!fnwb!y\v)*whfodj4q)q1b/N1f*o-p!Uddpjmnpmsj!G.T!F1D/B1f1t5V*)<e!fsofjugvfseo!!gqjp$x\v)!)\vdgpjmeposf!$+\v!!)~7!/<3*!*+3!/d3p)m4pdsf!w,!!-1*/761*/*1!!0,!!)*d8p/m2p!s,!!+s!p)m7p/d3!!+",UE["toneMapping.fs.body"]="g$jjego!fe$f\vg!j<o*fceh)sV/tefJM)jhoofjbqsqUbpNoffoNpbUqdqjjnomhj*G\vT!FJDeB/!s>h!cc!h>s!/MejJo!f\vb*shUopjoqfqNbbNqfqojpoUhd)jJnem/jsGhTcF*D<B!f\vt$Vf)mejfgo!jegffgej!ogfjem)fV$t\vf!S<f*jcohisb/seeJU)phoofjNqbqqbqNjfoohp*U\vo!pJfeo/jsDhecf!{>j!nSjfujqoPi!b>s!ecUhpso/feNJb!q\vq*jhoohj)qJqeb/Nsfhocp*U<o!p\vf$ofjmDjfgt!Ve)fegfjo",UE["output.fs.body"]="g$jjegoeff$g\v!!V\vTgFj`eUoSfB$O\vT!N<J*TbT/JsPpOm\vp!D\vf$tjvggegfjge!!P-QuBiRhVjFM\vh!owjfpdh5u!vJpe)!5>d!fwwf!d>5!)epJv!u5hdpfjwo!h\vMfjthmifu$-\v!!n<b*u1f/s2j!b-mu/iuhsjbMohtonjjpthtujvppo)B5mdqfiwb!!>,!!e1J/!25*d<f!w\v!$\vfFmVtRfB\vQ!Pw!fgdf5e!gJje$!\v>!!\vwfftdm5f)$p\vv!u\vhgpjjeoohfM$j\vh!i<u*-*!2e/j1g!g,v!tbfiDqpmmBposp/jbt!t+j!n)tnobbusfus/jmb",UE["instancing.vs.head"]="g$jjegoeff$g\v!!V~T!F<`*J{OzTyU/B*O*D1J/O1H!\v-!sbjueu)s5jdcfvwu!f+!!nybjus5u!bbnN)b)ufs{jjymJbontsupboo!dofsev<u!fwsf!d|4!!*uysjbsoutbgnp!s5nuEbjns!fodju!j-psoj)ej!o4!dwf",UE["envmapPhong.fs.body"]="g$jjegoeff$g\v!!V\vTgFj`eFoOfW$N\vB!Q<\vz!uwjftdo4f!udobJnqfbsNbwUopfG!s+b!hi!u>h!oofpssunTbsmbjm{vfd)fwqXtp!s+m!e{Qzpyt/jsupjmppoD!w.o!fv!D>b,n!fusibhQjpMthjoujjpphou*v<p!!w\vf*dE4E!Bx`pHsOmJeEOOpFsMnCb`mQ!B>N!WjOoFw)fesftofjUgsfbeo!tggjpmsfn$E\vj!s<f*dzuujjptoo)fouposJnqbbmN-w!ovfW!j+f!xiNubhuosfjsyu*T<s!b\vm$vjdgfeqftg!!-F{OzWyN/BsQp`mNpPDEwFo`fS!F-GuMiFhDjUMJhPoOj\vp!hwufvdp4)!ysjfng!m>f!duuiWhfjdM!h>o!jspfhgumvfpd!u\v)*dYbJnNf`sHbOUJpEGOsFbMhC-`!QxBpNsWmOeFO)pesfnobjmg*f<e!!\vg$jfmmft$f\v\v!!<w*fzdu4j!tsoffgumofJdqubWNfwdo!f>!!+s!figushbodfus)udTbsnbfmsvbdUfpqGts!b-h{-z!yx/psspmmepODpwsonfb!m+-!!usifhgjsMbhdoujjpphouSvbpu!j-pu*i<h!j\vM$hfoojepjhgu\vv!p\v)$yjjgne!f>g!!uFiOhWjNMBhQo`jUpZhQuFv`pD!V\vCZFM\vQ!JwUfMdV5N!`fHoOwJDEpOmFpMsC!`>Q!BuNfWyOuFv!sgffDevgcjf$)\vf!o\vwgnjbeqo-f!$w\vf!d<4*)1g/m1j)q5FdofwwN!b>q!!s+p!mspfDgwmoffd!u5Wdffdw/!y\v-f!tsmffg$m\vf!d<u*W1f/d1/!z-{d*f*W<u!d\vf$mfgmfjsg!!-eqfbgnjwooffe))WFVOfWcNvBDQf`sUvZuQyFf`uD!V>C!Fs`pVmWp*D\vw!owff!d5",UE["lightsPhong.fs.head"]="htoupsivQdouo!jCmmCj`ofotQvigpgojhENubduffssjjebomJ!`|F!Sw!ffdt4v!gegjjgEguvdtffsDjpemopJs`<F!Sw!ffdo4j!gtfqef$d\vv!m\vbhsoDppimQposo<j!mgCm`pubduf!stjqEf`dFvSm!busdTfisjjoEj`oFfSt!tf<o!jggmfpeb$u\v!!t~q!f<d*vsmpbmspTDufstfvoghgujie</!m~b<j!swfpujben!)SuFs`fEcjnsbfMd`uG`ECSmCj!o+o!Qfidpoobhj)edbpsostju!!>j,o!!fJtovdgjgejfEouudMfjshjieuo!je/jusifhdjuMMejfhuiduf-m!gdfpso!t|u!!*juoi!hHjfMpenffuudsfjmdgDfpso!uufiyhuj!Mheffpundffumsgzf-S!!dupvoptouj!!j-om!bCjmsjfouobQni!pmobhjNsbfuufbsNjhbomp!inQbouofjsmjCb!mo-j!!juotpovpud!!S-fzgsmuffdnupffehM!juhyifuu!ospfDgdmjfsduuffnepMfjHh!iouj*!!u|t!ogpmdp!b-uf!deopbujOeMb!s>s!jt!b4udvfswb!uofj)!euptuo)phdf)phnofpuisQzo/oojpmsCn`bfmt-v!gegjjsEfuddufMsjjheiouJ/`eFjSs!fedjupjwp!o~*!*<<i!uwhfodf4s!ujTsssbbmevjdbfoqdtf/!m>b!jespfuuObMn!!++!!e*jtstffdoujMojjhiiTus/bdmpvmdpfsq<t!/smfbgjmsffduubfne!M-jshpimup/DesjbsmfvddufEqjtg/gmvbtjfs!f,u>b!nj!s-smbbenjsbpood/fz!s+u!fCnSpEfGh`!M-bsnjcEfxsfuj)wn/bzusfusfjnbpmf/he!j-gogpvjtufdDfpsmjpes/*u<i!hsjfMgumdffdsujfee)MhjohpiiuQ/oeojjsmfCd`uGTEqSfCd!v+m!bfsd!o,b>j!ejbss",UE["lightsPhong.fs.body"]="<CimujhooofQsiupToshbNmbvudffsqjtb!m>!!nibuuhfosfjsbumT<s!bnmbvudffsqjtb/mm/bejjsgfguvbtnf!D<ptmtpfso!j>o!jeijtg!g>v!ttftDfpomjposj/isThscb<m!vndbfuqfts/jmbbmj/stfqufbdnv!m<bssbDmpvmdpfsq!t>!",UE["aoMap.fs.body"]="g$jjegoeff$g\v!!V\vTgFj`eBoPfN$B\vQ!\v<!*\vt$tjfgo!iehfvgpjso/fmeb)jBsPfNuBbQn`!S-`o2p*j\vt!vgmmdpdbPuu!obfnjccjnfbo!u-PWdOdumpvet)joppoj!t>v!m)dudfPysubvmsvfd3fEq)TbfpuNvbqqn-p!dw!V>w+*!/ssb!m.v!d2f/q1T*u!d+f!sbjpeNobjq/JuoiuhfjoMtejfuuzd!f,m!g2f/s1!<<!*\v*$sfjmEjxgf!jewf/gzjsouffen)pBfPhN!B-Qm`bSn`s3p*o\v/!zgsmupfbnup!fbhn)cujpfeo)ufPudbdsmvvutbjtp!o>!!>W!O)uupfey!uuvbspfm3gE!)\vb*pSNCbQq)-e!fwoVjwg3f*e/!s%!%.!!*2Q/B1N*W!O+F!`bFpTNVb)qeJfooujfgoftej!ugzj!$,\v!!2</o1p<j!t\vv$mfdmdjPgu!oeffjgcjnobf!e>)+B!PfNtBvQg`gHj`E2u*d\vf!sgjmepobju/!ubinhcjjMfeofuuPddfdmmgvftsj!p\vog!j>e!o)fu$f\vy!u<v1s/f23!E,)!bzpuNjbtqo-f!uwoVJwq*b/Nhp!b.!!+2!/*11*/!2+!!.b!pcN/b*q3JwoVuwf!o-tqjbuNzp!b,)!E23/f1s<v!u\vy$ffum)j!g>!!eofpgjjtovfmed)dBPPuNoBfQj`cHn`b3!*u\vb!pgmmgp!b\vu*!3b`nCc`jQfBoNuPPBd)demfvotjjgpfoe!!>g!j)muff$y\vu!v<s1f/32E!),b!pzNubjqt-o!fwuVowJ3q*b/Nhp!b.!!+2!/*11*/!2+!!.b!pcN/b*qwJVowu!f-oqtbjNupzb!),E!32f/s1v<u!y\vf$uf)m!j>g!!oepfjgtjvomfded)PBuPoNfBjQc`nCb`!2u*b\vp!mg",UE["transmission.fs.head"]="g$jjegoeff$g\v!!V~T!F<`*UbS/BuOiThNjJMTeTfJuPuOj\vn!tvoobjsgup!s-ns!pgmmppDbfut!vbgugujfeo!v+b!usjppmopEDjetfuubbovdoff<u!uvbo!j+g!p*sGn!!.w!f1d/42!)b)u5udffowv!bousjvpuofDsp!m<p*st<t!f\vo$ijhgvepfsg!!-V1T:FG`sUbSmBvOdTfNqJtT!T-JsPpOmNpBDQs\vb!mvvodjfgqpts!n-!wt!b-noq)mGfEsS3CEu!oufsnbooptsnjjwtotFj!p>o!NGb!q4<d!f\vw$!f<o*efjdgo\vb!u\vt$jjEgoepfjgu!bVvToFf`uUuIbJ!D-LsOpFmTpTDNoBpQj\vu!bvvoojfgupusbn!!-t*bznbqSmofpsj3tEt!junitjodblsouf)tituNhboqf<m!!\v-$cfhose/jugi\vh!jvMoejfgupusjnn!twofbds3u!)uospbjoutbnvjotftujupBofTnbvnmqpmWfzsmTqjq{bf!<>!!vsopjmgppDsenf!utbbvnoqfmufusb3!E4!dufswb!o<t*nsjptjt!j-ptotTfboniqhmvfpssN!b-qt<e!svpopjDgoppsjnu!dnbbsug5f!sv)NfpmeqfnmbNTboupsjjtyt<j!n\vt$ojbgsoUeuffgh!!V>T!Fu`iVhCjPM\ve!f\vu$ujjgnetfogb!sJuP!S5\vd!fvwo!j<g1p/s3n!!>g0m!ptbeus!pjppDso<p!j\vu$dfbosegjfgs\v!!<\v1$/j2g!e>f,g!!tTeQsFpDpVDMoBpSj\vu!dvbosjggfpss!n<!xg/mtppbQud!etoq!f0d!vzmyb/stJpoQudfeoot!j>u!zt<e!svpopjDgoppsjnu!dwbfsdg4f!st!q3fddfvwm!b<s*D1p/m2p!s-<u!j\vy$FfzobeSjegf\vu!dvbosjggfpss)n5!dgfmwp!b+u!!yujssbuobtNnxjftjtwj!p+o!<y!jvsoujbgNpkspns!qg!m>p!btup!Qudiejod!l5odfftwt!<<!zvboSjogppjstnt!jnnbtuo5b!svuQ!s,p!kofpdjuuNjbtupsqj!y><!!uvjoyjFgzpbsSne!fwufddb4s!gvfDsb!n4fdsfbwQ!p<t*jyujjspuob<N!m\vf$efpone!j-gs\vp!jw!f-dt4t!fhofludWjpimuv!n-fwU!s-boo)tznbjStotpjjptotSjbnzt)odbpsoUtfun!vjmop!Wwuffdh4!!>o!-z!bdSpooptjut!tjjon!twofbds4u!!w4-d!fdwp!o|t!u*!fjdoo!bgumtpjbEuo!pujiujbdvlooffututb-!!udbppomtgu!!ojjo!!ugtmoppbdu!!-jsppsm-p!Ddoppojtuub!vjoof!unubbu!54!dnfpwe!fomjN!buutsojpyd*!!-|t!twffodl4d!jsifug!subbdpumjgp!ooWjf!duutposp!d>!!-ssfpgjs!budbup)m.g!!wo-j!!ouptsonpbdm!j-{yfj)sou*b-N!k2p/s1q!!05!ujbpns!*o<j!!wuftdo4p!dn!p-eyfjmsTudbbNmxff<j!wn!p5eufbmnT!dobjm!fu/tyo!p>d!!m-fyojhsuuib)Nwmffde4p)nn!p5eufbmnN!boujs!juyt]o!p1d!!^-/oypzj{u*j*t<p!qn!p4edffmwT!dobjm!fu/tzo!p>d!!m-f1o:hGusib)mwvfddf4q)tn!puebfpmmNgb!uosjj!yu]t!o2p!d^!/-yszp{m*p*D<s!bnmpvedffmqTtd!b4mdff/w{!!o>j!!muftoohpudi!)-wsfpdm4p)DnfptevfgmgNjbeu!s4jdyf]w!!3o!j^!/uytzo{p*d*!<-!tstffuovishov!posp!sunbbpmmjg{!fo)js!fugtsobpddu!j-pwo!W4fddfuwp!so*j!!+u!tuoipjdd!l-oof!t4td!f+w!!nopje!fumtTodpbdm)fo<p!j~u!dgbmspgbfuS!fbnqvqmmpzWJMpCsJUupfShp!v5hdifowf!t~t!)~d!p<oftduo!bjjoe!bgsm!p+b!uf!dsopbvuhuijonfttotb-s!ud!poostvuu!fjso!!<g*mfpdboub!ujtpjsE*o!p|j!tstfjunvtsoob!ssup!v+h!iuoofftjtd!j+g!gdfmpbDnoqp)jjupbsv!o+f!u3u/b1!!..)!q3y/f1!->!!1f/d1o-b!u2u/j1n*t<o!b~s!uw!f4dd5f!wh!f<ufUdsobbouttnjjEtotpjjpuobTvbonfqumufb)!d0p!o*tsup!mjpoD!owpfjdu3b!vgosfbuhuDbp)phspem-.!!d>p!outouf!jjdoj!gggmfppbDuo!psjpuvbhviooffututb-!!4ddpfowt!u|!!jfot!mgfm!p~b!u<!fjdposb*j!e|b!sg!mopsbvuu!fgss!b|n!f*c1v/g1g!f>s>M!pfed!o>b!umtpjhE3o)pujsubbovtonfjututbj)p!ogTjb!n|q!m*ffsdTojb{uft/jyE*o!p+j!ubbqvqomfzuJupbs!UupbSppmvgh!ioojf!tutt)osppdv!h-isopfmtptD-o!pjjpusb*v<o!f\vu$ujbg!e4fdgf!wu!foyju!vustfo3pEdM!p-efFdYoUb\vu!tsjfEuovpsjot!ttjSnHtCoUbpsMuj!oufbbpsm)gu!foyju!vustfo3pEdM!p-efFdYoUb)juesbbso!t4ndjftwt!jopjo!Tubtnoqpmdf)soNpbjqu-b!vgosfbuhuDBpfpnsvem/pyWzz-m!qgqsbb!n4fdcfvwg!g~f!s\vMgpjee*o*f<$!\v\v!$<f*m*tefp\vM!ssffgugvvscof!ntbSsHgC!U-pzMyj/oefsbpsp)Duhfbysugv!s-fq3bEN)sufsmbqontbnTjotptj",UE["transmission.fs.body"]="g$jjegoeff$g\v!!V<T*Fo`pUjStBtOjTnNtJoTbTsJuP/Om\vb!jnsbfuufbsnj!b-mc/huss/booptjntjttjtnjtpoob!s>u!!u-sfbtovtgngjjtEtmjbpuop<u!)nybjunf!s>j!bfmt/vugsgbjoEtmnbjutptuj!p<o*Bompqjitbt!j>n!t2o/b1s<u!/nmbbujfssfjubbmn/!u-ibj/dolpojfttttj!n>t!oubisjud!l-obfitqtm<B!onpbjutftsjjnbtmo/bbsuuu/fmobvjbsufjupbonE)jytjunb!o>d!fb!i>q!mbBuoupfjotvtbjunjtpoobEsjut/umbbojdsff<u!bnnb!u<f*sfjdbomb/ubtujuEfoopvjbuubjvpoofDupumbp/sm!b>j!sbfuuubfno!v-bsupjmppoDDoppmjpusb<v!o\vf$ujugbe/fmgb!jVsTfFu`bUnS!B-OtTtNfJoTlTdJjPiOuN/BmQb\vj!snfbuubfns!j-bsmp/ju/smbbojtsnfjutbtnj!p-oy!j+s>u!buNfuydufvkspfs3QEv)!u-s!byojtsnujbtNtxjfpjoWNvb!q--y!jwsVuwb*N/msf<e!p\vN$vf!o-etjpgq\v!!-\v1$:jGgsebfmgv!dVfTqFt`/UmIbJjDsLfOuFbTnT!N-BsQp\vm!pnDbsubfmsvjdbfmq/tu/imjbdjlsoffutbtn!!+->s!pumfpyDufvtsvfg3gEj)eu/imjbdjlsoffutbtnN!b-qt-t!fwoViwh*v/phs</!m\vb$jfsofeujbgn\v!!-wwf!d-4o!!q)potp!j>u!dwbXspgsfmSefQnpvtmjpuWjMpCoJ<u!fwhf!d>4!!owp!j>t!tojpnstnobbmsju{!f5)dvfDwb!n<f*sybjQsputbjNuxjfpjoW!v.!!-qmpbtn*s<p!ow)fodp4j!uod!f>s!jjEonwsfpsgttfoUbs",UE["oit.fs.head"]="g$jjegoeff$g\v!!P<JsUf\vm!q\vn$beTfsgpjmopfD!uNoBpYs`GEuFjQpU!IE!3:s:f:m:q:n/b1t\v!!n\vs$pegfjgojvo!f<!shfmm`qGnsbbThiDupqmfpEsu!jnpz!`EG3ssbfhmDqpnmbpts!\vn!svpogj",UE["oit.fs.body"]="g$jjegoeff$g\v!!P~J!U<\ve!Jg!m>p,b!us!pgmspbDhlEdfbqcu!i|!!>f!thmmf`!G~s!b<h*Dbp/pesJe!/.{!<1!/\v2$)j!g+e!fsgf!jPmJqUj`u2m7vCNJbUiTq\vm!bv!j.o!u1!/i2b!m>g!Gbm/psbpum!p>D!uqobpdslgI!b<msgf3jym2q7j)uwmfvdN3b)igqsmbbh!E+f!qbu/ie*J*!<+!!wcfhds3/!egJv!m>m,!!>c!hvso/qsbpdmlpIDbumogp3syg2!7|)!i*bimugqGfmEpubtuf*s<b!fgos!b>h>E!fiquuqif!E>h!bgsvgm)m!/gyj<!!~\v!$<foosevjugf\vs!!j<w*fidu3q!fgEshbbhsDgp!p-sieu!q>f!Ejhwbfsdg3.))h3md`fGws!b>h!Dhpsp/sieu/qyfze*!<\v!gwjfedo3f!$m\vb!t|u!E*fiquuqif!E>u!tuffiyufsmvGgf!u=d!ii)upqjfuEEhfbqsugi!T%b%n!qimufqsf-E!ugtsfbshbDfpop!s?e!-i!u1q*f/Eshhb<s!gw)f!dg5j!!m\vbfttumGfs$p\vo!u|D!p*mipusq!f>E!uutffyifumsGvfgu!d?i!)ipujqufGEshpbosugD!p%m%p!siTubqnfqEmuftsf-s!bgfsob!h=D!pipusqef-E!h1b*s<g!)e!fgqju!i\v/SsFhG!G>V!CwIfUdQ3F)E.`NFBTYS`FEWFFQSU`IF*T<V!!ggsfpeogujD$p\vm!p~s!!<>o!smvbutfusG!s\vpgojueDopfm$p\vs!<|!!c*bidulqDfpEmuptsf!i>u!swvfgd!5?)!1i/u1q*f<E!h\vb$sjgg!e}f}g!!iVuTqFf`ESuFtWfFsSbTfFo`!E=F!QiUuIqCfVEGhGbFsSg\v)!!ggmjp!b\vuf!tgmvfs$u\vi!f|t!u*EifuqqufiE!u>t!f.imubstvugE!f=q!uiiu/qyf<E!hgbmspgb!u}!}o!fibusqfftEuuEtffqsubif!o>!!?m!bituuqEffEqhubis/gz)<!!g\vj$!f\vmStFfG\vG!VgCmIpUbQuF!Eo`fFbTsSfFtWuFESf`qFuTiV!!>g!f.emgbjt$u\vE!f<qbu/is/pym<p!DgumoppbsuG!ugtvbsmu!i.f!t1u/E2f!q>u!is!f>j!mmqbjtuumEvfNqbuiiq/mzb<!!u\vb$pfmoge!j\vg",UE.blitScreenVS="~b!u<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<t!pwqb)s3zdjfowh!!>w!fwdV3w!!w<V*w1</!2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/",UE.encoding="~w!f<d*5s!pMmjpodf)bssbUfpoMjjMopfUbmsf)yjfoU!uwvfqdo5j!!wobsmvvuff*s!!||!!s*fsupvmspod!!w5bdmfvwf)<s!b~f!owjfMdp5U!mnfbyqfUUfqybfNmwUopfM!j5odffbws!)~w!f<d*5f!vwmbbmwv)fC*H!S|t!psUfsubvfsooj!MM!joosfvbusfUsp!M|j!o*ffbvsm)bwwb!m5vdff*w<)!m~f!ywffUdu5v!qtuSvHPCpUUpsMbjfoofjbms!)5jdof!ww!f~d!5<!*wfbvmmvbfw*)!s|b!fsofjuMvpsUoC!HwSftd!5o)snvjuyf)sq!p|x!)*wfbvmmvbfw/!s5hdcf!w+)!s1b/f:o5j8M9p7U8m3f:y9f7U!u,v!qwofjd!45)d1f/w1!6~3!2<4*3b8/1f2v5m*b-w!!w-f*d*4*)*39/154*2*4-1!1w/b1m)v4fd/fswh!c-!c+h!s1//f1v8m8b4w:):m4b9v1r9F-o!bwifUdt4t)fmmf)t4tdUfiwb!o-F3r:v/b3m2)!w+b!mcvhfs//sfhvcm-b!ww!f-d*46)611//115)145d6f*w*!*.*!-6!6w1b/m2v!f+/!b***<7!7~7!2w5f/d15)!4Mdjfowf!b-scUhpst/SfHvCm)bjwo)!xwpfqd)5y!jwnb)m5vdff*w!!|o!ssvfu",UE.cubeEnvReflectionFS="g$jjegoeff$g\v!!F~O!W~N!B<Q*`1U/Z2Q!F-`*DGVqCjFn`!V-W2\vs!p\vm$pedf!g-j1osfp!mdpvdc)fyVjWn`)n5bdyfNwj!qoMsfvwuffms!!9</*11\v/!2\v!$,e!fugojJoqfj!nd!v-csfjVEWf`mnqjnobNtj!q-MqfbwNfwmo!f5)/W1V\vf!c\vv$Desfbgfjoojfm!jdcv!c>f!V2Ws`pnmbpydU!j4mdffTwj!{|f!!f3t6m7f/!1~\v!!<\v*$1e/f2g!j-o1fs!pdmvpcdf)V5Wd`fnwj!ooUsjvmuffTsj!{|f!!*217//11!\v>!>g!mGpqbjun!)h!fgujG!b<d*fu)owJfqdj4n!!e-jssjfEdfumjqpnob*t!!|-!qwbfNdw4o!fb)cWtVEfjcsvfDdsubjfpooj!m>j!cb!c>t!)1esjpsmfpddu!j4pdof*w<!!<g*mqpjbnu)!sgpbpdmfg!!>>!!.u!o2J/q1j<n!!jugb!p)mbgc!t<E*jqsjfnd)uujdpbos/gy!!>?!!GbqcjtnE!jusbfpdmugj!p<o*/m{f*w!f|M!qjjgN!y)bbnc`tWEVjfscfvddu!j-p1on/!y-!*?t!tbfcotiEhjvspfsd)uqjjpNop/Uzt*t!fgobidhfv!p>s!)eqjnsbfmddu!j>p!oq/jyn!!?u!b1p/m1g!!@|!!1*/t1t!f;o!i4h/v1p<s!!fumbtpfm!gg!b-dsfj!E>f!meqjnsbftd!u4jdpfow/!z-!q?b!N1w/o1f!!@E!32s/f1m!q;n!b5t/)1W<V!f~c!vfDmftsfv!u|y!fjug!!5)dbfcwt!E~j!s<fqdjunj!poos/v{u!f?s!!b~c!t<E*jtstffdouijhpvop/sz!*+!!g7b2d/f2!)>3!hepjms!f+d!u1j/p3o!/.{!!>?!!q1j/n1!!|@!!f3t/m1f!!;~!!6</61n<!!,f!m*t7fs!!g.b!d6fs!)>!!0e!j*s6fnd!u.j!p7on/)z!!+?!!*1t/t1f!o@i!h2v/p1s!!;.!!56/s1)<!!>~!!qsjfnu!v|s!o*!7gsb!d>f?<!!t~t!fwofidh3v!phsf)u!VgWj)!wfftdm4f!!e~j!s<f5dnu!j,p!o*-6!sg!m.p!b5us!)g!b0d!f**5!n|!!.w!f6dn3)!!v+w!<*!tjtgf!o)ighbvdpfs!!>.>!!51s/)1!*>!!|q!jvnw!!|>!!*w6fsd!3>)?e!jtstffdouijhpvop/s{)-!!gejj!sfftdmufj!p~o!/<z2*n!!0,!!b*c5ts)!e.j!s2fsd)u!j0p!o*/2yn*!<.!!~5!nf)m!t+f!!*jtgt!f)ogibhdvfp!s>!>.!!22/s1)*!!>|!!qvjwn!!>|!!w*f5ds3!)>.?!!etjtsffodiuhjvppos/)y!-g!j.!!fetjmsff!d~u!j<p1on/!{,*!!*02!sb!c.t!)1esj)s!f0d!u*j1pno!/.z!*2<n!)~!!+f!m*ttft!fjogi!h)vgpbsd!f.!!>1>s!)3!/>1!*q!j|n!!v|w!!*>2!sw!f>d?3!)t.t!feojishfvdpusj)p!og/jy!-<!1e/j1s!f>d!uqjjpno!/uzb*p!m0g!!b|c!t*)tetjfsofidhuvjppso!/u{b*p<m!g~)!qfjmNtpfU!tjtgf!o)ighbvdpfs!!>u>b!p4m/g1!*\v!1|/!5v!w7!n>!!fwofjdg3f)e.$!\ve!j\vs9f4d1u1j/p1o!/7{w-!!feojjsgffdeu$j\vp!o\v/2z3*/!10!!7bsc!tf)oejjgsffed$u\vj!p\vo1//y4*!<6!n~!!ffomjtgff!ej$g\v!!)\vg7b2d1f/!1>!>6!w5!/f1o*j!g|f!ev$w\v!!>\v!6w1f4d/31)!.6!se!jfsofjdgufjep$o\v/!y\v-1!/e3j!s5fnd!ufjopjog/f{e*$!\v0!!\vb7c5t1)/e1j!s5fwd!ufjopjog/fze*$<\v!!~\v!5f/m1t!f5!s|!!fvowj!g>f!ew$f\vd!3\v)1e/j2s!f.d!u2jnp!of/oyj-g!feej$s\vf!d\vu7j8p3o//1z!*2!w0!!fbocjtg)feej$s\vf!d\vu9j/p1o!/2{s*!<f!o~j!gsffeu$v\vs!o\v!11//36!!.+!!1)nv!wf!o,j!g2f/e1$*\v<!!\v~:!4w4f/d14!!1cwj!mfjoojfgbfseD$v\vc!f\vV1W/)2t!b1nsq!mffosj3gEf!ef$o\vw!N~b!q\v-g!jwefodf4$!\ve!j<s*fzd/ugj!p-on-c!!g-mnpub)uy!jnnj!qoJsovuu*f!s|!!<g*myp/bgu!!-gsbcd!f-!m>c!)hyfjunG!b>d!fn)ce!j4sdffdwu!j<p*oy*/<g!!g-mspub!u-!mguj)myujfns!J>o!un!u>!!4ndbfyw)!d<vcchfsV/W*`*nwjvo!N-jqqbMNfwwoffm)!E.3!fnsjvquJyofuu-)!s1b/f1o*j<M!pnUjmqfJyofuU!q>b!Nnwboyf)!n>j!qmJco!u4-d!fdwv!c<ffV{Wj`TnmjfoyNfjuq!M>f.w!fym/*w<v!!g<mcphbsu/!*g*bwdvf!T-jq{bfN!w>o!ff)yEq33f)snvjuqyJfouu)*s<b!fgomjpMbpuU!muffyyffUmqTbjN{wfo!f>!!>2!/s1c!!04!d)f4w/!1<!f+{!jdTvmcffyVfWu`!n>b,y!Uzj/mwfvT!j<{cfh*s</!*\v*$wjvg!e-fqgb!NQwCoSf`)FEO3WfNsBvQu`yGfBuM)TsFb\vf!owjfMdp3U!mvfwy!f>U!qhbfNuwVoWf)!e>j!ssfud!u4jdpfow-!!<gfb{djfT*m!f+y!f)ug!b>d,f!Tyj/{wfv!!.<!c2h/s1/**!*,w!v1!/-6q<b!N\vw$offm)tEf3\vf!swvfudy3f!uv)ws!b>f!ohjfMupVUWm)feyjfsUfqdbuNjwpoof-!!>g!bmduf!*4!d+f!w)!g\vbfdtfmTfj${\vf!!<.c!h2s//1**w<v!!w-fqdb3N!wgo!f>)!Eg3sfbsdvuu)yvfwu*!<o!svvwu!f,s>!!\v1F/T6M!B.G!`gQ<B!N\vW$OfFo`eSjCgQ\v!!gjfge!g)jg$b\vd!f<!f?{!j3T/m1f*y!f|u!!v>w+/!zw!v,!><!*gfb{djfTTfjd{bfg<!!+g!b1d/f3!!..>!!f4{/j1T<f!m~j!Uvywb/ny`!W,V>f!cgvbdd!f-!1+/!1g)bydbfnT!j+{!f1</!4j!g>!,)!nyj/qwJvo!u<!f={!jdTvfcmfjVUWo`jnnb`yWNVjfqcMvfdw!f+m!*1!/|3!!v+w!/uzo!J,s>f!u3m/j1g!!+>!,d!vzc/fwVvW!`~n!b<yfU{jjmTf",UE["clipDirection.fs.head"]="g$jjegoeff$g\v!!D<MuJoQf`dEsJfSQFqDjUmJDPvO!\vu!bvpomjgg!pnssnp!gjjoouv!!v<DompjjquEdjfs",UE["clipDirection.fs.body"]="g$jjegoeff$g\v!!D~M!J\vQg`jEeJoSfF$D\vU!J~P!O<\ve!sjbgd!t)jveD!m|j!q*E*jssjfed!u-j*puoo!f?d!s1f*Q!q|j!mwDfvd)44!defjws)!u>p!ew!f?d!4*)o1p/j1u-j!t1p/Q1m-b!d1p/M1w*!<-!s\vj$ej)guepfeg)!!VgWj`!D\vMfJtQm\vf!$w\vf!d~4!!<demsjbqdQtpjtej!u|j!p*o*!s>j!ew!M-p*dubomfQdpstfjQuqjjpmoD<v!)\v4$dffowe)jugp\ve!!j?g!!*)ovpDjmujjqtEpjQsqfjdmudj!p-os!j=e!)3u*p!e|)!!egjjs!/~y!!\v>g!j2e/o1f<$!\v~!!<f*m1t/f1!!j-g1!/)1v!D-m{j/qwEVjws)f4ddufjwp!o>!!=o!p4j*u!j|t!peQjqsj/myd!!>\v!f.t2m/f1$<\v!!~<!*f1m/t1f!!-j1g/!1)!v-DVmmjbqdEpjMswfVdwu)j4pdof!w=!!>5!*o!p|j!uejjtsp/Qzq!j>m!d2!/\v1*<S!C~Q!)femftofj!gjfge!!)}v}D!m*jHqOEPjIsQf)deufjopjog!f=e!!6g*j!$|\v!!e<j1s//2z.!!>>!!.y2//s1j<e!!~|!!f*m:t!f=!!jogp!j)uvdDfmsjjqEEqjjsmfDdvu)j!pgoj!!=f!t7m*f!!|~!!e\vjgsj/e{o!f>$!\v2!/<1*<1!/~1!!f-m1t/f1!!j-g{!/)wvVDwm)j4qdEfjws!f>d!uojppjou!j=t!p8Q*q!j|m!de!j\vsf/t{m!f>$!\v.!2</*11</!1~!!-\v1$/j1g!e-fVgm!bVdWp`MDwMVJwQ)\v4!dffmwt!f>!!jogp!j)uvjDtmpjQqqEjjmsdf!d\vu*jSpCoQ!)=e!f9o*j!g|f!ee!j}s}/!y*!H>O!P2I/Q1)<e!f\vo$jjggf!e",UE["clipbox.fs.head"]="g$jjego!fN$B\vY!`<C*P6Y/`1D!M-J6Q/Q1F!S-!6?/!11)\v4!dvfowj!g>p!synb!Njqojum!dv!D4mdjfqwq!fustToipbdq!f<]*N6B/Y1`.C!P-Y6`/D1M.J!Q-Q6F/S1^.<)!4vdofjwg!p>s!no!jcNpqpjmm!dv!D4mdjfqwq!fustDompjdq!J<o^oSfFsQ]QNJBMYD``CYPPYC``DYMBJNQ]QyFjSs^u<b!NvsofjqgqpjsmnD!vn!b5u",UE["clipbox.fs.body"]="g$jjego!fN$B\vY!`~C!P~Y!`<DoMsJvQuQfFsS!!<?e!s1b\vd!twjfed!4|!!w*M*p6d/b1m!<=!!g*pmsb!d)pjMowu)!iju!h>o!f1m<)!!j>!a=!!^NjB]Ys`fCoPoYJ`qDjMmJDQsQfFqSq<j!mjD,v,!*%!%|!!3w!M>p>d!b^mj!]>f!qwbfidT4s)fvqDqmjjmqDqvf!s}N}b!u*s*j*yo]jjN^q!j+m!dw!f-dm5b)dwpXMpws)moebQipUtsjfuujbpfos-h!)2m/m1b*!*%<%!!j*g*!y)bvNDqmjjmqdq!f-smTbidbpqMfw])jo^b!i>U>t!t2f!m%)%m!mvbD)m!j>qaq!f^sjD]msjfqoJo",UE["fog.fs.head"]="g$jjego!fe$f\vg!j\vogfjee)oGfP$H\v*!\v\v!gvjoejogfp$s\vn!!<cspbpGmh!pvGGvp!hu<b!p\vm$gj!gn!sap)gejfogvj!o<fseb)fVOThFp`GVvC!Pu*b!p%m%g!!)nesfpggjjoofve!)\vQfItPmOfH$*\v!!}<}z!uejftgojfoEfhep)GQvC!Su*b*p*m\vg!!vnosjpggpjsonv!!w\vf3dQ5Y!Fv`GHpPhGD!pgmfpesg<j!$\v",UE["fog.fs.body"]="g$jjegoeff$g\v!!G~P!H<\v*!sjpgu!d)bvGGhpphg*!!-|*!xg/mepJb!u-!cehfsq/usip!m>p!D.hwpNGwvQ)p5tdjfuwj!p-oe/J{)<y!j\vn$!j>g!eefJg!!\vGgPjHe`oFfY$Q\v3!\v<!*gimupqbfue!!g-pshbGGbhdpuGpvs!!->s!b2f/O1h!p.G!vf)yqqf)u.t!ivuGppphnEtf!o>t!jsupzu!d+b!GvhGppgh!Eufboptmjgu!z\v!f+t!meff$q\vu!i<!*+i!ueqf",UE["skinning.vs.head"]="g$jjegoeff$g\v!!V\vTgFj`eToLfJ$O\vO!J~O!H<\vf!ovpocj!gopssvnu!fnsb!u<5^!*cjj)oueoNjb]utsfjdyj<s!uvboNjfgoppscn!!>n!bfuo5p!cc!j5ouebNnb!u|s!j*yjJ!ouwbfpsmtgf!<o!jb!uuutsojpcdv)uyfj!swufbdN5f!otplCjuofJho!e5fuyb<n!!b<u^uTsFjOcPvCu`fY!BwNf]dt5f!dtjlsjuobXNffjohpicu!<5!u\vb$nj!gnesfpgg!jCoPvO!F\v`fUtFmYfU$V\vS!F~\v!!<vfoojpgcp!sons!viujfhsi!q<!*t5bwn!q-m4fws!3-E3!wc!p-o2fwU)f5yuubvns!f><!!fvoopjcg!p5sunb!nj!o<u*!*czp!o-f*U6f/y4u!v,s!fyT)j!{+f!<y!en)b3ud5f!wh!f-ufCspvoufyNfbUufsojpyc))dEp3oftsuv!ujyof!ug!m>p!b5uw!!j5*d!f|w!!g<m*p*bzu!!-k*!6>/!3j!!,+!!y5)/!1+<!!ygem)p3bduf!wy!!->f!snvpuey)fkU-f!ogpmcp)bEu3)fcspvoufyUffuy!u>v!s4fwT!j5{dff*w*!<<!*g*mzp!b-u*!6z/!2>!!,g!myp)p!s+)!ky!e0)!3gdmfpwb!u-)fcspvoufyUffUyfuovpscf)TEj3{ffs*v*u<y!fgum!p>b!u3!we!y5!d>f!w2!/<1*!*0z!!g-m*p6b/u1)!c,p!oyf)U!f+y!uyves)f3Tdjf{wf!*-<f!sgvmupybfuU!feozp!c>)!E23/f1s!v0u!ygfmup!b>u!)2cwp!o5fdUffwy!u<v*s6f/T1j!{,f!*z<)!!z+!!>z!e",UE["skinning.vs.body"]="g$jjegoeff$g\v!!V\vTgFj`eToLfJ$O\vO!J<O*Hx\v/!enfbnus5p!gctpoobfsNub!u-Y{!z>y!/h*feufCopoojflNtb!u+s!jfyt)stflwjooJJyojesfuyb/Nye*o<j!cn)b)u55d!fcwp!o>f!NebfunZs!p>g!thofbusCup!o\vffNtbmufs$j\vy!)<t{lzjyo/J*oeeffoyo/jzl*t<!!+n!bfut5s!fcwpooJfyNjbsuu[b!N>e!ohjfcu)C!p>o!feNfbnusspjgyt)otblsjuo!J\vo*eSfCyQ/){e*f<o!jngbfue5!!}c}p!o*fHNObPuIXQ!)>e!fhofjugCfpeo!fgNjb$u\vs!j<yx)/tulijhojJfoXeofjyl/tx!*+<!!ynfbuus5f!WtoljjlotN!b+u!sXjuyb!N>f!onpbcu!5>),1!/e1f*o<o!jtlltj!o<N{b/uusijhyj!f,X>o!jtlltj!o+X!fyjfhuisuf/Wyo!j+l!tc!p+o!f[NubbuNYf<o!ptcl!j>o,N!beufsojoyj!l,t>!!<tzl/juoiXhfjjfhXiouj/lzt!!++!!cypfoufsNfbWuoZj<l!tt!l+j!oZNubbuNsfjoyp!c,!>>!,t!lejfooXofjjlhti!u</y{/!u+i!hcjpfoXfoNjblut[!<+!!tylfjuosNfbWuosjjlyt!!,+>!!YtulbjNofXofpjch!i>u,/!xe!f+o!ocjplotf!N<b*u1X/<1!)t5ldjfowN!b>u!sejfyo!o>j!lctj!o5edNfbwu!s<j*y1J/o2w!f-s{tzfy!/+e!ftnlsjpogNtboubssjuy)!5+d!fcwj!o+e!NybjussujbyN<e!opjcck!f>d!uyOfpussnfbWmo!j>l!tw!f5dd5f)wt!l\vjgojNeboufs$j\vy!!<+{!zwyf/d*5*)1p/c1k!f-duuoOfphsonbbUmu-d!f1k/c1p*)*5/dyfzw{!<+!!\vy$jjsguebfNgo!jVlTtF)`5UdBfOwH!F>O!Uu\vo!fphcokbfUdu",UE["shadowMap.vs.head"]="g$jjegoeff$g\v!!V<TeFs`pTpIDBxEpPeXbNiBtQ!\v5!dvfowj!ghposjnz!snbbwu!5<!ytjisbuebpNx",UE["shadowMap.vs.body"]="g$jjegoeff$g\v!!V<T*F1`/T2I!B-E{PzXyN/BeQf\vn!stpigbteopbxsDup)p5sdef!w>!!+t!iybjespuxbNNbmufsejpyN!v+!",UE["shadowMap.fs.head"]="g$jjegoeff$g\v!!V~T!F\v`gTjIeBoEfP$X\vN!B<Q*\vq!ev!o-j*gzp/sfn{!jcTpmpfmy!ftui!b-eEp4xeDcv)mWmV<p!Uvfocjvgdp!s-nq!btNbxnpqembfist3)Ef!stbiqbneppDxEN3bfqs<v!uvyofjug!possnv!uwffsd!3\v!fttimbfe$p\vx!T<j*{1f/<:!!v0o!j1g/p2s)n!!+g!m*p!b*uq!et!i-b*ezp/xfJ{ojuTfmoftyjfuuz!<-!yvyozj/gupfstng!ggpm!p,b!uE!4teicb)eWpVxpCUjfbctv<d!!v-oqjbgNpxspne!bgimtp)bfus!btqinbpeDpEx3Sfbsevjuvytf<u!!v,o!j*gqpes!n-!*czp/pfm{!jtTimbfeypfxuS!f-dyfyjyw/fu<f!twgbgspz!j,o!hE!4wefcd)5W!VtpiUbfecpvxdD!p-pqsbeN<x!pgembpibtu)!fusfbyqunvpsDfE33EfDspvnuqybfsuf!),t!b*nqqem!f-s*3zE/!fe{fjqTumifty-f!uw!f-dz3y!zv/wu-f!tggmgppb!u,!!dEp4neqcb)sWfV*p!U|f!csvfdu!v-sqob!Ntxupfeqb)idtp)nfqsbbsqfn-p!DvEo3qfbsdvluSyHfCuB!U,p!E*fqqeu!i-)*uzf/yfu{vjsTfm3fEy)feuf!q-uziyty-/!uvfwt*g*g*p<!!,~!!Eg4mepcb)uW!VupfUyfucvvsdf!3-EqTbiNbxeppexbMifts)qf)stbbqnnqpmDfEs33fEs!veufyqfuui!t,-!!*wqfed!3-!*tzj/{ff{-j!Twmffdy3f!uv!w--E!4gemcp)bWuV!pdUpfncqvbds!f-*q!b|N!xdppeobtiut!)wffsdb3q!nppgDgEt3ffus!v>u!ywffud!3,)!1*/q1e-!!-2*/z1/*f<{!jwTfmdf3y!fuuf!y-fymzTzj/{uff!t>g!gwpf!d,3!)E24/e1c*)!W0V!ptUjf{cfv<d!!w-fqdb3N!xdpfeobuistp)jfesVbWq!n>p!DgEm3pfpssv)uvywf!u+!!,t!j*{qfe!!,-!*1z//6f*{!j0T!mtfjy{ffu<!!-gymzpyb/uu!fmtcg!g>p!!u,f!yEu4vescf)3WEVDppUnfqcbvsdf!)-eqfbqNuxipte-b!idtf)ofussbpqjnepVDWE!3,f!suvfuyyffmuT!j,{!f*!q+e!!p-g*gzt/ffu{/jyTym-f!ydfpun!q-bzszfz*/<u!fgtmgpgbpu!!,m!uE!4>e!cu)fWyVupvUsffc3vEdD!p-nqqbbNsxfp)eebfiqtu)ifts-b!qdnfpoDuEs3pfjsevVuWy!f,u!!u,f!y*fqmeT!j-{*fz!/+f!{pjgTgmtffyuf/uy!z--z!zdyp/nuqfbtsgfg*p<!!,g!mEp4beuc!)sWcV!p>U!fucfvydu!v-sqfb3NExDppenbqibts)ff)sebfqqnupiDtE-3!fdsfvouuysfpuj!e)V!Wo!s,v!uuffsy!f<mzT/jf{{fj!T+m!fpygfgut!f+u!/tzvyj-e!bdSpxnpqebbsift*!<+!!g*m2p!b-u2!!s.u)!3>d!fuwf!y>u!vusfft3gEgDpp!n3qdbfswf!)\ve*fUqGuPiTt`-G!DdQf`oFuQsZpUj`eQVBWN!X,P!EuBfIyTf)meTfjo{jfg!f+e!!p}g}g!t*fGuD/Qz`zF-Q!ZdUp`nQqBbNsXfP*E<B!IwTf)de3f!ogj!g>f!eg!sgbjd$u\v)!v<w*!o+p!jtujj{tfp!Q,p!U1u/i6h*j<m!)gfm{pjbmub!nbs!p>o!!n>j!yE)4mecc-!!4mduf-w!!g</tzb*j<C!xgpmepbbiut!!c>!,>!!qnej!y<)*sscb-f!Osbus-f!ngb/Dzx*p<e!bgimtp!b.u!!sdb!G>b!snfjnyb)Dbx-p!ecb-i!tg)/!y0*!<*!ssbffuOvbssof!ndb<D!x~p!egbmiptb!u.!!h*foupTjiubjetppxQ)ptUbuniqhmjfms)3iEu!htoifbme)p!x>N!bqqe-!!uwbfpdm3g!!t<i{bzeyp/xeNsbpqpTDjx{pfe-b!igtm!p>b!uo!ptjiubjetppxQCpjUbuti-h!jgmm!p4bduf!wt!i<b*e*p1x/S3b!e-j1v/t5-)!3wdffdw5!!+t!ifb{ejpTxqDbpNpxspee*b!i|t!)g!m0p!b*u1!/t2i)b3edpfxw!!>>!!2f/{1j<T!mtfiybfeup!x3Ddpfpws!e|/!{*!s,b>G!btsifbnebpDxxCpjebbti<t!!tuibbpempgx!D-pspbsfeO/b{s!f>n!bnDjxop)etbiibte!puxbDppmpgs!e-/e{s-p!p1D/x:p:e:b:i:t:!*5<d!fcww!f-dt5v!jjeobGSsxvpteubvintW!fudb!p>m!gc!w-ftdb5j!C)xtpiebbeiptx!Dupbppsmeg/!y-!f?{>j!T1q/b1N-x!pteibbietp!x3Ddpfpws!e-/qyb!N=x>p!e2b/i1t-!!Et3isbfempqxnDbptp)sxep/ezb!i?T>u!o1j/p1Q-u!fthi!buebppxmDgp!p~s!e</*z6!8=/>1!!2-/618*4</!1c)p3pdmf!wj!o,G!ssvbtoubvmnq!!>+!!b*m6m3)/j1o!G-s6v3t2u/v1n)W3fddf*w<!!ocswvfudf3s!!g~s!v<t1u/v3n!U.f!tZuoWhfjdt!!>+!!c{w/fwd!3>)!jzo/Gssbvotbumvqn!-<!1t/i3b!e,p!xZDophpjste!/+{!!1=/>3!!2,/!1y*/<w!!c>p!pym/!sgbsovbtmuqv!n<U*fzt/uw!)>o!hbjmtm!)>g!sZvothujvtn!UufbtpumWgf!d|*!<*!fjogP!u)tgpsnvmtbu!v>n?U!fzt/uW*t!c|b!)\v!$gjjg!!fetfmgfj!o~f!e<)YToIhBjEtP!X+N!B1Q/`3U!Z,Q!FY`oQhDjGt*!\v+!!w{f/dw3!!>u!fyy/fsmbTojb{mfq!!><!*wyf/dw3))o2h/j1t*!!>0!!Ytoihbjetp!xuNbbpqmTgj!{|f!<*!fgomPpubtup!nemyb1!!>>?!!.y!/uWftycfbm)T!jg{jf!/fyt!m+f!!t~i!b<eyp/xwS!b.e!j1v/t5<!!>g!myp/bsub!oebzm1q!!>*!1./!1u!f?y!f{m/Twj){!fg/jz!!|+!!*tfiobPeuptxpSnbmebj!v>t?<!!{g/mWptbcub!)e!yg2j!!><!m,f!yuffUyBfumtTpjn{mfb/!y.!!+1!/t2i!b>e!pfxoSPbuetjpvntm<b!!gumbppbmug!!e<zZ2f!{>j!T,m!fuyffyuf!m+T!j6{/f2/!z>!!+m!ftyifbUeBpuxtSpbnemjbv!tu<b!ptmigb!e<pzxy!/>w!!)>!!usfbyoubvmsqf!33EdDfpwn!q<b*sZff){tjiTbmefpyxfNub!q+-!!1t/i3b!e.p!x1D/p2p)s!e+/!yfzc!v,D!pwUffdm3b)dety!1>-+!!ewz!1<*f-c!vtDipbUefpmxbDdptp!s>e+/!{W*t!c,b!!u<f*y*u{v/sWft3cEbD!p-nzq/bWstfc)bt)iybbenp!x-Nyb/qW-t!ctbi)byebpnx!D0p!p1s/e2/!y>z!!f,c!vwDfpdU3f)m1b/d1t-!!uebzp1m*g-!!<t*iwb)etpcxbD!p>p!sWet/c{b*!!4,d!fuwf!y|u!v*sZff3{EjDTpmnfqybfsuf!)utbipbmegp!x-Nwb!q4-d!ftwi)bWeVppxUDfpcpvsde!/3ydzf!w,!!~w!f<dx3p)eebyi2t-!!oeszv1u*f-s!!t~i!b\vegpjxeDopfp$s\ve!/<{**{!/,e!supfpyDuxvpsefb3iEtD!p-nzqyb/sefs)ptpiDbxeppexbNibtq!--!qtbiNbxeppexbDiptp)sfes/byqzn!p,D!Ew3ffds3v)ueyyf1u-!!>1!/x1p*e-b!itti!b\vefptxmDfp$p\vs!e</*{1*/!:,!!0u!f1y/u2v)s!f+3!E*D!p*n{q/bessfp)ptDixbpeepbxiNtb!q--*!2tzieb!e-p2xyDep)p3sdef/wy!z,-!!ztyi/beesppxpDDpxppseeb/i{t*!!-,f!{ujfTyqubvNsxfp3eEbDiptn!q-bqsbfN)xtpiebbeiptx)Nqbsqf-M!xtpiebbeipTxED3pfpssveu/yyfzu!!,,!!w*f{d/3e)sepyp2D-x!p1e/b1i*t-!!-t*i2bzeep!x-D1p/p1s)e3/d{f*w!!,,!!uzfyy/uevsspfp3DExDppenbqibts!f-)ft{ijbTeqpbxNNxbpqe-b!itti!b-eqpbxNDxpppesbei/ty)zq!s,f!Mwxfpde3b)ieTyE13-f!sevzu2y*f-u!!t,i!b*e{p/xeDsppppsDex/p{e*b!i,t!!u-f*y2uzves!f-31EyDep)n3qdbfswf!),t!izbye/pexsNpbpqD-x!pteibbietp!x-Dfp{pjsTeq/byNzx!p,e!bwiftd!3-)q1b/N1x-p!eebzi2t*)-q!stfiMbxeppexbDipTpEs3ef/s{v*u!y,f!uu!f,y!u*v{s/fe3sEpDppDnxqpbesbfi)tt!i-b*e1p/x1N!b-q2-y!et)i3bdefpwx!D,p!pzsye//eyszp!p,D!xwpfedb3i)te!y-2f-{!jeTzq2b*N-x!pteibbietp!x-DqpbpNsxep/e{b*i!t*)!q+s!f)M2x/p1e!b0i!T:E/31f*s<v!u\vy$ffum!j,g!!*e{f/gejsopfpeD)xTpIeBbEiPtX!N-BzQy`/UeZsQpFp`DQxDpGe`bTiPtG!U-*f\v{!jwTfqdb3N!xupfeybfimtT!j-{qfb!N>x!pwefbdi3t))2q/s1f*M!x0p!etbiibTeEp3xfNsbvquTyjf{uf!<,!!g*m{p/beus!pepyD1x!p>e!b.i!tu!f-y*f1m/T1j!{-f1/yye!)+3!dtfiwb!e,p!xzSyb/eejsvptp<D!xgpmepbbiut!!e-zf1{!j>T!q.b!NuxfpyefbmiTtj!{-fq/bzN!x+p!etbiibte)pqxsSfbMexjpvetb<i!TgEm3pfbsuv!ueyyf2u!!>,!!,*!{u/feysfpmpTDjx{pfe/byi!t+!!-t*i1bzeep!x-S2byeej)v3td<f!wg!m,p!bzuy!/eezs2p!p>D!x,p!eubfiytf!m-Tfj{{jfT/qzb!N+x!pteibbietp!x-SqbbeNjxvpte<b!itti)bqespfxM!x>p!e)b!iuTfEy3ufvssvfu3yEfTui!b,e!p*x{M/fessqp)ptDixbpeepbxiNtb!q--*!1tzieb!e-p1x/N1b)q3Tdjf{wf!-,!!tziyb/eepsxpDppDpxspee/byizt!!,-!fw{fjdT3q)beNyx1p-e!beizt1!*--q!btNixbpeepbxiDtp)pqssef/M{x*p!e,b!iuTfEy3ufvs",UE["flowMap.vs.head"]="g$jjego!fN$B\vY!`<G^MUPDXF`KPCCPK`FXDPUM!G?`!Y1B\vN!]vwoVjxgppmsgn!!3ndbfuw5!!hgomjpzxsNbbwu!s<j^yU]DNFBKYC`PG`MXP",UE["flowMap.vs.body"]="g$jjego!fN$B\vY!`~G!M<P6X/`1P!C,K!F*D{U/!m?b!d1p\vM!wwVfxdp4m!gg!m,p!xzV/wmMbpddpbMmw<V!xgppmsg!.)!j-oyu/!mjb!d>p!M1w<V!xjp!m=g!)N3BdYf`wG!M>P!X^`jP]CwKVFxDpUm<g!!j<,{,z*y!/|*!*g1m/p2x!V-w{Mzpyd/bemf!n>s!p)ggtmopbxsNub)u5sdjfyw]!j+^!!y+j!svuNbpNemf",UE["flowMap.fs.head"]="g$jjego!fN$B\vY!`<G^MUPDXF`KPCCPK`FXDPUM!G?`!Y1B\vN!]vwoVjxgppmsgn!!3tdbfnwq!mhfosj3zEs!bgwm!p<x^UUfDyFuKvCsPf`]XNPBMYG``GYMBPNX]`ePfCmKcFbDoUF^x<p!mvgo!jmgpppscn!",UE["flowMap.fs.body"]="g$jjego!fN$B\vY!`\vGEMOPFX``QPPCPKMF`DMUM!P?S!O1V\v$!\vw!f~d!5\v!ggjmepoxfU$f\vy!f<mc<h!s\v/$mVfOySfPUMxMp`mMgP!P>Q,`!TcUhBsS/Ue\vJ!!g\vpfst!m)fj$o\vu!!<jb>c1h<s!/jm!f=y!fNUBxYp`mGgM!P>X,`!PbCcKhFsD/Ue<J!!j\v,*,!*B!C|H!Sg`mEpExBU`fFyEfPmN!`>E!OuFfMyCu`vXsPfM3GE!))gemfpoxjUgffyeu!vgsjfm]fJ$^\v-!!<gbmcphxsV/wm]fjy^f*U<x!pjmgg!!)>g!mbpcxhFso/becJm!f\ve*]!jB^C!H%S%`!FbEmJmS)SmFfWtPt`UFiEbPoN)`gEmOpFxMVCw`]XjP^M-G!!w)fedf3o)j2g/f1e*!*g*j!m%f%$!\vb!m<mb)/hmsffybfuUfxspUmigb!o>)!gbm/pexJV!w\v]*j!^B-`!FwEfJdS3S)F1W/P1`*F*E*P*N!`\vE$OjFgM!Ce`fXgPjMoGf!e))e!fGoMjPgXf`eC!MgFjOmEf`$N\vP!E<Fc`hNsV/MmUfJyQfMUZx`pSmHgC!!>*!\vc!hJse//esJh!c\v!*+!>C!HgSm`pFxEUJfSySfFmW/Ps`hFcE<P!N\v`$EfOmFjMgC!`eXfPgMjGo!f)ee)f!oGjMgPfXe`!CgMjFmOfE$`\vN!P<EbFc`hNsV/MmUfJyQfMUZx`pSmHgC!B>!+*!\vb!cJhes/",UE["envmapPhysical.fs.head"]="g$jjegoeff$g\v!!V~T!F\v`gFjOeWoNfB$Q\v\v!!<v*o1j/g1p)s4nd!fgwm!pobsuv!uffosw!N\vbfqtJmofu$f\vo!t<jzuuzj<t!ovfoujogJpqsbnN!wgomfp!b+u!!cghmsj/qsFpomwpNDbqqb<N!w\vo$fj!goesfvgu!fFsO!W<N*BtQt`fUoZiQhFv`pDsV!C-Fd\vf!Wvuodjfgmpgsfns!!t-bqnbqnmwfosfD)vWcVff!cfvoDwfnsbvqu<y!f\vu$!f>m!tsfp\vm!pvDoqjbgNpwsonf!!t5bdnfqwm!f<s*3yEj!sfuobwNnxbfqj<W!v\v!$-fdofeWjugd\vf!mwgffds4)!ohpfjuuJdCfMsJjsEsnbsepjgbtoodbfs)Udfptostfuw!ojjo!!>w!fddf4W!uodpfsmngbfms*!!<|*!*\vt$tjfgo!iehfvgpjso!f+e!)tFtOfWoNiBhQv`pUsZ!Q-Fm`bDnVsCpFo`!V-Wd*f\vW!uwdffdm4g!fxsp)symjenO)pfs{njbmmb!n>s!pjoo!w>f!sdtffWUusdbfomtggfpss!n<E*jmsbfndsupjop!o-)sojpEsxnfbjmw-!!.v)WujdffxmNgbfuss!j>y!*d<f!Wwufddf5m!gffosw!N<bdqfDWpumdpfsm!g>f!su!f4ydufvws!f\vD*vWcVf`VFWC)VfDo`wFnQbZqU-`!QxBpNsWmOeFO)pesfnobjmg-f!e2!/g1j*$<\v!!s|f!u*vtstof!oQiJh!v+p!sf!ouwbNpbmqgD!pomjp!su/tsohpcd!!+-!mfbonwsNpboq!J4oduffwo!tojju!zu<t!o\vp$df!m-tsfj\vE!xsffjuwv!s4od!fwwf!do4j)!1u/t1o*p<d!)\vf$dfoobejjegb\vS!M~C!Jwuffdh4!",UE["displacementMap.vs.head"]="g$jjegoeff$g\v!!V\vTgFj`eEoJfT$Q\vM!B<DtFbNjFCOuUoNfBnQf\vd!bvmoqjtgjpes!nu!btpbmngq!mnfssp3gEj!oevj!t<qfmmbbddfTnufoofunNfbdqb<m!q\vt$jjeg!ouebfpgm!gV!TnFs`pVgCjPo\vv!",UE["displacementMap.vs.body"]="g$jjegoeff$g\v!!V<T*Ft`bEjJCTuQoMfBnDfFdNbFmOqUtNjBeQ!\v,!!ufsmbbodtTguposfnnffed!b,m>q!tojpes!n+b!myj/{*fw)Vpwc!k-fqdbuNOuposfnnbfmd*b!m+q!t)juef)yEu3vfs",UE["bloomSelective.fs.head"]="<vuovjpglpdsbnm!cc!pmp",UE["bloomSelective.fs.body"]="~j!g<!o)scvmubfdsl!p<v*u1*/!2|!!-h1m/`1G!s-b1h/D1p!m-p1s/!1>)!5wdf";var ZK=L.graph3d.PostProcessing=function(Z){var R,A=this,g={},F=!1,W=!1,M={model3d:!0,mesh:{is:[0,2,1,1,2,3],pos:new Fs([0,0,1,0,0,1,1,1])},mat:null},s={type:"blitScreen"},S={type:"fxaa"};N.keys(ZK).forEach(function(T){g[T]=new ZK[T](Z)}),A.getModule=function(T){return T?g[T]:A},A.getModuleList=function(){return N.keys(g)},A.resetModules=function(){for(var T in g)g[T].resetProperties()},A._serializable=!0,A.handleDataModleChange=function(T,B){T&&(A._serializable&&T.setPostProcessingData(A.serialize()),T.removeSerializeListener(A.onDataModelSerialize,A)),B&&(B.addSerializeListener(A.onDataModelSerialize,A),A.deserialize(B))},A.onDataModelSerialize=function(T){"serialize"===T.type?A._serializable&&(Z.dm()._postProcessingData=A.serialize()):"deserialize"===T.type&&A.deserialize(Z.dm())},A.isDeserializeDisabled=function(T){return!A._serializable||T.a("sceneBloom")!==Ht},A.isSerializable=function(){return A._serializable},A.setSerializable=function(T){(A._serializable=T)||Z.dm().setPostProcessingData(Ht)},A.serialize=function(){var T,B,G,H,f={};for(B in g)if(H=(G=g[B]).serializeProperties){for(var v in T={},G.enable&&(T.enable=!0),H){var J=G[v];J!=H[v]&&(T[v]=J)}N.keys(T).length&&(f[B.toLowerCase()]=T)}return f},A.deserialize=function(T){var B,G,H={},f={};for(B in g){var v,J,M=(v=g[B]).serializeProperties,Y={},m="scene"+B;for(J in(E=T.a(m))!==Ht&&(Y.enable=E),M)(E=T.a(m+J[0].toUpperCase()+J.slice(1)))!==Ht&&E!==M[J]&&(Y[J]=E);_1(Y)||(f[B[0].toLowerCase()+B.slice(1)]=Y)}if(f=_1(f)?T.getPostProcessingData():f)for(G in f)if(G&&(B=G[0].toUpperCase()+G.slice(1),v=g[B])){H[B]=!0;var E,Z=!!(M=f[G]).enable;for(J in A.enableModule(B,Z),T.a(B="scene"+B,Z),v.resetProperties&&v.resetProperties(),M)"enable"!==J&&(E=M[J],v[J]=E,T.a(B+J[0].toUpperCase()+J.slice(1),E))}for(B in g)H[B]||((v=g[B]).enable=!1,v.resetProperties&&v.resetProperties())},A.getRenderTarget=function(){return R},A.blitScreen=function(T,B,G,H,f){var v=Z.getGL();if(null==T)H=B,f=G;else{var J=T instanceof EZ;if(J){if(B&&(B.type||B.model3d)&&(H=B,f=G,G=B=null),0==B||0==G)return;B&&G&&T.setSize(v,B,G),T.bind(v),f&&f.viewport?Z.setViewport(v,f.viewport[0],f.viewport[1],f.viewport[2],f.viewport[3]):Z.setViewport(v,0,0,T.width,T.height)}else H=T,f=B}f&&!1===f.clear||v.clear(16640),f&&f.preRender&&f.preRender(v),H&&H.model3d?Z._prefabRenderer.render(v,H):(M.mat=H||s,Z._prefabRenderer.render(v,M)),f&&f.postRender&&f.postRender(v),J&&T.unbind(v)},A.enableModule=function(T,B){for(var G,H=T.split(","),f=0,v=H.length;f<v;f++)G=H[f].trim(),g[G]&&(g[G].enable=B);for(G in F=!1,g)if(g[G].enable){F=!0;break}},A.contextLost=function(){for(var T in W=!1,g)g[T].contextLost&&g[T].contextLost()},A.resetBlendState=function(T){At.for(T).glState.blend.apply({enabled:!0,equation:32774,func:[770,771,1,771]})},A.render=function(T,B,G,H,f){if((F||f)&&(W||function(){var T;if(!W)return T=Z.getGL(),T&&(R=new sx.RenderTarget(Z,T,null,null,{samples:Ft.renderTextureSamples||1,minFilter:9729,magFilter:9729,depthFormat:Z.isWebGL2()?36012:null}),W=!0)}())){R.setSize(T,B,G),R.bind(T);(f=I$(T,!0))&&0===f[0]&&0===f[1]&&0===f[2]&&0===f[3]?f=null:D$(T,[0,0,0,0]),T.clear(16640),Z.setViewport(T,0,0,B,G);var v=!1!==(H=H||{}).renderAxis,J=!1!==H.renderEdit;H.renderAxis=H.renderEdit=!1,Z.renderScene(H),R.unbind(T);for(var M,Y=0,m=Z._glCapabilities.maxAttributes;Y<m;Y++)T.disableVertexAttribArray(Y);var E=R;for(M in g)E=g[M]._42(T,E)||E;return Z.setViewport(T,0,0,B,G),f&&D$(T,f),H=A.getModule("Fxaa"),f=Z._attributes&&!1===Z._attributes.autoClear?{clear:!1}:null,A.resetBlendState(T),H&&H.enable?(S.resolution=[1/B,1/G],S.image=E.texture,A.blitScreen(S,f)):(s.image=E.texture,A.blitScreen(s,f)),(H=A.getModule("Bloom")).blendAtFinal&&H.composeFinalBloom(T),T.useProgram(Z._prg),Z._renderAxisAndEditHelper(v,J),!0}}},RK=(L.graph3d.PostProcessing.HueSaturation=function(H){var f,v=!1,J=!1,M={type:"hueSaturation"},Y=[],m=[],E=[];this.serializeProperties={hue:[0,0,0,0,0,0,0],saturation:[0,0,0,0,0,0,0],lightness:[0,0,0,0,0,0,0]},this.resetProperties=function(){var T,B=this.serializeProperties;for(T in B)this[T]=B[T]},this.resetProperties(),N.defineProperties(this,{enable:{get:function(){return v},set:function(T){!!v!=!!T&&(v=T,H.iv())}},hue:{get:function(){return Y.map(function(T){return pt(180*T)})},set:function(T){if(Y!==T&&7===T.length){for(var B=0;B<7;B++)Y[B]=T[B]/180;H.iv()}}},saturation:{get:function(){return m.map(function(T){return pt(100*T)})},set:function(T){if(m!==T&&7===T.length){for(var B=0;B<7;B++)m[B]=T[B]/100;H.iv()}}},lightness:{get:function(){return E.map(function(T){return pt(100*T)})},set:function(T){if(E!==T&&7===T.length){for(var B=0;B<7;B++)E[B]=T[B]/100;H.iv()}}}}),this.contextLost=function(){J=!1},this._42=function(T,B){var G;if(v&&(J||(G=H.getGL())&&(f=new sx.RenderTarget(H,G),J=!0)))return M.image=B.texture,M.hue=Y,M.saturation=m,M.lightness=E,H._postProcessing.blitScreen(f,B.width,B.height,M),f}},L.graph3d.PostProcessing.Bloom=function(m){var E,Z,R,B,A,g,F,W,s=this,S=!1,y=!1,x=(this.serializeProperties={strength:1.5,threshold:.55,radius:.4,overrideAlpha:!0,blendAtFinal:!1,selective:!1},this.resetProperties=function(){var T,B=this.serializeProperties;for(T in B)this[T]=B[T]},N.defineProperties(s,{enable:{get:function(){return S},set:function(T){!!S!=!!T&&(S=T,m.iv())}},strength:{get:function(){return E},set:function(T){E!==T&&(E=T,m.iv())}},threshold:{get:function(){return Z},set:function(T){Z!==T&&(Z=T,m.iv())}},radius:{get:function(){return R},set:function(T){R!==T&&(R=T,m.iv())}},overrideAlpha:{get:function(){return B},set:function(T){!!B!=!!T&&(B=T,y&&q(),m.iv())}},blendAtFinal:{get:function(){return g},set:function(T){!!g!=!!T&&(g=!!T,m.iv())}},selective:{get:function(){return A},set:function(T){!!A!=!!T&&(A=!!T,m.iv())}}}),this.resetProperties(),[256,256]),w=[],O=[],_=5,G=[3,5,7,9,11],p=[];function q(){for(var T=0;T<_;T++)p[T]={type:"bloomBlur",defines:{KERNEL_RADIUS:G[T],SIGMA:G[T],OVERRIDE_ALPHA:!!B},internalDefines:!1}}s.contextLost=function(){y=!1,F=null},s.composeFinalBloom=function(T,B){var G;S&&y&&(G=m._postProcessing).blitScreen(B,{type:"blitScreen",image:w[0].texture},{clear:!1,preRender:function(T){At.for(T).glState.blend.apply({enabled:!0,equation:32774,func:[770,1]})},postRender:function(T){G.resetBlendState(T)}})},s._42=function(T,B){if(S&&(y||function(){var T=m.getWidth(),B=m.getHeight();if(T&&B){var G=m.getGL();if(G){x=[T,B];var H,f=Math.round(x[0]/2),v=Math.round(x[1]/2);for(W=new sx.RenderTarget(m,G,f,v),w=[],O=[],H=0;H<_;H++)w.push(new sx.RenderTarget(m,G,f,v)),O.push(new sx.RenderTarget(m,G,f,v)),f=Math.round(f/2),v=Math.round(v/2);return q(),y=!0}}}())){var G,H=m._postProcessing;A&&((F=F||new sx.RenderTarget(m,T)).setSize(T,B.width,B.height),F.bind(T),(G=I$(T,!0))&&0===G[0]&&0===G[1]&&0===G[2]&&1===G[3]?G=null:D$(T,[0,0,0,1]),T.clear(16640),m.setViewport(T,0,0,B.width,B.height),T._blooming=!0,m.syncRenderState(),m.renderScene({renderAxis:!1,renderGrid:!1,renderEdit:!1}),T._blooming=!1,G&&D$(T,G),F.unbind(T)),H.blitScreen(W,{type:"bloomHighPass",smoothWidth:.01,luminosityThreshold:Z,tDiffuse:(A?F:B).texture});for(var f,v=W,J=Math.round(x[0]/2),M=Math.round(x[1]/2),Y=0;Y<_;Y++)(f=p[Y]).texSize=[J,M],f.colorTexture=v.texture,f.direction=[1,0],H.blitScreen(w[Y],f),f.colorTexture=w[Y].texture,f.direction=[0,1],H.blitScreen(O[Y],f),J=Math.round(J/2),M=Math.round(M/2),v=O[Y];return H.blitScreen(w[0],{type:"bloomComposite",blurTexture1:O[0].texture,blurTexture2:O[1].texture,blurTexture3:O[2].texture,blurTexture4:O[3].texture,blurTexture5:O[4].texture,bloomStrength:E,bloomRadius:R,bloomTintColor:[1,1,1]}),g||s.composeFinalBloom(T,B),B}}},L.graph3d.PostProcessing.Dof=function(m){var f,E,B,G,H,Z,R,v,A,J=!1,M=!1,g=0,F=!1,Y=l.generateUUID();this.serializeProperties={aperture:.025,maxblur:1,overrideAlpha:!0,image:null},this.resetProperties=function(){var T,B=this.serializeProperties;for(T in B)this[T]=B[T]},N.defineProperties(this,{enable:{get:function(){return J},set:function(T){!!J!=!!T&&((J=T)||(F=!1),m.iv())}},image:{get:function(){return B},set:function(T){B!==T&&(B=T,F=!1,E&&(m.deleteTexture(Y),E=null),m.iv())}},maxblur:{get:function(){return G},set:function(T){G!==T&&(G=T,m.iv())}},overrideAlpha:{get:function(){return v},set:function(T){!!v!=!!T&&(v=T,m.iv())}},aperture:{get:function(){return H},set:function(T){H!==T&&(H=T,m.iv())}}}),this.resetProperties(),this.contextLost=function(){M=!1,E&&(m.deleteTexture(Y),E=null)},this.setImageFromGraphView=function(T,B,G){this.image=null,function T(B,G,H,f){A=null;var v=B.getCanvas(),J=v.width,M=v.height,Y=(((H=H||1024)<J||H<M)&&(Y=H/Math.max(J,M),J=Math.round(J*Y),M=Math.round(M*Y),Z=Z||X1(),v=vt.resizeImage(v,J,M,Z)),m.getGL());R=R||Y.createTexture(),E=w$(m,Y,v,R),g=G||.01,F=!0,m.iv(),f--&&(A=A||vt.callLater(function(){T(B,G,H,f)}))}(T,B,G,2)},this._42=function(T,B){if(J&&(M||(G=m.getGL())&&(f=new sx.RenderTarget(m,G),M=!0))){if(!E){var G=z(this.image);if(!G||!G.comps&&!G.tagName)return B;L.Default.setImage(Y,G),E=m.getTexture(Y)}var G=B.width,H=B.height;if(G&&H)return m._postProcessing.blitScreen(f,G,H,{type:"bokeh",tColor:B.texture,tDepth:E,aspect:G/H,aperture:this.aperture,maxblur:this.maxblur,useG2d:F,threshold:g,defines:{OVERRIDE_ALPHA:!!v}}),f}}},L.graph3d.PostProcessing.Custom=function(M){function B(T,B){return(T.priority||0)-(B.priority||0)}var Y,m,E=!1,Z=!1;this.serializeProperties={materials:[]},this.resetProperties=function(){var T,B=this.serializeProperties;for(T in B)this[T]=B[T]},this.resetProperties(),N.defineProperties(this,{enable:{get:function(){return E},set:function(T){!!E!=!!T&&(E=T,M.iv())}},materials:{get:function(){return m},set:function(T){(m=T)&&m.sort(B),M.iv()}}}),this.contextLost=function(){Z=!1},this._42=function(T,B){if(E&&m&&m.length&&(Z||(G=M.getGL())&&(Y=new sx.RenderTarget(M,G),Z=!0))){for(var G,H,f=B,v=Y,J=0;J<m.length;J++)(H=m[J]).image=f.texture,M._postProcessing.blitScreen(v,f.width,f.height,H),delete H.image,H=f,f=v,v=H;return f}}},L.graph3d.PostProcessing.Blur=function(g){var F,W,s,S,y,f,v=this,J=!1,x=!1,w={type:"blurDownSample"},O={type:"blurH"},_={type:"blurV"},B=(this.serializeProperties={value:0,downSample:!1,iterations:1,layer:"main"},this.resetProperties=function(){var T,B=this.serializeProperties;for(T in B)this[T]=B[T]},N.defineProperties(v,{enable:{get:function(){return J},set:function(T){!!J!=!!T&&((J=T)?g.addRenderLayerListener(B,this):g.removeRenderLayerListener(B,this),g.iv())}},downSample:{get:function(){return S},set:function(T){S!==T&&(S=T,g.iv)}},value:{get:function(){return s},set:function(T){s!==T&&(s=T,g.iv())}},iterations:{get:function(){return y},set:function(T){y!==T&&(y=T,g.iv())}},layer:{get:function(){return f},set:function(T){f!==T&&(f=T,g.iv())}}}),this.resetProperties(),function(T){if(J&&T.layer===f&&"post"===T.phase){var B=g.getGL();if(!g._picking&&!g.isReflecting(B)){(T=g._postProcessing.getRenderTarget()).unbind(B);for(var G=0,H=g._glCapabilities.maxAttributes;G<H;G++)B.disableVertexAttribArray(G);v.drawImpl(B,T),T.bind(B),B.useProgram(g._prg)}}});v._42=function(){},v.contextLost=function(){x=!1,W=null},v.drawImpl=function(T,B,G,H,f){if(x||(m=g.getGL())&&(F=new sx.RenderTarget(g,m),x=!0)){var v,J=B?(v=B.width,B.height):(v=g._viewport[2],g._viewport[3]);if(v&&J){for(var M,Y=g._postProcessing,m=("boolean"!=typeof H&&(H=S),G==ft&&(G=s),f==ft&&(f=y),f=Math.max(1,Math.round(f)),At.for(T).glState.depth),E=m.enabled,Z=(m.enabled=!1,H?(G/=2,M=[v,J],v/=2,J/=2,W=W||new sx.RenderTarget(g,T),w.image=B.texture,w.texelSize=[1/M[0],1/M[1]],Y.blitScreen(W,v,J,w),B.setSize(T,v,J)):W&&W.setSize(0,0),F.setSize(T,v,J),[]),R=0;R<f;R++)Z.push(G),G=Math.max(1,Math.floor(G/2));for(R=0;R<f;R++){var A=Z[f-R-1];O.image=(H&&0===R?W:B).texture,O.value=A/v,Y.blitScreen(F,null,null,O),H&&R===f-1&&B.setSize(T,M[0],M[1]),_.image=F.texture,_.value=A/J,Y.blitScreen(B,null,null,_)}return m.enabled=E,B}}}},L.graph3d.PostProcessing.Glitch=function(M){var Y,G,m,E,Z,R,A,H,g,F=!1,W=!1,s=l.randomFloat,S=l.randomInt,f=0,y={type:"glitch"};function x(){if(g&&H){m=Date.now(),G=1e3*s(H[E=0],H[1]),Z=[];for(var T=1,B=g.length;T<B;T+=2)Z.push((1<T?Z[Z.length-1]:0)+G*g[T]/f)}}function w(){M.redraw()}this.serializeProperties={onlyReflector:!1,period:[2,3],intensity:[3,.3,1,.1,0,.4]},this.resetProperties=function(){var T,B=this.serializeProperties;for(T in B)this[T]=B[T]},N.defineProperties(this,{enable:{get:function(){return F},set:function(T){!!F!=!!T&&((F=T)&&x(),M.iv())}},onlyReflector:{get:function(){return A},set:function(T){!!A!=!!T&&(A=T,M.iv())}},period:{get:function(){return H},set:function(T){H=T,x(),M.iv()}},intensity:{get:function(){return g},set:function(T){f=0;for(var B=1,G=(g=T=T||[1,1]).length;B<G;B+=2)f+=T[B];x(),M.iv()}}}),this.resetProperties(),this.contextLost=function(){W=!1},this._42=function(T,B){if(F&&(W||function(){var T=M.getGL();if(T){Y=new sx.RenderTarget(M,T);for(var B=L0(64,64),G=B.getImageData(0,0,64,64),H=G.data,f=0;f<4096;f++)H[3*f+0]=S(256),H[3*f+1]=S(256),H[3*f+2]=S(256),H[3*f+3]=S(256);return B.putImageData(G,0,0),R=w$(M,T,N0),W=!0}}())&&!!M.isReflecting(T)==!!A){var G,H,f,v=B.width,J=B.height;if(v&&J)return G=M._postProcessing,H=(T=At.for(T).glState.depth).enabled,T.enabled=!1,Date.now()-m>Z[E]&&++E>=Z.length&&x(),f=g[2*E],y.seed=Math.random(),y.byp=f?0:1,y.tDisp=R,f&&(y.angle=s(-Math.PI,Math.PI),y.distortion_x=s(0,1),y.distortion_y=s(0,1),y.amount=Math.random()/30*f,y.seed_x=s(-1,1)*f,y.seed_y=s(-1,1)*f),y.image=B.texture,G.blitScreen(Y,v,J,y),T.enabled=H,requestAnimationFrame(w),Y}}},L.graph3d.PostProcessing.Fxaa=function(B){var G=!1;N.defineProperties(this,{enable:{get:function(){return G},set:function(T){!!G!=!!T&&(G=T,B.iv())}}}),this._42=function(){}},S1(vt,{accordionViewExpandIcon:aw(I4),accordionViewCollapseIcon:aw(I4,!0),accordionViewLabelColor:Nt,accordionViewLabelFont:E2,accordionViewTitleBackground:i4,accordionViewSelectBackground:Q4,accordionViewSelectWidth:3,accordionViewSeparatorColor:Ht,splitViewDividerSize:1,splitViewDividerBackground:i4,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:ge,rect:[2,2,12,12],background:I4}]},propertyViewLabelColor:m2,propertyViewLabelSelectColor:Nt,propertyViewLabelFont:E2,propertyViewExpandIcon:aw(h4),propertyViewCollapseIcon:aw(h4,!0),propertyViewBackground:D4,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:t4,propertyViewColumnLineColor:t4,propertyViewSelectBackground:Q4,listViewLabelColor:m2,listViewLabelSelectColor:Nt,listViewLabelFont:E2,listViewRowLineVisible:!1,listViewRowLineColor:t4,listViewSelectBackground:Q4,treeViewLabelColor:m2,treeViewLabelSelectColor:Nt,treeViewLabelFont:E2,treeViewExpandIcon:aw(c4),treeViewCollapseIcon:aw(c4,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:t4,treeViewSelectBackground:Q4,treeViewDoubleClickToToggle:!0,tableViewLabelColor:m2,tableViewLabelSelectColor:Nt,tableViewLabelFont:E2,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:t4,tableViewColumnLineColor:t4,tableViewSelectBackground:Q4,treeTableViewLabelColor:m2,treeTableViewLabelSelectColor:Nt,treeTableViewLabelFont:E2,treeTableViewExpandIcon:aw(c4),treeTableViewCollapseIcon:aw(c4,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:t4,treeTableViewColumnLineColor:t4,treeTableViewSelectBackground:Q4,tableHeaderLabelColor:m2,tableHeaderLabelFont:E2,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:e4,tableHeaderBackground:D4,tableHeaderMoveBackground:F,tableHeaderInsertColor:Q4,tableHeaderSortDescIcon:T1(h4,!0),tableHeaderSortAscIcon:T1(h4),tabViewTabGap:1,tabViewLabelColor:Nt,tabViewLabelFont:E2,tabViewTabBackground:i4,tabViewSelectWidth:3,tabViewSelectBackground:Q4,tabViewMoveBackground:F,tabViewInsertColor:Q4,toolbarLabelColor:m2,toolbarLabelSelectColor:Nt,toolbarLabelFont:E2,toolbarBackground:D4,toolbarSelectBackground:Q4,toolbarItemGap:8,toolbarSeparatorColor:o4},!0),{translateX:1,sortColumn:1}),AK={sortable:1,sortOrder:1,sortFunc:1},gK={focusData:1},FK={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},WK={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},sK=function(T,B){B.add(T),T.hasChildren()&&T.eachChild(function(T){sK(T,B)})},SK=function(T,B,G,H,f,v,J,M,Y,m,E){var Z,R,A,g,F,W,s=G.getValueType(m),S=G.getAlign(m);if(G.getEnumValues(m))return Z=G.toEnumLabel(B,m),R=Z2||0,A=0,g=v,F=vt.getTextSize(H,Z).width,(W=z(G.toEnumIcon(B,m)))&&(A=v+Z2/2,"center"===S?A+=(M-(R+F))/2:"right"===S&&(A=A+M-(R+F)),q2(T,W,A,J+Y/2,m,E),g=A+Z2/2),void(Z!=ft&&(W?N2(T,Z,H,f,g,J,M-(g-v),Y):N2(T,Z,H,f,v,J,M,Y,S)));if((B=G.formatValue(B))!=ft){if(s!==bB)return s===lB||!s&&J1(B)?(W=z(B?qe:ue),void q2(T,W,v+M/2,J+Y/2,m,E)):void N2(T,B,H,f,v,J,M,Y,S);k0(T,v,J,M,Y,B)}},yK=function(G,H){var f=H.view,v=E0(G),J=H.column||H.property;f.getDataModel().beginTransaction(),(H.editor=G).info=H,f.setCurrentEditor(G),f.getView().insertBefore(v,f._79O),D(G,H.editorRect),G.setFocus?G.setFocus():m0(G),G.commitValue=function(T,B){G._17Q&&(G=G._17Q),B||f.setValue(H.data,J,G.getValue?G.getValue():G.value),G.close&&G.close(),vs(v)},J.onEditorCreated&&J.onEditorCreated(H)},xK=function(T,B,G,H,f){var v=Js(T,G),J=B.value,M=B.view,G=f.getValueType(B.data);return v.onblur=v.onchange=function(T){M.endEditing()},"input"===T?((J=f.formatValue(J))!=ft&&(v.value=J),v.onkeydown=function(T){e0(T)?M.endEditing():c0(T)&&M.endEditing(!0)},G!==KB&&G!==zB||Tt(v,fw,vt.numberListener)):T===Ce&&H.forEach(function(T){var B=R.createElement("option");B.innerHTML=f.toEnumLabel(T),B.value=T,f.isEnumEqual(J,T)&&(B.selected=!0),K1(v,B)}),yK(v,B),v},wK=L.widget={},B=function(T,B,G){Es("ht.widget."+T,B,G)},OK=(S1(k9,{ms_value:function(T,B){T.getValue=function(T){var B=(T=this.getItemById(T)).element;return Et(B)?B:B?B.getValue?B.getValue():B.value:T.selected},T.setValue=function(T,B){var G;(T=this.getItemById(T))&&((G=T.element)&&!Et(G)?G.setValue?G.setValue(B):G.value=B:(J1(B)?T.selected=B:T.element=B,this.iv()))},T.v=function(T,B){if(2===arguments.length)this.setValue(T,B);else{if(!M1(T))return this.getValue(T);for(var G in T)this.setValue(G,T[G])}return this}},_46o:function(T,B){T._icon=ft,T._accessType=ft,T._valueType=ft,T._editable=!1,T._batchEditable=!0,T._align=Te,T._nullable=!0,T._emptiable=!1,T.setParent=rw,T.formatValue=function(T){var B=this._valueType;return this.getEnumValues()?this.toEnumLabel(T):B===lB?!!T:T!=ft&&B===KB?_t(T):T},T.setEnum=function(T,B,G,H,f,v,J){T&&!m1(T)&&T.values&&(H=T.editable,G=T.icons,B=T.labels,f=T.strict,v=T.maxHeight,J=T.dropDownWidth,T=T.values),E1(T)&&(T=T._as),E1(B)&&(B=B._as),E1(G)&&(G=G._as),this._enumValues=T,this._enumLabels=B,this._enumIcons=G,this._enumEditable=H,this._enumStrict=f==ft||f,this._enumMaxHeight=v,this._enumDropDownWidth=J,T&&T.length&&v1(T[0])&&(this._valueType=zB),this.fp("enum",!1,!0)},T.getEnumDropDownWidth=function(){return this._enumDropDownWidth},T.getEnumMaxHeight=function(){return this._enumMaxHeight},T.isEnumEditable=function(){return this._enumEditable},T.getEnumValues=function(){return this._enumValues},T.getEnumLabels=function(){return this._enumLabels},T.getEnumIcons=function(){return this._enumIcons},T.isEnumStrict=function(){return this._enumStrict},T.isEnumEqual=function(T,B){return this._enumStrict?T===B:T==B},T.toEnumLabel=function(T,B){var G=this.getEnumValues(B),H=this.getEnumLabels(B);if(G&&H)for(var f=0;f<G.length;f++)if(this.isEnumEqual(T,G[f]))return H[f];return T},T.toEnumIcon=function(T,B){var G=this.getEnumValues(B),H=this.getEnumIcons(B);if(G&&H)for(var f=0;f<G.length;f++)if(this.isEnumEqual(T,G[f]))return H[f];return Ht}},_45o:function(T,B){T._87o=function(T,B,G,H,f,v){var J,M;T&&(J=this._90I,M=r1(1),this._columnLineVisible&&--f,this._rowLineVisible&&--v,f<=0||v<=0||((J=this._90I?J:this._90I={})[B]||(J[B]=new $),D(M,this.tx()+G,this.ty()+H,f,v),K1(M,T),this._view.insertBefore(M,this._79O),T.onParentAdded&&T.onParentAdded(M),J[B].add(M)))},T._76o=function(){var T=this._90I;if(T){for(var B in T)T[B].each(function(T){vs(T)});delete this._90I}},T._77o=function(T){var B;this._90I&&(B=this._90I[T])&&(B.each(function(T){vs(T)}),delete this._90I[T])}},_47o:function(T,B){T.getValue=function(T,B){return B.getValue?B.getValue(T,B,this):h1(T,B.getAccessType(),B.getName())},T.setValue=function(T,B,G){var H,f,v,J;B.isEmptiable(T)||""!==G||(G=Ht),!B.isNullable(T)&&G==ft||(H=this,f=B.getName(T),v=B.getAccessType(T),(J=B.getValueType(T))===KB&&Et(G)?G=dt(G):J===zB&&Et(G)?G=parseFloat(G):J===lB&&Et(G)&&(G="true"===G),H._batchEditable&&B._batchEditable&&H.isSelected(T)?H.sm().each(function(T){B.setValue?B.setValue(T,B,G,H):o1(T,v,f,G)}):B.setValue?B.setValue(T,B,G,H):o1(T,v,f,G))},T.setCurrentEditor=function(T){this.endEditing(),this._currentEditor=T,this.redraw()},T.isEditing=function(T,B){var G=this._currentEditor;return!!G&&(!B||!!(G=G.info)&&(G.column||G.property)===B&&G.data===T)},T.endEditing=function(T){var B=this._currentEditor;B&&(delete this._currentEditor,B.commitValue&&B.commitValue(B.info,T),this.redraw(),this.getDataModel().endTransaction())},T.beginEditing=function(T){this.endEditing();var G=this,H=T.column||T.property;if(H.beginEditing)H.beginEditing(T);else{var B,f,v=T.data,J=T.value,M=G.getSelectBackground(v),Y=H.getEnumValues(v),m=H.getSlider(v),E=H.getColorPicker(v);if(m)return(B=O2(wK.Slider,m)).setValue(J),B.getView().onblur=function(T){G.endEditing()},B.isInstant()&&(B.onValueChanged=function(){G.setValue(v,H,B.getValue())}),void yK(B,T);if(E||H.getValueType(v)===bB)return(m=O2(wK.ColorPicker,E)).setValue(J),f=m.onClosed,m.onClosed=function(){G.endEditing(),f&&f.call(this)},m.isInstant()&&(m.onValueChanged=function(T,B){G.setValue(v,H,B)}),yK(m,T),void m.open();if(Y)wK.ComboBox?((E=new wK.ComboBox).setValue(J),E.setValues(Y),E.setLabels(H.getEnumLabels(v)),E.setIcons(H.getEnumIcons(v)),E.setEditable(H.isEnumEditable(v)),E.setStrict(H.isEnumStrict(v)),E.setMaxHeight(H.getEnumMaxHeight(v)),E.setDropDownWidth(H.getEnumDropDownWidth(v)),E.onClosed=function(){G.endEditing()},yK(E,T),E.open()):xK(Ce,T,M,Y,H);else{if(H.getValueType(v)!==lB&&!J1(J))return H.getItemEditor(v)?(((E=(m=new(e2(H.getItemEditor(v)))(v,H,G,T)).getView())._17Q=m).setValue(J),l1(E),yK(E,T),void(m.editBeginning&&m.editBeginning())):void xK("input",T,M,ft,H);G.setValue(v,H,!J)}}}},_44o:function(T,B){T.init=function(T){var B=this,G=B.th=new NK(T),H=B._view=j1(1,B);B.tv=B._tableView=T,K1(H,G.getView()),K1(H,T.getView()),G.mp(function(T){T.property===_e&&B.iv()}),B.iv()},T.getTableView=function(){return this.tv},T.getTableHeader=function(){return this.th},T.getDataModel=function(){return this.tv.dm()},T.getColumnModel=function(){return this.tv.getColumnModel()},T.setColumns=function(T){this.tv.setColumns(T)},T.addColumns=function(T){this.tv.addColumns(T)},T.endEditing=function(){this.tv.endEditing()},T.validateImpl=function(){var T=this.th,B=a1(T),G={x:0,y:0,width:this.getWidth(),height:B};D(T,G),G.y=B,G.height=Gt(0,this.getHeight()-B),D(this.tv,G)}},ms_vs:function(T,B){T._41o=function(){return this._29I.height<this._59I},T._43o=function(){var T=this;T._41o()&&(T._58I||(jt(function(){T._94O()},g2),T.iv()),T._58I=new Date)},T._94O=function(){var T=this;T._58I&&((new Date).getTime()-T._58I.getTime()>=g2?(delete T._58I,T.iv()):jt(function(){T._94O()},g2))},T._93I=function(){var T,B,G,H,f,v,J,M=this,Y=M._27I;M._58I||!M._autoHideScrollBar?(Y||K1(M._79O,Y=M._27I=r1()),T=(H=M._29I).height,B=M._59I,G=M.getScrollBarSize(),H=H.width-G-2,f=T*(-M.ty()/B),v=T*(T/B),J=Y.style,T<B?(v<F2&&(T<(f=(f=f+v/2-F2/2)<0?0:f)+F2&&(f=T-F2),v=F2),J.visibility=$e,J.background=M.getScrollBarColor(),J.borderRadius=G/2+Ze,D(Y,H,f,G,v)):J.visibility=ne):Y&&(Y.style.visibility=ne)}},ms_hs:function(T,B){T._40o=function(){return this._29I.width<this._91I},T._42o=function(){var T=this;T._40o()&&(T._95O||(jt(function(){T._94I()},g2),T.iv()),T._95O=new Date)},T._94I=function(){var T=this;T._95O&&((new Date).getTime()-T._95O.getTime()>=g2?(delete T._95O,T.iv()):jt(function(){T._94I()},g2))},T._92I=function(){var T,B,G,H,f,v,J,M=this,Y=M._28I;M._95O||!M._autoHideScrollBar?(Y||K1(M._79O,Y=M._28I=r1()),T=(H=M._29I).width,B=M._91I,G=M.getScrollBarSize(),H=H.height-G-2,f=T*(-M.tx()/B),v=T*(T/B),J=Y.style,T<B?(v<F2&&(T<(f=(f=f+v/2-F2/2)<0?0:f)+F2&&(f=T-F2),v=F2),J.visibility=$e,J.background=M.getScrollBarColor(),J.borderRadius=G/2+Ze,D(Y,f,H,v,G)):J.visibility=ne):Y&&(Y.style.visibility=ne)}}}),zt(qe,kw(16,16,[{type:j,rect:[1,1,14,14],background:Q4},{type:Ae,rect:[1,1,14,14],width:1,color:d4},{type:se,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),zt(ue,kw(16,16,{type:Ae,rect:[1,1,14,14],width:1,color:d4})),zt(ie,kw(16,16,[{type:Fe,rect:[2,2,12,12],borderWidth:1,borderColor:d4,background:"#FFF"},{type:Fe,rect:[4,4,8,8],background:Q4}])),zt(Ie,kw(16,16,{type:Fe,rect:[2,2,12,12],borderWidth:1,borderColor:d4})),k9._15Q=function(T,B){T._29I=Uw,T._59I=0,T._91I=0,T._5o=function(T){var B=this;B._30I=new $,B._rows=new $,B._rowMap={},B._31I=0,B._14I=0,B._view=j1(1,B),B._canvas=X1(B._view),K1(B._view,B._79O=r1()),B.dm(T||new sJ)},T.getCheckIcon=function(T){var B=this.sm(),T=B.co(T);return B.sg()?z(T?ie:Ie):z(T?qe:ue)},T.checkData=function(T){var B=this.sm(),G=B.co(T);B.sg()&&G||(this._32o=1,G?B.rs(T):B.as(T),delete this._32o)},T.getDataAt=function(T){T.target&&(T=this.lp(T));var T=pt(T.y/this._rowHeight),B=this._rows;return T<0||T>=B.size()?ft:B.get(T)},T.onDataDoubleClicked=function(T,B){},T.onDataClicked=function(T,B){},T.adjustTranslateX=function(T){return 0},T.adjustTranslateY=function(T){var B=this.getHeight()-this._59I;return 0<(T=T<B?B:T)?0:_t(T)},T.onPropertyChanged=function(T){T=T.property,FK[T]?this.ivm():gK[T]||this.redraw(),T===_B?this._42o():T===pB&&this._43o()},T.getLabel=function(T){return T.toLabel()},T.getLabelFont=function(T){return this._labelFont},T.getLabelColor=function(T){if(this.isCheckMode()){if(this._focusData===T)return this._labelSelectColor}else if(this.isSelected(T))return this._labelSelectColor;return this._labelColor},T.getStartRowIndex=function(){return this._31I},T.getEndRowIndex=function(){return this._14I},T.getRowDatas=function(){return this._rows},T.getRowIndex=function(T){return this._rowMap[T._id]},T.getRowSize=function(){return this._rows.size()},T.getViewRect=function(){return o2(this._29I)},T.isVisible=function(T){return!this._visibleFunc||this._visibleFunc(T)},T.getCurrentSortFunc=function(){return this._sortFunc},T.setDataModel=function(T){var B=this,G=B._dataModel,H=B._selectionModel;G!==T&&(G&&(G.umm(B.handleDataModelChange,B),G.umd(B.handleDataPropertyChange,B),G.umh(B.handleHierarchyChange,B),H||G.sm().ums(B.handleSelectionChange,B)),(B._dataModel=T).mm(B.handleDataModelChange,B),T.md(B.handleDataPropertyChange,B),T.mh(B.handleHierarchyChange,B),H?H._21I(T):T.sm().ms(B.handleSelectionChange,B),B.fp("dataModel",G,T))},T.validateModel=function(){var T=this,B=(T._rows.clear(),T._rowMap={},T.buildChildren(T._dataModel._roots),T._rows=T._rows.toList(T.isVisible,T)),G=0,H=T.getCurrentSortFunc(),f=B.size();for(H&&B.sort(H);G<f;G++)T._rowMap[B.get(G)._id]=G},T.buildChildren=function(T){var B=this;T.each(function(T){B._rows.add(T),B.buildChildren(T._children)})},T.handleDataModelChange=function(T){this.ivm()},T.handleDataPropertyChange=function(T){"parent"===T.property?this.ivm():this.invalidateData(T.data)},T.handleHierarchyChange=function(T){this.ivm()},T.handleSelectionChange=function(T){T.datas.each(this.invalidateData,this),this.onSelectionChanged(T)},T.onSelectionChanged=function(T){var B=this.sm();!this.isAutoMakeVisible()||1!==B.size()||"set"!==T.kind&&"append"!==T.kind||this._32o||this.makeVisible(B.ld())},T.handleBackgroundClick=function(T){L2(T)&&!this.isCheckMode()&&this.sm().cs()},T.makeVisible=function(T){T&&(this._23I=T,this.iv())},T.scrollToIndex=function(T){var B=this._29I,G=B.height,H=this._rowHeight,f=H*T;0<=T&&T<this._rows.size()&&0<G&&(f+H>B.y+G?this.ty(-f+G-H):f<B.y&&this.ty(-f))},T.autoScroll=function(T,B){var G=this,H=G._rowHeight,f=H,v=H/4,J=G._29I,T=G.lp(T),M={x:G.tx(),y:G.ty()};return 0<H&&J&&(T.x-J.x<f?G.translate(v,0):J.x+J.width-T.x<f&&G.translate(-v,0),T.y-J.y<f?G.translate(0,v):J.y+J.height-T.y<f&&G.translate(0,-v)),M.x=G.tx()-M.x,M.y=G.ty()-M.y,B&&(B.x+=M.x,B.y+=M.y),M},T.getTopRowOrderSelection=function(){var T=this.sm().getTopSelection(),B={},G=new $;return T.each(function(T){B[T._id]=T}),this._rows.each(function(T){B[T._id]&&G.add(T)}),G},T.getRowOrderSelection=function(){var B=new $;return this._rows.each(function(T){this.isSelected(T)&&B.add(T)},this),B},T.ivm=function(){this.invalidateModel()},T.invalidateModel=function(){this._96I||(this._96I=1,this._32I=1,delete this._24I),this.iv()},T.redraw=function(){this._32I||(this._32I=1,delete this._24I,this.iv())},T.invalidateData=function(T){bt?this.redraw():this._32I||(this._24I||(this._24I={}),this._24I[T._id]=T,this.iv())},T.getFocusData=function(){return this._focusData},T.setFocusDataById=function(T){this.setFocusData(this.dm().getDataById(T))},T.setFocusData=function(T){var B=this._focusData;B!==T&&(this._focusData=T,this.fp("focusData",B,T),B&&this.invalidateData(B),T&&(this.invalidateData(T),this.isAutoMakeVisible()&&this.makeVisible(T)))},T.drawRowBackground=function(T,B,G,H,f,v,J){var M=this.isCheckMode();(B===this._focusData&&M||G&&!M)&&k0(T,H,f,v,J,this.getSelectBackground(B))},T.drawData=function(T,B,G){var H=this._rowHeight,f=H*G,v=(J=this._29I).x,J=J.width;T.save(),T.beginPath(),T.rect(v,f,J,H),T.clip(),this._87o(this.drawRow(T,B,this.isSelected(B),v,f,J,H),G,v,f,J,H),T.restore(),this._rowLineVisible&&k0(T,v,f+H-1,J,1,this._rowLineColor)},T._12I=function(T){var B=this._31I,G=(v=this._29I).x,H=v.y,f=v.width,v=v.height;for(T.beginPath(),T.rect(G,H,f,v),T.clip(),T.clearRect(G,H,f,v),this._76o(),this._93db(T);B<this._14I;B++)this.drawData(T,this._rows.get(B),B);this._92db(T)},T._13I=function(B){for(var T,G=this,H=G._rowHeight,f=G._29I,v=f.x,J=f.width,M=G._31I,Y=G._30I;M<G._14I;M++)T=G._rows.get(M),G._24I[T._id]&&Y.add({data:T,index:M});Y.isEmpty()||(B.beginPath(),Y.each(function(T){B.rect(v,T.index*H,J,H)}),B.clip(),Y.each(function(T){B.clearRect(v,T.index*H,J,H)}),Y.each(function(T){G._77o(T.index)}),G._93db(B),Y.each(function(T){G.drawData(B,T.data,T.index)}),G._92db(B),Y.clear())},T.preValidateModel=function(){this.endEditing&&this.endEditing()},T.validateImpl=function(){var T=this,B=T._canvas,G=T.getWidth(),H=T.getHeight(),f=T._rowHeight,v=T._32I,J=(G===B.clientWidth&&H===B.clientHeight||(b1(B,G,H),v=1),T._96I&&(T.preValidateModel(),T.validateModel()),T._29I),G={x:-T.tx(),y:-T.ty(),width:G,height:H},H=T._rows.size(),B=G0(B),M=T._23I,J=(v||q1(G,J)||(v=1),T._29I=G,T._59I=H*f,T._31I=pt(G.y/f),T._14I=qt((G.y+G.height)/f),T._31I<0&&(T._31I=0),T._14I>H&&(T._14I=H),T._99I&&v&&T._99I(),T.tx()),G=T.ty();(T._40o()||T._41o())&&(T._59I+=T.getScrollBarSize(),T._99I&&v&&(T._91I+=T.getScrollBarSize())),H0(B,J,G,1),v?T._12I(B):T._24I&&T._13I(B),T._93I(),T._92I(),B.restore(),T._32I=T._24I=T._96I=ft,M&&(T.scrollToIndex(T.getRowIndex(M)),delete T._23I),T.tx(T.tx()),T.ty(T.ty())},T.canHandleSelectMode=function(T,B){return!0},T.isDraggable=function(T){return!0}},k9._48o=function(T,B){T._rootVisible=!0,T._rootData=ft,T._35o=function(){this._expandMap={},this._levelMap={}},T.validateModel=function(){var T=this,B=T._rootData;T._rows.clear(),T._levelMap={},T._rowMap={},T._currentLevel=0,B?T._rootVisible?T.isVisible(B)&&T.buildData(B):T.buildChildren(B):T.buildChildren(),delete T._currentLevel},T.buildData=function(T){var B=T._id,G=this._rows;this._rowMap[B]=G.size(),G.add(T),this._levelMap[B]=this._currentLevel,this.isExpanded(T)&&(this._currentLevel++,this.buildChildren(T),this._currentLevel--)},T.buildChildren=function(T){var B=this,G=T?T._children:B._dataModel._roots,H=B.getCurrentSortFunc();H&&B.isChildrenSortable(T)?G.toList(B.isVisible,B).sort(H).each(B.buildData,B):G.each(function(T){B.isVisible(T)&&B.buildData(T)})},T.getLevel=function(T){return this._levelMap[T._id]},T.getToggleIcon=function(T){var B=this._loader,G=this._collapseIcon;return B&&!B.isLoaded(T)?G:T.hasChildren()?this.isExpanded(T)?this._expandIcon:G:ft},T.isCheckMode=function(){return this._checkMode!=ft},T.isChildrenSortable=function(T){return!0},T.handleDataModelChange=function(T){T.kind===xe?delete this._expandMap[T.data._id]:T.kind===we&&(this._expandMap={}),this.ivm()},T.toggle=function(T){this.isExpanded(T)?this.collapse(T):this.expand(T)},T.isExpanded=function(T){return 1===this._expandMap[T._id]},T.expand=function(T){var B=this._loader;this.isExpanded(T)||(B&&!B.isLoaded(T)&&B.load(T),this._expandMap[T._id]=1,this.ivm(),this.onExpanded(T))},T.onExpanded=function(T){},T.collapse=function(T){this.isExpanded(T)&&(delete this._expandMap[T._id],this.ivm(),this.onCollapsed(T))},T.onCollapsed=function(T){},T.expandAll=function(T){var B;T?(this.expand(T),T.eachChild(function(T){this.expandAll(T)},this)):((B=this)._dataModel.each(function(T){T.hasChildren()&&(B._expandMap[T._id]=1)}),B.ivm())},T.collapseAll=function(){this._expandMap={},this.ivm()},T.makeVisible=function(T){if(T&&(!this._rootData||T.isDescendantOf(this._rootData))){for(var B=T._parent;B;)this.expand(B),B=B._parent;this._23I=T,this.iv()}},T.checkData=function(T){var B,G=this._checkMode,H=this.sm(),f=H.co(T);if(!H.sg()||!f){if(this._32o=1,G===Vt)f?H.rs(T):H.as(T);else if(G===OB)(B=new $(T)).addAll(T._children);else if("descendant"===G)B=new $,sK(T,B);else if("all"===G&&(B=new $,sK(T,B),!f))for(var v=T._parent;v;)B.add(v),v=v._parent;B&&(f?H.rs(B):H.as(B)),delete this._32o}},T.drawTree=function(T,B,G,H,f,v,J){var M=this,Y=M._indent,m=M._levelMap[B._id],E=M.getIconWidth(B),Z=z(M.getToggleIcon(B));Z?(q2(T,Z,(H+=Y*m)+Y/2,f+J/2,B,M),H+=Y):H+=Y*(m+1),M._checkMode&&(q2(T,M.getCheckIcon(B),H+Y/2,f+J/2,B,M),H+=Y),M.drawIcon(T,B,H,f,E,J),M.drawLabel(T,B,H+E,f,J)}},k9._14Q=function(T,B){T.getIcon=function(T){return T.getIcon()},T.getIconWidth=function(T){return this.getIcon(T)?this._indent:0},T.drawIcon=function(T,B,G,H,f,v){var J,M;f&&(J=this.getBodyColor(B),(M=z(this.getIcon(B),J))&&(v-=this.isRowLineVisible()?1:0,u2(T,M,LB,G,H,f,v,B,this,J),J4(T,this.getBorderColor(B),G,H,f,v)))},T.drawLabel=function(T,B,G,H,f){N2(T,this.getLabel(B),this.getLabelFont(B),this.getLabelColor(B),G,H,0,f)}},k9._50o=function(T,B){T._98I=function(){var T=this._39o=new sJ;this._60I=new $,T.mm(this._17o,this),T.md(this._18o,this),T.mh(this._19o,this)},T.setColumns=function(T){this._39o.clear(),this.addColumns(T)},T.addColumns=function(T){var G=this._39o;T.forEach(function(T){var B;T instanceof _K||(B=e2(T.className),T=O2(B||_K,T)),G.add(T)})},T.onColumnClicked=function(T){},T.onCheckColumnClicked=function(T){},T._3Q=function(T){for(var B,G=0,H=this._60I,f=H.size();G<f;G++)if((B=H.get(G)).column===T)return B;return ft},T.getColumnAt=function(T){return(T=this._4Q(T))?T.column:ft},T._4Q=function(T){for(var B=(T.target?this.lp(T):T).x,G=this._60I,H=0;H<G.size();H++){var f=G.get(H),v=f.startX;if(v<=B&&B<v+f.column.getWidth())return f}return ft},T.getToolTip=function(T){var B=this.getDataAt(T),T=this.getColumnAt(T);return B&&T?T.getToolTip(B,this):ft},T.adjustTranslateX=function(T){var B=this.getWidth()-this._91I;return 0<(T=T<B?B:T)?0:_t(T)},T._99I=function(){var G=this,H=G._29I,f=G._60I;f.clear(),G._91I=0,G._39o._roots.each(function(T){var B;T.isVisible()&&(B=G._91I+T.getWidth(),G._91I<=H.x+H.width&&B>=H.x&&f.add({column:T,startX:G._91I}),G._91I=B)})},T.drawData=function(H,f,v){var J=this,M=J._rowHeight,Y=M*v,m=J.isSelected(f),T=(B=J._29I).x,B=B.width;J.drawRowBackground(H,f,m,T,Y,B,M),J._60I.each(function(T){var B=T.column,T=T.startX,G=B.getWidth();0<G&&!J.isEditing(f,B)&&(H.save(),H.beginPath(),H.rect(T,Y,G,M),H.clip(),J._87o(J.drawCell(H,f,m,B,T,Y,G,M),v,T,Y,G,M),J._columnLineVisible&&k0(H,T+G-1,Y,1,M,J._columnLineColor),H.restore())}),J._rowLineVisible&&k0(H,T,Y+M-1,B,1,J._rowLineColor)},T.drawCell=function(T,B,G,H,f,v,J,M){if(H.drawCell)return H.drawCell(T,B,G,H,f,v,J,M,this);G=this.getValue(B,H),SK(T,G,H,this.getLabelFont(B,H,G),this.getLabelColor(B,H,G),f,v,J,M,B,this)},T.getColumnModel=function(){return this._39o},T._17o=function(T){this.redraw()},T._18o=function(T){T.data===this._sortColumn&&AK[T.property]?this.ivm():(this._42o(),this.redraw())},T._19o=function(T){this.redraw()},T.getCurrentSortFunc=function(){var G,H,f=this,v=f._sortColumn;return v&&v.isSortable()?(H=v.getSortFunc(),G=SB===v.getSortOrder()?1:-1,H=H||h2,function(T,B){return H.call(f,f.getValue(T,v),f.getValue(B,v),T,B)*G}):f._sortFunc},T.isCellEditable=function(T,B,G){return!(!B.isEditable()||!this.isEditable())&&(!B.isCellEditable||B.isCellEditable(T,B,G,this))},T._37O=function(T,B){if(L2(B))for(var G=this,H=G.lp(B),f=G._60I,v=G._rowHeight,J=G._29I,M=J.x,Y=J.y,m=J.width,E=J.height,Z=0;Z<f.size();Z++){var R,A,g=f.get(Z),F=g.startX,W=(g=g.column).getWidth();if(g!==G._31o&&g!==G._4o&&H.x>=F&&H.x<F+W&&G.isCellEditable(T,g,B))return W={x:(F={x:F,y:G.getRowIndex(T)*v,width:W,height:v}).x+G.tx(),y:F.y+G.ty(),width:F.width,height:F.height},A=R=0,F.x<M?R=F.x-M:M+m<F.x+F.width&&(R=F.x+F.width-M-m),R&&(G.tx(G.tx()-R),W.x-=R),F.y<Y?A=F.y-Y:Y+E<F.y+v&&(A=F.y+v-Y-E),A&&(G.ty(G.ty()-A),W.y-=A),void G.beginEditing({data:T,column:g,value:G.getValue(T,g),event:B,rect:F,editorRect:W,view:G})}}},wK.BaseItemEditor=function(T,B,G,H){this._data=T,this._column=B,this._master=G,this._editInfo=H},B("BaseItemEditor",N,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}}),L.Tab=function(){O1(OK,this)}),_K=(r4("Tab",WJ,{ms_ac:["view","closable","disabled","visible"],_icon:ft,_closable:!1,_disabled:!1,_visible:!0,setParent:rw}),L.Column=function(){O1(_K,this)}),pK=(r4("Column",WJ,{_46o:1,ms_ac:["accessType","valueType",$e,FB,WB,Oe,"align",bB,"sortOrder",gB,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:SB,_sortFunc:ft,_sortable:!0,_clickable:!0,setWidth:function(T){var B=this._width;this._width=T=T<16?16:T,this.fp(Oe,B,T)},getToolTip:function(T,B){return this.formatValue(B.getValue(T,this))}}),L.Property=function(){O1(pK,this)}),qK=(r4("Property",WJ,{_46o:1,ms_ac:["accessType","valueType",FB,WB,"categoryName",bB,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:ft,getToolTip:function(T,B,G){return B?this.formatValue(G.getValue(T,this)):G.getPropertyName(this)}}),wK.AccordionView=function(){this._20o={},this._21o=new $,this._10o=ft,this._9o=ft,this._11o=ft,this._view=j1(0,this),this.iv()},B("AccordionView",N,{ms_v:1,ms_fire:1,ms_ac:[ZB,RB,"titleHeight",je,Le,"titleBackground","selectWidth",Qt,"orientation","separatorColor"],_expandIcon:vt.accordionViewExpandIcon,_collapseIcon:vt.accordionViewCollapseIcon,_titleHeight:A2,_labelColor:vt.accordionViewLabelColor,_labelFont:vt.accordionViewLabelFont,_titleBackground:vt.accordionViewTitleBackground,_selectBackground:vt.accordionViewSelectBackground,_selectWidth:vt.accordionViewSelectWidth,_orientation:"v",_separatorColor:vt.accordionViewSeparatorColor,onPropertyChanged:function(T){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(B,T,G,H){var f=this,v=r1(),T={content:T,div:v,canvas:X1(v),icon:H};if(f._20o[B])throw B+" already exists";var J=T.downEventFunc=function(T){_2(T)},M=T.upEventFunc=function(T){_2(T),L2(T)&&(f._10o===B?f.collapse():f.expand(B))};[Bw,kB].forEach(function(T){Tt(v,T,J)}),[Hw,aB].forEach(function(T){Tt(v,T,M)}),v.style.cursor=VB,K1(f._view,v),f._20o[B]=T,f._21o.add(B),G&&f.expand(B),f.iv()},remove:function(T){var B,G=this._20o[T];G&&(B=G.div,vs(B),[Bw,kB].forEach(function(T){Bt(B,T,G.downEventFunc)}),[Hw,aB].forEach(function(T){Bt(B,T,G.upEventFunc)}),delete this._20o[T],this._21o.remove(T),this.iv())},clear:function(){this._21o.toArray().forEach(this.remove,this),this._20o={},this._21o.clear(),this.iv()},isExpanded:function(T){return this._10o===T},expand:function(T){this._20o[T]&&this._10o!==T&&(this._10o=T,this.onExpanded(T),this.iv())},onExpanded:function(T){},collapse:function(){this._10o&&(this.onCollapsed(this._10o),delete this._10o,this.iv())},onCollapsed:function(T){},initCanvas:function(T,B,G){return b1(T,B,G),T=G0(T),H0(T,0,0,1),T.clearRect(0,0,B,G),T},drawTitle:function(T,B,G,H,f){var v=this,f=z(f.icon),J=v.isExpanded(B),M=v._titleHeight,Y=v._titleBackground,m=v._selectWidth,E=v._separatorColor,Z=z(J?v._expandIcon:v._collapseIcon),R=m+4;k0(T,0,0,G,H,Y),J&&m&&k0(T,0,0,m,H,v._selectBackground),!J&&v._21o.get(v._21o.size()-1)===B||k0(T,0,H-1,G,1,E||t2(Y)),f&&(q2(T,f,R+ks(f)/2,M/2),R+=ks(f)+2),N2(T,B,v.getLabelFont(B),v.getLabelColor(B),R,0,0,M),Z&&q2(T,Z,G-ks(Z)/2-4,M/2)},validateImpl:function(){var J=this,T=J._view,M=0,Y=0,m=J.getWidth(),E=J.getHeight(),Z=J._titleHeight,R=J._21o.size()*Z,B=J._11o,G=J._9o,H=(delete J._11o,delete J._9o,J._21o.each(function(T){var B,G,H=J._20o[T],f=H.content,v=J._10o===T;B1(J)?(D(H.div,M,0,Z,E),B=J.initCanvas(H.canvas,Z,E),f0(B,0,E),v0(B,-ot),J.drawTitle(B,T,E,Z,H),B.restore(),v?(G=Gt(0,m-R),f&&(J._11o=f,J._9o=E0(f),D(f,M+Z,0,G,E)),M+=Z+G):M+=Z):(D(H.div,0,Y,m,Z),B=J.initCanvas(H.canvas,m,Z),J.drawTitle(B,T,m,Z,H),B.restore(),v?(G=Gt(0,E-R),f&&(J._11o=f,J._9o=E0(f),D(f,0,Y+Z,m,G)),Y+=Z+G):Y+=Z)}),J._9o);B&&B!==J._11o&&B.endEditing&&B.endEditing(),H&&H!==G&&K1(T,H),G&&G!==H&&vs(G)}}),wK.SplitView=function(T,B,G,H){var f=this,v=f._dividerDiv=r1(),J=f._60O=X1(),M=f._61O=X1(),J=J.style,M=M.style;f._view=j1(1,f),K1(f._view,v),J.msTouchAction=PB,J.pointerEvents=PB,J.cursor=VB,M.msTouchAction=PB,M.pointerEvents=PB,M.cursor=VB,T&&f.setLeftView(T),B&&f.setRightView(B),G&&f.setOrientation(G),H!=ft&&f.setPosition(H),f.setStatus(ye),new qK(f)},B("SplitView",N,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:vt.splitViewDividerSize,_dividerBackground:vt.splitViewDividerBackground,_dragOpacity:vt.splitViewDragOpacity,_toggleIcon:vt.splitViewToggleIcon,onPropertyChanged:function(T){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(T,B){var G=this._position;isNaN(T)||(B||(this._82O=T<0?-1:1<T?1:0),this._position=T,this.fp(xB,G,T))},getLeftView:function(){return this._leftView},setLeftView:function(T){var B,G=this._leftView,H=this._view;this._leftView!==T&&(G&&G!==this._rightView&&(B=E0(G)).parentNode===H&&vs(B),(this._leftView=T)&&(B=E0(T)).parentNode!==H&&H.insertBefore(B,this._dividerDiv),this.fp("leftView",G,T))},getRightView:function(){return this._rightView},setRightView:function(T){var B,G=this._rightView,H=this._view;this._rightView!==T&&(G&&G!==this._leftView&&(B=E0(G)).parentNode===H&&vs(B),(this._rightView=T)&&(B=E0(T)).parentNode!==H&&H.insertBefore(B,this._dividerDiv),this.fp("rightView",G,T))},validateImpl:function(){var T,B,G,H,f=this,v=f._draggable,J=f._position,M=f.getWidth(),Y=f.getHeight(),m=f._dividerSize,E=f._dividerBackground,Z=$t?18:8,R=f._dividerDiv,A=f._82O,g=f._60O,F=f._61O,W=f._toggleIcon,s=f._status,S=R.style,y=null,x=$t?20:4,w=W.comps[0],O=(Z<=m||0===m?f._coverDiv&&(vs(f._coverDiv),delete f._coverDiv):f._coverDiv||(f._coverDiv=r1(),lt&&(f._coverDiv.style.background=rB),K1(R,f._coverDiv)),f._togglable?g.parentNode||(K1(R,g),K1(R,F)):(vs(g),vs(F)),f._coverDiv),_=f._leftView,p=f._rightView;B1(f)?(M<m&&(m=M),s===ye?1===A?(H=Jt(J,M),G=Gt(0,M-m-H)):-1===A?(G=Jt(-J,M),H=Gt(0,M-m-G)):(H=_t((M-m)*J),G=Gt(0,M-m-H)):"cl"===s?G=Gt(H=0,M-m):"cr"===s&&(H=Gt(G=0,M-m)),_&&D(_,0,0,H,Y),p&&D(p,H+m,0,G,Y),D(R,H,0,m,Y),f._22o=H,O&&(D(O,m/2-Z/2,0,Z,Y),O.style.cursor=v?nB:""),R.style.cursor=v?nB:"",G=R.clientHeight/2,H=R.clientWidth,b1(g,H,H),D(g,0,G-H-x,H,H),y=G0(g),H0(y,0,0,1),w.rotation=-ot,as(y,W,0,0,H,H),y.restore(),b1(F,H,H),D(F,0,G+x,H,H),y=G0(F),H0(y,0,0,1),w.rotation=ot):(Y<m&&(m=Y),s===ye?1===A?(T=Jt(J,Y),B=Gt(0,Y-m-T)):-1===A?(B=Jt(-J,Y),T=Gt(0,Y-m-B)):(T=_t((Y-m)*J),B=Gt(0,Y-m-T)):"cl"===s?B=Gt(T=0,Y-m):"cr"===s&&(T=Gt(B=0,Y-m)),_&&D(_,0,0,M,T),p&&D(p,0,T+m,M,B),D(R,0,T,M,m),f._22o=T,O&&(D(O,0,m/2-Z/2,M,Z),O.style.cursor=v?$B:""),S.cursor=v?$B:"",G=R.clientWidth/2,H=R.clientHeight,b1(g,H,H),D(g,G-H-x,0,H,H),y=G0(g),H0(y,0,0,1),w.rotation=0,as(y,W,0,0,H,H),y.restore(),b1(F,H,H),D(F,G+x,0,H,H),y=G0(F),H0(y,0,0,1),w.rotation=o),as(y,W,0,0,H,H),y.restore(),S.background=E}}),function(T){this.sv=T,this.addListeners()}),uK=(Es(qK,N,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(T){var B=this.sv,G=B._dividerDiv,H=B._60O,f=B._61O,v=B._status,J=T.target;J===H?v===ye?B.setStatus("cl"):"cr"===v&&B.setStatus(ye):J===f?v===ye?B.setStatus("cr"):"cl"===v&&B.setStatus(ye):!y0(T)||J!==G&&J!==B._coverDiv||(_2(T),B.isDraggable()&&(B.getLeftView(),B.getRightView(),(H=this.maskDiv=r1()).style.left=0,H.style.top=0,H.style.width=B.getWidth()+"px",H.style.height=B.getHeight()+"px",B.getView().appendChild(H),B.isContinuousLayout()||((f=this.resizeDiv=r1()).style.left=G.style.left,f.style.top=G.style.top,f.style.width=G.style.width,f.style.height=G.style.height,f.style.opacity=B.getDragOpacity(),f.style.background=B.getDividerBackground(),K1(this.getView(),f)),this._lastAbsPosition=B._22o,this._86o=B1(B)?K2(T).x:K2(T).y,fs(this,T)))},handleWindowTouchMove:function(T){y0(T)&&this.update(T,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(T){this.update(T,!0),this.sv.setStatus(ye),this.maskDiv&&vs(this.maskDiv),this.resizeDiv&&vs(this.resizeDiv),this.maskDiv=this.resizeDiv=ft},handle_mousedown:function(T){L2(T)&&this.handle_touchstart(T)},handleWindowMouseMove:function(T){this.handleWindowTouchMove(T)},handleWindowMouseUp:function(T){this.handleWindowTouchEnd(T)},update:function(T,B){var G=this.sv,H=B1(G)?G.getWidth():G.getHeight(),f=G._dividerSize,v=this._lastAbsPosition-this._86o;B1(G)?((v=H-f<(v+=K2(T).x)?H-f:v)<0&&(v=0),this.resizeDiv&&(this.resizeDiv.style.left=v+Ze)):((v=H-f<(v+=K2(T).y)?H-f:v)<0&&(v=0),this.resizeDiv&&(this.resizeDiv.style.top=v+Ze)),B&&H!==f&&(1===G._82O?G.setPosition(v,1):-1===G._82O?G.setPosition(v-H+f,1):G.setPosition(v/(H-f),1))}}),wK.TabView=function(){var T=this,B=T._view=j1(1,T),G=T._91O=r1(1),H=T._tabModel=new sJ,f=H.sm(),v=T.invalidate;T._7o=new $,T._canvas=X1(G),K1(B,G),K1(B,T._92O=r1(1)),f.setSelectionMode(Pt),f.ms(T.handleSelectionChange,T),H.mm(v,T),H.mh(v,T),H.md(v,T),T._interactor=new uK(T),T.iv()},B("TabView",N,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",je,Le,"tabHPadding","tabBackground","selectWidth",Qt,"moveBackground","insertColor"],_tabHPadding:0,_tabPosition:Ge,_tabHeight:A2,_tabGap:vt.tabViewTabGap,_labelColor:vt.tabViewLabelColor,_labelFont:vt.tabViewLabelFont,_tabBackground:vt.tabViewTabBackground,_selectWidth:vt.tabViewSelectWidth,_selectBackground:vt.tabViewSelectBackground,_moveBackground:vt.tabViewMoveBackground,_insertColor:vt.tabViewInsertColor,_movable:!0,handleSelectionChange:function(){this._selectionChanged=!0,this.invalidate()},getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(T,B,G){var H,f=this._tabModel;return T instanceof OK?(H=T,B&&H.setView(B)):((H=new OK).setName(T),H.setView(B)),f.add(H),G&&f.sm().ss(H),H},getLabel:function(T){return T.toLabel()},onPropertyChanged:function(T){this.iv()},_7Q:function(T){this._23o=T,this.iv()},get:function(B){var G,H=this,T=H._tabModel;return v1(B)?T._roots.get(B):Et(B)?(T.each(function(T){B===H.getLabel(T)&&(G=T)}),G):B instanceof OK?B:ft},select:function(T){this._tabModel.sm().ss(this.get(T))},remove:function(T){var B;(T=this.get(T))&&(B=this._tabModel._roots.indexOf(T),this._tabModel.remove(T),this.selectByIndex(--B))},getCurrentTab:function(){return this._8o},hideTabView:function(T,B){B.parentNode===this._92O&&(F1(B)?(B.style.display=Ee,B._tab_=T):vs(B),v2())},showTabView:function(T,B){F1(B)&&(B.style.display="block",B._tab_=T),B.parentNode!==this._92O&&(K1(this._92O,B),v2())},_24o:function(){var T,B=this._8o,G=this._9o,H=this._tabModel.sm().ld();(T=H?E0(H.getView()):T)!==G&&(G&&(B.getView()&&B.getView().endEditing&&B.getView().endEditing(),this.hideTabView(B,G)),T&&this.showTabView(H,T)),this._8o=H,this._9o=T,B!==H&&this.onTabChanged(B,H)},onTabClosing:function(T){return!0},onTabChanged:function(T,B){},onTabClosed:function(T,B){this.selectByIndex(--B)},selectByIndex:function(T){var B=this._tabModel,G=B.size();if(G&&!B.sm().ld()){for(var H=T=(T=G<=(T=T==ft?0:T)?G-1:T)<0?0:T;0<=H;H--){var f=this.get(H);if(!f.isDisabled())return this.select(f),f}for(H=T+1;H<G;H++)if(!(f=this.get(H)).isDisabled())return this.select(f),f}},getTabWidth:function(T){var B=4+2*this.getTabHPadding(),G=z(T.getIcon());return G&&(B+=ks(G,T)+4),(G=this.getLabel(T))&&(B+=Q2(this.getLabelFont(T),G).width+4),T.isClosable()&&(B+=10),B},drawTab:function(T,B,G,H,f,v,J){var M,Y=this._tabPosition,m=G+4+(y=this.getTabHPadding()),E=this._selectWidth,Z=z(B.getIcon()),R=B.isDisabled(),A=this.getLabelColor(B),g=this.getLabelFont(B),F=this.getLabel(B),W=this._selectBackground,s=Y===Te+"-vertical",S=Y===Be+"-vertical",y=((s||S)&&(m=H+4+y),R&&(T.globalAlpha=a9),k0(T,G,H,f,v,J),B===this._8o&&E&&(Y===Ge?k0(T,G,H+v-E,f,E,W):Y===Te?k0(T,G+f-E,H,E,v,W):Y===Be?k0(T,G,H,E,v,W):s?k0(T,G+f-E,H,E,v,W):S?k0(T,G,H,E,v,W):k0(T,G,H,f,E,W)),f/2);return s&&(f0(T,y,H+v/2),v0(T,o),f0(T,-y,-H-v/2)),Z&&(J=Cs(Z,B),Y=ks(Z,B),s||S?(f0(T,E=G+f/2,W=m+J/2),v0(T,ot),f0(T,-E,-W),q2(T,Z,G+f/2,m+J/2,B,this),f0(T,E,W),v0(T,-ot),f0(T,-E,-W),m+=J+4):(q2(T,Z,m+Y/2,H+v/2,B,this),m+=Y+4)),s||S?(f0(T,f/2,m+f/2),v0(T,ot),f0(T,-f/2,-m-f/2),N2(T,F,g,A,G,m,v,f),f0(T,f/2,m+f/2),v0(T,-ot),f0(T,-f/2,-m-f/2)):N2(T,F,g,A,m,H,f,v),s&&(f0(T,y,H+v/2),v0(T,-o),f0(T,-y,-H-v/2)),B.isClosable()&&this.drawCloseIcon(B,T,A,M=S?{x:G+f-12,y:H+v-12,width:12,height:12}:{x:G+f-12,y:H+2,width:12,height:12}),R&&(T.globalAlpha=1),M},drawCloseIcon:function(T,B,G,H){var f=H.x,H=H.y;B.strokeStyle=G,B.lineWidth=1,B.beginPath(),B.moveTo(f+2,H+8),B.lineTo(f+8,H+2),B.moveTo(f+8,H+8),B.lineTo(f+2,H+2),B.stroke()},getTabAt:function(T){return(T=this._interactor._8Q(T))?T.tab:null},validateImpl:function(){var H=this,T=(H._24o(),H._canvas),B=H._tabPosition,G=H._91O,f=H._92O,v=H._tabModel,J=H.getWidth(),M=H.getHeight(),Y=H._tabHeight,m=H._7o,E=H._tabGap,Z=B===Ge,R=B===Te,A=B===Be,g=B===Te+"-vertical",B=B===Be+"-vertical",F=H._23o,W=0;if((R||A)&&v._roots.each(function(T){W=Gt(H.getTabWidth(T),W)}),Z=Z?(D(G,0,0,J,Y),{x:0,y:Y,width:J,height:Gt(0,M-Y)}):R?(D(G,0,0,W,M),{x:W,y:0,width:Gt(0,J-W),height:M}):A?(D(G,J-W,0,W,M),{x:0,y:0,width:Gt(0,J-W),height:M}):g?(D(G,0,0,Y,M),{x:Y,y:0,width:Gt(0,J-Y),height:M}):B?(D(G,J-Y,0,Y,M),{x:0,y:0,width:Gt(0,J-Y),height:M}):(D(G,0,M-Y,J,Y),{x:0,y:0,width:J,height:Gt(0,M-Y)}),D(f,Z),g||B){H._9o&&(Z.x=0,D(H._8o.getView(),Z)),b1(T,Y,M);var s=G0(T),S=0;if(H0(s,0,H.ty(),1),s.clearRect(0,0,Y,M),m.clear(),v._roots.each(function(T){var B,G;T.isVisible()&&(B=H.getTabWidth(T),F&&F.tab===T||(G=H.getTabBackground(T),G=H.drawTab(s,T,0,S,Y,B,G)),m.add({_75o:G,tab:T,startY:S,endY:S+B,height:B}),S+=B+E)}),H._23Q=Gt(0,S-E),F&&(w=F.position,H.drawTab(s,F.tab,0,F.startY,Y,F.height,H._moveBackground),k0(s,0,w,Y,1,H._insertColor)),s.restore(),H._selectionChanged){H._selectionChanged=!1;for(var y=H.ty(),x=0;x<m.size();x++)if((_=m.get(x)).tab===H._8o){if(_.endY+y<0){H.ty(-_.startY);break}if(_.startY+y>M){H.ty(M-_.endY);break}}}H.ty(H.ty())}else if(R||A){if(H._9o&&(Z.x=0,D(H._8o.getView(),Z)),b1(T,W,M),s=G0(T),H0(s,S=0,H.ty(),1),s.clearRect(0,0,W,M),m.clear(),v._roots.each(function(T){var B;T.isVisible()&&(F&&F.tab===T||(B=H.getTabBackground(T),B=H.drawTab(s,T,0,S,W,Y,B)),m.add({_75o:B,tab:T,startY:S,endY:S+Y,height:Y}),S+=Y+E)}),H._23Q=Gt(0,S-E),F&&(w=F.position,H.drawTab(s,F.tab,0,F.startY,W,F.height,H._moveBackground),k0(s,0,w,W,1,H._insertColor)),s.restore(),H._selectionChanged)for(H._selectionChanged=!1,y=H.ty(),x=0;x<m.size();x++)if((_=m.get(x)).tab===H._8o){if(_.endY+y<0){H.ty(-_.startY);break}if(_.startY+y>M){H.ty(M-_.endY);break}}H.ty(H.ty())}else{H._9o&&(Z.y=0,D(H._8o.getView(),Z)),b1(T,J,Y);var w,s=G0(T),O=0;if(H0(s,H.tx(),0,1),s.clearRect(0,0,J,Y),m.clear(),v._roots.each(function(T){var B,G;T.isVisible()&&(B=H.getTabWidth(T),F&&F.tab===T||(G=H.getTabBackground(T),G=H.drawTab(s,T,O,0,B,Y,G)),m.add({_75o:G,tab:T,startX:O,endX:O+B,width:B}),O+=B+E)}),H._64I=Gt(0,O-E),F&&(w=F.position,H.drawTab(s,F.tab,F.startX,0,F.width,Y,H._moveBackground),c1(s,H._insertColor,w,0,Y)),s.restore(),H._selectionChanged){H._selectionChanged=!1;for(var _,p=H.tx(),x=0;x<m.size();x++)if((_=m.get(x)).tab===H._8o){if(_.endX+p<0){H.tx(-_.startX);break}if(_.startX+p>J){H.tx(J-_.endX);break}}}H.tx(H.tx())}for(var q=[],u=f.children,x=0;x<u.length;x++){var i=u[x],I=i._tab_;I&&!v.contains(I)&&q.push(i)}q.forEach(function(T){f.removeChild(T)})}}),function(T){this.tv=T,this.addListeners()}),iK=(Es(uK,N,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(T){this.handleScroll(T,T.wheelDelta/40*10)},handle_DOMMouseScroll:function(T){this.handleScroll(T,10*-T.detail)},handleScroll:function(T,B){_2(T);var G=(T=this.tv)._tabPosition;!T._40o()||G!==Ge&&G!==He||T.tx(this.tv.tx()+B),!T._41o()||G!==Te&&G!==Be&&G!==Te+"-vertical"&&G!==Be+"-vertical"||T.ty(this.tv.ty()+B)},_8Q:function(T){var B,G=this.tv,H=G._tabPosition,f=G._7o;if(H===Ge||H===He){for(var v=G.lp(T).x,J=0;J<f.size();J++)if((B=f.get(J)).startX<=v&&v<=B.endX)return B}else if(H===Te||H===Be||H===Te+"-vertical"||H===Be+"-vertical")for(var M=G.lp(T).y,J=0;J<f.size();J++)if((B=f.get(J)).startY<=M&&M<=B.endY)return B;return ft},isClickable:function(T){var B=this.tv,G=B._tabPosition,T=this._73o=this._8Q(T);return!(!B._40o()||G!==Ge&&G!==He)||!(!B._41o()||G!==Te&&G!==Be&&G!==Te+"-vertical"&&G!==Be+"-vertical")||T&&(!T.tab.isDisabled()||B.isMovable())},handle_mousemove:function(T){g0?this._74o=this._8Q(T):this.getView().style.cursor=this.isClickable(T)?VB:""},handle_mousedown:function(T){this.handle_mousemove(T),this.handle_touchstart(T)},handle_touchstart:function(T){var B=this.tv,G=B._tabPosition;_2(T),L2(T)&&this.isClickable(T)&&(G===Ge||G===He?(this.x=K2(T).x,this.lp=B.lp(T),this.tx=B.tx()):(this.y=K2(T).y,this.lp=B.lp(T),this.ty=B.ty()),fs(this,T))},handle_mouseup:function(T){this.handle_touchend(T)},handle_touchend:function(T){var B,G,H;j2(T)&&(T=this._73o)&&(B=this.tv,G=B.getTabModel(),!(H=T.tab).isDisabled()&&H.isClosable()&&B.onTabClosing(H,T=function(){var T=G._roots.indexOf(H);G.remove(H),B.onTabClosed(H,T)})&&T())},handleWindowMouseMove:function(T){this.handleWindowTouchMove(T)},handleWindowTouchMove:function(T){var H,f,v,J,B=this,M=B.tv,G=M._tabPosition,Y=B._73o;G===Ge||G===He?(f=K2(T).x-B.x,!B._25o&&!B.moving&&2<it(f)&&(M._40o()&&!b2(T)?B._25o=1:Y&&M.isMovable()&&(B.moving=1)),B._25o?M.tx(B.tx+f):B.moving&&(H=B.lp.x+f,J=M._tabGap/2,M._7o.each(function(T){var B=T.endX,G=H-T.startX<B-H;H>=T.startX&&H<=B&&M._7Q({tab:Y.tab,startX:Y.startX+f,width:Y.width,front:G,insertTab:T.tab,position:G?Gt(0,T.startX-J):Jt(M._64I,B+J)})}))):(f=K2(T).y-B.y,!B._25o&&!B.moving&&2<it(f)&&(M._41o()&&!b2(T)?B._25o=1:Y&&M.isMovable()&&(B.moving=1)),B._25o?M.ty(B.ty+f):B.moving&&(v=B.lp.y+f,J=M._tabGap/2,M._7o.each(function(T){var B=T.endY,G=v-T.startY<B-v;v>=T.startY&&v<=B&&M._7Q({tab:Y.tab,startY:Y.startY+f,height:Y.height,front:G,insertTab:T.tab,position:G?Gt(0,T.startY-J):Jt(M._23Q,B+J)})})))},handleWindowMouseUp:function(T){this.handleWindowTouchEnd(T)},handleWindowTouchEnd:function(T){var B,G,H,f,v=this,J=v.tv,M=J._tabPosition,Y=J.getTabModel(),m=Y._roots,E=v._73o;v.moving?((H=J._23o)&&H.insertTab!==H.tab&&(G=H.tab,f=m.remove(G),0<=(B=m.indexOf(H.insertTab))&&(H.front||B++,B<=m.size()&&(m.add(G,B),Y._38I(G,f,B)))),J._7Q(ft),delete v.moving):!v._25o&&E&&(G=E.tab,(H=v._74o)&&H.tab!==G||(!G.isDisabled()&&P2(E._75o,v.lp)?J.onTabClosing(G,f=function(){var T=m.indexOf(G);Y.remove(G),J.onTabClosed(G,T)})&&f():G.isDisabled()||J._8o===G||Y.sm().ss(G))),v._25o=v._73o=v._74o=M===Ge||M===He?v.x=v.lp=v.tx=ft:v.y=v.lp=v.ty=ft}}),wK.PropertyView=function(T){var B=this,G=(B._view=j1(1,B),B._canvas=X1(B._view),K1(B._view,B._79O=r1()),B._rows=new $,B._28o=new $,B._26o={},B._26Q={},B._propertyModel=new sJ),H=B.ivm;G.mm(H,B),G.md(H,B),G.mh(H,B),B.dm(T||new sJ),new iK(B)},B("PropertyView",N,{ms_ac:[je,re,Le,FB,WB,"categorizable",fB,gB,EB,ZB,RB,GB,HB,BB,"selectRowIndex",Qt,"background",vB,mB,MB,YB,JB],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:Uw,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:Z2,_background:vt.propertyViewBackground,_expandIcon:vt.propertyViewExpandIcon,_collapseIcon:vt.propertyViewCollapseIcon,_scrollBarColor:j4,_scrollBarSize:W,_autoHideScrollBar:G2,_selectBackground:vt.propertyViewSelectBackground,_rowHeight:L4,_rowLineVisible:vt.propertyViewRowLineVisible,_rowLineColor:vt.propertyViewRowLineColor,_10I:.5,_columnLineVisible:vt.propertyViewColumnLineVisible,_columnLineColor:vt.propertyViewColumnLineColor,_labelColor:vt.propertyViewLabelColor,_labelSelectColor:vt.propertyViewLabelSelectColor,_labelFont:vt.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(T){var B=this._10I;this._10I=T=1<(T=T<0?0:T)?1:T,this.fp("columnPosition",B,T)},getPropertyName:function(T){return T.toLabel()},getLabelFont:function(T,B,G){return this._labelFont},getLabelColor:function(T,B,G){return G===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(T,B){return this._labelFont},getPropertyColor:function(T,B){return B===this._selectRowIndex?this._labelSelectColor:T.getColor()||this._labelColor},getCategoryFont:function(T){return this._labelFont},getCategoryColor:function(T){return this._labelColor},adjustTranslateX:function(T){return 0},adjustTranslateY:function(T){var B=this.getHeight()-this._59I;return 0<(T=T<B?B:T)?0:_t(T)},isExpanded:function(T){if(!T)return!0;var B=this._26o[T];return B?B.isExpanded:!(!1===this._26Q[T])},toggle:function(T){this.isExpanded(T)?this.collapse(T):this.expand(T)},expandAll:function(){for(var T in this.validate(),this._26o)this.expand(T)},expand:function(T){var B;T&&T!==Ee&&(B=this._26o[T])&&!B.isExpanded&&(B.isExpanded=!0,this.onExpanded(T),this.ivm())},onExpanded:function(T){},collapseAll:function(){for(var T in this.validate(),this._26o)this.collapse(T)},collapse:function(T){var B;T&&T!==Ee&&(B=this._26o[T])&&B.isExpanded&&(B.isExpanded=!1,this.onCollapsed(T),this.ivm())},onCollapsed:function(T){},getCategoryName:function(T){return this.isCategorizable()&&(T=T.getCategoryName())||Ee},getPropertyModel:function(){return this._propertyModel},handleSelectionChange:function(){this.ivm()},setDataModel:function(T){var B=this,G=B._dataModel;G!==T&&(G&&(G.umd(B.handlePropertyChange,B),B._selectionModel||G.sm().ums(B.handleSelectionChange,B)),(B._dataModel=T).md(B.handlePropertyChange,B),B._selectionModel?B._selectionModel._21I(T):T.sm().ms(B.handleSelectionChange,B),B.fp(qB,G,T))},isVisible:function(T){return!this._visibleFunc||this._visibleFunc(T)},onPropertyChanged:function(T){T=T.property,WK[T]?this.ivm():this.iv(),T===pB&&this._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:gJ},handlePropertyChange:function(T){this._27o===T.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){this._96I||(this.setSelectRowIndex(-1),this._96I=1,this.iv())},redraw:function(){this.iv()},validateModel:function(){var T,H=this,f=H._rows,B=H._28o,v={},J=new $,G=H._27o;for(T in H.updateCurrentData(),G!==H._27o&&H.endEditing(),f.clear(),B.clear(),H.getRawProperties().each(function(T){H.isVisible(T)&&(J.add(T),T=H.getCategoryName(T),v[T]||(B.add(T,T===Ee?0:Ht),v[T]={isExpanded:H.isExpanded(T),properties:new $}))}),H._sortFunc&&J.sort(H._sortFunc),H._26o)H._26Q[T]=H.isExpanded(T);H._26o=v,B.each(function(B){B!==Ee&&f.add(B);var G=v[B];G.isExpanded&&J.each(function(T){H.getCategoryName(T)===B&&(G.properties.add(T),f.add({property:T,data:H._27o}))},H)})},validateImpl:function(){var T=this,B=(T._76o(),T._96I&&(T.validateModel(),delete T._96I),T._canvas),G=T.getWidth(),H=T.getHeight(),f=-T.ty(),v=T._rowHeight,J=T._indent,M=G-J,Y=T._rows,m=Y.size(),E=T._9I=J+M*T._10I,Z=T._59I=m*v,R=(b1(B,G,H),T._29I={x:0,y:f,width:G,height:H},T._31I=pt(f/v),T._14I=qt((f+H)/v),T._31I<0&&(T._31I=0),T._14I>m&&(T._14I=m),G0(B)),A=T._background;H0(R,0,-f,1),R.beginPath(),R.rect(0,f,G,H),R.clip(),R.clearRect(0,f,G,H),T._93db(R),A&&k0(R,0,0,J,Z,A);for(var g=T._31I;g<T._14I;g++){var F,W,s,S,y=Y.get(g),f=v*g;Et(y)?(A&&k0(R,J,f,M,v,A),(W=z(T.isExpanded(y)?T._expandIcon:T._collapseIcon))&&u2(R,W,LB,0,f,J,v),R.save(),R.beginPath(),R.rect(J,f,M,v),R.clip(),T.drawCategoryName(R,y,g,J,f,M,v),R.restore()):(F=y.property,y=y.data,W=z(F.getIcon()),s=T._selectRowIndex===g?T.getSelectBackground():ft,W&&u2(R,W,LB,0,f,J,v),s&&k0(R,J,f,M,v,s),R.save(),R.beginPath(),R.rect(J,f,E-J,v),R.clip(),T.drawPropertyName(R,F,g,J,f,E-J,v),R.restore(),T.isEditing(y,F)||(s=E+1,S=G-E-1,R.save(),R.beginPath(),R.rect(s,f,S,v),R.clip(),T._87o(T.drawPropertyValue(R,F,T.getValue(y,F),g,s,f,S,v,y),g,s,f,S,v),R.restore())),T._rowLineVisible&&k0(R,J,f+v-1,M,1,T._rowLineColor)}T._columnLineVisible&&(k0(R,E,0,1,Z,T._columnLineColor),k0(R,G-1,0,1,Z)),T._92db(R),T._93I(),R.restore(),T.ty(T.ty())},drawCategoryName:function(T,B,G,H,f,v,J){N2(T,B,this.getCategoryFont(B),this.getCategoryColor(B),H,f,v,J)},drawPropertyName:function(T,B,G,H,f,v,J){B.drawPropertyName?B.drawPropertyName(T,B,G,H,f,v,J,this):N2(T,this.getPropertyName(B),this.getPropertyFont(B,G),this.getPropertyColor(B,G),H,f,v,J)},drawPropertyValue:function(T,B,G,H,f,v,J,M,Y){if(B.drawPropertyValue)return B.drawPropertyValue(T,B,G,H,f,v,J,M,Y,this);SK(T,G,B,this.getLabelFont(B,G,H),this.getLabelColor(B,G,H),f,v,J,M,Y,this)},isPropertyEditable:function(T,B){return T.isEditable()&&this.isEditable()},setProperties:function(T){this._propertyModel.clear(),this.addProperties(T)},addProperties:function(T){var G;T&&(G=this._propertyModel,T.forEach(function(T){var B;T instanceof pK||(B=e2(T.className),T=O2(B||pK,T)),G.add(T)}))},getRowIndexAt:function(T){return 0<=(T=pt(this.lp(T).y/this._rowHeight))&&T<this._rows.size()?T:-1},getPropertyAt:function(T){return 0<=(T=this.getRowIndexAt(T))?this._rows.get(T).property:ft},getToolTip:function(T){var B=this.getPropertyAt(T),G=this._27o;return B&&G?B.getToolTip(G,this._9I<this.lp(T).x,this):ft}}),function(T){this.pv=T,this.addListeners()}),IK=(Es(iK,N,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(T){this.getView().style.cursor=T},clear:function(){this._62O=this.cp=this.ty=this.p=ft,this.setCursor(Vt)},handle_mousedown:function(T){this.handle_touchstart(T)},handle_touchstart:function(T){var B=this.pv;_2(T),B.setFocus(T)&&(L2(T)?(this.cp=K2(T),this.ty=B.ty(),this.p=B.getColumnPosition(),this.handle_touchmove(T)):B.setSelectRowIndex(B.getRowIndexAt(T)))},handleWindowMouseUp:function(T){this.clear()},handleWindowTouchEnd:function(T){this.clear()},handle_mouseup:function(T){this.handle_touchend(T)},handle_touchend:function(T){var B,G,H,f,v,J,M,Y,m,E;this.cp&&!this._62O&&(m=(Y=(B=this.pv).lp(T)).x,Y=Y.y,M=B._indent,G=B.getRowIndexAt(T),H=B._9I,0<=G&&(E=(f=B._rowHeight)*G,J=(v=B._rows.get(G)).property,Et(v)?(z(B.isExpanded(v)?B._expandIcon:B._collapseIcon)&&0<=m&&m<=M&&E<=Y&&Y<=E+f||U2(T))&&B.toggle(v):H<m&&B.isPropertyEditable(J,T)&&(Y={x:(M={x:H+1,y:E,width:B.getWidth()-H-1,height:f}).x+B.tx(),y:M.y+B.ty(),width:M.width,height:M.height},m=0,E=B._29I,M.y<E.y?m=M.y-E.y:M.y+f>E.y+E.height&&(m=M.y+f-E.y-E.height),m&&(B.ty(B.ty()-m),Y.y-=m),B.beginEditing({data:v.data,property:J,value:B.getValue(v.data,J),event:T,rect:M,editorRect:Y,view:B}))),B.setSelectRowIndex(G)),this.clear()},handleWindowMouseMove:function(T){this.handleWindowTouchMove(T)},handleWindowTouchMove:function(T){var B,G,H=this.pv,f=this.ty,v=this.cp,T=K2(T),J=this._62O;"p"===J?H.setTranslateY(f+T.y-v.y):"c"===J?16<(G=H.getWidth()-H._indent)&&(B=this.p-(v.x-T.x)/G,H.setColumnPosition(B=1-(G=16/G)<(B=B<G?G:B)?1-G:B)):"s"===J&&H.setTranslateY(f+(v.y-T.y)*H._59I/H._29I.height)},handle_mousemove:function(T){this.handle_touchmove(T)},handle_touchmove:function(T){var B,G,H;!g0&&L2(T)&&(G=(B=this).pv,H=it(G.lp(T).x-G._9I)<=($t?8:3),B.cp?B._62O||(H?(B._62O="c",fs(B,T)):2<=it(K2(T).y-B.cp.y)&&(B._62O=B.isV(T)?"s":"p",fs(B,T))):(H?B.setCursor(nB):B.setCursor(Vt),B.isV(T)&&G._43o()))},isV:function(T){var B=this.pv,G=B._29I;return B._41o()&&G.x+G.width-B.lp(T).x<W2},handle_mousewheel:function(T){this.handleScroll(T,T.wheelDelta/40)},handle_DOMMouseScroll:function(T){2===T.axis&&this.handleScroll(T,-T.detail)},handleScroll:function(T,B){var G=this.pv;_2(T),G.endEditing(),G.translate(0,B*G.getRowHeight())},handle_keydown:function(T){var B=this.pv,G=B._rows.size(),H=B._selectRowIndex+(I0(T)?-1:1);(I0(T)||h0(T))&&B.setSelectRowIndex(H=G<=(H=H<0?0:H)?G-1:H)}}),wK.ListView=function(T){this._5o(T),new IK(this)},B("ListView",N,{ms_ac:[je,re,Le,vB,fB,mB,MB,gB,EB,GB,HB,BB,TB,Qt],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:Z2,_rowHeight:L4,_rowLineVisible:vt.listViewRowLineVisible,_rowLineColor:vt.listViewRowLineColor,_scrollBarColor:j4,_scrollBarSize:W,_autoMakeVisible:U4,_autoHideScrollBar:G2,_selectBackground:vt.listViewSelectBackground,_labelColor:vt.listViewLabelColor,_labelSelectColor:vt.listViewLabelSelectColor,_labelFont:vt.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(T){var B=this._checkMode;this._checkMode=T,this.fp(AB,B,T)},drawRow:function(T,B,G,H,f,v,J){var M=0,Y=this._indent,m=this.getIconWidth(B);this.drawRowBackground(T,B,G,H,f,v,J),this._checkMode&&(q2(T,z(this.getCheckIcon(B)),M+Y/2,f+J/2,B,this),M+=Y),this.drawIcon(T,B,M,f,m,J),this.drawLabel(T,B,M+m,f,J)}}),function(T){this.list=T,this.addListeners()}),DK=(Es(IK,N,{ms_listener:1,getView:function(){return this.list._view},clear:function(T){var B=this,G=B.list;T&&"d"===B._62O&&!B.dragCancel&&G.handleDragAndDrop(T,"end"),G.draggingData&&(G.draggingData=null,G.redraw()),B.dragCancel=B._62O=B._isV=B._isH=B.cp=B.tx=B.ty=ft},handle_mousedown:function(T){this.handle_touchstart(T)},handle_touchstart:function(T){var B,G=this.list;_2(T),G.setFocus(T)&&(B=G.getDataAt(T),this.cp=K2(T),this.tx=G.tx(),this.ty=G.ty(),L2(T)?B&&G.handleDragAndDrop&&!this.isV(T)&&!this.isH(T)&&G.isDraggable(B)&&(G.draggingData=B,G.redraw(),G.handleDragAndDrop(T,"prepare")):(B?this._33o(T,B):this._cancelDataDoubleSelect(),this.clear(T)))},handleWindowMouseUp:function(T){this.clear(T)},handleWindowTouchEnd:function(T){this.clear(T)},handle_mouseup:function(T){this.handle_touchend(T)},handle_touchend:function(T){var B,G=this.list;this._isV||this._isH||!this.cp||this._62O||((B=G.getDataAt(T))?(G.isCheckMode()?this._34o(T,B):this._33o(T,B),U2(T)?G.onDataDoubleClicked(B,T):G.onDataClicked(B,T)):(this._cancelDataDoubleSelect(),G.handleBackgroundClick(T))),this.clear(T)},handleWindowMouseMove:function(T){this.handleWindowTouchMove(T)},handleWindowTouchMove:function(T){var B=this.list,G=this._62O,H=this.tx,f=this.ty,v=this.cp,J=K2(T),M=B._29I;"p"===G?B.setTranslate(H+J.x-v.x,f+J.y-v.y):"v"===G?B.ty(f+(v.y-J.y)*B._59I/M.height):"h"===G?B.tx(H+(v.x-J.x)*B._91I/M.width):"d"!==G||this.dragCancel||B.handleDragAndDrop(T,"between")},handle_mousemove:function(T){this.handle_touchmove(T)},handle_touchmove:function(T){var B,G;!g0&&L2(T)&&(G=(B=this).list,B._isV=B.isV(T),B._isH=B.isH(T),B.cp?B._62O||n2(K2(T),B.cp)<2||(B._isV?B._62O="v":B._isH?B._62O="h":G.draggingData&&!this.dragCancel?(B._62O="d",G.handleDragAndDrop(T,"begin")):B._62O="p",B._62O&&"d"!==B._62O&&G.draggingData&&(G.draggingData=null,G.redraw()),fs(B,T)):(B._isV&&G._43o(),B._isH&&G._42o()))},isV:function(T){var B=this.list,G=B._29I;return B._41o()&&G.x+G.width-B.lp(T).x<W2},isH:function(T){var B=this.list,G=B._29I;return B._40o()&&G.y+G.height-B.lp(T).y<W2},handle_mousewheel:function(T){this.handleScroll(T,T.wheelDelta/40,T.wheelDelta!==T.wheelDeltaX)},handle_DOMMouseScroll:function(T){this.handleScroll(T,-T.detail,1)},handleScroll:function(T,B,G){var H=this.list;_2(T),H.endEditing&&H.endEditing(),G&&H._41o()?H.translate(0,B*H.getRowHeight()):H._40o()&&H.translate(10*B,0)},handle_keydown:function(T){var B,G,H,f,v,J,M;vt.isInput(T.target)||(G=(B=this.list).sm(),f=(H=B._rows).size(),w0(T)?B.selectAll():O0(T)?B.handleDelete&&B.handleDelete(T):c0(T)?"d"!==this._62O||this.dragCancel||(B.handleDragAndDrop(T,"cancel"),this.dragCancel=!0):o0(T)?B.isCheckMode()&&(M=B.getFocusData())&&B.checkData(M):(I0(T)||h0(T))&&((M=(v=B.isCheckMode())?B.getFocusData():G.ld())?0<=(J=B.getRowIndex(M))&&(I0(T)?0!==J&&(M=H.get(J-1),v?B.setFocusData(M):G.ss(M)):J!==f-1&&(M=H.get(J+1),v?B.setFocusData(M):G.ss(M))):0<f&&(M=H.get(0),v?B.setFocusData(M):G.ss(M))))},_34o:function(T,B){var G=this.list;0<=(T=G.lp(T).x)&&T<=G._indent?G.checkData(B):G.setFocusData(B)},_33o:function(T,B){var G=this.list,H=G.sm(),f=H.ld();if(G.canHandleSelectMode(T,B))if(b2(T))G.isSelected(B)?H.rs(B):H.as(B);else if(l2(T))if(f)for(var v=G.getRowIndex(f),J=G.getRowIndex(B);v!==J;)H.as(G._rows.get(v+=v<J?1:-1));else H.ss(B);else L2(T)?(H.contains(B)?G.handleDataDoubleSelect&&(this._handleDataDoubleSelect(T,B),U2(T)&&this._cancelDataDoubleSelect()):this._cancelDataDoubleSelect(),H.ss(B)):H.contains(B)||H.ss(B);else this._cancelDataDoubleSelect()},_handleDataDoubleSelect:function(T,B){this._cancelDataDoubleSelect(),this._doubleSelectTimer=jt(function(){this.list.handleDataDoubleSelect(T,B),this._doubleSelectTimer=Ht}.bind(this),vt.doubleClickSpeed)},_cancelDataDoubleSelect:function(){this._doubleSelectTimer&&(rt(this._doubleSelectTimer),this._doubleSelectTimer=Ht)}}),wK.TreeView=function(T){this._35o(),this._5o(T),new DK(this)},B("TreeView",N,{ms_ac:[je,re,Le,"rootVisible",AB,"rootData",gB,EB,GB,HB,BB,fB,vB,mB,MB,ZB,RB,TB,Qt,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:ft,_indent:Z2,_rowHeight:L4,_rowLineVisible:vt.treeViewRowLineVisible,_rowLineColor:vt.treeViewRowLineColor,_scrollBarColor:j4,_scrollBarSize:W,_autoHideScrollBar:G2,_expandIcon:vt.treeViewExpandIcon,_collapseIcon:vt.treeViewCollapseIcon,_autoMakeVisible:U4,_selectBackground:vt.treeViewSelectBackground,_labelColor:vt.treeViewLabelColor,_labelSelectColor:vt.treeViewLabelSelectColor,_labelFont:vt.treeViewLabelFont,_doubleClickToToggle:vt.treeViewDoubleClickToToggle,drawRow:function(T,B,G,H,f,v,J){this.drawRowBackground(T,B,G,H,f,v,J),this.drawTree(T,B,G,0,f,v,J)},isOnToggleIcon:function(T){var B=this.getDataAt(T);if(B){var G=this.getIndent(),T=this.lp(T).x;if(z(this.getToggleIcon(B))&&(B=G*this.getLevel(B))<=T&&T<=B+G)return!0}return!1}}),function(T){O1(DK,this,[T])}),hK=(Es(DK,IK,{toggle:function(T,B,G,H){var f=this.list,v=f.lp(T).x;return z(f.getToggleIcon(B))&&(H*=G)<=v&&v<=H+G?(f.toggle(B),!0):!(!f.isDoubleClickToToggle()||!U2(T)||(f.toggle(B),0))},_34o:function(T,B){var G=this.list,H=G.lp(T).x,f=G._levelMap[B._id],v=G._indent,J=v*(f+1);J<=H&&H<=J+v?G.checkData(B):this.toggle(T,B,v,f)||G.setFocusData(B)},_33o:function(T,B){var G=this.list;if(!this.toggle(T,B,G._indent,G.getLevel(B)))if(l2(T)){var H=G.sm();if(0<H.size()){for(var f=G._rows,v=null,J=0,M=f.size();J<M;J++)if(G.isSelected(f.get(J))){v=J;break}for(var Y=null,J=f.size()-1;0<=J;J--)if(G.isSelected(f.get(J))){Y=J;break}for(var m,E=G.getRowIndex(B),Z=E<v?(m=E-1,v):Y<E?(m=Y,E):(m=v,Y);m!==Z;)H.as(G._rows.get(++m))}else H.ss(B)}else DK.superClass._33o.call(this,T,B)},handle_keydown:function(T){var B,G,H,f,v;i0(T)||D0(T)?(G=(B=this.list)._rows,H=B.isCheckMode(),f=B.sm(),(v=H?B.getFocusData():f.ld())?v.hasChildren()&&(i0(T)?B.collapse(v):B.expand(v)):0<G.size()&&(v=G.get(0),H?B.setFocusData(v):f.ss(v))):DK.superClass.handle_keydown.call(this,T)}}),wK.TableView=function(T){this._98I(),this._5o(T),new oK(this)}),oK=(B("TableView",N,{ms_ac:[je,re,Le,"sortMode",FB,WB,vB,mB,MB,YB,JB,"sortColumn",gB,EB,GB,HB,BB,TB,Qt],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:sB,_editable:!0,_batchEditable:!1,_rowHeight:L4,_rowLineVisible:vt.tableViewRowLineVisible,_rowLineColor:vt.tableViewRowLineColor,_columnLineVisible:vt.tableViewColumnLineVisible,_columnLineColor:vt.tableViewColumnLineColor,_scrollBarColor:j4,_scrollBarSize:W,_autoHideScrollBar:G2,_autoMakeVisible:U4,_selectBackground:vt.tableViewSelectBackground,_labelColor:vt.tableViewLabelColor,_labelSelectColor:vt.tableViewLabelSelectColor,_labelFont:vt.tableViewLabelFont,getCheckColumn:function(){var T;return this._31o||((T=this._31o=new _K).setEditable(!0),T.setWidth(40),T.getValue=this.getCheckColumValue,T.drawCell=this.drawCheckColumnCell),this._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(T){var B=this._39o,G=this.getCheckColumn();T!==this.isCheckMode()&&(T?B.add(G,0):B.remove(G),this.fp(AB,!T,T))},getCheckColumValue:function(T,B,G){return G.isSelected(T)},drawCheckColumnCell:function(T,B,G,H,f,v,J,M,Y){q2(T,Y.getCheckIcon(B),f+J/2,v+M/2,B,Y)}}),function(T){O1(oK,this,[T])}),eK=(Es(oK,IK,{_34o:function(T,B){var G=this.list,H=G._31o;if(G.isCellEditable(B,H,T)){var f=G._3Q(H),v=G.lp(T).x;if(f&&v>=f.startX&&v<f.startX+H.getWidth())return void G.checkData(B)}G._37O(B,T),G.setFocusData(B)},_33o:function(T,B){this.list._37O(B,T),oK.superClass._33o.apply(this,arguments)}}),wK.TreeTableView=function(T){var B=this._4o=new _K;this._35o(),this._98I(),this._5o(T),B.setDisplayName("Name"),B.setEditable(!0),B.setWidth(180),B.drawCell=cK,B.getValue=tK,this._39o.add(B),new dK(this)}),cK=function(T,B,G,H,f,v,J,M,Y){Y.drawTree(T,B,G,f,v,J,M)},tK=function(T,B,G){return G.getLabel(T)},dK=(B("TreeTableView",N,{ms_ac:[je,re,Le,"sortMode",FB,WB,fB,AB,"rootData","rootVisible",gB,EB,"sortColumn",ZB,RB,GB,HB,BB,TB,MB,vB,mB,YB,JB,Qt,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:sB,_checkMode:ft,_editable:!0,_batchEditable:!1,_indent:Z2,_rowHeight:L4,_rowLineVisible:vt.treeTableViewRowLineVisible,_rowLineColor:vt.treeTableViewRowLineColor,_columnLineVisible:vt.treeTableViewColumnLineVisible,_columnLineColor:vt.treeTableViewColumnLineColor,_expandIcon:vt.treeTableViewExpandIcon,_collapseIcon:vt.treeTableViewCollapseIcon,_scrollBarColor:j4,_scrollBarSize:W,_autoHideScrollBar:G2,_autoMakeVisible:U4,_selectBackground:vt.treeTableViewSelectBackground,_labelColor:vt.treeTableViewLabelColor,_labelSelectColor:vt.treeTableViewLabelSelectColor,_labelFont:vt.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}}),function(T){O1(dK,this,[T])}),NK=(Es(dK,IK,{_34o:function(T,B){var G=this.list,H=G._4o,f=G._3Q(H),v=G.lp(T).x;if(f){var J=G._indent,f=f.startX+J*G.getLevel(B);if(z(G.getToggleIcon(B))&&f<=v&&v<=f+J)return void G.toggle(B);if(G.isCellEditable(B,H)&&(f+=J)<=v&&v<=f+J)return void G.checkData(B)}G._37O(B,T),G.setFocusData(B)},_33o:function(T,B){var G=this.list,H=G.lp(T).x;if(z(G.getToggleIcon(B))&&(f=G._3Q(G._4o))){var f,v=G._indent;if((f=f.startX+v*G.getLevel(B))<=H&&H<=f+v)return void G.toggle(B)}G._37O(B,T),dK.superClass._33o.apply(this,arguments)}}),wK.TableHeader=function(T){var B=this,G=B._view=j1(1,B),H=B._39o=T.getColumnModel(),f=B.iv;B.tv=B._tableView=T,B._60I=new $,B._canvas=X1(G),G.style.background=vt.tableHeaderBackground||"",G.style.height=R2+Ze,H.mm(f,B),H.md(f,B),H.mh(f,B),T.mp(function(T){RK[T.property]&&B.iv()},B),new QK(B),B.iv()}),QK=(B("TableHeader",N,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",je,Le,fB,"moveBackground","insertColor",YB,JB,"resizable","movable"],_checkIcon:ue,_movable:!0,_resizable:!0,_labelColor:vt.tableHeaderLabelColor,_labelFont:vt.tableHeaderLabelFont,_columnLineColor:vt.tableHeaderColumnLineColor,_columnLineVisible:vt.tableHeaderColumnLineVisible,_sortDescIcon:vt.tableHeaderSortDescIcon,_sortAscIcon:vt.tableHeaderSortAscIcon,_moveBackground:vt.tableHeaderMoveBackground,_insertColor:vt.tableHeaderInsertColor,_indent:Z2,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(T){return T.toLabel()},getLabelFont:function(T){return this._labelFont},getLabelColor:function(T){return T.getColor()||this._labelColor},getLabelAlign:function(T){return T._align},onPropertyChanged:function(T){this.iv()},_5Q:function(T){this._61I=T,this.iv()},getLogicalPoint:function(T){return Gs(T,this._canvas,this.tv.tx())},validateImpl:function(){var T,H=this,B=H._canvas,G=H.getWidth(),f=H.getHeight(),v=H.tv,J=H._60I,M=H._61I,Y=-v.tx(),m=0,E=(G===B.clientWidth&&f===B.clientHeight||b1(B,G,f),J.clear(),H._39o._roots.each(function(T){var B;T.isVisible()&&(B=m+T.getWidth(),m<=Y+G&&Y<=B&&J.add({column:T,startX:m}),m=B)}),G0(B));H0(E,-Y,0,1),E.beginPath(),E.rect(Y,0,G,f),E.clip(),E.clearRect(Y,0,G,f),J.each(function(T){var B=T.column,T=T.startX,G=B.getWidth();0<G&&(E.save(),E.beginPath(),E.rect(T,0,G,f),E.clip(),M&&M.column===B||H.drawColumn(E,B,T,0,G,f),H._columnLineVisible&&k0(E,T+G-1,0,1,f,H._columnLineColor),E.restore())}),M&&(v=M.column,m=M.startX,B=M.position,T=v.getWidth(),E.save(),E.beginPath(),E.rect(m,0,T,f),E.clip(),E.fillStyle=H._moveBackground,E.fill(),H.drawColumn(E,v,m,0,T,f),E.restore(),c1(E,H._insertColor,B,0,f)),E.restore()},_6Q:function(T){var B=this.tv;return B._31o===T&&B.sm().getSelectionMode()===kt},drawColumn:function(T,B,G,H,f,v){var J,M,Y,m,E,Z=this,R=Z.tv,A=z(B.getIcon()),g=Z.getLabelAlign(B);Z._6Q(B)?(E=z(Z._checkIcon),q2(T,E,G+f/2,H+v/2,B,Z)):(E=Z.getLabel(B),J=Z.getLabelFont(B),M=Z.getLabelColor(B),Y=Q2(J,E).width,m=A?Z._indent:0,g===Te?(A&&u2(T,A,LB,G,H,m,v),N2(T,E,J,M,G+m,H,f,v,Te)):g===Be?(A&&u2(T,A,LB,G+f-Y-m,H,m,v),N2(T,E,J,M,G,H,f,v,Be)):(A&&u2(T,A,LB,G+(f-Y-m)/2,H,m,v),N2(T,E,J,M,G+(f-Y+m)/2,H,0,v,Te))),B.isSortable()&&R.getSortColumn()===B&&(A=z(B.getSortOrder()===SB?Z._sortAscIcon:Z._sortDescIcon))&&(E=ks(A,B)/2+2,q2(T,A,g===Be?G+E:G+f-E,H+v/2,B,R))}}),function(T){this.th=T,this.tv=T._tableView,this.addListeners()}),LK=(Es(QK,N,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(T){this.getView().style.cursor=T},handle_mousemove:function(T){if(!g0){delete this._29o,this.setCursor(Vt);for(var B=this.th,G=B._60I,H=B.lp(T).x,f=G.size()-1;0<=f;f--){var v=G.get(f),J=v.column,M=v.startX+J.getWidth();if(B.isResizable()&&it(M-H)<=($t?10:3))return this._29o=v,void this.setCursor(nB);H>v.startX&&H<M&&(this._29o=v),(J.isClickable()||J.isSortable()||B.isMovable()||this.tv.getCheckColumn&&J===this.tv.getCheckColumn())&&H>v.startX&&H<M&&this.setCursor(VB)}}},handle_mousedown:function(T){this.handle_touchstart(T)},handle_touchstart:function(T){_2(T),this.tv.endEditing(),this.handle_mousemove(T),this._29o&&(this.x=K2(T).x,this.lx=this.th.lp(T).x,this.w=this._29o.column.getWidth(),fs(this,T))},handleWindowMouseMove:function(T){this.handleWindowTouchMove(T)},handleWindowTouchMove:function(T){var H,B=this,f=B.th,G=B.getView().style.cursor,v=B._29o,J=K2(T).x-B.x;B.resizing||B.moving||(G===nB?B.resizing=1:f.isMovable()&&G===VB&&2<it(J)&&(B.moving=1)),B.resizing?v.column.setWidth(B.w+J):B.moving&&(H=B.lx+J,f._60I.each(function(T){var B=T.startX,G=B+T.column.getWidth();B<=H&&H<=G&&((T={column:v.column,startX:v.startX+J,front:H-B<G-H,insertColumn:T.column}).front?T.position=B:T.position=G,f._5Q(T))}))},_16Q:function(T,B){var G=this.tv,H=this.th,f=H._checkIcon;if(H._6Q(T)){var v=z(f),J=this.lx,M=T.getWidth();if(B+M/2-(v=ks(v,T))<=J&&J<=B+M/2+v)return H.setCheckIcon(f===qe?ue:qe),J=G.sm(),B=G._rows,f===qe?J.rs(B):J.ss(B),G.onCheckColumnClicked(T),!0}return!1},handleWindowMouseUp:function(T){this.handleWindowTouchEnd(T)},handleWindowTouchEnd:function(T){var B,G,H,f,v,J=this,M=J.tv,Y=J.th,m=J._29o;J.moving?((G=Y._61I)&&G.insertColumn!==G.column&&(B=G.column,f=(H=M.getColumnModel()._roots).remove(B),0<=(v=H.indexOf(G.insertColumn))&&(G.front||v++,v<=H.size()&&(H.add(B,v),M.getColumnModel()._38I(B,f,v)))),Y._5Q(ft),delete J.moving):!J.resizing&&m&&(B=m.column,G=Y.lp(T).x,H=m.startX,f=!0,(f=(!Y.onColumnClicked||!1!==Y.onColumnClicked(B,T,H))&&f)&&H<=G&&G<=H+B.getWidth()&&(J._16Q(B,H)||(B.isSortable()&&(v=M.getSortMode(),m=B.getSortOrder(),v===sB?M.getSortColumn()===B?(m===yB&&M.setSortColumn(ft),B.setSortOrder(m===SB?yB:SB)):M.setSortColumn(B):"bistate"===v&&(M.getSortColumn()===B?B.setSortOrder(m===SB?yB:SB):M.setSortColumn(B))),M.onColumnClicked(B,T,H)))),J._29o=J.resizing=J.x=J.lx=J.w=ft}}),wK.TablePane=function(T){this.init(new hK(T))},B("TablePane",N,{ms_v:1,_44o:1}),wK.TreeTablePane=function(T){this.init(new eK(T))},B("TreeTablePane",N,{ms_v:1,_44o:1}),wK.Toolbar=function(T){var H=this,B=H._view=j1(1,H),G=B.style;G.background=vt.toolbarBackground||"",G.height=A2+Ze,H._canvas=X1(B),H._30o=new $,H._90I=new $,H.setItems(T||[]),B.handleGroupSelectedChanged=function(B){var G;B.isSelected()&&null!=(G=B.getGroupId())&&H._items.forEach(function(T){(T=T.element)&&T!==B&&T.setSelected&&T.getGroupId&&T.getGroupId()===G&&T.setSelected(!1)})},new LK(H)},B("Toolbar",N,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[Se,je,Le,re,Qt,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:vt.toolbarLabelColor,_labelSelectColor:vt.toolbarLabelSelectColor,_labelFont:vt.toolbarLabelFont,_selectBackground:vt.toolbarSelectBackground,_itemGap:vt.toolbarItemGap,_separatorColor:vt.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(T){return this._64I},getToolTip:function(T){return(T=this.getItemInfoAt(T))?T.item.toolTip:ft},getLabelColor:function(T){return T&&T.selected&&T.type!==qe&&"radio"!==T.type?this._labelSelectColor:this._labelColor},onPropertyChanged:function(T){this.iv(),T.property===Se&&this._items.forEach(function(T){L1(T)})},redraw:function(){this.iv()},addItem:function(T,B){var G=this._items;B==ft?G.push(T):G.splice(B,0,T),this.fp(Se,ft,G)},removeItem:function(T){if(T)for(var B=this._items,G=0;G<B.length;G++)T===B[G]&&(B.splice(G,1),this.fp(Se,ft,B))},removeItemById:function(T){if(T!=ft)for(var B,G=this._items,H=0;H<G.length;H++)if(T===G[H].id)return B=G.splice(H,1)[0],this.fp(Se,ft,G),B},getItemById:function(T){if(T!=ft)for(var B=this._items,G=0;G<B.length;G++){var H=B[G];if(T===H.id)return H}},setItemVisible:function(T,B){(T=this.getItemById(T))&&(T.visible=B)},getItemInfos:function(){return this._30o},getItemInfoAt:function(T){var B=0,G=this._30o,H=(T=this.lp(T)).x;if(0<=(T=T.y)&&T<=this.getHeight())for(;B<G.size();B++){var f=G.get(B);if(f.startX<=H&&H<=f.endX)return f}return ft},drawItem:function(T,B,G,H,f){if(!1===B.visible)return 0;if(Y1(B.visible)&&!B.visible())return 0;var v=B.disabled,f=(v&&(T.globalAlpha=a9),this.drawItemImpl(T,B,G,H,f)),J=this._itemGap;return v&&(T.globalAlpha=1),this._currentItem!==B||"separator"===B||!0===B.separator||B.unfocusable||J4(T,this._separatorColor,G-J/2,0,f+J,H),f},drawItemImpl:function(T,B,G,H,f){var v,J,M=this,Y=M._view,m=M._itemGap,E=H/2,Z=B.type,R=B.element,A=B.label,g=(Et(R)&&(A=R,R=ft),M.getLabelFont(B)),F=M.getLabelColor(B),W=B.selected,s=z(B.icon),S=ks(s,B),y=S+(A?Q2(g,A).width:0);return"separator"===B||!0===B.separator?(c1(T,M._separatorColor,G,H/4,E),1):R?(s&&q2(T,s,G+S/2,E,B,M),N2(T,A,g,F,G+S,0,0,H),J=E0(R),f||M._90I.add(J),J.parentNode!==Y&&K1(Y,J),R.iv&&R.iv(),R.validate&&R.validate(),Y=(f=J.getBoundingClientRect()).width,R=J.style,l1(J),R.left=M.tx()+G+y+Ze,R.top=(H-f.height)/2+Ze,y+Y):("radio"===Z?v=z(W?ie:Ie):Z===qe&&(v=z(W?qe:ue)),v?(J=ks(v,B),q2(T,v,G+J/2,E,B,M),G+=J,y+=J):W&&k0(T,G-m/2,0,y+m,H,M.getSelectBackground(B)),s&&q2(T,s,G+S/2,E,B,M),N2(T,A,g,F,G+S,0,0,H),y)},validateImpl:function(){var G=this,T=G._canvas,B=G.getWidth(),H=G.getHeight(),f=G._30o,v=G._items,J=(b1(T,B,H),G0(T)),M=G._itemGap,Y=M/2,m=(H0(J,G.tx(),0,1),J.clearRect(0,0,B,H),G._90I),m=(G._90I=new $,f.clear(),v.forEach(function(T){var B=G.drawItem(J,T,Y,H);f.add({item:T,startX:Y,endX:Y+B,width:B}),B&&(Y+=B+M)}),m.each(function(T){G._90I.contains(T)||vs(T)}),G._64I);G._64I=Gt(0,Y-M/2),J.restore(),G._stickToRight?(G._65O=0,J=G0(T),Y=B-G._64I+M/2,H0(J,0,0,1),J.clearRect(0,0,B,H),f.clear(),v.forEach(function(T){var B=G.drawItem(J,T,Y,H,!0);f.add({item:T,startX:Y,endX:Y+B,width:B}),B&&(Y+=B+M)}),J.restore()):G.tx(G.tx()),m!==G._64I&&G.onSumWidthChanged(m,G._64I)},onSumWidthChanged:function(T,B){},handleClick:function(B,T){var G=B.type,H=B.action,f=B.groupId,v=B.selected;B.disabled||(f!=ft?v||(B.selected=!0,this._items.forEach(function(T){T.groupId===f&&B!==T&&(T.selected=!1)}),H&&B.action(B,this,T)):(G!==qe&&"toggle"!==G||(B.selected=!v),H&&B.action(B,this,T))),v2(),this.iv()}}),function(T){this.tb=T,this.addListeners()});Es(LK,N,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(T){this.handleScroll(T,T.wheelDelta/40*10)},handle_DOMMouseScroll:function(T){this.handleScroll(T,10*-T.detail)},handleScroll:function(T,B){_2(T),(T=this.tb).isScrollable()&&!T._stickToRight&&(T.tx(T.tx()+B),A0())},handle_mousemove:function(T){g0||this.setItem(T)},handle_mouseout:function(T){T.target===this.getView()?this.tb.setCurrentItem(ft):this.handle_mousemove(T)},handle_mousedown:function(T){this.handle_mousemove(T),this.handle_touchstart(T)},handle_touchstart:function(T){var B=this.tb,G=T.target;!L2(T)||G!==this.getView()&&G!==B._canvas||(_2(T),B.setFocus(T)&&(this.setItem(T,!0),(B.isScrollable()||this.info&&!this.info.item.disabled)&&(this.x=K2(T).x,this.tx=B.tx(),fs(this,T))))},handleWindowMouseMove:function(T){this.handleWindowTouchMove(T)},handleWindowTouchMove:function(T){var B=this.tb;B._stickToRight||(T=K2(T).x-this.x,!this._25o&&2<it(T)&&B.isScrollable()&&(this._25o=1),this._25o&&B.tx(this.tx+T))},handleWindowMouseUp:function(T){this.handleWindowTouchEnd(T)},handleWindowTouchEnd:function(T){var B=this.tb,G=this.info,H=this.tb.getItemInfoAt(T);!this._25o&&G&&(G=G.item,H&&H.item===G&&B.handleClick(G,T)),this._25o=this.x=this.tx=ft,this.setItem()},setItem:function(T,B){var G=this.tb,H=(H=this.info=T?G.getItemInfoAt(T):ft)?H.item:ft;G.setCurrentItem(H),B&&H&&Y1(H.onDown)&&H.onDown(T)}}),wK.BorderPane=function(){this._view=j1(1,this),this.iv()},B("BorderPane",N,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(T,B){this._12o("leftView",T),B!=ft&&this.setLeftWidth(B)},getRightView:function(){return this._rightView},setRightView:function(T,B){this._12o("rightView",T),B!=ft&&this.setRightWidth(B)},getTopView:function(){return this._topView},setTopView:function(T,B){this._12o("topView",T),B!=ft&&this.setTopHeight(B)},getBottomView:function(){return this._bottomView},setBottomView:function(T,B){this._12o("bottomView",T),B!=ft&&this.setBottomHeight(B)},getCenterView:function(){return this._centerView},setCenterView:function(T){this._12o("centerView",T)},_12o:function(T,B){var G="_"+T,H=this._view,f=this[G];f!==B&&(f&&(f.getView?vs(f.getView()):vs(f)),(this[G]=B)&&(B.getView?K1(H,B.getView(),1):K1(H,B,1)),this.fp(T,f,B))},onPropertyChanged:function(T){this.iv()},validateImpl:function(){var T=(F=this)._topView,B=F._bottomView,G=F._leftView,H=F._rightView,f=F._centerView,v=F.getWidth(),J=0,M=0,Y=v,m=g=F.getHeight(),E=0,Z=0,R=0,A=0,g=(T&&(M=E=F._topHeight==ft?a1(T):F._topHeight),B&&(m=g-(Z=F._bottomHeight==ft?a1(B):F._bottomHeight)),G&&(J=R=F._leftWidth==ft?C1(G):F._leftWidth),H&&(Y=v-(A=F._rightWidth==ft?C1(H):F._rightWidth)),Gt(0,Y-J)),F=Gt(0,m-M);T&&D(T,0,0,v,E),B&&D(B,0,m,v,Z),G&&D(G,0,M,R,F),H&&D(H,Y,M,A,F),f&&D(f,J,M,g,F)}})}function jK(T){_2(T),T.stopPropagation()}function rK(T){_2(T)}function XK(T,B){var G=T.length,H=T[0];if(Et(T)||H&&1!==H.length)return T;for(var f=new Array(G),v=0;v<G;v++)f[v]=T[v];var J=f[H="L"===f[0]?5:7],M=f[1+H],Y=f[2+H],m=f[3+H],E=f[4+H],Z=f[5+H],R=B[0],A=B[1],g=B[2],F=B[3],W=B[4],B=B[5];return f[H]=R*J+g*M,f[1+H]=A*J+F*M,f[2+H]=R*Y+g*m,f[3+H]=A*Y+F*m,f[4+H]=R*E+g*Z+W,f[5+H]=A*E+F*Z+B,f}function UK(T,B){return B===T.substring(0,B.length)}function lK(T){return parseFloat(T)||0}function bK(T,B){B==Ht&&(B=new Zt),T=(T=T.split(/\s+/)).map(lK),B.set(T[0]||0,T[1]||0,T[2]||0)}function KK(){V9.apply(this,arguments)}function zK(){V9.apply(this,arguments)}function nK(){V9.apply(this,arguments)}function $K(){V9.apply(this,arguments),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:"ZeroCurvature",endingEnd:"ZeroCurvature"}}function VK(){V9.apply(this,arguments)}function PK(T){var B=T.substr(T.lastIndexOf(".")+1),G=(T=vt.convertURL?vt.convertURL(T):T,UX[B]||B);return{postfix:B,url:"url("+T+') format("'+G+'")'}}function kK(T,B){return lX[T.postfix]-lX[B.postfix]}function CK(T,B,G){T.x=B.x,T.y=B.e||G,T.z=B.y}function aK(T){T.duration&&(T.startTime=Pw()),T.timeId=I2(T.tick,ft,ft,T.interval)}function TN(T){T.details=0,T.timeout=null,T.lastPoint=null}function BN(G,H){G.getValue&&G.getValue.compType===H||(G.getValue=function(T){var B=U(G,T);return B===Ht&&H.properties&&(T=H.properties[T])?T.defaultValue:B},G.getColor=function(T,B){return GN(!0===B?T:G.getValue(T))},G.getValue.compType=H)}function GN(T,B){return B=B?U(T,B):T,X&&X.compGray&&B?vt.toGrayColor(B):Fc&&B?r0(B,Fc,Wc):B}function HN(T){if(m1(T)){for(var B=new $,G=T.length,H=0;H<G;H+=2)B.add({x:T[H],y:T[H+1]});T=B}return T}function fN(T,B,G){if(B){var H,f,v,J={x:B.x,y:B.y,width:B.width,height:B.height},M=sc(T),Y=U(T,"layoutH"),m=U(T,"layoutV"),E=1,Z=1,R=0,A=0,g=1,F=1,W=J.x+M.x*J.width,s=J.y+M.y*J.height;switch(Y){case"left":break;case"right":W+=G.width-G.rw;break;case"center":W+=.5*(G.width-G.rw);break;default:(H=U(T,ze)||0)&&(R=Math.abs(A=Math.sin(H)),g=Math.abs(F=Math.cos(H))),"leftright"!==Y?(E+=g*(G.widthScale-1),Z+=R*(G.widthScale-1),W*=G.widthScale):(f=U(T,"scaleX")||1,v=U(T,"scaleY")||1,E+=J.width?g*(G.width-G.rw)/J.width/f:0,Z+=J.height?R*(G.width-G.rw)/J.height/v:0,W+=(G.rw-G.width)*Math.min(-M.x*F+M.y*A,-M.x*F-(1-M.y)*A,(1-M.x)*F+M.y*A,(1-M.x)*F-(1-M.y)*A))}switch(m){case"top":break;case"bottom":s+=G.height-G.rh;break;case"center":s+=.5*(G.height-G.rh);break;default:H==ft&&(H=U(T,ze))&&(R=Math.abs(A=Math.sin(H)),g=Math.abs(F=Math.cos(H))),"topbottom"!==m?(E+=R*(G.heightScale-1),Z+=g*(G.heightScale-1),s*=G.heightScale):(f==ft&&(f=U(T,"scaleX")||1,v=U(T,"scaleY")||1),E+=J.width?R*(G.height-G.rh)/J.width/f:0,Z+=J.height?g*(G.height-G.rh)/J.height/v:0,s+=(G.rh-G.height)*Math.min(-M.x*A-M.y*F,-M.x*A+(1-M.y)*F,(1-M.x)*A-M.y*F,(1-M.x)*A+(1-M.y)*F))}return 1===E&&1===Z||(J.width*=E,J.height*=Z,J.width<0&&(J.width=0),J.height<0&&(J.height=0)),J.x=W-M.x*J.width,J.y=s-M.y*J.height,J}}function vN(T){return m1(T)?new $(T):T}function JN(T,B,G,H,f,v,J){var M=X.interactiveInfo,Y=T.transform;if(Y)return X.save(),X.setTransform(Y.a,Y.b,Y.c,Y.d,Y.tx,Y.ty),M&&M.compInfos.push({comp:T,rect:B,matrix:Y.clone(),prefix:ls,refRect:M.refRect}),!0;if(f===Ht&&(f=1),v===Ht&&(v=1),Y=U(T,"clipPercentage"),q1(G,B)&&!H&&1===f&&1===v&&Y==Ht)return M&&M.compInfos.push({comp:T,rect:B,matrix:M.matrix.clone(),prefix:ls,refRect:M.refRect}),!1;var m=B.x+B.width*(J=J||Vs).x,E=B.y+B.height*J.y,Z=G.x+G.width*J.x,J=G.y+G.height*J.y,f=G.width?f*(B.width/G.width):1,v=G.height?v*(B.height/G.height):1;return X.save(),M&&(M.matrix.appendTranslate(m,E).appendRotate(H).appendScale(f,v).appendTranslate(-Z,-J),M.compInfos.push({comp:T,rect:B,matrix:M.matrix.clone(),prefix:ls,refRect:M.refRect})),f0(X,m,E),v0(X,H||0),J0(X,f,v),f0(X,-Z,-J),Y!=Ht&&(B=e1(G,U(T,"clipDirection"),Y),X.beginPath(),X.rect(B.x,B.y,B.width,B.height),X.clip()),!0}function MN(){X.restore()}function YN(T,B,G,H){var f,v,J,M,Y,m,E,Z,R,A,g,F,W,s,S,y,x,w,O,N,Q,_,p,q,u,i,I,D,h=U(T,De,HN),o=U(T,ze),e=sc(T),H=(h&&H.fitSize&&(f=new $,H=fN(T,c=$2(h),H),v=c.x+e.x*c.width,J=c.y+e.y*c.height,M=H.x+e.x*H.width,Y=H.y+e.y*H.height,m=c.width?H.width/c.width:1,E=c.height?H.height/c.height:1,h.each(function(T){f.add({x:M+(T.x-v)*m,y:Y+(T.y-J)*E})}),h=f,T.unionRect=null),U(T,"scaleX")),c=U(T,"scaleY"),t=B===se,d=ft;!G&&t&&((G=T.unionRect)||(G=$2(h),T.points.func||(T.unionRect=G)),d=G),G&&(t?(d=d||T.unionRect)||(d=$2(h),T.points.func||(T.unionRect=d)):d=G,G=JN(T,G,d,o,H,c,e),o=U(T,"borderPattern"),H=ds(X,o),c=GN(T,"background"),e=z(U(T,"repeatImage"),Fc,Wc),Z=U(T,"gradientPack"),R=U(T,"borderGradientPack"),A=GN(T,"borderColor"),g=U(T,"borderWidth"),F=z(U(T,"borderRepeatImage"),Fc,Wc),W=U(T,"segments",vN),D=U(T,"gradient"),s=GN(T,"gradientColor"),S=U(T,"border3d"),y=GN(T,"border3dColor"),x=U(T,"border3dAccuracy"),w=U(T,"closePath"),O=U(T,"fillRule")||"nonzero",N=X.lineJoin,Q=X.lineCap,X.lineJoin=U(T,"borderJoin")||Y2,X.lineCap=U(T,"borderCap")||M2,t?c||e||Z?((i=U(T,"fillClipPercentage"))!=Ht&&(I=e1(d,U(T,"fillClipDirection"),i),X.save(),X.beginPath(),X.rect(I.x,I.y,I.width,I.height),X.clip()),n0(X,h,W,w),Z?K0(X,Z,GN,!1,d):e?T4(X,e,Fc,Wc,Rc,Ac,U(T,"repeatImageStretch"),d,U(T,"repeatImageRotation")):a0(X,c,D,s,d),X.fill(O),Z&&X.restore(),i!=Ht&&X.restore(),H!==X&&n0(H,h,W,w)):n0(H,h,W,w):("roundRect"===B?_=U(T,"cornerRadius"):"polygon"===B?(_=U(T,"polygonSide"),p=U(T,"cornerRadius"),q=U(T,"regular")):"arc"===B&&(_=U(T,"arcFrom"),p=U(T,"arcTo"),q=U(T,"arcClose"),u=U(T,"arcOval")),c||e||Z?((i=U(T,"fillClipPercentage"))!=Ht&&(I=e1(d,U(T,"fillClipDirection"),i),X.save(),X.beginPath(),X.rect(I.x,I.y,I.width,I.height),X.clip()),C0(X,B,d,_,p,q,u),Z?K0(X,Z,GN,!1,d):e?T4(X,e,Fc,Wc,Rc,Ac,U(T,"repeatImageStretch"),d,U(T,"repeatImageRotation")):a0(X,c,D,s,d),X.fill(O),Z&&X.restore(),i!=Ht&&X.restore(),X!==H&&C0(H,B,d,_,p,q,u)):C0(H,B,d,_,p,q,u)),(I=U(T,"borderWidthAbsolute"))&&(X.save(),X.setTransform(1,0,0,1,0,0)),g&&(A||F||R)&&(X.lineWidth=g,R?K0(X,R,GN,!0,d):F?B4(X,F,Fc,Wc,Rc,Ac,U(T,"borderRepeatImageStretch"),d,U(T,"borderRepeatImageRotation")):X.strokeStyle=A,X.stroke(),R&&X.restore(),S&&V0(X,A,y,g,gc,x)),Ns(X,o),U(T,"dash")&&0<(e=U(T,"dashWidth")||g)&&(o=U(T,"dashPattern")||J2,H=ds(X,o,U(T,"dashOffset")),D=GN(T,"dashColor")||GN(u4),H!==X&&(t?n0(H,h,W,w):C0(H,B,d,_,p,q,u)),X.strokeStyle=D,X.lineWidth=e,X.stroke(),U(T,"dash3d")&&V0(X,D,GN(T,"dash3dColor"),e,gc,U(T,"dash3dAccuracy")),Ns(X,o)),I&&X.restore(),B===j&&M4(X,c,U(T,"depth"),d),X.lineJoin=N,X.lineCap=Q,G&&MN())}function mN(T){X=T[0],Rc=T[1],Ac=T[2],gc=T[3],Fc=T[4],Wc=T[5]}function EN(T,B){if("function"!=typeof B&&null!==B)throw new TypeError("Super expression must either be null or a function");T.prototype=N.create(B&&B.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),B&&TJ(T,B)}function ZN(T){return"Array]"===(T=N.prototype.toString.call(T)).substring(T.length-6)}function RN(T,B,G,H,f,v){B=B||[],G=G||[],H=H||[];try{B.push(T);var J=Function.apply(0,B);return G[G.length]="return "+J,Function.apply(0,G).apply(0,H)}catch(T){return v&&v(T),f}}function AN(T){return T}function gN(T,B){return B}function FN(T,B,G,H){var f=T?T.path.slice(0):[];B&&f.push(B),this.desc=G,this.name=B,this.path=GJ(f),this.getter=(G=f)&&G.length?new Function("o",["return o['",G.join("']['"),"'];"].join("")):AN,this.setter=(B=f)&&B.length?new Function("o","v",["return o['",B.join("']['"),"'] = v;"].join("")):gN,this.isLeaf=H,this.parent=T,this.children=[],this.childMap={}}function WN(T){var B=[];return T.forEach(function(T){B.push({x:T.x,y:T.y}),B.push({x:T.x+T.width,y:T.y+T.height}),B.push({x:T.x+T.width,y:T.y}),B.push({x:T.x,y:T.y+T.height})}),B}function sN(T,B){return 0<T.dot(B)}function SN(){this._vertexMap={},this._lineMap={},this._lineList=[]}function yN(T,B,G,H,f,v,J){G=[G,f],T[0]===H&&G.reverse(),f=[G[0]._key,G[1]._key].join("|"),(H=T._triangles[f])||(T._triangles[f]=H={}),H[G=[v._key,J._key].join("|")]||(H[G]=[v,J])}function xN(T,B,G){var H=T._planes[G._key];if(!H)for(var f in T._planes)if((f=T._planes[f])._normal.angleTo(G)<.001){H=f;break}H?H._vertices.indexOf(B)<0&&H._vertices.push(B):T._planes[G._key]={_normal:G,_vertices:[B]}}function wN(T,B){return 0===B?"0|0|0":(Math.abs(B)===1/0?[T.x,T.y,T.z]:[Math.round(ec.angleTo(T)*B),Math.round(cc.angleTo(T)*B),Math.round(tc.angleTo(T)*B)]).join("|")}function ON(T){for(var B=T.length,G=0,H=B-1,f=0;f<B;H=f++)G+=T[H].x*T[f].y-T[f].x*T[H].y;return.5*G}function _N(T){return(T%=mt)<0&&(T+=mt),o<T?mt-T:T}function pN(T,B){return _N(T[0]-B[0])+_N(T[1]-B[1])+_N(T[2]-B[2])}function qN(T,B,G,H,f,v){B=new b(B.get(G)),v=v.apply(B),T.push({local:B,world:v,type:f,index:G,realIndex:H})}function uN(T,B){var G=T.x-B.x;return G*G+(T=T.y-B.y)*T}function iN(B,G,T){return{def:B,getter:T?function(T){return 1<dE.for(T).version?T.getParameter(G):B}:function(T){return T.getParameter(G)},setter:T?function(T,B){1<dE.for(T).version&&T.pixelStorei(G,B)}:function(T,B){T.pixelStorei(G,B)}}}function IN(T){return"string"==typeof T?U0(T):T.r!==Ht?(M8[0]=T.r,M8[1]=T.g,M8[2]=T.b,M8[3]=T.a,M8):T.red!==Ht?(M8[0]=T.red,M8[1]=T.green,M8[2]=T.blue,M8[3]=T.alpha,M8):T}function DN(T){return ZN(T)?Array.prototype.slice.call(T,0):T}function hN(T,B,G){this.gl=B,this._record=G||{},this._branches={},this._leafSync={};for(var H=(this._struct=T).children,f=H.length;f--;){var v=H[f],J=v.name;v.isLeaf?(this._leafSync[J]=!1,this._record[J]=DN(v.desc.def)):this._record[J]={}}}function oN(T){for(var B=1;B<arguments.length;B++){var G=arguments[B];T.push(G.x,G.y,G.z)}}function eN(T,B,G,H,f){var v=-H*Mt(f),H=H*Yt(f);return new Zt(T.x+v*G.x+H*B.x,T.y+v*G.y+H*B.y,T.z+v*G.z+H*B.z)}function cN(T,B,G,H,f,v,J,M,Y){Y=Y||mt;var m=B?T.top_vs:T.bottom_vs;if(m)for(var E,Z,R=B?T.top_uv:T.bottom_uv,A=Y/J,g=0;g<J;g++)B?(E=g*A+M,Z=(g+1)*A+M):(Z=g*A+M,E=(g+1)*A+M),oN(m,eN(G,H,f,v,E),eN(G,H,f,v,Z),G),R&&R.push(.5-.5*Mt(E),.5-.5*Yt(E),.5-.5*Mt(Z),.5-.5*Yt(Z),.5,.5)}function tN(G){var H={};return{get:function(T){if(H[T]!==Ht)return H[T];var B;switch(T){case"WEBGL_depth_texture":B=G.getExtension("WEBGL_depth_texture")||G.getExtension("MOZ_WEBGL_depth_texture")||G.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":B=G.getExtension("EXT_texture_filter_anisotropic")||G.getExtension("MOZ_EXT_texture_filter_anisotropic")||G.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":B=G.getExtension("WEBGL_compressed_texture_s3tc")||G.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||G.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":B=G.getExtension("WEBGL_compressed_texture_pvrtc")||G.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":B=G.getExtension("WEBGL_compressed_texture_etc1");break;default:B=G.getExtension(T)}return H[T]=B}}}function dN(B,G,T){var H;function f(T){if("highp"===T){if(0<B.getShaderPrecisionFormat(35633,36338).precision&&0<B.getShaderPrecisionFormat(35632,36338).precision)return"highp";T="mediump"}return"mediump"===T&&0<B.getShaderPrecisionFormat(35633,36337).precision&&0<B.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}T=T||{};var v,J="undefined"!=typeof WebGL2RenderingContext&&B instanceof WebGL2RenderingContext,M=T.precision!==Ht?T.precision:"highp",Y=((Y=f(M))!==M&&(console.warn("WebGL:",M,"not supported, using",Y,"instead."),M=Y),!0===T.logarithmicDepthBuffer),T=B.getParameter(34930),m=B.getParameter(35660),E=B.getParameter(3379),Z=B.getParameter(34076),R=B.getParameter(34921),A=B.getParameter(36347),g=B.getParameter(36348),F=B.getParameter(36349),W=0<m,s=J||!!G.get("OES_texture_float"),S=(J||!!G.get("OES_element_index_uint"))&&"undefined"!=typeof Uint32Array,y=W&&s,x=J?B.getParameter(36183):0,w=J||!!G.get("EXT_shader_texture_lod"),O=!1;return J?O=!0:(v=G.get("ANGLE_instanced_arrays"))&&(O=!0,B.vertexAttribDivisor=function(T,B){return v.vertexAttribDivisorANGLE(T,B)},B.drawElementsInstanced=function(T,B,G,H,f){return v.drawElementsInstancedANGLE(T,B,G,H,f)},B.drawArraysInstanced=function(T,B,G,H){return v.drawArraysInstancedANGLE(T,B,G,H)}),J?G.get("EXT_color_buffer_float"):(G.get("WEBGL_depth_texture"),G.get("OES_texture_half_float"),G.get("OES_texture_half_float_linear"),G.get("OES_standard_derivatives"),G.get("OES_vertex_array_object")),G.get("OES_texture_float_linear"),G.get("EXT_color_buffer_half_float"),G.get("WEBGL_multisampled_render_to_texture"),{isWebGL2:J,getMaxAnisotropy:function(){if(H!==Ht)return H;var T=G.get("EXT_texture_filter_anisotropic");return H=null!==T?B.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:f,precision:M,precisionString:"precision "+M+" float;\nprecision "+M+" int;\n",logarithmicDepthBuffer:Y,maxTextures:T,maxVertexTextures:m,maxTextureSize:E,maxCubemapSize:Z,maxAttributes:R,maxVertexUniforms:A,maxVaryings:g,maxFragmentUniforms:F,vertexTextures:W,floatFragmentTextures:s,elementTypeUint:S,floatVertexTextures:y,maxSamples:x,shaderTextureLod:w,instancedArray:O}}function NN(B,f,T,G){if(G||!T.isWebGL2||"undefined"==typeof WeakMap)return{supportsUbo:!1,setCurrentFrameRenderId:y};var H,v={},G=f.getParameter(35375),J=new WeakMap;return(H=v.scene=new no(f,0,"scene","Scene")).addUniform("uProjectMatrix",16),H.addUniform("uViewMatrix",16),H.addUniform("uCameraPosition",3),H.addUniform("uTime",1),H.addUniform("toneMappingExposure",1),H.addUniform("uFogColor",4),H.addUniform("uFogDensity",1),H.addUniform("uFogNear",1),H.addUniform("uFogFar",1),H.attachSource(),["pbr","phong"].forEach(function(T){(H=v[T]=new no(f,1,T,"Material")).addUniform("aoMapIntensity",1),H.addUniform("lightMapIntensity",1),H.addUniform("displacementScale",1),H.addUniform("displacementBias",1),H.addUniform("diffuse",3),H.addUniform("emissive",3),H.addUniform("normalScale",2),H.addUniform("opacity",1),H.addUniform("alphaTest",1),H.addUniform("fresnelIntensity",1),H.addUniform("uUvMatrix",12),H.addUniform("uUv2Matrix",12),"pbr"===T?(H.addUniform("roughness",1),H.addUniform("metalness",1),H.addUniform("transmission",1),H.addUniform("thickness",1),H.addUniform("ior",1),H.addUniform("specularIntensity",1),H.addUniform("rimPower",1),H.addUniform("rimColor",3),H.addUniform("specularColor",3)):(H.addUniform("shininess",1),H.addUniform("refractionRatio",1),H.addUniform("specular",3))}),{supportsUbo:!0,maxBindingPoints:G,setCurrentFrameRenderId:function(T){(T=v.scene).attachSource(),T.uProjectMatrix=B._projectMatrix,T.uViewMatrix=B._viewMatrix,T.uCameraPosition=B.getEye(),T.uTime=B.__uptime,T.toneMappingExposure=B.getToneMappingExposure(),T.uFogColor=U0(B._fogColor),T.uFogDensity=B._fogDensity,T.uFogNear=B._fogNear,T.uFogFar=B._fogFar},updateAndBind:function(T,B){var G,T=v[T],H=J.get(B);H===Ht&&(H=new WeakMap,J.set(B,H)),H.get(T)===Ht&&(G=f.getUniformBlockIndex(B,T.name),f.uniformBlockBinding(B,G,T.bindingPointIndex),H.set(T,G))},attachUbo:function(T,B,G){return v[T].attachSource(B,G)}}}function QN(){return l8.length?l8.pop():new K}function LN(T){l8.push(T)}function jN(T,B){if(T)return(T=T.s("matDef"))&&T[B]}function rN(T,B){var G,H,f,v=QN();if(Y=T.composedMatrix)return v.copy(Y),v;var J,M,Y=!1,B=(B&&(M=T.name)&&(B=B._animationId)&&(B=PZ.getAnimationMap()[B])&&(J=B.clip)&&(B=PZ.getAnimationTracks()[B.animation][0][M])&&(M=J.datas,Y=!0,(J=B[0])!==Ht&&(G=M[J]),(J=B[1])!==Ht&&(f=M[J]),(J=B[2])!==Ht&&(H=M[J])),T.transformData);return Y&&B?Ex(v,B,G,f,H):(G=G||T.position,H=H||T.scale,f=(f=f||T.quaternion)||(f=T.euler)&&l.eulerArrayToQuaternionArray(f,K8),v.composeFromArray(G,f,H),v)}function XN(T,B){return r8=T,j8=B instanceof L.Data?(Rt=B,null):(Rt=null,B),[r8,Rt,j8]}function UN(T){r8=T[0],Rt=T[1],j8=T[2]}function lN(T){if(T){var B=(T="string"==typeof T?{type:T}:T).type;if(B&&"raw"!==B){var G=vt.meshTypeMap[B];if(!(G=G?G(T):vt.getMesh(B)))return!1}else G=T;return G.func?G.func(G):G}}function bN(T,B){return[T[0]*B,T[1]*B,T[2]*B]}function KN(T,B,G){return(B=B[T])!==Ht?B:G?G[T]:null}function zN(T,B,G){T.uUseSkinning=!0,T.bindMatrix=B.skeleton.bindMatrix,T.bindMatrixInverse=B.skeleton.bindMatrixInverse,T.boneTexture=G,T.boneTextureSize=B.boneTextureSize}function nN(T){var B=((B=T.s("light.intensity"))==ft?1:B)*Math.PI;return[(T=U0(T.s(LE)))[0]*B,T[1]*B,T[2]*B]}function $N(T,B,G,H){if(H!==T._lastHeadlightAmbientIntensity&&(T.hemisphereLight.skyColor=bN(k8.color,1-H),T.ambientLightColor=bN(k8.color,H),T._lastHeadlightAmbientIntensity=H),G!==T._lastLightMask&&(T._lastLightMask=G,H=B._lastLightUploadInfo)){for(var f,v=H.g,J=v.length,M=new Array(J),Y=0;Y<J;Y++)f=v[Y],M[Y]=!(f<0||32<=f||!(G&1<<f));T.hemisphereLight.enabled=M[0];var H=B._59O,m=B._spots,E=B._dirs,B=B._87I,Z=1;if(J=H.length)for(Y=0;Y<J;Y++)T.pointLights[Y].enabled=M[Z++];if(J=m.length)for(Y=0;Y<J;Y++)T.spotLights[Y].enabled=M[Z++];if(J=E.length)for(Y=0;Y<J;Y++)T.directionalLights[Y].enabled=M[Z++];if(J=B.length)for(Y=0;Y<J;Y++)T.rectAreaLights[Y].enabled=M[Z++]}}function VN(T,N,Q,B,G){var H=G?B.cacheShadow:B.cache;if(H.length===B.length&&H.version===(G?B.shadowVersion:B.msVersion)&&H.id===N._id&&Q.equals(H.matrix))return H.buffer;var f,v,J,M,Y,m,E,Z,R,A,g,F,W,s,S,y,x,w=B.ms,L=G?B.shadow:null,O=(C8.fromArray(T.getData3dUI(N).mat),a8.copy(Q).premultiply(C8.getInverse(C8)),(T=a8.getElements())[0]),_=T[4],p=T[8],q=T[12],u=T[1],i=T[5],I=T[9],D=T[13],h=T[2],o=T[6],e=T[10],c=T[14],t=T[3],j=T[7],r=T[11],X=T[15],T=16*B.length;H.buffer&&H.buffer.length===T?delete(x=H.buffer)._bufId:x=new Fs(T);for(var d=0,U=T;d<U;d+=16)L&&!L[d>>4]?x[d+0]=x[d+1]=x[d+2]=x[d+3]=x[d+4]=x[d+5]=x[d+6]=x[d+7]=x[d+8]=x[d+9]=x[d+10]=x[d+11]=x[d+12]=x[d+13]=x[d+14]=x[d+15]=0:(f=w[d+0],v=w[d+4],J=w[d+8],M=w[d+12],Y=w[d+1],m=w[d+5],E=w[d+9],Z=w[d+13],R=w[d+2],A=w[d+6],g=w[d+10],F=w[d+14],W=w[d+3],s=w[d+7],S=w[d+11],y=w[d+15],x[d+0]=f*O+v*u+J*h+M*t,x[d+4]=f*_+v*i+J*o+M*j,x[d+8]=f*p+v*I+J*e+M*r,x[d+12]=f*q+v*D+J*c+M*X,x[d+1]=Y*O+m*u+E*h+Z*t,x[d+5]=Y*_+m*i+E*o+Z*j,x[d+9]=Y*p+m*I+E*e+Z*r,x[d+13]=Y*q+m*D+E*c+Z*X,x[d+2]=R*O+A*u+g*h+F*t,x[d+6]=R*_+A*i+g*o+F*j,x[d+10]=R*p+A*I+g*e+F*r,x[d+14]=R*q+A*D+g*c+F*X,x[d+3]=W*O+s*u+S*h+y*t,x[d+7]=W*_+s*i+S*o+y*j,x[d+11]=W*p+s*I+S*e+y*r,x[d+15]=W*q+s*D+S*c+y*X);return H.length=B.length,H.version=G?B.shadowVersion:B.msVersion,H.id=N._id,H.buffer=x,(T=(T=H.matrix)?T:H.matrix=new K).fromArray(Q.getElements()),x}function PN(T,B,G){G instanceof L.Node&&(ZA.fromArray(hs(G,B.getMat(G))),B=G.getAnchor3d(),T.push((new Zt).set(0-B.x,0-B.y,0-B.z).applyMatrix4(ZA)),T.push((new Zt).set(0-B.x,0-B.y,1-B.z).applyMatrix4(ZA)),T.push((new Zt).set(0-B.x,1-B.y,0-B.z).applyMatrix4(ZA)),T.push((new Zt).set(0-B.x,1-B.y,1-B.z).applyMatrix4(ZA)),T.push((new Zt).set(1-B.x,0-B.y,0-B.z).applyMatrix4(ZA)),T.push((new Zt).set(1-B.x,0-B.y,1-B.z).applyMatrix4(ZA)),T.push((new Zt).set(1-B.x,1-B.y,0-B.z).applyMatrix4(ZA)),T.push((new Zt).set(1-B.x,1-B.y,1-B.z).applyMatrix4(ZA)))}function kN(T,B,G){var H=T[B];H&&H.releaseTexture(),G?T[B]=G:delete T[B]}function CN(T,B){return T.z!==B.z?B.z-T.z:T.id-B.id}function aN(){var T=new Zt;return T.subVectors(PA,VA),TE.subVectors($A,VA),T.cross(TE).normalize(),T}function TP(T,B){var G,H;B=l.roundFloat(B,3),T.speed=B,"once"===T.loop&&(G=T.duration,H=T.start,T.end=0===B?H:(B<0?Math.floor((H-1e-8)/G):Math.ceil((H+1e-8)/G))*G)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);